(function(Xt,Te){typeof exports=="object"&&typeof module<"u"?Te(exports,require("react"),require("react-dom"),require("@mui/material"),require("@emotion/styled"),require("@emotion/react")):typeof define=="function"&&define.amd?define(["exports","react","react-dom","@mui/material","@emotion/styled","@emotion/react"],Te):(Xt=typeof globalThis<"u"?globalThis:Xt||self,Te(Xt.ImageEditor={},Xt.React,Xt.ReactDOM,Xt.MuiMaterial,Xt.EmotionStyled))})(this,function(Xt,Te,Yn,xe,Nv){"use strict";var S3=Object.defineProperty;var T3=(Xt,Te,Yn)=>Te in Xt?S3(Xt,Te,{enumerable:!0,configurable:!0,writable:!0,value:Yn}):Xt[Te]=Yn;var Le=(Xt,Te,Yn)=>(T3(Xt,typeof Te!="symbol"?Te+"":Te,Yn),Yn);function Vv(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const h=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,h.get?h:{enumerable:!0,get:()=>t[o]})}}return e.default=t,Object.freeze(e)}const Ae=Vv(Te);var Ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var o=function h(){return this instanceof h?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(t).forEach(function(h){var v=Object.getOwnPropertyDescriptor(t,h);Object.defineProperty(o,h,v.get?v:{enumerable:!0,get:function(){return t[h]}})}),o}var Ka={exports:{}},eo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc;function Uv(){if(Fc)return eo;Fc=1;var t=Te,e=Symbol.for("react.element"),o=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function C(E,D,p){var i,d={},c=null,n=null;p!==void 0&&(c=""+p),D.key!==void 0&&(c=""+D.key),D.ref!==void 0&&(n=D.ref);for(i in D)h.call(D,i)&&!w.hasOwnProperty(i)&&(d[i]=D[i]);if(E&&E.defaultProps)for(i in D=E.defaultProps,D)d[i]===void 0&&(d[i]=D[i]);return{$$typeof:e,type:E,key:c,ref:n,props:d,_owner:v.current}}return eo.Fragment=o,eo.jsx=C,eo.jsxs=C,eo}var to={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc;function Yv(){return Bc||(Bc=1,process.env.NODE_ENV!=="production"&&function(){var t=Te,e=Symbol.for("react.element"),o=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),i=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a=Symbol.iterator,s="@@iterator";function l(X){if(X===null||typeof X!="object")return null;var Se=a&&X[a]||X[s];return typeof Se=="function"?Se:null}var g=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function u(X){{for(var Se=arguments.length,De=new Array(Se>1?Se-1:0),We=1;We<Se;We++)De[We-1]=arguments[We];m("error",X,De)}}function m(X,Se,De){{var We=g.ReactDebugCurrentFrame,ot=We.getStackAddendum();ot!==""&&(Se+="%s",De=De.concat([ot]));var pt=De.map(function(tt){return String(tt)});pt.unshift("Warning: "+Se),Function.prototype.apply.call(console[X],console,pt)}}var y=!1,b=!1,x=!1,T=!1,M=!1,I;I=Symbol.for("react.module.reference");function R(X){return!!(typeof X=="string"||typeof X=="function"||X===h||X===w||M||X===v||X===p||X===i||T||X===n||y||b||x||typeof X=="object"&&X!==null&&(X.$$typeof===c||X.$$typeof===d||X.$$typeof===C||X.$$typeof===E||X.$$typeof===D||X.$$typeof===I||X.getModuleId!==void 0))}function W(X,Se,De){var We=X.displayName;if(We)return We;var ot=Se.displayName||Se.name||"";return ot!==""?De+"("+ot+")":De}function K(X){return X.displayName||"Context"}function $(X){if(X==null)return null;if(typeof X.tag=="number"&&u("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof X=="function")return X.displayName||X.name||null;if(typeof X=="string")return X;switch(X){case h:return"Fragment";case o:return"Portal";case w:return"Profiler";case v:return"StrictMode";case p:return"Suspense";case i:return"SuspenseList"}if(typeof X=="object")switch(X.$$typeof){case E:var Se=X;return K(Se)+".Consumer";case C:var De=X;return K(De._context)+".Provider";case D:return W(X,X.render,"ForwardRef");case d:var We=X.displayName||null;return We!==null?We:$(X.type)||"Memo";case c:{var ot=X,pt=ot._payload,tt=ot._init;try{return $(tt(pt))}catch{return null}}}return null}var ae=Object.assign,ce=0,fe,le,ye,Ee,ne,P,B;function F(){}F.__reactDisabledLog=!0;function L(){{if(ce===0){fe=console.log,le=console.info,ye=console.warn,Ee=console.error,ne=console.group,P=console.groupCollapsed,B=console.groupEnd;var X={configurable:!0,enumerable:!0,value:F,writable:!0};Object.defineProperties(console,{info:X,log:X,warn:X,error:X,group:X,groupCollapsed:X,groupEnd:X})}ce++}}function G(){{if(ce--,ce===0){var X={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ae({},X,{value:fe}),info:ae({},X,{value:le}),warn:ae({},X,{value:ye}),error:ae({},X,{value:Ee}),group:ae({},X,{value:ne}),groupCollapsed:ae({},X,{value:P}),groupEnd:ae({},X,{value:B})})}ce<0&&u("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var O=g.ReactCurrentDispatcher,k;function V(X,Se,De){{if(k===void 0)try{throw Error()}catch(ot){var We=ot.stack.trim().match(/\n( *(at )?)/);k=We&&We[1]||""}return`
`+k+X}}var z=!1,Z;{var J=typeof WeakMap=="function"?WeakMap:Map;Z=new J}function U(X,Se){if(!X||z)return"";{var De=Z.get(X);if(De!==void 0)return De}var We;z=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var pt;pt=O.current,O.current=null,L();try{if(Se){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(or){We=or}Reflect.construct(X,[],tt)}else{try{tt.call()}catch(or){We=or}X.call(tt.prototype)}}else{try{throw Error()}catch(or){We=or}X()}}catch(or){if(or&&We&&typeof or.stack=="string"){for(var Ze=or.stack.split(`
`),Ht=We.stack.split(`
`),Et=Ze.length-1,Mt=Ht.length-1;Et>=1&&Mt>=0&&Ze[Et]!==Ht[Mt];)Mt--;for(;Et>=1&&Mt>=0;Et--,Mt--)if(Ze[Et]!==Ht[Mt]){if(Et!==1||Mt!==1)do if(Et--,Mt--,Mt<0||Ze[Et]!==Ht[Mt]){var ir=`
`+Ze[Et].replace(" at new "," at ");return X.displayName&&ir.includes("<anonymous>")&&(ir=ir.replace("<anonymous>",X.displayName)),typeof X=="function"&&Z.set(X,ir),ir}while(Et>=1&&Mt>=0);break}}}finally{z=!1,O.current=pt,G(),Error.prepareStackTrace=ot}var zr=X?X.displayName||X.name:"",la=zr?V(zr):"";return typeof X=="function"&&Z.set(X,la),la}function he(X,Se,De){return U(X,!1)}function ie(X){var Se=X.prototype;return!!(Se&&Se.isReactComponent)}function ee(X,Se,De){if(X==null)return"";if(typeof X=="function")return U(X,ie(X));if(typeof X=="string")return V(X);switch(X){case p:return V("Suspense");case i:return V("SuspenseList")}if(typeof X=="object")switch(X.$$typeof){case D:return he(X.render);case d:return ee(X.type,Se,De);case c:{var We=X,ot=We._payload,pt=We._init;try{return ee(pt(ot),Se,De)}catch{}}}return""}var Q=Object.prototype.hasOwnProperty,se={},de=g.ReactDebugCurrentFrame;function ue(X){if(X){var Se=X._owner,De=ee(X.type,X._source,Se?Se.type:null);de.setExtraStackFrame(De)}else de.setExtraStackFrame(null)}function pe(X,Se,De,We,ot){{var pt=Function.call.bind(Q);for(var tt in X)if(pt(X,tt)){var Ze=void 0;try{if(typeof X[tt]!="function"){var Ht=Error((We||"React class")+": "+De+" type `"+tt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof X[tt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ht.name="Invariant Violation",Ht}Ze=X[tt](Se,tt,We,De,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Et){Ze=Et}Ze&&!(Ze instanceof Error)&&(ue(ot),u("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",We||"React class",De,tt,typeof Ze),ue(null)),Ze instanceof Error&&!(Ze.message in se)&&(se[Ze.message]=!0,ue(ot),u("Failed %s type: %s",De,Ze.message),ue(null))}}}var be=Array.isArray;function Ie(X){return be(X)}function Pe(X){{var Se=typeof Symbol=="function"&&Symbol.toStringTag,De=Se&&X[Symbol.toStringTag]||X.constructor.name||"Object";return De}}function oe(X){try{return Oe(X),!1}catch{return!0}}function Oe(X){return""+X}function Fe(X){if(oe(X))return u("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pe(X)),Oe(X)}var Ne=g.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0},et,Dt,_t;_t={};function yr(X){if(Q.call(X,"ref")){var Se=Object.getOwnPropertyDescriptor(X,"ref").get;if(Se&&Se.isReactWarning)return!1}return X.ref!==void 0}function Hr(X){if(Q.call(X,"key")){var Se=Object.getOwnPropertyDescriptor(X,"key").get;if(Se&&Se.isReactWarning)return!1}return X.key!==void 0}function qt(X,Se){if(typeof X.ref=="string"&&Ne.current&&Se&&Ne.current.stateNode!==Se){var De=$(Ne.current.type);_t[De]||(u('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',$(Ne.current.type),X.ref),_t[De]=!0)}}function ci(X,Se){{var De=function(){et||(et=!0,u("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Se))};De.isReactWarning=!0,Object.defineProperty(X,"key",{get:De,configurable:!0})}}function Rn(X,Se){{var De=function(){Dt||(Dt=!0,u("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Se))};De.isReactWarning=!0,Object.defineProperty(X,"ref",{get:De,configurable:!0})}}var fi=function(X,Se,De,We,ot,pt,tt){var Ze={$$typeof:e,type:X,key:Se,ref:De,props:tt,_owner:pt};return Ze._store={},Object.defineProperty(Ze._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ze,"_self",{configurable:!1,enumerable:!1,writable:!1,value:We}),Object.defineProperty(Ze,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ot}),Object.freeze&&(Object.freeze(Ze.props),Object.freeze(Ze)),Ze};function jo(X,Se,De,We,ot){{var pt,tt={},Ze=null,Ht=null;De!==void 0&&(Fe(De),Ze=""+De),Hr(Se)&&(Fe(Se.key),Ze=""+Se.key),yr(Se)&&(Ht=Se.ref,qt(Se,ot));for(pt in Se)Q.call(Se,pt)&&!Xe.hasOwnProperty(pt)&&(tt[pt]=Se[pt]);if(X&&X.defaultProps){var Et=X.defaultProps;for(pt in Et)tt[pt]===void 0&&(tt[pt]=Et[pt])}if(Ze||Ht){var Mt=typeof X=="function"?X.displayName||X.name||"Unknown":X;Ze&&ci(tt,Mt),Ht&&Rn(tt,Mt)}return fi(X,Ze,Ht,ot,We,Ne.current,tt)}}var Lo=g.ReactCurrentOwner,ra=g.ReactDebugCurrentFrame;function pn(X){if(X){var Se=X._owner,De=ee(X.type,X._source,Se?Se.type:null);ra.setExtraStackFrame(De)}else ra.setExtraStackFrame(null)}var Bi;Bi=!1;function Fo(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function na(){{if(Lo.current){var X=$(Lo.current.type);if(X)return`

Check the render method of \``+X+"`."}return""}}function bl(X){{if(X!==void 0){var Se=X.fileName.replace(/^.*[\\\/]/,""),De=X.lineNumber;return`

Check your code at `+Se+":"+De+"."}return""}}var ia={};function oa(X){{var Se=na();if(!Se){var De=typeof X=="string"?X:X.displayName||X.name;De&&(Se=`

Check the top-level render call using <`+De+">.")}return Se}}function sa(X,Se){{if(!X._store||X._store.validated||X.key!=null)return;X._store.validated=!0;var De=oa(Se);if(ia[De])return;ia[De]=!0;var We="";X&&X._owner&&X._owner!==Lo.current&&(We=" It was passed a child from "+$(X._owner.type)+"."),pn(X),u('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',De,We),pn(null)}}function aa(X,Se){{if(typeof X!="object")return;if(Ie(X))for(var De=0;De<X.length;De++){var We=X[De];Fo(We)&&sa(We,Se)}else if(Fo(X))X._store&&(X._store.validated=!0);else if(X){var ot=l(X);if(typeof ot=="function"&&ot!==X.entries)for(var pt=ot.call(X),tt;!(tt=pt.next()).done;)Fo(tt.value)&&sa(tt.value,Se)}}}function wl(X){{var Se=X.type;if(Se==null||typeof Se=="string")return;var De;if(typeof Se=="function")De=Se.propTypes;else if(typeof Se=="object"&&(Se.$$typeof===D||Se.$$typeof===d))De=Se.propTypes;else return;if(De){var We=$(Se);pe(De,X.props,"prop",We,X)}else if(Se.PropTypes!==void 0&&!Bi){Bi=!0;var ot=$(Se);u("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ot||"Unknown")}typeof Se.getDefaultProps=="function"&&!Se.getDefaultProps.isReactClassApproved&&u("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Bo(X){{for(var Se=Object.keys(X.props),De=0;De<Se.length;De++){var We=Se[De];if(We!=="children"&&We!=="key"){pn(X),u("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",We),pn(null);break}}X.ref!==null&&(pn(X),u("Invalid attribute `ref` supplied to `React.Fragment`."),pn(null))}}function ua(X,Se,De,We,ot,pt){{var tt=R(X);if(!tt){var Ze="";(X===void 0||typeof X=="object"&&X!==null&&Object.keys(X).length===0)&&(Ze+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ht=bl(ot);Ht?Ze+=Ht:Ze+=na();var Et;X===null?Et="null":Ie(X)?Et="array":X!==void 0&&X.$$typeof===e?(Et="<"+($(X.type)||"Unknown")+" />",Ze=" Did you accidentally export a JSX literal instead of a component?"):Et=typeof X,u("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Et,Ze)}var Mt=jo(X,Se,De,ot,pt);if(Mt==null)return Mt;if(tt){var ir=Se.children;if(ir!==void 0)if(We)if(Ie(ir)){for(var zr=0;zr<ir.length;zr++)aa(ir[zr],X);Object.freeze&&Object.freeze(ir)}else u("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else aa(ir,X)}return X===h?Bo(Mt):wl(Mt),Mt}}function No(X,Se,De){return ua(X,Se,De,!0)}function xl(X,Se,De){return ua(X,Se,De,!1)}var Cl=xl,Sl=No;to.Fragment=h,to.jsx=Cl,to.jsxs=Sl}()),to}process.env.NODE_ENV==="production"?Ka.exports=Uv():Ka.exports=Yv();var Y=Ka.exports;function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(t[h]=o[h])}return t},nt.apply(this,arguments)}function Wn(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Nc(t){if(!Wn(t))return t;const e={};return Object.keys(t).forEach(o=>{e[o]=Nc(t[o])}),e}function sn(t,e,o={clone:!0}){const h=o.clone?nt({},t):t;return Wn(t)&&Wn(e)&&Object.keys(e).forEach(v=>{v!=="__proto__"&&(Wn(e[v])&&v in t&&Wn(t[v])?h[v]=sn(t[v],e[v],o):o.clone?h[v]=Wn(e[v])?Nc(e[v]):e[v]:h[v]=e[v])}),h}var Qa={exports:{}},ts={exports:{}},ut={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc;function Wv(){if(Vc)return ut;Vc=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,o=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,D=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,i=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,l=t?Symbol.for("react.fundamental"):60117,g=t?Symbol.for("react.responder"):60118,u=t?Symbol.for("react.scope"):60119;function m(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case e:switch(b=b.type,b){case D:case p:case h:case w:case v:case d:return b;default:switch(b=b&&b.$$typeof,b){case E:case i:case a:case n:case C:return b;default:return x}}case o:return x}}}function y(b){return m(b)===p}return ut.AsyncMode=D,ut.ConcurrentMode=p,ut.ContextConsumer=E,ut.ContextProvider=C,ut.Element=e,ut.ForwardRef=i,ut.Fragment=h,ut.Lazy=a,ut.Memo=n,ut.Portal=o,ut.Profiler=w,ut.StrictMode=v,ut.Suspense=d,ut.isAsyncMode=function(b){return y(b)||m(b)===D},ut.isConcurrentMode=y,ut.isContextConsumer=function(b){return m(b)===E},ut.isContextProvider=function(b){return m(b)===C},ut.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},ut.isForwardRef=function(b){return m(b)===i},ut.isFragment=function(b){return m(b)===h},ut.isLazy=function(b){return m(b)===a},ut.isMemo=function(b){return m(b)===n},ut.isPortal=function(b){return m(b)===o},ut.isProfiler=function(b){return m(b)===w},ut.isStrictMode=function(b){return m(b)===v},ut.isSuspense=function(b){return m(b)===d},ut.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===h||b===p||b===w||b===v||b===d||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===a||b.$$typeof===n||b.$$typeof===C||b.$$typeof===E||b.$$typeof===i||b.$$typeof===l||b.$$typeof===g||b.$$typeof===u||b.$$typeof===s)},ut.typeOf=m,ut}var lt={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc;function Hv(){return Uc||(Uc=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,o=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,D=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,i=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,l=t?Symbol.for("react.fundamental"):60117,g=t?Symbol.for("react.responder"):60118,u=t?Symbol.for("react.scope"):60119;function m(U){return typeof U=="string"||typeof U=="function"||U===h||U===p||U===w||U===v||U===d||U===c||typeof U=="object"&&U!==null&&(U.$$typeof===a||U.$$typeof===n||U.$$typeof===C||U.$$typeof===E||U.$$typeof===i||U.$$typeof===l||U.$$typeof===g||U.$$typeof===u||U.$$typeof===s)}function y(U){if(typeof U=="object"&&U!==null){var he=U.$$typeof;switch(he){case e:var ie=U.type;switch(ie){case D:case p:case h:case w:case v:case d:return ie;default:var ee=ie&&ie.$$typeof;switch(ee){case E:case i:case a:case n:case C:return ee;default:return he}}case o:return he}}}var b=D,x=p,T=E,M=C,I=e,R=i,W=h,K=a,$=n,ae=o,ce=w,fe=v,le=d,ye=!1;function Ee(U){return ye||(ye=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ne(U)||y(U)===D}function ne(U){return y(U)===p}function P(U){return y(U)===E}function B(U){return y(U)===C}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){return y(U)===i}function G(U){return y(U)===h}function O(U){return y(U)===a}function k(U){return y(U)===n}function V(U){return y(U)===o}function z(U){return y(U)===w}function Z(U){return y(U)===v}function J(U){return y(U)===d}lt.AsyncMode=b,lt.ConcurrentMode=x,lt.ContextConsumer=T,lt.ContextProvider=M,lt.Element=I,lt.ForwardRef=R,lt.Fragment=W,lt.Lazy=K,lt.Memo=$,lt.Portal=ae,lt.Profiler=ce,lt.StrictMode=fe,lt.Suspense=le,lt.isAsyncMode=Ee,lt.isConcurrentMode=ne,lt.isContextConsumer=P,lt.isContextProvider=B,lt.isElement=F,lt.isForwardRef=L,lt.isFragment=G,lt.isLazy=O,lt.isMemo=k,lt.isPortal=V,lt.isProfiler=z,lt.isStrictMode=Z,lt.isSuspense=J,lt.isValidElementType=m,lt.typeOf=y}()),lt}var Yc;function Wc(){return Yc||(Yc=1,process.env.NODE_ENV==="production"?ts.exports=Wv():ts.exports=Hv()),ts.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Za,Hc;function zv(){if(Hc)return Za;Hc=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function h(w){if(w==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(w)}function v(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var C={},E=0;E<10;E++)C["_"+String.fromCharCode(E)]=E;var D=Object.getOwnPropertyNames(C).map(function(i){return C[i]});if(D.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(i){p[i]=i}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Za=v()?Object.assign:function(w,C){for(var E,D=h(w),p,i=1;i<arguments.length;i++){E=Object(arguments[i]);for(var d in E)e.call(E,d)&&(D[d]=E[d]);if(t){p=t(E);for(var c=0;c<p.length;c++)o.call(E,p[c])&&(D[p[c]]=E[p[c]])}}return D},Za}var Ja,zc;function eu(){if(zc)return Ja;zc=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ja=t,Ja}var tu,Gc;function Xc(){return Gc||(Gc=1,tu=Function.call.bind(Object.prototype.hasOwnProperty)),tu}var ru,$c;function Gv(){if($c)return ru;$c=1;var t=function(){};if(process.env.NODE_ENV!=="production"){var e=eu(),o={},h=Xc();t=function(w){var C="Warning: "+w;typeof console<"u"&&console.error(C);try{throw new Error(C)}catch{}}}function v(w,C,E,D,p){if(process.env.NODE_ENV!=="production"){for(var i in w)if(h(w,i)){var d;try{if(typeof w[i]!="function"){var c=Error((D||"React class")+": "+E+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof w[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}d=w[i](C,i,D,E,null,e)}catch(a){d=a}if(d&&!(d instanceof Error)&&t((D||"React class")+": type specification of "+E+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof d+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),d instanceof Error&&!(d.message in o)){o[d.message]=!0;var n=p?p():"";t("Failed "+E+" type: "+d.message+(n??""))}}}}return v.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(o={})},ru=v,ru}var nu,qc;function Xv(){if(qc)return nu;qc=1;var t=Wc(),e=zv(),o=eu(),h=Xc(),v=Gv(),w=function(){};process.env.NODE_ENV!=="production"&&(w=function(E){var D="Warning: "+E;typeof console<"u"&&console.error(D);try{throw new Error(D)}catch{}});function C(){return null}return nu=function(E,D){var p=typeof Symbol=="function"&&Symbol.iterator,i="@@iterator";function d(ne){var P=ne&&(p&&ne[p]||ne[i]);if(typeof P=="function")return P}var c="<<anonymous>>",n={array:g("array"),bigint:g("bigint"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:u(),arrayOf:m,element:y(),elementType:b(),instanceOf:x,node:R(),objectOf:M,oneOf:T,oneOfType:I,shape:K,exact:$};function a(ne,P){return ne===P?ne!==0||1/ne===1/P:ne!==ne&&P!==P}function s(ne,P){this.message=ne,this.data=P&&typeof P=="object"?P:{},this.stack=""}s.prototype=Error.prototype;function l(ne){if(process.env.NODE_ENV!=="production")var P={},B=0;function F(G,O,k,V,z,Z,J){if(V=V||c,Z=Z||k,J!==o){if(D){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var he=V+":"+k;!P[he]&&B<3&&(w("You are manually calling a React.PropTypes validation function for the `"+Z+"` prop on `"+V+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),P[he]=!0,B++)}}return O[k]==null?G?O[k]===null?new s("The "+z+" `"+Z+"` is marked as required "+("in `"+V+"`, but its value is `null`.")):new s("The "+z+" `"+Z+"` is marked as required in "+("`"+V+"`, but its value is `undefined`.")):null:ne(O,k,V,z,Z)}var L=F.bind(null,!1);return L.isRequired=F.bind(null,!0),L}function g(ne){function P(B,F,L,G,O,k){var V=B[F],z=fe(V);if(z!==ne){var Z=le(V);return new s("Invalid "+G+" `"+O+"` of type "+("`"+Z+"` supplied to `"+L+"`, expected ")+("`"+ne+"`."),{expectedType:ne})}return null}return l(P)}function u(){return l(C)}function m(ne){function P(B,F,L,G,O){if(typeof ne!="function")return new s("Property `"+O+"` of component `"+L+"` has invalid PropType notation inside arrayOf.");var k=B[F];if(!Array.isArray(k)){var V=fe(k);return new s("Invalid "+G+" `"+O+"` of type "+("`"+V+"` supplied to `"+L+"`, expected an array."))}for(var z=0;z<k.length;z++){var Z=ne(k,z,L,G,O+"["+z+"]",o);if(Z instanceof Error)return Z}return null}return l(P)}function y(){function ne(P,B,F,L,G){var O=P[B];if(!E(O)){var k=fe(O);return new s("Invalid "+L+" `"+G+"` of type "+("`"+k+"` supplied to `"+F+"`, expected a single ReactElement."))}return null}return l(ne)}function b(){function ne(P,B,F,L,G){var O=P[B];if(!t.isValidElementType(O)){var k=fe(O);return new s("Invalid "+L+" `"+G+"` of type "+("`"+k+"` supplied to `"+F+"`, expected a single ReactElement type."))}return null}return l(ne)}function x(ne){function P(B,F,L,G,O){if(!(B[F]instanceof ne)){var k=ne.name||c,V=Ee(B[F]);return new s("Invalid "+G+" `"+O+"` of type "+("`"+V+"` supplied to `"+L+"`, expected ")+("instance of `"+k+"`."))}return null}return l(P)}function T(ne){if(!Array.isArray(ne))return process.env.NODE_ENV!=="production"&&(arguments.length>1?w("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):w("Invalid argument supplied to oneOf, expected an array.")),C;function P(B,F,L,G,O){for(var k=B[F],V=0;V<ne.length;V++)if(a(k,ne[V]))return null;var z=JSON.stringify(ne,function(J,U){var he=le(U);return he==="symbol"?String(U):U});return new s("Invalid "+G+" `"+O+"` of value `"+String(k)+"` "+("supplied to `"+L+"`, expected one of "+z+"."))}return l(P)}function M(ne){function P(B,F,L,G,O){if(typeof ne!="function")return new s("Property `"+O+"` of component `"+L+"` has invalid PropType notation inside objectOf.");var k=B[F],V=fe(k);if(V!=="object")return new s("Invalid "+G+" `"+O+"` of type "+("`"+V+"` supplied to `"+L+"`, expected an object."));for(var z in k)if(h(k,z)){var Z=ne(k,z,L,G,O+"."+z,o);if(Z instanceof Error)return Z}return null}return l(P)}function I(ne){if(!Array.isArray(ne))return process.env.NODE_ENV!=="production"&&w("Invalid argument supplied to oneOfType, expected an instance of array."),C;for(var P=0;P<ne.length;P++){var B=ne[P];if(typeof B!="function")return w("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ye(B)+" at index "+P+"."),C}function F(L,G,O,k,V){for(var z=[],Z=0;Z<ne.length;Z++){var J=ne[Z],U=J(L,G,O,k,V,o);if(U==null)return null;U.data&&h(U.data,"expectedType")&&z.push(U.data.expectedType)}var he=z.length>0?", expected one of type ["+z.join(", ")+"]":"";return new s("Invalid "+k+" `"+V+"` supplied to "+("`"+O+"`"+he+"."))}return l(F)}function R(){function ne(P,B,F,L,G){return ae(P[B])?null:new s("Invalid "+L+" `"+G+"` supplied to "+("`"+F+"`, expected a ReactNode."))}return l(ne)}function W(ne,P,B,F,L){return new s((ne||"React class")+": "+P+" type `"+B+"."+F+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+L+"`.")}function K(ne){function P(B,F,L,G,O){var k=B[F],V=fe(k);if(V!=="object")return new s("Invalid "+G+" `"+O+"` of type `"+V+"` "+("supplied to `"+L+"`, expected `object`."));for(var z in ne){var Z=ne[z];if(typeof Z!="function")return W(L,G,O,z,le(Z));var J=Z(k,z,L,G,O+"."+z,o);if(J)return J}return null}return l(P)}function $(ne){function P(B,F,L,G,O){var k=B[F],V=fe(k);if(V!=="object")return new s("Invalid "+G+" `"+O+"` of type `"+V+"` "+("supplied to `"+L+"`, expected `object`."));var z=e({},B[F],ne);for(var Z in z){var J=ne[Z];if(h(ne,Z)&&typeof J!="function")return W(L,G,O,Z,le(J));if(!J)return new s("Invalid "+G+" `"+O+"` key `"+Z+"` supplied to `"+L+"`.\nBad object: "+JSON.stringify(B[F],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ne),null,"  "));var U=J(k,Z,L,G,O+"."+Z,o);if(U)return U}return null}return l(P)}function ae(ne){switch(typeof ne){case"number":case"string":case"undefined":return!0;case"boolean":return!ne;case"object":if(Array.isArray(ne))return ne.every(ae);if(ne===null||E(ne))return!0;var P=d(ne);if(P){var B=P.call(ne),F;if(P!==ne.entries){for(;!(F=B.next()).done;)if(!ae(F.value))return!1}else for(;!(F=B.next()).done;){var L=F.value;if(L&&!ae(L[1]))return!1}}else return!1;return!0;default:return!1}}function ce(ne,P){return ne==="symbol"?!0:P?P["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&P instanceof Symbol:!1}function fe(ne){var P=typeof ne;return Array.isArray(ne)?"array":ne instanceof RegExp?"object":ce(P,ne)?"symbol":P}function le(ne){if(typeof ne>"u"||ne===null)return""+ne;var P=fe(ne);if(P==="object"){if(ne instanceof Date)return"date";if(ne instanceof RegExp)return"regexp"}return P}function ye(ne){var P=le(ne);switch(P){case"array":case"object":return"an "+P;case"boolean":case"date":case"regexp":return"a "+P;default:return P}}function Ee(ne){return!ne.constructor||!ne.constructor.name?c:ne.constructor.name}return n.checkPropTypes=v,n.resetWarningCache=v.resetWarningCache,n.PropTypes=n,n},nu}var iu,Kc;function $v(){if(Kc)return iu;Kc=1;var t=eu();function e(){}function o(){}return o.resetWarningCache=e,iu=function(){function h(C,E,D,p,i,d){if(d!==t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}h.isRequired=h;function v(){return h}var w={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:v,element:h,elementType:h,instanceOf:v,node:h,objectOf:v,oneOf:v,oneOfType:v,shape:v,exact:v,checkPropTypes:o,resetWarningCache:e};return w.PropTypes=w,w},iu}if(process.env.NODE_ENV!=="production"){var qv=Wc(),Kv=!0;Qa.exports=Xv()(qv.isElement,Kv)}else Qa.exports=$v()();var Qv=Qa.exports;const Qe=jc(Qv);function wi(t){let e="https://mui.com/production-error/?code="+t;for(let o=1;o<arguments.length;o+=1)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var ou={exports:{}},ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc;function Zv(){if(Qc)return ct;Qc=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.server_context"),D=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),i=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a;a=Symbol.for("react.module.reference");function s(l){if(typeof l=="object"&&l!==null){var g=l.$$typeof;switch(g){case t:switch(l=l.type,l){case o:case v:case h:case p:case i:return l;default:switch(l=l&&l.$$typeof,l){case E:case C:case D:case c:case d:case w:return l;default:return g}}case e:return g}}}return ct.ContextConsumer=C,ct.ContextProvider=w,ct.Element=t,ct.ForwardRef=D,ct.Fragment=o,ct.Lazy=c,ct.Memo=d,ct.Portal=e,ct.Profiler=v,ct.StrictMode=h,ct.Suspense=p,ct.SuspenseList=i,ct.isAsyncMode=function(){return!1},ct.isConcurrentMode=function(){return!1},ct.isContextConsumer=function(l){return s(l)===C},ct.isContextProvider=function(l){return s(l)===w},ct.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===t},ct.isForwardRef=function(l){return s(l)===D},ct.isFragment=function(l){return s(l)===o},ct.isLazy=function(l){return s(l)===c},ct.isMemo=function(l){return s(l)===d},ct.isPortal=function(l){return s(l)===e},ct.isProfiler=function(l){return s(l)===v},ct.isStrictMode=function(l){return s(l)===h},ct.isSuspense=function(l){return s(l)===p},ct.isSuspenseList=function(l){return s(l)===i},ct.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===o||l===v||l===h||l===p||l===i||l===n||typeof l=="object"&&l!==null&&(l.$$typeof===c||l.$$typeof===d||l.$$typeof===w||l.$$typeof===C||l.$$typeof===D||l.$$typeof===a||l.getModuleId!==void 0)},ct.typeOf=s,ct}var ft={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc;function Jv(){return Zc||(Zc=1,process.env.NODE_ENV!=="production"&&function(){var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.server_context"),D=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),i=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a=!1,s=!1,l=!1,g=!1,u=!1,m;m=Symbol.for("react.module.reference");function y(ie){return!!(typeof ie=="string"||typeof ie=="function"||ie===o||ie===v||u||ie===h||ie===p||ie===i||g||ie===n||a||s||l||typeof ie=="object"&&ie!==null&&(ie.$$typeof===c||ie.$$typeof===d||ie.$$typeof===w||ie.$$typeof===C||ie.$$typeof===D||ie.$$typeof===m||ie.getModuleId!==void 0))}function b(ie){if(typeof ie=="object"&&ie!==null){var ee=ie.$$typeof;switch(ee){case t:var Q=ie.type;switch(Q){case o:case v:case h:case p:case i:return Q;default:var se=Q&&Q.$$typeof;switch(se){case E:case C:case D:case c:case d:case w:return se;default:return ee}}case e:return ee}}}var x=C,T=w,M=t,I=D,R=o,W=c,K=d,$=e,ae=v,ce=h,fe=p,le=i,ye=!1,Ee=!1;function ne(ie){return ye||(ye=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1}function P(ie){return Ee||(Ee=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1}function B(ie){return b(ie)===C}function F(ie){return b(ie)===w}function L(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===t}function G(ie){return b(ie)===D}function O(ie){return b(ie)===o}function k(ie){return b(ie)===c}function V(ie){return b(ie)===d}function z(ie){return b(ie)===e}function Z(ie){return b(ie)===v}function J(ie){return b(ie)===h}function U(ie){return b(ie)===p}function he(ie){return b(ie)===i}ft.ContextConsumer=x,ft.ContextProvider=T,ft.Element=M,ft.ForwardRef=I,ft.Fragment=R,ft.Lazy=W,ft.Memo=K,ft.Portal=$,ft.Profiler=ae,ft.StrictMode=ce,ft.Suspense=fe,ft.SuspenseList=le,ft.isAsyncMode=ne,ft.isConcurrentMode=P,ft.isContextConsumer=B,ft.isContextProvider=F,ft.isElement=L,ft.isForwardRef=G,ft.isFragment=O,ft.isLazy=k,ft.isMemo=V,ft.isPortal=z,ft.isProfiler=Z,ft.isStrictMode=J,ft.isSuspense=U,ft.isSuspenseList=he,ft.isValidElementType=y,ft.typeOf=b}()),ft}process.env.NODE_ENV==="production"?ou.exports=Zv():ou.exports=Jv();var ro=ou.exports;const em=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function tm(t){const e=`${t}`.match(em);return e&&e[1]||""}function Jc(t,e=""){return t.displayName||t.name||tm(t)||e}function ef(t,e,o){const h=Jc(e);return t.displayName||(h!==""?`${o}(${h})`:o)}function rm(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Jc(t,"Component");if(typeof t=="object")switch(t.$$typeof){case ro.ForwardRef:return ef(t,t.render,"ForwardRef");case ro.Memo:return ef(t,t.type,"memo");default:return}}}function Kr(t){if(typeof t!="string")throw new Error(process.env.NODE_ENV!=="production"?"MUI: `capitalize(string)` expects a string argument.":wi(7));return t.charAt(0).toUpperCase()+t.slice(1)}function nm(...t){return t.reduce((e,o)=>o==null?e:function(...v){e.apply(this,v),o.apply(this,v)},()=>{})}function im(t,e=166){let o;function h(...v){const w=()=>{t.apply(this,v)};clearTimeout(o),o=setTimeout(w,e)}return h.clear=()=>{clearTimeout(o)},h}function om(t,e){return process.env.NODE_ENV==="production"?()=>null:(o,h,v,w,C)=>{const E=v||"<<anonymous>>",D=C||h;return typeof o[h]<"u"?new Error(`The ${w} \`${D}\` of \`${E}\` is deprecated. ${e}`):null}}function sm(t,e){return Ae.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function tf(t){return t&&t.ownerDocument||document}function am(t){return tf(t).defaultView||window}function um(t,e){if(process.env.NODE_ENV==="production")return()=>null;const o=e?nt({},e.propTypes):null;return v=>(w,C,E,D,p,...i)=>{const d=p||C,c=o==null?void 0:o[d];if(c){const n=c(w,C,E,D,p,...i);if(n)return n}return typeof w[C]<"u"&&!w[v]?new Error(`The prop \`${d}\` of \`${t}\` can only be used together with the \`${v}\` prop.`):null}}function rf(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const nf=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;let of=0;function lm(t){const[e,o]=Ae.useState(t),h=t||e;return Ae.useEffect(()=>{e==null&&(of+=1,o(`mui-${of}`))},[e]),h}const sf=Ae["useId"];function cm(t){if(sf!==void 0){const e=sf();return t??e}return lm(t)}function fm(t,e,o,h,v){if(process.env.NODE_ENV==="production")return null;const w=v||e;return typeof t[e]<"u"?new Error(`The prop \`${w}\` is not supported. Please remove it.`):null}function hm({controlled:t,default:e,name:o,state:h="value"}){const{current:v}=Ae.useRef(t!==void 0),[w,C]=Ae.useState(e),E=v?t:w;if(process.env.NODE_ENV!=="production"){Ae.useEffect(()=>{v!==(t!==void 0)&&console.error([`MUI: A component is changing the ${v?"":"un"}controlled ${h} state of ${o} to be ${v?"un":""}controlled.`,"Elements should not switch from uncontrolled to controlled (or vice versa).",`Decide between using a controlled or uncontrolled ${o} element for the lifetime of the component.`,"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.","More info: https://fb.me/react-controlled-components"].join(`
`))},[h,o,t]);const{current:p}=Ae.useRef(e);Ae.useEffect(()=>{!v&&p!==e&&console.error([`MUI: A component is changing the default ${h} state of an uncontrolled ${o} after being initialized. To suppress this warning opt to use a controlled ${o}.`].join(`
`))},[JSON.stringify(e)])}const D=Ae.useCallback(p=>{v||C(p)},[]);return[E,D]}function dm(t){const e=Ae.useRef(t);return nf(()=>{e.current=t}),Ae.useCallback((...o)=>(0,e.current)(...o),[])}function gm(...t){return Ae.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(o=>{rf(o,e)})},t)}let rs=!0,su=!1,af;const pm={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function vm(t){const{type:e,tagName:o}=t;return!!(o==="INPUT"&&pm[e]&&!t.readOnly||o==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function mm(t){t.metaKey||t.altKey||t.ctrlKey||(rs=!0)}function au(){rs=!1}function ym(){this.visibilityState==="hidden"&&su&&(rs=!0)}function _m(t){t.addEventListener("keydown",mm,!0),t.addEventListener("mousedown",au,!0),t.addEventListener("pointerdown",au,!0),t.addEventListener("touchstart",au,!0),t.addEventListener("visibilitychange",ym,!0)}function bm(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return rs||vm(e)}function wm(){const t=Ae.useCallback(v=>{v!=null&&_m(v.ownerDocument)},[]),e=Ae.useRef(!1);function o(){return e.current?(su=!0,window.clearTimeout(af),af=window.setTimeout(()=>{su=!1},100),e.current=!1,!0):!1}function h(v){return bm(v)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:h,onBlur:o,ref:t}}function uf(t,e){const o=nt({},e);return Object.keys(t).forEach(h=>{if(h.toString().match(/^(components|slots)$/))o[h]=nt({},t[h],o[h]);else if(h.toString().match(/^(componentsProps|slotProps)$/)){const v=t[h]||{},w=e[h];o[h]={},!w||!Object.keys(w)?o[h]=v:!v||!Object.keys(v)?o[h]=w:(o[h]=nt({},w),Object.keys(v).forEach(C=>{o[h][C]=uf(v[C],w[C])}))}else o[h]===void 0&&(o[h]=t[h])}),o}function xm(t,e,o=void 0){const h={};return Object.keys(t).forEach(v=>{h[v]=t[v].reduce((w,C)=>{if(C){const E=e(C);E!==""&&w.push(E),o&&o[C]&&w.push(o[C])}return w},[]).join(" ")}),h}const lf=t=>t,cf=(()=>{let t=lf;return{configure(e){t=e},generate(e){return t(e)},reset(){t=lf}}})(),Cm={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function uu(t,e,o="Mui"){const h=Cm[e];return h?`${o}-${h}`:`${cf.generate(t)}-${e}`}function Sm(t,e,o="Mui"){const h={};return e.forEach(v=>{h[v]=uu(t,v,o)}),h}function Tm(t){var e=Object.create(null);return function(o){return e[o]===void 0&&(e[o]=t(o)),e[o]}}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ff(t,e){const o=Nv(t,e);return process.env.NODE_ENV!=="production"?(...h)=>{const v=typeof t=="string"?`"${t}"`:"component";return h.length===0?console.error([`MUI: Seems like you called \`styled(${v})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join(`
`)):h.some(w=>w===void 0)&&console.error(`MUI: the styled(${v})(...args) API requires all its args to be defined.`),o(...h)}:o}const Em=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},Tn=process.env.NODE_ENV!=="production"?Qe.oneOfType([Qe.number,Qe.string,Qe.object,Qe.array]):{};function no(t,e){return e?sn(t,e,{clone:!1}):t}const lu={xs:0,sm:600,md:900,lg:1200,xl:1536},hf={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${lu[t]}px)`};function an(t,e,o){const h=t.theme||{};if(Array.isArray(e)){const w=h.breakpoints||hf;return e.reduce((C,E,D)=>(C[w.up(w.keys[D])]=o(e[D]),C),{})}if(typeof e=="object"){const w=h.breakpoints||hf;return Object.keys(e).reduce((C,E)=>{if(Object.keys(w.values||lu).indexOf(E)!==-1){const D=w.up(E);C[D]=o(e[E],E)}else{const D=E;C[D]=e[D]}return C},{})}return o(e)}function Om(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((h,v)=>{const w=t.up(v);return h[w]={},h},{}))||{}}function Am(t,e){return t.reduce((o,h)=>{const v=o[h];return(!v||Object.keys(v).length===0)&&delete o[h],o},e)}function ns(t,e,o=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&o){const h=`vars.${e}`.split(".").reduce((v,w)=>v&&v[w]?v[w]:null,t);if(h!=null)return h}return e.split(".").reduce((h,v)=>h&&h[v]!=null?h[v]:null,t)}function is(t,e,o,h=o){let v;return typeof t=="function"?v=t(o):Array.isArray(t)?v=t[o]||h:v=ns(t,o)||h,e&&(v=e(v,h,t)),v}function ht(t){const{prop:e,cssProperty:o=t.prop,themeKey:h,transform:v}=t,w=C=>{if(C[e]==null)return null;const E=C[e],D=C.theme,p=ns(D,h)||{};return an(C,E,d=>{let c=is(p,v,d);return d===c&&typeof d=="string"&&(c=is(p,v,`${e}${d==="default"?"":Kr(d)}`,d)),o===!1?c:{[o]:c}})};return w.propTypes=process.env.NODE_ENV!=="production"?{[e]:Tn}:{},w.filterProps=[e],w}function os(...t){const e=t.reduce((h,v)=>(v.filterProps.forEach(w=>{h[w]=v}),h),{}),o=h=>Object.keys(h).reduce((v,w)=>e[w]?no(v,e[w](h)):v,{});return o.propTypes=process.env.NODE_ENV!=="production"?t.reduce((h,v)=>Object.assign(h,v.propTypes),{}):{},o.filterProps=t.reduce((h,v)=>h.concat(v.filterProps),[]),o}function Pm(t){const e={};return o=>(e[o]===void 0&&(e[o]=t(o)),e[o])}const Dm={m:"margin",p:"padding"},Mm={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},df={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Rm=Pm(t=>{if(t.length>2)if(df[t])t=df[t];else return[t];const[e,o]=t.split(""),h=Dm[e],v=Mm[o]||"";return Array.isArray(v)?v.map(w=>h+w):[h+v]}),ss=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],as=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],km=[...ss,...as];function io(t,e,o,h){var v;const w=(v=ns(t,e,!1))!=null?v:o;return typeof w=="number"?C=>typeof C=="string"?C:(process.env.NODE_ENV!=="production"&&typeof C!="number"&&console.error(`MUI: Expected ${h} argument to be a number or a string, got ${C}.`),w*C):Array.isArray(w)?C=>typeof C=="string"?C:(process.env.NODE_ENV!=="production"&&(Number.isInteger(C)?C>w.length-1&&console.error([`MUI: The value provided (${C}) overflows.`,`The supported values are: ${JSON.stringify(w)}.`,`${C} > ${w.length-1}, you need to add the missing values.`].join(`
`)):console.error([`MUI: The \`theme.${e}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${e}\` as a number.`].join(`
`))),w[C]):typeof w=="function"?w:(process.env.NODE_ENV!=="production"&&console.error([`MUI: The \`theme.${e}\` value (${w}) is invalid.`,"It should be a number, an array or a function."].join(`
`)),()=>{})}function gf(t){return io(t,"spacing",8,"spacing")}function oo(t,e){if(typeof e=="string"||e==null)return e;const o=Math.abs(e),h=t(o);return e>=0?h:typeof h=="number"?-h:`-${h}`}function Im(t,e){return o=>t.reduce((h,v)=>(h[v]=oo(e,o),h),{})}function jm(t,e,o,h){if(e.indexOf(o)===-1)return null;const v=Rm(o),w=Im(v,h),C=t[o];return an(t,C,w)}function pf(t,e){const o=gf(t.theme);return Object.keys(t).map(h=>jm(t,e,h,o)).reduce(no,{})}function At(t){return pf(t,ss)}At.propTypes=process.env.NODE_ENV!=="production"?ss.reduce((t,e)=>(t[e]=Tn,t),{}):{},At.filterProps=ss;function Pt(t){return pf(t,as)}Pt.propTypes=process.env.NODE_ENV!=="production"?as.reduce((t,e)=>(t[e]=Tn,t),{}):{},Pt.filterProps=as,process.env.NODE_ENV!=="production"&&km.reduce((t,e)=>(t[e]=Tn,t),{});function Qr(t){return typeof t!="number"?t:`${t}px solid`}const Lm=ht({prop:"border",themeKey:"borders",transform:Qr}),Fm=ht({prop:"borderTop",themeKey:"borders",transform:Qr}),Bm=ht({prop:"borderRight",themeKey:"borders",transform:Qr}),Nm=ht({prop:"borderBottom",themeKey:"borders",transform:Qr}),Vm=ht({prop:"borderLeft",themeKey:"borders",transform:Qr}),Um=ht({prop:"borderColor",themeKey:"palette"}),Ym=ht({prop:"borderTopColor",themeKey:"palette"}),Wm=ht({prop:"borderRightColor",themeKey:"palette"}),Hm=ht({prop:"borderBottomColor",themeKey:"palette"}),zm=ht({prop:"borderLeftColor",themeKey:"palette"}),us=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=io(t.theme,"shape.borderRadius",4,"borderRadius"),o=h=>({borderRadius:oo(e,h)});return an(t,t.borderRadius,o)}return null};us.propTypes=process.env.NODE_ENV!=="production"?{borderRadius:Tn}:{},us.filterProps=["borderRadius"],os(Lm,Fm,Bm,Nm,Vm,Um,Ym,Wm,Hm,zm,us);const ls=t=>{if(t.gap!==void 0&&t.gap!==null){const e=io(t.theme,"spacing",8,"gap"),o=h=>({gap:oo(e,h)});return an(t,t.gap,o)}return null};ls.propTypes=process.env.NODE_ENV!=="production"?{gap:Tn}:{},ls.filterProps=["gap"];const cs=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=io(t.theme,"spacing",8,"columnGap"),o=h=>({columnGap:oo(e,h)});return an(t,t.columnGap,o)}return null};cs.propTypes=process.env.NODE_ENV!=="production"?{columnGap:Tn}:{},cs.filterProps=["columnGap"];const fs=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=io(t.theme,"spacing",8,"rowGap"),o=h=>({rowGap:oo(e,h)});return an(t,t.rowGap,o)}return null};fs.propTypes=process.env.NODE_ENV!=="production"?{rowGap:Tn}:{},fs.filterProps=["rowGap"];const Gm=ht({prop:"gridColumn"}),Xm=ht({prop:"gridRow"}),$m=ht({prop:"gridAutoFlow"}),qm=ht({prop:"gridAutoColumns"}),Km=ht({prop:"gridAutoRows"}),Qm=ht({prop:"gridTemplateColumns"}),Zm=ht({prop:"gridTemplateRows"}),Jm=ht({prop:"gridTemplateAreas"}),e0=ht({prop:"gridArea"});os(ls,cs,fs,Gm,Xm,$m,qm,Km,Qm,Zm,Jm,e0);function xi(t,e){return e==="grey"?e:t}const t0=ht({prop:"color",themeKey:"palette",transform:xi}),r0=ht({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:xi}),n0=ht({prop:"backgroundColor",themeKey:"palette",transform:xi});os(t0,r0,n0);function cr(t){return t<=1&&t!==0?`${t*100}%`:t}const i0=ht({prop:"width",transform:cr}),cu=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=o=>{var h,v,w;return{maxWidth:((h=t.theme)==null||(v=h.breakpoints)==null||(w=v.values)==null?void 0:w[o])||lu[o]||cr(o)}};return an(t,t.maxWidth,e)}return null};cu.filterProps=["maxWidth"];const o0=ht({prop:"minWidth",transform:cr}),s0=ht({prop:"height",transform:cr}),a0=ht({prop:"maxHeight",transform:cr}),u0=ht({prop:"minHeight",transform:cr});ht({prop:"size",cssProperty:"width",transform:cr}),ht({prop:"size",cssProperty:"height",transform:cr});const l0=ht({prop:"boxSizing"});os(i0,cu,o0,s0,a0,u0,l0);const hs={border:{themeKey:"borders",transform:Qr},borderTop:{themeKey:"borders",transform:Qr},borderRight:{themeKey:"borders",transform:Qr},borderBottom:{themeKey:"borders",transform:Qr},borderLeft:{themeKey:"borders",transform:Qr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:us},color:{themeKey:"palette",transform:xi},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:xi},backgroundColor:{themeKey:"palette",transform:xi},p:{style:Pt},pt:{style:Pt},pr:{style:Pt},pb:{style:Pt},pl:{style:Pt},px:{style:Pt},py:{style:Pt},padding:{style:Pt},paddingTop:{style:Pt},paddingRight:{style:Pt},paddingBottom:{style:Pt},paddingLeft:{style:Pt},paddingX:{style:Pt},paddingY:{style:Pt},paddingInline:{style:Pt},paddingInlineStart:{style:Pt},paddingInlineEnd:{style:Pt},paddingBlock:{style:Pt},paddingBlockStart:{style:Pt},paddingBlockEnd:{style:Pt},m:{style:At},mt:{style:At},mr:{style:At},mb:{style:At},ml:{style:At},mx:{style:At},my:{style:At},margin:{style:At},marginTop:{style:At},marginRight:{style:At},marginBottom:{style:At},marginLeft:{style:At},marginX:{style:At},marginY:{style:At},marginInline:{style:At},marginInlineStart:{style:At},marginInlineEnd:{style:At},marginBlock:{style:At},marginBlockStart:{style:At},marginBlockEnd:{style:At},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ls},rowGap:{style:fs},columnGap:{style:cs},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:cr},maxWidth:{style:cu},minWidth:{transform:cr},height:{transform:cr},maxHeight:{transform:cr},minHeight:{transform:cr},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function c0(...t){const e=t.reduce((h,v)=>h.concat(Object.keys(v)),[]),o=new Set(e);return t.every(h=>o.size===Object.keys(h).length)}function f0(t,e){return typeof t=="function"?t(e):t}function h0(){function t(o,h,v,w){const C={[o]:h,theme:v},E=w[o];if(!E)return{[o]:h};const{cssProperty:D=o,themeKey:p,transform:i,style:d}=E;if(h==null)return null;if(p==="typography"&&h==="inherit")return{[o]:h};const c=ns(v,p)||{};return d?d(C):an(C,h,a=>{let s=is(c,i,a);return a===s&&typeof a=="string"&&(s=is(c,i,`${o}${a==="default"?"":Kr(a)}`,a)),D===!1?s:{[D]:s}})}function e(o){var h;const{sx:v,theme:w={}}=o||{};if(!v)return null;const C=(h=w.unstable_sxConfig)!=null?h:hs;function E(D){let p=D;if(typeof D=="function")p=D(w);else if(typeof D!="object")return D;if(!p)return null;const i=Om(w.breakpoints),d=Object.keys(i);let c=i;return Object.keys(p).forEach(n=>{const a=f0(p[n],w);if(a!=null)if(typeof a=="object")if(C[n])c=no(c,t(n,a,w,C));else{const s=an({theme:w},a,l=>({[n]:l}));c0(s,a)?c[n]=e({sx:a,theme:w}):c=no(c,s)}else c=no(c,t(n,a,w,C))}),Am(d,c)}return Array.isArray(v)?v.map(E):E(v)}return e}const vf=h0();vf.filterProps=["sx"];const ds=vf;function fr(t,e){if(t==null)return{};var o={},h=Object.keys(t),v,w;for(w=0;w<h.length;w++)v=h[w],!(e.indexOf(v)>=0)&&(o[v]=t[v]);return o}const d0=["sx"],g0=t=>{var e,o;const h={systemProps:{},otherProps:{}},v=(e=t==null||(o=t.theme)==null?void 0:o.unstable_sxConfig)!=null?e:hs;return Object.keys(t).forEach(w=>{v[w]?h.systemProps[w]=t[w]:h.otherProps[w]=t[w]}),h};function p0(t){const{sx:e}=t,o=fr(t,d0),{systemProps:h,otherProps:v}=g0(o);let w;return Array.isArray(e)?w=[h,...e]:typeof e=="function"?w=(...C)=>{const E=e(...C);return Wn(E)?nt({},h,E):h}:w=nt({},h,e),nt({},v,{sx:w})}function mf(t){var e,o,h="";if(typeof t=="string"||typeof t=="number")h+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(o=mf(t[e]))&&(h&&(h+=" "),h+=o);else for(e in t)t[e]&&(h&&(h+=" "),h+=e);return h}function yf(){for(var t,e,o=0,h="";o<arguments.length;)(t=arguments[o++])&&(e=mf(t))&&(h&&(h+=" "),h+=e);return h}const v0=["values","unit","step"],m0=t=>{const e=Object.keys(t).map(o=>({key:o,val:t[o]}))||[];return e.sort((o,h)=>o.val-h.val),e.reduce((o,h)=>nt({},o,{[h.key]:h.val}),{})};function y0(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:o="px",step:h=5}=t,v=fr(t,v0),w=m0(e),C=Object.keys(w);function E(c){return`@media (min-width:${typeof e[c]=="number"?e[c]:c}${o})`}function D(c){return`@media (max-width:${(typeof e[c]=="number"?e[c]:c)-h/100}${o})`}function p(c,n){const a=C.indexOf(n);return`@media (min-width:${typeof e[c]=="number"?e[c]:c}${o}) and (max-width:${(a!==-1&&typeof e[C[a]]=="number"?e[C[a]]:n)-h/100}${o})`}function i(c){return C.indexOf(c)+1<C.length?p(c,C[C.indexOf(c)+1]):E(c)}function d(c){const n=C.indexOf(c);return n===0?E(C[1]):n===C.length-1?D(C[n]):p(c,C[C.indexOf(c)+1]).replace("@media","@media not all and")}return nt({keys:C,values:w,up:E,down:D,between:p,only:i,not:d,unit:o},v)}const _0={borderRadius:4};function b0(t=8){if(t.mui)return t;const e=gf({spacing:t}),o=(...h)=>(process.env.NODE_ENV!=="production"&&(h.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${h.length}`)),(h.length===0?[1]:h).map(w=>{const C=e(w);return typeof C=="number"?`${C}px`:C}).join(" "));return o.mui=!0,o}const w0=["breakpoints","palette","spacing","shape"];function fu(t={},...e){const{breakpoints:o={},palette:h={},spacing:v,shape:w={}}=t,C=fr(t,w0),E=y0(o),D=b0(v);let p=sn({breakpoints:E,direction:"ltr",components:{},palette:nt({mode:"light"},h),spacing:D,shape:nt({},_0,w)},C);return p=e.reduce((i,d)=>sn(i,d),p),p.unstable_sxConfig=nt({},hs,C==null?void 0:C.unstable_sxConfig),p.unstable_sx=function(d){return ds({sx:d,theme:this})},p}const _f=Ae.createContext(null);process.env.NODE_ENV!=="production"&&(_f.displayName="ThemeContext");const x0=_f;function C0(){const t=Ae.useContext(x0);return process.env.NODE_ENV!=="production"&&Ae.useDebugValue(t),t}function S0(t){return Object.keys(t).length===0}function T0(t=null){const e=C0();return!e||S0(e)?t:e}const E0=fu();function bf(t=E0){return T0(t)}const O0=["className","component"];function A0(t={}){const{defaultTheme:e,defaultClassName:o="MuiBox-root",generateClassName:h}=t,v=ff("div",{shouldForwardProp:C=>C!=="theme"&&C!=="sx"&&C!=="as"})(ds);return Ae.forwardRef(function(E,D){const p=bf(e),i=p0(E),{className:d,component:c="div"}=i,n=fr(i,O0);return Y.jsx(v,nt({as:c,ref:D,className:yf(d,h?h(o):o),theme:p},n))})}const wf=A0();process.env.NODE_ENV!=="production"&&(wf.propTypes={children:Qe.node,component:Qe.elementType,sx:Qe.oneOfType([Qe.arrayOf(Qe.oneOfType([Qe.func,Qe.object,Qe.bool])),Qe.func,Qe.object])});const En=wf,P0=["variant"];function xf(t){return t.length===0}function Cf(t){const{variant:e}=t,o=fr(t,P0);let h=e||"";return Object.keys(o).sort().forEach(v=>{v==="color"?h+=xf(h)?t[v]:Kr(t[v]):h+=`${xf(h)?v:Kr(v)}${Kr(t[v].toString())}`}),h}const D0=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],M0=["theme"],R0=["theme"];function so(t){return Object.keys(t).length===0}function k0(t){return typeof t=="string"&&t.charCodeAt(0)>96}const I0=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,j0=(t,e)=>{let o=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(o=e.components[t].variants);const h={};return o.forEach(v=>{const w=Cf(v.props);h[w]=v.style}),h},L0=(t,e,o,h)=>{var v,w;const{ownerState:C={}}=t,E=[],D=o==null||(v=o.components)==null||(w=v[h])==null?void 0:w.variants;return D&&D.forEach(p=>{let i=!0;Object.keys(p.props).forEach(d=>{C[d]!==p.props[d]&&t[d]!==p.props[d]&&(i=!1)}),i&&E.push(e[Cf(p.props)])}),E};function gs(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const F0=fu(),B0=t=>t.charAt(0).toLowerCase()+t.slice(1);function N0(t={}){const{defaultTheme:e=F0,rootShouldForwardProp:o=gs,slotShouldForwardProp:h=gs}=t,v=w=>{const C=so(w.theme)?e:w.theme;return ds(nt({},w,{theme:C}))};return v.__mui_systemSx=!0,(w,C={})=>{Em(w,m=>m.filter(y=>!(y!=null&&y.__mui_systemSx)));const{name:E,slot:D,skipVariantsResolver:p,skipSx:i,overridesResolver:d}=C,c=fr(C,D0),n=p!==void 0?p:D&&D!=="Root"||!1,a=i||!1;let s;process.env.NODE_ENV!=="production"&&E&&(s=`${E}-${B0(D||"Root")}`);let l=gs;D==="Root"?l=o:D?l=h:k0(w)&&(l=void 0);const g=ff(w,nt({shouldForwardProp:l,label:s},c)),u=(m,...y)=>{const b=y?y.map(I=>typeof I=="function"&&I.__emotion_real!==I?R=>{let{theme:W}=R,K=fr(R,M0);return I(nt({theme:so(W)?e:W},K))}:I):[];let x=m;E&&d&&b.push(I=>{const R=so(I.theme)?e:I.theme,W=I0(E,R);if(W){const K={};return Object.entries(W).forEach(([$,ae])=>{K[$]=typeof ae=="function"?ae(nt({},I,{theme:R})):ae}),d(I,K)}return null}),E&&!n&&b.push(I=>{const R=so(I.theme)?e:I.theme;return L0(I,j0(E,R),R,E)}),a||b.push(v);const T=b.length-y.length;if(Array.isArray(m)&&T>0){const I=new Array(T).fill("");x=[...m,...I],x.raw=[...m.raw,...I]}else typeof m=="function"&&m.__emotion_real!==m&&(x=I=>{let{theme:R}=I,W=fr(I,R0);return m(nt({theme:so(R)?e:R},W))});const M=g(x,...b);if(process.env.NODE_ENV!=="production"){let I;E&&(I=`${E}${D||""}`),I===void 0&&(I=`Styled(${rm(w)})`),M.displayName=I}return M};return g.withConfig&&(u.withConfig=g.withConfig),u}}function V0(t){const{theme:e,name:o,props:h}=t;return!e||!e.components||!e.components[o]||!e.components[o].defaultProps?h:uf(e.components[o].defaultProps,h)}function U0({props:t,name:e,defaultTheme:o}){const h=bf(o);return V0({theme:h,name:e,props:t})}function Sf(t,e=0,o=1){return process.env.NODE_ENV!=="production"&&(t<e||t>o)&&console.error(`MUI: The value provided ${t} is out of range [${e}, ${o}].`),Math.min(Math.max(e,t),o)}function Y0(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let o=t.match(e);return o&&o[0].length===1&&(o=o.map(h=>h+h)),o?`rgb${o.length===4?"a":""}(${o.map((h,v)=>v<3?parseInt(h,16):Math.round(parseInt(h,16)/255*1e3)/1e3).join(", ")})`:""}function Ci(t){if(t.type)return t;if(t.charAt(0)==="#")return Ci(Y0(t));const e=t.indexOf("("),o=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(o)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: Unsupported \`${t}\` color.
The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`:wi(9,t));let h=t.substring(e+1,t.length-1),v;if(o==="color"){if(h=h.split(" "),v=h.shift(),h.length===4&&h[3].charAt(0)==="/"&&(h[3]=h[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(v)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: unsupported \`${v}\` color space.
The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`:wi(10,v))}else h=h.split(",");return h=h.map(w=>parseFloat(w)),{type:o,values:h,colorSpace:v}}function hu(t){const{type:e,colorSpace:o}=t;let{values:h}=t;return e.indexOf("rgb")!==-1?h=h.map((v,w)=>w<3?parseInt(v,10):v):e.indexOf("hsl")!==-1&&(h[1]=`${h[1]}%`,h[2]=`${h[2]}%`),e.indexOf("color")!==-1?h=`${o} ${h.join(" ")}`:h=`${h.join(", ")}`,`${e}(${h})`}function W0(t){t=Ci(t);const{values:e}=t,o=e[0],h=e[1]/100,v=e[2]/100,w=h*Math.min(v,1-v),C=(p,i=(p+o/30)%12)=>v-w*Math.max(Math.min(i-3,9-i,1),-1);let E="rgb";const D=[Math.round(C(0)*255),Math.round(C(8)*255),Math.round(C(4)*255)];return t.type==="hsla"&&(E+="a",D.push(e[3])),hu({type:E,values:D})}function Tf(t){t=Ci(t);let e=t.type==="hsl"||t.type==="hsla"?Ci(W0(t)).values:t.values;return e=e.map(o=>(t.type!=="color"&&(o/=255),o<=.03928?o/12.92:((o+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Ef(t,e){const o=Tf(t),h=Tf(e);return(Math.max(o,h)+.05)/(Math.min(o,h)+.05)}function H0(t,e){if(t=Ci(t),e=Sf(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)t.values[o]*=1-e;return hu(t)}function z0(t,e){if(t=Ci(t),e=Sf(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let o=0;o<3;o+=1)t.values[o]+=(255-t.values[o])*e;else if(t.type.indexOf("color")!==-1)for(let o=0;o<3;o+=1)t.values[o]+=(1-t.values[o])*e;return hu(t)}var G0={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(e,o){return"Cannot apply '"+e+"' to '"+o.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(e,o){return"[mobx.array] Index out of bounds, "+e+" is larger than "+o},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(e){return"Cannot initialize from classes that inherit from Map: "+e.constructor.name},20:function(e){return"Cannot initialize map from "+e},21:function(e){return"Cannot convert to map from '"+e+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(e){return"Cannot obtain administration from "+e},25:function(e,o){return"the entry '"+e+"' does not exist in the observable map '"+o+"'"},26:"please specify a property",27:function(e,o){return"no observable property '"+e.toString()+"' found on the observable object '"+o+"'"},28:function(e){return"Cannot obtain atom from "+e},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(e,o){return"Cycle detected in computation "+e+": "+o},33:function(e){return"The setter of computed value '"+e+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(e){return"[ComputedValue '"+e+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(e){return"[mobx] `observableArray."+e+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+e+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"},X0=process.env.NODE_ENV!=="production"?G0:{};function Re(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),h=1;h<e;h++)o[h-1]=arguments[h];if(process.env.NODE_ENV!=="production"){var v=typeof t=="string"?t:X0[t];throw typeof v=="function"&&(v=v.apply(null,o)),new Error("[MobX] "+v)}throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(o.length?" "+o.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var $0={};function du(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:$0}var Of=Object.assign,ps=Object.getOwnPropertyDescriptor,Zr=Object.defineProperty,vs=Object.prototype,ms=[];Object.freeze(ms);var Af={};Object.freeze(Af);var q0=typeof Proxy<"u",K0=Object.toString();function Pf(){q0||Re(process.env.NODE_ENV!=="production"?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function ao(t){process.env.NODE_ENV!=="production"&&Ce.verifyProxies&&Re("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+t)}function Nr(){return++Ce.mobxGuid}function gu(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var Si=function(){};function Lt(t){return typeof t=="function"}function Hn(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function ys(t){return t!==null&&typeof t=="object"}function hr(t){if(!ys(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var o=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof o=="function"&&o.toString()===K0}function Df(t){var e=t==null?void 0:t.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function uo(t,e,o){Zr(t,e,{enumerable:!1,writable:!0,configurable:!0,value:o})}function Mf(t,e,o){Zr(t,e,{enumerable:!1,writable:!1,configurable:!0,value:o})}function zn(t,e){var o="isMobX"+t;return e.prototype[o]=!0,function(h){return ys(h)&&h[o]===!0}}function Ti(t){return t instanceof Map}function lo(t){return t instanceof Set}var Rf=typeof Object.getOwnPropertySymbols<"u";function Q0(t){var e=Object.keys(t);if(!Rf)return e;var o=Object.getOwnPropertySymbols(t);return o.length?[].concat(e,o.filter(function(h){return vs.propertyIsEnumerable.call(t,h)})):e}var Ei=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Rf?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function pu(t){return typeof t=="string"?t:typeof t=="symbol"?t.toString():new String(t).toString()}function kf(t){return t===null?null:typeof t=="object"?""+t:t}function Tr(t,e){return vs.hasOwnProperty.call(t,e)}var Z0=Object.getOwnPropertyDescriptors||function(e){var o={};return Ei(e).forEach(function(h){o[h]=ps(e,h)}),o};function If(t,e){for(var o=0;o<e.length;o++){var h=e[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,ty(h.key),h)}}function vu(t,e,o){return e&&If(t.prototype,e),o&&If(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function un(){return un=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(t[h]=o[h])}return t},un.apply(this,arguments)}function jf(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mu(t,e)}function mu(t,e){return mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,v){return h.__proto__=v,h},mu(t,e)}function _s(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J0(t,e){if(t){if(typeof t=="string")return Lf(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor&&(o=t.constructor.name),o==="Map"||o==="Set")return Array.from(t);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Lf(t,e)}}function Lf(t,e){(e==null||e>t.length)&&(e=t.length);for(var o=0,h=new Array(e);o<e;o++)h[o]=t[o];return h}function Oi(t,e){var o=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=J0(t))||e&&t&&typeof t.length=="number"){o&&(t=o);var h=0;return function(){return h>=t.length?{done:!0}:{done:!1,value:t[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ey(t,e){if(typeof t!="object"||t===null)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var h=o.call(t,e||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ty(t){var e=ey(t,"string");return typeof e=="symbol"?e:String(e)}var rr=Symbol("mobx-stored-annotations");function Jr(t){function e(o,h){if(co(h))return t.decorate_20223_(o,h);Ai(o,h,t)}return Object.assign(e,t)}function Ai(t,e,o){if(Tr(t,rr)||uo(t,rr,un({},t[rr])),process.env.NODE_ENV!=="production"&&Cs(o)&&!Tr(t[rr],e)){var h=t.constructor.name+".prototype."+e.toString();Re("'"+h+"' is decorated with 'override', but no such decorated member was found on prototype.")}ry(t,o,e),Cs(o)||(t[rr][e]=o)}function ry(t,e,o){if(process.env.NODE_ENV!=="production"&&!Cs(e)&&Tr(t[rr],o)){var h=t.constructor.name+".prototype."+o.toString(),v=t[rr][o].annotationType_,w=e.annotationType_;Re("Cannot apply '@"+w+"' to '"+h+"':"+(`
The field is already decorated with '@`+v+"'.")+`
Re-decorating fields is not allowed.
Use '@override' decorator for methods overridden by subclass.`)}}function ny(t){return Tr(t,rr)||uo(t,rr,un({},t[rr])),t[rr]}function co(t){return typeof t=="object"&&typeof t.kind=="string"}function bs(t,e){process.env.NODE_ENV!=="production"&&!e.includes(t.kind)&&Re("The decorator applied to '"+String(t.name)+"' cannot be used on a "+t.kind+" element")}var Ye=Symbol("mobx administration"),fo=function(){function t(o){o===void 0&&(o=process.env.NODE_ENV!=="production"?"Atom@"+Nr():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=st.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=o}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(h){return h()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(h){return h()})},e.reportObserved=function(){return nh(this)},e.reportChanged=function(){Or(),ih(this),Ar()},e.toString=function(){return this.name_},t}(),yu=zn("Atom",fo);function Ff(t,e,o){e===void 0&&(e=Si),o===void 0&&(o=Si);var h=new fo(t);return e!==Si&&__(h,e),o!==Si&&fh(h,o),h}function iy(t,e){return t===e}function oy(t,e){return Lu(t,e)}function sy(t,e){return Lu(t,e,1)}function ay(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var ws={identity:iy,structural:oy,default:ay,shallow:sy};function Gn(t,e,o){return _o(t)?t:Array.isArray(t)?Vt.array(t,{name:o}):hr(t)?Vt.object(t,void 0,{name:o}):Ti(t)?Vt.map(t,{name:o}):lo(t)?Vt.set(t,{name:o}):typeof t=="function"&&!mo(t)&&!yo(t)?Df(t)?Di(t):vo(o,t):t}function uy(t,e,o){if(t==null||ei(t)||xo(t)||fn(t)||Mi(t))return t;if(Array.isArray(t))return Vt.array(t,{name:o,deep:!1});if(hr(t))return Vt.object(t,void 0,{name:o,deep:!1});if(Ti(t))return Vt.map(t,{name:o,deep:!1});if(lo(t))return Vt.set(t,{name:o,deep:!1});process.env.NODE_ENV!=="production"&&Re("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}function xs(t){return t}function ly(t,e){return process.env.NODE_ENV!=="production"&&_o(t)&&Re("observable.struct should not be used with observable values"),Lu(t,e)?e:t}var cy="override";function Cs(t){return t.annotationType_===cy}function ho(t,e){return{annotationType_:t,options_:e,make_:fy,extend_:hy,decorate_20223_:dy}}function fy(t,e,o,h){var v;if((v=this.options_)!=null&&v.bound)return this.extend_(t,e,o,!1)===null?0:1;if(h===t.target_)return this.extend_(t,e,o,!1)===null?0:2;if(mo(o.value))return 1;var w=Bf(t,this,e,o,!1);return Zr(h,e,w),2}function hy(t,e,o,h){var v=Bf(t,this,e,o);return t.defineProperty_(e,v,h)}function dy(t,e){process.env.NODE_ENV!=="production"&&bs(e,["method","field"]);var o=e.kind,h=e.name,v=e.addInitializer,w=this,C=function(p){var i,d,c,n;return Xn((i=(d=w.options_)==null?void 0:d.name)!=null?i:h.toString(),p,(c=(n=w.options_)==null?void 0:n.autoAction)!=null?c:!1)};if(o=="field"){v(function(){Ai(this,h,w)});return}if(o=="method"){var E;return mo(t)||(t=C(t)),(E=this.options_)!=null&&E.bound&&v(function(){var D=this,p=D[h].bind(D);p.isMobxAction=!0,D[h]=p}),t}Re("Cannot apply '"+w.annotationType_+"' to '"+String(h)+"' (kind: "+o+"):"+(`
'`+w.annotationType_+"' can only be used on properties with a function value."))}function gy(t,e,o,h){var v=e.annotationType_,w=h.value;process.env.NODE_ENV!=="production"&&!Lt(w)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+o.toString()+"':"+(`
'`+v+"' can only be used on properties with a function value."))}function Bf(t,e,o,h,v){var w,C,E,D,p,i,d;v===void 0&&(v=Ce.safeDescriptors),gy(t,e,o,h);var c=h.value;if((w=e.options_)!=null&&w.bound){var n;c=c.bind((n=t.proxy_)!=null?n:t.target_)}return{value:Xn((C=(E=e.options_)==null?void 0:E.name)!=null?C:o.toString(),c,(D=(p=e.options_)==null?void 0:p.autoAction)!=null?D:!1,(i=e.options_)!=null&&i.bound?(d=t.proxy_)!=null?d:t.target_:void 0),configurable:v?t.isPlainObject_:!0,enumerable:!1,writable:!v}}function Nf(t,e){return{annotationType_:t,options_:e,make_:py,extend_:vy,decorate_20223_:my}}function py(t,e,o,h){var v;if(h===t.target_)return this.extend_(t,e,o,!1)===null?0:2;if((v=this.options_)!=null&&v.bound&&(!Tr(t.target_,e)||!yo(t.target_[e]))&&this.extend_(t,e,o,!1)===null)return 0;if(yo(o.value))return 1;var w=Vf(t,this,e,o,!1,!1);return Zr(h,e,w),2}function vy(t,e,o,h){var v,w=Vf(t,this,e,o,(v=this.options_)==null?void 0:v.bound);return t.defineProperty_(e,w,h)}function my(t,e){var o;process.env.NODE_ENV!=="production"&&bs(e,["method"]);var h=e.name,v=e.addInitializer;return yo(t)||(t=Di(t)),(o=this.options_)!=null&&o.bound&&v(function(){var w=this,C=w[h].bind(w);C.isMobXFlow=!0,w[h]=C}),t}function yy(t,e,o,h){var v=e.annotationType_,w=h.value;process.env.NODE_ENV!=="production"&&!Lt(w)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+o.toString()+"':"+(`
'`+v+"' can only be used on properties with a generator function value."))}function Vf(t,e,o,h,v,w){w===void 0&&(w=Ce.safeDescriptors),yy(t,e,o,h);var C=h.value;if(yo(C)||(C=Di(C)),v){var E;C=C.bind((E=t.proxy_)!=null?E:t.target_),C.isMobXFlow=!0}return{value:C,configurable:w?t.isPlainObject_:!0,enumerable:!1,writable:!w}}function _u(t,e){return{annotationType_:t,options_:e,make_:_y,extend_:by,decorate_20223_:wy}}function _y(t,e,o){return this.extend_(t,e,o,!1)===null?0:1}function by(t,e,o,h){return xy(t,this,e,o),t.defineComputedProperty_(e,un({},this.options_,{get:o.get,set:o.set}),h)}function wy(t,e){process.env.NODE_ENV!=="production"&&bs(e,["getter"]);var o=this,h=e.name,v=e.addInitializer;return v(function(){var w=Jn(this)[Ye],C=un({},o.options_,{get:t,context:this});C.name||(C.name=process.env.NODE_ENV!=="production"?w.name_+"."+h.toString():"ObservableObject."+h.toString()),w.values_.set(h,new qn(C))}),function(){return this[Ye].getObservablePropValue_(h)}}function xy(t,e,o,h){var v=e.annotationType_,w=h.get;process.env.NODE_ENV!=="production"&&!w&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+o.toString()+"':"+(`
'`+v+"' can only be used on getter(+setter) properties."))}function Ss(t,e){return{annotationType_:t,options_:e,make_:Cy,extend_:Sy,decorate_20223_:Ty}}function Cy(t,e,o){return this.extend_(t,e,o,!1)===null?0:1}function Sy(t,e,o,h){var v,w;return Ey(t,this,e,o),t.defineObservableProperty_(e,o.value,(v=(w=this.options_)==null?void 0:w.enhancer)!=null?v:Gn,h)}function Ty(t,e){if(process.env.NODE_ENV!=="production"){if(e.kind==="field")throw Re("Please use `@observable accessor "+String(e.name)+"` instead of `@observable "+String(e.name)+"`");bs(e,["accessor"])}var o=this,h=e.kind,v=e.name,w=new WeakSet;function C(E,D){var p,i,d=Jn(E)[Ye],c=new $n(D,(p=(i=o.options_)==null?void 0:i.enhancer)!=null?p:Gn,process.env.NODE_ENV!=="production"?d.name_+"."+v.toString():"ObservableObject."+v.toString(),!1);d.values_.set(v,c),w.add(E)}if(h=="accessor")return{get:function(){return w.has(this)||C(this,t.get.call(this)),this[Ye].getObservablePropValue_(v)},set:function(D){return w.has(this)||C(this,D),this[Ye].setObservablePropValue_(v,D)},init:function(D){return w.has(this)||C(this,D),D}}}function Ey(t,e,o,h){var v=e.annotationType_;process.env.NODE_ENV!=="production"&&!("value"in h)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+o.toString()+"':"+(`
'`+v+"' cannot be used on getter/setter properties"))}var Oy="true",Ay=Uf();function Uf(t){return{annotationType_:Oy,options_:t,make_:Py,extend_:Dy,decorate_20223_:My}}function Py(t,e,o,h){var v,w;if(o.get)return Os.make_(t,e,o,h);if(o.set){var C=Xn(e.toString(),o.set);return h===t.target_?t.defineProperty_(e,{configurable:Ce.safeDescriptors?t.isPlainObject_:!0,set:C})===null?0:2:(Zr(h,e,{configurable:!0,set:C}),2)}if(h!==t.target_&&typeof o.value=="function"){var E;if(Df(o.value)){var D,p=(D=this.options_)!=null&&D.autoBind?Di.bound:Di;return p.make_(t,e,o,h)}var i=(E=this.options_)!=null&&E.autoBind?vo.bound:vo;return i.make_(t,e,o,h)}var d=((v=this.options_)==null?void 0:v.deep)===!1?Vt.ref:Vt;if(typeof o.value=="function"&&(w=this.options_)!=null&&w.autoBind){var c;o.value=o.value.bind((c=t.proxy_)!=null?c:t.target_)}return d.make_(t,e,o,h)}function Dy(t,e,o,h){var v,w;if(o.get)return Os.extend_(t,e,o,h);if(o.set)return t.defineProperty_(e,{configurable:Ce.safeDescriptors?t.isPlainObject_:!0,set:Xn(e.toString(),o.set)},h);if(typeof o.value=="function"&&(v=this.options_)!=null&&v.autoBind){var C;o.value=o.value.bind((C=t.proxy_)!=null?C:t.target_)}var E=((w=this.options_)==null?void 0:w.deep)===!1?Vt.ref:Vt;return E.extend_(t,e,o,h)}function My(t,e){Re("'"+this.annotationType_+"' cannot be used as a decorator")}var Ry="observable",ky="observable.ref",Iy="observable.shallow",jy="observable.struct",Yf={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Yf);function Ts(t){return t||Yf}var bu=Ss(Ry),Ly=Ss(ky,{enhancer:xs}),Fy=Ss(Iy,{enhancer:uy}),By=Ss(jy,{enhancer:ly}),Wf=Jr(bu);function Es(t){return t.deep===!0?Gn:t.deep===!1?xs:Vy(t.defaultDecorator)}function Ny(t){var e;return t?(e=t.defaultDecorator)!=null?e:Uf(t):void 0}function Vy(t){var e,o;return t&&(e=(o=t.options_)==null?void 0:o.enhancer)!=null?e:Gn}function Hf(t,e,o){if(co(e))return bu.decorate_20223_(t,e);if(Hn(e)){Ai(t,e,bu);return}return _o(t)?t:hr(t)?Vt.object(t,e,o):Array.isArray(t)?Vt.array(t,e):Ti(t)?Vt.map(t,e):lo(t)?Vt.set(t,e):typeof t=="object"&&t!==null?t:Vt.box(t,e)}Of(Hf,Wf);var Uy={box:function(e,o){var h=Ts(o);return new $n(e,Es(h),h.name,!0,h.equals)},array:function(e,o){var h=Ts(o);return(Ce.useProxies===!1||h.proxy===!1?z_:j_)(e,Es(h),h.name)},map:function(e,o){var h=Ts(o);return new xh(e,Es(h),h.name)},set:function(e,o){var h=Ts(o);return new Th(e,Es(h),h.name)},object:function(e,o,h){return Pn(function(){return dh(Ce.useProxies===!1||(h==null?void 0:h.proxy)===!1?Jn({},h):D_({},h),e,o)})},ref:Jr(Ly),shallow:Jr(Fy),deep:Wf,struct:Jr(By)},Vt=Of(Hf,Uy),zf="computed",Yy="computed.struct",wu=_u(zf),Wy=_u(Yy,{equals:ws.structural}),Os=function(e,o){if(co(o))return wu.decorate_20223_(e,o);if(Hn(o))return Ai(e,o,wu);if(hr(e))return Jr(_u(zf,e));process.env.NODE_ENV!=="production"&&(Lt(e)||Re("First argument to `computed` should be an expression."),Lt(o)&&Re("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var h=hr(o)?o:{};return h.get=e,h.name||(h.name=e.name||""),new qn(h)};Object.assign(Os,wu),Os.struct=Jr(Wy);var Gf,Xf,As=0,Hy=1,zy=(Gf=(Xf=ps(function(){},"name"))==null?void 0:Xf.configurable)!=null?Gf:!1,$f={value:"action",configurable:!0,writable:!1,enumerable:!1};function Xn(t,e,o,h){o===void 0&&(o=!1),process.env.NODE_ENV!=="production"&&(Lt(e)||Re("`action` can only be invoked on functions"),(typeof t!="string"||!t)&&Re("actions should have valid names, got: '"+t+"'"));function v(){return Gy(t,o,e,h||this,arguments)}return v.isMobxAction=!0,v.toString=function(){return e.toString()},zy&&($f.value=t,Zr(v,"name",$f)),v}function Gy(t,e,o,h,v){var w=Xy(t,e,h,v);try{return o.apply(h,v)}catch(C){throw w.error_=C,C}finally{$y(w)}}function Xy(t,e,o,h){var v=process.env.NODE_ENV!=="production"&&Wt()&&!!t,w=0;if(process.env.NODE_ENV!=="production"&&v){w=Date.now();var C=h?Array.from(h):ms;dr({type:Eu,name:t,object:o,arguments:C})}var E=Ce.trackingDerivation,D=!e||!E;Or();var p=Ce.allowStateChanges;D&&(Kn(),p=Ps(!0));var i=Su(!0),d={runAsAction_:D,prevDerivation_:E,prevAllowStateChanges_:p,prevAllowStateReads_:i,notifySpy_:v,startTime_:w,actionId_:Hy++,parentActionId_:As};return As=d.actionId_,d}function $y(t){As!==t.actionId_&&Re(30),As=t.parentActionId_,t.error_!==void 0&&(Ce.suppressReactionErrors=!0),Ds(t.prevAllowStateChanges_),go(t.prevAllowStateReads_),Ar(),t.runAsAction_&&ln(t.prevDerivation_),process.env.NODE_ENV!=="production"&&t.notifySpy_&&gr({time:Date.now()-t.startTime_}),Ce.suppressReactionErrors=!1}function qy(t,e){var o=Ps(t);try{return e()}finally{Ds(o)}}function Ps(t){var e=Ce.allowStateChanges;return Ce.allowStateChanges=t,e}function Ds(t){Ce.allowStateChanges=t}var qf,Ky="create";qf=Symbol.toPrimitive;var $n=function(t){jf(e,t);function e(h,v,w,C,E){var D;return w===void 0&&(w=process.env.NODE_ENV!=="production"?"ObservableValue@"+Nr():"ObservableValue"),C===void 0&&(C=!0),E===void 0&&(E=ws.default),D=t.call(this,w)||this,D.enhancer=void 0,D.name_=void 0,D.equals=void 0,D.hasUnreportedChange_=!1,D.interceptors_=void 0,D.changeListeners_=void 0,D.value_=void 0,D.dehancer=void 0,D.enhancer=v,D.name_=w,D.equals=E,D.value_=v(h,void 0,w),process.env.NODE_ENV!=="production"&&C&&Wt()&&Qn({type:Ky,object:_s(D),observableKind:"value",debugObjectName:D.name_,newValue:""+D.value_}),D}var o=e.prototype;return o.dehanceValue=function(v){return this.dehancer!==void 0?this.dehancer(v):v},o.set=function(v){var w=this.value_;if(v=this.prepareNewValue_(v),v!==Ce.UNCHANGED){var C=Wt();process.env.NODE_ENV!=="production"&&C&&dr({type:Yr,object:this,observableKind:"value",debugObjectName:this.name_,newValue:v,oldValue:w}),this.setNewValue_(v),process.env.NODE_ENV!=="production"&&C&&gr()}},o.prepareNewValue_=function(v){if(en(this),Pr(this)){var w=Dr(this,{object:this,type:Yr,newValue:v});if(!w)return Ce.UNCHANGED;v=w.newValue}return v=this.enhancer(v,this.value_,this.name_),this.equals(this.value_,v)?Ce.UNCHANGED:v},o.setNewValue_=function(v){var w=this.value_;this.value_=v,this.reportChanged(),Vr(this)&&Ur(this,{type:Yr,object:this,newValue:v,oldValue:w})},o.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},o.intercept_=function(v){return bo(this,v)},o.observe_=function(v,w){return w&&v({observableKind:"value",debugObjectName:this.name_,object:this,type:Yr,newValue:this.value_,oldValue:void 0}),wo(this,v)},o.raw=function(){return this.value_},o.toJSON=function(){return this.get()},o.toString=function(){return this.name_+"["+this.value_+"]"},o.valueOf=function(){return kf(this.get())},o[qf]=function(){return this.valueOf()},e}(fo),Kf;Kf=Symbol.toPrimitive;var qn=function(){function t(o){this.dependenciesState_=st.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=st.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Rs(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Er.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,o.get||Re(31),this.derivation=o.get,this.name_=o.name||(process.env.NODE_ENV!=="production"?"ComputedValue@"+Nr():"ComputedValue"),o.set&&(this.setter_=Xn(process.env.NODE_ENV!=="production"?this.name_+"-setter":"ComputedValue-setter",o.set)),this.equals_=o.equals||(o.compareStructural||o.struct?ws.structural:ws.default),this.scope_=o.context,this.requiresReaction_=o.requiresReaction,this.keepAlive_=!!o.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){i_(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(h){return h()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(h){return h()})},e.get=function(){if(this.isComputing_&&Re(32,this.name_,this.derivation),Ce.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)xu(this)&&(this.warnAboutUntrackedRead_(),Or(),this.value_=this.computeValue_(!1),Ar());else if(nh(this),xu(this)){var h=Ce.trackingContext;this.keepAlive_&&!h&&(Ce.trackingContext=this),this.trackAndCompute()&&n_(this),Ce.trackingContext=h}var v=this.value_;if(ks(v))throw v.cause;return v},e.set=function(h){if(this.setter_){this.isRunningSetter_&&Re(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,h)}finally{this.isRunningSetter_=!1}}else Re(34,this.name_)},e.trackAndCompute=function(){var h=this.value_,v=this.dependenciesState_===st.NOT_TRACKING_,w=this.computeValue_(!0),C=v||ks(h)||ks(w)||!this.equals_(h,w);return C&&(this.value_=w,process.env.NODE_ENV!=="production"&&Wt()&&Qn({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:h,newValue:w})),C},e.computeValue_=function(h){this.isComputing_=!0;var v=Ps(!1),w;if(h)w=Qf(this,this.derivation,this.scope_);else if(Ce.disableErrorBoundaries===!0)w=this.derivation.call(this.scope_);else try{w=this.derivation.call(this.scope_)}catch(C){w=new Rs(C)}return Ds(v),this.isComputing_=!1,w},e.suspend_=function(){this.keepAlive_||(Cu(this),this.value_=void 0,process.env.NODE_ENV!=="production"&&this.isTracing_!==Er.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},e.observe_=function(h,v){var w=this,C=!0,E=void 0;return g_(function(){var D=w.get();if(!C||v){var p=Kn();h({observableKind:"computed",debugObjectName:w.name_,type:Yr,object:w,newValue:D,oldValue:E}),ln(p)}C=!1,E=D})},e.warnAboutUntrackedRead_=function(){process.env.NODE_ENV!=="production"&&(this.isTracing_!==Er.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),(typeof this.requiresReaction_=="boolean"?this.requiresReaction_:Ce.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."))},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return kf(this.get())},e[Kf]=function(){return this.valueOf()},t}(),Ms=zn("ComputedValue",qn),st;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(st||(st={}));var Er;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(Er||(Er={}));var Rs=function(e){this.cause=void 0,this.cause=e};function ks(t){return t instanceof Rs}function xu(t){switch(t.dependenciesState_){case st.UP_TO_DATE_:return!1;case st.NOT_TRACKING_:case st.STALE_:return!0;case st.POSSIBLY_STALE_:{for(var e=Su(!0),o=Kn(),h=t.observing_,v=h.length,w=0;w<v;w++){var C=h[w];if(Ms(C)){if(Ce.disableErrorBoundaries)C.get();else try{C.get()}catch{return ln(o),go(e),!0}if(t.dependenciesState_===st.STALE_)return ln(o),go(e),!0}}return Jf(t),ln(o),go(e),!1}}}function en(t){if(process.env.NODE_ENV!=="production"){var e=t.observers_.size>0;!Ce.allowStateChanges&&(e||Ce.enforceActions==="always")&&console.warn("[MobX] "+(Ce.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+t.name_)}}function Qy(t){process.env.NODE_ENV!=="production"&&!Ce.allowStateReads&&Ce.observableRequiresReaction&&console.warn("[mobx] Observable '"+t.name_+"' being read outside a reactive context.")}function Qf(t,e,o){var h=Su(!0);Jf(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++Ce.runId;var v=Ce.trackingDerivation;Ce.trackingDerivation=t,Ce.inBatch++;var w;if(Ce.disableErrorBoundaries===!0)w=e.call(o);else try{w=e.call(o)}catch(C){w=new Rs(C)}return Ce.inBatch--,Ce.trackingDerivation=v,Jy(t),Zy(t),go(h),w}function Zy(t){process.env.NODE_ENV!=="production"&&t.observing_.length===0&&(typeof t.requiresObservable_=="boolean"?t.requiresObservable_:Ce.reactionRequiresObservable)&&console.warn("[mobx] Derivation '"+t.name_+"' is created/updated without reading any observable value.")}function Jy(t){for(var e=t.observing_,o=t.observing_=t.newObserving_,h=st.UP_TO_DATE_,v=0,w=t.unboundDepsCount_,C=0;C<w;C++){var E=o[C];E.diffValue_===0&&(E.diffValue_=1,v!==C&&(o[v]=E),v++),E.dependenciesState_>h&&(h=E.dependenciesState_)}for(o.length=v,t.newObserving_=null,w=e.length;w--;){var D=e[w];D.diffValue_===0&&th(D,t),D.diffValue_=0}for(;v--;){var p=o[v];p.diffValue_===1&&(p.diffValue_=0,r_(p,t))}h!==st.UP_TO_DATE_&&(t.dependenciesState_=h,t.onBecomeStale_())}function Cu(t){var e=t.observing_;t.observing_=[];for(var o=e.length;o--;)th(e[o],t);t.dependenciesState_=st.NOT_TRACKING_}function Zf(t){var e=Kn();try{return t()}finally{ln(e)}}function Kn(){var t=Ce.trackingDerivation;return Ce.trackingDerivation=null,t}function ln(t){Ce.trackingDerivation=t}function Su(t){var e=Ce.allowStateReads;return Ce.allowStateReads=t,e}function go(t){Ce.allowStateReads=t}function Jf(t){if(t.dependenciesState_!==st.UP_TO_DATE_){t.dependenciesState_=st.UP_TO_DATE_;for(var e=t.observing_,o=e.length;o--;)e[o].lowestObserverState_=st.UP_TO_DATE_}}var Is=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},js=!0,eh=!1,Ce=function(){var t=du();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(js=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new Is().version&&(js=!1),js?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Is):(setTimeout(function(){eh||Re(35)},1),new Is)}();function e_(){if((Ce.pendingReactions.length||Ce.inBatch||Ce.isRunningReactions)&&Re(36),eh=!0,js){var t=du();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),Ce=new Is}}function t_(){return Ce}function r_(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function th(t,e){t.observers_.delete(e),t.observers_.size===0&&rh(t)}function rh(t){t.isPendingUnobservation_===!1&&(t.isPendingUnobservation_=!0,Ce.pendingUnobservations.push(t))}function Or(){Ce.inBatch++}function Ar(){if(--Ce.inBatch===0){uh();for(var t=Ce.pendingUnobservations,e=0;e<t.length;e++){var o=t[e];o.isPendingUnobservation_=!1,o.observers_.size===0&&(o.isBeingObserved_&&(o.isBeingObserved_=!1,o.onBUO()),o instanceof qn&&o.suspend_())}Ce.pendingUnobservations=[]}}function nh(t){Qy(t);var e=Ce.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&Ce.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(t.observers_.size===0&&Ce.inBatch>0&&rh(t),!1)}function ih(t){t.lowestObserverState_!==st.STALE_&&(t.lowestObserverState_=st.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.UP_TO_DATE_&&(process.env.NODE_ENV!=="production"&&e.isTracing_!==Er.NONE&&oh(e,t),e.onBecomeStale_()),e.dependenciesState_=st.STALE_}))}function n_(t){t.lowestObserverState_!==st.STALE_&&(t.lowestObserverState_=st.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.POSSIBLY_STALE_?(e.dependenciesState_=st.STALE_,process.env.NODE_ENV!=="production"&&e.isTracing_!==Er.NONE&&oh(e,t)):e.dependenciesState_===st.UP_TO_DATE_&&(t.lowestObserverState_=st.UP_TO_DATE_)}))}function i_(t){t.lowestObserverState_===st.UP_TO_DATE_&&(t.lowestObserverState_=st.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.UP_TO_DATE_&&(e.dependenciesState_=st.POSSIBLY_STALE_,e.onBecomeStale_())}))}function oh(t,e){if(console.log("[mobx.trace] '"+t.name_+"' is invalidated due to a change in: '"+e.name_+"'"),t.isTracing_===Er.BREAK){var o=[];sh(gh(t),o,1),new Function(`debugger;
/*
Tracing '`+t.name_+`'

You are entering this break point because derivation '`+t.name_+"' is being traced and '"+e.name_+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(t instanceof qn?t.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+o.join(`
`)+`
*/
    `)()}}function sh(t,e,o){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+"	".repeat(o-1)+t.name),t.dependencies&&t.dependencies.forEach(function(h){return sh(h,e,o+1)})}var po=function(){function t(o,h,v,w){o===void 0&&(o=process.env.NODE_ENV!=="production"?"Reaction@"+Nr():"Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=st.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Er.NONE,this.name_=o,this.onInvalidate_=h,this.errorHandler_=v,this.requiresObservable_=w}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ce.pendingReactions.push(this),uh())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Or(),this.isScheduled_=!1;var h=Ce.trackingContext;if(Ce.trackingContext=this,xu(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),process.env.NODE_ENV!=="production"&&this.isTrackPending_&&Wt()&&Qn({name:this.name_,type:"scheduled-reaction"})}catch(v){this.reportExceptionInDerivation_(v)}}Ce.trackingContext=h,Ar()}},e.track=function(h){if(!this.isDisposed_){Or();var v=Wt(),w;process.env.NODE_ENV!=="production"&&v&&(w=Date.now(),dr({name:this.name_,type:"reaction"})),this.isRunning_=!0;var C=Ce.trackingContext;Ce.trackingContext=this;var E=Qf(this,h,void 0);Ce.trackingContext=C,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Cu(this),ks(E)&&this.reportExceptionInDerivation_(E.cause),process.env.NODE_ENV!=="production"&&v&&gr({time:Date.now()-w}),Ar()}},e.reportExceptionInDerivation_=function(h){var v=this;if(this.errorHandler_){this.errorHandler_(h,this);return}if(Ce.disableErrorBoundaries)throw h;var w=process.env.NODE_ENV!=="production"?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";Ce.suppressReactionErrors?process.env.NODE_ENV!=="production"&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(w,h),process.env.NODE_ENV!=="production"&&Wt()&&Qn({type:"error",name:this.name_,message:w,error:""+h}),Ce.globalReactionErrorHandlers.forEach(function(C){return C(h,v)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Or(),Cu(this),Ar()))},e.getDisposer_=function(h){var v=this,w=function C(){v.dispose(),h==null||h.removeEventListener==null||h.removeEventListener("abort",C)};return h==null||h.addEventListener==null||h.addEventListener("abort",w),w[Ye]=this,w},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(h){h===void 0&&(h=!1),O_(this,h)},t}(),ah=100,Tu=function(e){return e()};function uh(){Ce.inBatch>0||Ce.isRunningReactions||Tu(o_)}function o_(){Ce.isRunningReactions=!0;for(var t=Ce.pendingReactions,e=0;t.length>0;){++e===ah&&(console.error(process.env.NODE_ENV!=="production"?"Reaction doesn't converge to a stable state after "+ah+" iterations."+(" Probably there is a cycle in the reactive function: "+t[0]):"[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var o=t.splice(0),h=0,v=o.length;h<v;h++)o[h].runReaction_()}Ce.isRunningReactions=!1}var Ls=zn("Reaction",po);function s_(t){var e=Tu;Tu=function(h){return t(function(){return e(h)})}}function Wt(){return process.env.NODE_ENV!=="production"&&!!Ce.spyListeners.length}function Qn(t){if(process.env.NODE_ENV!=="production"&&Ce.spyListeners.length)for(var e=Ce.spyListeners,o=0,h=e.length;o<h;o++)e[o](t)}function dr(t){if(process.env.NODE_ENV!=="production"){var e=un({},t,{spyReportStart:!0});Qn(e)}}var a_={type:"report-end",spyReportEnd:!0};function gr(t){process.env.NODE_ENV!=="production"&&Qn(t?un({},t,{type:"report-end",spyReportEnd:!0}):a_)}function u_(t){return process.env.NODE_ENV==="production"?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(Ce.spyListeners.push(t),gu(function(){Ce.spyListeners=Ce.spyListeners.filter(function(e){return e!==t})}))}var Eu="action",l_="action.bound",lh="autoAction",c_="autoAction.bound",f_="<unnamed action>",Ou=ho(Eu),h_=ho(l_,{bound:!0}),Au=ho(lh,{autoAction:!0}),d_=ho(c_,{autoAction:!0,bound:!0});function ch(t){var e=function(h,v){if(Lt(h))return Xn(h.name||f_,h,t);if(Lt(v))return Xn(h,v,t);if(co(v))return(t?Au:Ou).decorate_20223_(h,v);if(Hn(v))return Ai(h,v,t?Au:Ou);if(Hn(h))return Jr(ho(t?lh:Eu,{name:h,autoAction:t}));process.env.NODE_ENV!=="production"&&Re("Invalid arguments for `action`")};return e}var Pi=ch(!1);Object.assign(Pi,Ou);var vo=ch(!0);Object.assign(vo,Au),Pi.bound=Jr(h_),vo.bound=Jr(d_);function mo(t){return Lt(t)&&t.isMobxAction===!0}function g_(t,e){var o,h,v,w,C;e===void 0&&(e=Af),process.env.NODE_ENV!=="production"&&(Lt(t)||Re("Autorun expects a function as first argument"),mo(t)&&Re("Autorun does not accept actions since actions are untrackable"));var E=(o=(h=e)==null?void 0:h.name)!=null?o:process.env.NODE_ENV!=="production"?t.name||"Autorun@"+Nr():"Autorun",D=!e.scheduler&&!e.delay,p;if(D)p=new po(E,function(){this.track(c)},e.onError,e.requiresObservable);else{var i=v_(e),d=!1;p=new po(E,function(){d||(d=!0,i(function(){d=!1,p.isDisposed_||p.track(c)}))},e.onError,e.requiresObservable)}function c(){t(p)}return(v=e)!=null&&(w=v.signal)!=null&&w.aborted||p.schedule_(),p.getDisposer_((C=e)==null?void 0:C.signal)}var p_=function(e){return e()};function v_(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:p_}var m_="onBO",y_="onBUO";function __(t,e,o){return hh(m_,t,e,o)}function fh(t,e,o){return hh(y_,t,e,o)}function hh(t,e,o,h){var v=typeof h=="function"?An(e,o):An(e),w=Lt(h)?h:o,C=t+"L";return v[C]?v[C].add(w):v[C]=new Set([w]),function(){var E=v[C];E&&(E.delete(w),E.size===0&&delete v[C])}}var b_="never",Fs="always",w_="observed";function x_(t){t.isolateGlobalState===!0&&e_();var e=t.useProxies,o=t.enforceActions;if(e!==void 0&&(Ce.useProxies=e===Fs?!0:e===b_?!1:typeof Proxy<"u"),e==="ifavailable"&&(Ce.verifyProxies=!0),o!==void 0){var h=o===Fs?Fs:o===w_;Ce.enforceActions=h,Ce.allowStateChanges=!(h===!0||h===Fs)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(v){v in t&&(Ce[v]=!!t[v])}),Ce.allowStateReads=!Ce.observableRequiresReaction,process.env.NODE_ENV!=="production"&&Ce.disableErrorBoundaries===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),t.reactionScheduler&&s_(t.reactionScheduler)}function dh(t,e,o,h){process.env.NODE_ENV!=="production"&&(arguments.length>4&&Re("'extendObservable' expected 2-4 arguments"),typeof t!="object"&&Re("'extendObservable' expects an object as first argument"),fn(t)&&Re("'extendObservable' should not be used on maps, use map.merge instead"),hr(e)||Re("'extendObservable' only accepts plain objects as second argument"),(_o(e)||_o(o))&&Re("Extending an object with another observable (object) is not supported"));var v=Z0(e);return Pn(function(){var w=Jn(t,h)[Ye];Ei(v).forEach(function(C){w.extend_(C,v[C],o&&C in o?o[C]:!0)})}),t}function gh(t,e){return ph(An(t,e))}function ph(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=C_(t.observing_).map(ph)),e}function C_(t){return Array.from(new Set(t))}var S_=0;function vh(){this.message="FLOW_CANCELLED"}vh.prototype=Object.create(Error.prototype);var Pu=Nf("flow"),T_=Nf("flow.bound",{bound:!0}),Di=Object.assign(function(e,o){if(co(o))return Pu.decorate_20223_(e,o);if(Hn(o))return Ai(e,o,Pu);process.env.NODE_ENV!=="production"&&arguments.length!==1&&Re("Flow expects single argument with generator function");var h=e,v=h.name||"<unnamed flow>",w=function(){var E=this,D=arguments,p=++S_,i=Pi(v+" - runid: "+p+" - init",h).apply(E,D),d,c=void 0,n=new Promise(function(a,s){var l=0;d=s;function g(y){c=void 0;var b;try{b=Pi(v+" - runid: "+p+" - yield "+l++,i.next).call(i,y)}catch(x){return s(x)}m(b)}function u(y){c=void 0;var b;try{b=Pi(v+" - runid: "+p+" - yield "+l++,i.throw).call(i,y)}catch(x){return s(x)}m(b)}function m(y){if(Lt(y==null?void 0:y.then)){y.then(m,s);return}return y.done?a(y.value):(c=Promise.resolve(y.value),c.then(g,u))}g(void 0)});return n.cancel=Pi(v+" - runid: "+p+" - cancel",function(){try{c&&mh(c);var a=i.return(void 0),s=Promise.resolve(a.value);s.then(Si,Si),mh(s),d(new vh)}catch(l){d(l)}}),n};return w.isMobXFlow=!0,w},Pu);Di.bound=Jr(T_);function mh(t){Lt(t.cancel)&&t.cancel()}function yo(t){return(t==null?void 0:t.isMobXFlow)===!0}function E_(t,e){return t?e!==void 0?process.env.NODE_ENV!=="production"&&(fn(t)||xo(t))?Re("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):ei(t)?t[Ye].values_.has(e):!1:ei(t)||!!t[Ye]||yu(t)||Ls(t)||Ms(t):!1}function _o(t){return process.env.NODE_ENV!=="production"&&arguments.length!==1&&Re("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),E_(t)}function O_(){if(process.env.NODE_ENV!=="production"){for(var t=!1,e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];typeof o[o.length-1]=="boolean"&&(t=o.pop());var v=A_(o);if(!v)return Re("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");v.isTracing_===Er.NONE&&console.log("[mobx.trace] '"+v.name_+"' tracing enabled"),v.isTracing_=t?Er.BREAK:Er.LOG}}function A_(t){switch(t.length){case 0:return Ce.trackingDerivation;case 1:return An(t[0]);case 2:return An(t[0],t[1])}}function cn(t,e){e===void 0&&(e=void 0),Or();try{return t.apply(e)}finally{Ar()}}function Zn(t){return t[Ye]}var P_={has:function(e,o){return process.env.NODE_ENV!=="production"&&Ce.trackingDerivation&&ao("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),Zn(e).has_(o)},get:function(e,o){return Zn(e).get_(o)},set:function(e,o,h){var v;return Hn(o)?(process.env.NODE_ENV!=="production"&&!Zn(e).values_.has(o)&&ao("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),(v=Zn(e).set_(o,h,!0))!=null?v:!0):!1},deleteProperty:function(e,o){var h;return process.env.NODE_ENV!=="production"&&ao("delete properties from an observable object. Use 'remove' from 'mobx' instead."),Hn(o)?(h=Zn(e).delete_(o,!0))!=null?h:!0:!1},defineProperty:function(e,o,h){var v;return process.env.NODE_ENV!=="production"&&ao("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),(v=Zn(e).defineProperty_(o,h))!=null?v:!0},ownKeys:function(e){return process.env.NODE_ENV!=="production"&&Ce.trackingDerivation&&ao("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),Zn(e).ownKeys_()},preventExtensions:function(e){Re(13)}};function D_(t,e){var o,h;return Pf(),t=Jn(t,e),(h=(o=t[Ye]).proxy_)!=null?h:o.proxy_=new Proxy(t,P_)}function Pr(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function bo(t,e){var o=t.interceptors_||(t.interceptors_=[]);return o.push(e),gu(function(){var h=o.indexOf(e);h!==-1&&o.splice(h,1)})}function Dr(t,e){var o=Kn();try{for(var h=[].concat(t.interceptors_||[]),v=0,w=h.length;v<w&&(e=h[v](e),e&&!e.type&&Re(14),!!e);v++);return e}finally{ln(o)}}function Vr(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function wo(t,e){var o=t.changeListeners_||(t.changeListeners_=[]);return o.push(e),gu(function(){var h=o.indexOf(e);h!==-1&&o.splice(h,1)})}function Ur(t,e){var o=Kn(),h=t.changeListeners_;if(h){h=h.slice();for(var v=0,w=h.length;v<w;v++)h[v](e);ln(o)}}function M_(t,e,o){return Pn(function(){var h,v=Jn(t,o)[Ye];process.env.NODE_ENV!=="production"&&e&&t[rr]&&Re("makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported."),(h=e)!=null||(e=ny(t)),Ei(e).forEach(function(w){return v.make_(w,e[w])})}),t}var Du=Symbol("mobx-keys");function R_(t,e,o){return process.env.NODE_ENV!=="production"&&(!hr(t)&&!hr(Object.getPrototypeOf(t))&&Re("'makeAutoObservable' can only be used for classes that don't have a superclass"),ei(t)&&Re("makeAutoObservable can only be used on objects not already made observable")),hr(t)?dh(t,t,e,o):(Pn(function(){var h=Jn(t,o)[Ye];if(!t[Du]){var v=Object.getPrototypeOf(t),w=new Set([].concat(Ei(t),Ei(v)));w.delete("constructor"),w.delete(Ye),uo(v,Du,w)}t[Du].forEach(function(C){return h.make_(C,e&&C in e?e[C]:!0)})}),t)}var yh="splice",Yr="update",k_=1e4,I_={get:function(e,o){var h=e[Ye];return o===Ye?h:o==="length"?h.getArrayLength_():typeof o=="string"&&!isNaN(o)?h.get_(parseInt(o)):Tr(Bs,o)?Bs[o]:e[o]},set:function(e,o,h){var v=e[Ye];return o==="length"&&v.setArrayLength_(h),typeof o=="symbol"||isNaN(o)?e[o]=h:v.set_(parseInt(o),h),!0},preventExtensions:function(){Re(15)}},Mu=function(){function t(o,h,v,w){o===void 0&&(o=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=v,this.legacyMode_=w,this.atom_=new fo(o),this.enhancer_=function(C,E){return h(C,E,process.env.NODE_ENV!=="production"?o+"[..]":"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.dehanceValues_=function(h){return this.dehancer!==void 0&&h.length>0?h.map(this.dehancer):h},e.intercept_=function(h){return bo(this,h)},e.observe_=function(h,v){return v===void 0&&(v=!1),v&&h({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),wo(this,h)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(h){(typeof h!="number"||isNaN(h)||h<0)&&Re("Out of range: "+h);var v=this.values_.length;if(h!==v)if(h>v){for(var w=new Array(h-v),C=0;C<h-v;C++)w[C]=void 0;this.spliceWithArray_(v,0,w)}else this.spliceWithArray_(h,v-h)},e.updateArrayLength_=function(h,v){h!==this.lastKnownLength_&&Re(16),this.lastKnownLength_+=v,this.legacyMode_&&v>0&&kh(h+v+1)},e.spliceWithArray_=function(h,v,w){var C=this;en(this.atom_);var E=this.values_.length;if(h===void 0?h=0:h>E?h=E:h<0&&(h=Math.max(0,E+h)),arguments.length===1?v=E-h:v==null?v=0:v=Math.max(0,Math.min(v,E-h)),w===void 0&&(w=ms),Pr(this)){var D=Dr(this,{object:this.proxy_,type:yh,index:h,removedCount:v,added:w});if(!D)return ms;v=D.removedCount,w=D.added}if(w=w.length===0?w:w.map(function(d){return C.enhancer_(d,void 0)}),this.legacyMode_||process.env.NODE_ENV!=="production"){var p=w.length-v;this.updateArrayLength_(E,p)}var i=this.spliceItemsIntoValues_(h,v,w);return(v!==0||w.length!==0)&&this.notifyArraySplice_(h,w,i),this.dehanceValues_(i)},e.spliceItemsIntoValues_=function(h,v,w){if(w.length<k_){var C;return(C=this.values_).splice.apply(C,[h,v].concat(w))}else{var E=this.values_.slice(h,h+v),D=this.values_.slice(h+v);this.values_.length+=w.length-v;for(var p=0;p<w.length;p++)this.values_[h+p]=w[p];for(var i=0;i<D.length;i++)this.values_[h+w.length+i]=D[i];return E}},e.notifyArrayChildUpdate_=function(h,v,w){var C=!this.owned_&&Wt(),E=Vr(this),D=E||C?{observableKind:"array",object:this.proxy_,type:Yr,debugObjectName:this.atom_.name_,index:h,newValue:v,oldValue:w}:null;process.env.NODE_ENV!=="production"&&C&&dr(D),this.atom_.reportChanged(),E&&Ur(this,D),process.env.NODE_ENV!=="production"&&C&&gr()},e.notifyArraySplice_=function(h,v,w){var C=!this.owned_&&Wt(),E=Vr(this),D=E||C?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:yh,index:h,removed:w,added:v,removedCount:w.length,addedCount:v.length}:null;process.env.NODE_ENV!=="production"&&C&&dr(D),this.atom_.reportChanged(),E&&Ur(this,D),process.env.NODE_ENV!=="production"&&C&&gr()},e.get_=function(h){if(this.legacyMode_&&h>=this.values_.length){console.warn(process.env.NODE_ENV!=="production"?"[mobx.array] Attempt to read an array index ("+h+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX":"[mobx] Out of bounds read: "+h);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[h])},e.set_=function(h,v){var w=this.values_;if(this.legacyMode_&&h>w.length&&Re(17,h,w.length),h<w.length){en(this.atom_);var C=w[h];if(Pr(this)){var E=Dr(this,{type:Yr,object:this.proxy_,index:h,newValue:v});if(!E)return;v=E.newValue}v=this.enhancer_(v,C);var D=v!==C;D&&(w[h]=v,this.notifyArrayChildUpdate_(h,v,C))}else{for(var p=new Array(h+1-w.length),i=0;i<p.length-1;i++)p[i]=void 0;p[p.length-1]=v,this.spliceWithArray_(w.length,0,p)}},t}();function j_(t,e,o,h){return o===void 0&&(o=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),h===void 0&&(h=!1),Pf(),Pn(function(){var v=new Mu(o,e,h,!1);Mf(v.values_,Ye,v);var w=new Proxy(v.values_,I_);return v.proxy_=w,t&&t.length&&v.spliceWithArray_(0,0,t),w})}var Bs={clear:function(){return this.splice(0)},replace:function(e){var o=this[Ye];return o.spliceWithArray_(0,o.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,o){for(var h=arguments.length,v=new Array(h>2?h-2:0),w=2;w<h;w++)v[w-2]=arguments[w];var C=this[Ye];switch(arguments.length){case 0:return[];case 1:return C.spliceWithArray_(e);case 2:return C.spliceWithArray_(e,o)}return C.spliceWithArray_(e,o,v)},spliceWithArray:function(e,o,h){return this[Ye].spliceWithArray_(e,o,h)},push:function(){for(var e=this[Ye],o=arguments.length,h=new Array(o),v=0;v<o;v++)h[v]=arguments[v];return e.spliceWithArray_(e.values_.length,0,h),e.values_.length},pop:function(){return this.splice(Math.max(this[Ye].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ye],o=arguments.length,h=new Array(o),v=0;v<o;v++)h[v]=arguments[v];return e.spliceWithArray_(0,0,h),e.values_.length},reverse:function(){return Ce.trackingDerivation&&Re(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Ce.trackingDerivation&&Re(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var o=this[Ye],h=o.dehanceValues_(o.values_).indexOf(e);return h>-1?(this.splice(h,1),!0):!1}};wt("at",pr),wt("concat",pr),wt("flat",pr),wt("includes",pr),wt("indexOf",pr),wt("join",pr),wt("lastIndexOf",pr),wt("slice",pr),wt("toString",pr),wt("toLocaleString",pr),wt("toSorted",pr),wt("toSpliced",pr),wt("with",pr),wt("every",Wr),wt("filter",Wr),wt("find",Wr),wt("findIndex",Wr),wt("findLast",Wr),wt("findLastIndex",Wr),wt("flatMap",Wr),wt("forEach",Wr),wt("map",Wr),wt("some",Wr),wt("toReversed",Wr),wt("reduce",_h),wt("reduceRight",_h);function wt(t,e){typeof Array.prototype[t]=="function"&&(Bs[t]=e(t))}function pr(t){return function(){var e=this[Ye];e.atom_.reportObserved();var o=e.dehanceValues_(e.values_);return o[t].apply(o,arguments)}}function Wr(t){return function(e,o){var h=this,v=this[Ye];v.atom_.reportObserved();var w=v.dehanceValues_(v.values_);return w[t](function(C,E){return e.call(o,C,E,h)})}}function _h(t){return function(){var e=this,o=this[Ye];o.atom_.reportObserved();var h=o.dehanceValues_(o.values_),v=arguments[0];return arguments[0]=function(w,C,E){return v(w,C,E,e)},h[t].apply(h,arguments)}}var L_=zn("ObservableArrayAdministration",Mu);function xo(t){return ys(t)&&L_(t[Ye])}var bh,wh,F_={},On="add",Ns="delete";bh=Symbol.iterator,wh=Symbol.toStringTag;var xh=function(){function t(o,h,v){var w=this;h===void 0&&(h=Gn),v===void 0&&(v=process.env.NODE_ENV!=="production"?"ObservableMap@"+Nr():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ye]=F_,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=h,this.name_=v,Lt(Map)||Re(18),Pn(function(){w.keysAtom_=Ff(process.env.NODE_ENV!=="production"?w.name_+".keys()":"ObservableMap.keys()"),w.data_=new Map,w.hasMap_=new Map,o&&w.merge(o)})}var e=t.prototype;return e.has_=function(h){return this.data_.has(h)},e.has=function(h){var v=this;if(!Ce.trackingDerivation)return this.has_(h);var w=this.hasMap_.get(h);if(!w){var C=w=new $n(this.has_(h),xs,process.env.NODE_ENV!=="production"?this.name_+"."+pu(h)+"?":"ObservableMap.key?",!1);this.hasMap_.set(h,C),fh(C,function(){return v.hasMap_.delete(h)})}return w.get()},e.set=function(h,v){var w=this.has_(h);if(Pr(this)){var C=Dr(this,{type:w?Yr:On,object:this,newValue:v,name:h});if(!C)return this;v=C.newValue}return w?this.updateValue_(h,v):this.addValue_(h,v),this},e.delete=function(h){var v=this;if(en(this.keysAtom_),Pr(this)){var w=Dr(this,{type:Ns,object:this,name:h});if(!w)return!1}if(this.has_(h)){var C=Wt(),E=Vr(this),D=E||C?{observableKind:"map",debugObjectName:this.name_,type:Ns,object:this,oldValue:this.data_.get(h).value_,name:h}:null;return process.env.NODE_ENV!=="production"&&C&&dr(D),cn(function(){var p;v.keysAtom_.reportChanged(),(p=v.hasMap_.get(h))==null||p.setNewValue_(!1);var i=v.data_.get(h);i.setNewValue_(void 0),v.data_.delete(h)}),E&&Ur(this,D),process.env.NODE_ENV!=="production"&&C&&gr(),!0}return!1},e.updateValue_=function(h,v){var w=this.data_.get(h);if(v=w.prepareNewValue_(v),v!==Ce.UNCHANGED){var C=Wt(),E=Vr(this),D=E||C?{observableKind:"map",debugObjectName:this.name_,type:Yr,object:this,oldValue:w.value_,name:h,newValue:v}:null;process.env.NODE_ENV!=="production"&&C&&dr(D),w.setNewValue_(v),E&&Ur(this,D),process.env.NODE_ENV!=="production"&&C&&gr()}},e.addValue_=function(h,v){var w=this;en(this.keysAtom_),cn(function(){var p,i=new $n(v,w.enhancer_,process.env.NODE_ENV!=="production"?w.name_+"."+pu(h):"ObservableMap.key",!1);w.data_.set(h,i),v=i.value_,(p=w.hasMap_.get(h))==null||p.setNewValue_(!0),w.keysAtom_.reportChanged()});var C=Wt(),E=Vr(this),D=E||C?{observableKind:"map",debugObjectName:this.name_,type:On,object:this,name:h,newValue:v}:null;process.env.NODE_ENV!=="production"&&C&&dr(D),E&&Ur(this,D),process.env.NODE_ENV!=="production"&&C&&gr()},e.get=function(h){return this.has(h)?this.dehanceValue_(this.data_.get(h).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var h=this,v=this.keys();return Co({next:function(){var C=v.next(),E=C.done,D=C.value;return{done:E,value:E?void 0:h.get(D)}}})},e.entries=function(){var h=this,v=this.keys();return Co({next:function(){var C=v.next(),E=C.done,D=C.value;return{done:E,value:E?void 0:[D,h.get(D)]}}})},e[bh]=function(){return this.entries()},e.forEach=function(h,v){for(var w=Oi(this),C;!(C=w()).done;){var E=C.value,D=E[0],p=E[1];h.call(v,p,D,this)}},e.merge=function(h){var v=this;return fn(h)&&(h=new Map(h)),cn(function(){hr(h)?Q0(h).forEach(function(w){return v.set(w,h[w])}):Array.isArray(h)?h.forEach(function(w){var C=w[0],E=w[1];return v.set(C,E)}):Ti(h)?(h.constructor!==Map&&Re(19,h),h.forEach(function(w,C){return v.set(C,w)})):h!=null&&Re(20,h)}),this},e.clear=function(){var h=this;cn(function(){Zf(function(){for(var v=Oi(h.keys()),w;!(w=v()).done;){var C=w.value;h.delete(C)}})})},e.replace=function(h){var v=this;return cn(function(){for(var w=B_(h),C=new Map,E=!1,D=Oi(v.data_.keys()),p;!(p=D()).done;){var i=p.value;if(!w.has(i)){var d=v.delete(i);if(d)E=!0;else{var c=v.data_.get(i);C.set(i,c)}}}for(var n=Oi(w.entries()),a;!(a=n()).done;){var s=a.value,l=s[0],g=s[1],u=v.data_.has(l);if(v.set(l,g),v.data_.has(l)){var m=v.data_.get(l);C.set(l,m),u||(E=!0)}}if(!E)if(v.data_.size!==C.size)v.keysAtom_.reportChanged();else for(var y=v.data_.keys(),b=C.keys(),x=y.next(),T=b.next();!x.done;){if(x.value!==T.value){v.keysAtom_.reportChanged();break}x=y.next(),T=b.next()}v.data_=C}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(h,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support fireImmediately=true in combination with maps."),wo(this,h)},e.intercept_=function(h){return bo(this,h)},vu(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:wh,get:function(){return"Map"}}]),t}(),fn=zn("ObservableMap",xh);function B_(t){if(Ti(t)||fn(t))return t;if(Array.isArray(t))return new Map(t);if(hr(t)){var e=new Map;for(var o in t)e.set(o,t[o]);return e}else return Re(21,t)}var Ch,Sh,N_={};Ch=Symbol.iterator,Sh=Symbol.toStringTag;var Th=function(){function t(o,h,v){var w=this;h===void 0&&(h=Gn),v===void 0&&(v=process.env.NODE_ENV!=="production"?"ObservableSet@"+Nr():"ObservableSet"),this.name_=void 0,this[Ye]=N_,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=v,Lt(Set)||Re(22),this.enhancer_=function(C,E){return h(C,E,v)},Pn(function(){w.atom_=Ff(w.name_),o&&w.replace(o)})}var e=t.prototype;return e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.clear=function(){var h=this;cn(function(){Zf(function(){for(var v=Oi(h.data_.values()),w;!(w=v()).done;){var C=w.value;h.delete(C)}})})},e.forEach=function(h,v){for(var w=Oi(this),C;!(C=w()).done;){var E=C.value;h.call(v,E,E,this)}},e.add=function(h){var v=this;if(en(this.atom_),Pr(this)){var w=Dr(this,{type:On,object:this,newValue:h});if(!w)return this}if(!this.has(h)){cn(function(){v.data_.add(v.enhancer_(h,void 0)),v.atom_.reportChanged()});var C=process.env.NODE_ENV!=="production"&&Wt(),E=Vr(this),D=E||C?{observableKind:"set",debugObjectName:this.name_,type:On,object:this,newValue:h}:null;C&&process.env.NODE_ENV!=="production"&&dr(D),E&&Ur(this,D),C&&process.env.NODE_ENV!=="production"&&gr()}return this},e.delete=function(h){var v=this;if(Pr(this)){var w=Dr(this,{type:Ns,object:this,oldValue:h});if(!w)return!1}if(this.has(h)){var C=process.env.NODE_ENV!=="production"&&Wt(),E=Vr(this),D=E||C?{observableKind:"set",debugObjectName:this.name_,type:Ns,object:this,oldValue:h}:null;return C&&process.env.NODE_ENV!=="production"&&dr(D),cn(function(){v.atom_.reportChanged(),v.data_.delete(h)}),E&&Ur(this,D),C&&process.env.NODE_ENV!=="production"&&gr(),!0}return!1},e.has=function(h){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(h))},e.entries=function(){var h=0,v=Array.from(this.keys()),w=Array.from(this.values());return Co({next:function(){var E=h;return h+=1,E<w.length?{value:[v[E],w[E]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var h=this,v=0,w=Array.from(this.data_.values());return Co({next:function(){return v<w.length?{value:h.dehanceValue_(w[v++]),done:!1}:{done:!0}}})},e.replace=function(h){var v=this;return Mi(h)&&(h=new Set(h)),cn(function(){Array.isArray(h)?(v.clear(),h.forEach(function(w){return v.add(w)})):lo(h)?(v.clear(),h.forEach(function(w){return v.add(w)})):h!=null&&Re("Cannot initialize set from "+h)}),this},e.observe_=function(h,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support fireImmediately=true in combination with sets."),wo(this,h)},e.intercept_=function(h){return bo(this,h)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Ch]=function(){return this.values()},vu(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Sh,get:function(){return"Set"}}]),t}(),Mi=zn("ObservableSet",Th),Eh=Object.create(null),Oh="remove",Ru=function(){function t(o,h,v,w){h===void 0&&(h=new Map),w===void 0&&(w=Ay),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=o,this.values_=h,this.name_=v,this.defaultAnnotation_=w,this.keysAtom_=new fo(process.env.NODE_ENV!=="production"?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=hr(this.target_),process.env.NODE_ENV!=="production"&&!Lh(this.defaultAnnotation_)&&Re("defaultAnnotation must be valid annotation"),process.env.NODE_ENV!=="production"&&(this.appliedAnnotations_={})}var e=t.prototype;return e.getObservablePropValue_=function(h){return this.values_.get(h).get()},e.setObservablePropValue_=function(h,v){var w=this.values_.get(h);if(w instanceof qn)return w.set(v),!0;if(Pr(this)){var C=Dr(this,{type:Yr,object:this.proxy_||this.target_,name:h,newValue:v});if(!C)return null;v=C.newValue}if(v=w.prepareNewValue_(v),v!==Ce.UNCHANGED){var E=Vr(this),D=process.env.NODE_ENV!=="production"&&Wt(),p=E||D?{type:Yr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:w.value_,name:h,newValue:v}:null;process.env.NODE_ENV!=="production"&&D&&dr(p),w.setNewValue_(v),E&&Ur(this,p),process.env.NODE_ENV!=="production"&&D&&gr()}return!0},e.get_=function(h){return Ce.trackingDerivation&&!Tr(this.target_,h)&&this.has_(h),this.target_[h]},e.set_=function(h,v,w){return w===void 0&&(w=!1),Tr(this.target_,h)?this.values_.has(h)?this.setObservablePropValue_(h,v):w?Reflect.set(this.target_,h,v):(this.target_[h]=v,!0):this.extend_(h,{value:v,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,w)},e.has_=function(h){if(!Ce.trackingDerivation)return h in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var v=this.pendingKeys_.get(h);return v||(v=new $n(h in this.target_,xs,process.env.NODE_ENV!=="production"?this.name_+"."+pu(h)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(h,v)),v.get()},e.make_=function(h,v){if(v===!0&&(v=this.defaultAnnotation_),v!==!1){if(Dh(this,v,h),!(h in this.target_)){var w;if((w=this.target_[rr])!=null&&w[h])return;Re(1,v.annotationType_,this.name_+"."+h.toString())}for(var C=this.target_;C&&C!==vs;){var E=ps(C,h);if(E){var D=v.make_(this,h,E,C);if(D===0)return;if(D===1)break}C=Object.getPrototypeOf(C)}Ph(this,v,h)}},e.extend_=function(h,v,w,C){if(C===void 0&&(C=!1),w===!0&&(w=this.defaultAnnotation_),w===!1)return this.defineProperty_(h,v,C);Dh(this,w,h);var E=w.extend_(this,h,v,C);return E&&Ph(this,w,h),E},e.defineProperty_=function(h,v,w){w===void 0&&(w=!1),en(this.keysAtom_);try{Or();var C=this.delete_(h);if(!C)return C;if(Pr(this)){var E=Dr(this,{object:this.proxy_||this.target_,name:h,type:On,newValue:v.value});if(!E)return null;var D=E.newValue;v.value!==D&&(v=un({},v,{value:D}))}if(w){if(!Reflect.defineProperty(this.target_,h,v))return!1}else Zr(this.target_,h,v);this.notifyPropertyAddition_(h,v.value)}finally{Ar()}return!0},e.defineObservableProperty_=function(h,v,w,C){C===void 0&&(C=!1),en(this.keysAtom_);try{Or();var E=this.delete_(h);if(!E)return E;if(Pr(this)){var D=Dr(this,{object:this.proxy_||this.target_,name:h,type:On,newValue:v});if(!D)return null;v=D.newValue}var p=Ah(h),i={configurable:Ce.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:p.get,set:p.set};if(C){if(!Reflect.defineProperty(this.target_,h,i))return!1}else Zr(this.target_,h,i);var d=new $n(v,w,process.env.NODE_ENV!=="production"?this.name_+"."+h.toString():"ObservableObject.key",!1);this.values_.set(h,d),this.notifyPropertyAddition_(h,d.value_)}finally{Ar()}return!0},e.defineComputedProperty_=function(h,v,w){w===void 0&&(w=!1),en(this.keysAtom_);try{Or();var C=this.delete_(h);if(!C)return C;if(Pr(this)){var E=Dr(this,{object:this.proxy_||this.target_,name:h,type:On,newValue:void 0});if(!E)return null}v.name||(v.name=process.env.NODE_ENV!=="production"?this.name_+"."+h.toString():"ObservableObject.key"),v.context=this.proxy_||this.target_;var D=Ah(h),p={configurable:Ce.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:D.get,set:D.set};if(w){if(!Reflect.defineProperty(this.target_,h,p))return!1}else Zr(this.target_,h,p);this.values_.set(h,new qn(v)),this.notifyPropertyAddition_(h,void 0)}finally{Ar()}return!0},e.delete_=function(h,v){if(v===void 0&&(v=!1),en(this.keysAtom_),!Tr(this.target_,h))return!0;if(Pr(this)){var w=Dr(this,{object:this.proxy_||this.target_,name:h,type:Oh});if(!w)return null}try{var C,E;Or();var D=Vr(this),p=process.env.NODE_ENV!=="production"&&Wt(),i=this.values_.get(h),d=void 0;if(!i&&(D||p)){var c;d=(c=ps(this.target_,h))==null?void 0:c.value}if(v){if(!Reflect.deleteProperty(this.target_,h))return!1}else delete this.target_[h];if(process.env.NODE_ENV!=="production"&&delete this.appliedAnnotations_[h],i&&(this.values_.delete(h),i instanceof $n&&(d=i.value_),ih(i)),this.keysAtom_.reportChanged(),(C=this.pendingKeys_)==null||(E=C.get(h))==null||E.set(h in this.target_),D||p){var n={type:Oh,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:d,name:h};process.env.NODE_ENV!=="production"&&p&&dr(n),D&&Ur(this,n),process.env.NODE_ENV!=="production"&&p&&gr()}}finally{Ar()}return!0},e.observe_=function(h,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support the fire immediately property for observable objects."),wo(this,h)},e.intercept_=function(h){return bo(this,h)},e.notifyPropertyAddition_=function(h,v){var w,C,E=Vr(this),D=process.env.NODE_ENV!=="production"&&Wt();if(E||D){var p=E||D?{type:On,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:h,newValue:v}:null;process.env.NODE_ENV!=="production"&&D&&dr(p),E&&Ur(this,p),process.env.NODE_ENV!=="production"&&D&&gr()}(w=this.pendingKeys_)==null||(C=w.get(h))==null||C.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ei(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Jn(t,e){var o;if(process.env.NODE_ENV!=="production"&&e&&ei(t)&&Re("Options can't be provided for already observable objects."),Tr(t,Ye))return process.env.NODE_ENV!=="production"&&!(ju(t)instanceof Ru)&&Re("Cannot convert '"+Vs(t)+`' into observable object:
The target is already observable of different type.
Extending builtins is not supported.`),t;process.env.NODE_ENV!=="production"&&!Object.isExtensible(t)&&Re("Cannot make the designated object observable; it is not extensible");var h=(o=e==null?void 0:e.name)!=null?o:process.env.NODE_ENV!=="production"?(hr(t)?"ObservableObject":t.constructor.name)+"@"+Nr():"ObservableObject",v=new Ru(t,new Map,String(h),Ny(e));return uo(t,Ye,v),t}var V_=zn("ObservableObjectAdministration",Ru);function Ah(t){return Eh[t]||(Eh[t]={get:function(){return this[Ye].getObservablePropValue_(t)},set:function(o){return this[Ye].setObservablePropValue_(t,o)}})}function ei(t){return ys(t)?V_(t[Ye]):!1}function Ph(t,e,o){var h;process.env.NODE_ENV!=="production"&&(t.appliedAnnotations_[o]=e),(h=t.target_[rr])==null||delete h[o]}function Dh(t,e,o){if(process.env.NODE_ENV!=="production"&&!Lh(e)&&Re("Cannot annotate '"+t.name_+"."+o.toString()+"': Invalid annotation."),process.env.NODE_ENV!=="production"&&!Cs(e)&&Tr(t.appliedAnnotations_,o)){var h=t.name_+"."+o.toString(),v=t.appliedAnnotations_[o].annotationType_,w=e.annotationType_;Re("Cannot apply '"+w+"' to '"+h+"':"+(`
The field is already annotated with '`+v+"'.")+`
Re-annotating fields is not allowed.
Use 'override' annotation for methods overridden by subclass.`)}}var U_=Rh(0),Y_=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1}(),ku=0,Mh=function(){};function W_(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}W_(Mh,Array.prototype);var Iu=function(t,e,o){jf(h,t);function h(w,C,E,D){var p;return E===void 0&&(E=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),D===void 0&&(D=!1),p=t.call(this)||this,Pn(function(){var i=new Mu(E,C,D,!0);i.proxy_=_s(p),Mf(_s(p),Ye,i),w&&w.length&&p.spliceWithArray(0,0,w),Y_&&Object.defineProperty(_s(p),"0",U_)}),p}var v=h.prototype;return v.concat=function(){this[Ye].atom_.reportObserved();for(var C=arguments.length,E=new Array(C),D=0;D<C;D++)E[D]=arguments[D];return Array.prototype.concat.apply(this.slice(),E.map(function(p){return xo(p)?p.slice():p}))},v[o]=function(){var w=this,C=0;return Co({next:function(){return C<w.length?{value:w[C++],done:!1}:{done:!0,value:void 0}}})},vu(h,[{key:"length",get:function(){return this[Ye].getArrayLength_()},set:function(C){this[Ye].setArrayLength_(C)}},{key:e,get:function(){return"Array"}}]),h}(Mh,Symbol.toStringTag,Symbol.iterator);Object.entries(Bs).forEach(function(t){var e=t[0],o=t[1];e!=="concat"&&uo(Iu.prototype,e,o)});function Rh(t){return{enumerable:!1,configurable:!0,get:function(){return this[Ye].get_(t)},set:function(o){this[Ye].set_(t,o)}}}function H_(t){Zr(Iu.prototype,""+t,Rh(t))}function kh(t){if(t>ku){for(var e=ku;e<t+100;e++)H_(e);ku=t}}kh(1e3);function z_(t,e,o){return new Iu(t,e,o)}function An(t,e){if(typeof t=="object"&&t!==null){if(xo(t))return e!==void 0&&Re(23),t[Ye].atom_;if(Mi(t))return t.atom_;if(fn(t)){if(e===void 0)return t.keysAtom_;var o=t.data_.get(e)||t.hasMap_.get(e);return o||Re(25,e,Vs(t)),o}if(ei(t)){if(!e)return Re(26);var h=t[Ye].values_.get(e);return h||Re(27,e,Vs(t)),h}if(yu(t)||Ms(t)||Ls(t))return t}else if(Lt(t)&&Ls(t[Ye]))return t[Ye];Re(28)}function ju(t,e){if(t||Re(29),e!==void 0)return ju(An(t,e));if(yu(t)||Ms(t)||Ls(t)||fn(t)||Mi(t))return t;if(t[Ye])return t[Ye];Re(24,t)}function Vs(t,e){var o;if(e!==void 0)o=An(t,e);else{if(mo(t))return t.name;ei(t)||fn(t)||Mi(t)?o=ju(t):o=An(t)}return o.name_}function Pn(t){var e=Kn(),o=Ps(!0);Or();try{return t()}finally{Ar(),Ds(o),ln(e)}}var Ih=vs.toString;function Lu(t,e,o){return o===void 0&&(o=-1),Fu(t,e,o)}function Fu(t,e,o,h,v){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var w=typeof t;if(w!=="function"&&w!=="object"&&typeof e!="object")return!1;var C=Ih.call(t);if(C!==Ih.call(e))return!1;switch(C){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":o>=0&&o++;break}t=jh(t),e=jh(e);var E=C==="[object Array]";if(!E){if(typeof t!="object"||typeof e!="object")return!1;var D=t.constructor,p=e.constructor;if(D!==p&&!(Lt(D)&&D instanceof D&&Lt(p)&&p instanceof p)&&"constructor"in t&&"constructor"in e)return!1}if(o===0)return!1;o<0&&(o=-1),h=h||[],v=v||[];for(var i=h.length;i--;)if(h[i]===t)return v[i]===e;if(h.push(t),v.push(e),E){if(i=t.length,i!==e.length)return!1;for(;i--;)if(!Fu(t[i],e[i],o-1,h,v))return!1}else{var d=Object.keys(t),c;if(i=d.length,Object.keys(e).length!==i)return!1;for(;i--;)if(c=d[i],!(Tr(e,c)&&Fu(t[c],e[c],o-1,h,v)))return!1}return h.pop(),v.pop(),!0}function jh(t){return xo(t)?t.slice():Ti(t)||fn(t)||lo(t)||Mi(t)?Array.from(t.entries()):t}function Co(t){return t[Symbol.iterator]=G_,t}function G_(){return this}function Lh(t){return t instanceof Object&&typeof t.annotationType_=="string"&&Lt(t.make_)&&Lt(t.extend_)}if(["Symbol","Map","Set"].forEach(function(t){var e=du();typeof e[t]>"u"&&Re("MobX requires global '"+t+"' to be available or polyfilled")}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:u_,extras:{getDebugName:Vs},$mobx:Ye}),!Te.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!M_)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function X_(t){t()}function $_(t){t||(t=X_,process.env.NODE_ENV!=="production"&&console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")),x_({reactionScheduler:t})}function q_(t){return gh(t)}var K_=1e4,Q_=1e4,Z_=function(){function t(e){var o=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(h){h===void 0&&(h=K_),clearTimeout(o.sweepTimeout),o.sweepTimeout=void 0;var v=Date.now();o.registrations.forEach(function(w,C){v-w.registeredAt>=h&&(o.finalize(w.value),o.registrations.delete(C))}),o.registrations.size>0&&o.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){o.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,o,h){this.registrations.set(h,{value:o,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Q_))}}),t}(),J_=typeof FinalizationRegistry<"u"?FinalizationRegistry:Z_,So=new J_(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),Bu={exports:{}},Nu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function eb(){if(Fh)return Nu;Fh=1;var t=Te;function e(d,c){return d===c&&(d!==0||1/d===1/c)||d!==d&&c!==c}var o=typeof Object.is=="function"?Object.is:e,h=t.useState,v=t.useEffect,w=t.useLayoutEffect,C=t.useDebugValue;function E(d,c){var n=c(),a=h({inst:{value:n,getSnapshot:c}}),s=a[0].inst,l=a[1];return w(function(){s.value=n,s.getSnapshot=c,D(s)&&l({inst:s})},[d,n,c]),v(function(){return D(s)&&l({inst:s}),d(function(){D(s)&&l({inst:s})})},[d]),C(n),n}function D(d){var c=d.getSnapshot;d=d.value;try{var n=c();return!o(d,n)}catch{return!0}}function p(d,c){return c()}var i=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:E;return Nu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:i,Nu}var Vu={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function tb(){return Bh||(Bh=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=Te,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function o(m){{for(var y=arguments.length,b=new Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];h("error",m,b)}}function h(m,y,b){{var x=e.ReactDebugCurrentFrame,T=x.getStackAddendum();T!==""&&(y+="%s",b=b.concat([T]));var M=b.map(function(I){return String(I)});M.unshift("Warning: "+y),Function.prototype.apply.call(console[m],console,M)}}function v(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var w=typeof Object.is=="function"?Object.is:v,C=t.useState,E=t.useEffect,D=t.useLayoutEffect,p=t.useDebugValue,i=!1,d=!1;function c(m,y,b){i||t.startTransition!==void 0&&(i=!0,o("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var x=y();if(!d){var T=y();w(x,T)||(o("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}var M=C({inst:{value:x,getSnapshot:y}}),I=M[0].inst,R=M[1];return D(function(){I.value=x,I.getSnapshot=y,n(I)&&R({inst:I})},[m,x,y]),E(function(){n(I)&&R({inst:I});var W=function(){n(I)&&R({inst:I})};return m(W)},[m]),p(x),x}function n(m){var y=m.getSnapshot,b=m.value;try{var x=y();return!w(b,x)}catch{return!0}}function a(m,y,b){return y()}var s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l=!s,g=l?a:c,u=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g;Vu.useSyncExternalStore=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Vu}process.env.NODE_ENV==="production"?Bu.exports=eb():Bu.exports=tb();var rb=Bu.exports;function Nh(t){t.reaction=new po("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function nb(t,e){e===void 0&&(e="observed");var o=Te.useRef(null);if(!o.current){var h={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(E){return So.unregister(h),h.onStoreChange=E,h.reaction||(Nh(h),h.stateVersion=Symbol()),function(){var D;h.onStoreChange=null,(D=h.reaction)===null||D===void 0||D.dispose(),h.reaction=null}},getSnapshot:function(){return h.stateVersion}};o.current=h}var v=o.current;v.reaction||(Nh(v),So.register(o,v,v)),Te.useDebugValue(v.reaction,q_),rb.useSyncExternalStore(v.subscribe,v.getSnapshot,v.getSnapshot);var w,C;if(v.reaction.track(function(){try{w=t()}catch(E){C=E}}),C)throw C;return w}var Uu,Yu,Vh=!0,Uh=typeof Symbol=="function"&&Symbol.for,ib=(Yu=(Uu=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Uu===void 0?void 0:Uu.configurable)!==null&&Yu!==void 0?Yu:!1,Yh=Uh?Symbol.for("react.forward_ref"):typeof Te.forwardRef=="function"&&Te.forwardRef(function(t){return null}).$$typeof,Wh=Uh?Symbol.for("react.memo"):typeof Te.memo=="function"&&Te.memo(function(t){return null}).$$typeof;function ob(t,e){var o;if(process.env.NODE_ENV!=="production"&&Vh&&e&&(Vh=!1,console.warn("[mobx-react-lite] `observer(fn, { forwardRef: true })` is deprecated, use `observer(React.forwardRef(fn))`")),Wh&&t.$$typeof===Wh)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var h=(o=e==null?void 0:e.forwardRef)!==null&&o!==void 0?o:!1,v=t,w=t.displayName||t.name;if(Yh&&t.$$typeof===Yh&&(h=!0,v=t.render,typeof v!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var C=function(E,D){return nb(function(){return v(E,D)},w)};return C.displayName=t.displayName,ib&&Object.defineProperty(C,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(C.contextTypes=t.contextTypes),h&&(C=Te.forwardRef(C)),C=Te.memo(C),ab(t,C),process.env.NODE_ENV!=="production"&&Object.defineProperty(C,"contextTypes",{set:function(){var E,D;throw new Error("[mobx-react-lite] `".concat(this.displayName||((E=this.type)===null||E===void 0?void 0:E.displayName)||((D=this.type)===null||D===void 0?void 0:D.name)||"Component",".contextTypes` must be set before applying `observer`."))}}),C}var sb={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function ab(t,e){Object.keys(t).forEach(function(o){sb[o]||Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}process.env.NODE_ENV,globalThis&&globalThis.__read;var Wu;$_(Yn.unstable_batchedUpdates),Wu=So.finalizeAllImmediately;function ub(t,e){if(Hh(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var o=Object.keys(t),h=Object.keys(e);if(o.length!==h.length)return!1;for(var v=0;v<o.length;v++)if(!Object.hasOwnProperty.call(e,o[v])||!Hh(t[o[v]],e[o[v]]))return!1;return!0}function Hh(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var zh=Symbol("patchMixins"),Gh=Symbol("patchedDefinition");function lb(t,e){var o=t[zh]=t[zh]||{},h=o[e]=o[e]||{};return h.locks=h.locks||0,h.methods=h.methods||[],h}function Xh(t,e){for(var o=this,h=arguments.length,v=new Array(h>2?h-2:0),w=2;w<h;w++)v[w-2]=arguments[w];e.locks++;try{var C;return t!=null&&(C=t.apply(this,v)),C}finally{e.locks--,e.locks===0&&e.methods.forEach(function(E){E.apply(o,v)})}}function $h(t,e){var o=function(){for(var v=arguments.length,w=new Array(v),C=0;C<v;C++)w[C]=arguments[C];Xh.call.apply(Xh,[this,t,e].concat(w))};return o}function cb(t,e,o){var h=lb(t,e);h.methods.indexOf(o)<0&&h.methods.push(o);var v=Object.getOwnPropertyDescriptor(t,e);if(!(v&&v[Gh])){var w=t[e],C=qh(t,e,v?v.enumerable:void 0,h,w);Object.defineProperty(t,e,C)}}function qh(t,e,o,h,v){var w,C=$h(v,h);return w={},w[Gh]=!0,w.get=function(){return C},w.set=function(D){if(this===t)C=$h(D,h);else{var p=qh(this,e,o,h,D);Object.defineProperty(this,e,p)}},w.configurable=!0,w.enumerable=o,w}var Kh=Symbol("ObserverAdministration"),Qh=Symbol("isMobXReactObserver"),Zh;process.env.NODE_ENV!=="production"&&(Zh={props:Hu("props"),state:Hu("state"),context:Hu("context")});function To(t){var e;return(e=t[Kh])!=null?e:t[Kh]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:Us(t.constructor),state:void 0,props:void 0,context:void 0}}function fb(t){var e=t.prototype;if(t[Qh]){var o=Us(t);throw new Error("The provided component class ("+o+") has already been declared as an observer component.")}else t[Qh]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==Te.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=Jh;else if(e.shouldComponentUpdate!==Jh)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}process.env.NODE_ENV!=="production"&&Object.defineProperties(e,Zh);var h=e.render;if(typeof h!="function"){var v=Us(t);throw new Error("[mobx-react] class component ("+v+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}e.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:hb.call(this,h)}),this.render()};var w=e.componentDidMount;return e.componentDidMount=function(){var C=this;if(process.env.NODE_ENV!=="production"&&this.componentDidMount!==Object.getPrototypeOf(this).componentDidMount){var E=Us(t);throw new Error("[mobx-react] `observer("+E+").componentDidMount` must be defined on prototype.\n`componentDidMount = () => {}` or `componentDidMount = function() {}` is not supported.")}var D=To(this);return D.mounted=!0,So.unregister(this),D.forceUpdate=function(){return C.forceUpdate()},(!D.reaction||D.reactionInvalidatedBeforeMount)&&D.forceUpdate(),w==null?void 0:w.apply(this,arguments)},cb(e,"componentWillUnmount",function(){var C,E=To(this);(C=E.reaction)==null||C.dispose(),E.reaction=null,E.forceUpdate=null,E.mounted=!1,E.reactionInvalidatedBeforeMount=!1}),t}function Us(t){return t.displayName||t.name||"<component>"}function hb(t){var e=t.bind(this),o=To(this);function h(){o.reaction||(o.reaction=db(o),o.mounted||So.register(this,o,this));var v=void 0,w=void 0;if(o.reaction.track(function(){try{w=qy(!1,e)}catch(C){v=C}}),v)throw v;return w}return h}function db(t){return new po(t.name+".render()",function(){if(!t.mounted){t.reactionInvalidatedBeforeMount=!0;return}try{t.forceUpdate==null||t.forceUpdate()}catch{var e;(e=t.reaction)==null||e.dispose(),t.reaction=null}})}function Jh(t,e){return this.state!==e?!0:!ub(this.props,t)}function Hu(t){return{configurable:!0,enumerable:!0,get:function(){var o=To(this),h=t_().trackingDerivation;if(h&&h!==o.reaction)throw new Error('[mobx-react] Cannot read "'+o.name+"."+t+`" in a reactive context, as it isn't observable.
                    Please use component lifecycle method to copy the value into a local observable first.
                    See https://github.com/mobxjs/mobx/blob/main/packages/mobx-react/README.md#note-on-using-props-and-state-in-derivations`);return o[t]},set:function(o){To(this)[t]=o}}}function Eo(t,e){if(e&&e.kind!=="class")throw new Error("The @observer decorator can be used on classes only");return t.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(Te.Component,t)||Object.prototype.isPrototypeOf.call(Te.PureComponent,t)?fb(t):ob(t)}if(Te.version.split(".")[0],!Te.Component)throw new Error("mobx-react requires React to be available");if(!Vt)throw new Error("mobx-react requires mobx to be available");function ed(t){const[e,o]=Te.useState(null);return Te.useEffect(()=>{if(!t.current)throw Error("ref must be initialized in intial render");const h=new ResizeObserver(w=>{const E=w[0].target.getBoundingClientRect();o(D=>D&&D.width===E.width&&D.height===E.height?D:{width:E.width,height:E.height})}),v=t.current;return h.observe(v),()=>{h.unobserve(v)}},[t]),e}function gb({containerSize:t}){const e=Te.useRef(null),{core:o}=Ut();return Te.useEffect(()=>(o.setCanvas(e.current),()=>{o.detach()}),[o]),Te.useEffect(()=>{o.setContainerSize(t)},[t,o]),Y.jsx(Y.Fragment,{children:Y.jsx("canvas",{ref:e})})}var vr={};const zu=Lc(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.1"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var o=zu,h=new o.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=h.document,e.jsdomImplForWrapper=zu.implForWrapper,e.nodeCanvas=zu.Canvas,e.window=h,DOMParser=e.window.DOMParser}if(e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),typeof v>"u")var v={};if(function(p){p.modifyEventListener=!1,p.modifySelectors=!1,p.configure=function(R){isFinite(R.modifyEventListener)&&(p.modifyEventListener=R.modifyEventListener),isFinite(R.modifySelectors)&&(p.modifySelectors=R.modifySelectors),x===!1&&p.modifyEventListener&&T(),M===!1&&p.modifySelectors&&I()},p.add=function(R,W,K,$){return d(R,W,K,$,"add")},p.remove=function(R,W,K,$){return d(R,W,K,$,"remove")},p.returnFalse=function(R){return!1},p.stop=function(R){R&&(R.stopPropagation&&R.stopPropagation(),R.cancelBubble=!0,R.cancelBubbleCount=0)},p.prevent=function(R){R&&(R.preventDefault?R.preventDefault():R.preventManipulation?R.preventManipulation():R.returnValue=!1)},p.cancel=function(R){p.stop(R),p.prevent(R)},p.blur=function(){var R=document.activeElement;if(R){var W=document.activeElement.nodeName;(W==="INPUT"||W==="TEXTAREA"||R.contentEditable==="true")&&R.blur&&R.blur()}},p.getEventSupport=function(R,W){if(typeof R=="string"&&(W=R,R=window),W="on"+W,W in R)return!0;if(R.setAttribute||(R=document.createElement("div")),R.setAttribute&&R.removeAttribute){R.setAttribute(W,"");var K=typeof R[W]=="function";return typeof R[W]<"u"&&(R[W]=null),R.removeAttribute(W),K}};var i=function(R){if(!R||typeof R!="object")return R;var W=new R.constructor;for(var K in R)!R[K]||typeof R[K]!="object"?W[K]=R[K]:W[K]=i(R[K]);return W},d=function(R,W,K,$,ae,ce){if($=$||{},String(R)==="[object Object]"){var fe=R;if(R=fe.target,delete fe.target,fe.type&&fe.listener){W=fe.type,delete fe.type,K=fe.listener,delete fe.listener;for(var le in fe)$[le]=fe[le]}else{for(var ye in fe){var Ee=fe[ye];typeof Ee!="function"&&($[ye]=Ee)}var ne={};for(var le in fe){var ye=le.split(","),P=fe[le],B={};for(var F in $)B[F]=$[F];if(typeof P=="function")var K=P;else if(typeof P.listener=="function"){var K=P.listener;for(var F in P)typeof P[F]!="function"&&(B[F]=P[F])}else continue;for(var L=0;L<ye.length;L++)ne[le]=v.add(R,ye[L],K,B,ae)}return ne}}if(!(!R||!W||!K)){if(typeof R=="string"&&W==="ready")if(window.eventjs_stallOnReady)W="load",R=window;else{var G=new Date().getTime(),O=$.timeout,k=$.interval||1e3/60,V=window.setInterval(function(){new Date().getTime()-G>O&&window.clearInterval(V),document.querySelector(R)&&(window.clearInterval(V),setTimeout(K,1))},k);return}if(typeof R=="string"){if(R=document.querySelectorAll(R),R.length===0)return n("Missing target on listener!",arguments);R.length===1&&(R=R[0])}var z,Z={};if(R.length>0&&R!==window){for(var J=0,U=R.length;J<U;J++)z=d(R[J],W,K,i($),ae),z&&(Z[J]=z);return c(Z)}if(typeof W=="string"&&(W=W.toLowerCase(),W.indexOf(" ")!==-1?W=W.split(" "):W.indexOf(",")!==-1&&(W=W.split(","))),typeof W!="string"){if(typeof W.length=="number")for(var he=0,ie=W.length;he<ie;he++)z=d(R,W[he],K,i($),ae),z&&(Z[W[he]]=z);else for(var le in W)typeof W[le]=="function"?z=d(R,le,W[le],i($),ae):z=d(R,le,W[le].listener,i(W[le]),ae),z&&(Z[le]=z);return c(Z)}else W.indexOf("on")===0&&(W=W.slice(2));if(typeof R!="object")return n("Target is not defined!",arguments);if(typeof K!="function")return n("Listener is not a function!",arguments);var ee=$.useCapture||!1,Q=m(R)+"."+m(K)+"."+(ee?1:0);if(p.Gesture&&p.Gesture._gestureHandlers[W]){if(Q=W+Q,ae==="remove"){if(!g[Q])return;g[Q].remove(),delete g[Q]}else if(ae==="add"){if(g[Q])return g[Q].add(),g[Q];if($.useCall&&!p.modifyEventListener){var se=K;K=function(pe,be){for(var Ie in be)pe[Ie]=be[Ie];return se.call(R,pe)}}$.gesture=W,$.target=R,$.listener=K,$.fromOverwrite=ce,g[Q]=p.proxy[W]($)}return g[Q]}else{for(var de=l(W),L=0,ue;L<de.length;L++)if(W=de[L],ue=W+"."+Q,ae==="remove"){if(!g[ue])continue;R[b](W,K,ee),delete g[ue]}else if(ae==="add"){if(g[ue])return g[ue];R[y](W,K,ee),g[ue]={id:ue,type:W,target:R,listener:K,remove:function(){for(var be=0;be<de.length;be++)p.remove(R,de[be],K,$)}}}return g[ue]}}},c=function(R){return{remove:function(){for(var W in R)R[W].remove()},add:function(){for(var W in R)R[W].add()}}},n=function(R,W){typeof console>"u"||typeof console.error>"u"||console.error(R,W)},a={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},s={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2};(function(){p.supports={},window.navigator.msPointerEnabled&&(p.supports.msPointer=!0),p.getEventSupport("touchstart")&&(p.supports.touch=!0),p.getEventSupport("mousedown")&&(p.supports.mouse=!0)})();var l=function(){return function(R){var W=document.addEventListener?"":"on",K=s[R];if(isFinite(K)){var $=[];for(var ae in p.supports)$.push(W+a[ae][K]);return $}else return[W+R]}}(),g={},u=0,m=function(R){return R===window?"#window":R===document?"#document":(R.uniqueID||(R.uniqueID="e"+u++),R.uniqueID)},y=document.addEventListener?"addEventListener":"attachEvent",b=document.removeEventListener?"removeEventListener":"detachEvent";p.createPointerEvent=function(R,W,K){var $=W.gesture,ae=W.target,ce=R.changedTouches||p.proxy.getCoords(R);if(ce.length){var fe=ce[0];W.pointers=K?[]:ce,W.pageX=fe.pageX,W.pageY=fe.pageY,W.x=W.pageX,W.y=W.pageY}var le=document.createEvent("Event");le.initEvent($,!0,!0),le.originalEvent=R;for(var ye in W)ye!=="target"&&(le[ye]=W[ye]);var Ee=le.type;p.Gesture&&p.Gesture._gestureHandlers[Ee]&&W.oldListener.call(ae,le,W,!1)};var x=!1,T=function(){if(window.HTMLElement){var R=function(W){var K=function($){var ae=$+"EventListener",ce=W[ae];W[ae]=function(fe,le,ye){if(p.Gesture&&p.Gesture._gestureHandlers[fe]){var Ee=ye;typeof ye=="object"?Ee.useCall=!0:Ee={useCall:!0,useCapture:ye},d(this,fe,le,Ee,$,!0)}else for(var ne=l(fe),P=0;P<ne.length;P++)ce.call(this,ne[P],le,ye)}};K("add"),K("remove")};navigator.userAgent.match(/Firefox/)?(R(HTMLDivElement.prototype),R(HTMLCanvasElement.prototype)):R(HTMLElement.prototype),R(document),R(window)}},M=!1,I=function(){var R=NodeList.prototype;R.removeEventListener=function(W,K,$){for(var ae=0,ce=this.length;ae<ce;ae++)this[ae].removeEventListener(W,K,$)},R.addEventListener=function(W,K,$){for(var ae=0,ce=this.length;ae<ce;ae++)this[ae].addEventListener(W,K,$)}};return p}(v),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){p.pointerSetup=function(c,n){c.target=c.target||window,c.doc=c.target.ownerDocument||c.target,c.minFingers=c.minFingers||c.fingers||1,c.maxFingers=c.maxFingers||c.fingers||1/0,c.position=c.position||"relative",delete c.fingers,n=n||{},n.enabled=!0,n.gesture=c.gesture,n.target=c.target,n.env=c.env,v.modifyEventListener&&c.fromOverwrite&&(c.oldListener=c.listener,c.listener=v.createPointerEvent);var a=0,s=n.gesture.indexOf("pointer")===0&&v.modifyEventListener?"pointer":"mouse";return c.oldListener&&(n.oldListener=c.oldListener),n.listener=c.listener,n.proxy=function(l){n.defaultListener=c.listener,c.listener=l,l(c.event,n)},n.add=function(){n.enabled!==!0&&(c.onPointerDown&&v.add(c.target,s+"down",c.onPointerDown),c.onPointerMove&&v.add(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&v.add(c.doc,s+"up",c.onPointerUp),n.enabled=!0)},n.remove=function(){n.enabled!==!1&&(c.onPointerDown&&v.remove(c.target,s+"down",c.onPointerDown),c.onPointerMove&&v.remove(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&v.remove(c.doc,s+"up",c.onPointerUp),n.reset(),n.enabled=!1)},n.pause=function(l){c.onPointerMove&&(!l||l.move)&&v.remove(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&(!l||l.up)&&v.remove(c.doc,s+"up",c.onPointerUp),a=c.fingers,c.fingers=0},n.resume=function(l){c.onPointerMove&&(!l||l.move)&&v.add(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&(!l||l.up)&&v.add(c.doc,s+"up",c.onPointerUp),c.fingers=a},n.reset=function(){c.tracker={},c.fingers=0},n};var i=v.supports;v.isMouse=!!i.mouse,v.isMSPointer=!!i.touch,v.isTouch=!!i.msPointer,p.pointerStart=function(c,n,a){var s=(c.type||"mousedown").toUpperCase();s.indexOf("MOUSE")===0?(v.isMouse=!0,v.isTouch=!1,v.isMSPointer=!1):s.indexOf("TOUCH")===0?(v.isMouse=!1,v.isTouch=!0,v.isMSPointer=!1):s.indexOf("MSPOINTER")===0&&(v.isMouse=!1,v.isTouch=!1,v.isMSPointer=!0);var l=function(R,W){var K=a.bbox,$=u[W]={};switch(a.position){case"absolute":$.offsetX=0,$.offsetY=0;break;case"differenceFromLast":$.offsetX=R.pageX,$.offsetY=R.pageY;break;case"difference":$.offsetX=R.pageX,$.offsetY=R.pageY;break;case"move":$.offsetX=R.pageX-K.x1,$.offsetY=R.pageY-K.y1;break;default:$.offsetX=K.x1-K.scrollLeft,$.offsetY=K.y1-K.scrollTop;break}var ae=R.pageX-$.offsetX,ce=R.pageY-$.offsetY;$.rotation=0,$.scale=1,$.startTime=$.moveTime=new Date().getTime(),$.move={x:ae,y:ce},$.start={x:ae,y:ce},a.fingers++};a.event=c,n.defaultListener&&(a.listener=n.defaultListener,delete n.defaultListener);for(var g=!a.fingers,u=a.tracker,m=c.changedTouches||p.getCoords(c),y=m.length,b=0;b<y;b++){var x=m[b],T=x.identifier||1/0;if(a.fingers){if(a.fingers>=a.maxFingers){var I=[];for(var T in a.tracker)I.push(T);return n.identifier=I.join(","),g}for(var M in u)if(u[M].up){delete u[M],l(x,T),a.cancel=!0;break}if(u[T])continue;l(x,T)}else u=a.tracker={},n.bbox=a.bbox=p.getBoundingBox(a.target),a.fingers=0,a.cancel=!1,l(x,T)}var I=[];for(var T in a.tracker)I.push(T);return n.identifier=I.join(","),g},p.pointerEnd=function(c,n,a,s){for(var l=c.touches||[],g=l.length,u={},m=0;m<g;m++){var y=l[m],b=y.identifier;u[b||1/0]=!0}for(var b in a.tracker){var x=a.tracker[b];u[b]||x.up||(s&&s({pageX:x.pageX,pageY:x.pageY,changedTouches:[{pageX:x.pageX,pageY:x.pageY,identifier:b==="Infinity"?1/0:b}]},"up"),x.up=!0,a.fingers--)}if(a.fingers!==0)return!1;var T=[];a.gestureFingers=0;for(var b in a.tracker)a.gestureFingers++,T.push(b);return n.identifier=T.join(","),!0},p.getCoords=function(c){return typeof c.pageX<"u"?p.getCoords=function(n){return Array({type:"mouse",x:n.pageX,y:n.pageY,pageX:n.pageX,pageY:n.pageY,identifier:n.pointerId||1/0})}:p.getCoords=function(n){var a=document.documentElement;return n=n||window.event,Array({type:"mouse",x:n.clientX+a.scrollLeft,y:n.clientY+a.scrollTop,pageX:n.clientX+a.scrollLeft,pageY:n.clientY+a.scrollTop,identifier:1/0})},p.getCoords(c)},p.getCoord=function(c){if("ontouchstart"in window){var n=0,a=0;p.getCoord=function(s){var l=s.changedTouches;return l&&l.length?{x:n=l[0].pageX,y:a=l[0].pageY}:{x:n,y:a}}}else typeof c.pageX<"u"&&typeof c.pageY<"u"?p.getCoord=function(s){return{x:s.pageX,y:s.pageY}}:p.getCoord=function(s){var l=document.documentElement;return s=s||window.event,{x:s.clientX+l.scrollLeft,y:s.clientY+l.scrollTop}};return p.getCoord(c)};var d=function(c,n){var a=parseFloat(c.getPropertyValue(n),10);return isFinite(a)?a:0};return p.getBoundingBox=function(c){(c===window||c===document)&&(c=document.body);var n={},a=c.getBoundingClientRect();n.width=a.width,n.height=a.height,n.x1=a.left,n.y1=a.top,n.scaleX=a.width/c.offsetWidth||1,n.scaleY=a.height/c.offsetHeight||1,n.scrollLeft=0,n.scrollTop=0;var s=window.getComputedStyle(c),l=s.getPropertyValue("box-sizing")==="border-box";if(l===!1){var g=d(s,"border-left-width"),u=d(s,"border-right-width"),m=d(s,"border-bottom-width"),y=d(s,"border-top-width");n.border=[g,u,y,m],n.x1+=g,n.y1+=y,n.width-=u+g,n.height-=m+y}n.x2=n.x1+n.width,n.y2=n.y1+n.height;for(var b=s.getPropertyValue("position"),x=b==="fixed"?c:c.parentNode;x!==null&&!(x===document.body||x.scrollTop===void 0);){var s=window.getComputedStyle(x),b=s.getPropertyValue("position");if(b!=="absolute")if(b==="fixed"){n.scrollTop-=x.parentNode.scrollTop,n.scrollLeft-=x.parentNode.scrollLeft;break}else n.scrollLeft+=x.scrollLeft,n.scrollTop+=x.scrollTop;x=x.parentNode}return n.scrollBodyLeft=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,n.scrollBodyTop=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,n.scrollLeft-=n.scrollBodyLeft,n.scrollTop-=n.scrollBodyTop,n},function(){var c=navigator.userAgent.toLowerCase(),n=c.indexOf("macintosh")!==-1,a;n&&c.indexOf("khtml")!==-1?a={91:!0,93:!0}:n&&c.indexOf("firefox")!==-1?a={224:!0}:a={17:!0},(p.metaTrackerReset=function(){v.fnKey=p.fnKey=!1,v.metaKey=p.metaKey=!1,v.escKey=p.escKey=!1,v.ctrlKey=p.ctrlKey=!1,v.shiftKey=p.shiftKey=!1,v.altKey=p.altKey=!1})(),p.metaTracker=function(s){var l=s.type==="keydown";s.keyCode===27&&(v.escKey=p.escKey=l),a[s.keyCode]&&(v.metaKey=p.metaKey=l),v.ctrlKey=p.ctrlKey=s.ctrlKey,v.shiftKey=p.shiftKey=s.shiftKey,v.altKey=p.altKey=s.altKey}}(),p}(v.proxy),typeof v>"u")var v={};if(v.MutationObserver=function(){var p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=!p&&function(){var d=document.createElement("p"),c=!1,n=function(){c=!0};if(d.addEventListener)d.addEventListener("DOMAttrModified",n,!1);else if(d.attachEvent)d.attachEvent("onDOMAttrModified",n);else return!1;return d.setAttribute("id","target"),c}();return function(d,c){if(p){var n={subtree:!1,attributes:!0},a=new p(function(s){s.forEach(function(l){c.call(l.target,l.attributeName)})});a.observe(d,n)}else i?v.add(d,"DOMAttrModified",function(s){c.call(d,s.attrName)}):"onpropertychange"in document.body&&v.add(d,"propertychange",function(s){c.call(d,window.event.propertyName)})}}(),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.click=function(i){i.gesture=i.gesture||"click",i.maxFingers=i.maxFingers||i.fingers||1,i.onPointerDown=function(c){p.pointerStart(c,d,i)&&v.add(i.target,"mouseup",i.onPointerUp)},i.onPointerUp=function(c){if(p.pointerEnd(c,d,i)){v.remove(i.target,"mouseup",i.onPointerUp);var n=c.changedTouches||p.getCoords(c),a=n[0],s=i.bbox,l=p.getBoundingBox(i.target),g=a.pageY-l.scrollBodyTop,u=a.pageX-l.scrollBodyLeft;if(u>s.x1&&g>s.y1&&u<s.x2&&g<s.y2&&s.scrollTop===l.scrollTop){for(var m in i.tracker)break;var y=i.tracker[m];d.x=y.start.x,d.y=y.start.y,i.listener(c,d)}}};var d=p.pointerSetup(i);return d.state="click",v.add(i.target,"mousedown",i.onPointerDown),d},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.click=p.click,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.dbltap=p.dblclick=function(i){i.gesture=i.gesture||"dbltap",i.maxFingers=i.maxFingers||i.fingers||1;var d=700,c,n,a,s,l;i.onPointerDown=function(u){var m=u.changedTouches||p.getCoords(u);c&&!n?(l=m[0],n=new Date().getTime()-c):(s=m[0],c=new Date().getTime(),n=0,clearTimeout(a),a=setTimeout(function(){c=0},d)),p.pointerStart(u,g,i)&&(v.add(i.target,"mousemove",i.onPointerMove).listener(u),v.add(i.target,"mouseup",i.onPointerUp))},i.onPointerMove=function(u){if(c&&!n){var m=u.changedTouches||p.getCoords(u);l=m[0]}var y=i.bbox,b=l.pageX-y.x1,x=l.pageY-y.y1;b>0&&b<y.width&&x>0&&x<y.height&&Math.abs(l.pageX-s.pageX)<=25&&Math.abs(l.pageY-s.pageY)<=25||(v.remove(i.target,"mousemove",i.onPointerMove),clearTimeout(a),c=n=0)},i.onPointerUp=function(u){if(p.pointerEnd(u,g,i)&&(v.remove(i.target,"mousemove",i.onPointerMove),v.remove(i.target,"mouseup",i.onPointerUp)),c&&n){if(n<=d){g.state=i.gesture;for(var m in i.tracker)break;var y=i.tracker[m];g.x=y.start.x,g.y=y.start.y,i.listener(u,g)}clearTimeout(a),c=n=0}};var g=p.pointerSetup(i);return g.state="dblclick",v.add(i.target,"mousedown",i.onPointerDown),g},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.dbltap=p.dbltap,v.Gesture._gestureHandlers.dblclick=p.dblclick,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.dragElement=function(i,d){p.drag({event:d,target:i,position:"move",listener:function(c,n){i.style.left=n.x+"px",i.style.top=n.y+"px",v.prevent(c)}})},p.drag=function(i){i.gesture="drag",i.onPointerDown=function(c){p.pointerStart(c,d,i)&&(i.monitor||(v.add(i.doc,"mousemove",i.onPointerMove),v.add(i.doc,"mouseup",i.onPointerUp))),i.onPointerMove(c,"down")},i.onPointerMove=function(c,n){if(!i.tracker)return i.onPointerDown(c);i.bbox;for(var a=c.changedTouches||p.getCoords(c),s=a.length,l=0;l<s;l++){var g=a[l],u=g.identifier||1/0,m=i.tracker[u];m&&(m.pageX=g.pageX,m.pageY=g.pageY,d.state=n||"move",d.identifier=u,d.start=m.start,d.fingers=i.fingers,i.position==="differenceFromLast"?(d.x=m.pageX-m.offsetX,d.y=m.pageY-m.offsetY,m.offsetX=m.pageX,m.offsetY=m.pageY):(d.x=m.pageX-m.offsetX,d.y=m.pageY-m.offsetY),i.listener(c,d))}},i.onPointerUp=function(c){p.pointerEnd(c,d,i,i.onPointerMove)&&(i.monitor||(v.remove(i.doc,"mousemove",i.onPointerMove),v.remove(i.doc,"mouseup",i.onPointerUp)))};var d=p.pointerSetup(i);return i.event?i.onPointerDown(i.event):(v.add(i.target,"mousedown",i.onPointerDown),i.monitor&&(v.add(i.doc,"mousemove",i.onPointerMove),v.add(i.doc,"mouseup",i.onPointerUp))),d},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.drag=p.drag,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){var i=Math.PI/180,d=function(c,n){var a=0,s=0,l=0;for(var g in n){var u=n[g];u.up||(a+=u.move.x,s+=u.move.y,l++)}return c.x=a/=l,c.y=s/=l,c};return p.gesture=function(c){c.gesture=c.gesture||"gesture",c.minFingers=c.minFingers||c.fingers||2,c.onPointerDown=function(a){var s=c.fingers;if(p.pointerStart(a,n,c)&&(v.add(c.doc,"mousemove",c.onPointerMove),v.add(c.doc,"mouseup",c.onPointerUp)),c.fingers===c.minFingers&&s!==c.fingers){n.fingers=c.minFingers,n.scale=1,n.rotation=0,n.state="start";var l="";for(var g in c.tracker)l+=g;n.identifier=parseInt(l),d(n,c.tracker),c.listener(a,n)}},c.onPointerMove=function(a,s){for(var l=c.bbox,g=c.tracker,T=a.changedTouches||p.getCoords(a),u=T.length,m=0;m<u;m++){var y=T[m],b=y.identifier||1/0,x=g[b];x&&(x.move.x=y.pageX-l.x1,x.move.y=y.pageY-l.y1)}if(!(c.fingers<c.minFingers)){var T=[],M=0,I=0;d(n,g);for(var b in g){var y=g[b];if(!y.up){var R=y.start;if(!R.distance){var W=R.x-n.x,K=R.y-n.y;R.distance=Math.sqrt(W*W+K*K),R.angle=Math.atan2(W,K)/i}var W=y.move.x-n.x,K=y.move.y-n.y,$=Math.sqrt(W*W+K*K);R.distance!==0&&(M+=$/R.distance);var ae=Math.atan2(W,K)/i,ce=(R.angle-ae+360)%360-180;y.DEG2=y.DEG1,y.DEG1=ce>0?ce:-ce,typeof y.DEG2<"u"&&(ce>0?y.rotation+=y.DEG1-y.DEG2:y.rotation-=y.DEG1-y.DEG2,I+=y.rotation),T.push(y.move)}}n.touches=T,n.fingers=c.fingers,n.scale=M/c.fingers,n.rotation=I/c.fingers,n.state="change",c.listener(a,n)}},c.onPointerUp=function(a){var s=c.fingers;p.pointerEnd(a,n,c)&&(v.remove(c.doc,"mousemove",c.onPointerMove),v.remove(c.doc,"mouseup",c.onPointerUp)),s===c.minFingers&&c.fingers<c.minFingers&&(n.fingers=c.fingers,n.state="end",c.listener(a,n))};var n=p.pointerSetup(c);return v.add(c.target,"mousedown",c.onPointerDown),n},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.gesture=p.gesture,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.pointerdown=p.pointermove=p.pointerup=function(i){if(i.gesture=i.gesture||"pointer",!i.target.isPointerEmitter){var d=!0;i.onPointerDown=function(n){d=!1,c.gesture="pointerdown",i.listener(n,c)},i.onPointerMove=function(n){c.gesture="pointermove",i.listener(n,c,d)},i.onPointerUp=function(n){d=!0,c.gesture="pointerup",i.listener(n,c,!0)};var c=p.pointerSetup(i);return v.add(i.target,"mousedown",i.onPointerDown),v.add(i.target,"mousemove",i.onPointerMove),v.add(i.doc,"mouseup",i.onPointerUp),i.target.isPointerEmitter=!0,c}},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.pointerdown=p.pointerdown,v.Gesture._gestureHandlers.pointermove=p.pointermove,v.Gesture._gestureHandlers.pointerup=p.pointerup,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.shake=function(i){var d={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:i.target,listener:i.listener,remove:function(){window.removeEventListener("devicemotion",m,!1)}},c=4,n=1e3,a=200,s=3,l=new Date().getTime(),g={x:0,y:0,z:0},u={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},m=function(y){var b=.8,x=y.accelerationIncludingGravity;if(g.x=b*g.x+(1-b)*x.x,g.y=b*g.y+(1-b)*x.y,g.z=b*g.z+(1-b)*x.z,d.accelerationIncludingGravity=g,d.acceleration.x=x.x-g.x,d.acceleration.y=x.y-g.y,d.acceleration.z=x.z-g.z,i.gesture==="devicemotion"){i.listener(y,d);return}for(var T="xyz",M=new Date().getTime(),I=0,R=T.length;I<R;I++){var W=T[I],K=d.acceleration[W],$=u[W],ae=Math.abs(K);if(!(M-l<n)&&ae>c){var ce=M*K/ae,fe=Math.abs(ce+$.value);$.value&&fe<a?($.value=ce,$.count++,$.count===s&&(i.listener(y,d),l=M,$.value=0,$.count=0)):($.value=ce,$.count=1)}}};if(window.addEventListener)return window.addEventListener("devicemotion",m,!1),d},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.shake=p.shake,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){var i=Math.PI/180;return p.swipe=function(d){d.snap=d.snap||90,d.threshold=d.threshold||1,d.gesture=d.gesture||"swipe",d.onPointerDown=function(n){p.pointerStart(n,c,d)&&(v.add(d.doc,"mousemove",d.onPointerMove).listener(n),v.add(d.doc,"mouseup",d.onPointerUp))},d.onPointerMove=function(n){for(var a=n.changedTouches||p.getCoords(n),s=a.length,l=0;l<s;l++){var g=a[l],u=g.identifier||1/0,m=d.tracker[u];m&&(m.move.x=g.pageX,m.move.y=g.pageY,m.moveTime=new Date().getTime())}},d.onPointerUp=function(n){if(p.pointerEnd(n,c,d)){v.remove(d.doc,"mousemove",d.onPointerMove),v.remove(d.doc,"mouseup",d.onPointerUp);var a,s,l,g,u={x:0,y:0},m=0,y=0,b=0;for(var x in d.tracker){var T=d.tracker[x],M=T.move.x-T.start.x,I=T.move.y-T.start.y;m+=T.move.x,y+=T.move.y,u.x+=T.start.x,u.y+=T.start.y,b++;var R=Math.sqrt(M*M+I*I),W=T.moveTime-T.startTime,g=Math.atan2(M,I)/i+180,s=W?R/W:0;if(typeof l>"u")l=g,a=s;else if(Math.abs(g-l)<=20)l=(l+g)/2,a=(a+s)/2;else return}var K=d.gestureFingers;d.minFingers<=K&&d.maxFingers>=K&&a>d.threshold&&(u.x/=b,u.y/=b,c.start=u,c.x=m/b,c.y=y/b,c.angle=-(((l/d.snap+.5>>0)*d.snap||360)-360),c.velocity=a,c.fingers=K,c.state="swipe",d.listener(n,c))}};var c=p.pointerSetup(d);return v.add(d.target,"mousedown",d.onPointerDown),c},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.swipe=p.swipe,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.longpress=function(i){return i.gesture="longpress",p.tap(i)},p.tap=function(i){i.delay=i.delay||500,i.timeout=i.timeout||250,i.driftDeviance=i.driftDeviance||10,i.gesture=i.gesture||"tap";var d,c;i.onPointerDown=function(a){if(p.pointerStart(a,n,i)){if(d=new Date().getTime(),v.add(i.doc,"mousemove",i.onPointerMove).listener(a),v.add(i.doc,"mouseup",i.onPointerUp),i.gesture!=="longpress")return;c=setTimeout(function(){if(!(a.cancelBubble&&++a.cancelBubbleCount>1)){var s=0;for(var l in i.tracker){var g=i.tracker[l];if(g.end===!0||i.cancel)return;s++}i.minFingers<=s&&i.maxFingers>=s&&(n.state="start",n.fingers=s,n.x=g.start.x,n.y=g.start.y,i.listener(a,n))}},i.delay)}},i.onPointerMove=function(a){for(var s=i.bbox,l=a.changedTouches||p.getCoords(a),g=l.length,u=0;u<g;u++){var m=l[u],y=m.identifier||1/0,b=i.tracker[y];if(b){var x=m.pageX-s.x1-parseInt(window.scrollX),T=m.pageY-s.y1-parseInt(window.scrollY),M=x-b.start.x,I=T-b.start.y,R=Math.sqrt(M*M+I*I);if(!(x>0&&x<s.width&&T>0&&T<s.height&&R<=i.driftDeviance)){v.remove(i.doc,"mousemove",i.onPointerMove),i.cancel=!0;return}}}},i.onPointerUp=function(a){if(p.pointerEnd(a,n,i)){if(clearTimeout(c),v.remove(i.doc,"mousemove",i.onPointerMove),v.remove(i.doc,"mouseup",i.onPointerUp),a.cancelBubble&&++a.cancelBubbleCount>1)return;if(i.gesture==="longpress"){n.state==="start"&&(n.state="end",i.listener(a,n));return}if(i.cancel||new Date().getTime()-d>i.timeout)return;var s=i.gestureFingers;i.minFingers<=s&&i.maxFingers>=s&&(n.state="tap",n.fingers=i.gestureFingers,i.listener(a,n))}};var n=p.pointerSetup(i);return v.add(i.target,"mousedown",i.onPointerDown),n},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.tap=p.tap,v.Gesture._gestureHandlers.longpress=p.longpress,p}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(p){return p.wheelPreventElasticBounce=function(i){i&&(typeof i=="string"&&(i=document.querySelector(i)),v.add(i,"wheel",function(d,c){c.preventElasticBounce(),v.stop(d)}))},p.wheel=function(i){var d,c=i.timeout||150,n=0,a={gesture:"wheel",state:"start",wheelDelta:0,target:i.target,listener:i.listener,preventElasticBounce:function(m){var y=this.target,b=y.scrollTop,x=b+y.offsetHeight,T=y.scrollHeight;(x===T&&this.wheelDelta<=0||b===0&&this.wheelDelta>=0)&&v.cancel(m),v.stop(m)},add:function(){i.target[l](u,s,!1)},remove:function(){i.target[g](u,s,!1)}},s=function(m){m=m||window.event,a.state=n++?"change":"start",a.wheelDelta=m.detail?m.detail*-20:m.wheelDelta,i.listener(m,a),clearTimeout(d),d=setTimeout(function(){n=0,a.state="end",a.wheelDelta=0,i.listener(m,a)},c)},l=document.addEventListener?"addEventListener":"attachEvent",g=document.removeEventListener?"removeEventListener":"detachEvent",u=v.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return i.target[l](u,s,!1),a},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.wheel=p.wheel,p}(v.proxy),typeof w>"u")var w={};typeof w.proxy>"u"&&(w.proxy={}),w.proxy=function(p){return p.orientation=function(i){var d={gesture:"orientationchange",previous:null,current:window.orientation,target:i.target,listener:i.listener,remove:function(){window.removeEventListener("orientationchange",c,!1)}},c=function(n){if(d.previous=d.current,d.current=window.orientation,d.previous!==null&&d.previous!=d.current){i.listener(n,d);return}};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",c,!1),d},w.Gesture=w.Gesture||{},w.Gesture._gestureHandlers=w.Gesture._gestureHandlers||{},w.Gesture._gestureHandlers.orientation=p.orientation,p}(w.proxy),function(){function p(s,l){if(this.__eventListeners[s]){var g=this.__eventListeners[s];l?g[g.indexOf(l)]=!1:e.util.array.fill(g,!1)}}function i(s,l){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in s)this.on(g,s[g]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(l);return this}function d(s,l){var g=(function(){l.apply(this,arguments),this.off(s,g)}).bind(this);this.on(s,g)}function c(s,l){if(arguments.length===1)for(var g in s)d.call(this,g,s[g]);else d.call(this,s,l);return this}function n(s,l){if(!this.__eventListeners)return this;if(arguments.length===0)for(s in this.__eventListeners)p.call(this,s);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in s)p.call(this,g,s[g]);else p.call(this,s,l);return this}function a(s,l){if(!this.__eventListeners)return this;var g=this.__eventListeners[s];if(!g)return this;for(var u=0,m=g.length;u<m;u++)g[u]&&g[u].call(this,l||{});return this.__eventListeners[s]=g.filter(function(y){return y!==!1}),this}e.Observable={fire:a,on:i,once:c,off:n}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var p=0,i=arguments.length;p<i;p++)this._onObjectAdded(arguments[p]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(p,i,d){var c=this._objects;return d?c[i]=p:c.splice(i,0,p),this._onObjectAdded&&this._onObjectAdded(p),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var p=this._objects,i,d=!1,c=0,n=arguments.length;c<n;c++)i=p.indexOf(arguments[c]),i!==-1&&(d=!0,p.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&d&&this.requestRenderAll(),this},forEachObject:function(p,i){for(var d=this.getObjects(),c=0,n=d.length;c<n;c++)p.call(i,d[c],c,d);return this},getObjects:function(p){return typeof p>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===p})},item:function(p){return this._objects[p]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(p,i){return this._objects.indexOf(p)>-1?!0:i?this._objects.some(function(d){return typeof d.contains=="function"&&d.contains(p,!0)}):!1},complexity:function(){return this._objects.reduce(function(p,i){return p+=i.complexity?i.complexity():0,p},0)}},e.CommonMethods={_setOptions:function(p){for(var i in p)this.set(i,p[i])},_initGradient:function(p,i){p&&p.colorStops&&!(p instanceof e.Gradient)&&this.set(i,new e.Gradient(p))},_initPattern:function(p,i,d){p&&p.source&&!(p instanceof e.Pattern)?this.set(i,new e.Pattern(p,d)):d&&d()},_setObject:function(p){for(var i in p)this._set(i,p[i])},set:function(p,i){return typeof p=="object"?this._setObject(p):this._set(p,i),this},_set:function(p,i){this[p]=i},toggle:function(p){var i=this.get(p);return typeof i=="boolean"&&this.set(p,!i),this},get:function(p){return this[p]}},function(p){var i=Math.sqrt,d=Math.atan2,c=Math.pow,n=Math.PI/180,a=Math.PI/2;e.util={cos:function(s){if(s===0)return 1;s<0&&(s=-s);var l=s/a;switch(l){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(s===0)return 0;var l=s/a,g=1;switch(s<0&&(g=-1),l){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(s)},removeFromArray:function(s,l){var g=s.indexOf(l);return g!==-1&&s.splice(g,1),s},getRandomInt:function(s,l){return Math.floor(Math.random()*(l-s+1))+s},degreesToRadians:function(s){return s*n},radiansToDegrees:function(s){return s/n},rotatePoint:function(s,l,g){var u=new e.Point(s.x-l.x,s.y-l.y),m=e.util.rotateVector(u,g);return new e.Point(m.x,m.y).addEquals(l)},rotateVector:function(s,l){var g=e.util.sin(l),u=e.util.cos(l),m=s.x*u-s.y*g,y=s.x*g+s.y*u;return{x:m,y}},createVector:function(s,l){return new e.Point(l.x-s.x,l.y-s.y)},calcAngleBetweenVectors:function(s,l){return Math.acos((s.x*l.x+s.y*l.y)/(Math.hypot(s.x,s.y)*Math.hypot(l.x,l.y)))},getHatVector:function(s){return new e.Point(s.x,s.y).multiply(1/Math.hypot(s.x,s.y))},getBisector:function(s,l,g){var u=e.util.createVector(s,l),m=e.util.createVector(s,g),y=e.util.calcAngleBetweenVectors(u,m),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(u,y),m),x=y*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(u,x)),angle:y}},projectStrokeOnPoints:function(s,l,g){var u=[],m=l.strokeWidth/2,y=l.strokeUniform?new e.Point(1/l.scaleX,1/l.scaleY):new e.Point(1,1),b=function(x){var T=m/Math.hypot(x.x,x.y);return new e.Point(x.x*T*y.x,x.y*T*y.y)};return s.length<=1||s.forEach(function(x,T){var M=new e.Point(x.x,x.y),I,R;T===0?(R=s[T+1],I=g?b(e.util.createVector(R,M)).addEquals(M):s[s.length-1]):T===s.length-1?(I=s[T-1],R=g?b(e.util.createVector(I,M)).addEquals(M):s[0]):(I=s[T-1],R=s[T+1]);var W=e.util.getBisector(M,I,R),K=W.vector,$=W.angle,ae,ce;if(l.strokeLineJoin==="miter"&&(ae=-m/Math.sin($/2),ce=new e.Point(K.x*ae*y.x,K.y*ae*y.y),Math.hypot(ce.x,ce.y)/m<=l.strokeMiterLimit)){u.push(M.add(ce)),u.push(M.subtract(ce));return}ae=-m*Math.SQRT2,ce=new e.Point(K.x*ae*y.x,K.y*ae*y.y),u.push(M.add(ce)),u.push(M.subtract(ce))}),u},transformPoint:function(s,l,g){return g?new e.Point(l[0]*s.x+l[2]*s.y,l[1]*s.x+l[3]*s.y):new e.Point(l[0]*s.x+l[2]*s.y+l[4],l[1]*s.x+l[3]*s.y+l[5])},makeBoundingBoxFromPoints:function(s,l){if(l)for(var g=0;g<s.length;g++)s[g]=e.util.transformPoint(s[g],l);var u=[s[0].x,s[1].x,s[2].x,s[3].x],m=e.util.array.min(u),y=e.util.array.max(u),b=y-m,x=[s[0].y,s[1].y,s[2].y,s[3].y],T=e.util.array.min(x),M=e.util.array.max(x),I=M-T;return{left:m,top:T,width:b,height:I}},invertTransform:function(s){var l=1/(s[0]*s[3]-s[1]*s[2]),g=[l*s[3],-l*s[1],-l*s[2],l*s[0]],u=e.util.transformPoint({x:s[4],y:s[5]},g,!0);return g[4]=-u.x,g[5]=-u.y,g},toFixed:function(s,l){return parseFloat(Number(s).toFixed(l))},parseUnit:function(s,l){var g=/\D{0,2}$/.exec(s),u=parseFloat(s);switch(l||(l=e.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return u*e.DPI/25.4;case"cm":return u*e.DPI/2.54;case"in":return u*e.DPI;case"pt":return u*e.DPI/72;case"pc":return u*e.DPI/72*12;case"em":return u*l;default:return u}},falseFunction:function(){return!1},getKlass:function(s,l){return s=e.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),e.util.resolveNamespace(l)[s]},getSvgAttributes:function(s){var l=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":l=l.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":l=l.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":l=l.concat(["offset","stop-color","stop-opacity"]);break}return l},resolveNamespace:function(s){if(!s)return e;var l=s.split("."),g=l.length,u,m=p||e.window;for(u=0;u<g;++u)m=m[l[u]];return m},loadImage:function(s,l,g,u){if(!s){l&&l.call(g,s);return}var m=e.util.createImage(),y=function(){l&&l.call(g,m,!1),m=m.onload=m.onerror=null};m.onload=y,m.onerror=function(){e.log("Error loading "+m.src),l&&l.call(g,null,!0),m=m.onload=m.onerror=null},s.indexOf("data")!==0&&u!==void 0&&u!==null&&(m.crossOrigin=u),s.substring(0,14)==="data:image/svg"&&(m.onload=null,e.util.loadImageInDom(m,y)),m.src=s},loadImageInDom:function(s,l){var g=e.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(s),e.document.querySelector("body").appendChild(g),s.onload=function(){l(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(s,l,g,u){s=s||[];var m=[],y=0,b=s.length;function x(){++y===b&&l&&l(m.filter(function(T){return T}))}if(!b){l&&l(m);return}s.forEach(function(T,M){if(!T||!T.type){x();return}var I=e.util.getKlass(T.type,g);I.fromObject(T,function(R,W){W||(m[M]=R),u&&u(T,R,W),x()})})},enlivenObjectEnlivables:function(s,l,g){var u=e.Object.ENLIVEN_PROPS.filter(function(m){return!!s[m]});e.util.enlivenObjects(u.map(function(m){return s[m]}),function(m){var y={};u.forEach(function(b,x){y[b]=m[x],l&&(l[b]=m[x])}),g&&g(y)})},enlivenPatterns:function(s,l){s=s||[];function g(){++m===y&&l&&l(u)}var u=[],m=0,y=s.length;if(!y){l&&l(u);return}s.forEach(function(b,x){b&&b.source?new e.Pattern(b,function(T){u[x]=T,g()}):(u[x]=b,g())})},groupSVGElements:function(s,l,g){var u;return s&&s.length===1?s[0]:(l&&(l.width&&l.height?l.centerPoint={x:l.width/2,y:l.height/2}:(delete l.width,delete l.height)),u=new e.Group(s,l),typeof g<"u"&&(u.sourcePath=g),u)},populateWithProperties:function(s,l,g){if(g&&Array.isArray(g))for(var u=0,m=g.length;u<m;u++)g[u]in s&&(l[g[u]]=s[g[u]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(s){var l=e.util.createCanvasElement();return l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0),l},toDataURL:function(s,l,g){return s.toDataURL("image/"+l,g)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(s,l,g){return[s[0]*l[0]+s[2]*l[1],s[1]*l[0]+s[3]*l[1],s[0]*l[2]+s[2]*l[3],s[1]*l[2]+s[3]*l[3],g?0:s[0]*l[4]+s[2]*l[5]+s[4],g?0:s[1]*l[4]+s[3]*l[5]+s[5]]},qrDecompose:function(s){var l=d(s[1],s[0]),g=c(s[0],2)+c(s[1],2),u=i(g),m=(s[0]*s[3]-s[2]*s[1])/u,y=d(s[0]*s[2]+s[1]*s[3],g);return{angle:l/n,scaleX:u,scaleY:m,skewX:y/n,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return e.iMatrix.concat();var l=e.util.degreesToRadians(s.angle),g=e.util.cos(l),u=e.util.sin(l);return[g,u,-u,g,0,0]},calcDimensionsMatrix:function(s){var l=typeof s.scaleX>"u"?1:s.scaleX,g=typeof s.scaleY>"u"?1:s.scaleY,u=[s.flipX?-l:l,0,0,s.flipY?-g:g,0,0],m=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return s.skewX&&(u=m(u,[1,0,Math.tan(y(s.skewX)),1],!0)),s.skewY&&(u=m(u,[1,Math.tan(y(s.skewY)),0,1],!0)),u},composeMatrix:function(s){var l=[1,0,0,1,s.translateX||0,s.translateY||0],g=e.util.multiplyTransformMatrices;return s.angle&&(l=g(l,e.util.calcRotateMatrix(s))),(s.scaleX!==1||s.scaleY!==1||s.skewX||s.skewY||s.flipX||s.flipY)&&(l=g(l,e.util.calcDimensionsMatrix(s))),l},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,l,g,u){u>0&&(l>u?l-=u:l=0,g>u?g-=u:g=0);var m=!0,y,b,x=s.getImageData(l,g,u*2||1,u*2||1),T=x.data.length;for(y=3;y<T&&(b=x.data[y],m=b<=0,m!==!1);y+=4);return x=null,m},parsePreserveAspectRatioAttribute:function(s){var l="meet",g="Mid",u="Mid",m=s.split(" "),y;return m&&m.length&&(l=m.pop(),l!=="meet"&&l!=="slice"?(y=l,l="meet"):m.length&&(y=m.pop())),g=y!=="none"?y.slice(1,4):"none",u=y!=="none"?y.slice(5,8):"none",{meetOrSlice:l,alignX:g,alignY:u}},clearFabricFontCache:function(s){s=(s||"").toLowerCase(),s?e.charWidthsCache[s]&&delete e.charWidthsCache[s]:e.charWidthsCache={}},limitDimsByArea:function(s,l){var g=Math.sqrt(l*s),u=Math.floor(l/g);return{x:Math.floor(g),y:u}},capValue:function(s,l,g){return Math.max(s,Math.min(l,g))},findScaleToFit:function(s,l){return Math.min(l.width/s.width,l.height/s.height)},findScaleToCover:function(s,l){return Math.max(l.width/s.width,l.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(l){return e.util.toFixed(l,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,l){var g=e.util.invertTransform(l),u=e.util.multiplyTransformMatrices(g,s.calcOwnMatrix());e.util.applyTransformToObject(s,u)},addTransformToObject:function(s,l){e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(l,s.calcOwnMatrix()))},applyTransformToObject:function(s,l){var g=e.util.qrDecompose(l),u=new e.Point(g.translateX,g.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",g.scaleX),s.set("scaleY",g.scaleY),s.skewX=g.skewX,s.skewY=g.skewY,s.angle=g.angle,s.setPositionByOrigin(u,"center","center")},sizeAfterTransform:function(s,l,g){var u=s/2,m=l/2,y=[{x:-u,y:-m},{x:u,y:-m},{x:-u,y:m},{x:u,y:m}],b=e.util.calcDimensionsMatrix(g),x=e.util.makeBoundingBoxFromPoints(y,b);return{x:x.width,y:x.height}},mergeClipPaths:function(s,l){var g=s,u=l;g.inverted&&!u.inverted&&(g=l,u=s),e.util.applyTransformToObject(u,e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),u.calcTransformMatrix()));var m=g.inverted&&u.inverted;return m&&(g.inverted=u.inverted=!1),new e.Group([g],{clipPath:u,inverted:m})}}}(t),function(){var p=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},d={m:"l",M:"L"};function c(P,B,F,L,G,O,k,V,z,Z,J){var U=e.util.cos(P),he=e.util.sin(P),ie=e.util.cos(B),ee=e.util.sin(B),Q=F*G*ie-L*O*ee+k,se=L*G*ie+F*O*ee+V,de=Z+z*(-F*G*he-L*O*U),ue=J+z*(-L*G*he+F*O*U),pe=Q+z*(F*G*ee+L*O*ie),be=se+z*(L*G*ee-F*O*ie);return["C",de,ue,pe,be,Q,se]}function n(P,B,F,L,G,O,k){var V=Math.PI,z=k*V/180,Z=e.util.sin(z),J=e.util.cos(z),U=0,he=0;F=Math.abs(F),L=Math.abs(L);var ie=-J*P*.5-Z*B*.5,ee=-J*B*.5+Z*P*.5,Q=F*F,se=L*L,de=ee*ee,ue=ie*ie,pe=Q*se-Q*de-se*ue,be=0;if(pe<0){var Ie=Math.sqrt(1-pe/(Q*se));F*=Ie,L*=Ie}else be=(G===O?-1:1)*Math.sqrt(pe/(Q*de+se*ue));var Pe=be*F*ee/L,oe=-be*L*ie/F,Oe=J*Pe-Z*oe+P*.5,Fe=Z*Pe+J*oe+B*.5,Ne=a(1,0,(ie-Pe)/F,(ee-oe)/L),Xe=a((ie-Pe)/F,(ee-oe)/L,(-ie-Pe)/F,(-ee-oe)/L);O===0&&Xe>0?Xe-=2*V:O===1&&Xe<0&&(Xe+=2*V);for(var et=Math.ceil(Math.abs(Xe/V*2)),Dt=[],_t=Xe/et,yr=8/3*Math.sin(_t/4)*Math.sin(_t/4)/Math.sin(_t/2),Hr=Ne+_t,qt=0;qt<et;qt++)Dt[qt]=c(Ne,Hr,J,Z,F,L,Oe,Fe,yr,U,he),U=Dt[qt][5],he=Dt[qt][6],Ne=Hr,Hr+=_t;return Dt}function a(P,B,F,L){var G=Math.atan2(B,P),O=Math.atan2(L,F);return O>=G?O-G:2*Math.PI-(G-O)}function s(P,B,F,L,G,O,k,V){var z;if(e.cachesBoundsOfCurve&&(z=p.call(arguments),e.boundsOfCurveCache[z]))return e.boundsOfCurveCache[z];var Z=Math.sqrt,J=Math.min,U=Math.max,he=Math.abs,ie=[],ee=[[],[]],Q,se,de,ue,pe,be,Ie,Pe;se=6*P-12*F+6*G,Q=-3*P+9*F-9*G+3*k,de=3*F-3*P;for(var oe=0;oe<2;++oe){if(oe>0&&(se=6*B-12*L+6*O,Q=-3*B+9*L-9*O+3*V,de=3*L-3*B),he(Q)<1e-12){if(he(se)<1e-12)continue;ue=-de/se,0<ue&&ue<1&&ie.push(ue);continue}Ie=se*se-4*de*Q,!(Ie<0)&&(Pe=Z(Ie),pe=(-se+Pe)/(2*Q),0<pe&&pe<1&&ie.push(pe),be=(-se-Pe)/(2*Q),0<be&&be<1&&ie.push(be))}for(var Oe,Fe,Ne=ie.length,Xe=Ne,et;Ne--;)ue=ie[Ne],et=1-ue,Oe=et*et*et*P+3*et*et*ue*F+3*et*ue*ue*G+ue*ue*ue*k,ee[0][Ne]=Oe,Fe=et*et*et*B+3*et*et*ue*L+3*et*ue*ue*O+ue*ue*ue*V,ee[1][Ne]=Fe;ee[0][Xe]=P,ee[1][Xe]=B,ee[0][Xe+1]=k,ee[1][Xe+1]=V;var Dt=[{x:J.apply(null,ee[0]),y:J.apply(null,ee[1])},{x:U.apply(null,ee[0]),y:U.apply(null,ee[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[z]=Dt),Dt}function l(P,B,F){for(var L=F[1],G=F[2],O=F[3],k=F[4],V=F[5],z=F[6],Z=F[7],J=n(z-P,Z-B,L,G,k,V,O),U=0,he=J.length;U<he;U++)J[U][1]+=P,J[U][2]+=B,J[U][3]+=P,J[U][4]+=B,J[U][5]+=P,J[U][6]+=B;return J}function g(P){var B=0,F=0,L=P.length,G=0,O=0,k,V,z,Z=[],J,U,he;for(V=0;V<L;++V){switch(z=!1,k=P[V].slice(0),k[0]){case"l":k[0]="L",k[1]+=B,k[2]+=F;case"L":B=k[1],F=k[2];break;case"h":k[1]+=B;case"H":k[0]="L",k[2]=F,B=k[1];break;case"v":k[1]+=F;case"V":k[0]="L",F=k[1],k[1]=B,k[2]=F;break;case"m":k[0]="M",k[1]+=B,k[2]+=F;case"M":B=k[1],F=k[2],G=k[1],O=k[2];break;case"c":k[0]="C",k[1]+=B,k[2]+=F,k[3]+=B,k[4]+=F,k[5]+=B,k[6]+=F;case"C":U=k[3],he=k[4],B=k[5],F=k[6];break;case"s":k[0]="S",k[1]+=B,k[2]+=F,k[3]+=B,k[4]+=F;case"S":J==="C"?(U=2*B-U,he=2*F-he):(U=B,he=F),B=k[3],F=k[4],k[0]="C",k[5]=k[3],k[6]=k[4],k[3]=k[1],k[4]=k[2],k[1]=U,k[2]=he,U=k[3],he=k[4];break;case"q":k[0]="Q",k[1]+=B,k[2]+=F,k[3]+=B,k[4]+=F;case"Q":U=k[1],he=k[2],B=k[3],F=k[4];break;case"t":k[0]="T",k[1]+=B,k[2]+=F;case"T":J==="Q"?(U=2*B-U,he=2*F-he):(U=B,he=F),k[0]="Q",B=k[1],F=k[2],k[1]=U,k[2]=he,k[3]=B,k[4]=F;break;case"a":k[0]="A",k[6]+=B,k[7]+=F;case"A":z=!0,Z=Z.concat(l(B,F,k)),B=k[6],F=k[7];break;case"z":case"Z":B=G,F=O;break}z||Z.push(k),J=k[0]}return Z}function u(P,B,F,L){return Math.sqrt((F-P)*(F-P)+(L-B)*(L-B))}function m(P){return P*P*P}function y(P){return 3*P*P*(1-P)}function b(P){return 3*P*(1-P)*(1-P)}function x(P){return(1-P)*(1-P)*(1-P)}function T(P,B,F,L,G,O,k,V){return function(z){var Z=m(z),J=y(z),U=b(z),he=x(z);return{x:k*Z+G*J+F*U+P*he,y:V*Z+O*J+L*U+B*he}}}function M(P,B,F,L,G,O,k,V){return function(z){var Z=1-z,J=3*Z*Z*(F-P)+6*Z*z*(G-F)+3*z*z*(k-G),U=3*Z*Z*(L-B)+6*Z*z*(O-L)+3*z*z*(V-O);return Math.atan2(U,J)}}function I(P){return P*P}function R(P){return 2*P*(1-P)}function W(P){return(1-P)*(1-P)}function K(P,B,F,L,G,O){return function(k){var V=I(k),z=R(k),Z=W(k);return{x:G*V+F*z+P*Z,y:O*V+L*z+B*Z}}}function $(P,B,F,L,G,O){return function(k){var V=1-k,z=2*V*(F-P)+2*k*(G-F),Z=2*V*(L-B)+2*k*(O-L);return Math.atan2(Z,z)}}function ae(P,B,F){var L={x:B,y:F},G,O=0,k;for(k=1;k<=100;k+=1)G=P(k/100),O+=u(L.x,L.y,G.x,G.y),L=G;return O}function ce(P,B){for(var F=0,L=0,G=P.iterator,O={x:P.x,y:P.y},k,V,z=.01,Z=P.angleFinder,J;L<B&&z>1e-4;)k=G(F),J=F,V=u(O.x,O.y,k.x,k.y),V+L>B?(F-=z,z/=2):(O=k,F+=z,L+=V);return k.angle=Z(J),k}function fe(P){for(var B=0,F=P.length,L,G=0,O=0,k=0,V=0,z=[],Z,J,U,he=0;he<F;he++){switch(L=P[he],J={x:G,y:O,command:L[0]},L[0]){case"M":J.length=0,k=G=L[1],V=O=L[2];break;case"L":J.length=u(G,O,L[1],L[2]),G=L[1],O=L[2];break;case"C":Z=T(G,O,L[1],L[2],L[3],L[4],L[5],L[6]),U=M(G,O,L[1],L[2],L[3],L[4],L[5],L[6]),J.iterator=Z,J.angleFinder=U,J.length=ae(Z,G,O),G=L[5],O=L[6];break;case"Q":Z=K(G,O,L[1],L[2],L[3],L[4]),U=$(G,O,L[1],L[2],L[3],L[4]),J.iterator=Z,J.angleFinder=U,J.length=ae(Z,G,O),G=L[3],O=L[4];break;case"Z":case"z":J.destX=k,J.destY=V,J.length=u(G,O,k,V),G=k,O=V;break}B+=J.length,z.push(J)}return z.push({length:B,x:G,y:O}),z}function le(P,B,F){F||(F=fe(P));for(var L=0;B-F[L].length>0&&L<F.length-2;)B-=F[L].length,L++;var G=F[L],O=B/G.length,k=G.command,V=P[L],z;switch(k){case"M":return{x:G.x,y:G.y,angle:0};case"Z":case"z":return z=new e.Point(G.x,G.y).lerp(new e.Point(G.destX,G.destY),O),z.angle=Math.atan2(G.destY-G.y,G.destX-G.x),z;case"L":return z=new e.Point(G.x,G.y).lerp(new e.Point(V[1],V[2]),O),z.angle=Math.atan2(V[2]-G.y,V[1]-G.x),z;case"C":return ce(G,B);case"Q":return ce(G,B)}}function ye(P){var B=[],F=[],L,G,O=e.rePathCommand,k="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",V="("+k+")"+e.commaWsp,z="([01])"+e.commaWsp+"?",Z=V+"?"+V+"?"+V+z+z+V+"?("+k+")",J=new RegExp(Z,"g"),U,he,ie;if(!P||!P.match)return B;ie=P.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ee=0,Q,se=ie.length;ee<se;ee++){L=ie[ee],he=L.slice(1).trim(),F.length=0;var de=L.charAt(0);if(Q=[de],de.toLowerCase()==="a")for(var ue;ue=J.exec(he);)for(var pe=1;pe<ue.length;pe++)F.push(ue[pe]);else for(;U=O.exec(he);)F.push(U[0]);for(var pe=0,be=F.length;pe<be;pe++)G=parseFloat(F[pe]),isNaN(G)||Q.push(G);var Ie=i[de.toLowerCase()],Pe=d[de]||de;if(Q.length-1>Ie)for(var oe=1,Oe=Q.length;oe<Oe;oe+=Ie)B.push([de].concat(Q.slice(oe,oe+Ie))),de=Pe;else B.push(Q)}return B}function Ee(P,B){var F=[],L,G=new e.Point(P[0].x,P[0].y),O=new e.Point(P[1].x,P[1].y),k=P.length,V=1,z=0,Z=k>2;for(B=B||0,Z&&(V=P[2].x<O.x?-1:P[2].x===O.x?0:1,z=P[2].y<O.y?-1:P[2].y===O.y?0:1),F.push(["M",G.x-V*B,G.y-z*B]),L=1;L<k;L++){if(!G.eq(O)){var J=G.midPointFrom(O);F.push(["Q",G.x,G.y,J.x,J.y])}G=P[L],L+1<P.length&&(O=P[L+1])}return Z&&(V=G.x>P[L-2].x?1:G.x===P[L-2].x?0:-1,z=G.y>P[L-2].y?1:G.y===P[L-2].y?0:-1),F.push(["L",G.x+V*B,G.y+z*B]),F}function ne(P,B,F){return F&&(B=e.util.multiplyTransformMatrices(B,[1,0,0,1,-F.x,-F.y])),P.map(function(L){for(var G=L.slice(0),O={},k=1;k<L.length-1;k+=2)O.x=L[k],O.y=L[k+1],O=e.util.transformPoint(O,B),G[k]=O.x,G[k+1]=O.y;return G})}e.util.joinPath=function(P){return P.map(function(B){return B.join(" ")}).join(" ")},e.util.parsePath=ye,e.util.makePathSimpler=g,e.util.getSmoothPathFromPoints=Ee,e.util.getPathSegmentsInfo=fe,e.util.getBoundsOfCurve=s,e.util.getPointOnPath=le,e.util.transformPath=ne}(),function(){var p=Array.prototype.slice;function i(s,l){for(var g=p.call(arguments,2),u=[],m=0,y=s.length;m<y;m++)u[m]=g.length?s[m][l].apply(s[m],g):s[m][l].call(s[m]);return u}function d(s,l){return a(s,l,function(g,u){return g>=u})}function c(s,l){return a(s,l,function(g,u){return g<u})}function n(s,l){for(var g=s.length;g--;)s[g]=l;return s}function a(s,l,g){if(!(!s||s.length===0)){var u=s.length-1,m=l?s[u][l]:s[u];if(l)for(;u--;)g(s[u][l],m)&&(m=s[u][l]);else for(;u--;)g(s[u],m)&&(m=s[u]);return m}}e.util.array={fill:n,invoke:i,min:c,max:d}}(),function(){function p(d,c,n){if(n)if(!e.isLikelyNode&&c instanceof Element)d=c;else if(c instanceof Array){d=[];for(var a=0,s=c.length;a<s;a++)d[a]=p({},c[a],n)}else if(c&&typeof c=="object")for(var l in c)l==="canvas"||l==="group"?d[l]=null:c.hasOwnProperty(l)&&(d[l]=p({},c[l],n));else d=c;else for(var l in c)d[l]=c[l];return d}function i(d,c){return p({},d,c)}e.util.object={extend:p,clone:i},e.util.object.extend(e.util,e.Observable)}(),function(){function p(a){return a.replace(/-+(.)?/g,function(s,l){return l?l.toUpperCase():""})}function i(a,s){return a.charAt(0).toUpperCase()+(s?a.slice(1):a.slice(1).toLowerCase())}function d(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(a){var s=0,l,g=[];for(s=0,l;s<a.length;s++)(l=n(a,s))!==!1&&g.push(l);return g}function n(a,s){var l=a.charCodeAt(s);if(isNaN(l))return"";if(l<55296||l>57343)return a.charAt(s);if(55296<=l&&l<=56319){if(a.length<=s+1)throw"High surrogate without following low surrogate";var g=a.charCodeAt(s+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return a.charAt(s)+a.charAt(s+1)}if(s===0)throw"Low surrogate without preceding high surrogate";var u=a.charCodeAt(s-1);if(55296>u||u>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:p,capitalize:i,escapeXml:d,graphemeSplit:c}}(),function(){var p=Array.prototype.slice,i=function(){},d=function(){for(var l in{toString:1})if(l==="toString")return!1;return!0}(),c=function(l,g,u){for(var m in g)m in l.prototype&&typeof l.prototype[m]=="function"&&(g[m]+"").indexOf("callSuper")>-1?l.prototype[m]=function(y){return function(){var b=this.constructor.superclass;this.constructor.superclass=u;var x=g[y].apply(this,arguments);if(this.constructor.superclass=b,y!=="initialize")return x}}(m):l.prototype[m]=g[m],d&&(g.toString!==Object.prototype.toString&&(l.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(l.prototype.valueOf=g.valueOf))};function n(){}function a(l){for(var g=null,u=this;u.constructor.superclass;){var m=u.constructor.superclass.prototype[l];if(u[l]!==m){g=m;break}u=u.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,p.call(arguments,1)):g.call(this):console.log("tried to callSuper "+l+", method not found in prototype chain",this)}function s(){var l=null,g=p.call(arguments,0);typeof g[0]=="function"&&(l=g.shift());function u(){this.initialize.apply(this,arguments)}u.superclass=l,u.subclasses=[],l&&(n.prototype=l.prototype,u.prototype=new n,l.subclasses.push(u));for(var m=0,y=g.length;m<y;m++)c(u,g[m],l);return u.prototype.initialize||(u.prototype.initialize=i),u.prototype.constructor=u,u.prototype.callSuper=a,u}e.util.createClass=s}(),function(){var p=!!e.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];e.util.addListener=function(c,n,a,s){c&&c.addEventListener(n,a,p?!1:s)},e.util.removeListener=function(c,n,a,s){c&&c.removeEventListener(n,a,p?!1:s)};function d(c){var n=c.changedTouches;return n&&n[0]?n[0]:c}e.util.getPointer=function(c){var n=c.target,a=e.util.getScrollLeftTop(n),s=d(c);return{x:s.clientX+a.left,y:s.clientY+a.top}},e.util.isTouchEvent=function(c){return i.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function p(s,l){var g=s.style;if(!g)return s;if(typeof l=="string")return s.style.cssText+=";"+l,l.indexOf("opacity")>-1?a(s,l.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var u in l)if(u==="opacity")a(s,l[u]);else{var m=u==="float"||u==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":u;g[m]=l[u]}return s}var i=e.document.createElement("div"),d=typeof i.style.opacity=="string",c=typeof i.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(s){return s};d?a=function(s,l){return s.style.opacity=l,s}:c&&(a=function(s,l){var g=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(g.zoom=1),n.test(g.filter)?(l=l>=.9999?"":"alpha(opacity="+l*100+")",g.filter=g.filter.replace(n,l)):g.filter+=" alpha(opacity="+l*100+")",s}),e.util.setStyle=p}(),function(){var p=Array.prototype.slice;function i(x){return typeof x=="string"?e.document.getElementById(x):x}var d,c=function(x){return p.call(x,0)};try{d=c(e.document.childNodes)instanceof Array}catch{}d||(c=function(x){for(var T=new Array(x.length),M=x.length;M--;)T[M]=x[M];return T});function n(x,T){var M=e.document.createElement(x);for(var I in T)I==="class"?M.className=T[I]:I==="for"?M.htmlFor=T[I]:M.setAttribute(I,T[I]);return M}function a(x,T){x&&(" "+x.className+" ").indexOf(" "+T+" ")===-1&&(x.className+=(x.className?" ":"")+T)}function s(x,T,M){return typeof T=="string"&&(T=n(T,M)),x.parentNode&&x.parentNode.replaceChild(T,x),T.appendChild(x),T}function l(x){for(var T=0,M=0,I=e.document.documentElement,R=e.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===e.document?(T=R.scrollLeft||I.scrollLeft||0,M=R.scrollTop||I.scrollTop||0):(T+=x.scrollLeft||0,M+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:T,top:M}}function g(x){var T,M=x&&x.ownerDocument,I={left:0,top:0},R={left:0,top:0},W,K={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return R;for(var $ in K)R[K[$]]+=parseInt(u(x,$),10)||0;return T=M.documentElement,typeof x.getBoundingClientRect<"u"&&(I=x.getBoundingClientRect()),W=l(x),{left:I.left+W.left-(T.clientLeft||0)+R.left,top:I.top+W.top-(T.clientTop||0)+R.top}}var u;e.document.defaultView&&e.document.defaultView.getComputedStyle?u=function(x,T){var M=e.document.defaultView.getComputedStyle(x,null);return M?M[T]:void 0}:u=function(x,T){var M=x.style[T];return!M&&x.currentStyle&&(M=x.currentStyle[T]),M},function(){var x=e.document.documentElement.style,T="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function M(R){return typeof R.onselectstart<"u"&&(R.onselectstart=e.util.falseFunction),T?R.style[T]="none":typeof R.unselectable=="string"&&(R.unselectable="on"),R}function I(R){return typeof R.onselectstart<"u"&&(R.onselectstart=null),T?R.style[T]="":typeof R.unselectable=="string"&&(R.unselectable=""),R}e.util.makeElementUnselectable=M,e.util.makeElementSelectable=I}();function m(x){var T=e.jsdomImplForWrapper(x);return T._canvas||T._image}function y(x){if(e.isLikelyNode){var T=e.jsdomImplForWrapper(x);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function b(x,T){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=T}e.util.setImageSmoothing=b,e.util.getById=i,e.util.toArray=c,e.util.addClass=a,e.util.makeElement=n,e.util.wrapElement=s,e.util.getScrollLeftTop=l,e.util.getElementOffset=g,e.util.getNodeCanvas=m,e.util.cleanUpJsdomNode=y}(),function(){function p(c,n){return c+(/\?/.test(c)?"&":"?")+n}function i(){}function d(c,n){n||(n={});var a=n.method?n.method.toUpperCase():"GET",s=n.onComplete||function(){},l=new e.window.XMLHttpRequest,g=n.body||n.parameters;return l.onreadystatechange=function(){l.readyState===4&&(s(l),l.onreadystatechange=i)},a==="GET"&&(g=null,typeof n.parameters=="string"&&(c=p(c,n.parameters))),l.open(a,c,!0),(a==="POST"||a==="PUT")&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(g),l}e.util.request=d}(),e.log=console.log,e.warn=console.warn,function(){var p=e.util.object.extend,i=e.util.object.clone,d=[];e.util.object.extend(d,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(y){y.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var y=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===m});return y.forEach(function(b){b.cancel()}),y},cancelByTarget:function(m){var y=this.findAnimationsByTarget(m);return y.forEach(function(b){b.cancel()}),y},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(y){return y.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(y){return y.target===m}):[]}});function c(){return!1}function n(m,y,b,x){return-b*Math.cos(m/x*(Math.PI/2))+b+y}function a(m){m||(m={});var y=!1,b,x=function(){var T=e.runningAnimations.indexOf(b);return T>-1&&e.runningAnimations.splice(T,1)[0]};return b=p(i(m),{cancel:function(){return y=!0,x()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),g(function(T){var M=T||+new Date,I=m.duration||500,R=M+I,W,K=m.onChange||c,$=m.abort||c,ae=m.onComplete||c,ce=m.easing||n,fe="startValue"in m?m.startValue.length>0:!1,le="startValue"in m?m.startValue:0,ye="endValue"in m?m.endValue:100,Ee=m.byValue||(fe?le.map(function(ne,P){return ye[P]-le[P]}):ye-le);m.onStart&&m.onStart(),function ne(P){W=P||+new Date;var B=W>R?I:W-M,F=B/I,L=fe?le.map(function(O,k){return ce(B,le[k],Ee[k],I)}):ce(B,le,Ee,I),G=Math.abs(fe?(L[0]-le[0])/Ee[0]:(L-le)/Ee);if(b.currentValue=fe?L.slice():L,b.completionRate=G,b.durationRate=F,!y){if($(L,G,F)){x();return}if(W>R){b.currentValue=fe?ye.slice():ye,b.completionRate=1,b.durationRate=1,K(fe?ye.slice():ye,1,1),ae(ye,1,1),x();return}else K(L,G,F),g(ne)}}(M)}),b.cancel}var s=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(m){return e.window.setTimeout(m,1e3/60)},l=e.window.cancelAnimationFrame||e.window.clearTimeout;function g(){return s.apply(e.window,arguments)}function u(){return l.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=g,e.util.cancelAnimFrame=u,e.runningAnimations=d}(),function(){function p(d,c,n){var a="rgba("+parseInt(d[0]+n*(c[0]-d[0]),10)+","+parseInt(d[1]+n*(c[1]-d[1]),10)+","+parseInt(d[2]+n*(c[2]-d[2]),10);return a+=","+(d&&c?parseFloat(d[3]+n*(c[3]-d[3])):1),a+=")",a}function i(d,c,n,a){var s=new e.Color(d).getSource(),l=new e.Color(c).getSource(),g=a.onComplete,u=a.onChange;return a=a||{},e.util.animate(e.util.object.extend(a,{duration:n||500,startValue:s,endValue:l,byValue:l,easing:function(m,y,b,x){var T=a.colorEasing?a.colorEasing(m,x):1-Math.cos(m/x*(Math.PI/2));return p(y,b,T)},onComplete:function(m,y,b){if(g)return g(p(l,l,0),y,b)},onChange:function(m,y,b){if(u){if(Array.isArray(m))return u(p(m,m,0),y,b);u(m,y,b)}}}))}e.util.animateColor=i}(),function(){function p(P,B,F,L){return P<Math.abs(B)?(P=B,L=F/4):B===0&&P===0?L=F/(2*Math.PI)*Math.asin(1):L=F/(2*Math.PI)*Math.asin(B/P),{a:P,c:B,p:F,s:L}}function i(P,B,F){return P.a*Math.pow(2,10*(B-=1))*Math.sin((B*F-P.s)*(2*Math.PI)/P.p)}function d(P,B,F,L){return F*((P=P/L-1)*P*P+1)+B}function c(P,B,F,L){return P/=L/2,P<1?F/2*P*P*P+B:F/2*((P-=2)*P*P+2)+B}function n(P,B,F,L){return F*(P/=L)*P*P*P+B}function a(P,B,F,L){return-F*((P=P/L-1)*P*P*P-1)+B}function s(P,B,F,L){return P/=L/2,P<1?F/2*P*P*P*P+B:-F/2*((P-=2)*P*P*P-2)+B}function l(P,B,F,L){return F*(P/=L)*P*P*P*P+B}function g(P,B,F,L){return F*((P=P/L-1)*P*P*P*P+1)+B}function u(P,B,F,L){return P/=L/2,P<1?F/2*P*P*P*P*P+B:F/2*((P-=2)*P*P*P*P+2)+B}function m(P,B,F,L){return-F*Math.cos(P/L*(Math.PI/2))+F+B}function y(P,B,F,L){return F*Math.sin(P/L*(Math.PI/2))+B}function b(P,B,F,L){return-F/2*(Math.cos(Math.PI*P/L)-1)+B}function x(P,B,F,L){return P===0?B:F*Math.pow(2,10*(P/L-1))+B}function T(P,B,F,L){return P===L?B+F:F*(-Math.pow(2,-10*P/L)+1)+B}function M(P,B,F,L){return P===0?B:P===L?B+F:(P/=L/2,P<1?F/2*Math.pow(2,10*(P-1))+B:F/2*(-Math.pow(2,-10*--P)+2)+B)}function I(P,B,F,L){return-F*(Math.sqrt(1-(P/=L)*P)-1)+B}function R(P,B,F,L){return F*Math.sqrt(1-(P=P/L-1)*P)+B}function W(P,B,F,L){return P/=L/2,P<1?-F/2*(Math.sqrt(1-P*P)-1)+B:F/2*(Math.sqrt(1-(P-=2)*P)+1)+B}function K(P,B,F,L){var G=1.70158,O=0,k=F;if(P===0)return B;if(P/=L,P===1)return B+F;O||(O=L*.3);var V=p(k,F,O,G);return-i(V,P,L)+B}function $(P,B,F,L){var G=1.70158,O=0,k=F;if(P===0)return B;if(P/=L,P===1)return B+F;O||(O=L*.3);var V=p(k,F,O,G);return V.a*Math.pow(2,-10*P)*Math.sin((P*L-V.s)*(2*Math.PI)/V.p)+V.c+B}function ae(P,B,F,L){var G=1.70158,O=0,k=F;if(P===0)return B;if(P/=L/2,P===2)return B+F;O||(O=L*(.3*1.5));var V=p(k,F,O,G);return P<1?-.5*i(V,P,L)+B:V.a*Math.pow(2,-10*(P-=1))*Math.sin((P*L-V.s)*(2*Math.PI)/V.p)*.5+V.c+B}function ce(P,B,F,L,G){return G===void 0&&(G=1.70158),F*(P/=L)*P*((G+1)*P-G)+B}function fe(P,B,F,L,G){return G===void 0&&(G=1.70158),F*((P=P/L-1)*P*((G+1)*P+G)+1)+B}function le(P,B,F,L,G){return G===void 0&&(G=1.70158),P/=L/2,P<1?F/2*(P*P*(((G*=1.525)+1)*P-G))+B:F/2*((P-=2)*P*(((G*=1.525)+1)*P+G)+2)+B}function ye(P,B,F,L){return F-Ee(L-P,0,F,L)+B}function Ee(P,B,F,L){return(P/=L)<1/2.75?F*(7.5625*P*P)+B:P<2/2.75?F*(7.5625*(P-=1.5/2.75)*P+.75)+B:P<2.5/2.75?F*(7.5625*(P-=2.25/2.75)*P+.9375)+B:F*(7.5625*(P-=2.625/2.75)*P+.984375)+B}function ne(P,B,F,L){return P<L/2?ye(P*2,0,F,L)*.5+B:Ee(P*2-L,0,F,L)*.5+F*.5+B}e.util.ease={easeInQuad:function(P,B,F,L){return F*(P/=L)*P+B},easeOutQuad:function(P,B,F,L){return-F*(P/=L)*(P-2)+B},easeInOutQuad:function(P,B,F,L){return P/=L/2,P<1?F/2*P*P+B:-F/2*(--P*(P-2)-1)+B},easeInCubic:function(P,B,F,L){return F*(P/=L)*P*P+B},easeOutCubic:d,easeInOutCubic:c,easeInQuart:n,easeOutQuart:a,easeInOutQuart:s,easeInQuint:l,easeOutQuint:g,easeInOutQuint:u,easeInSine:m,easeOutSine:y,easeInOutSine:b,easeInExpo:x,easeOutExpo:T,easeInOutExpo:M,easeInCirc:I,easeOutCirc:R,easeInOutCirc:W,easeInElastic:K,easeOutElastic:$,easeInOutElastic:ae,easeInBack:ce,easeOutBack:fe,easeInOutBack:le,easeInBounce:ye,easeOutBounce:Ee,easeInOutBounce:ne}}(),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.util.object.clone,n=i.util.toFixed,a=i.util.parseUnit,s=i.util.multiplyTransformMatrices,l=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],u=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",T="clip-path";i.svgValidTagNamesRegEx=R(l),i.svgViewBoxElementsRegEx=R(g),i.svgInvalidAncestorsRegEx=R(u),i.svgValidParentsRegEx=R(m),i.cssRules={},i.gradientDefs={},i.clipPaths={};function M(O){return O in y?y[O]:O}function I(O,k,V,z){var Z=Array.isArray(k),J;if((O==="fill"||O==="stroke")&&k==="none")k="";else{if(O==="strokeUniform")return k==="non-scaling-stroke";if(O==="strokeDashArray")k==="none"?k=null:k=k.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(O==="transformMatrix")V&&V.transformMatrix?k=s(V.transformMatrix,i.parseTransformAttribute(k)):k=i.parseTransformAttribute(k);else if(O==="visible")k=k!=="none"&&k!=="hidden",V&&V.visible===!1&&(k=!1);else if(O==="opacity")k=parseFloat(k),V&&typeof V.opacity<"u"&&(k*=V.opacity);else if(O==="textAnchor")k=k==="start"?"left":k==="end"?"right":"center";else if(O==="charSpacing")J=a(k,z)/z*1e3;else if(O==="paintFirst"){var U=k.indexOf("fill"),he=k.indexOf("stroke"),k="fill";(U>-1&&he>-1&&he<U||U===-1&&he>-1)&&(k="stroke")}else{if(O==="href"||O==="xlink:href"||O==="font")return k;if(O==="imageSmoothing")return k==="optimizeQuality";J=Z?k.map(a):a(k,z)}}return!Z&&isNaN(J)?k:J}function R(O){return new RegExp("^("+O.join("|")+")\\b","i")}function W(O){for(var k in b)if(!(typeof O[b[k]]>"u"||O[k]==="")){if(typeof O[k]>"u"){if(!i.Object.prototype[k])continue;O[k]=i.Object.prototype[k]}if(O[k].indexOf("url(")!==0){var V=new i.Color(O[k]);O[k]=V.setAlpha(n(V.getAlpha()*O[b[k]],2)).toRgba()}}return O}function K(O,k){var V,z=[],Z,J,U;for(J=0,U=k.length;J<U;J++)V=k[J],Z=O.getElementsByTagName(V),z=z.concat(Array.prototype.slice.call(Z));return z}i.parseTransformAttribute=function(){function O(oe,Oe){var Fe=i.util.cos(Oe[0]),Ne=i.util.sin(Oe[0]),Xe=0,et=0;Oe.length===3&&(Xe=Oe[1],et=Oe[2]),oe[0]=Fe,oe[1]=Ne,oe[2]=-Ne,oe[3]=Fe,oe[4]=Xe-(Fe*Xe-Ne*et),oe[5]=et-(Ne*Xe+Fe*et)}function k(oe,Oe){var Fe=Oe[0],Ne=Oe.length===2?Oe[1]:Oe[0];oe[0]=Fe,oe[3]=Ne}function V(oe,Oe,Fe){oe[Fe]=Math.tan(i.util.degreesToRadians(Oe[0]))}function z(oe,Oe){oe[4]=Oe[0],Oe.length===2&&(oe[5]=Oe[1])}var Z=i.iMatrix,J=i.reNum,U=i.commaWsp,he="(?:(skewX)\\s*\\(\\s*("+J+")\\s*\\))",ie="(?:(skewY)\\s*\\(\\s*("+J+")\\s*\\))",ee="(?:(rotate)\\s*\\(\\s*("+J+")(?:"+U+"("+J+")"+U+"("+J+"))?\\s*\\))",Q="(?:(scale)\\s*\\(\\s*("+J+")(?:"+U+"("+J+"))?\\s*\\))",se="(?:(translate)\\s*\\(\\s*("+J+")(?:"+U+"("+J+"))?\\s*\\))",de="(?:(matrix)\\s*\\(\\s*("+J+")"+U+"("+J+")"+U+"("+J+")"+U+"("+J+")"+U+"("+J+")"+U+"("+J+")\\s*\\))",ue="(?:"+de+"|"+se+"|"+Q+"|"+ee+"|"+he+"|"+ie+")",pe="(?:"+ue+"(?:"+U+"*"+ue+")*)",be="^\\s*(?:"+pe+"?)\\s*$",Ie=new RegExp(be),Pe=new RegExp(ue,"g");return function(oe){var Oe=Z.concat(),Fe=[];if(!oe||oe&&!Ie.test(oe))return Oe;oe.replace(Pe,function(Xe){var et=new RegExp(ue).exec(Xe).filter(function(yr){return!!yr}),Dt=et[1],_t=et.slice(2).map(parseFloat);switch(Dt){case"translate":z(Oe,_t);break;case"rotate":_t[0]=i.util.degreesToRadians(_t[0]),O(Oe,_t);break;case"scale":k(Oe,_t);break;case"skewX":V(Oe,_t,2);break;case"skewY":V(Oe,_t,1);break;case"matrix":Oe=_t;break}Fe.push(Oe.concat()),Oe=Z.concat()});for(var Ne=Fe[0];Fe.length>1;)Fe.shift(),Ne=i.util.multiplyTransformMatrices(Ne,Fe[0]);return Ne}}();function $(O,k){var V,z;O.replace(/;\s*$/,"").split(";").forEach(function(Z){var J=Z.split(":");V=J[0].trim().toLowerCase(),z=J[1].trim(),k[V]=z})}function ae(O,k){var V,z;for(var Z in O)typeof O[Z]>"u"||(V=Z.toLowerCase(),z=O[Z],k[V]=z)}function ce(O,k){var V={};for(var z in i.cssRules[k])if(fe(O,z.split(" ")))for(var Z in i.cssRules[k][z])V[Z]=i.cssRules[k][z][Z];return V}function fe(O,k){var V,z=!0;return V=ye(O,k.pop()),V&&k.length&&(z=le(O,k)),V&&z&&k.length===0}function le(O,k){for(var V,z=!0;O.parentNode&&O.parentNode.nodeType===1&&k.length;)z&&(V=k.pop()),O=O.parentNode,z=ye(O,V);return k.length===0}function ye(O,k){var V=O.nodeName,z=O.getAttribute("class"),Z=O.getAttribute("id"),J,U;if(J=new RegExp("^"+V,"i"),k=k.replace(J,""),Z&&k.length&&(J=new RegExp("#"+Z+"(?![a-zA-Z\\-]+)","i"),k=k.replace(J,"")),z&&k.length)for(z=z.split(" "),U=z.length;U--;)J=new RegExp("\\."+z[U]+"(?![a-zA-Z\\-]+)","i"),k=k.replace(J,"");return k.length===0}function Ee(O,k){var V;if(O.getElementById&&(V=O.getElementById(k)),V)return V;var z,Z,J,U=O.getElementsByTagName("*");for(Z=0,J=U.length;Z<J;Z++)if(z=U[Z],k===z.getAttribute("id"))return z}function ne(O){for(var k=K(O,["use","svg:use"]),V=0;k.length&&V<k.length;){var z=k[V],Z=z.getAttribute("xlink:href")||z.getAttribute("href");if(Z===null)return;var J=Z.slice(1),U=z.getAttribute("x")||0,he=z.getAttribute("y")||0,ie=Ee(O,J).cloneNode(!0),ee=(ie.getAttribute("transform")||"")+" translate("+U+", "+he+")",Q,se=k.length,de,ue,pe,be,Ie=i.svgNS;if(B(ie),/^svg$/i.test(ie.nodeName)){var Pe=ie.ownerDocument.createElementNS(Ie,"g");for(ue=0,pe=ie.attributes,be=pe.length;ue<be;ue++)de=pe.item(ue),Pe.setAttributeNS(Ie,de.nodeName,de.nodeValue);for(;ie.firstChild;)Pe.appendChild(ie.firstChild);ie=Pe}for(ue=0,pe=z.attributes,be=pe.length;ue<be;ue++)de=pe.item(ue),!(de.nodeName==="x"||de.nodeName==="y"||de.nodeName==="xlink:href"||de.nodeName==="href")&&(de.nodeName==="transform"?ee=de.nodeValue+" "+ee:ie.setAttribute(de.nodeName,de.nodeValue));ie.setAttribute("transform",ee),ie.setAttribute("instantiated_by_use","1"),ie.removeAttribute("id"),Q=z.parentNode,Q.replaceChild(ie,z),k.length===se&&V++}}var P=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function B(O){if(!i.svgViewBoxElementsRegEx.test(O.nodeName))return{};var k=O.getAttribute("viewBox"),V=1,z=1,Z=0,J=0,U,he,ie,ee,Q=O.getAttribute("width"),se=O.getAttribute("height"),de=O.getAttribute("x")||0,ue=O.getAttribute("y")||0,pe=O.getAttribute("preserveAspectRatio")||"",be=!k||!(k=k.match(P)),Ie=!Q||!se||Q==="100%"||se==="100%",Pe=be&&Ie,oe={},Oe="",Fe=0,Ne=0;if(oe.width=0,oe.height=0,oe.toBeParsed=Pe,be&&(de||ue)&&O.parentNode&&O.parentNode.nodeName!=="#document"&&(Oe=" translate("+a(de)+" "+a(ue)+") ",ie=(O.getAttribute("transform")||"")+Oe,O.setAttribute("transform",ie),O.removeAttribute("x"),O.removeAttribute("y")),Pe)return oe;if(be)return oe.width=a(Q),oe.height=a(se),oe;if(Z=-parseFloat(k[1]),J=-parseFloat(k[2]),U=parseFloat(k[3]),he=parseFloat(k[4]),oe.minX=Z,oe.minY=J,oe.viewBoxWidth=U,oe.viewBoxHeight=he,Ie?(oe.width=U,oe.height=he):(oe.width=a(Q),oe.height=a(se),V=oe.width/U,z=oe.height/he),pe=i.util.parsePreserveAspectRatioAttribute(pe),pe.alignX!=="none"&&(pe.meetOrSlice==="meet"&&(z=V=V>z?z:V),pe.meetOrSlice==="slice"&&(z=V=V>z?V:z),Fe=oe.width-U*V,Ne=oe.height-he*V,pe.alignX==="Mid"&&(Fe/=2),pe.alignY==="Mid"&&(Ne/=2),pe.alignX==="Min"&&(Fe=0),pe.alignY==="Min"&&(Ne=0)),V===1&&z===1&&Z===0&&J===0&&de===0&&ue===0)return oe;if((de||ue)&&O.parentNode.nodeName!=="#document"&&(Oe=" translate("+a(de)+" "+a(ue)+") "),ie=Oe+" matrix("+V+" 0 0 "+z+" "+(Z*V+Fe)+" "+(J*z+Ne)+") ",O.nodeName==="svg"){for(ee=O.ownerDocument.createElementNS(i.svgNS,"g");O.firstChild;)ee.appendChild(O.firstChild);O.appendChild(ee)}else ee=O,ee.removeAttribute("x"),ee.removeAttribute("y"),ie=ee.getAttribute("transform")+ie;return ee.setAttribute("transform",ie),oe}function F(O,k){for(;O&&(O=O.parentNode);)if(O.nodeName&&k.test(O.nodeName.replace("svg:",""))&&!O.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(O,k,V,z){if(O){ne(O);var Z=i.Object.__uid++,J,U,he=B(O),ie=i.util.toArray(O.getElementsByTagName("*"));if(he.crossOrigin=z&&z.crossOrigin,he.svgUid=Z,ie.length===0&&i.isLikelyNode){ie=O.selectNodes('//*[name(.)!="svg"]');var ee=[];for(J=0,U=ie.length;J<U;J++)ee[J]=ie[J];ie=ee}var Q=ie.filter(function(de){return B(de),i.svgValidTagNamesRegEx.test(de.nodeName.replace("svg:",""))&&!F(de,i.svgInvalidAncestorsRegEx)});if(!Q||Q&&!Q.length){k&&k([],{});return}var se={};ie.filter(function(de){return de.nodeName.replace("svg:","")==="clipPath"}).forEach(function(de){var ue=de.getAttribute("id");se[ue]=i.util.toArray(de.getElementsByTagName("*")).filter(function(pe){return i.svgValidTagNamesRegEx.test(pe.nodeName.replace("svg:",""))})}),i.gradientDefs[Z]=i.getGradientDefs(O),i.cssRules[Z]=i.getCSSRules(O),i.clipPaths[Z]=se,i.parseElements(Q,function(de,ue){k&&(k(de,he,ue,ie),delete i.gradientDefs[Z],delete i.cssRules[Z],delete i.clipPaths[Z])},c(he),V,z)}};function L(O,k){var V=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],z="xlink:href",Z=k.getAttribute(z).slice(1),J=Ee(O,Z);if(J&&J.getAttribute(z)&&L(O,J),V.forEach(function(he){J&&!k.hasAttribute(he)&&J.hasAttribute(he)&&k.setAttribute(he,J.getAttribute(he))}),!k.children.length)for(var U=J.cloneNode(!0);U.firstChild;)k.appendChild(U.firstChild);k.removeAttribute(z)}var G=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");d(i,{parseFontDeclaration:function(O,k){var V=O.match(G);if(V){var z=V[1],Z=V[3],J=V[4],U=V[5],he=V[6];z&&(k.fontStyle=z),Z&&(k.fontWeight=isNaN(parseFloat(Z))?Z:parseFloat(Z)),J&&(k.fontSize=a(J)),he&&(k.fontFamily=he),U&&(k.lineHeight=U==="normal"?1:U)}},getGradientDefs:function(O){var k=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],V=K(O,k),z,Z=0,J={};for(Z=V.length;Z--;)z=V[Z],z.getAttribute("xlink:href")&&L(O,z),J[z.getAttribute("id")]=z;return J},parseAttributes:function(O,k,V){if(O){var z,Z={},J,U;typeof V>"u"&&(V=O.getAttribute("svgUid")),O.parentNode&&i.svgValidParentsRegEx.test(O.parentNode.nodeName)&&(Z=i.parseAttributes(O.parentNode,k,V));var he=k.reduce(function(pe,be){return z=O.getAttribute(be),z&&(pe[be]=z),pe},{}),ie=d(ce(O,V),i.parseStyleAttribute(O));he=d(he,ie),ie[T]&&O.setAttribute(T,ie[T]),J=U=Z.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,he[x]&&(he[x]=J=a(he[x],U));var ee,Q,se={};for(var de in he)ee=M(de),Q=I(ee,he[de],Z,J),se[ee]=Q;se&&se.font&&i.parseFontDeclaration(se.font,se);var ue=d(Z,se);return i.svgValidParentsRegEx.test(O.nodeName)?ue:W(ue)}},parseElements:function(O,k,V,z,Z){new i.ElementsParser(O,k,V,z,Z).parse()},parseStyleAttribute:function(O){var k={},V=O.getAttribute("style");return V&&(typeof V=="string"?$(V,k):ae(V,k)),k},parsePointsAttribute:function(O){if(!O)return null;O=O.replace(/,/g," ").trim(),O=O.split(/\s+/);var k=[],V,z;for(V=0,z=O.length;V<z;V+=2)k.push({x:parseFloat(O[V]),y:parseFloat(O[V+1])});return k},getCSSRules:function(O){var k=O.getElementsByTagName("style"),V,z,Z={},J;for(V=0,z=k.length;V<z;V++){var U=k[V].textContent;U=U.replace(/\/\*[\s\S]*?\*\//g,""),U.trim()!==""&&(J=U.split("}"),J=J.filter(function(he){return he.trim()}),J.forEach(function(he){var ie=he.split("{"),ee={},Q=ie[1].trim(),se=Q.split(";").filter(function(be){return be.trim()});for(V=0,z=se.length;V<z;V++){var de=se[V].split(":"),ue=de[0].trim(),pe=de[1].trim();ee[ue]=pe}he=ie[0].trim(),he.split(",").forEach(function(be){be=be.replace(/^svg/i,"").trim(),be!==""&&(Z[be]?i.util.object.extend(Z[be],ee):Z[be]=i.util.object.clone(ee))})}))}return Z},loadSVGFromURL:function(O,k,V,z){O=O.replace(/^\n\s*/,"").trim(),new i.util.request(O,{method:"get",onComplete:Z});function Z(J){var U=J.responseXML;if(!U||!U.documentElement)return k&&k(null),!1;i.parseSVGDocument(U.documentElement,function(he,ie,ee,Q){k&&k(he,ie,ee,Q)},V,z)}},loadSVGFromString:function(O,k,V,z){var Z=new i.window.DOMParser,J=Z.parseFromString(O.trim(),"text/xml");i.parseSVGDocument(J.documentElement,function(U,he,ie,ee){k(U,he,ie,ee)},V,z)}})}(t),e.ElementsParser=function(p,i,d,c,n,a){this.elements=p,this.callback=i,this.options=d,this.reviver=c,this.svgUid=d&&d.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(p){p.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},p.createObjects=function(){var i=this;this.elements.forEach(function(d,c){d.setAttribute("svgUid",i.svgUid),i.createObject(d,c)})},p.findTag=function(i){return e[e.util.string.capitalize(i.tagName.replace("svg:",""))]},p.createObject=function(i,d){var c=this.findTag(i);if(c&&c.fromElement)try{c.fromElement(i,this.createCallback(d,i),this.options)}catch(n){e.log(n)}else this.checkIfDone()},p.createCallback=function(i,d){var c=this;return function(n){var a;c.resolveGradient(n,d,"fill"),c.resolveGradient(n,d,"stroke"),n instanceof e.Image&&n._originalElement&&(a=n.parsePreserveAspectRatioAttribute(d)),n._removeTransformMatrix(a),c.resolveClipPath(n,d),c.reviver&&c.reviver(d,n),c.instances[i]=n,c.checkIfDone()}},p.extractPropertyDefinition=function(i,d,c){var n=i[d],a=this.regexUrl;if(a.test(n)){a.lastIndex=0;var s=a.exec(n)[1];return a.lastIndex=0,e[c][this.svgUid][s]}},p.resolveGradient=function(i,d,c){var n=this.extractPropertyDefinition(i,c,"gradientDefs");if(n){var a=d.getAttribute(c+"-opacity"),s=e.Gradient.fromElement(n,i,a,this.options);i.set(c,s)}},p.createClipPathCallback=function(i,d){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,d.push(c)}},p.resolveClipPath=function(i,d){var c=this.extractPropertyDefinition(i,"clipPath","clipPaths"),n,a,s,l,g,u;if(c){l=[],s=e.util.invertTransform(i.calcTransformMatrix());for(var m=c[0].parentNode,y=d;y.parentNode&&y.getAttribute("clip-path")!==i.clipPath;)y=y.parentNode;y.parentNode.appendChild(m);for(var b=0;b<c.length;b++)n=c[b],a=this.findTag(n),a.fromElement(n,this.createClipPathCallback(i,l),this.options);l.length===1?c=l[0]:c=new e.Group(l),g=e.util.multiplyTransformMatrices(s,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,y);var u=e.util.qrDecompose(g);c.flipX=!1,c.flipY=!1,c.set("scaleX",u.scaleX),c.set("scaleY",u.scaleY),c.angle=u.angle,c.skewX=u.skewX,c.skewY=0,c.setPositionByOrigin({x:u.translateX,y:u.translateY},"center","center"),i.clipPath=c}else delete i.clipPath},p.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(p){var i=p.fabric||(p.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=d;function d(c,n){this.x=c,this.y=n}d.prototype={type:"point",constructor:d,add:function(c){return new d(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new d(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new d(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new d(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new d(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new d(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,n){return typeof n>"u"&&(n=.5),n=Math.max(Math.min(1,n),0),new d(this.x+(c.x-this.x)*n,this.y+(c.y-this.y)*n)},distanceFrom:function(c){var n=this.x-c.x,a=this.y-c.y;return Math.sqrt(n*n+a*a)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new d(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new d(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,n){return this.x=c,this.y=n,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var n=this.x,a=this.y;this.x=c.x,this.y=c.y,c.x=n,c.y=a},clone:function(){return new d(this.x,this.y)}}}(t),function(p){var i=p.fabric||(p.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function d(c){this.status=c,this.points=[]}i.Intersection=d,i.Intersection.prototype={constructor:d,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},i.Intersection.intersectLineLine=function(c,n,a,s){var l,g=(s.x-a.x)*(c.y-a.y)-(s.y-a.y)*(c.x-a.x),u=(n.x-c.x)*(c.y-a.y)-(n.y-c.y)*(c.x-a.x),m=(s.y-a.y)*(n.x-c.x)-(s.x-a.x)*(n.y-c.y);if(m!==0){var y=g/m,b=u/m;0<=y&&y<=1&&0<=b&&b<=1?(l=new d("Intersection"),l.appendPoint(new i.Point(c.x+y*(n.x-c.x),c.y+y*(n.y-c.y)))):l=new d}else g===0||u===0?l=new d("Coincident"):l=new d("Parallel");return l},i.Intersection.intersectLinePolygon=function(c,n,a){var s=new d,l=a.length,g,u,m,y;for(y=0;y<l;y++)g=a[y],u=a[(y+1)%l],m=d.intersectLineLine(c,n,g,u),s.appendPoints(m.points);return s.points.length>0&&(s.status="Intersection"),s},i.Intersection.intersectPolygonPolygon=function(c,n){var a=new d,s=c.length,l;for(l=0;l<s;l++){var g=c[l],u=c[(l+1)%s],m=d.intersectLinePolygon(g,u,n);a.appendPoints(m.points)}return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonRectangle=function(c,n,a){var s=n.min(a),l=n.max(a),g=new i.Point(l.x,s.y),u=new i.Point(s.x,l.y),m=d.intersectLinePolygon(s,g,c),y=d.intersectLinePolygon(g,l,c),b=d.intersectLinePolygon(l,u,c),x=d.intersectLinePolygon(u,s,c),T=new d;return T.appendPoints(m.points),T.appendPoints(y.points),T.appendPoints(b.points),T.appendPoints(x.points),T.points.length>0&&(T.status="Intersection"),T}}(t),function(p){var i=p.fabric||(p.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function d(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}i.Color=d,i.Color.prototype={_tryParsingColor:function(n){var a;n in d.colorNameMap&&(n=d.colorNameMap[n]),n==="transparent"&&(a=[255,255,255,0]),a||(a=d.sourceFromHex(n)),a||(a=d.sourceFromRgb(n)),a||(a=d.sourceFromHsl(n)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(n,a,s){n/=255,a/=255,s/=255;var l,g,u,m=i.util.array.max([n,a,s]),y=i.util.array.min([n,a,s]);if(u=(m+y)/2,m===y)l=g=0;else{var b=m-y;switch(g=u>.5?b/(2-m-y):b/(m+y),m){case n:l=(a-s)/b+(a<s?6:0);break;case a:l=(s-n)/b+2;break;case s:l=(n-a)/b+4;break}l/=6}return[Math.round(l*360),Math.round(g*100),Math.round(u*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),a=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var n=this.getSource(),a=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),a,s,l;return a=n[0].toString(16),a=a.length===1?"0"+a:a,s=n[1].toString(16),s=s.length===1?"0"+s:s,l=n[2].toString(16),l=l.length===1?"0"+l:l,a.toUpperCase()+s.toUpperCase()+l.toUpperCase()},toHexa:function(){var n=this.getSource(),a;return a=Math.round(n[3]*255),a=a.toString(16),a=a.length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var a=this.getSource();return a[3]=n,this.setSource(a),this},toGrayscale:function(){var n=this.getSource(),a=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),s=n[3];return this.setSource([a,a,a,s]),this},toBlackWhite:function(n){var a=this.getSource(),s=(a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),l=a[3];return n=n||127,s=Number(s)<Number(n)?0:255,this.setSource([s,s,s,l]),this},overlayWith:function(n){n instanceof d||(n=new d(n));var a=[],s=this.getAlpha(),l=.5,g=this.getSource(),u=n.getSource(),m;for(m=0;m<3;m++)a.push(Math.round(g[m]*(1-l)+u[m]*l));return a[3]=s,this.setSource(a),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(n,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(a-n)*6*s:s<1/2?a:s<2/3?n+(a-n)*(2/3-s)*6:n}i.Color.fromRgb=function(n){return d.fromSource(d.sourceFromRgb(n))},i.Color.sourceFromRgb=function(n){var a=n.match(d.reRGBa);if(a){var s=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),l=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),g=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(s,10),parseInt(l,10),parseInt(g,10),a[4]?parseFloat(a[4]):1]}},i.Color.fromRgba=d.fromRgb,i.Color.fromHsl=function(n){return d.fromSource(d.sourceFromHsl(n))},i.Color.sourceFromHsl=function(n){var a=n.match(d.reHSLa);if(a){var s=(parseFloat(a[1])%360+360)%360/360,l=parseFloat(a[2])/(/%$/.test(a[2])?100:1),g=parseFloat(a[3])/(/%$/.test(a[3])?100:1),u,m,y;if(l===0)u=m=y=g;else{var b=g<=.5?g*(l+1):g+l-g*l,x=g*2-b;u=c(x,b,s+1/3),m=c(x,b,s),y=c(x,b,s-1/3)}return[Math.round(u*255),Math.round(m*255),Math.round(y*255),a[4]?parseFloat(a[4]):1]}},i.Color.fromHsla=d.fromHsl,i.Color.fromHex=function(n){return d.fromSource(d.sourceFromHex(n))},i.Color.sourceFromHex=function(n){if(n.match(d.reHex)){var a=n.slice(n.indexOf("#")+1),s=a.length===3||a.length===4,l=a.length===8||a.length===4,g=s?a.charAt(0)+a.charAt(0):a.substring(0,2),u=s?a.charAt(1)+a.charAt(1):a.substring(2,4),m=s?a.charAt(2)+a.charAt(2):a.substring(4,6),y=l?s?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(g,16),parseInt(u,16),parseInt(m,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},i.Color.fromSource=function(n){var a=new d;return a.setSource(n),a}}(t),function(p){var i=p.fabric||(p.fabric={}),d=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],n={},a="left",s="top",l="right",g="bottom",u="center",m={top:g,bottom:s,left:l,right:a,center:u},y=i.util.radiansToDegrees,b=Math.sign||function(ee){return(ee>0)-(ee<0)||+ee};function x(ee,Q){var se=ee.angle+y(Math.atan2(Q.y,Q.x))+360;return Math.round(se%360/45)}function T(ee,Q){var se=Q.transform.target,de=se.canvas,ue=i.util.object.clone(Q);ue.target=se,de&&de.fire("object:"+ee,ue),se.fire(ee,Q)}function M(ee,Q){var se=Q.canvas,de=se.uniScaleKey,ue=ee[de];return se.uniformScaling&&!ue||!se.uniformScaling&&ue}function I(ee){return ee.originX===u&&ee.originY===u}function R(ee,Q,se){var de=ee.lockScalingX,ue=ee.lockScalingY;return!!(de&&ue||!Q&&(de||ue)&&se||de&&Q==="x"||ue&&Q==="y")}function W(ee,Q,se){var de="not-allowed",ue=M(ee,se),pe="";if(Q.x!==0&&Q.y===0?pe="x":Q.x===0&&Q.y!==0&&(pe="y"),R(se,pe,ue))return de;var be=x(se,Q);return d[be]+"-resize"}function K(ee,Q,se){var de="not-allowed";if(Q.x!==0&&se.lockSkewingY||Q.y!==0&&se.lockSkewingX)return de;var ue=x(se,Q)%4;return c[ue]+"-resize"}function $(ee,Q,se){return ee[se.canvas.altActionKey]?n.skewCursorStyleHandler(ee,Q,se):n.scaleCursorStyleHandler(ee,Q,se)}function ae(ee,Q,se){var de=ee[se.canvas.altActionKey];if(Q.x===0)return de?"skewX":"scaleY";if(Q.y===0)return de?"skewY":"scaleX"}function ce(ee,Q,se){return se.lockRotation?"not-allowed":Q.cursorStyle}function fe(ee,Q,se,de){return{e:ee,transform:Q,pointer:{x:se,y:de}}}function le(ee){return function(Q,se,de,ue){var pe=se.target,be=pe.getCenterPoint(),Ie=pe.translateToOriginPoint(be,se.originX,se.originY),Pe=ee(Q,se,de,ue);return pe.setPositionByOrigin(Ie,se.originX,se.originY),Pe}}function ye(ee,Q){return function(se,de,ue,pe){var be=Q(se,de,ue,pe);return be&&T(ee,fe(se,de,ue,pe)),be}}function Ee(ee,Q,se,de,ue){var pe=ee.target,be=pe.controls[ee.corner],Ie=pe.canvas.getZoom(),Pe=pe.padding/Ie,oe=pe.toLocalPoint(new i.Point(de,ue),Q,se);return oe.x>=Pe&&(oe.x-=Pe),oe.x<=-Pe&&(oe.x+=Pe),oe.y>=Pe&&(oe.y-=Pe),oe.y<=Pe&&(oe.y+=Pe),oe.x-=be.offsetX,oe.y-=be.offsetY,oe}function ne(ee){return ee.flipX!==ee.flipY}function P(ee,Q,se,de,ue){if(ee[Q]!==0){var pe=ee._getTransformedDimensions()[de],be=ue/pe*ee[se];ee.set(se,be)}}function B(ee,Q,se,de){var ue=Q.target,pe=ue._getTransformedDimensions(0,ue.skewY),be=Ee(Q,Q.originX,Q.originY,se,de),Ie=Math.abs(be.x*2)-pe.x,Pe=ue.skewX,oe;Ie<2?oe=0:(oe=y(Math.atan2(Ie/ue.scaleX,pe.y/ue.scaleY)),Q.originX===a&&Q.originY===g&&(oe=-oe),Q.originX===l&&Q.originY===s&&(oe=-oe),ne(ue)&&(oe=-oe));var Oe=Pe!==oe;if(Oe){var Fe=ue._getTransformedDimensions().y;ue.set("skewX",oe),P(ue,"skewY","scaleY","y",Fe)}return Oe}function F(ee,Q,se,de){var ue=Q.target,pe=ue._getTransformedDimensions(ue.skewX,0),be=Ee(Q,Q.originX,Q.originY,se,de),Ie=Math.abs(be.y*2)-pe.y,Pe=ue.skewY,oe;Ie<2?oe=0:(oe=y(Math.atan2(Ie/ue.scaleY,pe.x/ue.scaleX)),Q.originX===a&&Q.originY===g&&(oe=-oe),Q.originX===l&&Q.originY===s&&(oe=-oe),ne(ue)&&(oe=-oe));var Oe=Pe!==oe;if(Oe){var Fe=ue._getTransformedDimensions().x;ue.set("skewY",oe),P(ue,"skewX","scaleX","x",Fe)}return Oe}function L(ee,Q,se,de){var ue=Q.target,pe=ue.skewX,be,Ie=Q.originY;if(ue.lockSkewingX)return!1;if(pe===0){var Pe=Ee(Q,u,u,se,de);Pe.x>0?be=a:be=l}else pe>0&&(be=Ie===s?a:l),pe<0&&(be=Ie===s?l:a),ne(ue)&&(be=be===a?l:a);Q.originX=be;var oe=ye("skewing",le(B));return oe(ee,Q,se,de)}function G(ee,Q,se,de){var ue=Q.target,pe=ue.skewY,be,Ie=Q.originX;if(ue.lockSkewingY)return!1;if(pe===0){var Pe=Ee(Q,u,u,se,de);Pe.y>0?be=s:be=g}else pe>0&&(be=Ie===a?s:g),pe<0&&(be=Ie===a?g:s),ne(ue)&&(be=be===s?g:s);Q.originY=be;var oe=ye("skewing",le(F));return oe(ee,Q,se,de)}function O(ee,Q,se,de){var ue=Q,pe=ue.target,be=pe.translateToOriginPoint(pe.getCenterPoint(),ue.originX,ue.originY);if(pe.lockRotation)return!1;var Ie=Math.atan2(ue.ey-be.y,ue.ex-be.x),Pe=Math.atan2(de-be.y,se-be.x),oe=y(Pe-Ie+ue.theta),Oe=!0;if(pe.snapAngle>0){var Fe=pe.snapAngle,Ne=pe.snapThreshold||Fe,Xe=Math.ceil(oe/Fe)*Fe,et=Math.floor(oe/Fe)*Fe;Math.abs(oe-et)<Ne?oe=et:Math.abs(oe-Xe)<Ne&&(oe=Xe)}return oe<0&&(oe=360+oe),oe%=360,Oe=pe.angle!==oe,pe.angle=oe,Oe}function k(ee,Q,se,de,ue){ue=ue||{};var pe=Q.target,be=pe.lockScalingX,Ie=pe.lockScalingY,Pe=ue.by,oe,Oe,Fe,Ne,Xe=M(ee,pe),et=R(pe,Pe,Xe),Dt,_t,yr=Q.gestureScale;if(et)return!1;if(yr)Oe=Q.scaleX*yr,Fe=Q.scaleY*yr;else{if(oe=Ee(Q,Q.originX,Q.originY,se,de),Dt=Pe!=="y"?b(oe.x):1,_t=Pe!=="x"?b(oe.y):1,Q.signX||(Q.signX=Dt),Q.signY||(Q.signY=_t),pe.lockScalingFlip&&(Q.signX!==Dt||Q.signY!==_t))return!1;if(Ne=pe._getTransformedDimensions(),Xe&&!Pe){var Hr=Math.abs(oe.x)+Math.abs(oe.y),qt=Q.original,ci=Math.abs(Ne.x*qt.scaleX/pe.scaleX)+Math.abs(Ne.y*qt.scaleY/pe.scaleY),Rn=Hr/ci;Oe=qt.scaleX*Rn,Fe=qt.scaleY*Rn}else Oe=Math.abs(oe.x*pe.scaleX/Ne.x),Fe=Math.abs(oe.y*pe.scaleY/Ne.y);I(Q)&&(Oe*=2,Fe*=2),Q.signX!==Dt&&Pe!=="y"&&(Q.originX=m[Q.originX],Oe*=-1,Q.signX=Dt),Q.signY!==_t&&Pe!=="x"&&(Q.originY=m[Q.originY],Fe*=-1,Q.signY=_t)}var fi=pe.scaleX,jo=pe.scaleY;return Pe?(Pe==="x"&&pe.set("scaleX",Oe),Pe==="y"&&pe.set("scaleY",Fe)):(!be&&pe.set("scaleX",Oe),!Ie&&pe.set("scaleY",Fe)),fi!==pe.scaleX||jo!==pe.scaleY}function V(ee,Q,se,de){return k(ee,Q,se,de)}function z(ee,Q,se,de){return k(ee,Q,se,de,{by:"x"})}function Z(ee,Q,se,de){return k(ee,Q,se,de,{by:"y"})}function J(ee,Q,se,de){return ee[Q.target.canvas.altActionKey]?n.skewHandlerX(ee,Q,se,de):n.scalingY(ee,Q,se,de)}function U(ee,Q,se,de){return ee[Q.target.canvas.altActionKey]?n.skewHandlerY(ee,Q,se,de):n.scalingX(ee,Q,se,de)}function he(ee,Q,se,de){var ue=Q.target,pe=Ee(Q,Q.originX,Q.originY,se,de),be=ue.strokeWidth/(ue.strokeUniform?ue.scaleX:1),Ie=I(Q)?2:1,Pe=ue.width,oe=Math.abs(pe.x*Ie/ue.scaleX)-be;return ue.set("width",Math.max(oe,0)),Pe!==oe}function ie(ee,Q,se,de){var ue=Q.target,pe=se-Q.offsetX,be=de-Q.offsetY,Ie=!ue.get("lockMovementX")&&ue.left!==pe,Pe=!ue.get("lockMovementY")&&ue.top!==be;return Ie&&ue.set("left",pe),Pe&&ue.set("top",be),(Ie||Pe)&&T("moving",fe(ee,Q,se,de)),Ie||Pe}n.scaleCursorStyleHandler=W,n.skewCursorStyleHandler=K,n.scaleSkewCursorStyleHandler=$,n.rotationWithSnapping=ye("rotating",le(O)),n.scalingEqually=ye("scaling",le(V)),n.scalingX=ye("scaling",le(z)),n.scalingY=ye("scaling",le(Z)),n.scalingYOrSkewingX=J,n.scalingXOrSkewingY=U,n.changeWidth=ye("resizing",le(he)),n.skewHandlerX=L,n.skewHandlerY=G,n.dragHandler=ie,n.scaleOrSkewActionName=ae,n.rotationStyleHandler=ce,n.fireEvent=T,n.wrapWithFixedAnchor=le,n.wrapWithFireEvent=ye,n.getLocalPoint=Ee,i.controlsUtils=n}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.degreesToRadians,c=i.controlsUtils;function n(s,l,g,u,m){u=u||{};var y=this.sizeX||u.cornerSize||m.cornerSize,b=this.sizeY||u.cornerSize||m.cornerSize,x=typeof u.transparentCorners<"u"?u.transparentCorners:m.transparentCorners,T=x?"stroke":"fill",M=!x&&(u.cornerStrokeColor||m.cornerStrokeColor),I=l,R=g,W;s.save(),s.fillStyle=u.cornerColor||m.cornerColor,s.strokeStyle=u.cornerStrokeColor||m.cornerStrokeColor,y>b?(W=y,s.scale(1,b/y),R=g*y/b):b>y?(W=b,s.scale(y/b,1),I=l*b/y):W=y,s.lineWidth=1,s.beginPath(),s.arc(I,R,W/2,0,2*Math.PI,!1),s[T](),M&&s.stroke(),s.restore()}function a(s,l,g,u,m){u=u||{};var y=this.sizeX||u.cornerSize||m.cornerSize,b=this.sizeY||u.cornerSize||m.cornerSize,x=typeof u.transparentCorners<"u"?u.transparentCorners:m.transparentCorners,T=x?"stroke":"fill",M=!x&&(u.cornerStrokeColor||m.cornerStrokeColor),I=y/2,R=b/2;s.save(),s.fillStyle=u.cornerColor||m.cornerColor,s.strokeStyle=u.cornerStrokeColor||m.cornerStrokeColor,s.lineWidth=1,s.translate(l,g),s.rotate(d(m.angle)),s[T+"Rect"](-I,-R,y,b),M&&s.strokeRect(-I,-R,y,b),s.restore()}c.renderCircleControl=n,c.renderSquareControl=a}(t),function(p){var i=p.fabric||(p.fabric={});function d(c){for(var n in c)this[n]=c[n]}i.Control=d,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,n){return n.cursorStyle},getActionName:function(c,n){return n.actionName},getVisibility:function(c,n){var a=c._controlsVisibility;return a&&typeof a[n]<"u"?a[n]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,n){var a=i.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},n);return a},calcCornerCoords:function(c,n,a,s,l){var g,u,m,y,b=l?this.touchSizeX:this.sizeX,x=l?this.touchSizeY:this.sizeY;if(b&&x&&b!==x){var T=Math.atan2(x,b),M=Math.sqrt(b*b+x*x)/2,I=T-i.util.degreesToRadians(c),R=Math.PI/2-T-i.util.degreesToRadians(c);g=M*i.util.cos(I),u=M*i.util.sin(I),m=M*i.util.cos(R),y=M*i.util.sin(R)}else{var W=b&&x?b:n;M=W*.7071067812;var I=i.util.degreesToRadians(45-c);g=m=M*i.util.cos(I),u=y=M*i.util.sin(I)}return{tl:{x:a-y,y:s-m},tr:{x:a+g,y:s-u},bl:{x:a-g,y:s+u},br:{x:a+y,y:s+m}}},render:function(c,n,a,s,l){switch(s=s||{},s.cornerStyle||l.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,c,n,a,s,l);break;default:i.controlsUtils.renderSquareControl.call(this,c,n,a,s,l)}}}}(t),function(){function p(a,s){var l=a.getAttribute("style"),g=a.getAttribute("offset")||0,u,m,y,b;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,l){var x=l.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),b=x.length;b--;){var T=x[b].split(/\s*:\s*/),M=T[0].trim(),I=T[1].trim();M==="stop-color"?u=I:M==="stop-opacity"&&(y=I)}}return u||(u=a.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=a.getAttribute("stop-opacity")),u=new e.Color(u),m=u.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=m*s,{offset:g,color:u.toRgb(),opacity:y}}function i(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function d(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}var c=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var s,l=this;Object.keys(a).forEach(function(g){l[g]=a[g]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,s={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},this.type==="radial"&&(s.r1=a.coords.r1||0,s.r2=a.coords.r2||0),this.coords=s,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var s in a){var l=new e.Color(a[s]);this.colorStops.push({offset:parseFloat(s),color:l.toRgb(),opacity:l.getAlpha()})}return this},toObject:function(a){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,s,a),s},toSVG:function(a,m){var l=c(this.coords,!0),g,u,m=m||{},y,b,x=c(this.colorStops,!0),T=l.r1>l.r2,M=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),I=-this.offsetX,R=-this.offsetY,W=!!m.additionalTransform,K=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(le,ye){return le.offset-ye.offset}),K==="objectBoundingBox"?(I/=a.width,R/=a.height):(I+=a.width/2,R+=a.height/2),a.type==="path"&&this.gradientUnits!=="percentage"&&(I-=a.pathOffset.x,R-=a.pathOffset.y),M[4]-=I,M[5]-=R,b='id="SVGID_'+this.id+'" gradientUnits="'+K+'"',b+=' gradientTransform="'+(W?m.additionalTransform+" ":"")+e.util.matrixToSVG(M)+'" ',this.type==="linear"?y=["<linearGradient ",b,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",b,' cx="',T?l.x1:l.x2,'" cy="',T?l.y1:l.y2,'" r="',T?l.r1:l.r2,'" fx="',T?l.x2:l.x1,'" fy="',T?l.y2:l.y1,`">
`]),this.type==="radial"){if(T)for(x=x.concat(),x.reverse(),g=0,u=x.length;g<u;g++)x[g].offset=1-x[g].offset;var $=Math.min(l.r1,l.r2);if($>0){var ae=Math.max(l.r1,l.r2),ce=$/ae;for(g=0,u=x.length;g<u;g++)x[g].offset+=ce*(1-x[g].offset)}}for(g=0,u=x.length;g<u;g++){var fe=x[g];y.push("<stop ",'offset="',fe.offset*100+"%",'" style="stop-color:',fe.color,typeof fe.opacity<"u"?";stop-opacity: "+fe.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(a){var s,l=e.util.object.clone(this.coords),g,u;if(this.type){for(this.type==="linear"?s=a.createLinearGradient(l.x1,l.y1,l.x2,l.y2):this.type==="radial"&&(s=a.createRadialGradient(l.x1,l.y1,l.r1,l.x2,l.y2,l.r2)),g=0,u=this.colorStops.length;g<u;g++){var m=this.colorStops[g].color,y=this.colorStops[g].opacity,b=this.colorStops[g].offset;typeof y<"u"&&(m=new e.Color(m).setAlpha(y).toRgba()),s.addColorStop(b,m)}return s}}}),e.util.object.extend(e.Gradient,{fromElement:function(a,s,l,g){var u=parseFloat(l)/(/%$/.test(l)?100:1);u=u<0?0:u>1?1:u,isNaN(u)&&(u=1);var m=a.getElementsByTagName("stop"),y,b=a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=a.getAttribute("gradientTransform")||"",T=[],M,I,R=0,W=0,K;for(a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?(y="linear",M=i(a)):(y="radial",M=d(a)),I=m.length;I--;)T.push(p(m[I],u));K=e.parseTransformAttribute(x),n(s,M,g,b),b==="pixels"&&(R=-s.left,W=-s.top);var $=new e.Gradient({id:a.getAttribute("id"),type:y,coords:M,colorStops:T,gradientUnits:b,gradientTransform:K,offsetX:R,offsetY:W});return $}});function n(a,s,l,g){var u,m;Object.keys(s).forEach(function(y){u=s[y],u==="Infinity"?m=1:u==="-Infinity"?m=0:(m=parseFloat(s[y],10),typeof u=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(u)&&(m*=.01,g==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(m*=l.viewBoxWidth||l.width),(y==="y1"||y==="y2")&&(m*=l.viewBoxHeight||l.height)))),s[y]=m})}}(),function(){var p=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,d){if(i||(i={}),this.id=e.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){d&&d(this);return}else{var c=this;this.source=e.util.createImage(),e.util.loadImage(i.source,function(n,a){c.source=n,d&&d(c,a)},null,this.crossOrigin)}},toObject:function(i){var d=e.Object.NUM_FRACTION_DIGITS,c,n;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),n={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:p(this.offsetX,d),offsetY:p(this.offsetY,d),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,n,i),n},toSVG:function(i){var d=typeof this.source=="function"?this.source():this.source,c=d.width/i.width,n=d.height/i.height,a=this.offsetX/i.width,s=this.offsetY/i.height,l="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,s&&(n+=Math.abs(s))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,a&&(c+=Math.abs(a))),d.src?l=d.src:d.toDataURL&&(l=d.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+s+'" width="'+c+'" height="'+n+`">
<image x="0" y="0" width="`+d.width+'" height="'+d.height+'" xlink:href="'+l+`"></image>
</pattern>
`},setOptions:function(i){for(var d in i)this[d]=i[d]},toLive:function(i){var d=this.source;return!d||typeof d.src<"u"&&(!d.complete||d.naturalWidth===0||d.naturalHeight===0)?"":i.createPattern(d,this.repeat)}})}(),function(p){var i=p.fabric||(p.fabric={}),d=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var n in c)this[n]=c[n];this.id=i.Object.__uid++},_parseShadow:function(c){var n=c.trim(),a=i.Shadow.reOffsetsAndBlur.exec(n)||[],s=n.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var n=40,a=40,s=i.Object.NUM_FRACTION_DIGITS,l=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-c.angle)),g=20,u=new i.Color(this.color);return c.width&&c.height&&(n=d((Math.abs(l.x)+this.blur)/c.width,s)*100+g,a=d((Math.abs(l.y)+this.blur)/c.height,s)*100+g),c.flipX&&(l.x*=-1),c.flipY&&(l.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+d(this.blur?this.blur/2:0,s)+`"></feGaussianBlur>
	<feOffset dx="`+d(l.x,s)+'" dy="'+d(l.y,s)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+u.toRgb()+'" flood-opacity="'+u.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},n=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==n[a]&&(c[a]=this[a])},this),c}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var p=e.util.object.extend,i=e.util.getElementOffset,d=e.util.removeFromArray,c=e.util.toFixed,n=e.util.transformPoint,a=e.util.invertTransform,s=e.util.getNodeCanvas,l=e.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(u,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(u,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(u,m){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(u),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,y),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,y),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,y),m.overlayColor&&this.setOverlayColor(m.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var u=e.devicePixelRatio;this.__initRetinaScaling(u,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(u,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(u,m,y){m.setAttribute("width",this.width*u),m.setAttribute("height",this.height*u),y.scale(u,u)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(u,m,y){return this.__setBgOverlayImage("overlayImage",u,m,y)},setBackgroundImage:function(u,m,y){return this.__setBgOverlayImage("backgroundImage",u,m,y)},setOverlayColor:function(u,m){return this.__setBgOverlayColor("overlayColor",u,m)},setBackgroundColor:function(u,m){return this.__setBgOverlayColor("backgroundColor",u,m)},__setBgOverlayImage:function(u,m,y,b){return typeof m=="string"?e.util.loadImage(m,function(x,T){if(x){var M=new e.Image(x,b);this[u]=M,M.canvas=this}y&&y(x,T)},this,b&&b.crossOrigin):(b&&m.setOptions(b),this[u]=m,m&&(m.canvas=this),y&&y(m,!1)),this},__setBgOverlayColor:function(u,m,y){return this[u]=m,this._initGradient(m,u),this._initPattern(m,u,y),this},_createCanvasElement:function(){var u=l();if(!u||(u.style||(u.style={}),typeof u.getContext>"u"))throw g;return u},_initOptions:function(u){var m=this.lowerCanvasEl;this._setOptions(u),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(u){u&&u.getContext?this.lowerCanvasEl=u:this.lowerCanvasEl=e.util.getById(u)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(u,m){return this.setDimensions({width:u},m)},setHeight:function(u,m){return this.setDimensions({height:u},m)},setDimensions:function(u,m){var y;m=m||{};for(var b in u)y=u[b],m.cssOnly||(this._setBackstoreDimension(b,u[b]),y+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(b,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(u,m){return this.lowerCanvasEl[u]=m,this.upperCanvasEl&&(this.upperCanvasEl[u]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[u]=m),this[u]=m,this},_setCssDimension:function(u,m){return this.lowerCanvasEl.style[u]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[u]=m),this.wrapperEl&&(this.wrapperEl.style[u]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(u){var m=this._activeObject,y=this.backgroundImage,b=this.overlayImage,x,T,M;for(this.viewportTransform=u,T=0,M=this._objects.length;T<M;T++)x=this._objects[T],x.group||x.setCoords(!0);return m&&m.setCoords(),y&&y.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(u,m){var y=u,b=this.viewportTransform.slice(0);u=n(u,a(this.viewportTransform)),b[0]=m,b[3]=m;var x=n(u,b);return b[4]+=y.x-x.x,b[5]+=y.y-x.y,this.setViewportTransform(b)},setZoom:function(u){return this.zoomToPoint(new e.Point(0,0),u),this},absolutePan:function(u){var m=this.viewportTransform.slice(0);return m[4]=-u.x,m[5]=-u.y,this.setViewportTransform(m)},relativePan:function(u){return this.absolutePan(new e.Point(-u.x-this.viewportTransform[4],-u.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(u){this.stateful&&u.setupState(),u._set("canvas",this),u.setCoords(),this.fire("object:added",{target:u}),u.fire("added")},_onObjectRemoved:function(u){this.fire("object:removed",{target:u}),u.fire("removed"),delete u.canvas},clearContext:function(u){return u.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var u=this.contextContainer;return this.renderCanvas(u,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var u={},m=this.width,y=this.height,b=a(this.viewportTransform);return u.tl=n({x:0,y:0},b),u.br=n({x:m,y},b),u.tr=new e.Point(u.br.x,u.tl.y),u.bl=new e.Point(u.tl.x,u.br.y),this.vptCoords=u,u},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(u,m){var y=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(u),e.util.setImageSmoothing(u,this.imageSmoothingEnabled),this.fire("before:render",{ctx:u}),this._renderBackground(u),u.save(),u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(u,m),u.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(u)),this._renderOverlay(u),this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),this.fire("after:render",{ctx:u})},drawClipPathOnCanvas:function(u){var m=this.viewportTransform,y=this.clipPath;u.save(),u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),u.globalCompositeOperation="destination-in",y.transform(u),u.scale(1/y.zoomX,1/y.zoomY),u.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),u.restore()},_renderObjects:function(u,m){var y,b;for(y=0,b=m.length;y<b;++y)m[y]&&m[y].render(u)},_renderBackgroundOrOverlay:function(u,m){var y=this[m+"Color"],b=this[m+"Image"],x=this.viewportTransform,T=this[m+"Vpt"];if(!(!y&&!b)){if(y){u.save(),u.beginPath(),u.moveTo(0,0),u.lineTo(this.width,0),u.lineTo(this.width,this.height),u.lineTo(0,this.height),u.closePath(),u.fillStyle=y.toLive?y.toLive(u,this):y,T&&u.transform(x[0],x[1],x[2],x[3],x[4],x[5]),u.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var M=y.gradientTransform||y.patternTransform;M&&u.transform(M[0],M[1],M[2],M[3],M[4],M[5]),u.fill(),u.restore()}b&&(u.save(),T&&u.transform(x[0],x[1],x[2],x[3],x[4],x[5]),b.render(u),u.restore())}},_renderBackground:function(u){this._renderBackgroundOrOverlay(u,"background")},_renderOverlay:function(u){this._renderBackgroundOrOverlay(u,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(u){return this._centerObject(u,new e.Point(this.getCenterPoint().x,u.getCenterPoint().y))},centerObjectV:function(u){return this._centerObject(u,new e.Point(u.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(u){var m=this.getCenterPoint();return this._centerObject(u,m)},viewportCenterObject:function(u){var m=this.getVpCenter();return this._centerObject(u,m)},viewportCenterObjectH:function(u){var m=this.getVpCenter();return this._centerObject(u,new e.Point(m.x,u.getCenterPoint().y)),this},viewportCenterObjectV:function(u){var m=this.getVpCenter();return this._centerObject(u,new e.Point(u.getCenterPoint().x,m.y))},getVpCenter:function(){var u=this.getCenterPoint(),m=a(this.viewportTransform);return n(u,m)},_centerObject:function(u,m){return u.setPositionByOrigin(m,"center","center"),u.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(u){return this.toDatalessObject(u)},toObject:function(u){return this._toObjectMethod("toObject",u)},toDatalessObject:function(u){return this._toObjectMethod("toDatalessObject",u)},_toObjectMethod:function(u,m){var y=this.clipPath,b={version:e.version,objects:this._toObjects(u,m)};return y&&!y.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,u,m)),p(b,this.__serializeBgOverlay(u,m)),e.util.populateWithProperties(this,b,m),b},_toObjects:function(u,m){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,u,m)},this)},_toObject:function(u,m,y){var b;this.includeDefaultValues||(b=u.includeDefaultValues,u.includeDefaultValues=!1);var x=u[m](y);return this.includeDefaultValues||(u.includeDefaultValues=b),x},__serializeBgOverlay:function(u,m){var y={},b=this.backgroundImage,x=this.overlayImage,T=this.backgroundColor,M=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(y.background=T.toObject(m)):T&&(y.background=T),M&&M.toObject?M.excludeFromExport||(y.overlay=M.toObject(m)):M&&(y.overlay=M),b&&!b.excludeFromExport&&(y.backgroundImage=this._toObject(b,u,m)),x&&!x.excludeFromExport&&(y.overlayImage=this._toObject(x,u,m)),y},svgViewportTransformation:!0,toSVG:function(u,m){u||(u={}),u.reviver=m;var y=[];return this._setSVGPreamble(y,u),this._setSVGHeader(y,u),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",m),this._setSVGObjects(y,m),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",m),y.push("</svg>"),y.join("")},_setSVGPreamble:function(u,m){m.suppressPreamble||u.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(u,m){var y=m.width||this.width,b=m.height||this.height,x,T='viewBox="0 0 '+this.width+" "+this.height+'" ',M=e.Object.NUM_FRACTION_DIGITS;m.viewBox?T='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,T='viewBox="'+c(-x[4]/x[0],M)+" "+c(-x[5]/x[3],M)+" "+c(this.width/x[0],M)+" "+c(this.height/x[3],M)+'" '),u.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',b,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(u){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(u.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var u=this,m=["background","overlay"].map(function(y){var b=u[y+"Color"];if(b&&b.toLive){var x=u[y+"Vpt"],T=u.viewportTransform,M={width:u.width/(x?T[0]:1),height:u.height/(x?T[3]:1)};return b.toSVG(M,{additionalTransform:x?e.util.matrixToSVG(T):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var u="",m={},y,b,x,T,M,I,R,W,K,$=e.fontPaths,ae=[];for(this._objects.forEach(function fe(le){ae.push(le),le._objects&&le._objects.forEach(fe)}),W=0,K=ae.length;W<K;W++)if(y=ae[W],b=y.fontFamily,!(y.type.indexOf("text")===-1||m[b]||!$[b])&&(m[b]=!0,!!y.styles)){x=y.styles;for(M in x){T=x[M];for(R in T)I=T[R],b=I.fontFamily,!m[b]&&$[b]&&(m[b]=!0)}}for(var ce in m)u+=[`		@font-face {
`,"			font-family: '",ce,`';
`,"			src: url('",$[ce],`');
`,`		}
`].join("");return u&&(u=['	<style type="text/css">',`<![CDATA[
`,u,"]]>",`</style>
`].join("")),u},_setSVGObjects:function(u,m){var y,b,x,T=this._objects;for(b=0,x=T.length;b<x;b++)y=T[b],!y.excludeFromExport&&this._setSVGObject(u,y,m)},_setSVGObject:function(u,m,y){u.push(m.toSVG(y))},_setSVGBgOverlayImage:function(u,m,y){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&u.push(this[m].toSVG(y))},_setSVGBgOverlayColor:function(u,m){var y=this[m+"Color"],b=this.viewportTransform,x=this.width,T=this.height;if(y)if(y.toLive){var M=y.repeat,I=e.util.invertTransform(b),R=this[m+"Vpt"],W=R?e.util.matrixToSVG(I):"";u.push('<rect transform="'+W+" translate(",x/2,",",T/2,')"',' x="',y.offsetX-x/2,'" y="',y.offsetY-T/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?y.source.width:x,'" height="',M==="repeat-x"||M==="no-repeat"?y.source.height:T,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else u.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(u){if(!u)return this;var m=this._activeObject,y,b,x;if(u===m&&u.type==="activeSelection")for(x=m._objects,y=x.length;y--;)b=x[y],d(this._objects,b),this._objects.unshift(b);else d(this._objects,u),this._objects.unshift(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(u){if(!u)return this;var m=this._activeObject,y,b,x;if(u===m&&u.type==="activeSelection")for(x=m._objects,y=0;y<x.length;y++)b=x[y],d(this._objects,b),this._objects.push(b);else d(this._objects,u),this._objects.push(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(u,m){if(!u)return this;var y=this._activeObject,b,x,T,M,I,R=0;if(u===y&&u.type==="activeSelection")for(I=y._objects,b=0;b<I.length;b++)x=I[b],T=this._objects.indexOf(x),T>0+R&&(M=T-1,d(this._objects,x),this._objects.splice(M,0,x)),R++;else T=this._objects.indexOf(u),T!==0&&(M=this._findNewLowerIndex(u,T,m),d(this._objects,u),this._objects.splice(M,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(u,m,y){var b,x;if(y)for(b=m,x=m-1;x>=0;--x){var T=u.intersectsWithObject(this._objects[x])||u.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(u);if(T){b=x;break}}else b=m-1;return b},bringForward:function(u,m){if(!u)return this;var y=this._activeObject,b,x,T,M,I,R=0;if(u===y&&u.type==="activeSelection")for(I=y._objects,b=I.length;b--;)x=I[b],T=this._objects.indexOf(x),T<this._objects.length-1-R&&(M=T+1,d(this._objects,x),this._objects.splice(M,0,x)),R++;else T=this._objects.indexOf(u),T!==this._objects.length-1&&(M=this._findNewUpperIndex(u,T,m),d(this._objects,u),this._objects.splice(M,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(u,m,y){var b,x,T;if(y)for(b=m,x=m+1,T=this._objects.length;x<T;++x){var M=u.intersectsWithObject(this._objects[x])||u.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(u);if(M){b=x;break}}else b=m+1;return b},moveTo:function(u,m){return d(this._objects,u),this._objects.splice(m,0,u),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(u){u.dispose&&u.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),p(e.StaticCanvas.prototype,e.Observable),p(e.StaticCanvas.prototype,e.Collection),p(e.StaticCanvas.prototype,e.DataURLExporter),p(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(u){var m=l();if(!m||!m.getContext)return null;var y=m.getContext("2d");if(!y)return null;switch(u){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var u=s(this.lowerCanvasEl);return u&&u.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(u){var m=s(this.lowerCanvasEl);return m&&m.createJPEGStream(u)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(p){p.strokeStyle=this.color,p.lineWidth=this.width,p.lineCap=this.strokeLineCap,p.miterLimit=this.strokeMiterLimit,p.lineJoin=this.strokeLineJoin,p.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(p){var i=this.canvas.viewportTransform;p.save(),p.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var p=this.canvas,i=this.shadow,d=p.contextTop,c=p.getZoom();p&&p._isRetinaScaling()&&(c*=e.devicePixelRatio),d.shadowColor=i.color,d.shadowBlur=i.blur*c,d.shadowOffsetX=i.offsetX*c,d.shadowOffsetY=i.offsetY*c}},needsFullRender:function(){var p=new e.Color(this.color);return p.getAlpha()<1||!!this.shadow},_resetShadow:function(){var p=this.canvas.contextTop;p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0},_isOutSideCanvas:function(p){return p.x<0||p.x>this.canvas.getWidth()||p.y<0||p.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(p){this.canvas=p,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(p,i,d){var c=i.midPointFrom(d);return p.quadraticCurveTo(i.x,i.y,c.x,c.y),c},onMouseDown:function(p,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(p))},onMouseMove:function(p,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p))&&this._captureDrawingPath(p)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var d=this._points,c=d.length,n=this.canvas.contextTop;this._saveAndTransform(n),n.beginPath(),this.oldEnd&&n.moveTo(this.oldEnd.x,this.oldEnd.y),this.oldEnd=this._drawSegment(n,d[c-2],d[c-1],!0),n.stroke(),n.restore()}},onMouseUp:function(p){return this.canvas._isMainEvent(p.e)?(this.finish(),!1):!0},finish:function(){this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath()},_prepareForDrawing:function(p){var i=new e.Point(p.x,p.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(p){return this._points.length>1&&p.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(p),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(p){var i=new e.Point(p.x,p.y);return this._addPoint(i)},_render:function(p){var i,d,c=this._points[0],n=this._points[1];if(p=p||this.canvas.contextTop,this._saveAndTransform(p),p.beginPath(),this._points.length===2&&c.x===n.x&&c.y===n.y){var a=this.width/1e3;c=new e.Point(c.x,c.y),n=new e.Point(n.x,n.y),c.x-=a,n.x+=a}for(p.moveTo(c.x,c.y),i=1,d=this._points.length;i<d;i++)this._drawSegment(p,c,n),c=this._points[i],n=this._points[i+1];p.lineTo(c.x,c.y),p.stroke(),p.restore()},convertPointsToSVGPath:function(p){var i=this.width/1e3;return e.util.getSmoothPathFromPoints(p,i)},_isEmptySVGPath:function(p){var i=e.util.joinPath(p);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(p){var i=new e.Path(p,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new e.Shadow(this.shadow)),i},decimatePoints:function(p,i){if(p.length<=2)return p;var d=this.canvas.getZoom(),c=Math.pow(i/d,2),n,a=p.length-1,s=p[0],l=[s],g;for(n=1;n<a-1;n++)g=Math.pow(s.x-p[n].x,2)+Math.pow(s.y-p[n].y,2),g>=c&&(s=p[n],l.push(s));return l.push(p[a]),l},_finalizeAndAddPath:function(){var p=this.canvas.contextTop;if(p.closePath(),this._points.length<2){this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this._resetShadow();return}this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var d=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.requestRenderAll(),d.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:d})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(p){this.canvas=p,this.points=[]},drawDot:function(p){var i=this.addPoint(p),d=this.canvas.contextTop;this._saveAndTransform(d),this.dot(d,i),d.restore()},dot:function(p,i){p.fillStyle=i.fill,p.beginPath(),p.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),p.closePath(),p.fill()},onMouseDown:function(p){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(p)},_render:function(){var p=this.canvas.contextTop,i,d,c=this.points;for(this._saveAndTransform(p),i=0,d=c.length;i<d;i++)this.dot(p,c[i]);p.restore()},onMouseMove:function(p){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(p),this._render()):this.drawDot(p))},onMouseUp:function(){var p=this.canvas.renderOnAddRemove,i,d;this.canvas.renderOnAddRemove=!1;var c=[];for(i=0,d=this.points.length;i<d;i++){var n=this.points[i],a=new e.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(a.shadow=new e.Shadow(this.shadow)),c.push(a)}var s=new e.Group(c);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},addPoint:function(p){var i=new e.Point(p.x,p.y),d=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return i.radius=d,i.fill=c,this.points.push(i),i}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(p){this.canvas=p,this.sprayChunks=[]},onMouseDown:function(p){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(p),this.render(this.sprayChunkPoints)},onMouseMove:function(p){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p)||(this.addSprayChunk(p),this.render(this.sprayChunkPoints))},onMouseUp:function(){var p=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],d=0,c=this.sprayChunks.length;d<c;d++)for(var n=this.sprayChunks[d],a=0,s=n.length;a<s;a++){var l=new e.Rect({width:n[a].width,height:n[a].width,left:n[a].x+1,top:n[a].y+1,originX:"center",originY:"center",fill:this.color});i.push(l)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var g=new e.Group(i);this.shadow&&g.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},_getOptimizedRects:function(p){var i={},d,c,n;for(c=0,n=p.length;c<n;c++)d=p[c].left+""+p[c].top,i[d]||(i[d]=p[c]);var a=[];for(d in i)a.push(i[d]);return a},render:function(p){var i=this.canvas.contextTop,d,c;for(i.fillStyle=this.color,this._saveAndTransform(i),d=0,c=p.length;d<c;d++){var n=p[d];typeof n.opacity<"u"&&(i.globalAlpha=n.opacity),i.fillRect(n.x,n.y,n.width,n.width)}i.restore()},_render:function(){var p=this.canvas.contextTop,i,d;for(p.fillStyle=this.color,this._saveAndTransform(p),i=0,d=this.sprayChunks.length;i<d;i++)this.render(this.sprayChunks[i]);p.restore()},addSprayChunk:function(p){this.sprayChunkPoints=[];var i,d,c,n=this.width/2,a;for(a=0;a<this.density;a++){i=e.util.getRandomInt(p.x-n,p.x+n),d=e.util.getRandomInt(p.y-n,p.y+n),this.dotWidthVariance?c=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var s=new e.Point(i,d);s.width=c,this.randomOpacity&&(s.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var p=20,i=5,d=e.util.createCanvasElement(),c=d.getContext("2d");return d.width=d.height=p+i,c.fillStyle=this.color,c.beginPath(),c.arc(p/2,p/2,p/2,0,Math.PI*2,!1),c.closePath(),c.fill(),d},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(p){return p.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(p){this.callSuper("_setBrushStyles",p),p.strokeStyle=this.getPattern(p)},createPath:function(p){var i=this.callSuper("createPath",p),d=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-d.x,offsetY:-d.y}),i}}),function(){var p=e.util.getPointer,i=e.util.degreesToRadians,d=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(n,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),a,s,l;if(n.length>0&&!this.preserveObjectStacking){s=[],l=[];for(var g=0,u=this._objects.length;g<u;g++)a=this._objects[g],n.indexOf(a)===-1?s.push(a):l.push(a);n.length>1&&(this._activeObject._objects=l),s.push.apply(s,l)}else s=this._objects;return s},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,a){var s=n.calcTransformMatrix(),l=e.util.invertTransform(s),g=this.restorePointerVpt(a);return e.util.transformPoint(g,l)},isTargetTransparent:function(n,a,s){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var l=this._normalizePointer(n,{x:a,y:s}),g=Math.max(n.cacheTranslationX+l.x*n.zoomX,0),u=Math.max(n.cacheTranslationY+l.y*n.zoomY,0),x=e.util.isTransparent(n._cacheContext,Math.round(g),Math.round(u),this.targetFindTolerance);return x}var m=this.contextCache,y=n.selectionBackgroundColor,b=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),n.render(m),m.restore(),n.selectionBackgroundColor=y;var x=e.util.isTransparent(m,a,s,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(n){var a=!1;return Array.isArray(this.selectionKey)?a=!!this.selectionKey.find(function(s){return n[s]===!0}):a=n[this.selectionKey],a},_shouldClearSelection:function(n,a){var s=this.getActiveObjects(),l=this._activeObject;return!a||a&&l&&s.length>1&&s.indexOf(a)===-1&&l!==a&&!this._isSelectionKeyPressed(n)||a&&!a.evented||a&&!a.selectable&&l&&l!==a},_shouldCenterTransform:function(n,a,s){if(n){var l;return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?l=this.centeredScaling||n.centeredScaling:a==="rotate"&&(l=this.centeredRotation||n.centeredRotation),l?!s:s}},_getOriginFromCorner:function(n,a){var s={x:n.originX,y:n.originY};return a==="ml"||a==="tl"||a==="bl"?s.x="right":(a==="mr"||a==="tr"||a==="br")&&(s.x="left"),a==="tl"||a==="mt"||a==="tr"?s.y="bottom":(a==="bl"||a==="mb"||a==="br")&&(s.y="top"),s},_getActionFromCorner:function(n,a,s,l){if(!a||!n)return"drag";var g=l.controls[a];return g.getActionName(s,g,l)},_setupCurrentTransform:function(n,a,s){if(a){var l=this.getPointer(n),g=a.__corner,u=a.controls[g],m=s&&g?u.getActionHandler(n,a,u):e.controlsUtils.dragHandler,y=this._getActionFromCorner(s,g,n,a),b=this._getOriginFromCorner(a,g),x=n[this.centeredKey],T={target:a,action:y,actionHandler:m,corner:g,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:l.x-a.left,offsetY:l.y-a.top,originX:b.x,originY:b.y,ex:l.x,ey:l.y,lastX:l.x,lastY:l.y,theta:i(a.angle),width:a.width*a.scaleX,shiftKey:n.shiftKey,altKey:x,original:e.util.saveObjectTransform(a)};this._shouldCenterTransform(a,y,x)&&(T.originX="center",T.originY="center"),T.original.originX=b.x,T.original.originY=b.y,this._currentTransform=T,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var a=this._groupSelector,s=new e.Point(a.ex,a.ey),l=e.util.transformPoint(s,this.viewportTransform),g=new e.Point(a.ex+a.left,a.ey+a.top),u=e.util.transformPoint(g,this.viewportTransform),m=Math.min(l.x,u.x),y=Math.min(l.y,u.y),b=Math.max(l.x,u.x),x=Math.max(l.y,u.y),T=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(m,y,b-m,x-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,m+=T,y+=T,b-=T,x-=T,e.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(m,y,b-m,x-y))},findTarget:function(n,a){if(!this.skipTargetFind){var s=!0,l=this.getPointer(n,s),g=this._activeObject,u=this.getActiveObjects(),m,y,b=d(n),x=u.length>1&&!a||u.length===1;if(this.targets=[],x&&g._findTargetCorner(l,b)||u.length>1&&!a&&g===this._searchPossibleTargets([g],l))return g;if(u.length===1&&g===this._searchPossibleTargets([g],l))if(this.preserveObjectStacking)m=g,y=this.targets,this.targets=[];else return g;var T=this._searchPossibleTargets(this._objects,l);return n[this.altSelectionKey]&&T&&m&&T!==m&&(T=m,this.targets=y),T}},_checkTarget:function(n,a,s){if(a&&a.visible&&a.evented&&a.containsPoint(n))if((this.perPixelTargetFind||a.perPixelTargetFind)&&!a.isEditing){var l=this.isTargetTransparent(a,s.x,s.y);if(!l)return!0}else return!0},_searchPossibleTargets:function(n,a){for(var s,l=n.length,g;l--;){var u=n[l],m=u.group?this._normalizePointer(u.group,a):a;if(this._checkTarget(m,u,a)){s=n[l],s.subTargetCheck&&s instanceof e.Group&&(g=this._searchPossibleTargets(s._objects,a),g&&this.targets.push(g));break}}return s},restorePointerVpt:function(n){return e.util.transformPoint(n,e.util.invertTransform(this.viewportTransform))},getPointer:function(n,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var s=p(n),l=this.upperCanvasEl,g=l.getBoundingClientRect(),u=g.width||0,m=g.height||0,y;(!u||!m)&&("top"in g&&"bottom"in g&&(m=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(u=Math.abs(g.right-g.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,a||(s=this.restorePointerVpt(s));var b=this.getRetinaScaling();return b!==1&&(s.x/=b,s.y/=b),u===0||m===0?y={width:1,height:1}:y={width:l.width/u,height:l.height/m},{x:s.x*y.width,y:s.y*y.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),e.util.addClass(s,"upper-canvas "+n),this.wrapperEl.appendChild(s),this._copyCanvasStyle(a,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var a=this.width||n.width,s=this.height||n.height;e.util.setStyle(n,{position:"absolute",width:a+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=a,n.height=s,e.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,a){a.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,a){var s=!1,l=this.getActiveObjects(),g=[],u=[];n.forEach(function(m){l.indexOf(m)===-1&&(s=!0,m.fire("deselected",{e:a,target:m}),u.push(m))}),l.forEach(function(m){n.indexOf(m)===-1&&(s=!0,m.fire("selected",{e:a,target:m}),g.push(m))}),n.length>0&&l.length>0?s&&this.fire("selection:updated",{e:a,selected:g,deselected:u}):l.length>0?this.fire("selection:created",{e:a,selected:g}):n.length>0&&this.fire("selection:cleared",{e:a,deselected:u})},setActiveObject:function(n,a){var s=this.getActiveObjects();return this._setActiveObject(n,a),this._fireSelectionEvents(s,a),this},_setActiveObject:function(n,a){return this._activeObject===n||!this._discardActiveObject(a,n)||n.onSelect({e:a})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,a){var s=this._activeObject;if(s){if(s.onDeselect({e:n,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var a=this.getActiveObjects(),s=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:s,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(a,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.upperCanvasEl.width=0,this.upperCanvasEl.height=0,this.cacheCanvasEl&&(this.cacheCanvasEl.width=0,this.cacheCanvasEl.height=0),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var a=this._activeObject;a&&a._renderControls(n)},_toObject:function(n,a,s){var l=this._realizeGroupTransformOnObject(n),g=this.callSuper("_toObject",n,a,s);return this._unwindGroupTransformOnObject(n,l),g},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var a=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],s={};return a.forEach(function(l){s[l]=n[l]}),e.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),s}else return null},_unwindGroupTransformOnObject:function(n,a){a&&n.set(a)},_setSVGObject:function(n,a,s){var l=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",n,a,s),this._unwindGroupTransformOnObject(a,l)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var c in e.StaticCanvas)c!=="prototype"&&(e.Canvas[c]=e.StaticCanvas[c])}(),function(){var p=e.util.addListener,i=e.util.removeListener,d=3,c=2,n=1,a={passive:!1};function s(l,g){return l.button&&l.button===g-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(p,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(l,g){var u=this.upperCanvasEl,m=this._getEventPrefix();l(e.window,"resize",this._onResize),l(u,m+"down",this._onMouseDown),l(u,m+"move",this._onMouseMove,a),l(u,m+"out",this._onMouseOut),l(u,m+"enter",this._onMouseEnter),l(u,"wheel",this._onMouseWheel),l(u,"contextmenu",this._onContextMenu),l(u,"dblclick",this._onDoubleClick),l(u,"dragover",this._onDragOver),l(u,"dragenter",this._onDragEnter),l(u,"dragleave",this._onDragLeave),l(u,"drop",this._onDrop),this.enablePointerEvents||l(u,"touchstart",this._onTouchStart,a),typeof v<"u"&&g in v&&(v[g](u,"gesture",this._onGesture),v[g](u,"drag",this._onDrag),v[g](u,"orientation",this._onOrientationChange),v[g](u,"shake",this._onShake),v[g](u,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var l=this._getEventPrefix();i(e.document,l+"up",this._onMouseUp),i(e.document,"touchend",this._onTouchEnd,a),i(e.document,l+"move",this._onMouseMove,a),i(e.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(l,g){this.__onTransformGesture&&this.__onTransformGesture(l,g)},_onDrag:function(l,g){this.__onDrag&&this.__onDrag(l,g)},_onMouseWheel:function(l){this.__onMouseWheel(l)},_onMouseOut:function(l){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:l}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:l});var u=this;this._hoveredTargets.forEach(function(m){u.fire("mouse:out",{target:g,e:l}),m&&g.fire("mouseout",{e:l})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(m){m.isEditing&&m.hiddenTextarea.focus()})},_onMouseEnter:function(l){!this._currentTransform&&!this.findTarget(l)&&(this.fire("mouse:over",{target:null,e:l}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(l,g){this.__onOrientationChange&&this.__onOrientationChange(l,g)},_onShake:function(l,g){this.__onShake&&this.__onShake(l,g)},_onLongPress:function(l,g){this.__onLongPress&&this.__onLongPress(l,g)},_onDragOver:function(l){l.preventDefault();var g=this._simpleEventHandler("dragover",l);this._fireEnterLeaveEvents(g,l)},_onDrop:function(l){return this._simpleEventHandler("drop:before",l),this._simpleEventHandler("drop",l)},_onContextMenu:function(l){return this.stopContextMenu&&(l.stopPropagation(),l.preventDefault()),!1},_onDoubleClick:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"dblclick"),this._resetTransformEventData(l)},getPointerId:function(l){var g=l.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?l.pointerId:-1},_isMainEvent:function(l){return l.isPrimary===!0?!0:l.isPrimary===!1?!1:l.type==="touchend"&&l.touches.length===0?!0:l.changedTouches?l.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(l){l.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(l)),this.__onMouseDown(l),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();p(e.document,"touchend",this._onTouchEnd,a),p(e.document,"touchmove",this._onMouseMove,a),i(g,u+"down",this._onMouseDown)},_onMouseDown:function(l){this.__onMouseDown(l),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();i(g,u+"move",this._onMouseMove,a),p(e.document,u+"up",this._onMouseUp),p(e.document,u+"move",this._onMouseMove,a)},_onTouchEnd:function(l){if(!(l.touches.length>0)){this.__onMouseUp(l),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();i(e.document,"touchend",this._onTouchEnd,a),i(e.document,"touchmove",this._onMouseMove,a);var u=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){p(u.upperCanvasEl,g+"down",u._onMouseDown),u._willAddMouseDown=0},400)}},_onMouseUp:function(l){this.__onMouseUp(l),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();this._isMainEvent(l)&&(i(e.document,u+"up",this._onMouseUp),i(e.document,u+"move",this._onMouseMove,a),p(g,u+"move",this._onMouseMove,a))},_onMouseMove:function(l){!this.allowTouchScrolling&&l.preventDefault&&l.preventDefault(),this.__onMouseMove(l)},_onResize:function(){this.calcOffset()},_shouldRender:function(l){var g=this._activeObject;return!!g!=!!l||g&&l&&g!==l?!0:(g&&g.isEditing,!1)},__onMouseUp:function(l){var g,u=this._currentTransform,m=this._groupSelector,y=!1,b=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(l),g=this._target,this._handleEvent(l,"up:before"),s(l,d)){this.fireRightClick&&this._handleEvent(l,"up",d,b);return}if(s(l,c)){this.fireMiddleClick&&this._handleEvent(l,"up",c,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(l);return}if(this._isMainEvent(l)){if(u&&(this._finalizeCurrentTransform(l),y=u.actionPerformed),!b){var x=g===this._activeObject;this._maybeGroupObjects(l),y||(y=this._shouldRender(g)||!x&&g===this._activeObject)}var T,M;if(g){if(T=g._findTargetCorner(this.getPointer(l,!0),e.util.isTouchEvent(l)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,l),y=!0;else{var I=g.controls[T],R=I&&I.getMouseUpHandler(l,g,I);R&&(M=this.getPointer(l),R(l,u,M.x,M.y))}g.isMoving=!1}if(u&&(u.target!==g||u.corner!==T)){var W=u.target&&u.target.controls[u.corner],K=W&&W.getMouseUpHandler(l,g,I);M=M||this.getPointer(l),K&&K(l,u,M.x,M.y)}this._setCursorFromEvent(l,g),this._handleEvent(l,"up",n,b),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),y?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(l,g){var u=this.findTarget(g),m=this.targets,y={e:g,target:u,subTargets:m};if(this.fire(l,y),u&&u.fire(l,y),!m)return u;for(var b=0;b<m.length;b++)m[b].fire(l,y);return u},_handleEvent:function(l,g,u,m){var y=this._target,b=this.targets||[],x={e:l,target:y,subTargets:b,button:u||n,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(x.currentTarget=this.findTarget(l),x.currentSubTargets=this.targets),this.fire("mouse:"+g,x),y&&y.fire("mouse"+g,x);for(var T=0;T<b.length;T++)b[T].fire("mouse"+g,x)},_finalizeCurrentTransform:function(l){var g=this._currentTransform,u=g.target,m={e:l,target:u,transform:g,action:g.action};u._scaling&&(u._scaling=!1),u.setCoords(),(g.actionPerformed||this.stateful&&u.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(l){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(l).requestRenderAll();var g=this.getPointer(l);this.freeDrawingBrush.onMouseDown(g,{e:l,pointer:g}),this._handleEvent(l,"down")},_onMouseMoveInDrawingMode:function(l){if(this._isCurrentlyDrawing){var g=this.getPointer(l);this.freeDrawingBrush.onMouseMove(g,{e:l,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(l,"move")},_onMouseUpInDrawingMode:function(l){var g=this.getPointer(l);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:l,pointer:g}),this._handleEvent(l,"up")},_finishDrawing:function(){this.freeDrawingBrush.finish(),this._isCurrentlyDrawing=!1},__onMouseDown:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"down:before");var g=this._target;if(s(l,d)){this.fireRightClick&&this._handleEvent(l,"down",d);return}if(s(l,c)){this.fireMiddleClick&&this._handleEvent(l,"down",c);return}if(this.isDrawingMode)if(!this.usePencil||this._isStylus(l)){if(l.type==="touchstart"&&l.touches.length>1){this._isCurrentlyDrawing&&this._finishDrawing(l),this._handleEvent(l,"down");return}this._onMouseDownInDrawingMode(l);return}else{this._handleEvent(l,"down");return}if(this._isMainEvent(l)&&!this._currentTransform){var u=this._pointer;this._previousPointer=u;var m=this._shouldRender(g),y=this._shouldGroup(l,g);if(this._shouldClearSelection(l,g)?this.discardActiveObject(l):y&&(this._handleGrouping(l,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var b=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,l);var x=g._findTargetCorner(this.getPointer(l,!0),e.util.isTouchEvent(l));if(g.__corner=x,g===this._activeObject&&(x||!y)){this._setupCurrentTransform(l,g,b);var T=g.controls[x],u=this.getPointer(l),M=T&&T.getMouseDownHandler(l,g,T);M&&M(l,this._currentTransform,u.x,u.y)}}this._handleEvent(l,"down"),(m||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(l){this._resetTransformEventData(),this._pointer=this.getPointer(l,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(l)||null},_beforeTransform:function(l){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:l,transform:g})},_isStylus:function(l){if(!l.changedTouches)return!1;for(var g=0;g<l.changedTouches.length;g++){var u=l.changedTouches[g];if(u.touchType&&u.touchType==="stylus"||u.radiusX===0)return!0}return!1},__onMouseMove:function(l){this._handleEvent(l,"move:before"),this._cacheTransformEventData(l);var g,u;if(this.isDrawingMode)if(!this.usePencil||this._isStylus(l)){this._onMouseMoveInDrawingMode(l);return}else return;if(this._isMainEvent(l)){var m=this._groupSelector;m?(u=this._absolutePointer,m.left=u.x-m.ex,m.top=u.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(l):(g=this.findTarget(l)||null,this._setCursorFromEvent(l,g),this._fireOverOutEvents(g,l)),this._handleEvent(l,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(l,g){var u=this._hoveredTarget,m=this._hoveredTargets,y=this.targets,b=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(l,g,{oldTarget:u,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],g,{oldTarget:m[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(l,g){var u=this._draggedoverTarget,m=this._hoveredTargets,y=this.targets,b=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(l,g,{oldTarget:u,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],g,{oldTarget:m[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=l},fireSyntheticInOutEvents:function(l,g,u){var m,y,b=u.oldTarget,x,T,M=b!==l,I=u.canvasEvtIn,R=u.canvasEvtOut;M&&(m={e:g,target:l,previousTarget:b},y={e:g,target:b,nextTarget:l}),T=l&&M,x=b&&M,x&&(R&&this.fire(R,y),b.fire(u.evtOut,y)),T&&(I&&this.fire(I,m),l.fire(u.evtIn,m))},__onMouseWheel:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"wheel"),this._resetTransformEventData()},_transformObject:function(l){var g=this.getPointer(l),u=this._currentTransform;u.reset=!1,u.shiftKey=l.shiftKey,u.altKey=l[this.centeredKey],this._performTransformAction(l,u,g),u.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(l,g,u){var m=u.x,y=u.y,b=g.action,x=!1,T=g.actionHandler;T&&(x=T(l,g,m,y)),b==="drag"&&x&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||x},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(l,g){if(!g)return this.setCursor(this.defaultCursor),!1;var u=g.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!m||!m.contains(g))&&g._findTargetCorner(this.getPointer(l,!0));y?this.setCursor(this.getCornerCursor(y,g,l)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(b){u=b.hoverCursor||u}),this.setCursor(u))},getCornerCursor:function(l,g,u){var m=g.controls[l];return m.cursorStyleHandler(u,m,g)}})}(),function(){var p=Math.min,i=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(d,c){var n=this._activeObject;return n&&this._isSelectionKeyPressed(d)&&c&&c.selectable&&this.selection&&(n!==c||n.type==="activeSelection")&&!c.onSelect({e:d})},_handleGrouping:function(d,c){var n=this._activeObject;n.__corner||c===n&&(c=this.findTarget(d,!0),!c||!c.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(c,d):this._createActiveSelection(c,d))},_updateActiveSelection:function(d,c){var n=this._activeObject,a=n._objects.slice(0);n.contains(d)?(n.removeWithUpdate(d),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),c)):(n.addWithUpdate(d),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,c)},_createActiveSelection:function(d,c){var n=this.getActiveObjects(),a=this._createGroup(d);this._hoveredTarget=a,this._setActiveObject(a,c),this._fireSelectionEvents(n,c)},_createGroup:function(d){var c=this._objects,n=c.indexOf(this._activeObject)<c.indexOf(d),a=n?[this._activeObject,d]:[d,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(d){var c=this._collectObjects(d),n;c.length===1?this.setActiveObject(c[0],d):c.length>1&&(n=new e.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(n,d))},_collectObjects:function(d){for(var c=[],n,a=this._groupSelector.ex,s=this._groupSelector.ey,l=a+this._groupSelector.left,g=s+this._groupSelector.top,u=new e.Point(p(a,l),p(s,g)),m=new e.Point(i(a,l),i(s,g)),y=!this.selectionFullyContained,b=a===l&&s===g,x=this._objects.length;x--&&(n=this._objects[x],!(!(!n||!n.selectable||!n.visible)&&(y&&n.intersectsWithRect(u,m,!0)||n.isContainedWithinRect(u,m,!0)||y&&n.containsPoint(u,null,!0)||y&&n.containsPoint(m,null,!0))&&(c.push(n),b))););return c.length>1&&(c=c.filter(function(T){return!T.onSelect({e:d})})),c},_maybeGroupObjects:function(d){this.selection&&this._groupSelector&&this._groupSelectedObjects(d),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(p){p||(p={});var i=p.format||"png",d=p.quality||1,c=(p.multiplier||1)*(p.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(c,p),a=e.util.toDataURL(n,i,d);return n.width=0,n.height=0,a},toBlob:function(p,i){i||(i={});var d=(i.multiplier||1)*(i.enableRetinaScaling?this.getRetinaScaling():1),c=this.toCanvasElement(d,i);c.toBlob(function(n){p(n),c.width=0,c.height=0})},toCanvasElement:function(p,i){p=p||1,i=i||{};var d=(i.width||this.width)*p,c=(i.height||this.height)*p,n=this.getZoom(),a=this.width,s=this.height,l=n*p,g=this.viewportTransform,u=(g[4]-(i.left||0))*p,m=(g[5]-(i.top||0))*p,y=this.interactive,b=[l,0,0,l,u,m],x=this.enableRetinaScaling,T=e.util.createCanvasElement(),M=this.contextTop;return T.width=d,T.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=d,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=g,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=x,this.contextTop=M,T}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(p,i,d){if(p){var c=typeof p=="string"?JSON.parse(p):e.util.object.clone(p),n=this,a=c.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(l){n.clear(),n._setBgOverlay(c,function(){a?n._enlivenObjects([a],function(g){n.clipPath=g[0],n.__setupCanvas.call(n,c,l,s,i)}):n.__setupCanvas.call(n,c,l,s,i)})},d),this}},__setupCanvas:function(p,i,d,c){var n=this;i.forEach(function(a,s){n.insertAt(a,s)}),this.renderOnAddRemove=d,delete p.objects,delete p.backgroundImage,delete p.overlayImage,delete p.background,delete p.overlay,this._setOptions(p),this.renderAll(),c&&c()},_setBgOverlay:function(p,i){var d={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!p.backgroundImage&&!p.overlayImage&&!p.background&&!p.overlay){i&&i();return}var c=function(){d.backgroundImage&&d.overlayImage&&d.backgroundColor&&d.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",p.backgroundImage,d,c),this.__setBgOverlay("overlayImage",p.overlayImage,d,c),this.__setBgOverlay("backgroundColor",p.background,d,c),this.__setBgOverlay("overlayColor",p.overlay,d,c)},__setBgOverlay:function(p,i,d,c){var n=this;if(!i){d[p]=!0,c&&c();return}p==="backgroundImage"||p==="overlayImage"?e.util.enlivenObjects([i],function(a){n[p]=a[0],d[p]=!0,c&&c()}):this["set"+e.util.string.capitalize(p,!0)](i,function(){d[p]=!0,c&&c()})},_enlivenObjects:function(p,i,d){if(!p||p.length===0){i&&i([]);return}e.util.enlivenObjects(p,function(c){i&&i(c)},null,d)},_toDataURL:function(p,i){this.clone(function(d){i(d.toDataURL(p))})},_toDataURLWithMultiplier:function(p,i,d){this.clone(function(c){d(c.toDataURLWithMultiplier(p,i))})},clone:function(p,i){var d=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(c){c.loadFromJSON(d,function(){p&&p(c)})})},cloneWithoutData:function(p){var i=e.util.createCanvasElement();i.width=this.width,i.height=this.height;var d=new e.Canvas(i);this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll(),p&&p(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):p&&p(d)}}),function(){var p=e.util.degreesToRadians,i=e.util.radiansToDegrees;e.util.object.extend(e.Canvas.prototype,{__onTransformGesture:function(d,c){if(!(!d.touches||d.touches.length!==2||c.gesture!=="gesture")){var n=this.findTarget(d);typeof n<"u"&&(this.__gesturesParams={e:d,self:c,target:n},this.__gesturesRenderer()),this.fire("touch:gesture",{target:n,e:d,self:c})}},__gesturesParams:null,__gesturesRenderer:function(){if(!(this.__gesturesParams===null||this._currentTransform===null)){var d=this.__gesturesParams.self,c=this._currentTransform,n=this.__gesturesParams.e;c.action="scale",c.originX=c.originY="center",this._scaleObjectBy(d.scale,n),d.rotation!==0&&(c.action="rotate",this._rotateObjectByAngle(d.rotation,n)),this.requestRenderAll(),c.action="drag"}},__onDrag:function(d,c){this.fire("touch:drag",{e:d,self:c})},__onOrientationChange:function(d,c){this.fire("touch:orientation",{e:d,self:c})},__onShake:function(d,c){this.fire("touch:shake",{e:d,self:c})},__onLongPress:function(d,c){this.fire("touch:longpress",{e:d,self:c})},_scaleObjectBy:function(d,c){var n=this._currentTransform,a=n.target;return n.gestureScale=d,a._scaling=!0,e.controlsUtils.scalingEqually(c,n,0,0)},_rotateObjectByAngle:function(d,c){var n=this._currentTransform;n.target.get("lockRotation")||(n.target.rotate(i(p(d)+n.theta)),this._fire("rotating",{target:n.target,e:c,transform:n}))}})}(),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.util.object.clone,n=i.util.toFixed,a=i.util.string.capitalize,s=i.util.degreesToRadians,l=!i.isLikelyNode,g=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(u){u&&this.setOptions(u)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(u){var m=i.perfLimitSizeTotal,y=u.width,b=u.height,x=i.maxCacheSideLimit,T=i.minCacheSideLimit;if(y<=x&&b<=x&&y*b<=m)return y<T&&(u.width=T),b<T&&(u.height=T),u;var M=y/b,I=i.util.limitDimsByArea(M,m),R=i.util.capValue,W=R(T,I.x,x),K=R(T,I.y,x);return y>W&&(u.zoomX/=y/W,u.width=W,u.capped=!0),b>K&&(u.zoomY/=b/K,u.height=K,u.capped=!0),u},_getCacheCanvasDimensions:function(){var u=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),y=m.x*u.scaleX/this.scaleX,b=m.y*u.scaleY/this.scaleY;return{width:y+g,height:b+g,zoomX:u.scaleX,zoomY:u.scaleY,x:y,y:b}},_updateCacheCanvas:function(){var u=this.canvas;if(this.noScaleCache&&u&&u._currentTransform){var m=u._currentTransform.target,y=u._currentTransform.action;if(this===m&&y.slice&&y.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),T=i.minCacheSideLimit,M=x.width,I=x.height,R,W,K=x.zoomX,$=x.zoomY,ae=M!==this.cacheWidth||I!==this.cacheHeight,ce=this.zoomX!==K||this.zoomY!==$,fe=ae||ce,le=0,ye=0,Ee=!1;if(ae){var ne=this._cacheCanvas.width,P=this._cacheCanvas.height,B=M>ne||I>P,F=(M<ne*.9||I<P*.9)&&ne>T&&P>T;Ee=B||F,B&&!x.capped&&(M>T||I>T)&&(le=M*.1,ye=I*.1)}return this instanceof i.Text&&this.path&&(fe=!0,Ee=!0,le+=this.getHeightOfLine(0)*this.zoomX,ye+=this.getHeightOfLine(0)*this.zoomY),fe?(Ee?(b.width=Math.ceil(M+le),b.height=Math.ceil(I+ye)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),R=x.x/2,W=x.y/2,this.cacheTranslationX=Math.round(b.width/2-R)+R,this.cacheTranslationY=Math.round(b.height/2-W)+W,this.cacheWidth=M,this.cacheHeight=I,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(K,$),this.zoomX=K,this.zoomY=$,!0):!1},setOptions:function(u){this._setOptions(u),this._initGradient(u.fill,"fill"),this._initGradient(u.stroke,"stroke"),this._initPattern(u.fill,"fill"),this._initPattern(u.stroke,"stroke")},transform:function(u){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&u===this.canvas.contextTop,y=this.calcTransformMatrix(!m);u.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(u){var m=i.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:n(this.left,m),top:n(this.top,m),width:n(this.width,m),height:n(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,m),scaleX:n(this.scaleX,m),scaleY:n(this.scaleY,m),angle:n(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,m),skewY:n(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(u),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,y,u),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(u){return this.toObject(u)},_removeDefaultValues:function(u){var m=i.util.getKlass(u.type).prototype,y=m.stateProperties;return y.forEach(function(b){b==="left"||b==="top"||(u[b]===m[b]&&delete u[b],Array.isArray(u[b])&&Array.isArray(m[b])&&u[b].length===0&&m[b].length===0&&delete u[b])}),u},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var u=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(u.scaleX),scaleY:Math.abs(u.scaleY)}},getTotalObjectScaling:function(){var u=this.getObjectScaling(),m=u.scaleX,y=u.scaleY;if(this.canvas){var b=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();m*=b*x,y*=b*x}return{scaleX:m,scaleY:y}},getObjectOpacity:function(){var u=this.opacity;return this.group&&(u*=this.group.getObjectOpacity()),u},_set:function(u,m){var y=u==="scaleX"||u==="scaleY",b=this[u]!==m,x=!1;return y&&(m=this._constrainScale(m)),u==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):u==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):u==="shadow"&&m&&!(m instanceof i.Shadow)?m=new i.Shadow(m):u==="dirty"&&this.group&&this.group.set("dirty",m),this[u]=m,b&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(u)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(u)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(u){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(u.save(),this._setupCompositeOperation(u),this.drawSelectionBackground(u),this.transform(u),this._setOpacity(u),this._setShadow(u,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(u)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(u),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),u.restore())},renderCache:function(u){u=u||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,u.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(u,m){if(u.save(),m.inverted?u.globalCompositeOperation="destination-out":u.globalCompositeOperation="destination-in",m.absolutePositioned){var y=i.util.invertTransform(this.calcTransformMatrix());u.transform(y[0],y[1],y[2],y[3],y[4],y[5])}m.transform(u),u.scale(1/m.zoomX,1/m.zoomY),u.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),u.restore()},drawObject:function(u,m){var y=this.fill,b=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(u)):this._renderBackground(u),this._render(u),this._drawClipPath(u,this.clipPath),this.fill=y,this.stroke=b},_drawClipPath:function(u,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(u,m))},drawCacheOnCanvas:function(u){u.scale(1/this.zoomX,1/this.zoomY),u.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(u){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!u&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!u){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_renderBackground:function(u){if(this.backgroundColor){var m=this._getNonTransformedDimensions();u.fillStyle=this.backgroundColor,u.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(u)}},_setOpacity:function(u){this.group&&!this.group._transformDone?u.globalAlpha=this.getObjectOpacity():u.globalAlpha*=this.opacity},_setStrokeStyles:function(u,m){var y=m.stroke;y&&(u.lineWidth=m.strokeWidth,u.lineCap=m.strokeLineCap,u.lineDashOffset=m.strokeDashOffset,u.lineJoin=m.strokeLineJoin,u.miterLimit=m.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(u,y):(u.strokeStyle=y.toLive(u,this),this._applyPatternGradientTransform(u,y)):u.strokeStyle=m.stroke)},_setFillStyles:function(u,m){var y=m.fill;y&&(y.toLive?(u.fillStyle=y.toLive(u,this),this._applyPatternGradientTransform(u,m.fill)):u.fillStyle=y)},_setClippingProperties:function(u){u.globalAlpha=1,u.strokeStyle="transparent",u.fillStyle="#000000"},_setLineDash:function(u,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),u.setLineDash(m))},_renderControls:function(u,m){var y=this.getViewportTransform(),b=this.calcTransformMatrix(),x,T,M;m=m||{},T=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,M=typeof m.hasControls<"u"?m.hasControls:this.hasControls,b=i.util.multiplyTransformMatrices(y,b),x=i.util.qrDecompose(b),u.save(),u.translate(x.translateX,x.translateY),u.lineWidth=1*this.borderScaleFactor,this.group||(u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),u.rotate(s(this.group?x.angle:this.angle)),m.forActiveSelection||this.group?T&&this.drawBordersInGroup(u,x,m):T&&this.drawBorders(u,m),M&&this.drawControls(u,m),u.restore()},_setShadow:function(u){if(this.shadow){var m=this.shadow,y=this.canvas,b,x=y&&y.viewportTransform[0]||1,T=y&&y.viewportTransform[3]||1;m.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),y&&y._isRetinaScaling()&&(x*=i.devicePixelRatio,T*=i.devicePixelRatio),u.shadowColor=m.color,u.shadowBlur=m.blur*i.browserShadowBlurConstant*(x+T)*(b.scaleX+b.scaleY)/4,u.shadowOffsetX=m.offsetX*x*b.scaleX,u.shadowOffsetY=m.offsetY*T*b.scaleY}},_removeShadow:function(u){this.shadow&&(u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0)},_applyPatternGradientTransform:function(u,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var y=m.gradientTransform||m.patternTransform,b=-this.width/2+m.offsetX||0,x=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?u.transform(this.width,0,0,this.height,b,x):u.transform(1,0,0,1,b,x),y&&u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:b,offsetY:x}},_renderPaintInOrder:function(u){this.paintFirst==="stroke"?(this._renderStroke(u),this._renderFill(u)):(this._renderFill(u),this._renderStroke(u))},_render:function(){},_renderFill:function(u){this.fill&&(u.save(),this._setFillStyles(u,this),this.fillRule==="evenodd"?u.fill("evenodd"):u.fill(),u.restore())},_renderStroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(u),u.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();u.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&u.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(u,this.strokeDashArray),this._setStrokeStyles(u,this),u.stroke(),u.restore()}},_applyPatternForTransformedGradient:function(u,m){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),b=i.util.createCanvasElement(),x,T=this.canvas.getRetinaScaling(),M=y.x/this.scaleX/T,I=y.y/this.scaleY/T;b.width=M,b.height=I,x=b.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(M,0),x.lineTo(M,I),x.lineTo(0,I),x.closePath(),x.translate(M/2,I/2),x.scale(y.zoomX/this.scaleX/T,y.zoomY/this.scaleY/T),this._applyPatternGradientTransform(x,m),x.fillStyle=m.toLive(u),x.fill(),u.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),u.scale(T*this.scaleX/y.zoomX,T*this.scaleY/y.zoomY),u.strokeStyle=x.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var u=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",u.scaleX),this.set("scaleY",u.scaleY),this.angle=u.angle,this.skewX=u.skewX,this.skewY=0}},_removeTransformMatrix:function(u){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=i.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,u&&(this.scaleX*=u.scaleX,this.scaleY*=u.scaleY,this.cropX=u.cropX,this.cropY=u.cropY,m.x+=u.offsetLeft,m.y+=u.offsetTop,this.width=u.width,this.height=u.height),this.setPositionByOrigin(m,"center","center")},clone:function(u,m){var y=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(y,u):i.Object._fromObject("Object",y,u)},cloneAsImage:function(u,m){var y=this.toCanvasElement(m);return u&&u(new i.Image(y)),this},toCanvasElement:function(u){u||(u={});var m=i.util,y=m.saveObjectTransform(this),b=this.group,x=this.shadow,T=Math.abs,M=(u.multiplier||1)*(u.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,u.withoutTransform&&m.resetObjectTransform(this),u.withoutShadow&&(this.shadow=null);var I=i.util.createCanvasElement(),R=this.getBoundingRect(!0,!0),W=this.shadow,K,$={x:0,y:0},ae,ce,fe;W&&(ae=W.blur,W.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),$.x=2*Math.round(T(W.offsetX)+ae)*T(K.scaleX),$.y=2*Math.round(T(W.offsetY)+ae)*T(K.scaleY)),ce=R.width+$.x,fe=R.height+$.y,I.width=Math.ceil(ce),I.height=Math.ceil(fe);var le=new i.StaticCanvas(I,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});u.format==="jpeg"&&(le.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(le.width/2,le.height/2),"center","center");var ye=this.canvas;le.add(this);var Ee=le.toCanvasElement(M||1,u);return this.shadow=x,this.set("canvas",ye),b&&(this.group=b),this.set(y).setCoords(),le._objects=[],le.dispose(),le=null,Ee},toDataURL:function(u){return u||(u={}),i.util.toDataURL(this.toCanvasElement(u),u.format||"png",u.quality||1)},isType:function(u){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===u},complexity:function(){return 1},toJSON:function(u){return this.toObject(u)},rotate:function(u){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",u),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(u,m){m=m||this.canvas.getPointer(u);var y=new i.Point(m.x,m.y),b=this._getLeftTopCoords();return this.angle&&(y=i.util.rotatePoint(y,b,s(-this.angle))),{x:y.x-b.x,y:y.y-b.y}},_setupCompositeOperation:function(u){this.globalCompositeOperation&&(u.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),d(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(u,m,y,b){var x=i[u];m=c(m,!0),i.util.enlivenPatterns([m.fill,m.stroke],function(T){typeof T[0]<"u"&&(m.fill=T[0]),typeof T[1]<"u"&&(m.stroke=T[1]),i.util.enlivenObjectEnlivables(m,m,function(){var M=b?new x(m[b],m):new x(m);y&&y(M)})})},i.Object.__uid=0)}(t),function(){var p=e.util.degreesToRadians,i={left:-.5,center:0,right:.5},d={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(c,n,a,s,l){var g=c.x,u=c.y,m,y,b;return typeof n=="string"?n=i[n]:n-=.5,typeof s=="string"?s=i[s]:s-=.5,m=s-n,typeof a=="string"?a=d[a]:a-=.5,typeof l=="string"?l=d[l]:l-=.5,y=l-a,(m||y)&&(b=this._getTransformedDimensions(),g=c.x+m*b.x,u=c.y+y*b.y),new e.Point(g,u)},translateToCenterPoint:function(c,n,a){var s=this.translateToGivenOrigin(c,n,a,"center","center");return this.angle?e.util.rotatePoint(s,c,p(this.angle)):s},translateToOriginPoint:function(c,n,a){var s=this.translateToGivenOrigin(c,"center","center",n,a);return this.angle?e.util.rotatePoint(s,c,p(this.angle)):s},getCenterPoint:function(){var c=new e.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,n){var a=this.getCenterPoint();return this.translateToOriginPoint(a,c,n)},toLocalPoint:function(c,n,a){var s=this.getCenterPoint(),l,g;return typeof n<"u"&&typeof a<"u"?l=this.translateToGivenOrigin(s,"center","center",n,a):l=new e.Point(this.left,this.top),g=new e.Point(c.x,c.y),this.angle&&(g=e.util.rotatePoint(g,s,-p(this.angle))),g.subtractEquals(l)},setPositionByOrigin:function(c,n,a){var s=this.translateToCenterPoint(c,n,a),l=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",l.x),this.set("top",l.y)},adjustPosition:function(c){var n=p(this.angle),a=this.getScaledWidth(),s=e.util.cos(n)*a,l=e.util.sin(n)*a,g,u;typeof this.originX=="string"?g=i[this.originX]:g=this.originX-.5,typeof c=="string"?u=i[c]:u=c-.5,this.left+=s*(u-g),this.top+=l*(u-g),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function p(a){return[new e.Point(a.tl.x,a.tl.y),new e.Point(a.tr.x,a.tr.y),new e.Point(a.br.x,a.br.y),new e.Point(a.bl.x,a.bl.y)]}var i=e.util,d=i.degreesToRadians,c=i.multiplyTransformMatrices,n=i.transformPoint;i.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,s){return s?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,s){return p(this._getCoords(a,s))},intersectsWithRect:function(a,s,l,g){var u=this.getCoords(l,g),m=e.Intersection.intersectPolygonRectangle(u,a,s);return m.status==="Intersection"},intersectsWithObject:function(a,s,l){var g=e.Intersection.intersectPolygonPolygon(this.getCoords(s,l),a.getCoords(s,l));return g.status==="Intersection"||a.isContainedWithinObject(this,s,l)||this.isContainedWithinObject(a,s,l)},isContainedWithinObject:function(a,s,l){for(var g=this.getCoords(s,l),u=s?a.aCoords:a.lineCoords,m=0,y=a._getImageLines(u);m<4;m++)if(!a.containsPoint(g[m],y))return!1;return!0},isContainedWithinRect:function(a,s,l,g){var u=this.getBoundingRect(l,g);return u.left>=a.x&&u.left+u.width<=s.x&&u.top>=a.y&&u.top+u.height<=s.y},containsPoint:function(a,m,l,g){var u=this._getCoords(l,g),m=m||this._getImageLines(u),y=this._findCrossPoints(a,m);return y!==0&&y%2===1},isOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,l=this.canvas.vptCoords.br,g=this.getCoords(!0,a);return g.some(function(u){return u.x<=l.x&&u.x>=s.x&&u.y<=l.y&&u.y>=s.y})||this.intersectsWithRect(s,l,!0,a)?!0:this._containsCenterOfCanvas(s,l,a)},_containsCenterOfCanvas:function(a,s,l){var g={x:(a.x+s.x)/2,y:(a.y+s.y)/2};return!!this.containsPoint(g,null,!0,l)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,l=this.canvas.vptCoords.br;if(this.intersectsWithRect(s,l,!0,a))return!0;var g=this.getCoords(!0,a).every(function(u){return(u.x>=l.x||u.x<=s.x)&&(u.y>=l.y||u.y<=s.y)});return g&&this._containsCenterOfCanvas(s,l,a)},_getImageLines:function(a){var s={topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}};return s},_findCrossPoints:function(a,s){var l,g,u,m,y,b=0,x;for(var T in s)if(x=s[T],!(x.o.y<a.y&&x.d.y<a.y)&&!(x.o.y>=a.y&&x.d.y>=a.y)&&(x.o.x===x.d.x&&x.o.x>=a.x?y=x.o.x:(l=0,g=(x.d.y-x.o.y)/(x.d.x-x.o.x),u=a.y-l*a.x,m=x.o.y-g*x.o.x,y=-(u-m)/(l-g)),y>=a.x&&(b+=1),b===2))break;return b},getBoundingRect:function(a,s){var l=this.getCoords(a,s);return i.makeBoundingBoxFromPoints(l)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,s){var l=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(a/this.width/l)},scaleToHeight:function(a,s){var l=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(a/this.height/l)},calcLineCoords:function(){var a=this.getViewportTransform(),s=this.padding,l=d(this.angle),g=i.cos(l),u=i.sin(l),m=g*s,y=u*s,b=m+y,x=m-y,T=this.calcACoords(),M={tl:n(T.tl,a),tr:n(T.tr,a),bl:n(T.bl,a),br:n(T.br,a)};return s&&(M.tl.x-=x,M.tl.y-=b,M.tr.x+=b,M.tr.y-=x,M.bl.x-=b,M.bl.y+=x,M.br.x+=x,M.br.y+=b),M},calcOCoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),l=this.getViewportTransform(),g=c(l,s),u=c(g,a),u=c(u,[1/l[0],0,0,1/l[3],0,0]),m=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(b,x,T){y[x]=b.positionHandler(m,u,T)}),y},calcACoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),l=c(s,a),g=this._getTransformedDimensions(),u=g.x/2,m=g.y/2;return{tl:n({x:-u,y:-m},l),tr:n({x:u,y:-m},l),bl:n({x:-u,y:m},l),br:n({x:u,y:m},l)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var s="_",l="";return!a&&this.group&&(l=this.group.transformMatrixKey(a)+s),l+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var s=this.calcOwnMatrix();if(a||!this.group)return s;var l=this.transformMatrixKey(a),g=this.matrixCache||(this.matrixCache={});return g.key===l?g.value:(this.group&&(s=c(this.group.calcTransformMatrix(!1),s)),g.key=l,g.value=s,s)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===a)return s.value;var l=this._calcTranslateMatrix(),g={angle:this.angle,translateX:l[4],translateY:l[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=a,s.value=i.composeMatrix(g),s.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth,s=this.width+a,l=this.height+a;return{x:s,y:l}},_getTransformedDimensions:function(a,s){typeof a>"u"&&(a=this.skewX),typeof s>"u"&&(s=this.skewY);var l,g,u,m=a===0&&s===0;if(this.strokeUniform?(g=this.width,u=this.height):(l=this._getNonTransformedDimensions(),g=l.x,u=l.y),m)return this._finalizeDimensions(g*this.scaleX,u*this.scaleY);var y=i.sizeAfterTransform(g,u,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:s});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(a,s){return this.strokeUniform?{x:a+this.strokeWidth,y:s+this.strokeWidth}:{x:a,y:s}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),s=this._getTransformedDimensions(),l=n(s,a,!0);return l.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(p){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,p):this.canvas&&this.canvas.sendBackwards(this,p),this},bringForward:function(p){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,p):this.canvas&&this.canvas.bringForward(this,p),this},moveTo:function(p){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,p):this.canvas&&this.canvas.moveTo(this,p),this}}),function(){function p(d,c){if(c){if(c.toLive)return d+": url(#SVGID_"+c.id+"); ";var n=new e.Color(c),a=d+": "+n.toRgb()+"; ",s=n.getAlpha();return s!==1&&(a+=d+"-opacity: "+s.toString()+"; "),a}else return d+": none; "}var i=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(d){var c=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",l=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",b=d?"":this.getSvgFilter(),x=p("fill",this.fill),T=p("stroke",this.stroke);return[T,"stroke-width: ",n,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",l,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",u,"; ",x,"fill-rule: ",c,"; ","opacity: ",m,";",b,y].join("")},getSvgSpanStyles:function(d,c){var n="; ",s=d.fontFamily?"font-family: "+(d.fontFamily.indexOf("'")===-1&&d.fontFamily.indexOf('"')===-1?"'"+d.fontFamily+"'":d.fontFamily)+n:"",a=d.strokeWidth?"stroke-width: "+d.strokeWidth+n:"",s=s,l=d.fontSize?"font-size: "+d.fontSize+"px"+n:"",g=d.fontStyle?"font-style: "+d.fontStyle+n:"",u=d.fontWeight?"font-weight: "+d.fontWeight+n:"",m=d.fill?p("fill",d.fill):"",y=d.stroke?p("stroke",d.stroke):"",b=this.getSvgTextDecoration(d),x=d.deltaY?"baseline-shift: "+-d.deltaY+"; ":"";return b&&(b="text-decoration: "+b+n),[y,a,s,l,g,u,b,m,x,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(d){return["overline","underline","line-through"].filter(function(c){return d[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(d,c){var n=d?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'+e.util.matrixToSVG(n);return a+(c||"")+'" '},_setSVGBg:function(d){if(this.backgroundColor){var c=e.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,c),'" y="',i(-this.height/2,c),'" width="',i(this.width,c),'" height="',i(this.height,c),`"></rect>
`)}},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(d),{reviver:d})},toClipPathSVG:function(d){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(d),{reviver:d})},_createBaseClipPathSVGMarkup:function(d,c){c=c||{};var n=c.reviver,a=c.additionalTransform||"",s=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),l=d.indexOf("COMMON_PARTS");return d[l]=s,n?n(d.join("")):d.join("")},_createBaseSVGMarkup:function(d,c){c=c||{};var n=c.noStyle,a=c.reviver,s=n?"":'style="'+this.getSvgStyles()+'" ',l=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=g&&g.absolutePositioned,y=this.stroke,b=this.fill,x=this.shadow,T,M=[],I,R=d.indexOf("COMMON_PARTS"),W=c.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+e.Object.__uid++,I='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(a)+`</clipPath>
`),m&&M.push("<g ",l,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),m?"":l+this.getSvgCommons(),` >
`),T=[s,u,n?"":this.addPaintOrder()," ",W?'transform="'+W+'" ':""].join(""),d[R]=T,b&&b.toLive&&M.push(b.toSVG(this)),y&&y.toLive&&M.push(y.toSVG(this)),x&&M.push(x.toSVG(this)),g&&M.push(I),M.push(d.join("")),M.push(`</g>
`),m&&M.push(`</g>
`),a?a(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var p=e.util.object.extend,i="stateProperties";function d(n,a,s){var l={},g=!0;s.forEach(function(u){l[u]=n[u]}),p(n[a],l,g)}function c(n,a,s){if(n===a)return!0;if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(var l=0,g=n.length;l<g;l++)if(!c(n[l],a[l]))return!1;return!0}else if(n&&typeof n=="object"){var u=Object.keys(n),m;if(!a||typeof a!="object"||!s&&u.length!==Object.keys(a).length)return!1;for(var l=0,g=u.length;l<g;l++)if(m=u[l],!(m==="canvas"||m==="group")&&!c(n[m],a[m]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(n){n=n||i;var a="_"+n;return Object.keys(this[a]).length<this[n].length?!0:!c(this[a],this,!0)},saveState:function(n){var a=n&&n.propertySet||i,s="_"+a;return this[s]?(d(this,s,this[a]),n&&n.stateProperties&&d(this,s,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var a=n.propertySet||i;return n.propertySet=a,this["_"+a]={},this.saveState(n),this}})}(),function(){var p=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(i,d){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,n=i.y,a,s,l=Object.keys(this.oCoords),g=l.length-1,u;for(this.__corner=0;g>=0;g--)if(u=l[g],!!this.isControlVisible(u)&&(s=this._getImageLines(d?this.oCoords[u].touchCorner:this.oCoords[u].corner),a=this._findCrossPoints({x:c,y:n},s),a!==0&&a%2===1))return this.__corner=u,u;return!1},forEachControl:function(i){for(var d in this.controls)i(this.controls[d],d,this)},_setCornerCoords:function(){var i=this.oCoords;for(var d in i){var c=this.controls[d];i[d].corner=c.calcCornerCoords(this.angle,this.cornerSize,i[d].x,i[d].y,!1),i[d].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,i[d].x,i[d].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var d=this.getCenterPoint(),c=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return i.translate(d.x,d.y),i.scale(1/n[0],1/n[3]),i.rotate(p(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-c.x/2,-c.y/2,c.x,c.y),i.restore(),this},drawBorders:function(i,d){d=d||{};var c=this._calculateCurrentDimensions(),n=this.borderScaleFactor,a=c.x+n,s=c.y+n,l=typeof d.hasControls<"u"?d.hasControls:this.hasControls,g=!1;return i.save(),i.strokeStyle=d.borderColor||this.borderColor,this._setLineDash(i,d.borderDashArray||this.borderDashArray),i.strokeRect(-a/2,-s/2,a,s),l&&(i.beginPath(),this.forEachControl(function(u,m,y){u.withConnection&&u.getVisibility(y,m)&&(g=!0,i.moveTo(u.x*a,u.y*s),i.lineTo(u.x*a+u.offsetX,u.y*s+u.offsetY))}),g&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,d,c){c=c||{};var n=e.util.sizeAfterTransform(this.width,this.height,d),a=this.strokeWidth,s=this.strokeUniform,l=this.borderScaleFactor,g=n.x+a*(s?this.canvas.getZoom():d.scaleX)+l,u=n.y+a*(s?this.canvas.getZoom():d.scaleY)+l;return i.save(),this._setLineDash(i,c.borderDashArray||this.borderDashArray),i.strokeStyle=c.borderColor||this.borderColor,i.strokeRect(-g/2,-u/2,g,u),i.restore(),this},drawControls:function(i,d){d=d||{},i.save();var c=this.canvas.getRetinaScaling(),n,a;return i.setTransform(c,0,0,c,0,0),i.strokeStyle=i.fillStyle=d.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=d.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,d.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(s,l,g){a=g.oCoords[l],s.getVisibility(g,l)&&(n&&(a=e.util.transformPoint(a,n)),s.render(i,a.x,a.y,d,g))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,d){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=d,this},setControlsVisibility:function(i){i||(i={});for(var d in i)this.setControlVisible(d,i[d]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(p,i){i=i||{};var d=function(){},c=i.onComplete||d,n=i.onChange||d,a=this;return e.util.animate({target:this,startValue:p.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(s){p.set("left",s),a.requestRenderAll(),n()},onComplete:function(){p.setCoords(),c()}})},fxCenterObjectV:function(p,i){i=i||{};var d=function(){},c=i.onComplete||d,n=i.onChange||d,a=this;return e.util.animate({target:this,startValue:p.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(s){p.set("top",s),a.requestRenderAll(),n()},onComplete:function(){p.setCoords(),c()}})},fxRemove:function(p,i){i=i||{};var d=function(){},c=i.onComplete||d,n=i.onChange||d,a=this;return e.util.animate({target:this,startValue:p.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){p.set("opacity",s),a.requestRenderAll(),n()},onComplete:function(){a.remove(p),c()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var p=[],i,d,c=[];for(i in arguments[0])p.push(i);for(var n=0,a=p.length;n<a;n++)i=p[n],d=n!==a-1,c.push(this._animate(i,arguments[0][i],arguments[1],d));return c}else return this._animate.apply(this,arguments)},_animate:function(p,i,d,c){var n=this,a;i=i.toString(),d?d=e.util.object.clone(d):d={},~p.indexOf(".")&&(a=p.split("."));var s=n.colorProperties.indexOf(p)>-1||a&&n.colorProperties.indexOf(a[1])>-1,l=a?this.get(a[0])[a[1]]:this.get(p);"from"in d||(d.from=l),s||(~i.indexOf("=")?i=l+parseFloat(i.replace("=","")):i=parseFloat(i));var g={target:this,startValue:d.from,endValue:i,byValue:d.by,easing:d.easing,duration:d.duration,abort:d.abort&&function(u,m,y){return d.abort.call(n,u,m,y)},onChange:function(u,m,y){a?n[a[0]][a[1]]=u:n.set(p,u),!c&&d.onChange&&d.onChange(u,m,y)},onComplete:function(u,m,y){c||(n.setCoords(),d.onComplete&&d.onComplete(u,m,y))}};return s?e.util.animateColor(g.startValue,g.endValue,g.duration,g):e.util.animate(g)}}),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,l){s||(s=[0,0,0,0]),this.callSuper("initialize",l),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(l)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,l){return this.callSuper("_set",s,l),typeof n[s]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var l=this.calcLinePoints();s.moveTo(l.x1,l.y1),s.lineTo(l.x2,l.y2),s.lineWidth=this.strokeWidth;var g=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return d(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(s.y-=this.strokeWidth),this.height===0&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,l=this.y1<=this.y2?-1:1,g=s*this.width*.5,u=l*this.height*.5,m=s*this.width*-.5,y=l*this.height*-.5;return{x1:g,x2:m,y1:u,y2:y}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(s,l,g){g=g||{};var u=i.parseAttributes(s,i.Line.ATTRIBUTE_NAMES),m=[u.x1||0,u.y1||0,u.x2||0,u.y2||0];l(new i.Line(m,d(u,g)))},i.Line.fromObject=function(s,l){function g(m){delete m.points,l&&l(m)}var u=c(s,!0);u.points=[s.x1,s.y1,s.x2,s.y2],i.Object._fromObject("Line",u,g,"points")};function a(s,l){var g=s.origin,u=s.axis1,m=s.axis2,y=s.dimension,b=l.nearest,x=l.center,T=l.farthest;return function(){switch(this.get(g)){case b:return Math.min(this.get(u),this.get(m));case x:return Math.min(this.get(u),this.get(m))+.5*this.get(y);case T:return Math.max(this.get(u),this.get(m))}}}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,a){return this.callSuper("_set",n,a),n==="radius"&&this.setRadius(a),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,a=0,s=0,l=(this.endAngle-this.startAngle)%360;if(l===0)n=["<circle ","COMMON_PARTS",'cx="'+a+'" cy="'+s+'" ','r="',this.radius,`" />
`];else{var g=d(this.startAngle),u=d(this.endAngle),m=this.radius,y=i.util.cos(g)*m,b=i.util.sin(g)*m,x=i.util.cos(u)*m,T=i.util.sin(u)*m,M=l>180?"1":"0";n=['<path d="M '+y+" "+b," A "+m+" "+m," 0 ",+M+" 1"," "+x+" "+T,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,d(this.startAngle),d(this.endAngle),!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(n,a){var s=i.parseAttributes(n,i.Circle.ATTRIBUTE_NAMES);if(!c(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,a(new i.Circle(s))};function c(n){return"radius"in n&&n.radius>=0}i.Circle.fromObject=function(n,a){i.Object._fromObject("Circle",n,a)}}(t),function(p){var i=p.fabric||(p.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(d){var c=this.width/2,n=this.height/2;d.beginPath(),d.moveTo(-c,n),d.lineTo(0,-n),d.lineTo(c,n),d.closePath(),this._renderPaintInOrder(d)},_toSVG:function(){var d=this.width/2,c=this.height/2,n=[-d+" "+c,"0 "+-c,d+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),i.Triangle.fromObject=function(d,c){return i.Object._fromObject("Triangle",d,c)}}(t),function(p){var i=p.fabric||(p.fabric={}),d=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,n){switch(this.callSuper("_set",c,n),c){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,d,!1),c.restore(),this._renderPaintInOrder(c)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(c,n){var a=i.parseAttributes(c,i.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,n(new i.Ellipse(a))},i.Ellipse.fromObject=function(c,n){i.Object._fromObject("Ellipse",c,n)}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var n=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,l=this.height,g=-this.width/2,u=-this.height/2,m=n!==0||a!==0,y=1-.5522847498;c.beginPath(),c.moveTo(g+n,u),c.lineTo(g+s-n,u),m&&c.bezierCurveTo(g+s-y*n,u,g+s,u+y*a,g+s,u+a),c.lineTo(g+s,u+l-a),m&&c.bezierCurveTo(g+s,u+l-y*a,g+s-y*n,u+l,g+s-n,u+l),c.lineTo(g+n,u+l),m&&c.bezierCurveTo(g+y*n,u+l,g,u+l-y*a,g,u+l-a),c.lineTo(g,u+a),m&&c.bezierCurveTo(g,u+y*a,g+y*n,u,g+n,u),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(c,n,a){if(!c)return n(null);a=a||{};var s=i.parseAttributes(c,i.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var l=new i.Rect(d(a?i.util.object.clone(a):{},s));l.visible=l.visible&&l.width>0&&l.height>0,n(l)},i.Rect.fromObject=function(c,n){return i.Object._fromObject("Rect",c,n)}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.util.array.min,n=i.util.array.max,a=i.util.toFixed,s=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(l,g){g=g||{},this.points=l||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(l){var g=this._calcDimensions(l),u,m=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-m,this.height=g.height-m,l.fromSVG||(u=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+m/2,y:g.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof l.left>"u"&&(this.left=l.fromSVG?g.left:u.x),typeof l.top>"u"&&(this.top=l.fromSVG?g.top:u.y),this.pathOffset={x:g.left+this.width/2+m/2,y:g.top+this.height/2+m/2}},_calcDimensions:function(){var l=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=c(l,"x")||0,u=c(l,"y")||0,m=n(l,"x")||0,y=n(l,"y")||0,b=m-g,x=y-u;return{left:g,top:u,width:b,height:x}},toObject:function(l){return d(this.callSuper("toObject",l),{points:this.points.concat()})},_toSVG:function(){for(var l=[],g=this.pathOffset.x,u=this.pathOffset.y,m=i.Object.NUM_FRACTION_DIGITS,y=0,b=this.points.length;y<b;y++)l.push(a(this.points[y].x-g,m),",",a(this.points[y].y-u,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',l.join(""),`" />
`]},commonRender:function(l){var g,u=this.points.length,m=this.pathOffset.x,y=this.pathOffset.y;if(!u||isNaN(this.points[u-1].y))return!1;l.beginPath(),l.moveTo(this.points[0].x-m,this.points[0].y-y);for(var b=0;b<u;b++)g=this.points[b],l.lineTo(g.x-m,g.y-y);return!0},_render:function(l){this.commonRender(l)&&this._renderPaintInOrder(l)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(l){return function(g,u,m){if(!g)return u(null);m||(m={});var y=i.parsePointsAttribute(g.getAttribute("points")),b=i.parseAttributes(g,i[l].ATTRIBUTE_NAMES);b.fromSVG=!0,u(new i[l](y,d(b,m)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(l,g){return i.Object._fromObject("Polyline",l,g,"points")}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return d(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(c,n){i.Object._fromObject("Polygon",c,n,"points")}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.array.min,c=i.util.array.max,n=i.util.object.extend,a=i.util.object.clone,s=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(l,g){g=a(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(l||[],g)},_setPath:function(l,g){this.path=i.util.makePathSimpler(Array.isArray(l)?l:i.util.parsePath(l)),i.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(l){var g,u=0,m=0,y=0,b=0,x=0,T=0,M=-this.pathOffset.x,I=-this.pathOffset.y;l.beginPath();for(var R=0,W=this.path.length;R<W;++R)switch(g=this.path[R],g[0]){case"L":y=g[1],b=g[2],l.lineTo(y+M,b+I);break;case"M":y=g[1],b=g[2],u=y,m=b,l.moveTo(y+M,b+I);break;case"C":y=g[5],b=g[6],x=g[3],T=g[4],l.bezierCurveTo(g[1]+M,g[2]+I,x+M,T+I,y+M,b+I);break;case"Q":l.quadraticCurveTo(g[1]+M,g[2]+I,g[3]+M,g[4]+I),y=g[3],b=g[4],x=g[1],T=g[2];break;case"z":case"Z":y=u,b=m,l.closePath();break}},_render:function(l){this._renderPathCommands(l),this._renderPaintInOrder(l)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(l){return n(this.callSuper("toObject",l),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(l){var g=this.toObject(["sourcePath"].concat(l));return g.sourcePath&&delete g.path,g},_toSVG:function(){var l=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',l,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var l=i.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,l)+", "+s(-this.pathOffset.y,l)+")"},toClipPathSVG:function(l){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:l,additionalTransform:g})},toSVG:function(l){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var l=[],g=[],u,m=0,y=0,b=0,x=0,T,M=0,I=this.path.length;M<I;++M){switch(u=this.path[M],u[0]){case"L":b=u[1],x=u[2],T=[];break;case"M":b=u[1],x=u[2],m=b,y=x,T=[];break;case"C":T=i.util.getBoundsOfCurve(b,x,u[1],u[2],u[3],u[4],u[5],u[6]),b=u[5],x=u[6];break;case"Q":T=i.util.getBoundsOfCurve(b,x,u[1],u[2],u[1],u[2],u[3],u[4]),b=u[3],x=u[4];break;case"z":case"Z":b=m,x=y;break}T.forEach(function(fe){l.push(fe.x),g.push(fe.y)}),l.push(b),g.push(x)}var R=d(l)||0,W=d(g)||0,K=c(l)||0,$=c(g)||0,ae=K-R,ce=$-W;return{left:R,top:W,width:ae,height:ce}}}),i.Path.fromObject=function(l,g){if(typeof l.sourcePath=="string"){var u=l.sourcePath;i.loadSVGFromURL(u,function(m){var y=m[0];y.setOptions(l),g&&g(y)})}else i.Object._fromObject("Path",l,g,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(l,g,u){var m=i.parseAttributes(l,i.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,g(new i.Path(m.d,n(m,u)))}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.array.min,c=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,a,s){a=a||{},this._objects=[],s&&this.callSuper("initialize",a),this._objects=n||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;if(s)this._updateObjectsACoords();else{var g=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,a=this._objects.length;a--;)this._objects[a].setCoords(n)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),s=this._objects.length;s--;)this._updateObjectCoords(this._objects[s],a)},_updateObjectCoords:function(n,a){var s=n.left,l=n.top,g=!0;n.set({left:s-a.x,top:l-a.y}),n.group=this,n.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var a=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),n&&(a&&i.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,a){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(n,a);if(n==="canvas")for(;s--;)this._objects[s]._set(n,a);i.Object.prototype._set.call(this,n,a)},toObject:function(n){var a=this.includeDefaultValues,s=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var u=g.includeDefaultValues;g.includeDefaultValues=a;var m=g.toObject(n);return g.includeDefaultValues=u,m}),l=i.Object.prototype.toObject.call(this,n);return l.objects=s,l},toDatalessObject:function(n){var a,s=this.sourcePath;if(s)a=s;else{var l=this.includeDefaultValues;a=this._objects.map(function(u){var m=u.includeDefaultValues;u.includeDefaultValues=l;var y=u.toDatalessObject(n);return u.includeDefaultValues=m,y})}var g=i.Object.prototype.toDatalessObject.call(this,n);return g.objects=a,g},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=i.Object.prototype.shouldCache.call(this);if(n){for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,a=this._objects.length;n<a;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var a=0,s=this._objects.length;a<s;a++)this._objects[a].render(n);this._drawClipPath(n,this.clipPath)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var l=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-l/2,-g/2,l,g)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(a){i.util.addTransformToObject(a,n),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(n){n.dispose&&n.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var n=this._objects,a=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var l=new i.ActiveSelection([]);return l.set(s),l.type="activeSelection",a.remove(this),n.forEach(function(g){g.group=l,g.dirty=!0,a.add(g)}),l.canvas=a,l._objects=n,a._activeObject=l,l.setCoords(),l}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0;return this.forEachObject(function(a){a.setCoords(n)}),this},_calcBounds:function(n){for(var a=[],s=[],l,g,u,m=["tr","br","bl","tl"],y=0,b=this._objects.length,x,T=m.length;y<b;++y){for(l=this._objects[y],u=l.calcACoords(),x=0;x<T;x++)g=m[x],a.push(u[g].x),s.push(u[g].y);l.aCoords=u}this._getBounds(a,s,n)},_getBounds:function(n,a,s){var l=new i.Point(d(n),d(a)),g=new i.Point(c(n),c(a)),u=l.y||0,m=l.x||0,y=g.x-l.x||0,b=g.y-l.y||0;this.width=y,this.height=b,s||this.setPositionByOrigin({x:m,y:u},"left","top")},_toSVG:function(n){for(var a=["<g ","COMMON_PARTS",` >
`],s=0,l=this._objects.length;s<l;s++)a.push("		",this._objects[s].toSVG(n));return a.push(`</g>
`),a},getSvgStyles:function(){var n=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),a].join("")},toClipPathSVG:function(n){for(var a=[],s=0,l=this._objects.length;s<l;s++)a.push("	",this._objects[s].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(a,{reviver:n})}}),i.Group.fromObject=function(n,a){var s=n.objects,l=i.util.object.clone(n,!0);if(delete l.objects,typeof s=="string"){i.loadSVGFromURL(s,function(g){var u=i.util.groupSVGElements(g,n,s);u.set(l),a&&a(u)});return}i.util.enlivenObjects(s,function(g){var u=i.util.object.clone(n,!0);delete u.objects,i.util.enlivenObjectEnlivables(n,u,function(){a&&a(new i.Group(g,u,!0))})})})}(t),function(p){var i=p.fabric||(p.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(d,c){c=c||{},this._objects=d||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var d=this._objects.concat();this._objects=[];var c=i.Object.prototype.toObject.call(this),n=new i.Group([]);if(delete c.type,n.set(c),d.forEach(function(s){s.canvas.remove(s),s.group=n}),n._objects=d,!this.canvas)return n;var a=this.canvas;return a.add(n),a._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(d,c,n){d.save(),d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",d,c),n=n||{},typeof n.hasControls>"u"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var a=0,s=this._objects.length;a<s;a++)this._objects[a]._renderControls(d,n);d.restore()}}),i.ActiveSelection.fromObject=function(d,c){i.util.enlivenObjects(d.objects,function(n){delete d.objects,c&&c(new i.ActiveSelection(n,d,!0))})})}(t),function(p){var i=e.util.object.extend;if(p.fabric||(p.fabric={}),p.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(d,c){c||(c={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",c),this._initElement(d,c)},getElement:function(){return this._element||{}},setElement:function(d,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=d,this._originalElement=d,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(d){var c=e.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(d)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(d){e.util.cleanUpJsdomNode(this[d]),this[d]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var d=this.getElement();return{width:d.naturalWidth||d.width,height:d.naturalHeight||d.height}},_stroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,n=this.height/2;d.beginPath(),d.moveTo(-c,-n),d.lineTo(c,-n),d.lineTo(c,n),d.lineTo(-c,n),d.lineTo(-c,-n),d.closePath()}},toObject:function(d){var c=[];this.filters.forEach(function(a){a&&c.push(a.toObject())});var n=i(this.callSuper("toObject",["cropX","cropY"].concat(d)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var d=[],c=[],n,a=this._element,s=-this.width/2,l=-this.height/2,g="",u="";if(!a)return[];if(this.hasCrop()){var m=e.Object.__uid++;d.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+s+'" y="'+l+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(u='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',l-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,u,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,n=["	<rect ",'x="',s,'" y="',l,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?d=d.concat(n,c):d=d.concat(c,n),d},getSrc:function(d){var c=d?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(d,c,n){return e.util.loadImage(d,function(a,s){this.setElement(a,n),this._setWidthHeight(),c&&c(this,s)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var d=this.resizeFilter,c=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),a=n.scaleX,s=n.scaleY,l=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!d||a>c&&s>c){this._element=l,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,this._lastScaleY=s;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var g=e.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=l.width,y=l.height;g.width=m,g.height=y,this._element=g,this._lastScaleX=d.scaleX=a,this._lastScaleY=d.scaleY=s,e.filterBackend.applyFilters([d],l,m,y,this._element,u),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(d){if(d=d||this.filters||[],d=d.filter(function(l){return l&&!l.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),d.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,n=c.naturalWidth||c.width,a=c.naturalHeight||c.height;if(this._element===this._originalElement){var s=e.util.createCanvasElement();s.width=n,s.height=a,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,a),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(d,this._originalElement,n,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(d){e.util.setImageSmoothing(d,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(d),this._renderPaintInOrder(d)},drawCacheOnCanvas:function(d){e.util.setImageSmoothing(d,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,d)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(d){var c=this._element;if(c){var n=this._filterScalingX,a=this._filterScalingY,s=this.width,l=this.height,g=Math.min,u=Math.max,m=u(this.cropX,0),y=u(this.cropY,0),b=c.naturalWidth||c.width,x=c.naturalHeight||c.height,T=m*n,M=y*a,I=g(s*n,b-T),R=g(l*a,x-M),W=-s/2,K=-l/2,$=g(s,b/n-m),ae=g(l,x/a-y);c&&d.drawImage(c,T,M,I,R,W,K,$,ae)}},_needsResize:function(){var d=this.getTotalObjectScaling();return d.scaleX!==this._lastScaleX||d.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(d,c){this.setElement(e.util.getById(d),c),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(d){d||(d={}),this.setOptions(d),this._setWidthHeight(d)},_initFilters:function(d,c){d&&d.length?e.util.enlivenObjects(d,function(n){c&&c(n)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(d){d||(d={});var c=this.getElement();this.width=d.width||c.naturalWidth||c.width||0,this.height=d.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var d=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,n=this._element.height,a=1,s=1,l=0,g=0,u=0,m=0,y,b=this.width,x=this.height,T={width:b,height:x};return d&&(d.alignX!=="none"||d.alignY!=="none")?(d.meetOrSlice==="meet"&&(a=s=e.util.findScaleToFit(this._element,T),y=(b-c*a)/2,d.alignX==="Min"&&(l=-y),d.alignX==="Max"&&(l=y),y=(x-n*s)/2,d.alignY==="Min"&&(g=-y),d.alignY==="Max"&&(g=y)),d.meetOrSlice==="slice"&&(a=s=e.util.findScaleToCover(this._element,T),y=c-b/a,d.alignX==="Mid"&&(u=y/2),d.alignX==="Max"&&(u=y),y=n-x/s,d.alignY==="Mid"&&(m=y/2),d.alignY==="Max"&&(m=y),c=b/a,n=x/s)):(a=b/c,s=x/n),{width:c,height:n,scaleX:a,scaleY:s,offsetLeft:l,offsetTop:g,cropX:u,cropY:m}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(d,c){var n=e.util.object.clone(d);e.util.loadImage(n.src,function(a,s){if(s){c&&c(null,!0);return}e.Image.prototype._initFilters.call(n,n.filters,function(l){n.filters=l||[],e.Image.prototype._initFilters.call(n,[n.resizeFilter],function(g){n.resizeFilter=g[0],e.util.enlivenObjectEnlivables(n,n,function(){var u=new e.Image(a,n);c(u,!1)})})})},null,n.crossOrigin)},e.Image.fromURL=function(d,c,n){e.util.loadImage(d,function(a,s){c&&c(new e.Image(a,n),s)},null,n&&n.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(d,c,n){var a=e.parseAttributes(d,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(a["xlink:href"],c,i(n?e.util.object.clone(n):{},a))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var p=this.angle%360;return p>0?Math.round((p-1)/90)*90:Math.round(p/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(p){p=p||{};var i=function(){},d=p.onComplete||i,c=p.onChange||i,n=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){n.rotate(a),c()},onComplete:function(){n.setCoords(),d()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(p){return p.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(p){return p.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function p(d,c){var n="precision "+c+` float;
void main(){}`,a=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(a,n),d.compileShader(a),!!d.getShaderParameter(a,d.COMPILE_STATUS)}e.isWebglSupported=function(d){if(e.isLikelyNode)return!1;d=d||e.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),n=c.getContext("webgl")||c.getContext("experimental-webgl"),a=!1;if(n){e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),a=e.maxTextureSize>=d;for(var s=["highp","mediump","lowp"],l=0;l<3;l++)if(p(n,s[l])){e.webGlPrecision=s[l];break}}return this.isSupported=a,a},e.WebglFilterBackend=i;function i(d){d&&d.tileSize&&(this.tileSize=d.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(d,c){this.dispose(),this.createWebGLCanvas(d,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(d,c)},chooseFastestCopyGLTo2DMethod:function(d,c){var n=typeof window.performance<"u",a;try{new ImageData(1,1),a=!0}catch{a=!1}var s=typeof ArrayBuffer<"u",l=typeof Uint8ClampedArray<"u";if(n&&a&&s&&l){var g=e.util.createCanvasElement(),u=new ArrayBuffer(d*c*4);if(e.forceGLPutImageData){this.imageBuffer=u,this.copyGLTo2D=D;return}var m={imageBuffer:u,destinationWidth:d,destinationHeight:c,targetCanvas:g},y,b,x;g.width=d,g.height=c,y=window.performance.now(),E.call(m,this.gl,m),b=window.performance.now()-y,y=window.performance.now(),D.call(m,this.gl,m),x=window.performance.now()-y,b>x?(this.imageBuffer=u,this.copyGLTo2D=D):this.copyGLTo2D=E}},createWebGLCanvas:function(d,c){var n=e.util.createCanvasElement();n.width=d,n.height=c;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=n.getContext("webgl",a);s||(s=n.getContext("experimental-webgl",a)),s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)},applyFilters:function(d,c,n,a,s,l){var g=this.gl,u;l&&(u=this.getCachedTexture(l,c));var m={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:n,sourceHeight:a,destinationWidth:n,destinationHeight:a,context:g,sourceTexture:this.createTexture(g,n,a,!u&&c),targetTexture:this.createTexture(g,n,a),originalTexture:u||this.createTexture(g,n,a,!u&&c),passes:d.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},y=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,y),d.forEach(function(b){b&&b.applyTo(m)}),C(m),this.copyGLTo2D(g,m),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(m.sourceTexture),g.deleteTexture(m.targetTexture),g.deleteFramebuffer(y),s.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(d,c,n,a){var s=d.createTexture();return d.bindTexture(d.TEXTURE_2D,s),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),a?d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,c,n,0,d.RGBA,d.UNSIGNED_BYTE,null),s},getCachedTexture:function(d,c){if(this.textureCache[d])return this.textureCache[d];var n=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[d]=n,n},evictCachesForKey:function(d){this.textureCache[d]&&(this.gl.deleteTexture(this.textureCache[d]),delete this.textureCache[d])},copyGLTo2D:E,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var d=this.gl,c={renderer:"",vendor:""};if(!d)return c;var n=d.getExtension("WEBGL_debug_renderer_info");if(n){var a=d.getParameter(n.UNMASKED_RENDERER_WEBGL),s=d.getParameter(n.UNMASKED_VENDOR_WEBGL);a&&(c.renderer=a.toLowerCase()),s&&(c.vendor=s.toLowerCase())}return this.gpuInfo=c,c}}}();function C(p){var i=p.targetCanvas,d=i.width,c=i.height,n=p.destinationWidth,a=p.destinationHeight;(d!==n||c!==a)&&(i.width=n,i.height=a)}function E(p,i){var d=p.canvas,c=i.targetCanvas,n=c.getContext("2d");n.translate(0,c.height),n.scale(1,-1);var a=d.height-c.height;n.drawImage(d,0,a,c.width,c.height,0,0,c.width,c.height)}function D(p,i){var d=i.targetCanvas,c=d.getContext("2d"),n=i.destinationWidth,a=i.destinationHeight,s=n*a*4,l=new Uint8Array(this.imageBuffer,0,s),g=new Uint8ClampedArray(this.imageBuffer,0,s);p.readPixels(0,0,n,a,p.RGBA,p.UNSIGNED_BYTE,l);var u=new ImageData(g,n,a);c.putImageData(u,0,0)}(function(){var p=function(){};e.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:p,dispose:p,clearWebGLCaches:p,resources:{},applyFilters:function(d,c,n,a,s){var l=s.getContext("2d");l.drawImage(c,0,0,n,a);var g=l.getImageData(0,0,n,a),u=l.getImageData(0,0,n,a),m={sourceWidth:n,sourceHeight:a,imageData:g,originalEl:c,originalImageData:u,canvasEl:s,ctx:l,filterBackend:this};return d.forEach(function(y){y.applyTo(m)}),(m.imageData.width!==n||m.imageData.height!==a)&&(s.width=m.imageData.width,s.height=m.imageData.height),l.putImageData(m.imageData,0,0),m}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(p){p&&this.setOptions(p)},setOptions:function(p){for(var i in p)this[i]=p[i]},createProgram:function(p,i,d){i=i||this.fragmentSource,d=d||this.vertexSource,e.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var c=p.createShader(p.VERTEX_SHADER);if(p.shaderSource(c,d),p.compileShader(c),!p.getShaderParameter(c,p.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+p.getShaderInfoLog(c));var n=p.createShader(p.FRAGMENT_SHADER);if(p.shaderSource(n,i),p.compileShader(n),!p.getShaderParameter(n,p.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+p.getShaderInfoLog(n));var a=p.createProgram();if(p.attachShader(a,c),p.attachShader(a,n),p.linkProgram(a),!p.getProgramParameter(a,p.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+p.getProgramInfoLog(a));var s=this.getAttributeLocations(p,a),l=this.getUniformLocations(p,a)||{};return l.uStepW=p.getUniformLocation(a,"uStepW"),l.uStepH=p.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(p,i){return{aPosition:p.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(p,i,d){var c=i.aPosition,n=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,n),p.enableVertexAttribArray(c),p.vertexAttribPointer(c,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,d,p.STATIC_DRAW)},_setupFrameBuffer:function(p){var i=p.context,d,c;p.passes>1?(d=p.destinationWidth,c=p.destinationHeight,(p.sourceWidth!==d||p.sourceHeight!==c)&&(i.deleteTexture(p.targetTexture),p.targetTexture=p.filterBackend.createTexture(i,d,c)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,p.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(p){p.passes--,p.pass++;var i=p.targetTexture;p.targetTexture=p.sourceTexture,p.sourceTexture=i},isNeutralState:function(){var p=this.mainParameter,i=e.Image.filters[this.type].prototype;if(p)if(Array.isArray(i[p])){for(var d=i[p].length;d--;)if(this[p][d]!==i[p][d])return!1;return!0}else return i[p]===this[p];else return!1},applyTo:function(p){p.webgl?(this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p)):this.applyTo2d(p)},retrieveShader:function(p){return p.programCache.hasOwnProperty(this.type)||(p.programCache[this.type]=this.createProgram(p.context)),p.programCache[this.type]},applyToWebGL:function(p){var i=p.context,d=this.retrieveShader(p);p.pass===0&&p.originalTexture?i.bindTexture(i.TEXTURE_2D,p.originalTexture):i.bindTexture(i.TEXTURE_2D,p.sourceTexture),i.useProgram(d.program),this.sendAttributeData(i,d.attributeLocations,p.aPosition),i.uniform1f(d.uniformLocations.uStepW,1/p.sourceWidth),i.uniform1f(d.uniformLocations.uStepH,1/p.sourceHeight),this.sendUniformData(i,d.uniformLocations),i.viewport(0,0,p.destinationWidth,p.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(p,i,d){p.activeTexture(d),p.bindTexture(p.TEXTURE_2D,i),p.activeTexture(p.TEXTURE0)},unbindAdditionalTexture:function(p,i){p.activeTexture(i),p.bindTexture(p.TEXTURE_2D,null),p.activeTexture(p.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(p){this[this.mainParameter]=p},sendUniformData:function(){},createHelpLayer:function(p){if(!p.helpLayer){var i=document.createElement("canvas");i.width=p.sourceWidth,i.height=p.sourceHeight,p.helpLayer=i}},toObject:function(){var p={type:this.type},i=this.mainParameter;return i&&(p[i]=this[i]),p},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(p,i){var d=new e.Image.filters[p.type](p);return i&&i(d),d},function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.ColorMatrix=c(d.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var a=n.imageData,s=a.data,l=s.length,g=this.matrix,u,m,y,b,x,T=this.colorsOnly;for(x=0;x<l;x+=4)u=s[x],m=s[x+1],y=s[x+2],T?(s[x]=u*g[0]+m*g[1]+y*g[2]+g[4]*255,s[x+1]=u*g[5]+m*g[6]+y*g[7]+g[9]*255,s[x+2]=u*g[10]+m*g[11]+y*g[12]+g[14]*255):(b=s[x+3],s[x]=u*g[0]+m*g[1]+y*g[2]+b*g[3]+g[4]*255,s[x+1]=u*g[5]+m*g[6]+y*g[7]+b*g[8]+g[9]*255,s[x+2]=u*g[10]+m*g[11]+y*g[12]+b*g[13]+g[14]*255,s[x+3]=u*g[15]+m*g[16]+y*g[17]+b*g[18]+g[19]*255)},getUniformLocations:function(n,a){return{uColorMatrix:n.getUniformLocation(a,"uColorMatrix"),uConstants:n.getUniformLocation(a,"uConstants")}},sendUniformData:function(n,a){var s=this.matrix,l=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],g=[s[4],s[9],s[14],s[19]];n.uniformMatrix4fv(a.uColorMatrix,!1,l),n.uniform4fv(a.uConstants,g)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Brightness=c(d.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var a=n.imageData,s=a.data,l,g=s.length,u=Math.round(this.brightness*255);for(l=0;l<g;l+=4)s[l]=s[l]+u,s[l+1]=s[l+1]+u,s[l+2]=s[l+2]+u}},getUniformLocations:function(n,a){return{uBrightness:n.getUniformLocation(a,"uBrightness")}},sendUniformData:function(n,a){n.uniform1f(a.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.Convolute=n(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(a){var s=Math.sqrt(this.matrix.length),l=this.type+"_"+s+"_"+(this.opaque?1:0),g=this.fragmentSource[l];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,g)),a.programCache[l]},applyTo2d:function(a){var s=a.imageData,l=s.data,g=this.matrix,u=Math.round(Math.sqrt(g.length)),m=Math.floor(u/2),y=s.width,b=s.height,x=a.ctx.createImageData(y,b),T=x.data,M=this.opaque?1:0,I,R,W,K,$,ae,ce,fe,le,ye,Ee,ne,P;for(Ee=0;Ee<b;Ee++)for(ye=0;ye<y;ye++){for($=(Ee*y+ye)*4,I=0,R=0,W=0,K=0,P=0;P<u;P++)for(ne=0;ne<u;ne++)ce=Ee+P-m,ae=ye+ne-m,!(ce<0||ce>=b||ae<0||ae>=y)&&(fe=(ce*y+ae)*4,le=g[P*u+ne],I+=l[fe]*le,R+=l[fe+1]*le,W+=l[fe+2]*le,M||(K+=l[fe+3]*le));T[$]=I,T[$+1]=R,T[$+2]=W,M?T[$+3]=l[$+3]:T[$+3]=K}a.imageData=x},getUniformLocations:function(a,s){return{uMatrix:a.getUniformLocation(s,"uMatrix"),uOpaque:a.getUniformLocation(s,"uOpaque"),uHalfSize:a.getUniformLocation(s,"uHalfSize"),uSize:a.getUniformLocation(s,"uSize")}},sendUniformData:function(a,s){a.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Grayscale=c(d.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var a=n.imageData,s=a.data,l,g=s.length,u,m=this.mode;for(l=0;l<g;l+=4)m==="average"?u=(s[l]+s[l+1]+s[l+2])/3:m==="lightness"?u=(Math.min(s[l],s[l+1],s[l+2])+Math.max(s[l],s[l+1],s[l+2]))/2:m==="luminosity"&&(u=.21*s[l]+.72*s[l+1]+.07*s[l+2]),s[l]=u,s[l+1]=u,s[l+2]=u},retrieveShader:function(n){var a=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(a)){var s=this.fragmentSource[this.mode];n.programCache[a]=this.createProgram(n.context,s)}return n.programCache[a]},getUniformLocations:function(n,a){return{uMode:n.getUniformLocation(a,"uMode")}},sendUniformData:function(n,a){var s=1;n.uniform1i(a.uMode,s)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Invert=c(d.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var a=n.imageData,s=a.data,l,g=s.length;for(l=0;l<g;l+=4)s[l]=255-s[l],s[l+1]=255-s[l+1],s[l+2]=255-s[l+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,a){return{uInvert:n.getUniformLocation(a,"uInvert")}},sendUniformData:function(n,a){n.uniform1i(a.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.Noise=n(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var s=a.imageData,l=s.data,g,u=l.length,m=this.noise,y;for(g=0,u=l.length;g<u;g+=4)y=(.5-Math.random())*m,l[g]+=y,l[g+1]+=y,l[g+2]+=y}},getUniformLocations:function(a,s){return{uNoise:a.getUniformLocation(s,"uNoise"),uSeed:a.getUniformLocation(s,"uSeed")}},sendUniformData:function(a,s){a.uniform1f(s.uNoise,this.noise/255),a.uniform1f(s.uSeed,Math.random())},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Pixelate=c(d.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var a=n.imageData,s=a.data,l=a.height,g=a.width,u,m,y,b,x,T,M,I,R,W,K;for(m=0;m<l;m+=this.blocksize)for(y=0;y<g;y+=this.blocksize)for(u=m*4*g+y*4,b=s[u],x=s[u+1],T=s[u+2],M=s[u+3],W=Math.min(m+this.blocksize,l),K=Math.min(y+this.blocksize,g),I=m;I<W;I++)for(R=y;R<K;R++)u=I*4*g+R*4,s[u]=b,s[u+1]=x,s[u+2]=T,s[u+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,a){return{uBlocksize:n.getUniformLocation(a,"uBlocksize"),uStepW:n.getUniformLocation(a,"uStepW"),uStepH:n.getUniformLocation(a,"uStepH")}},sendUniformData:function(n,a){n.uniform1f(a.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.extend,c=i.Image.filters,n=i.util.createClass;c.RemoveColor=n(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(a){var s=a.imageData,l=s.data,g,u=this.distance*255,m,y,b,x=new i.Color(this.color).getSource(),T=[x[0]-u,x[1]-u,x[2]-u],M=[x[0]+u,x[1]+u,x[2]+u];for(g=0;g<l.length;g+=4)m=l[g],y=l[g+1],b=l[g+2],m>T[0]&&y>T[1]&&b>T[2]&&m<M[0]&&y<M[1]&&b<M[2]&&(l[g+3]=0)},getUniformLocations:function(a,s){return{uLow:a.getUniformLocation(s,"uLow"),uHigh:a.getUniformLocation(s,"uHigh")}},sendUniformData:function(a,s){var l=new i.Color(this.color).getSource(),g=parseFloat(this.distance),u=[0+l[0]/255-g,0+l[1]/255-g,0+l[2]/255-g,1],m=[l[0]/255+g,l[1]/255+g,l[2]/255+g,1];a.uniform4fv(s.uLow,u),a.uniform4fv(s.uHigh,m)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in n)d[a]=c(d.ColorMatrix,{type:a,matrix:n[a],mainParameter:!1,colorsOnly:!0}),i.Image.filters[a].fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric,d=i.Image.filters,c=i.util.createClass;d.BlendColor=c(d.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var a=this.type+"_"+this.mode,s;return n.programCache.hasOwnProperty(a)||(s=this.buildSource(this.mode),n.programCache[a]=this.createProgram(n.context,s)),n.programCache[a]},applyTo2d:function(n){var a=n.imageData,s=a.data,l=s.length,g,u,m,y,b,x,T,M=1-this.alpha;T=new i.Color(this.color).getSource(),g=T[0]*this.alpha,u=T[1]*this.alpha,m=T[2]*this.alpha;for(var I=0;I<l;I+=4)switch(y=s[I],b=s[I+1],x=s[I+2],this.mode){case"multiply":s[I]=y*g/255,s[I+1]=b*u/255,s[I+2]=x*m/255;break;case"screen":s[I]=255-(255-y)*(255-g)/255,s[I+1]=255-(255-b)*(255-u)/255,s[I+2]=255-(255-x)*(255-m)/255;break;case"add":s[I]=y+g,s[I+1]=b+u,s[I+2]=x+m;break;case"diff":case"difference":s[I]=Math.abs(y-g),s[I+1]=Math.abs(b-u),s[I+2]=Math.abs(x-m);break;case"subtract":s[I]=y-g,s[I+1]=b-u,s[I+2]=x-m;break;case"darken":s[I]=Math.min(y,g),s[I+1]=Math.min(b,u),s[I+2]=Math.min(x,m);break;case"lighten":s[I]=Math.max(y,g),s[I+1]=Math.max(b,u),s[I+2]=Math.max(x,m);break;case"overlay":s[I]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255,s[I+1]=u<128?2*b*u/255:255-2*(255-b)*(255-u)/255,s[I+2]=m<128?2*x*m/255:255-2*(255-x)*(255-m)/255;break;case"exclusion":s[I]=g+y-2*g*y/255,s[I+1]=u+b-2*u*b/255,s[I+2]=m+x-2*m*x/255;break;case"tint":s[I]=g+y*M,s[I+1]=u+b*M,s[I+2]=m+x*M}},getUniformLocations:function(n,a){return{uColor:n.getUniformLocation(a,"uColor")}},sendUniformData:function(n,a){var s=new i.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,n.uniform4fv(a.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric,d=i.Image.filters,c=i.util.createClass;d.BlendImage=c(d.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var a=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(a)||(n.programCache[a]=this.createProgram(n.context,s)),n.programCache[a]},applyToWebGL:function(n){var a=n.context,s=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(a,s,a.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(n,a){return n.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var n=this.image,a=n._element.width,s=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/a,-n.top/s,1]},applyTo2d:function(n){var a=n.imageData,s=n.filterBackend.resources,l=a.data,g=l.length,u=a.width,m=a.height,y,b,x,T,M,I,R,W,K,$,ae=this.image,ce;s.blendImage||(s.blendImage=i.util.createCanvasElement()),K=s.blendImage,$=K.getContext("2d"),K.width!==u||K.height!==m?(K.width=u,K.height=m):$.clearRect(0,0,u,m),$.setTransform(ae.scaleX,0,0,ae.scaleY,ae.left,ae.top),$.drawImage(ae._element,0,0,u,m),ce=$.getImageData(0,0,u,m).data;for(var fe=0;fe<g;fe+=4)switch(M=l[fe],I=l[fe+1],R=l[fe+2],W=l[fe+3],y=ce[fe],b=ce[fe+1],x=ce[fe+2],T=ce[fe+3],this.mode){case"multiply":l[fe]=M*y/255,l[fe+1]=I*b/255,l[fe+2]=R*x/255,l[fe+3]=W*T/255;break;case"mask":l[fe+3]=T;break}},getUniformLocations:function(n,a){return{uTransformMatrix:n.getUniformLocation(a,"uTransformMatrix"),uImage:n.getUniformLocation(a,"uImage")}},sendUniformData:function(n,a){var s=this.calculateMatrix();n.uniform1i(a.uImage,1),n.uniformMatrix3fv(a.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(n,a){i.Image.fromObject(n.image,function(s){var l=i.util.object.clone(n);l.image=s,a(new i.Image.filters.BlendImage(l))})}}(t),function(p){var i=p.fabric||(p.fabric={}),d=Math.pow,c=Math.floor,n=Math.sqrt,a=Math.abs,s=Math.round,l=Math.sin,g=Math.ceil,u=i.Image.filters,m=i.util.createClass;u.Resize=m(u.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,b){return{uDelta:y.getUniformLocation(b,"uDelta"),uTaps:y.getUniformLocation(b,"uTaps")}},sendUniformData:function(y,b){y.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(y){var b=this.getFilterWindow(),x=this.type+"_"+b;if(!y.programCache.hasOwnProperty(x)){var T=this.generateShader(b);y.programCache[x]=this.createProgram(y.context,T)}return y.programCache[x]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,x=this.getFilterWindow(),T=new Array(x),M=1;M<=x;M++)T[M-1]=y(M*b);return T},generateShader:function(T){for(var b=new Array(T),x=this.fragmentSourceTOP,T,M=1;M<=T;M++)b[M-1]=M+".0 * uDelta";return x+="uniform float uTaps["+T+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,b.forEach(function(I,R){x+="  color += texture2D(uTexture, vTexCoord + "+I+") * uTaps["+R+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+I+") * uTaps["+R+`];
`,x+="  sum += 2.0 * uTaps["+R+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(b){if(b>=y||b<=-y)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var x=b/y;return l(b)/b*l(x)/x}},applyTo2d:function(y){var b=y.imageData,x=this.scaleX,T=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/T;var M=b.width,I=b.height,R=s(M*x),W=s(I*T),K;this.resizeType==="sliceHack"?K=this.sliceByTwo(y,M,I,R,W):this.resizeType==="hermite"?K=this.hermiteFastResize(y,M,I,R,W):this.resizeType==="bilinear"?K=this.bilinearFiltering(y,M,I,R,W):this.resizeType==="lanczos"&&(K=this.lanczosResize(y,M,I,R,W)),y.imageData=K},sliceByTwo:function(y,b,x,T,M){var I=y.imageData,R=.5,W=!1,K=!1,$=b*R,ae=x*R,ce=i.filterBackend.resources,fe,le,ye=0,Ee=0,ne=b,P=0;for(ce.sliceByTwo||(ce.sliceByTwo=document.createElement("canvas")),fe=ce.sliceByTwo,(fe.width<b*1.5||fe.height<x)&&(fe.width=b*1.5,fe.height=x),le=fe.getContext("2d"),le.clearRect(0,0,b*1.5,x),le.putImageData(I,0,0),T=c(T),M=c(M);!W||!K;)b=$,x=ae,T<c($*R)?$=c($*R):($=T,W=!0),M<c(ae*R)?ae=c(ae*R):(ae=M,K=!0),le.drawImage(fe,ye,Ee,b,x,ne,P,$,ae),ye=ne,Ee=P,P+=ae;return le.getImageData(ye,Ee,T,M)},lanczosResize:function(y,b,x,T,M){function I(F){var L,G,O,k,V,z,Z,J,U,he,ie;for(P.x=(F+.5)*ae,B.x=c(P.x),L=0;L<M;L++){for(P.y=(L+.5)*ce,B.y=c(P.y),V=0,z=0,Z=0,J=0,U=0,G=B.x-ye;G<=B.x+ye;G++)if(!(G<0||G>=b)){he=c(1e3*a(G-P.x)),ne[he]||(ne[he]={});for(var ee=B.y-Ee;ee<=B.y+Ee;ee++)ee<0||ee>=x||(ie=c(1e3*a(ee-P.y)),ne[he][ie]||(ne[he][ie]=$(n(d(he*fe,2)+d(ie*le,2))/1e3)),O=ne[he][ie],O>0&&(k=(ee*b+G)*4,V+=O,z+=O*R[k],Z+=O*R[k+1],J+=O*R[k+2],U+=O*R[k+3]))}k=(L*T+F)*4,K[k]=z/V,K[k+1]=Z/V,K[k+2]=J/V,K[k+3]=U/V}return++F<T?I(F):W}var R=y.imageData.data,W=y.ctx.createImageData(T,M),K=W.data,$=this.lanczosCreate(this.lanczosLobes),ae=this.rcpScaleX,ce=this.rcpScaleY,fe=2/this.rcpScaleX,le=2/this.rcpScaleY,ye=g(ae*this.lanczosLobes/2),Ee=g(ce*this.lanczosLobes/2),ne={},P={},B={};return I(0)},bilinearFiltering:function(y,b,x,T,M){var I,R,W,K,$,ae,ce,fe,le,ye,Ee,ne,P=0,B,F=this.rcpScaleX,L=this.rcpScaleY,G=4*(b-1),O=y.imageData,k=O.data,V=y.ctx.createImageData(T,M),z=V.data;for(ce=0;ce<M;ce++)for(fe=0;fe<T;fe++)for($=c(F*fe),ae=c(L*ce),le=F*fe-$,ye=L*ce-ae,B=4*(ae*b+$),Ee=0;Ee<4;Ee++)I=k[B+Ee],R=k[B+4+Ee],W=k[B+G+Ee],K=k[B+G+4+Ee],ne=I*(1-le)*(1-ye)+R*le*(1-ye)+W*ye*(1-le)+K*le*ye,z[P++]=ne;return V},hermiteFastResize:function(y,b,x,T,M){for(var I=this.rcpScaleX,R=this.rcpScaleY,W=g(I/2),K=g(R/2),$=y.imageData,ae=$.data,ce=y.ctx.createImageData(T,M),fe=ce.data,le=0;le<M;le++)for(var ye=0;ye<T;ye++){for(var Ee=(ye+le*T)*4,ne=0,P=0,B=0,F=0,L=0,G=0,O=0,k=(le+.5)*R,V=c(le*R);V<(le+1)*R;V++)for(var z=a(k-(V+.5))/K,Z=(ye+.5)*I,J=z*z,U=c(ye*I);U<(ye+1)*I;U++){var he=a(Z-(U+.5))/W,ie=n(J+he*he);ie>1&&ie<-1||(ne=2*ie*ie*ie-3*ie*ie+1,ne>0&&(he=4*(U+V*b),O+=ne*ae[he+3],B+=ne,ae[he+3]<255&&(ne=ne*ae[he+3]/250),F+=ne*ae[he],L+=ne*ae[he+1],G+=ne*ae[he+2],P+=ne))}fe[Ee]=F/P,fe[Ee+1]=L/P,fe[Ee+2]=G/P,fe[Ee+3]=O/B}return ce},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Contrast=c(d.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var a=n.imageData,s,g,l=a.data,g=l.length,u=Math.floor(this.contrast*255),m=259*(u+255)/(255*(259-u));for(s=0;s<g;s+=4)l[s]=m*(l[s]-128)+128,l[s+1]=m*(l[s+1]-128)+128,l[s+2]=m*(l[s+2]-128)+128}},getUniformLocations:function(n,a){return{uContrast:n.getUniformLocation(a,"uContrast")}},sendUniformData:function(n,a){n.uniform1f(a.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Saturation=c(d.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var a=n.imageData,s=a.data,l=s.length,g=-this.saturation,u,m;for(u=0;u<l;u+=4)m=Math.max(s[u],s[u+1],s[u+2]),s[u]+=m!==s[u]?(m-s[u])*g:0,s[u+1]+=m!==s[u+1]?(m-s[u+1])*g:0,s[u+2]+=m!==s[u+2]?(m-s[u+2])*g:0}},getUniformLocations:function(n,a){return{uSaturation:n.getUniformLocation(a,"uSaturation")}},sendUniformData:function(n,a){n.uniform1f(a.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Vibrance=c(d.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(this.vibrance!==0){var a=n.imageData,s=a.data,l=s.length,g=-this.vibrance,u,m,y,b;for(u=0;u<l;u+=4)m=Math.max(s[u],s[u+1],s[u+2]),y=(s[u]+s[u+1]+s[u+2])/3,b=Math.abs(m-y)*2/255*g,s[u]+=m!==s[u]?(m-s[u])*b:0,s[u+1]+=m!==s[u+1]?(m-s[u+1])*b:0,s[u+2]+=m!==s[u+2]?(m-s[u+2])*b:0}},getUniformLocations:function(n,a){return{uVibrance:n.getUniformLocation(a,"uVibrance")}},sendUniformData:function(n,a){n.uniform1f(a.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Blur=c(d.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var a=n.filterBackend.resources,s,l,g=n.imageData.width,u=n.imageData.height;a.blurLayer1||(a.blurLayer1=i.util.createCanvasElement(),a.blurLayer2=i.util.createCanvasElement()),s=a.blurLayer1,l=a.blurLayer2,(s.width!==g||s.height!==u)&&(l.width=s.width=g,l.height=s.height=u);var m=s.getContext("2d"),y=l.getContext("2d"),b=15,x,T,M,I,R=this.blur*.06*.5;for(m.putImageData(n.imageData,0,0),y.clearRect(0,0,g,u),I=-b;I<=b;I++)x=(Math.random()-.5)/4,T=I/b,M=R*T*g+x,y.globalAlpha=1-Math.abs(T),y.drawImage(s,M,x),m.drawImage(l,0,0),y.globalAlpha=1,y.clearRect(0,0,l.width,l.height);for(I=-b;I<=b;I++)x=(Math.random()-.5)/4,T=I/b,M=R*T*u+x,y.globalAlpha=1-Math.abs(T),y.drawImage(s,x,M),m.drawImage(l,0,0),y.globalAlpha=1,y.clearRect(0,0,l.width,l.height);n.ctx.drawImage(s,0,0);var W=n.ctx.getImageData(0,0,s.width,s.height);return m.globalAlpha=1,m.clearRect(0,0,s.width,s.height),W},getUniformLocations:function(n,a){return{delta:n.getUniformLocation(a,"uDelta")}},sendUniformData:function(n,a){var s=this.chooseRightDelta();n.uniform2fv(a.delta,s)},chooseRightDelta:function(){var n=1,a=[0,0],s;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),s=n*this.blur*.12,this.horizontal?a[0]=s:a[1]=s,a}}),d.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Gamma=c(d.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],d.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var a=n.imageData,s=a.data,l=this.gamma,g=s.length,u=1/l[0],m=1/l[1],y=1/l[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,g=256;b<g;b++)this.rVals[b]=Math.pow(b/255,u)*255,this.gVals[b]=Math.pow(b/255,m)*255,this.bVals[b]=Math.pow(b/255,y)*255;for(b=0,g=s.length;b<g;b+=4)s[b]=this.rVals[s[b]],s[b+1]=this.gVals[s[b+1]],s[b+2]=this.bVals[s[b+2]]},getUniformLocations:function(n,a){return{uGamma:n.getUniformLocation(a,"uGamma")}},sendUniformData:function(n,a){n.uniform3fv(a.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.Composed=c(d.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(n)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(n,a){var s=n.subFilters||[],l=s.map(function(u){return new i.Image.filters[u.type](u)}),g=new i.Image.filters.Composed({subFilters:l});return a&&a(g),g}}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.Image.filters,c=i.util.createClass;d.HueRotation=c(d.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,a=i.util.cos(n),s=i.util.sin(n),l=1/3,g=Math.sqrt(l)*s,u=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+u/3,this.matrix[1]=l*u-g,this.matrix[2]=l*u+g,this.matrix[5]=l*u+g,this.matrix[6]=a+l*u,this.matrix[7]=l*u-g,this.matrix[10]=l*u-g,this.matrix[11]=l*u+g,this.matrix[12]=a+l*u},isNeutralState:function(n){return this.calculateMatrix(),d.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),d.BaseFilter.prototype.applyTo.call(this,n)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(p){var i=p.fabric||(p.fabric={}),d=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(c),cacheProperties:i.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,a){this.styles=a?a.styles||{}:{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=i.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,a,s,l,g,u,m,y=0,b=this._textLines.length;y<b;y++)if(!(this.textAlign!=="justify"&&(y===b-1||this.isEndOfWrapping(y)))&&(l=0,g=this._textLines[y],a=this.getLineWidth(y),a<this.width&&(m=this.textLines[y].match(this._reSpacesAndTabs)))){s=m.length,n=(this.width-a)/s;for(var x=0,T=g.length;x<=T;x++)u=this.__charBounds[y][x],this._reSpaceAndTab.test(g[x])?(u.width+=n,u.kernedWidth+=n,u.left+=l,l+=n):u.left+=l}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return n.width+=a*n.zoomX,n.height+=a*n.zoomY,n},_render:function(n){var a=this.path;a&&!a.isNotVisible()&&a._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){this.paintFirst==="stroke"?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,a,s){if(n.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":n.textBaseline="middle";break;case"ascender":n.textBaseline="top";break;case"descender":n.textBaseline="bottom";break}n.font=this._getFontDeclaration(a,s)},calcTextWidth:function(){for(var n=this.getLineWidth(0),a=1,s=this._textLines.length;a<s;a++){var l=this.getLineWidth(a);l>n&&(n=l)}return n},_renderTextLine:function(n,a,s,l,g,u){this._renderChars(n,a,s,l,g,u)},_renderTextLinesBackground:function(n){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var a,s,l=n.fillStyle,g,u,m=this._getLeftOffset(),y=this._getTopOffset(),b=0,x=0,T,M,I=this.path,R,W=0,K=this._textLines.length;W<K;W++){if(a=this.getHeightOfLine(W),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",W)){y+=a;continue}g=this._textLines[W],s=this._getLineLeftOffset(W),x=0,b=0,u=this.getValueOfPropertyAt(W,0,"textBackgroundColor");for(var $=0,ae=g.length;$<ae;$++)T=this.__charBounds[W][$],M=this.getValueOfPropertyAt(W,$,"textBackgroundColor"),I?(n.save(),n.translate(T.renderLeft,T.renderTop),n.rotate(T.angle),n.fillStyle=M,M&&n.fillRect(-T.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),T.width,a/this.lineHeight),n.restore()):M!==u?(R=m+s+b,this.direction==="rtl"&&(R=this.width-R-x),n.fillStyle=u,u&&n.fillRect(R,y,x,a/this.lineHeight),b=T.left,x=T.width,u=M):x+=T.kernedWidth;M&&!I&&(R=m+s+b,this.direction==="rtl"&&(R=this.width-R-x),n.fillStyle=M,n.fillRect(R,y,x,a/this.lineHeight)),y+=a}n.fillStyle=l,this._removeShadow(n)}},getFontCache:function(n){var a=n.fontFamily.toLowerCase();i.charWidthsCache[a]||(i.charWidthsCache[a]={});var s=i.charWidthsCache[a],l=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return s[l]||(s[l]={}),s[l]},_measureChar:function(n,a,s,l){var g=this.getFontCache(a),u=this._getFontDeclaration(a),m=this._getFontDeclaration(l),y=s+n,b=u===m,x,T,M,I=a.fontSize/this.CACHE_FONT_SIZE,R;if(s&&g[s]!==void 0&&(M=g[s]),g[n]!==void 0&&(R=x=g[n]),b&&g[y]!==void 0&&(T=g[y],R=T-M),x===void 0||M===void 0||T===void 0){var W=this.getMeasuringContext();this._setTextStyles(W,a,!0)}return x===void 0&&(R=x=W.measureText(n).width,g[n]=x),M===void 0&&b&&s&&(M=W.measureText(s).width,g[s]=M),b&&T===void 0&&(T=W.measureText(y).width,g[y]=T,R=T-M),{width:x*I,kernedWidth:R*I}},getHeightOfChar:function(n,a){return this.getValueOfPropertyAt(n,a,"fontSize")},measureLine:function(n){var a=this._measureLine(n);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(n){var a=0,s,l,g=this._textLines[n],u,m,y=0,b=new Array(g.length),x=0,T,M,I=this.path,R=this.pathSide==="right";for(this.__charBounds[n]=b,s=0;s<g.length;s++)l=g[s],m=this._getGraphemeBox(l,n,s,u),b[s]=m,a+=m.kernedWidth,u=l;if(b[s]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},I){switch(M=I.segmentsInfo[I.segmentsInfo.length-1].length,T=i.util.getPointOnPath(I.path,0,I.segmentsInfo),T.x+=I.pathOffset.x,T.y+=I.pathOffset.y,this.textAlign){case"left":x=R?M-a:0;break;case"center":x=(M-a)/2;break;case"right":x=R?0:M-a;break}for(x+=this.pathStartOffset*(R?-1:1),s=R?g.length-1:0;R?s>=0:s<g.length;R?s--:s++)m=b[s],x>M?x%=M:x<0&&(x+=M),this._setGraphemeOnPath(x,m,T),x+=m.kernedWidth}return{width:a,numOfSpaces:y}},_setGraphemeOnPath:function(n,a,s){var l=n+a.kernedWidth/2,g=this.path,u=i.util.getPointOnPath(g.path,l,g.segmentsInfo);a.renderLeft=u.x-s.x,a.renderTop=u.y-s.y,a.angle=u.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(n,a,s,l,g){var u=this.getCompleteStyleDeclaration(a,s),m=l?this.getCompleteStyleDeclaration(a,s-1):{},y=this._measureChar(n,u,l,m),b=y.kernedWidth,x=y.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),x+=T,b+=T);var M={width:x,left:0,height:u.fontSize,kernedWidth:b,deltaY:u.deltaY};if(s>0&&!g){var I=this.__charBounds[a][s-1];M.left=I.left+I.width+y.kernedWidth-y.width}return M},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var a=this._textLines[n],s=this.getHeightOfChar(n,0),l=1,g=a.length;l<g;l++)s=Math.max(this.getHeightOfChar(n,l),s);return this.__lineHeights[n]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,a=0,s=0,l=this._textLines.length;s<l;s++)n=this.getHeightOfLine(s),a+=s===l-1?n/this.lineHeight:n;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,a){n.save();for(var s=0,l=this._getLeftOffset(),g=this._getTopOffset(),u=0,m=this._textLines.length;u<m;u++){var y=this.getHeightOfLine(u),b=y/this.lineHeight,x=this._getLineLeftOffset(u);this._renderTextLine(a,n,this._textLines[u],l+x,g+s+b,u),s+=y}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,a,s,l,g,u){var m=this.getHeightOfLine(u),y=this.textAlign.indexOf("justify")!==-1,b,x,T="",M,I=0,R,W=this.path,K=!y&&this.charSpacing===0&&this.isEmptyStyles(u)&&!W,$=this.direction==="ltr",ae=this.direction==="ltr"?1:-1,ce,fe=a.canvas.getAttribute("dir");if(a.save(),fe!==this.direction&&(a.canvas.setAttribute("dir",$?"ltr":"rtl"),a.direction=$?"ltr":"rtl",a.textAlign=$?"left":"right"),g-=m*this._fontSizeFraction/this.lineHeight,K){this._renderChar(n,a,u,0,s.join(""),l,g,m),a.restore();return}for(var le=0,ye=s.length-1;le<=ye;le++)R=le===ye||this.charSpacing||W,T+=s[le],M=this.__charBounds[u][le],I===0?(l+=ae*(M.kernedWidth-M.width),I+=M.width):I+=M.kernedWidth,y&&!R&&this._reSpaceAndTab.test(s[le])&&(R=!0),R||(b=b||this.getCompleteStyleDeclaration(u,le),x=this.getCompleteStyleDeclaration(u,le+1),R=this._hasStyleChanged(b,x)),R&&(W?(a.save(),a.translate(M.renderLeft,M.renderTop),a.rotate(M.angle),this._renderChar(n,a,u,le,T,-I/2,0,m),a.restore()):(ce=l,this._renderChar(n,a,u,le,T,ce,g,m)),T="",b=x,l+=ae*I,I=0);a.restore()},_applyPatternGradientTransformText:function(n){var a=i.util.createCanvasElement(),s,l=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return a.width=l,a.height=g,s=a.getContext("2d"),s.beginPath(),s.moveTo(0,0),s.lineTo(l,0),s.lineTo(l,g),s.lineTo(0,g),s.closePath(),s.translate(l/2,g/2),s.fillStyle=n.toLive(s),this._applyPatternGradientTransform(s,n),s.fill(),s.createPattern(a,"no-repeat")},handleFiller:function(n,a,s){var l,g;return s.toLive?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(l=-this.width/2,g=-this.height/2,n.translate(l,g),n[a]=this._applyPatternGradientTransformText(s),{offsetX:l,offsetY:g}):(n[a]=s.toLive(n,this),this._applyPatternGradientTransform(n,s)):(n[a]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,a){return n.lineWidth=a.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",a.stroke)},_setFillStyles:function(n,a){return this.handleFiller(n,"fillStyle",a.fill)},_renderChar:function(n,a,s,l,g,u,m){var y=this._getStyleDeclaration(s,l),b=this.getCompleteStyleDeclaration(s,l),x=n==="fillText"&&b.fill,T=n==="strokeText"&&b.stroke&&b.strokeWidth,M,I;!T&&!x||(a.save(),x&&(M=this._setFillStyles(a,b)),T&&(I=this._setStrokeStyles(a,b)),a.font=this._getFontDeclaration(b),y&&y.textBackgroundColor&&this._removeShadow(a),y&&y.deltaY&&(m+=y.deltaY),x&&a.fillText(g,u-M.offsetX,m-M.offsetY),T&&a.strokeText(g,u-I.offsetX,m-I.offsetY),a.restore())},setSuperscript:function(n,a){return this._setScript(n,a,this.superscript)},setSubscript:function(n,a){return this._setScript(n,a,this.subscript)},_setScript:function(n,a,s){var l=this.get2DCursorLocation(n,!0),g=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"fontSize"),u=this.getValueOfPropertyAt(l.lineIndex,l.charIndex,"deltaY"),m={fontSize:g*s.size,deltaY:u+g*s.baseline};return this.setSelectionStyles(m,n,a),this},_hasStyleChanged:function(n,a){return n.fill!==a.fill||n.stroke!==a.stroke||n.strokeWidth!==a.strokeWidth||n.fontSize!==a.fontSize||n.fontFamily!==a.fontFamily||n.fontWeight!==a.fontWeight||n.fontStyle!==a.fontStyle||n.deltaY!==a.deltaY},_hasStyleChangedForSvg:function(n,a){return this._hasStyleChanged(n,a)||n.overline!==a.overline||n.underline!==a.underline||n.linethrough!==a.linethrough},_getLineLeftOffset:function(n){var a=this.getLineWidth(n),s=this.width-a,l=this.textAlign,g=this.direction,m,u=0,m=this.isEndOfWrapping(n);return l==="justify"||l==="justify-center"&&!m||l==="justify-right"&&!m||l==="justify-left"&&!m?0:(l==="center"&&(u=s/2),l==="right"&&(u=s),l==="justify-center"&&(u=s/2),l==="justify-right"&&(u=s),g==="rtl"&&(u-=s),u)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(this.__lineWidths[n]!==void 0)return this.__lineWidths[n];var a=this.measureLine(n),s=a.width;return this.__lineWidths[n]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,a,s){var l=this._getStyleDeclaration(n,a);return l&&typeof l[s]<"u"?l[s]:this[s]},_renderTextDecoration:function(n,a){if(!(!this[a]&&!this.styleHas(a))){for(var s,l,g,u,m,y,b,x,T=this._getLeftOffset(),M=this._getTopOffset(),I,R,W,K,$,ae,ce,fe,le=this.path,ye=this._getWidthOfCharSpacing(),Ee=this.offsets[a],ne=0,P=this._textLines.length;ne<P;ne++){if(s=this.getHeightOfLine(ne),!this[a]&&!this.styleHas(a,ne)){M+=s;continue}b=this._textLines[ne],ae=s/this.lineHeight,u=this._getLineLeftOffset(ne),R=0,W=0,x=this.getValueOfPropertyAt(ne,0,a),fe=this.getValueOfPropertyAt(ne,0,"fill"),I=M+ae*(1-this._fontSizeFraction),l=this.getHeightOfChar(ne,0),m=this.getValueOfPropertyAt(ne,0,"deltaY");for(var B=0,F=b.length;B<F;B++)if(K=this.__charBounds[ne][B],$=this.getValueOfPropertyAt(ne,B,a),ce=this.getValueOfPropertyAt(ne,B,"fill"),g=this.getHeightOfChar(ne,B),y=this.getValueOfPropertyAt(ne,B,"deltaY"),le&&$&&ce)n.save(),n.fillStyle=fe,n.translate(K.renderLeft,K.renderTop),n.rotate(K.angle),n.fillRect(-K.kernedWidth/2,Ee*g+y,K.kernedWidth,this.fontSize/15),n.restore();else if(($!==x||ce!==fe||g!==l||y!==m)&&W>0){var L=T+u+R;this.direction==="rtl"&&(L=this.width-L-W),x&&fe&&(n.fillStyle=fe,n.fillRect(L,I+Ee*l+m,W,this.fontSize/15)),R=K.left,W=K.width,x=$,fe=ce,l=g,m=y}else W+=K.kernedWidth;var L=T+u+R;this.direction==="rtl"&&(L=this.width-L-W),n.fillStyle=ce,$&&ce&&n.fillRect(L,I+Ee*l+m,W-ye,this.fontSize/15),M+=s}this._removeShadow(n)}},_getFontDeclaration:function(n,a){var s=n||this,l=this.fontFamily,g=i.Text.genericFonts.indexOf(l.toLowerCase())>-1,u=l===void 0||l.indexOf("'")>-1||l.indexOf(",")>-1||l.indexOf('"')>-1||g?s.fontFamily:'"'+s.fontFamily+'"';return[i.isLikelyNode?s.fontWeight:s.fontStyle,i.isLikelyNode?s.fontStyle:s.fontWeight,a?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",u].join(" ")},render:function(n){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n)))},_splitTextIntoLines:function(n){for(var a=n.split(this._reNewline),s=new Array(a.length),l=[`
`],g=[],u=0;u<a.length;u++)s[u]=i.util.string.graphemeSplit(a[u]),g=g.concat(s[u],l);return g.pop(),{_unwrappedLines:s,lines:a,graphemeText:g,graphemeLines:s}},toObject:function(n){var a=c.concat(n),s=this.callSuper("toObject",a);return s.styles=d(this.styles,!0),s.path&&(s.path=this.path.toObject()),s},set:function(n,a){this.callSuper("set",n,a);var s=!1,l=!1;if(typeof n=="object")for(var g in n)g==="path"&&this.setPathInfo(),s=s||this._dimensionAffectingProps.indexOf(g)!==-1,l=l||g==="path";else s=this._dimensionAffectingProps.indexOf(n)!==-1,l=n==="path";return l&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(n,a,s){if(!n)return a(null);var l=i.parseAttributes(n,i.Text.ATTRIBUTE_NAMES),g=l.textAnchor||"left";if(s=i.util.object.extend(s?d(s):{},l),s.top=s.top||0,s.left=s.left||0,l.textDecoration){var u=l.textDecoration;u.indexOf("underline")!==-1&&(s.underline=!0),u.indexOf("overline")!==-1&&(s.overline=!0),u.indexOf("line-through")!==-1&&(s.linethrough=!0),delete s.textDecoration}"dx"in l&&(s.left+=l.dx),"dy"in l&&(s.top+=l.dy),"fontSize"in s||(s.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in n?m=n.textContent:"firstChild"in n&&n.firstChild!==null&&"data"in n.firstChild&&n.firstChild.data!==null&&(m=n.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=s.strokeWidth;s.strokeWidth=0;var b=new i.Text(m,s),x=b.getScaledHeight()/b.height,T=(b.height+b.strokeWidth)*b.lineHeight-b.height,M=T*x,I=b.getScaledHeight()+M,R=0;g==="center"&&(R=b.getScaledWidth()/2),g==="right"&&(R=b.getScaledWidth()),b.set({left:b.left-R,top:b.top-(I-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof y<"u"?y:1}),a(b)},i.Text.fromObject=function(n,a){var s=d(n),l=n.path;return delete s.path,i.Object._fromObject("Text",s,function(g){l?i.Object._fromObject("Path",l,function(u){g.set("path",u),a(g)},"path"):a(g)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(p){if(!this.styles||typeof p<"u"&&!this.styles[p])return!0;var i=typeof p>"u"?this.styles:{line:this.styles[p]};for(var d in i)for(var c in i[d])for(var n in i[d][c])return!1;return!0},styleHas:function(p,i){if(!this.styles||!p||p===""||typeof i<"u"&&!this.styles[i])return!1;var d=typeof i>"u"?this.styles:{0:this.styles[i]};for(var c in d)for(var n in d[c])if(typeof d[c][n][p]<"u")return!0;return!1},cleanStyle:function(p){if(!this.styles||!p||p==="")return!1;var i=this.styles,d=0,c,n,a=!0,s=0,l;for(var g in i){c=0;for(var u in i[g]){var l=i[g][u],m=l.hasOwnProperty(p);d++,m?(n?l[p]!==n&&(a=!1):n=l[p],l[p]===this[p]&&delete l[p]):a=!1,Object.keys(l).length!==0?c++:delete i[g][u]}c===0&&delete i[g]}for(var y=0;y<this._textLines.length;y++)s+=this._textLines[y].length;a&&d===s&&(this[p]=n,this.removeStyle(p))},removeStyle:function(p){if(!(!this.styles||!p||p==="")){var i=this.styles,d,c,n;for(c in i){d=i[c];for(n in d)delete d[n][p],Object.keys(d[n]).length===0&&delete d[n];Object.keys(d).length===0&&delete i[c]}}},_extendStyles:function(p,i){var d=this.get2DCursorLocation(p);this._getLineStyle(d.lineIndex)||this._setLineStyle(d.lineIndex),this._getStyleDeclaration(d.lineIndex,d.charIndex)||this._setStyleDeclaration(d.lineIndex,d.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(d.lineIndex,d.charIndex),i)},get2DCursorLocation:function(p,i){typeof p>"u"&&(p=this.selectionStart);for(var d=i?this._unwrappedTextLines:this._textLines,c=d.length,n=0;n<c;n++){if(p<=d[n].length)return{lineIndex:n,charIndex:p};p-=d[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:d[n-1].length<p?d[n-1].length:p}},getSelectionStyles:function(p,i,d){typeof p>"u"&&(p=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||p);for(var c=[],n=p;n<i;n++)c.push(this.getStyleAtPosition(n,d));return c},getStyleAtPosition:function(p,i){var d=this.get2DCursorLocation(p),c=i?this.getCompleteStyleDeclaration(d.lineIndex,d.charIndex):this._getStyleDeclaration(d.lineIndex,d.charIndex);return c||{}},setSelectionStyles:function(p,i,d){typeof i>"u"&&(i=this.selectionStart||0),typeof d>"u"&&(d=this.selectionEnd||i);for(var c=i;c<d;c++)this._extendStyles(c,p);return this._forceClearCache=!0,this},_getStyleDeclaration:function(p,i){var d=this.styles&&this.styles[p];return d?d[i]:null},getCompleteStyleDeclaration:function(p,i){for(var d=this._getStyleDeclaration(p,i)||{},c={},n,a=0;a<this._styleProperties.length;a++)n=this._styleProperties[a],c[n]=typeof d[n]>"u"?this[n]:d[n];return c},_setStyleDeclaration:function(p,i,d){this.styles[p][i]=d},_deleteStyleDeclaration:function(p,i){delete this.styles[p][i]},_getLineStyle:function(p){return!!this.styles[p]},_setLineStyle:function(p){this.styles[p]={}},_deleteLineStyle:function(p){delete this.styles[p]}})}(),function(){function p(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,d){this.callSuper("initialize",i,d),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,d){this[i]!==d&&(this._fireSelectionChanged(),this[i]=d),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var d=this.canvas.contextTop,c=this.canvas.viewportTransform;d.save(),d.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(d),this._clearTextArea(d),i||d.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),d=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,d):this.renderSelection(i,d),d.restore()}},_clearTextArea:function(i){var d=this.width+4,c=this.height+4;i.clearRect(-d/2,-c/2,d,c)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var d=this._getLeftOffset(),c=this._getTopOffset(),n=this._getCursorBoundariesOffsets(i);return{left:d,top:c,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var d,c,n,a=0,s=0,l,g=this.get2DCursorLocation(i);n=g.charIndex,c=g.lineIndex;for(var u=0;u<c;u++)a+=this.getHeightOfLine(u);d=this._getLineLeftOffset(c);var m=this.__charBounds[c][n];return m&&(s=m.left),this.charSpacing!==0&&n===this._textLines[c].length&&(s-=this._getWidthOfCharSpacing()),l={top:a,left:d+(s>0?s:0)},this.direction==="rtl"&&(l.left*=-1),this.cursorOffsetCache=l,this.cursorOffsetCache},renderCursor:function(i,d){var c=this.get2DCursorLocation(),n=c.lineIndex,a=c.charIndex>0?c.charIndex-1:0,s=this.getValueOfPropertyAt(n,a,"fontSize"),l=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/l,u=i.topOffset,m=this.getValueOfPropertyAt(n,a,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,d),d.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,a,"fill"),d.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,d.fillRect(i.left+i.leftOffset-g/2,u+i.top+m,g,s)},renderSelection:function(i,d){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,s=this.get2DCursorLocation(c),l=this.get2DCursorLocation(n),g=s.lineIndex,u=l.lineIndex,m=s.charIndex<0?0:s.charIndex,y=l.charIndex<0?0:l.charIndex,b=g;b<=u;b++){var x=this._getLineLeftOffset(b)||0,T=this.getHeightOfLine(b),M=0,I=0,R=0;if(b===g&&(I=this.__charBounds[g][m].left),b>=g&&b<u)R=a&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===u)if(y===0)R=this.__charBounds[u][y].left;else{var W=this._getWidthOfCharSpacing();R=this.__charBounds[u][y-1].left+this.__charBounds[u][y-1].width-W}M=T,(this.lineHeight<1||b===u&&this.lineHeight>1)&&(T/=this.lineHeight);var K=i.left+x+I,$=R-I,ae=T,ce=0;this.inCompositionMode?(d.fillStyle=this.compositionColor||"black",ae=1,ce=T):d.fillStyle=this.selectionColor,this.direction==="rtl"&&(K=this.width-K-$),d.fillRect(K,i.top+i.topOffset+ce,$,ae),i.topOffset+=M}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),d=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:d}}}),e.IText.fromObject=function(i,d){if(p(i),i.styles)for(var c in i.styles)for(var n in i.styles[c])p(i.styles[c][n]);e.Object._fromObject("IText",i,d,"text")}}(),function(){var p=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var d=i.canvas;d&&(d._hasITextHandlers||(d._hasITextHandlers=!0,i._initCanvasHandlers(d)),d._iTextInstances=d._iTextInstances||[],d._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var d=i.canvas;d&&(d._iTextInstances=d._iTextInstances||[],e.util.removeFromArray(d._iTextInstances,i),d._iTextInstances.length===0&&(d._hasITextHandlers=!1,i._removeCanvasHandlers(d)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(d){d.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,d,c,n){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",d,{duration:c,onComplete:function(){a.isAborted||i[n]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var d=this,c=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){d._tick()},c)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,d=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&d&&d.clearContext(d.contextTop||d.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var d=0,c=i-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)d++,c--;for(;/\S/.test(this._text[c])&&c>-1;)d++,c--;return i-d},findWordBoundaryRight:function(i){var d=0,c=i;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)d++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)d++,c++;return i+d},findLineBoundaryLeft:function(i){for(var d=0,c=i-1;!/\n/.test(this._text[c])&&c>-1;)d++,c--;return i-d},findLineBoundaryRight:function(i){for(var d=0,c=i;!/\n/.test(this._text[c])&&c<this._text.length;)d++,c++;return i+d},searchWordBoundary:function(i,d){for(var c=this._text,n=this._reSpace.test(c[i])?i-1:i,a=c[n],s=e.reNonWord;!s.test(a)&&n>0&&n<c.length;)n+=d,a=c[n];return s.test(a)&&(n+=d===1?0:1),n},selectWord:function(i){i=i||this.selectionStart;var d=this.searchWordBoundary(i,-1),c=this.searchWordBoundary(i,1);this.selectionStart=d,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var d=this.findLineBoundaryLeft(i),c=this.findLineBoundaryRight(i);return this.selectionStart=d,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(d){d.selected=!1,d.isEditing&&d.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var d=this.getSelectionStartFromPointer(i.e),c=this.selectionStart,n=this.selectionEnd;(d!==this.__selectionStartOnMouseDown||c===n)&&(c===d||n===d)||(d>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=d):(this.selectionStart=d,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,d,c){var n=c.slice(0,i),a=e.util.string.graphemeSplit(n).length;if(i===d)return{selectionStart:a,selectionEnd:a};var s=c.slice(i,d),l=e.util.string.graphemeSplit(s).length;return{selectionStart:a,selectionEnd:a+l}},fromGraphemeToStringSelection:function(i,d,c){var n=c.slice(0,i),a=n.join("").length;if(i===d)return{selectionStart:a,selectionEnd:a};var s=c.slice(i,d),l=s.join("").length;return{selectionStart:a,selectionEnd:a+l}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,d=this._getCursorBoundaries(i),c=this.get2DCursorLocation(i),n=c.lineIndex,a=c.charIndex,s=this.getValueOfPropertyAt(n,a,"fontSize")*this.lineHeight,l=d.leftOffset,g=this.calcTransformMatrix(),u={x:d.left+l,y:d.top+d.topOffset+s},m=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/m,x=y.height/m,T=b-s,M=x-s,I=y.clientWidth/b,R=y.clientHeight/x;return u=e.util.transformPoint(u,g),u=e.util.transformPoint(u,this.canvas.viewportTransform),u.x*=I,u.y*=R,u.x<0&&(u.x=0),u.x>T&&(u.x=T),u.y<0&&(u.y=0),u.y>M&&(u.y=M),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,d=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,d&&(d.blur&&d.blur(),d.parentNode&&d.parentNode.removeChild(d)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,d){var c=this.get2DCursorLocation(i,!0),n=this.get2DCursorLocation(d,!0),a=c.lineIndex,s=c.charIndex,l=n.lineIndex,g=n.charIndex,u,m;if(a!==l){if(this.styles[a])for(u=s;u<this._unwrappedTextLines[a].length;u++)delete this.styles[a][u];if(this.styles[l])for(u=g;u<this._unwrappedTextLines[l].length;u++)m=this.styles[l][u],m&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+u-g]=m);for(u=a+1;u<=l;u++)delete this.styles[u];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){m=this.styles[a];var y=g-s,b,x;for(u=s;u<g;u++)delete m[u];for(x in this.styles[a])b=parseInt(x,10),b>=g&&(m[b-y]=m[x],delete m[x])}},shiftLineStyles:function(i,d){var c=p(this.styles);for(var n in this.styles){var a=parseInt(n,10);a>i&&(this.styles[a+d]=c[a],c[a-d]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,d,c,n){var a,s={},l=!1,g=this._unwrappedTextLines[i].length===d;c||(c=1),this.shiftLineStyles(i,c),this.styles[i]&&(a=this.styles[i][d===0?d:d-1]);for(var u in this.styles[i]){var m=parseInt(u,10);m>=d&&(l=!0,s[m-d]=this.styles[i][u],g&&d===0||delete this.styles[i][u])}var y=!1;for(l&&!g&&(this.styles[i+c]=s,y=!0),y&&c--;c>0;)n&&n[c-1]?this.styles[i+c]={0:p(n[c-1])}:a?this.styles[i+c]={0:p(a)}:delete this.styles[i+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(i,d,c,n){this.styles||(this.styles={});var a=this.styles[i],s=a?p(a):{};c||(c=1);for(var l in s){var g=parseInt(l,10);g>=d&&(a[g+c]=s[g],s[g-c]||delete a[g])}if(this._forceClearCache=!0,n){for(;c--;)Object.keys(n[c]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][d+c]=p(n[c]));return}if(a)for(var u=a[d?d-1:1];u&&c--;)this.styles[i][d+c]=p(u)},insertNewStyleBlock:function(i,d,c){for(var n=this.get2DCursorLocation(d,!0),a=[0],s=0,l=0;l<i.length;l++)i[l]===`
`?(s++,a[s]=0):a[s]++;a[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,a[0],c),c=c&&c.slice(a[0]+1)),s&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+a[0],s);for(var l=1;l<s;l++)a[l]>0?this.insertCharStyleObject(n.lineIndex+l,0,a[l],c):c&&this.styles[n.lineIndex+l]&&c[0]&&(this.styles[n.lineIndex+l][0]=c[0]),c=c&&c.slice(a[l]+1);a[l]>0&&this.insertCharStyleObject(n.lineIndex+l,0,a[l],c)},setSelectionStartEndWithShift:function(i,d,c){c<=i?(d===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=c):c>i&&c<d?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(d===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=d),this.selectionEnd=c)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(p){if(this.canvas){this.__newClickTime=+new Date;var i=p.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",p),this._stopEvent(p.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(p){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===p.x&&this.__lastPointer.y===p.y},_stopEvent:function(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(p){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(p.e))},tripleClickHandler:function(p){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(p.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(p){!this.canvas||!this.editable||p.e.button&&p.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(p.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(p){!this.canvas||!this.editable||p.e.button&&p.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(p){if(this.__isMousedown=!1,!(!this.editable||this.group||p.transform&&p.transform.actionPerformed||p.e.button&&p.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(p.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(p){var i=this.getSelectionStartFromPointer(p),d=this.selectionStart,c=this.selectionEnd;p.shiftKey?this.setSelectionStartEndWithShift(d,c,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(p){for(var i=this.getLocalPointer(p),d=0,c=0,n=0,a=0,s=0,l,g,u=0,m=this._textLines.length;u<m&&n<=i.y;u++)n+=this.getHeightOfLine(u)*this.scaleY,s=u,u>0&&(a+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));l=this._getLineLeftOffset(s),c=l*this.scaleX,g=this._textLines[s],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+c);for(var y=0,b=g.length;y<b&&(d=c,c+=this.__charBounds[s][y].kernedWidth*this.scaleX,c<=i.x);y++)a++;return this._getNewSelectionStartFromOffset(i,d,c,a,b)},_getNewSelectionStartFromOffset:function(p,i,d,c,n){var a=p.x-i,s=d-p.x,l=s>a||s<0?0:1,g=c+l;return this.flipX&&(g=n-g),g>this._text.length&&(g=this._text.length),g}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var p=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+p.top+"; left: "+p.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+p.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(p){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(p.keyCode in i)this[i[p.keyCode]](p);else if(p.keyCode in this.ctrlKeysMapDown&&(p.ctrlKey||p.metaKey))this[this.ctrlKeysMapDown[p.keyCode]](p);else return;p.stopImmediatePropagation(),p.preventDefault(),p.keyCode>=33&&p.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(p){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(p.keyCode in this.ctrlKeysMapUp&&(p.ctrlKey||p.metaKey))this[this.ctrlKeysMapUp[p.keyCode]](p);else return;p.stopImmediatePropagation(),p.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(p){var i=this.fromPaste;if(this.fromPaste=!1,p&&p.stopPropagation(),!!this.isEditing){var d=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,n=d.length,a,s,l=n-c,g=this.selectionStart,u=this.selectionEnd,m=g!==u,y,b,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=g>T.selectionStart;m?(a=this._text.slice(g,u),l+=u-g):n<c&&(M?a=this._text.slice(u+l,u):a=this._text.slice(g,g-l)),s=d.slice(T.selectionEnd-l,T.selectionEnd),a&&a.length&&(s.length&&(y=this.getSelectionStyles(g,g+1,!1),y=s.map(function(){return y[0]})),m?(b=g,x=u):M?(b=u-a.length,x=u):(b=u,x=u+a.length),this.removeStyleFromTo(b,x)),s.length&&(i&&s.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(s,g,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(p){this.compositionStart=p.target.selectionStart,this.compositionEnd=p.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(p){return p&&p.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(p,i){var d=this._getLineLeftOffset(p),c;return i>0&&(c=this.__charBounds[p][i-1],d+=c.left+c.width),d},getDownCursorOffset:function(p,i){var d=this._getSelectionForOffset(p,i),c=this.get2DCursorLocation(d),n=c.lineIndex;if(n===this._textLines.length-1||p.metaKey||p.keyCode===34)return this._text.length-d;var a=c.charIndex,s=this._getWidthBeforeCursor(n,a),l=this._getIndexOnLine(n+1,s),g=this._textLines[n].slice(a);return g.length+l+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(p,i){return p.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(p,i){var d=this._getSelectionForOffset(p,i),c=this.get2DCursorLocation(d),n=c.lineIndex;if(n===0||p.metaKey||p.keyCode===33)return-d;var a=c.charIndex,s=this._getWidthBeforeCursor(n,a),l=this._getIndexOnLine(n-1,s),g=this._textLines[n].slice(0,a),u=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+l-g.length+(1-u)},_getIndexOnLine:function(p,i){for(var d=this._textLines[p],c=this._getLineLeftOffset(p),n=c,a=0,s,l,g=0,u=d.length;g<u;g++)if(s=this.__charBounds[p][g].width,n+=s,n>i){l=!0;var m=n-s,y=n,b=Math.abs(m-i),x=Math.abs(y-i);a=x<b?g:g-1;break}return l||(a=d.length-1),a},moveCursorDown:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",p)},moveCursorUp:function(p){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",p)},_moveCursorUpOrDown:function(p,i){var d="get"+p+"CursorOffset",c=this[d](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(p){var i=this._selectionDirection==="left"?this.selectionStart+p:this.selectionEnd+p;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),p!==0},moveCursorWithoutShift:function(p){return p<0?(this.selectionStart+=p,this.selectionEnd=this.selectionStart):(this.selectionEnd+=p,this.selectionStart=this.selectionEnd),p!==0},moveCursorLeft:function(p){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",p)},_move:function(p,i,d){var c;if(p.altKey)c=this["findWordBoundary"+d](this[i]);else if(p.metaKey||p.keyCode===35||p.keyCode===36)c=this["findLineBoundary"+d](this[i]);else return this[i]+=d==="Left"?-1:1,!0;if(typeof c!==void 0&&this[i]!==c)return this[i]=c,!0},_moveLeft:function(p,i){return this._move(p,i,"Left")},_moveRight:function(p,i){return this._move(p,i,"Right")},moveCursorLeftWithoutShift:function(p){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(p,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(p){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(p,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(p,"selectionStart")},moveCursorRight:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",p)},_moveCursorLeftOrRight:function(p,i){var d="moveCursor"+p+"With";this._currentCursorOpacity=1,i.shiftKey?d+="Shift":d+="outShift",this[d](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(p){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(p,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(p,"selectionEnd")},moveCursorRightWithoutShift:function(p){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(p,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(p,i){typeof i>"u"&&(i=p+1),this.removeStyleFromTo(p,i),this._text.splice(p,i-p),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(p,i,d,c){typeof c>"u"&&(c=d),c>d&&this.removeStyleFromTo(d,c);var n=e.util.string.graphemeSplit(p);this.insertNewStyleBlock(n,d,i),this._text=[].concat(this._text.slice(0,d),n,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var p=e.util.toFixed,i=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var d=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(d.textTop,d.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(d){var c=!0,n=this.getSvgTextDecoration(this);return[d.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",d.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(d,c){var n=[],a=[],s=d,l;this._setSVGBg(a);for(var g=0,u=this._textLines.length;g<u;g++)l=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(a,g,c+l,s),this._setSVGTextLineText(n,g,c+l,s),s+=this.getHeightOfLine(g);return{textSpans:n,textBgRects:a}},_createTextCharSpan:function(d,c,n,a){var s=d!==d.trim()||d.match(i),l=this.getSvgSpanStyles(c,s),g=l?'style="'+l+'"':"",u=c.deltaY,m="",y=e.Object.NUM_FRACTION_DIGITS;return u&&(m=' dy="'+p(u,y)+'" '),['<tspan x="',p(n,y),'" y="',p(a,y),'" ',m,g,">",e.util.string.escapeXml(d),"</tspan>"].join("")},_setSVGTextLineText:function(d,c,n,a){var s=this.getHeightOfLine(c),l=this.textAlign.indexOf("justify")!==-1,g,u,m="",y,b,x=0,T=this._textLines[c],M;a+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var I=0,R=T.length-1;I<=R;I++)M=I===R||this.charSpacing,m+=T[I],y=this.__charBounds[c][I],x===0?(n+=y.kernedWidth-y.width,x+=y.width):x+=y.kernedWidth,l&&!M&&this._reSpaceAndTab.test(T[I])&&(M=!0),M||(g=g||this.getCompleteStyleDeclaration(c,I),u=this.getCompleteStyleDeclaration(c,I+1),M=this._hasStyleChangedForSvg(g,u)),M&&(b=this._getStyleDeclaration(c,I)||{},d.push(this._createTextCharSpan(m,b,n,a)),m="",g=u,n+=x,x=0)},_pushTextBgRect:function(d,c,n,a,s,l){var g=e.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(c),' x="',p(n,g),'" y="',p(a,g),'" width="',p(s,g),'" height="',p(l,g),`"></rect>
`)},_setSVGTextLineBg:function(d,c,n,a){for(var s=this._textLines[c],l=this.getHeightOfLine(c)/this.lineHeight,g=0,u=0,m,y,b=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),x=0,T=s.length;x<T;x++)m=this.__charBounds[c][x],y=this.getValueOfPropertyAt(c,x,"textBackgroundColor"),y!==b?(b&&this._pushTextBgRect(d,b,n+u,a,g,l),u=m.left,g=m.width,b=y):g+=m.kernedWidth;y&&this._pushTextBgRect(d,y,n+u,a,g,l)},_getFillAttributes:function(d){var c=d&&typeof d=="string"?new e.Color(d):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+d+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(d){for(var c=0,n=0,a=0;a<d;a++)c+=this.getHeightOfLine(a);return n=this.getHeightOfLine(a),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(d){var c=e.Object.prototype.getSvgStyles.call(this,d);return c+" white-space: pre;"}})}(),function(p){var i=p.fabric||(p.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(d){for(var c=0,n=0,a=0,s={},l=0;l<d.graphemeLines.length;l++)d.graphemeText[a]===`
`&&l>0?(n=0,a++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(d.graphemeText[a])&&l>0&&(n++,a++),s[l]={line:c,offset:n},a+=d.graphemeLines[l].length,n+=d.graphemeLines[l].length;return s},styleHas:function(d,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];n&&(c=n.line)}return i.Text.prototype.styleHas.call(this,d,c)},isEmptyStyles:function(d){if(!this.styles)return!0;var c=0,n=d+1,a,s,l=!1,g=this._styleMap[d],u=this._styleMap[d+1];g&&(d=g.line,c=g.offset),u&&(n=u.line,l=n===d,a=u.offset),s=typeof d>"u"?this.styles:{line:this.styles[d]};for(var m in s)for(var y in s[m])if(y>=c&&(!l||y<a))for(var b in s[m][y])return!1;return!0},_getStyleDeclaration:function(d,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[d];if(!n)return null;d=n.line,c=n.offset+c}return this.callSuper("_getStyleDeclaration",d,c)},_setStyleDeclaration:function(d,c,n){var a=this._styleMap[d];d=a.line,c=a.offset+c,this.styles[d][c]=n},_deleteStyleDeclaration:function(d,c){var n=this._styleMap[d];d=n.line,c=n.offset+c,delete this.styles[d][c]},_getLineStyle:function(d){var c=this._styleMap[d];return!!this.styles[c.line]},_setLineStyle:function(d){var c=this._styleMap[d];this.styles[c.line]={}},_wrapText:function(d,c){var n=[],a;for(this.isWrapping=!0,a=0;a<d.length;a++)n=n.concat(this._wrapLine(d[a],a,c));return this.isWrapping=!1,n},_measureWord:function(d,c,n){var a=0,s,l=!0;n=n||0;for(var g=0,u=d.length;g<u;g++){var m=this._getGraphemeBox(d[g],c,g+n,s,l);a+=m.kernedWidth,s=d[g]}return a},_wrapLine:function(d,c,n,K){var s=0,l=this.splitByGrapheme,g=[],u=[],m=l?i.util.string.graphemeSplit(d):d.split(this._wordJoiners),y="",b=0,x=l?"":" ",T=0,M=0,I=0,R=!0,W=this._getWidthOfCharSpacing(),K=K||0;m.length===0&&m.push([]),n-=K;for(var $=0;$<m.length;$++)y=l?m[$]:i.util.string.graphemeSplit(m[$]),T=this._measureWord(y,c,b),b+=y.length,s+=M+T-W,s>n&&!R?(g.push(u),u=[],s=T,R=!0):s+=W,!R&&!l&&u.push(x),u=u.concat(y),M=l?0:this._measureWord([x],c,b),b++,R=!1,T>I&&(I=T);return $&&g.push(u),I+K>this.dynamicMinWidth&&(this.dynamicMinWidth=I-W+K),g},isEndOfWrapping:function(d){return!this._styleMap[d+1]||this._styleMap[d+1].line!==this._styleMap[d].line},missingNewlineOffset:function(d){return this.splitByGrapheme?this.isEndOfWrapping(d)?1:0:1},_splitTextIntoLines:function(d){for(var c=i.Text.prototype._splitTextIntoLines.call(this,d),n=this._wrapText(c.lines,this.width),a=new Array(n.length),s=0;s<n.length;s++)a[s]=n[s].join("");return c.lines=a,c.graphemeLines=n,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var d={};for(var c in this._styleMap)this._textLines[c]&&(d[this._styleMap[c].line]=1);for(var c in this.styles)d[c]||delete this.styles[c]},toObject:function(d){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(d))}}),i.Textbox.fromObject=function(d,c){return i.Object._fromObject("Textbox",d,c,"text")}}(t),function(){var p=e.controlsUtils,i=p.scaleSkewCursorStyleHandler,d=p.scaleCursorStyleHandler,c=p.scalingEqually,n=p.scalingYOrSkewingX,a=p.scalingXOrSkewingY,s=p.scaleOrSkewActionName,l=e.Object.prototype.controls;if(l.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:a,getActionName:s}),l.mr=new e.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:a,getActionName:s}),l.mb=new e.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:n,getActionName:s}),l.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:n,getActionName:s}),l.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:d,actionHandler:c}),l.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:d,actionHandler:c}),l.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:d,actionHandler:c}),l.br=new e.Control({x:.5,y:.5,cursorStyleHandler:d,actionHandler:c}),l.mtr=new e.Control({x:0,y:-.5,actionHandler:p.rotationWithSnapping,cursorStyleHandler:p.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var g=e.Textbox.prototype.controls={};g.mtr=l.mtr,g.tr=l.tr,g.br=l.br,g.tl=l.tl,g.bl=l.bl,g.mt=l.mt,g.mb=l.mb,g.mr=new e.Control({x:.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),g.ml=new e.Control({x:-.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}(),function(){e.Object.ENLIVEN_PROPS.push("eraser");var p=e.Object.prototype._drawClipPath,i=e.Object.prototype.needsItsOwnCache,d=e.Object.prototype.toObject,c=e.Object.prototype.getSvgCommons,n=e.Object.prototype._createBaseClipPathSVGMarkup,a=e.Object.prototype._createBaseSVGMarkup;e.Object.prototype.cacheProperties.push("eraser"),e.Object.prototype.stateProperties.push("eraser"),e.util.object.extend(e.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return i.call(this)||!!this.eraser},_drawClipPath:function(g,u){if(p.call(this,g,u),this.eraser){var m=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:m.x,height:m.y}),p.call(this,g,this.eraser)}},toObject:function(g){var u=d.call(this,["erasable"].concat(g));return this.eraser&&!this.eraser.excludeFromExport&&(u.eraser=this.eraser.toObject(g)),u},getSvgCommons:function(){return c.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(g){return this.eraser?(this.eraser.clipPathId="MASK_"+e.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(g),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(g,u){return[this._createEraserSVGMarkup(u&&u.reviver),n.call(this,g,u)].join("")},_createBaseSVGMarkup:function(g,u){return[this._createEraserSVGMarkup(u&&u.reviver),a.call(this,g,u)].join("")}});var s=e.Group.prototype._restoreObjectsState;e.util.object.extend(e.Group.prototype,{_addEraserPathToObjects:function(g){this._objects.forEach(function(u){e.EraserBrush.prototype._addPathToObjectEraser.call(e.EraserBrush.prototype,u,g)})},applyEraserToObjects:function(){var g=this,u=this.eraser;if(u){delete this.eraser;var m=g.calcTransformMatrix();u.clone(function(y){var b=g.clipPath;y.getObjects("path").forEach(function(x){var T=e.util.multiplyTransformMatrices(m,x.calcTransformMatrix());e.util.applyTransformToObject(x,T),b?b.clone(function(M){var I=e.EraserBrush.prototype.applyClipPathToPath.call(e.EraserBrush.prototype,x,M,m);g._addEraserPathToObjects(I)},["absolutePositioned","inverted"]):g._addEraserPathToObjects(x)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),s.call(this)}}),e.Eraser=e.util.createClass(e.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(g){g.save(),g.fillStyle="black",g.fillRect(-this.width/2,-this.height/2,this.width,this.height),g.restore(),this.callSuper("drawObject",g)},_getBounds:function(){},_toSVG:function(g){var u=["<g ","COMMON_PARTS",` >
`],m=-this.width/2,y=-this.height/2,b=["<rect ",'fill="white" ','x="',m,'" y="',y,'" width="',this.width,'" height="',this.height,`" />
`].join("");u.push("		",b);for(var x=0,T=this._objects.length;x<T;x++)u.push("		",this._objects[x].toSVG(g));return u.push(`</g>
`),u}}),e.Eraser.fromObject=function(g,u){var m=g.objects;e.util.enlivenObjects(m,function(y){var b=e.util.object.clone(g,!0);delete b.objects,e.util.enlivenObjectEnlivables(g,b,function(){u&&u(new e.Eraser(y,b,!0))})})};var l=e.Canvas.prototype._renderOverlay;e.util.object.extend(e.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(g){l.call(this,g),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),e.EraserBrush=e.util.createClass(e.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(g){return g.erasable!==!1},_prepareCollectionTraversal:function(g,u,m){g.forEachObject(function(y){y.forEachObject&&y.erasable==="deep"?this._prepareCollectionTraversal(y,u,m):!this.inverted&&y.erasable&&y.visible?(y.visible=!1,g.dirty=!0,m.visibility.push(y),m.collection.push(g)):this.inverted&&y.visible&&(y.erasable&&y.eraser?(y.eraser.inverted=!0,y.dirty=!0,g.dirty=!0,m.eraser.push(y),m.collection.push(g)):(y.visible=!1,g.dirty=!0,m.visibility.push(y),m.collection.push(g)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=e.util.createCanvasElement());var g=this._patternCanvas;g.width=this.canvas.width,g.height=this.canvas.height;var u=g.getContext("2d");if(this.canvas._isRetinaScaling()){var m=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(m,g,u)}var y=this.canvas.backgroundImage,b=y&&this._isErasable(y),x=this.canvas.overlayImage,T=x&&this._isErasable(x);if(!this.inverted&&(y&&!b||this.canvas.backgroundColor))b&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(u),b&&(this.canvas.backgroundImage=y);else if(this.inverted&&y&&b){var M=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(u),this.canvas.backgroundColor=M}u.save(),u.transform.apply(u,this.canvas.viewportTransform);var I={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,u,I),this.canvas._renderObjects(u,this.canvas._objects),I.visibility.forEach(function(R){R.visible=!0}),I.eraser.forEach(function(R){R.eraser.inverted=!1,R.dirty=!0}),I.collection.forEach(function(R){R.dirty=!0}),u.restore(),!this.inverted&&(x&&!T||this.canvas.overlayColor))T&&(this.canvas.overlayImage=void 0),l.call(this.canvas,u),T&&(this.canvas.overlayImage=x);else if(this.inverted&&x&&T){var M=this.canvas.overlayColor;this.canvas.overlayColor=void 0,l.call(this.canvas,u),this.canvas.overlayColor=M}},_setBrushStyles:function(g){this.callSuper("_setBrushStyles",g),g.strokeStyle="black"},_saveAndTransform:function(g){this.callSuper("_saveAndTransform",g),this._setBrushStyles(g),g.globalCompositeOperation=g===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(g,u){this.canvas._isMainEvent(u.e)&&(this._prepareForDrawing(g),this._captureDrawingPath(g),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var g;this.inverted||(g=this.canvas.getContext(),this.callSuper("_render",g)),g=this.canvas.contextTop,this.canvas.clearContext(g),this.callSuper("_render",g),g.save();var u=this.canvas.getRetinaScaling(),m=1/u;g.scale(m,m),g.globalCompositeOperation="source-in",g.drawImage(this._patternCanvas,0,0),g.restore()},createPath:function(g){var u=this.callSuper("createPath",g);return u.globalCompositeOperation=this.inverted?"source-over":"destination-out",u.stroke=this.inverted?"white":"black",u},applyClipPathToPath:function(g,u,m){var y=e.util.invertTransform(g.calcTransformMatrix()),b=u.calcTransformMatrix(),x=u.absolutePositioned?y:e.util.multiplyTransformMatrices(y,m);return u.absolutePositioned=!1,e.util.applyTransformToObject(u,e.util.multiplyTransformMatrices(x,b)),g.clipPath=g.clipPath?e.util.mergeClipPaths(u,g.clipPath):u,g},clonePathWithClipPath:function(g,u,m){var y=u.calcTransformMatrix(),b=u.clipPath,x=this;g.clone(function(T){b.clone(function(M){m(x.applyClipPathToPath(T,M,y))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(g,u){var m=this;if(g.forEachObject&&g.erasable==="deep"){var y=g._objects.filter(function(x){return x.erasable});y.length>0&&g.clipPath?this.clonePathWithClipPath(u,g,function(x){y.forEach(function(T){m._addPathToObjectEraser(T,x)})}):y.length>0&&y.forEach(function(x){m._addPathToObjectEraser(x,u)});return}var b=g.eraser;b||(b=new e.Eraser,g.eraser=b),u.clone(function(x){var T=e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),x.calcTransformMatrix());e.util.applyTransformToObject(x,T),b.addWithUpdate(x),g.set("dirty",!0),g.fire("erasing:end",{path:x}),g.group&&Array.isArray(m.__subTargets)&&m.__subTargets.push(g)})},applyEraserToCanvas:function(g){var u=this.canvas,m={};return["backgroundImage","overlayImage"].forEach(function(y){var b=u[y];b&&b.erasable&&(this._addPathToObjectEraser(b,g),m[y]=b)},this),m},_finalizeAndAddPath:function(){var g=this.canvas.contextTop,u=this.canvas;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),u.clearContext(u.contextTop),this._isErasing=!1;var m=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!m||this._isEmptySVGPath(m)){u.fire("erasing:end"),u.requestRenderAll();return}var y=this.createPath(m);y.setCoords(),u.fire("before:path:created",{path:y});var b=this.applyEraserToCanvas(y),x=this;this.__subTargets=[];var T=[];u.forEachObject(function(M){M.erasable&&M.intersectsWithObject(y,!0,!0)&&(x._addPathToObjectEraser(M,y),T.push(M))}),u.fire("erasing:end",{path:y,targets:T,subTargets:this.__subTargets,drawables:b}),delete this.__subTargets,u.requestRenderAll(),this._resetShadow(),u.fire("path:created",{path:y})}})}()})(vr);class ti{constructor(e,o){Le(this,"core");Le(this,"config");Le(this,"c");Le(this,"name");this.core=e,this.config=o,this.c=e.c,this.name="unknown"}}class pb extends ti{constructor(o,h){super(o,h);Le(this,"onPathCreated");this.onPathCreated=v=>{const w=v.path;w.selectable=!1,w.hoverCursor="default"}}onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new vr.fabric.EraserBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*4/this.core.zoomMin,this.c.on("path:created",this.onPathCreated)}onDeselect(){this.c.isDrawingMode=!1,this.c.off("path:created",this.onPathCreated)}}class vb extends ti{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new vr.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*1/this.core.zoomMin,this.c.freeDrawingBrush.color=this.config.color.code}onDeselect(){this.c.isDrawingMode=!1}}function mb(t,e){var o=parseInt(t.slice(1,3),16),h=parseInt(t.slice(3,5),16),v=parseInt(t.slice(5,7),16);return e?"rgba("+o+", "+h+", "+v+", "+e+")":"rgb("+o+", "+h+", "+v+")"}class yb extends ti{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new vr.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*8/this.core.zoomMin,this.c.freeDrawingBrush.color=mb(this.config.color.code,.4),this.c.isDrawingMode=!0}onDeselect(){this.c.isDrawingMode=!1}}class _b extends ti{constructor(o,h=null){super(o,h);Le(this,"touchPositions");Le(this,"onMouseDown");Le(this,"isDragging");Le(this,"onMouseUp");Le(this,"onMouseMove");Le(this,"onObjectSelected");Le(this,"onSelectionCleared");Le(this,"onTouchDrag");Le(this,"lastPosX");Le(this,"lastPosY");Le(this,"pausePanning");this.touchPositions={},this.onMouseDown=v=>{const w=v.e;if(w.type==="touchstart"){this.isDragging=w.touches.length===1;for(const C of w.changedTouches)this.touchPositions[C.identifier]={x:C.clientX,y:C.clientY}}else this.isDragging=!0,this.lastPosX=w.clientX,this.lastPosY=w.clientY},this.onMouseUp=v=>{const w=v.e;if(w.type==="touchend")for(const C of w.changedTouches)delete this.touchPositions[C.identifier];this.c.setViewportTransform(this.c.viewportTransform),this.isDragging=!1},this.onMouseMove=v=>{if(v.e.type==="mousemove"&&this.isDragging){const w=v.e;this.core.pan(w.clientX-this.lastPosX,w.clientY-this.lastPosY),this.lastPosX=w.clientX,this.lastPosY=w.clientY}},this.onObjectSelected=v=>{this.pausePanning=!0},this.onSelectionCleared=v=>{this.pausePanning=!1},this.onTouchDrag=v=>{const w=v.e;if(w.type==="touchmove"&&this.isDragging){if(w.touches.length>1)return;for(const C of w.changedTouches){const E=this.touchPositions[C.identifier];if(!E)return;this.core.pan(C.clientX-E.x,C.clientY-E.y),this.touchPositions[C.identifier]={x:C.clientX,y:C.clientY}}}}}onSelect(){this.c.on("mouse:down",this.onMouseDown),this.c.on("mouse:move",this.onMouseMove),this.c.on("mouse:up",this.onMouseUp),this.c.on("object:selected",this.onObjectSelected),this.c.on("selection:cleared",this.onSelectionCleared),this.c.on("touch:drag",this.onTouchDrag)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:move",this.onMouseMove),this.c.off("mouse:up",this.onMouseUp),this.c.off("object:selected",this.onObjectSelected),this.c.off("selection:cleared",this.onSelectionCleared),this.c.off("touch:drag",this.onTouchDrag)}}class td extends ti{constructor(e,o=null){super(e,o)}onDeselect(){this.c.discardActiveObject().renderAll()}}class bb extends ti{constructor(o,h=null){super(o,h);Le(this,"selected",!1);Le(this,"onMouseDownBefore",o=>{this.selected=!!this.c.getActiveObject()});Le(this,"onMouseDown",o=>{if(this.selected)return;const h=o.e,v={x:h.clientX,y:h.clientY};this.core.addText("text",v)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}function Ys(t){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ys(t)}function ri(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Zt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function tn(t){Zt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Ys(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wb(t,e){Zt(2,arguments);var o=tn(t).getTime(),h=ri(e);return new Date(o+h)}var xb={};function Ws(){return xb}function Cb(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Sb(t){return Zt(1,arguments),t instanceof Date||Ys(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Tb(t){if(Zt(1,arguments),!Sb(t)&&typeof t!="number")return!1;var e=tn(t);return!isNaN(Number(e))}function Eb(t,e){Zt(2,arguments);var o=ri(e);return wb(t,-o)}var Ob=864e5;function Ab(t){Zt(1,arguments);var e=tn(t),o=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var h=e.getTime(),v=o-h;return Math.floor(v/Ob)+1}function Hs(t){Zt(1,arguments);var e=1,o=tn(t),h=o.getUTCDay(),v=(h<e?7:0)+h-e;return o.setUTCDate(o.getUTCDate()-v),o.setUTCHours(0,0,0,0),o}function rd(t){Zt(1,arguments);var e=tn(t),o=e.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(o+1,0,4),h.setUTCHours(0,0,0,0);var v=Hs(h),w=new Date(0);w.setUTCFullYear(o,0,4),w.setUTCHours(0,0,0,0);var C=Hs(w);return e.getTime()>=v.getTime()?o+1:e.getTime()>=C.getTime()?o:o-1}function Pb(t){Zt(1,arguments);var e=rd(t),o=new Date(0);o.setUTCFullYear(e,0,4),o.setUTCHours(0,0,0,0);var h=Hs(o);return h}var Db=6048e5;function Mb(t){Zt(1,arguments);var e=tn(t),o=Hs(e).getTime()-Pb(e).getTime();return Math.round(o/Db)+1}function zs(t,e){var o,h,v,w,C,E,D,p;Zt(1,arguments);var i=Ws(),d=ri((o=(h=(v=(w=e==null?void 0:e.weekStartsOn)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&v!==void 0?v:i.weekStartsOn)!==null&&h!==void 0?h:(D=i.locale)===null||D===void 0||(p=D.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&o!==void 0?o:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=tn(t),n=c.getUTCDay(),a=(n<d?7:0)+n-d;return c.setUTCDate(c.getUTCDate()-a),c.setUTCHours(0,0,0,0),c}function nd(t,e){var o,h,v,w,C,E,D,p;Zt(1,arguments);var i=tn(t),d=i.getUTCFullYear(),c=Ws(),n=ri((o=(h=(v=(w=e==null?void 0:e.firstWeekContainsDate)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.firstWeekContainsDate)!==null&&v!==void 0?v:c.firstWeekContainsDate)!==null&&h!==void 0?h:(D=c.locale)===null||D===void 0||(p=D.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(n>=1&&n<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var a=new Date(0);a.setUTCFullYear(d+1,0,n),a.setUTCHours(0,0,0,0);var s=zs(a,e),l=new Date(0);l.setUTCFullYear(d,0,n),l.setUTCHours(0,0,0,0);var g=zs(l,e);return i.getTime()>=s.getTime()?d+1:i.getTime()>=g.getTime()?d:d-1}function Rb(t,e){var o,h,v,w,C,E,D,p;Zt(1,arguments);var i=Ws(),d=ri((o=(h=(v=(w=e==null?void 0:e.firstWeekContainsDate)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.firstWeekContainsDate)!==null&&v!==void 0?v:i.firstWeekContainsDate)!==null&&h!==void 0?h:(D=i.locale)===null||D===void 0||(p=D.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&o!==void 0?o:1),c=nd(t,e),n=new Date(0);n.setUTCFullYear(c,0,d),n.setUTCHours(0,0,0,0);var a=zs(n,e);return a}var kb=6048e5;function Ib(t,e){Zt(1,arguments);var o=tn(t),h=zs(o,e).getTime()-Rb(o,e).getTime();return Math.round(h/kb)+1}function mt(t,e){for(var o=t<0?"-":"",h=Math.abs(t).toString();h.length<e;)h="0"+h;return o+h}var jb={y:function(e,o){var h=e.getUTCFullYear(),v=h>0?h:1-h;return mt(o==="yy"?v%100:v,o.length)},M:function(e,o){var h=e.getUTCMonth();return o==="M"?String(h+1):mt(h+1,2)},d:function(e,o){return mt(e.getUTCDate(),o.length)},a:function(e,o){var h=e.getUTCHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return h.toUpperCase();case"aaa":return h;case"aaaaa":return h[0];case"aaaa":default:return h==="am"?"a.m.":"p.m."}},h:function(e,o){return mt(e.getUTCHours()%12||12,o.length)},H:function(e,o){return mt(e.getUTCHours(),o.length)},m:function(e,o){return mt(e.getUTCMinutes(),o.length)},s:function(e,o){return mt(e.getUTCSeconds(),o.length)},S:function(e,o){var h=o.length,v=e.getUTCMilliseconds(),w=Math.floor(v*Math.pow(10,h-3));return mt(w,o.length)}};const Dn=jb;var Ri={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lb={G:function(e,o,h){var v=e.getUTCFullYear()>0?1:0;switch(o){case"G":case"GG":case"GGG":return h.era(v,{width:"abbreviated"});case"GGGGG":return h.era(v,{width:"narrow"});case"GGGG":default:return h.era(v,{width:"wide"})}},y:function(e,o,h){if(o==="yo"){var v=e.getUTCFullYear(),w=v>0?v:1-v;return h.ordinalNumber(w,{unit:"year"})}return Dn.y(e,o)},Y:function(e,o,h,v){var w=nd(e,v),C=w>0?w:1-w;if(o==="YY"){var E=C%100;return mt(E,2)}return o==="Yo"?h.ordinalNumber(C,{unit:"year"}):mt(C,o.length)},R:function(e,o){var h=rd(e);return mt(h,o.length)},u:function(e,o){var h=e.getUTCFullYear();return mt(h,o.length)},Q:function(e,o,h){var v=Math.ceil((e.getUTCMonth()+1)/3);switch(o){case"Q":return String(v);case"QQ":return mt(v,2);case"Qo":return h.ordinalNumber(v,{unit:"quarter"});case"QQQ":return h.quarter(v,{width:"abbreviated",context:"formatting"});case"QQQQQ":return h.quarter(v,{width:"narrow",context:"formatting"});case"QQQQ":default:return h.quarter(v,{width:"wide",context:"formatting"})}},q:function(e,o,h){var v=Math.ceil((e.getUTCMonth()+1)/3);switch(o){case"q":return String(v);case"qq":return mt(v,2);case"qo":return h.ordinalNumber(v,{unit:"quarter"});case"qqq":return h.quarter(v,{width:"abbreviated",context:"standalone"});case"qqqqq":return h.quarter(v,{width:"narrow",context:"standalone"});case"qqqq":default:return h.quarter(v,{width:"wide",context:"standalone"})}},M:function(e,o,h){var v=e.getUTCMonth();switch(o){case"M":case"MM":return Dn.M(e,o);case"Mo":return h.ordinalNumber(v+1,{unit:"month"});case"MMM":return h.month(v,{width:"abbreviated",context:"formatting"});case"MMMMM":return h.month(v,{width:"narrow",context:"formatting"});case"MMMM":default:return h.month(v,{width:"wide",context:"formatting"})}},L:function(e,o,h){var v=e.getUTCMonth();switch(o){case"L":return String(v+1);case"LL":return mt(v+1,2);case"Lo":return h.ordinalNumber(v+1,{unit:"month"});case"LLL":return h.month(v,{width:"abbreviated",context:"standalone"});case"LLLLL":return h.month(v,{width:"narrow",context:"standalone"});case"LLLL":default:return h.month(v,{width:"wide",context:"standalone"})}},w:function(e,o,h,v){var w=Ib(e,v);return o==="wo"?h.ordinalNumber(w,{unit:"week"}):mt(w,o.length)},I:function(e,o,h){var v=Mb(e);return o==="Io"?h.ordinalNumber(v,{unit:"week"}):mt(v,o.length)},d:function(e,o,h){return o==="do"?h.ordinalNumber(e.getUTCDate(),{unit:"date"}):Dn.d(e,o)},D:function(e,o,h){var v=Ab(e);return o==="Do"?h.ordinalNumber(v,{unit:"dayOfYear"}):mt(v,o.length)},E:function(e,o,h){var v=e.getUTCDay();switch(o){case"E":case"EE":case"EEE":return h.day(v,{width:"abbreviated",context:"formatting"});case"EEEEE":return h.day(v,{width:"narrow",context:"formatting"});case"EEEEEE":return h.day(v,{width:"short",context:"formatting"});case"EEEE":default:return h.day(v,{width:"wide",context:"formatting"})}},e:function(e,o,h,v){var w=e.getUTCDay(),C=(w-v.weekStartsOn+8)%7||7;switch(o){case"e":return String(C);case"ee":return mt(C,2);case"eo":return h.ordinalNumber(C,{unit:"day"});case"eee":return h.day(w,{width:"abbreviated",context:"formatting"});case"eeeee":return h.day(w,{width:"narrow",context:"formatting"});case"eeeeee":return h.day(w,{width:"short",context:"formatting"});case"eeee":default:return h.day(w,{width:"wide",context:"formatting"})}},c:function(e,o,h,v){var w=e.getUTCDay(),C=(w-v.weekStartsOn+8)%7||7;switch(o){case"c":return String(C);case"cc":return mt(C,o.length);case"co":return h.ordinalNumber(C,{unit:"day"});case"ccc":return h.day(w,{width:"abbreviated",context:"standalone"});case"ccccc":return h.day(w,{width:"narrow",context:"standalone"});case"cccccc":return h.day(w,{width:"short",context:"standalone"});case"cccc":default:return h.day(w,{width:"wide",context:"standalone"})}},i:function(e,o,h){var v=e.getUTCDay(),w=v===0?7:v;switch(o){case"i":return String(w);case"ii":return mt(w,o.length);case"io":return h.ordinalNumber(w,{unit:"day"});case"iii":return h.day(v,{width:"abbreviated",context:"formatting"});case"iiiii":return h.day(v,{width:"narrow",context:"formatting"});case"iiiiii":return h.day(v,{width:"short",context:"formatting"});case"iiii":default:return h.day(v,{width:"wide",context:"formatting"})}},a:function(e,o,h){var v=e.getUTCHours(),w=v/12>=1?"pm":"am";switch(o){case"a":case"aa":return h.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"aaa":return h.dayPeriod(w,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return h.dayPeriod(w,{width:"narrow",context:"formatting"});case"aaaa":default:return h.dayPeriod(w,{width:"wide",context:"formatting"})}},b:function(e,o,h){var v=e.getUTCHours(),w;switch(v===12?w=Ri.noon:v===0?w=Ri.midnight:w=v/12>=1?"pm":"am",o){case"b":case"bb":return h.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"bbb":return h.dayPeriod(w,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return h.dayPeriod(w,{width:"narrow",context:"formatting"});case"bbbb":default:return h.dayPeriod(w,{width:"wide",context:"formatting"})}},B:function(e,o,h){var v=e.getUTCHours(),w;switch(v>=17?w=Ri.evening:v>=12?w=Ri.afternoon:v>=4?w=Ri.morning:w=Ri.night,o){case"B":case"BB":case"BBB":return h.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"BBBBB":return h.dayPeriod(w,{width:"narrow",context:"formatting"});case"BBBB":default:return h.dayPeriod(w,{width:"wide",context:"formatting"})}},h:function(e,o,h){if(o==="ho"){var v=e.getUTCHours()%12;return v===0&&(v=12),h.ordinalNumber(v,{unit:"hour"})}return Dn.h(e,o)},H:function(e,o,h){return o==="Ho"?h.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Dn.H(e,o)},K:function(e,o,h){var v=e.getUTCHours()%12;return o==="Ko"?h.ordinalNumber(v,{unit:"hour"}):mt(v,o.length)},k:function(e,o,h){var v=e.getUTCHours();return v===0&&(v=24),o==="ko"?h.ordinalNumber(v,{unit:"hour"}):mt(v,o.length)},m:function(e,o,h){return o==="mo"?h.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Dn.m(e,o)},s:function(e,o,h){return o==="so"?h.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Dn.s(e,o)},S:function(e,o){return Dn.S(e,o)},X:function(e,o,h,v){var w=v._originalDate||e,C=w.getTimezoneOffset();if(C===0)return"Z";switch(o){case"X":return od(C);case"XXXX":case"XX":return ni(C);case"XXXXX":case"XXX":default:return ni(C,":")}},x:function(e,o,h,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(o){case"x":return od(C);case"xxxx":case"xx":return ni(C);case"xxxxx":case"xxx":default:return ni(C,":")}},O:function(e,o,h,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(o){case"O":case"OO":case"OOO":return"GMT"+id(C,":");case"OOOO":default:return"GMT"+ni(C,":")}},z:function(e,o,h,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(o){case"z":case"zz":case"zzz":return"GMT"+id(C,":");case"zzzz":default:return"GMT"+ni(C,":")}},t:function(e,o,h,v){var w=v._originalDate||e,C=Math.floor(w.getTime()/1e3);return mt(C,o.length)},T:function(e,o,h,v){var w=v._originalDate||e,C=w.getTime();return mt(C,o.length)}};function id(t,e){var o=t>0?"-":"+",h=Math.abs(t),v=Math.floor(h/60),w=h%60;if(w===0)return o+String(v);var C=e||"";return o+String(v)+C+mt(w,2)}function od(t,e){if(t%60===0){var o=t>0?"-":"+";return o+mt(Math.abs(t)/60,2)}return ni(t,e)}function ni(t,e){var o=e||"",h=t>0?"-":"+",v=Math.abs(t),w=mt(Math.floor(v/60),2),C=mt(v%60,2);return h+w+o+C}const Fb=Lb;var sd=function(e,o){switch(e){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});case"PPPP":default:return o.date({width:"full"})}},ad=function(e,o){switch(e){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});case"pppp":default:return o.time({width:"full"})}},Bb=function(e,o){var h=e.match(/(P+)(p+)?/)||[],v=h[1],w=h[2];if(!w)return sd(e,o);var C;switch(v){case"P":C=o.dateTime({width:"short"});break;case"PP":C=o.dateTime({width:"medium"});break;case"PPP":C=o.dateTime({width:"long"});break;case"PPPP":default:C=o.dateTime({width:"full"});break}return C.replace("{{date}}",sd(v,o)).replace("{{time}}",ad(w,o))},Nb={p:ad,P:Bb};const Vb=Nb;var Ub=["D","DD"],Yb=["YY","YYYY"];function Wb(t){return Ub.indexOf(t)!==-1}function Hb(t){return Yb.indexOf(t)!==-1}function ud(t,e,o){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(o,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gb=function(e,o,h){var v,w=zb[e];return typeof w=="string"?v=w:o===1?v=w.one:v=w.other.replace("{{count}}",o.toString()),h!=null&&h.addSuffix?h.comparison&&h.comparison>0?"in "+v:v+" ago":v};const Xb=Gb;function Gu(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.width?String(e.width):t.defaultWidth,h=t.formats[o]||t.formats[t.defaultWidth];return h}}var $b={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kb={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qb={date:Gu({formats:$b,defaultWidth:"full"}),time:Gu({formats:qb,defaultWidth:"full"}),dateTime:Gu({formats:Kb,defaultWidth:"full"})};const Zb=Qb;var Jb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},e1=function(e,o,h,v){return Jb[e]};const t1=e1;function Oo(t){return function(e,o){var h=o!=null&&o.context?String(o.context):"standalone",v;if(h==="formatting"&&t.formattingValues){var w=t.defaultFormattingWidth||t.defaultWidth,C=o!=null&&o.width?String(o.width):w;v=t.formattingValues[C]||t.formattingValues[w]}else{var E=t.defaultWidth,D=o!=null&&o.width?String(o.width):t.defaultWidth;v=t.values[D]||t.values[E]}var p=t.argumentCallback?t.argumentCallback(e):e;return v[p]}}var r1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},n1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},u1=function(e,o){var h=Number(e),v=h%100;if(v>20||v<10)switch(v%10){case 1:return h+"st";case 2:return h+"nd";case 3:return h+"rd"}return h+"th"},l1={ordinalNumber:u1,era:Oo({values:r1,defaultWidth:"wide"}),quarter:Oo({values:n1,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Oo({values:i1,defaultWidth:"wide"}),day:Oo({values:o1,defaultWidth:"wide"}),dayPeriod:Oo({values:s1,defaultWidth:"wide",formattingValues:a1,defaultFormattingWidth:"wide"})};const c1=l1;function Ao(t){return function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=o.width,v=h&&t.matchPatterns[h]||t.matchPatterns[t.defaultMatchWidth],w=e.match(v);if(!w)return null;var C=w[0],E=h&&t.parsePatterns[h]||t.parsePatterns[t.defaultParseWidth],D=Array.isArray(E)?h1(E,function(d){return d.test(C)}):f1(E,function(d){return d.test(C)}),p;p=t.valueCallback?t.valueCallback(D):D,p=o.valueCallback?o.valueCallback(p):p;var i=e.slice(C.length);return{value:p,rest:i}}}function f1(t,e){for(var o in t)if(t.hasOwnProperty(o)&&e(t[o]))return o}function h1(t,e){for(var o=0;o<t.length;o++)if(e(t[o]))return o}function d1(t){return function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=e.match(t.matchPattern);if(!h)return null;var v=h[0],w=e.match(t.parsePattern);if(!w)return null;var C=t.valueCallback?t.valueCallback(w[0]):w[0];C=o.valueCallback?o.valueCallback(C):C;var E=e.slice(v.length);return{value:C,rest:E}}}var g1=/^(\d+)(th|st|nd|rd)?/i,p1=/\d+/i,v1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m1={any:[/^b/i,/^(a|c)/i]},y1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_1={any:[/1/i,/2/i,/3/i,/4/i]},b1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},w1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},C1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},S1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},T1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},E1={ordinalNumber:d1({matchPattern:g1,parsePattern:p1,valueCallback:function(e){return parseInt(e,10)}}),era:Ao({matchPatterns:v1,defaultMatchWidth:"wide",parsePatterns:m1,defaultParseWidth:"any"}),quarter:Ao({matchPatterns:y1,defaultMatchWidth:"wide",parsePatterns:_1,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ao({matchPatterns:b1,defaultMatchWidth:"wide",parsePatterns:w1,defaultParseWidth:"any"}),day:Ao({matchPatterns:x1,defaultMatchWidth:"wide",parsePatterns:C1,defaultParseWidth:"any"}),dayPeriod:Ao({matchPatterns:S1,defaultMatchWidth:"any",parsePatterns:T1,defaultParseWidth:"any"})},O1={code:"en-US",formatDistance:Xb,formatLong:Zb,formatRelative:t1,localize:c1,match:E1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const A1=O1;var P1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M1=/^'([^]*?)'?$/,R1=/''/g,k1=/[a-zA-Z]/;function ld(t,e,o){var h,v,w,C,E,D,p,i,d,c,n,a,s,l,g,u,m,y;Zt(2,arguments);var b=String(e),x=Ws(),T=(h=(v=o==null?void 0:o.locale)!==null&&v!==void 0?v:x.locale)!==null&&h!==void 0?h:A1,M=ri((w=(C=(E=(D=o==null?void 0:o.firstWeekContainsDate)!==null&&D!==void 0?D:o==null||(p=o.locale)===null||p===void 0||(i=p.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&E!==void 0?E:x.firstWeekContainsDate)!==null&&C!==void 0?C:(d=x.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&w!==void 0?w:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=ri((n=(a=(s=(l=o==null?void 0:o.weekStartsOn)!==null&&l!==void 0?l:o==null||(g=o.locale)===null||g===void 0||(u=g.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:x.weekStartsOn)!==null&&a!==void 0?a:(m=x.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var R=tn(t);if(!Tb(R))throw new RangeError("Invalid time value");var W=Cb(R),K=Eb(R,W),$={firstWeekContainsDate:M,weekStartsOn:I,locale:T,_originalDate:R},ae=b.match(D1).map(function(ce){var fe=ce[0];if(fe==="p"||fe==="P"){var le=Vb[fe];return le(ce,T.formatLong)}return ce}).join("").match(P1).map(function(ce){if(ce==="''")return"'";var fe=ce[0];if(fe==="'")return I1(ce);var le=Fb[fe];if(le)return!(o!=null&&o.useAdditionalWeekYearTokens)&&Hb(ce)&&ud(ce,e,String(t)),!(o!=null&&o.useAdditionalDayOfYearTokens)&&Wb(ce)&&ud(ce,e,String(t)),le(K,ce,T.localize,$);if(fe.match(k1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+fe+"`");return ce}).join("");return ae}function I1(t){var e=t.match(M1);return e?e[1].replace(R1,"'"):t}class j1 extends ti{constructor(o,h=null){super(o,h);Le(this,"selected",!1);Le(this,"onMouseDownBefore",o=>{this.selected=!!this.c.getActiveObject()});Le(this,"onMouseDown",o=>{if(this.selected)return;const h=o.e,v={x:h.clientX,y:h.clientY},w=new Date;this.core.addText(ld(w,"yyyy-MM-dd"),v)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}const He={FREEDRAW:"FREEDRAW",SELECT:"SELECT",PAN:"PAN",TEXT:"TEXT",MARKER:"MARKER",ERASER:"ERASER",TIMESTAMP:"TIMESTAMP",SIMPLE_INPUT:"SIMPLE_INPUT"},hn={BLACK:"#000000",RED:"#d82735",YELLOW:"#ffcb35",GREEN:"#009e47",BLUE:"#0052a5"},Gs=6,cd=60,L1={HISTORY_CHANGE:"history.change",AVAILABILITY_CHANGE:"availability.change",TOOL_CHANGE:"tool.change",MODE_CHANGE:"mode.change",TEXT_CHANGE:"text.change"},F1={BRUSH:"BRUSH",TEXT:"TEXT",IMAGE:"IMAGE"},B1={FREEDRAW:"FREEBRUSH",MARKER:"MARKER",ERASER:"ERASER",TEXT:"TEXT"},Ft=class Ft extends EventTarget{constructor({imageUrl:o,touchEnabled:h}){super();Le(this,"mode",Ft.Mode.BRUSH);Le(this,"imageUrl");Le(this,"_busy");Le(this,"zoomMin",1);Le(this,"zoomMax",2);Le(this,"history",{index:-1,records:[]});Le(this,"_isTraversingHistory",!1);Le(this,"touchEnabled");Le(this,"c",null);Le(this,"tool",null);Le(this,"config");Le(this,"isDragging");Le(this,"zoomStartScale");Le(this,"touches");Le(this,"lastPoint");Le(this,"onMouseWheel");Le(this,"onMouseUp");Le(this,"onGesture");Le(this,"onObjectAdded");Le(this,"onObjectModified");Le(this,"onObjectRemoved");Le(this,"onObjectSelected");Le(this,"onObjectSelectionUpdated");Le(this,"onObjectDeselected");Le(this,"onEraseEnd");Le(this,"containerSize");Le(this,"onHistoryChangeListener");Le(this,"onAvailabilityChangeListener");Le(this,"tools",{[He.FREEDRAW]:{class:vb},[He.MARKER]:{class:yb},[He.ERASER]:{class:pb},[He.PAN]:{class:_b},[He.SELECT]:{class:td},[He.TEXT]:{class:bb},[He.TIMESTAMP]:{class:j1},[He.SIMPLE_INPUT]:{class:td}});this.config=this.fetchConfig(),this._busy=!0,this.imageUrl=o,this.touchEnabled=h}setCanvas(o){this.c=new vr.fabric.Canvas(o,{selection:!1});const h=this.c;this.c.usePencil=this.touchEnabled?this.config.usePencil:!1,vr.fabric.Image.fromURL(this.imageUrl,v=>{if(h.getElement()){if(v.erasable=!1,this.busy=!1,h.setBackgroundImage(v,null),this.fitCanvas(),this.selectTool(this.fetchTool()),this.history.index<0)this.pushHistory();else{const w=this.history.records[this.history.index];this.loadFromHistory(w)}this.c.on("touch:gesture",this.onGesture),this.c.on("mouse:up",this.onMouseUp),this.c.on("mouse:wheel",this.onMouseWheel),this.c.on("object:added",this.onObjectAdded),this.c.on("object:modified",this.onObjectModified),this.c.on("object:removed",this.onObjectRemoved),this.c.on("selection:created",this.onObjectSelected),this.c.on("selection:updated",this.onObjectSelectionUpdated),this.c.on("selection:cleared",this.onObjectDeselected),this.c.on("erasing:end",this.onEraseEnd)}},{crossOrigin:"anonymous"}),this.onMouseWheel=v=>{v.e.preventDefault(),v.e.stopPropagation();const w=v.e.deltaY;this.zoom({x:v.e.offsetX,y:v.e.offsetY},this.c.getZoom()*.999**w)},this.onGesture=v=>{const w=v.e;if(w.touches&&w.touches.length===2){this.isDragging=!1;const C=new vr.fabric.Point(v.self.x,v.self.y),E=[];for(const p of w.touches)E.push({identifier:p.identifier,clientX:p.clientX,clientY:p.clientY});if(v.self.state==="start"){this.zoomStartScale=this.c.getZoom(),this.touches=E;return}this.lastPoint&&this.pan(C.x-this.lastPoint.x,C.y-this.lastPoint.y);const D=this.zoomStartScale*(w.scale??v.self.scale);this.zoom(C,D),this.lastPoint=C,this.touches=E}},this.onMouseUp=v=>{v.e.type==="touchend"&&(this.lastPoint=null,this.touches=null)},this.onObjectAdded=v=>{if(v.target.type==="path"){const w=v.target;w.selectable=!1,w.hoverCursor="default"}this.c.getObjects("image").forEach(w=>{this.c.bringToFront(w)}),this.c.getObjects("path").forEach(w=>{this.c.bringToFront(w)}),this.c.getObjects("i-text").forEach(w=>{this.c.bringToFront(w)}),!this.isTraversingHistory&&this.pushHistory()},this.onObjectModified=v=>{if(!this.isTraversingHistory){if(v.target.type==="i-text"&&v.target.text.trim()===""){const w=this.isTraversingHistory;this.isTraversingHistory=!0,this.c.remove(v.target),this.isTraversingHistory=w}this.pushHistory()}},this.onEraseEnd=v=>{this.isTraversingHistory||this.pushHistory()},this.onObjectRemoved=v=>{this.isTraversingHistory||this.pushHistory()},this.onObjectSelected=v=>{const w=v.selected[0];switch(w.type){case"i-text":return this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.TEXT);case"image":return this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.IMAGE);default:throw new Error(`object type ${w.type} selected`)}},this.onObjectSelectionUpdated=v=>{switch(v.selected[0].type){case"i-text":return this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.TEXT);case"image":return this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.IMAGE)}},this.onObjectDeselected=v=>{this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.BRUSH)}}zoom(o,h){const v=Math.max(this.zoomMin,Math.min(this.zoomMax,h));this.c.zoomToPoint(o,v),this.adjustPan()}pan(o,h){this.c.relativePan({x:o,y:h}),this.adjustPan()}clamp(o,h,v){return Math.min(Math.max(o,h),v)}adjustPan(){const o=this.c.viewportTransform,h=this.c.getZoom(),v={x:this.c.getWidth()*(1/this.zoomMin-1)/2,y:this.c.getHeight()*(1/this.zoomMin-1)/2},w={width:(v.x+this.c.backgroundImage.left)*2+this.c.backgroundImage.width,height:(v.y+this.c.backgroundImage.top)*2+this.c.backgroundImage.height},C={x:{min:this.c.getWidth()+(v.x-w.width)*h,max:v.x*h},y:{min:this.c.getHeight()+(v.y-w.height)*h,max:v.y*h}};o[4]=this.clamp(o[4],C.x.min,C.x.max),o[5]=this.clamp(o[5],C.y.min,C.y.max),this.c.setViewportTransform(o)}detach(){this.c&&(this.c.dispose(),this.tool=null)}getToolConfig(o){switch(o){case He.FREEDRAW:return this.config.freedraw;case He.MARKER:return this.config.marker;case He.ERASER:return this.config.eraser;default:return null}}selectTool(o){var C,E,D;if(!this.available)return;const h=this.getToolConfig(o),v=new this.tools[o].class(this,h),w=this.tool;(E=w==null?void 0:(C=w.instance).onDeselect)==null||E.call(C),this.tool={name:o,instance:v},(D=v.onSelect)==null||D.call(v),(w==null?void 0:w.type)!==v&&this._dispatch(Ft.Event.TOOL_CHANGE,o),this.cacheTool()}updateToolConfig(o,h){const v=this.getToolConfig(o),w=Object.assign({},v,h);switch(o){case He.FREEDRAW:this.config.freedraw=w;break;case He.MARKER:this.config.marker=w;break;case He.ERASER:this.config.eraser=w;break;default:throw new Error(`Invalid toolId ${o}`)}return this.tool.name===o&&this.selectTool(o),this.cacheConfig(),w}setContainerSize(o){this.containerSize=o,this.c&&this.fitCanvas()}addImage(o){this.available&&(this.busy=!0,this.selectTool(He.SELECT),vr.fabric.Image.fromURL(o,h=>{this.c.add(h),this.c.centerObject(h),this.c.setActiveObject(h),h.erasable=!1,this.busy=!1},{crossOrigin:"anonymous",borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11}))}async saveImageAsBlob(){return new Promise((o,h)=>{const v=this.c.getActiveObject();if(v&&v.type==="image"){const w=v.getScaledWidth(),C=v.getScaledHeight(),E=document.createElement("canvas"),D=E.getContext("2d");E.width=w,E.height=C,D&&D.drawImage(v._element,0,0,w,C),E.toBlob(function(p){o(p)})}else h(new Error("   ."))})}calcTextSize(o){return(Gs+o/100*(cd-Gs))/this.zoomMin}calcFontSize(o){return(o*this.zoomMin-Gs)/(cd-Gs)*100}addText(o,h,v){if(!this.available)return;this.touchEnabled&&this.selectTool(He.SELECT);let w=null;if(h&&(w=this.c.getPointer({clientX:h.x,clientY:h.y}),w)){const E=this.c.findTarget({x:h.x,y:h.y},!1);if(E){this.c.setActiveObject(E),this.c.requestRenderAll();return}}const C=new vr.fabric.IText(o,{borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11});C.set("fill",this.config.text.color.code),C.set("fontSize",this.calcTextSize(this.config.text.fontSize)),w?(C.set("left",w.x),C.set("top",w.y)):this.c.viewportCenterObject(C),C.erasable=!1,this.c.add(C),v||(this.c.setActiveObject(C),C.selectAll(),C.enterEditing())}async undo(){if(!this.available||this.history.index===0)return;this.history.index-=1;const o=this.history.records[this.history.index];await this.loadFromHistory(o),this._dispatchHistoryChange()}async redo(){if(!this.available||this.history.index>=this.history.records.length-1)return;this.history.index+=1;const o=this.history.records[this.history.index];await this.loadFromHistory(o),this._dispatchHistoryChange()}async loadFromHistory(o){this.isTraversingHistory=!0,await new Promise((h,v)=>{try{vr.fabric.util.enlivenObjects(o,w=>{this.c.remove(...this.c.getObjects()),w.forEach(C=>{this.c.add(C)}),this.c.renderAll(),h()},null)}catch(w){v(w)}}),this.isTraversingHistory=!1}async saveHistoryCache(){localStorage.setItem("historyCache",JSON.stringify(this.history))}async clearHistoryCache(){localStorage.removeItem("historyCache")}async loadHistoryCache(){const o=localStorage.getItem("historyCache");if(o){this.history=JSON.parse(o);const h=this.history.records[this.history.index];await this.loadFromHistory(h),this.clearHistoryCache()}}get isTraversingHistory(){return this._isTraversingHistory}set isTraversingHistory(o){this._isTraversingHistory=o,this._dispatchAvailbilityChange()}get busy(){return this._busy}set busy(o){this._busy=o,this._dispatchAvailbilityChange()}get available(){return!this._isTraversingHistory&&!this.busy}pushHistory(){const o=this.history.records.slice(0,this.history.index+1);this.history.records=[...o,this.c.toObject().objects],this.history.index=this.history.records.length-1,this._dispatchHistoryChange()}onHistoryChange(o){this.onHistoryChangeListener=o}onAvailabilityChange(o){this.onAvailabilityChangeListener=o}on(o,h){const v=w=>{h(w.detail)};return this.addEventListener(o,v),()=>{this.removeEventListener(o,v)}}getHistoryInfo(){return{index:this.history.index,histories:this.history.records.length}}_dispatch(o,h){this.dispatchEvent(new CustomEvent(o,{detail:h}))}_dispatchHistoryChange(){this._dispatch(Ft.Event.HISTORY_CHANGE,this.getHistoryInfo())}_dispatchAvailbilityChange(){this._dispatch(Ft.Event.AVAILABILITY_CHANGE,this.available)}fitCanvas(){const o=this.c.backgroundImage,h=this.containerSize;if(!o||!h)return;const v=o.width,w=o.height,C=o.angle||0,E=Math.abs(C%180)===90,D=E?w:v,p=E?v:w;let i=Math.min(this.containerSize.width/D,this.containerSize.height/p);(h.width>D||h.height>p)&&(i=Math.min(h.width/D,h.height/p)),this.zoomMin=i,this.c.setWidth(h.width),this.c.setHeight(h.height),o.set({originX:"center",originY:"center"}),o.center();const c=new vr.fabric.Rect({width:D+2,height:p+2,originX:"center",originY:"center",angle:0,left:o.left-1,top:o.top-1});this.c.clipPath=c,this.zoom({x:h.width/2,y:h.height/2},i)}getDataUrl(o){const h=this.c.viewportTransform;this.c.viewportTransform=vr.fabric.iMatrix.slice(0);const v=this.c.backgroundImage,w=(v==null?void 0:v.angle)||0,C=Math.abs(w%180)===90,E=C?v.height:v.width,D=C?v.width:v.height,p=this.c.toDataURL({format:o.toLowerCase()==="png"?"png":"jpeg",width:E,height:D,left:v.left-E/2,top:v.top-D/2});return this.c.viewportTransform=h,p}async toBlob(){const o=this.c.viewportTransform;this.c.viewportTransform=vr.fabric.iMatrix.slice(0);const h=this.c.backgroundImage,v=(h==null?void 0:h.angle)||0,w=Math.abs(v%180)===90,C=w?h.height:h.width,E=w?h.width:h.height,D=new Promise((p,i)=>{this.c.toBlob(d=>{if(!d){i(new Error("Cannot create blob"));return}p(d)},{width:C,height:E,left:h.left-C/2,top:h.top-E/2})});try{return this.busy=!0,await D,D}finally{this.c.viewportTransform=o,this.busy=!1}}deleteSelectedObject(){this.c.remove(this.c.getActiveObject())}changeSelectedTextSize(o){this.c.getActiveObject().set("fontSize",this.calcTextSize(o)),this.config.text.fontSize=o,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextColor(o){this.c.getActiveObject().set("fill",o.code),this.config.text.color=o,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextMessage(o){this.c.getActiveObject().set("text",o),this.c.requestRenderAll()}getSelectedTextSize(){const o=this.c.getActiveObject();return this.calcFontSize(o.fontSize)}getSelectedTextColor(){const o=this.c.getActiveObject();return Object.values(hn).includes(o.fill)?{type:"preset",code:o.fill}:{type:"custom",code:o.fill}}getSelectedTextContents(){return this.c.getActiveObject().text}setUsePencil(o){this.config.usePencil=o,this.c.usePencil=o,this.cacheConfig()}fetchConfig(){const o=localStorage.getItem("editorConfig"),h=o?JSON.parse(o):null;return{freedraw:(h==null?void 0:h.freedraw)??{thickness:3,color:{type:"preset",code:hn.BLACK}},marker:(h==null?void 0:h.marker)??{thickness:3,color:{type:"preset",code:hn.BLACK}},eraser:(h==null?void 0:h.eraser)??{thickness:3},text:(h==null?void 0:h.text)??{color:{type:"preset",code:hn.BLACK},fontSize:40},usePencil:(h==null?void 0:h.usePencil)??!0}}fetchTool(){return localStorage.getItem("editorTool")??He.PAN}cacheConfig(){localStorage.setItem("editorConfig",JSON.stringify(this.config))}cacheTool(){localStorage.setItem("editorTool",this.tool.name)}isDirty(){return this.history.index>0}rotateBaseImage90(){if(!this.available||!this.c.backgroundImage)return;const o=this.c.backgroundImage,v=((o.angle||0)+90)%360;o.set({originX:"center",originY:"center",angle:v}),o.center(),this.c.requestRenderAll(),this.fitCanvas()}};Le(Ft,"Event",L1),Le(Ft,"Mode",F1),Le(Ft,"ConfigName",B1);let nr=Ft;const N1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABgpJREFUWEeVl7uPG1UYxc+1x563X7uERwUtDVIoIlIgIhQBUoRWSFAihSIgKFKCqOiSAkSEBCI0adOQCCUNKChQkCD+BUoQCo+APU/P+HHRuQ971uvNwkqf7npm7fP7zvnu3bHA//iRv+CEnLffE3XrFOpWD7UQqAHUUqKSCerl96jnF8UruPtfP1Yc9YdSwpVp+6qYdfZQd4CZA9QOMGsBtYACqCRQL4FqAUznQFUD1fwmlvNXxVlMH6TxQIDZwrnkLDrnMXOhqwMN0QZqlgGoJVARgOJzYFqbqoCi+kycX7xzGMRWgJ8l3C4694bwB/HSN+IE6BoAutDSLlQqAt29qtlavJwC+RTIyhR/1g+Lj1FughwAuDnGsN93748QiBECjOCju/CA2tMAygVGQAcYAyNY6giU/QSodFE8L4GsYElMp8fER/irCbEP4BMJdwduOUIodhBipMrHQPoQc0KYGBSEjYAxmPyb9hf7xIEsB9Jcoj0Nm07sA7goO/8MEQ12EGGECBpCuxDYKOqmC40hbNpP6wmQ2e4pntlKxZW6Z11YAby1cC6NWsH5HcTQRQjrgoZw6AKHUUE0IlD22/w5eJviFiAFUlb2hfhy8SYhFMBLEu4Q/nQHPeyuAGLjAkEIEKAvOZBmFuxWVENodgCnv2T2q9wbnadAYisBFkUobqBQACeX7esjEe/tKoAeCNJ0Yu1GAI8DqbYkdwJdMENoh88OXpoDmbF9JUyABJhM6MTX4rv5iwrgSenJXfSV+HptQtCNUM3EEAFaCoBb0gIY+5m9yl0NnLa72bUSNwCE+KFsCV/ixBDxjw+hD5YGsDDaDe2KHkxGsT4bGgC031rPgUvYPcUIMdHCdh3z9RgoiudEe9m/3hPe3lB9eLyC2ITRsXBn6OHUZwNjYARzM3hFo3PTrRVlx1bY/p6k34iOfHw8QNjvI8QAIfqI1Eog3b11pjkfEQYygFAxQJ987F51zk43rLbCB9dMuPLp5QChaIrz983XBGrGQyfU2UAAbjtabges2e1KdKwdGI+1/VzHYyk8eVpawYHp3rqgr2tHNoEYFx1yCMBBU6L8cLNqAVMm833X9D3hydcMwFqIojqSbdf0dd7vSR9+AbTT8nBx1e02KO2EcOW55QCRimCzy6YTFLTVQ4h44cLPgW4BBCXgZku0Joxhw4kmwNp6O5BSdOW74z7Cvha3EOsu18IBKMyKagdBAXQzwMmAaAblhJcB3WQOsZoFE4mF2Leqe7lw5IWveghebopvdquFA8QyQDRtIaRYATipLgIEFZQjhPDV9UrPg9qGFsTOglmTyS0B+fkzPXh39osGOmNTsTp8PESl0OI54OZavJUA0RwIKx2FdYIQbirRTgoNsQ0kT59XR7Enr8lmvn0KNsXnXSXMovUUp/3tBBATICYAXZgaCDrBSrUbbrqEUEcyO191DxRnWgrAkd/eiBGcsVarIVMVIKraiBritvtOprsXY+0AYwhrA1BqAD9bR0KYbjIzBxX/GU1uidnx0/p5QN72AhwrKajFTd6lUOLsmqXsNd1z+FoT7QCFFQQBmlHwPRsQBHESPi1NIoFH8tUDSVv++mkE/23V9cJDzK7Lte0cMALQejX9KSCMA0G9jkHNgomCg6re1xhOAng5roQz8cbqgcQ+HnVlnUR1J45K7LOdwvwQZs/qpDx8dAQYA/4UiBeNGKwLZigVhHUiQ/FEJcIDj2Q6Cul7fyMPCwg7dFac3djhY/cKYKIB3BLoLQ664BOAZVzwc0i/RPwURL4dgFd/k7veGH8EBYTN3XbftfkTgPYbB3gaWoDVMDKGqQHQ8yP7JR47BXHv0Mfy1Y070u/W+N3PEdvBW3Vv8rdbkA50cgPQiEHNwjqKIqhw7PVG54c70MBrX5WX3RznbPb26LUHEHcAAfi6t9QRqDOhNluyUuuVD8zAbft6duSXU1yWgXMf1zopXuDeZ7F7dQYYAM6DisDMgYphhluPzrD34Zauj45g6zdJKZyzeLaV4H2R4KRIEIoJBA8iMYHsLVH0l7jbk7jw0xy3ASGP+ubN+/8CCrP4h3UWm6AAAAAASUVORK5CYII=";function Xs({children:t,...e}){return Y.jsx(xe.Popover,{sx:{"& .MuiPaper-root":{overflowX:"unset",overflowY:"unset",backgroundColor:"grey.background","::before":{content:'""',position:"absolute",marginRight:"-0.71em",bottom:0,left:"50%",width:16,height:16,backgroundColor:"grey.background",boxShadow:1,transform:"translate(-50%, 50%) rotate(135deg)",clipPath:`polygon(
              -8px -8px,
              calc(100% + 8px) -8px,
              calc(100% + 8px) calc(100% + 8px)
            )`}}},anchorOrigin:{vertical:-16,horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},...e,children:t})}const Po={black:"#000",white:"#fff"},ii={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},V1={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},oi={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},U1={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},Y1={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},ki={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},si={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ai={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},W1={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},H1={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},z1={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},Ii={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},$t={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},G1=[hn.BLACK,hn.RED,hn.YELLOW,hn.GREEN,hn.BLUE];function fd({type:t,color:e,selected:o,onClick:h}){return Y.jsx(xe.IconButton,{sx:{p:0},onClick:h,children:Y.jsxs("svg",{width:"24",height:"24",children:[Y.jsxs("mask",{id:"mask",children:[Y.jsx("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"white",strokeWidth:"4",fill:"none"}),Y.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:"white"})]}),t==="preset"?Y.jsx("circle",{cx:"50%",cy:"50%",r:"50%",fill:e,mask:o?"url(#mask)":""}):Y.jsx("image",{x:"0",y:"0",width:"100%",height:"100%",href:N1,mask:o?"url(#mask)":""}),e&&Y.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:e})]})})}const hd=[100,200,300,400,500,600,700,800,900],X1=["#ffffff",...hd.map(t=>$t[t]),"#000000"],$1=[si,Y1,U1,oi,V1,ii,Ii,z1,H1,W1,ai],q1=X1.concat(...hd.map(t=>$1.map(e=>e[t])));function K1({color:t,onClick:e}){return Y.jsx(En,{sx:{width:24,height:24,borderRadius:0,p:0,backgroundColor:t},onClick:e})}function Q1({onChange:t}){return Y.jsx(En,{sx:{p:2,display:"grid",gridTemplateColumns:"repeat(11, 1fr)"},children:q1.map(e=>Y.jsx(K1,{color:e,onClick:()=>t(e)},e))})}function dd({value:t,onChange:e}){const[o,h]=Te.useState(null),{toolbarPosition:v}=Ut(),w=p=>{t&&e({type:"preset",code:p})},C=p=>{t&&h(p.currentTarget)},E=Te.useCallback(()=>{h(null)},[]),D=p=>{e({type:"custom",code:p}),E()};return Y.jsxs(En,{sx:{display:"grid",...v==="bottom"&&{gridTemplateRows:"repeat(2, minmax(0, 1fr))",gridTemplateColumns:"repeat(3, minmax(0, min-content))"},...v==="right"&&{gridTemplateRows:"repeat(3, minmax(0, 1fr))",gridTemplateColumns:"repeat(2, minmax(0, min-content))"},gridRowGap:"6px",gridColumnGap:"8px"},children:[G1.map((p,i)=>Y.jsx(fd,{selected:(t==null?void 0:t.type)==="preset"&&(t==null?void 0:t.code)===p,type:"preset",color:p,onClick:()=>w(p)},i)),Y.jsx(fd,{selected:(t==null?void 0:t.type)==="custom",type:"custom",color:(t==null?void 0:t.type)==="custom"?t==null?void 0:t.code:null,onClick:C}),Y.jsx(Xs,{open:!!o,anchorEl:o,onClose:E,anchorOrigin:{vertical:-16,horizontal:"center"},children:Y.jsx(Q1,{onChange:D})})]})}function Xu({leadingItems:t=null,palette:e=null,trailingItems:o}){const{toolbarPosition:h}=Ut();return Y.jsxs(Y.Fragment,{children:[t&&Y.jsx(En,{sx:{display:"flex",alignItems:"center",gap:"10px",flexDirection:h==="right"?"column":"row"},children:t}),e&&Y.jsx(En,{sx:{display:"flex",alignItems:"center",flexDirection:h==="right"?"column":"row"},children:e}),o&&Y.jsx(En,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"10px",flexDirection:h==="right"?"column":"row"},children:o})]})}const gd=xe.styled(xe.Box)(()=>`
  &.toolbar-btn-wrapper {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }
`),pd=xe.styled(xe.IconButton)(({selected:t,disabled:e})=>`
  ${t?"background: black;":""}
  svg {
    width: 20px;
    height: 20px;
  }
  ${t?`
      svg, path {
        fill: white;
      }  
    `:""}
  ${e?`
      svg, path {
        fill: ${$t[400]};
      }
    `:""}
`),Z1=xe.styled(xe.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 11px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
  white-space: nowrap;
`),mr=({Icon:t,selected:e=!1,small:o=!1,tooltip:h,disableToolbar:v=!1,sx:w,disabled:C,className:E,...D})=>{const{toolbarPosition:p}=Ut();return v?Y.jsxs(gd,{className:`toolbar-btn-wrapper ${E||""}`,children:[Y.jsx(pd,{color:"inherit",disabled:C,sx:{":disabled":{backgroundColor:$t[200],color:$t[400]},":hover":{backgroundColor:e?"black":$t[200]},p:o?1:1.25,borderRadius:"50%",color:e?"white":"black",...w},selected:e,...D,children:Y.jsx(t,{sx:{fontSize:o?16:20}})}),Y.jsx(Z1,{variant:"body1",children:h})]}):Y.jsx(xe.Tooltip,{title:h,arrow:!0,placement:p==="right"?"left":"top",children:Y.jsx(gd,{style:{cursor:"pointer"},className:`toolbar-btn-wrapper ${E||""}`,children:Y.jsx(pd,{disabled:C,color:"inherit",selected:e,className:"",sx:{":disabled":{backgroundColor:$t[200],color:$t[400]},":hover":{backgroundColor:e?"black":$t[200]},p:o?1:1.2,borderRadius:"50%",backgroundColor:e?"black":$t[200],color:e?"white":"black",...w},...D,children:Y.jsx(t,{sx:{fontSize:o?16:20}})})})})},$u=({thickness:t,selected:e})=>Y.jsx(xe.Box,{sx:{width:32,height:32,backgroundColor:e?"black":"transparent",borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},children:Y.jsx(xe.Box,{sx:{width:t*4,height:t*4,borderRadius:"50%",backgroundColor:e?"white":"black"}})}),J1=[1,2,3,4,5],ew=({value:t,onChange:e})=>{const o=h=>{e({thickness:h})};return Y.jsx(xe.Box,{children:Y.jsx(xe.Box,{sx:{display:"flex",gap:1},children:J1.map(h=>Y.jsx(xe.IconButton,{onClick:()=>o(h),children:Y.jsx($u,{thickness:h,selected:t.thickness===h})},h))})})},tw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M13.5333 2.96669L17.6583 7.08335C18.3083 7.74169 18.3083 8.79169 17.6583 9.45002L9.99996 17.1084C8.69996 18.4084 6.59163 18.4084 5.28329 17.1084L2.34163 14.1667C1.69163 13.5084 1.69163 12.4584 2.34163 11.8L11.175 2.96669C11.8333 2.31669 12.8833 2.31669 13.5333 2.96669ZM3.51663 12.9834L6.46663 15.925C7.11663 16.5834 8.16663 16.5834 8.82496 15.925L11.7666 12.9834L7.64163 8.85835L3.51663 12.9834Z",fill:"black"})),rw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M7.08333 11.25L9.16667 13.75L12.0833 10L15.8333 15H4.16667M17.5 15.8333V4.16667C17.5 3.24167 16.75 2.5 15.8333 2.5H4.16667C3.72464 2.5 3.30072 2.67559 2.98816 2.98816C2.67559 3.30072 2.5 3.72464 2.5 4.16667V15.8333C2.5 16.2754 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2754 17.5 15.8333Z",fill:"black"})),nw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M15.5167 1.25C15.0917 1.25 14.6667 1.40833 14.3417 1.74167L8.95835 7.125L12.4584 10.6167L17.8417 5.24167C18.5 4.58333 18.5 3.53333 17.8417 2.88333L16.7 1.74167C16.375 1.40833 15.95 1.25 15.5167 1.25ZM8.16668 7.91667L2.69168 13.3917L3.27502 13.975C2.83335 14.3667 2.40835 14.8167 1.98335 15.2417C1.33335 15.9 1.33335 16.95 1.98335 17.6C2.63335 18.25 3.68335 18.25 4.34168 17.6C4.76668 17.1917 5.20835 16.7333 5.60835 16.3167L6.19168 16.8917L11.6667 11.4167",fill:"black"})),iw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("g",{clipPath:"url(#clip0_2_107)"},Ae.createElement("path",{d:"M8.33337 7.49998H11.6667V4.99998H14.1667L10 0.833313L5.83337 4.99998H8.33337V7.49998ZM7.50004 8.33331H5.00004V5.83331L0.833374 9.99998L5.00004 14.1666V11.6666H7.50004V8.33331ZM19.1667 9.99998L15 5.83331V8.33331H12.5V11.6666H15V14.1666L19.1667 9.99998ZM11.6667 12.5H8.33337V15H5.83337L10 19.1666L14.1667 15H11.6667V12.5Z",fill:"black"})),Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clip0_2_107"},Ae.createElement("rect",{width:20,height:20,fill:"white"})))),ow=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M8.75004 15H15V16.6666H8.75004C5.75837 16.6666 3.33337 14.2416 3.33337 11.25C3.33337 8.25831 5.75837 5.83331 8.75004 5.83331H13.475L10.9 3.25831L12.0834 2.08331L16.6667 6.66665L12.0834 11.25L10.9084 10.075L13.475 7.49998H8.75004C6.66671 7.49998 5.00004 9.16665 5.00004 11.25C5.00004 13.3333 6.66671 15 8.75004 15Z",fill:"black"})),sw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M16.6667 11.25C16.6667 14.2416 14.2417 16.6666 11.25 16.6666H5.00004V15H11.25C13.3334 15 15 13.3333 15 11.25C15 9.16665 13.3334 7.49998 11.25 7.49998H6.52504L9.09171 10.075L7.91671 11.25L3.33337 6.66665L7.91671 2.08331L9.10004 3.25831L6.52504 5.83331H11.25C14.2417 5.83331 16.6667 8.25831 16.6667 11.25Z",fill:"black"})),aw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M7.79891 0C8.72176 0 9.51086 0.806641 9.51086 1.75V5.65043C10.1768 5.01215 11.4548 4.93379 12.2821 5.89648C13.1739 5.33836 14.3531 5.81262 14.7163 6.53906C16.6359 6.18852 17.5 7.39633 17.5 9.375C17.5 9.48227 17.4921 9.89359 17.4924 10C17.4989 12.4207 16.2789 13.0037 15.9957 14.8332C15.9251 15.2892 15.5312 15.625 15.0698 15.625H8.36957L8.36953 15.6249C7.65211 15.6245 6.96762 15.2106 6.65684 14.513C6.14926 13.3847 4.74129 10.786 3.63641 10.3125C2.92566 10.0079 2.50031 9.47719 2.5 8.75C2.49945 7.4132 3.87102 6.49406 5.11359 7.0266C5.44012 7.16656 5.76477 7.35129 6.08695 7.57945V1.75C6.08695 0.833984 6.88941 0 7.79891 0ZM7.8125 16.25H15.3125C15.8303 16.25 16.25 16.6697 16.25 17.1875V19.0625C16.25 19.5803 15.8303 20 15.3125 20H7.8125C7.29473 20 6.875 19.5803 6.875 19.0625V17.1875C6.875 16.6697 7.29473 16.25 7.8125 16.25ZM14.375 17.3438C13.9435 17.3438 13.5938 17.6935 13.5938 18.125C13.5938 18.5565 13.9435 18.9062 14.375 18.9062C14.8065 18.9062 15.1562 18.5565 15.1562 18.125C15.1562 17.6935 14.8065 17.3438 14.375 17.3438Z",fill:"black"})),uw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M15.8333 2.5H4.16667C3.25 2.5 2.5 3.25 2.5 4.16667V15.8333C2.5 16.75 3.25 17.5 4.16667 17.5H15.8333C16.75 17.5 17.5 16.75 17.5 15.8333V4.16667C17.5 3.25 16.75 2.5 15.8333 2.5ZM15 11.6667L12.9167 10.4167L10.8333 11.6667V5H15V11.6667Z",fill:"black"})),lw=t=>Ae.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M12.3333 1H4.55556C3.7 1 3.00778 1.7 3.00778 2.55556L3 15L8.44444 12.6667L13.8889 15V2.55556C13.8889 1.7 13.1889 1 12.3333 1Z",fill:"black"})),cw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M15.4167 3.33331L16.3834 6.95831L15.5834 7.17498C15.2084 6.44998 14.825 5.72498 14.3834 5.35831C13.9417 4.99998 13.425 4.99998 12.9167 4.99998H10.8334V13.75C10.8334 14.1666 10.8334 14.5833 11.1084 14.7916C11.3917 15 11.9417 15 12.5 15V15.8333H7.50003V15C8.05837 15 8.60837 15 8.8917 14.7916C9.1667 14.5833 9.1667 14.1666 9.1667 13.75V4.99998H7.08337C6.57503 4.99998 6.05837 4.99998 5.6167 5.35831C5.17503 5.72498 4.7917 6.44998 4.4167 7.17498L3.6167 6.95831L4.58337 3.33331H15.4167Z",fill:"black"})),fw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M7.5 8.33331H5.83333V9.99998H7.5V8.33331ZM10.8333 8.33331H9.16667V9.99998H10.8333V8.33331ZM14.1667 8.33331H12.5V9.99998H14.1667V8.33331ZM15.8333 2.49998H15V0.833313H13.3333V2.49998H6.66667V0.833313H5V2.49998H4.16667C3.24167 2.49998 2.5 3.24998 2.5 4.16665V15.8333C2.5 16.2753 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2753 17.5 15.8333V4.16665C17.5 3.72462 17.3244 3.3007 17.0118 2.98813C16.6993 2.67557 16.2754 2.49998 15.8333 2.49998ZM15.8333 15.8333H4.16667V6.66665H15.8333V15.8333Z",fill:"black"})),hw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M14.0334 2.27502C13.7084 2.27502 13.3917 2.40002 13.1417 2.64169L11.375 4.40836L15.7917 8.83336L17.5584 7.08336C18.0584 6.57502 18.0584 5.78336 17.5584 5.30002L14.9167 2.64169C14.6667 2.40002 14.35 2.27502 14.0334 2.27502ZM10.7834 5.00002L4.03337 11.7584L6.16671 11.9917L6.31671 13.9L8.21671 14.0417L8.45837 16.175L15.2084 9.41669M3.54171 12.5334L2.08337 18.1084L7.66671 16.6167L7.46671 14.8167L5.54171 14.675L5.39171 12.7417",fill:"black"})),dw=t=>Ae.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M6.58053 6.25992L9.9197 8.92093C10.1501 9.10457 10.5 8.94787 10.5 8.66102L10.5 3.33898C10.5 3.05213 10.1501 2.89543 9.9197 3.07907L6.58053 5.74008C6.4108 5.87535 6.4108 6.12465 6.58053 6.25992Z",fill:"black"}),Ae.createElement("path",{d:"M1.6273 6.25992L4.96647 8.92093C5.19691 9.10457 5.54677 8.94787 5.54677 8.66102L5.54677 3.33898C5.54677 3.05213 5.19691 2.89543 4.96647 3.07907L1.6273 5.74008C1.45757 5.87535 1.45757 6.12465 1.6273 6.25992Z",fill:"black"})),gw=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("g",{clipPath:"url(#clip0_2_160)"},Ae.createElement("path",{d:"M5.00004 8.33331C4.08337 8.33331 3.33337 9.08331 3.33337 9.99998C3.33337 10.9166 4.08337 11.6666 5.00004 11.6666C5.91671 11.6666 6.66671 10.9166 6.66671 9.99998C6.66671 9.08331 5.91671 8.33331 5.00004 8.33331ZM15 8.33331C14.0834 8.33331 13.3334 9.08331 13.3334 9.99998C13.3334 10.9166 14.0834 11.6666 15 11.6666C15.9167 11.6666 16.6667 10.9166 16.6667 9.99998C16.6667 9.08331 15.9167 8.33331 15 8.33331ZM10 8.33331C9.08337 8.33331 8.33337 9.08331 8.33337 9.99998C8.33337 10.9166 9.08337 11.6666 10 11.6666C10.9167 11.6666 11.6667 10.9166 11.6667 9.99998C11.6667 9.08331 10.9167 8.33331 10 8.33331Z",fill:"black"})),Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clip0_2_160"},Ae.createElement("rect",{width:20,height:20,fill:"white"})))),pw=t=>Ae.createElement("svg",{width:13,height:11,viewBox:"0 0 13 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M6.06221 10.5L3.52502e-05 -1.05994e-06L12.1244 0L6.06221 10.5Z",fill:"white"})),vw=t=>Ae.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("g",{clipPath:"url(#clip0_1_378)"},Ae.createElement("path",{d:"M2.66665 4.00004H1.33331V13.3334C1.33331 14.0667 1.93331 14.6667 2.66665 14.6667H12V13.3334H2.66665V4.00004ZM13.3333 1.33337H5.33331C4.59998 1.33337 3.99998 1.93337 3.99998 2.66671V10.6667C3.99998 11.4 4.59998 12 5.33331 12H13.3333C14.0666 12 14.6666 11.4 14.6666 10.6667V2.66671C14.6666 1.93337 14.0666 1.33337 13.3333 1.33337ZM12.6666 7.33337H9.99998V10H8.66665V7.33337H5.99998V6.00004H8.66665V3.33337H9.99998V6.00004H12.6666V7.33337Z",fill:"black"})),Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clip0_1_378"},Ae.createElement("rect",{width:16,height:16,fill:"white"})))),mw=t=>Ae.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("g",{clipPath:"url(#clip0_30_760)"},Ae.createElement("path",{d:"M2.66671 3.99998H1.33337V13.3333C1.33337 14.0666 1.93337 14.6666 2.66671 14.6666H12V13.3333H2.66671V3.99998ZM13.3334 1.33331H5.33337C4.60004 1.33331 4.00004 1.93331 4.00004 2.66665V10.6666C4.00004 11.4 4.60004 12 5.33337 12H13.3334C14.0667 12 14.6667 11.4 14.6667 10.6666V2.66665C14.6667 1.93331 14.0667 1.33331 13.3334 1.33331ZM12.6667 7.33331H6.00004V5.99998H12.6667V7.33331ZM10 9.99998H6.00004V8.66665H10V9.99998ZM12.6667 4.66665H6.00004V3.33331H12.6667V4.66665Z",fill:"black"})),Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clip0_30_760"},Ae.createElement("rect",{width:16,height:16,fill:"white"})))),yw=t=>Ae.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M5.66667 9L7.33333 11L9.66667 8L12.6667 12H3.33333M14 12.6667V3.33333C14 2.59333 13.4 2 12.6667 2H3.33333C2.97971 2 2.64057 2.14048 2.39052 2.39052C2.14048 2.64057 2 2.97971 2 3.33333V12.6667C2 13.0203 2.14048 13.3594 2.39052 13.6095C2.64057 13.8595 2.97971 14 3.33333 14H12.6667C13.0203 14 13.3594 13.8595 13.6095 13.6095C13.8595 13.3594 14 13.0203 14 12.6667Z",fill:"white"})),_w=t=>Ae.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("rect",{width:20,height:20,rx:2,fill:"black",fillOpacity:.5}),Ae.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55556 4C9.06464 4 8.66667 4.39797 8.66667 4.88889H6.44444C6.19898 4.88889 6 5.08787 6 5.33333C6 5.57879 6.19898 5.77778 6.44444 5.77778H13.5556C13.801 5.77778 14 5.57879 14 5.33333C14 5.08787 13.801 4.88889 13.5556 4.88889H11.3333C11.3333 4.39797 10.9354 4 10.4444 4H9.55556ZM14 6.66667H6V13.7778C6 14.2687 6.59695 14.6667 7.33333 14.6667H12.6667C13.403 14.6667 14 14.2687 14 13.7778V6.66667ZM7.77778 8.88889C7.77778 8.64343 7.97676 8.44444 8.22222 8.44444C8.46768 8.44444 8.66667 8.64343 8.66667 8.88889V12.4444C8.66667 12.6899 8.46768 12.8889 8.22222 12.8889C7.97676 12.8889 7.77778 12.6899 7.77778 12.4444V8.88889ZM9.55556 8.88889C9.55556 8.64343 9.75454 8.44444 10 8.44444C10.2455 8.44444 10.4444 8.64343 10.4444 8.88889V12.4444C10.4444 12.6899 10.2455 12.8889 10 12.8889C9.75454 12.8889 9.55556 12.6899 9.55556 12.4444V8.88889ZM11.7778 8.44444C11.5323 8.44444 11.3333 8.64343 11.3333 8.88889V12.4444C11.3333 12.6899 11.5323 12.8889 11.7778 12.8889C12.0232 12.8889 12.2222 12.6899 12.2222 12.4444V8.88889C12.2222 8.64343 12.0232 8.44444 11.7778 8.44444Z",fill:"white"})),bw=t=>Ae.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ae.createElement("path",{d:"M1.76 12.2455C3.78 14.2653 6.87333 14.5386 9.19333 13.0788L8.22 12.1055C6.44667 13.0588 4.19333 12.7921 2.7 11.2989C0.88 9.4791 0.88 6.51938 2.7 4.69955C3.61333 3.79297 4.80667 3.35301 6 3.35301V5.33283L8.66667 2.66641L6 0V2.00648C4.46667 2.00648 2.92667 2.58642 1.76 3.75964C-0.586667 6.09942 -0.586667 9.89906 1.76 12.2455ZM6 7.99924L10 11.9989L14 7.99924L10 3.99962L6 7.99924Z",fill:"#2D2D2D"})),jt=({variant:t,...e})=>{switch(t){case"eraser":return Y.jsx(tw,{...e});case"image":return Y.jsx(rw,{...e});case"pen":return Y.jsx(nw,{...e});case"move":return Y.jsx(iw,{...e});case"redo":return Y.jsx(ow,{...e});case"undo":return Y.jsx(sw,{...e});case"hand":return Y.jsx(aw,{...e});case"bookmark":return Y.jsx(uw,{...e});case"bookmark_2":return Y.jsx(lw,{...e});case"text":return Y.jsx(cw,{...e});case"calendar":return Y.jsx(fw,{...e});case"pencil":return Y.jsx(hw,{...e});case"fold":return Y.jsx(dw,{...e});case"more":return Y.jsx(gw,{...e});case"arrow":return Y.jsx(pw,{...e});case"bookmark_text":return Y.jsx(mw,{...e});case"bookmark_image":return Y.jsx(yw,{...e});case"library_add":return Y.jsx(vw,{...e});case"delete":return Y.jsx(_w,{...e});case"clockwise90":return Y.jsx(bw,{...e});default:return null}};function vd(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"pencil"}),...t})}function ww(){const[t,e]=Te.useState(null),{core:o}=Ut(),{tool:h,setTool:v}=gn(),[w,C]=Te.useState(o.getToolConfig(He.FREEDRAW)),E=h===He.FREEDRAW,D=d=>{E?e(d.currentTarget):v(He.FREEDRAW)},p=()=>{e(null)},i=d=>{const c=o.updateToolConfig(He.FREEDRAW,d);C(c),p()};return Y.jsxs(Y.Fragment,{children:[Y.jsx(mr,{selected:E,Icon:vd,onClick:D,tooltip:"",disableToolbar:!0}),Y.jsx(Xs,{open:!!t,anchorEl:t,onClose:p,children:Y.jsx(ew,{value:w,onChange:i})})]})}function md(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"move"}),...t})}function xw(){const{tool:t,setTool:e}=gn(),o=t===He.PAN,h=v=>{e(He.PAN)};return Y.jsx(mr,{disableToolbar:!0,selected:o,Icon:md,onClick:h,tooltip:""})}function yd(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"hand"}),...t})}function Cw(){const{tool:t,setTool:e}=gn(),o=t===He.SELECT,h=v=>{e(He.SELECT)};return Y.jsx(mr,{selected:o,disableToolbar:!0,Icon:yd,onClick:h,tooltip:""})}const Sw=[1,2,3,4,5],Tw=({value:t,onChange:e})=>{const o=h=>{e({thickness:h})};return Y.jsx(xe.Box,{children:Y.jsx(xe.Box,{sx:{display:"flex",gap:1},children:Sw.map(h=>Y.jsx(xe.IconButton,{onClick:()=>o(h),children:Y.jsx($u,{thickness:h,selected:t.thickness===h})},h))})})};function _d(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"pen"}),...t})}function Ew(){const[t,e]=Te.useState(null),{core:o}=Ut(),{tool:h,setTool:v}=gn(),[w,C]=Te.useState(o.getToolConfig(He.MARKER)),E=h===He.MARKER,D=d=>{E?e(d.currentTarget):v(He.MARKER)},p=()=>{e(null)},i=d=>{const c=o.updateToolConfig(He.MARKER,d);C(c),p()};return Y.jsxs(Y.Fragment,{children:[Y.jsx(mr,{selected:E,Icon:_d,onClick:D,tooltip:"",disableToolbar:!0}),Y.jsx(Xs,{open:!!t,anchorEl:t,onClose:p,children:Y.jsx(Tw,{value:w,onChange:i})})]})}function qu(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"image"}),...t})}const Ow=xe.styled(xe.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 10px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
`),bd=xe.styled("label")`
  cursor: pointer;
`,wd=xe.styled("input")`
  display: none;
`,Aw=({disableToolbar:t=!0,tooltip:e="",...o})=>{const{core:h,toolbarPosition:v}=Ut(),w=E=>{E.target.value=null},C=async E=>{await Promise.all([...E.target.files].map(D=>new Promise((p,i)=>{const d=new FileReader;d.onload=function(c){h.addImage(c.target.result),p()},d.readAsDataURL(D)}))),h.selectTool(He.SELECT)};return t?Y.jsxs("span",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[Y.jsxs(bd,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:$t[200]},p:1.2,borderRadius:"50%",color:"black"},children:[Y.jsx(qu,{sx:{fontSize:20,color:"inherit"}}),Y.jsx(wd,{id:"file-upload",type:"file",...o,accept:"image/*",onClick:w,onChange:C})]}),Y.jsx(Ow,{variant:"body1",children:e})]}):Y.jsx(xe.Tooltip,{title:e,arrow:!0,placement:v==="right"?"left":"top",children:Y.jsxs(bd,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:$t[200]},p:1.5,borderRadius:"50%",backgroundColor:$t[200],color:"black"},children:[Y.jsx(qu,{sx:{fontSize:20,color:"inherit"}}),Y.jsx(wd,{id:"file-upload",type:"file",...o,accept:"image/*",onClick:w,onChange:C})]})})};function xd(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"text"}),...t})}function Pw(){const{core:t,touch:e}=Ut(),{tool:o,setTool:h}=gn(),v=o===He.TEXT,w=C=>{e?t.addText("text"):h(He.TEXT)};return Y.jsx(Y.Fragment,{children:Y.jsx(mr,{disableToolbar:!0,selected:v,Icon:xd,onClick:w,tooltip:""})})}const Dw=[1,2,3,4,5],Mw=({value:t,onChange:e})=>{const o=h=>{e({thickness:h})};return Y.jsx(xe.Box,{children:Y.jsx(xe.Box,{sx:{display:"flex",gap:1},children:Dw.map(h=>Y.jsx(xe.IconButton,{onClick:()=>o(h),children:Y.jsx($u,{thickness:h,selected:t.thickness===h})},h))})})};function Cd(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"eraser"}),...t})}function Rw(){const[t,e]=Te.useState(null),{core:o}=Ut(),{tool:h,setTool:v}=gn(),[w,C]=Te.useState(o.getToolConfig(He.ERASER)),E=h===He.ERASER,D=d=>{E?e(d.currentTarget):v(He.ERASER)},p=()=>{e(null)},i=d=>{const c=o.updateToolConfig(He.ERASER,d);C(c),p()};return Y.jsxs(Y.Fragment,{children:[Y.jsx(mr,{selected:E,Icon:Cd,onClick:D,tooltip:"",disableToolbar:!0}),Y.jsx(Xs,{open:!!t,anchorEl:t,onClose:p,children:Y.jsx(Mw,{value:w,onChange:i})})]})}var $s={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$s.exports,function(t,e){(function(){var o,h="4.17.21",v=200,w="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",E="Invalid `variable` option passed into `_.template`",D="__lodash_hash_undefined__",p=500,i="__lodash_placeholder__",d=1,c=2,n=4,a=1,s=2,l=1,g=2,u=4,m=8,y=16,b=32,x=64,T=128,M=256,I=512,R=30,W="...",K=800,$=16,ae=1,ce=2,fe=3,le=1/0,ye=9007199254740991,Ee=17976931348623157e292,ne=0/0,P=4294967295,B=P-1,F=P>>>1,L=[["ary",T],["bind",l],["bindKey",g],["curry",m],["curryRight",y],["flip",I],["partial",b],["partialRight",x],["rearg",M]],G="[object Arguments]",O="[object Array]",k="[object AsyncFunction]",V="[object Boolean]",z="[object Date]",Z="[object DOMException]",J="[object Error]",U="[object Function]",he="[object GeneratorFunction]",ie="[object Map]",ee="[object Number]",Q="[object Null]",se="[object Object]",de="[object Promise]",ue="[object Proxy]",pe="[object RegExp]",be="[object Set]",Ie="[object String]",Pe="[object Symbol]",oe="[object Undefined]",Oe="[object WeakMap]",Fe="[object WeakSet]",Ne="[object ArrayBuffer]",Xe="[object DataView]",et="[object Float32Array]",Dt="[object Float64Array]",_t="[object Int8Array]",yr="[object Int16Array]",Hr="[object Int32Array]",qt="[object Uint8Array]",ci="[object Uint8ClampedArray]",Rn="[object Uint16Array]",fi="[object Uint32Array]",jo=/\b__p \+= '';/g,Lo=/\b(__p \+=) '' \+/g,ra=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pn=/&(?:amp|lt|gt|quot|#39);/g,Bi=/[&<>"']/g,Fo=RegExp(pn.source),na=RegExp(Bi.source),bl=/<%-([\s\S]+?)%>/g,ia=/<%([\s\S]+?)%>/g,oa=/<%=([\s\S]+?)%>/g,sa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aa=/^\w*$/,wl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bo=/[\\^$.*+?()[\]{}|]/g,ua=RegExp(Bo.source),No=/^\s+/,xl=/\s/,Cl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sl=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/[()=,{}\[\]\/\s]/,We=/\\(\\)?/g,ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,tt=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,Et=/^0o[0-7]+$/i,Mt=/^(?:0|[1-9]\d*)$/,ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zr=/($^)/,la=/['\n\r\u2028\u2029\\]/g,or="\\ud800-\\udfff",mS="\\u0300-\\u036f",yS="\\ufe20-\\ufe2f",_S="\\u20d0-\\u20ff",gg=mS+yS+_S,pg="\\u2700-\\u27bf",vg="a-z\\xdf-\\xf6\\xf8-\\xff",bS="\\xac\\xb1\\xd7\\xf7",wS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xS="\\u2000-\\u206f",CS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mg="A-Z\\xc0-\\xd6\\xd8-\\xde",yg="\\ufe0e\\ufe0f",_g=bS+wS+xS+CS,Tl="[']",SS="["+or+"]",bg="["+_g+"]",ca="["+gg+"]",wg="\\d+",TS="["+pg+"]",xg="["+vg+"]",Cg="[^"+or+_g+wg+pg+vg+mg+"]",El="\\ud83c[\\udffb-\\udfff]",ES="(?:"+ca+"|"+El+")",Sg="[^"+or+"]",Ol="(?:\\ud83c[\\udde6-\\uddff]){2}",Al="[\\ud800-\\udbff][\\udc00-\\udfff]",Ni="["+mg+"]",Tg="\\u200d",Eg="(?:"+xg+"|"+Cg+")",OS="(?:"+Ni+"|"+Cg+")",Og="(?:"+Tl+"(?:d|ll|m|re|s|t|ve))?",Ag="(?:"+Tl+"(?:D|LL|M|RE|S|T|VE))?",Pg=ES+"?",Dg="["+yg+"]?",AS="(?:"+Tg+"(?:"+[Sg,Ol,Al].join("|")+")"+Dg+Pg+")*",PS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",DS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mg=Dg+Pg+AS,MS="(?:"+[TS,Ol,Al].join("|")+")"+Mg,RS="(?:"+[Sg+ca+"?",ca,Ol,Al,SS].join("|")+")",kS=RegExp(Tl,"g"),IS=RegExp(ca,"g"),Pl=RegExp(El+"(?="+El+")|"+RS+Mg,"g"),jS=RegExp([Ni+"?"+xg+"+"+Og+"(?="+[bg,Ni,"$"].join("|")+")",OS+"+"+Ag+"(?="+[bg,Ni+Eg,"$"].join("|")+")",Ni+"?"+Eg+"+"+Og,Ni+"+"+Ag,DS,PS,wg,MS].join("|"),"g"),LS=RegExp("["+Tg+or+gg+yg+"]"),FS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,BS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],NS=-1,Ct={};Ct[et]=Ct[Dt]=Ct[_t]=Ct[yr]=Ct[Hr]=Ct[qt]=Ct[ci]=Ct[Rn]=Ct[fi]=!0,Ct[G]=Ct[O]=Ct[Ne]=Ct[V]=Ct[Xe]=Ct[z]=Ct[J]=Ct[U]=Ct[ie]=Ct[ee]=Ct[se]=Ct[pe]=Ct[be]=Ct[Ie]=Ct[Oe]=!1;var xt={};xt[G]=xt[O]=xt[Ne]=xt[Xe]=xt[V]=xt[z]=xt[et]=xt[Dt]=xt[_t]=xt[yr]=xt[Hr]=xt[ie]=xt[ee]=xt[se]=xt[pe]=xt[be]=xt[Ie]=xt[Pe]=xt[qt]=xt[ci]=xt[Rn]=xt[fi]=!0,xt[J]=xt[U]=xt[Oe]=!1;var VS={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},US={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},YS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},WS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},HS=parseFloat,zS=parseInt,Rg=typeof Ji=="object"&&Ji&&Ji.Object===Object&&Ji,GS=typeof self=="object"&&self&&self.Object===Object&&self,zt=Rg||GS||Function("return this")(),Dl=e&&!e.nodeType&&e,hi=Dl&&!0&&t&&!t.nodeType&&t,kg=hi&&hi.exports===Dl,Ml=kg&&Rg.process,Mr=function(){try{var te=hi&&hi.require&&hi.require("util").types;return te||Ml&&Ml.binding&&Ml.binding("util")}catch{}}(),Ig=Mr&&Mr.isArrayBuffer,jg=Mr&&Mr.isDate,Lg=Mr&&Mr.isMap,Fg=Mr&&Mr.isRegExp,Bg=Mr&&Mr.isSet,Ng=Mr&&Mr.isTypedArray;function _r(te,ve,ge){switch(ge.length){case 0:return te.call(ve);case 1:return te.call(ve,ge[0]);case 2:return te.call(ve,ge[0],ge[1]);case 3:return te.call(ve,ge[0],ge[1],ge[2])}return te.apply(ve,ge)}function XS(te,ve,ge,ke){for(var ze=-1,at=te==null?0:te.length;++ze<at;){var Bt=te[ze];ve(ke,Bt,ge(Bt),te)}return ke}function Rr(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke&&ve(te[ge],ge,te)!==!1;);return te}function $S(te,ve){for(var ge=te==null?0:te.length;ge--&&ve(te[ge],ge,te)!==!1;);return te}function Vg(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke;)if(!ve(te[ge],ge,te))return!1;return!0}function kn(te,ve){for(var ge=-1,ke=te==null?0:te.length,ze=0,at=[];++ge<ke;){var Bt=te[ge];ve(Bt,ge,te)&&(at[ze++]=Bt)}return at}function fa(te,ve){var ge=te==null?0:te.length;return!!ge&&Vi(te,ve,0)>-1}function Rl(te,ve,ge){for(var ke=-1,ze=te==null?0:te.length;++ke<ze;)if(ge(ve,te[ke]))return!0;return!1}function Tt(te,ve){for(var ge=-1,ke=te==null?0:te.length,ze=Array(ke);++ge<ke;)ze[ge]=ve(te[ge],ge,te);return ze}function In(te,ve){for(var ge=-1,ke=ve.length,ze=te.length;++ge<ke;)te[ze+ge]=ve[ge];return te}function kl(te,ve,ge,ke){var ze=-1,at=te==null?0:te.length;for(ke&&at&&(ge=te[++ze]);++ze<at;)ge=ve(ge,te[ze],ze,te);return ge}function qS(te,ve,ge,ke){var ze=te==null?0:te.length;for(ke&&ze&&(ge=te[--ze]);ze--;)ge=ve(ge,te[ze],ze,te);return ge}function Il(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke;)if(ve(te[ge],ge,te))return!0;return!1}var KS=jl("length");function QS(te){return te.split("")}function ZS(te){return te.match(Se)||[]}function Ug(te,ve,ge){var ke;return ge(te,function(ze,at,Bt){if(ve(ze,at,Bt))return ke=at,!1}),ke}function ha(te,ve,ge,ke){for(var ze=te.length,at=ge+(ke?1:-1);ke?at--:++at<ze;)if(ve(te[at],at,te))return at;return-1}function Vi(te,ve,ge){return ve===ve?cT(te,ve,ge):ha(te,Yg,ge)}function JS(te,ve,ge,ke){for(var ze=ge-1,at=te.length;++ze<at;)if(ke(te[ze],ve))return ze;return-1}function Yg(te){return te!==te}function Wg(te,ve){var ge=te==null?0:te.length;return ge?Fl(te,ve)/ge:ne}function jl(te){return function(ve){return ve==null?o:ve[te]}}function Ll(te){return function(ve){return te==null?o:te[ve]}}function Hg(te,ve,ge,ke,ze){return ze(te,function(at,Bt,bt){ge=ke?(ke=!1,at):ve(ge,at,Bt,bt)}),ge}function eT(te,ve){var ge=te.length;for(te.sort(ve);ge--;)te[ge]=te[ge].value;return te}function Fl(te,ve){for(var ge,ke=-1,ze=te.length;++ke<ze;){var at=ve(te[ke]);at!==o&&(ge=ge===o?at:ge+at)}return ge}function Bl(te,ve){for(var ge=-1,ke=Array(te);++ge<te;)ke[ge]=ve(ge);return ke}function tT(te,ve){return Tt(ve,function(ge){return[ge,te[ge]]})}function zg(te){return te&&te.slice(0,qg(te)+1).replace(No,"")}function br(te){return function(ve){return te(ve)}}function Nl(te,ve){return Tt(ve,function(ge){return te[ge]})}function Vo(te,ve){return te.has(ve)}function Gg(te,ve){for(var ge=-1,ke=te.length;++ge<ke&&Vi(ve,te[ge],0)>-1;);return ge}function Xg(te,ve){for(var ge=te.length;ge--&&Vi(ve,te[ge],0)>-1;);return ge}function rT(te,ve){for(var ge=te.length,ke=0;ge--;)te[ge]===ve&&++ke;return ke}var nT=Ll(VS),iT=Ll(US);function oT(te){return"\\"+WS[te]}function sT(te,ve){return te==null?o:te[ve]}function Ui(te){return LS.test(te)}function aT(te){return FS.test(te)}function uT(te){for(var ve,ge=[];!(ve=te.next()).done;)ge.push(ve.value);return ge}function Vl(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke,ze){ge[++ve]=[ze,ke]}),ge}function $g(te,ve){return function(ge){return te(ve(ge))}}function jn(te,ve){for(var ge=-1,ke=te.length,ze=0,at=[];++ge<ke;){var Bt=te[ge];(Bt===ve||Bt===i)&&(te[ge]=i,at[ze++]=ge)}return at}function da(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke){ge[++ve]=ke}),ge}function lT(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke){ge[++ve]=[ke,ke]}),ge}function cT(te,ve,ge){for(var ke=ge-1,ze=te.length;++ke<ze;)if(te[ke]===ve)return ke;return-1}function fT(te,ve,ge){for(var ke=ge+1;ke--;)if(te[ke]===ve)return ke;return ke}function Yi(te){return Ui(te)?dT(te):KS(te)}function Gr(te){return Ui(te)?gT(te):QS(te)}function qg(te){for(var ve=te.length;ve--&&xl.test(te.charAt(ve)););return ve}var hT=Ll(YS);function dT(te){for(var ve=Pl.lastIndex=0;Pl.test(te);)++ve;return ve}function gT(te){return te.match(Pl)||[]}function pT(te){return te.match(jS)||[]}var vT=function te(ve){ve=ve==null?zt:Wi.defaults(zt.Object(),ve,Wi.pick(zt,BS));var ge=ve.Array,ke=ve.Date,ze=ve.Error,at=ve.Function,Bt=ve.Math,bt=ve.Object,Ul=ve.RegExp,mT=ve.String,kr=ve.TypeError,ga=ge.prototype,yT=at.prototype,Hi=bt.prototype,pa=ve["__core-js_shared__"],va=yT.toString,yt=Hi.hasOwnProperty,_T=0,Kg=function(){var r=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ma=Hi.toString,bT=va.call(bt),wT=zt._,xT=Ul("^"+va.call(yt).replace(Bo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ya=kg?ve.Buffer:o,Ln=ve.Symbol,_a=ve.Uint8Array,Qg=ya?ya.allocUnsafe:o,ba=$g(bt.getPrototypeOf,bt),Zg=bt.create,Jg=Hi.propertyIsEnumerable,wa=ga.splice,ep=Ln?Ln.isConcatSpreadable:o,Uo=Ln?Ln.iterator:o,di=Ln?Ln.toStringTag:o,xa=function(){try{var r=yi(bt,"defineProperty");return r({},"",{}),r}catch{}}(),CT=ve.clearTimeout!==zt.clearTimeout&&ve.clearTimeout,ST=ke&&ke.now!==zt.Date.now&&ke.now,TT=ve.setTimeout!==zt.setTimeout&&ve.setTimeout,Ca=Bt.ceil,Sa=Bt.floor,Yl=bt.getOwnPropertySymbols,ET=ya?ya.isBuffer:o,tp=ve.isFinite,OT=ga.join,AT=$g(bt.keys,bt),Nt=Bt.max,Kt=Bt.min,PT=ke.now,DT=ve.parseInt,rp=Bt.random,MT=ga.reverse,Wl=yi(ve,"DataView"),Yo=yi(ve,"Map"),Hl=yi(ve,"Promise"),zi=yi(ve,"Set"),Wo=yi(ve,"WeakMap"),Ho=yi(bt,"create"),Ta=Wo&&new Wo,Gi={},RT=_i(Wl),kT=_i(Yo),IT=_i(Hl),jT=_i(zi),LT=_i(Wo),Ea=Ln?Ln.prototype:o,zo=Ea?Ea.valueOf:o,np=Ea?Ea.toString:o;function j(r){if(Rt(r)&&!Ge(r)&&!(r instanceof rt)){if(r instanceof Ir)return r;if(yt.call(r,"__wrapped__"))return iv(r)}return new Ir(r)}var Xi=function(){function r(){}return function(f){if(!Ot(f))return{};if(Zg)return Zg(f);r.prototype=f;var _=new r;return r.prototype=o,_}}();function Oa(){}function Ir(r,f){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=o}j.templateSettings={escape:bl,evaluate:ia,interpolate:oa,variable:"",imports:{_:j}},j.prototype=Oa.prototype,j.prototype.constructor=j,Ir.prototype=Xi(Oa.prototype),Ir.prototype.constructor=Ir;function rt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function FT(){var r=new rt(this.__wrapped__);return r.__actions__=sr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=sr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=sr(this.__views__),r}function BT(){if(this.__filtered__){var r=new rt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function NT(){var r=this.__wrapped__.value(),f=this.__dir__,_=Ge(r),S=f<0,A=_?r.length:0,N=QE(0,A,this.__views__),H=N.start,q=N.end,re=q-H,me=S?q:H-1,_e=this.__iteratees__,we=_e.length,Me=0,je=Kt(re,this.__takeCount__);if(!_||!S&&A==re&&je==re)return Op(r,this.__actions__);var Ve=[];e:for(;re--&&Me<je;){me+=f;for(var qe=-1,Ue=r[me];++qe<we;){var Je=_e[qe],it=Je.iteratee,Cr=Je.type,tr=it(Ue);if(Cr==ce)Ue=tr;else if(!tr){if(Cr==ae)continue e;break e}}Ve[Me++]=Ue}return Ve}rt.prototype=Xi(Oa.prototype),rt.prototype.constructor=rt;function gi(r){var f=-1,_=r==null?0:r.length;for(this.clear();++f<_;){var S=r[f];this.set(S[0],S[1])}}function VT(){this.__data__=Ho?Ho(null):{},this.size=0}function UT(r){var f=this.has(r)&&delete this.__data__[r];return this.size-=f?1:0,f}function YT(r){var f=this.__data__;if(Ho){var _=f[r];return _===D?o:_}return yt.call(f,r)?f[r]:o}function WT(r){var f=this.__data__;return Ho?f[r]!==o:yt.call(f,r)}function HT(r,f){var _=this.__data__;return this.size+=this.has(r)?0:1,_[r]=Ho&&f===o?D:f,this}gi.prototype.clear=VT,gi.prototype.delete=UT,gi.prototype.get=YT,gi.prototype.has=WT,gi.prototype.set=HT;function vn(r){var f=-1,_=r==null?0:r.length;for(this.clear();++f<_;){var S=r[f];this.set(S[0],S[1])}}function zT(){this.__data__=[],this.size=0}function GT(r){var f=this.__data__,_=Aa(f,r);if(_<0)return!1;var S=f.length-1;return _==S?f.pop():wa.call(f,_,1),--this.size,!0}function XT(r){var f=this.__data__,_=Aa(f,r);return _<0?o:f[_][1]}function $T(r){return Aa(this.__data__,r)>-1}function qT(r,f){var _=this.__data__,S=Aa(_,r);return S<0?(++this.size,_.push([r,f])):_[S][1]=f,this}vn.prototype.clear=zT,vn.prototype.delete=GT,vn.prototype.get=XT,vn.prototype.has=$T,vn.prototype.set=qT;function mn(r){var f=-1,_=r==null?0:r.length;for(this.clear();++f<_;){var S=r[f];this.set(S[0],S[1])}}function KT(){this.size=0,this.__data__={hash:new gi,map:new(Yo||vn),string:new gi}}function QT(r){var f=Va(this,r).delete(r);return this.size-=f?1:0,f}function ZT(r){return Va(this,r).get(r)}function JT(r){return Va(this,r).has(r)}function eE(r,f){var _=Va(this,r),S=_.size;return _.set(r,f),this.size+=_.size==S?0:1,this}mn.prototype.clear=KT,mn.prototype.delete=QT,mn.prototype.get=ZT,mn.prototype.has=JT,mn.prototype.set=eE;function pi(r){var f=-1,_=r==null?0:r.length;for(this.__data__=new mn;++f<_;)this.add(r[f])}function tE(r){return this.__data__.set(r,D),this}function rE(r){return this.__data__.has(r)}pi.prototype.add=pi.prototype.push=tE,pi.prototype.has=rE;function Xr(r){var f=this.__data__=new vn(r);this.size=f.size}function nE(){this.__data__=new vn,this.size=0}function iE(r){var f=this.__data__,_=f.delete(r);return this.size=f.size,_}function oE(r){return this.__data__.get(r)}function sE(r){return this.__data__.has(r)}function aE(r,f){var _=this.__data__;if(_ instanceof vn){var S=_.__data__;if(!Yo||S.length<v-1)return S.push([r,f]),this.size=++_.size,this;_=this.__data__=new mn(S)}return _.set(r,f),this.size=_.size,this}Xr.prototype.clear=nE,Xr.prototype.delete=iE,Xr.prototype.get=oE,Xr.prototype.has=sE,Xr.prototype.set=aE;function ip(r,f){var _=Ge(r),S=!_&&bi(r),A=!_&&!S&&Un(r),N=!_&&!S&&!A&&Qi(r),H=_||S||A||N,q=H?Bl(r.length,mT):[],re=q.length;for(var me in r)(f||yt.call(r,me))&&!(H&&(me=="length"||A&&(me=="offset"||me=="parent")||N&&(me=="buffer"||me=="byteLength"||me=="byteOffset")||wn(me,re)))&&q.push(me);return q}function op(r){var f=r.length;return f?r[tc(0,f-1)]:o}function uE(r,f){return Ua(sr(r),vi(f,0,r.length))}function lE(r){return Ua(sr(r))}function zl(r,f,_){(_!==o&&!$r(r[f],_)||_===o&&!(f in r))&&yn(r,f,_)}function Go(r,f,_){var S=r[f];(!(yt.call(r,f)&&$r(S,_))||_===o&&!(f in r))&&yn(r,f,_)}function Aa(r,f){for(var _=r.length;_--;)if($r(r[_][0],f))return _;return-1}function cE(r,f,_,S){return Fn(r,function(A,N,H){f(S,A,_(A),H)}),S}function sp(r,f){return r&&nn(f,Yt(f),r)}function fE(r,f){return r&&nn(f,ur(f),r)}function yn(r,f,_){f=="__proto__"&&xa?xa(r,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):r[f]=_}function Gl(r,f){for(var _=-1,S=f.length,A=ge(S),N=r==null;++_<S;)A[_]=N?o:Ec(r,f[_]);return A}function vi(r,f,_){return r===r&&(_!==o&&(r=r<=_?r:_),f!==o&&(r=r>=f?r:f)),r}function jr(r,f,_,S,A,N){var H,q=f&d,re=f&c,me=f&n;if(_&&(H=A?_(r,S,A,N):_(r)),H!==o)return H;if(!Ot(r))return r;var _e=Ge(r);if(_e){if(H=JE(r),!q)return sr(r,H)}else{var we=Qt(r),Me=we==U||we==he;if(Un(r))return Dp(r,q);if(we==se||we==G||Me&&!A){if(H=re||Me?{}:qp(r),!q)return re?YE(r,fE(H,r)):UE(r,sp(H,r))}else{if(!xt[we])return A?r:{};H=eO(r,we,q)}}N||(N=new Xr);var je=N.get(r);if(je)return je;N.set(r,H),Sv(r)?r.forEach(function(Ue){H.add(jr(Ue,f,_,Ue,r,N))}):xv(r)&&r.forEach(function(Ue,Je){H.set(Je,jr(Ue,f,_,Je,r,N))});var Ve=me?re?hc:fc:re?ur:Yt,qe=_e?o:Ve(r);return Rr(qe||r,function(Ue,Je){qe&&(Je=Ue,Ue=r[Je]),Go(H,Je,jr(Ue,f,_,Je,r,N))}),H}function hE(r){var f=Yt(r);return function(_){return ap(_,r,f)}}function ap(r,f,_){var S=_.length;if(r==null)return!S;for(r=bt(r);S--;){var A=_[S],N=f[A],H=r[A];if(H===o&&!(A in r)||!N(H))return!1}return!0}function up(r,f,_){if(typeof r!="function")throw new kr(C);return Jo(function(){r.apply(o,_)},f)}function Xo(r,f,_,S){var A=-1,N=fa,H=!0,q=r.length,re=[],me=f.length;if(!q)return re;_&&(f=Tt(f,br(_))),S?(N=Rl,H=!1):f.length>=v&&(N=Vo,H=!1,f=new pi(f));e:for(;++A<q;){var _e=r[A],we=_==null?_e:_(_e);if(_e=S||_e!==0?_e:0,H&&we===we){for(var Me=me;Me--;)if(f[Me]===we)continue e;re.push(_e)}else N(f,we,S)||re.push(_e)}return re}var Fn=jp(rn),lp=jp($l,!0);function dE(r,f){var _=!0;return Fn(r,function(S,A,N){return _=!!f(S,A,N),_}),_}function Pa(r,f,_){for(var S=-1,A=r.length;++S<A;){var N=r[S],H=f(N);if(H!=null&&(q===o?H===H&&!xr(H):_(H,q)))var q=H,re=N}return re}function gE(r,f,_,S){var A=r.length;for(_=$e(_),_<0&&(_=-_>A?0:A+_),S=S===o||S>A?A:$e(S),S<0&&(S+=A),S=_>S?0:Ev(S);_<S;)r[_++]=f;return r}function cp(r,f){var _=[];return Fn(r,function(S,A,N){f(S,A,N)&&_.push(S)}),_}function Gt(r,f,_,S,A){var N=-1,H=r.length;for(_||(_=rO),A||(A=[]);++N<H;){var q=r[N];f>0&&_(q)?f>1?Gt(q,f-1,_,S,A):In(A,q):S||(A[A.length]=q)}return A}var Xl=Lp(),fp=Lp(!0);function rn(r,f){return r&&Xl(r,f,Yt)}function $l(r,f){return r&&fp(r,f,Yt)}function Da(r,f){return kn(f,function(_){return xn(r[_])})}function mi(r,f){f=Nn(f,r);for(var _=0,S=f.length;r!=null&&_<S;)r=r[on(f[_++])];return _&&_==S?r:o}function hp(r,f,_){var S=f(r);return Ge(r)?S:In(S,_(r))}function Jt(r){return r==null?r===o?oe:Q:di&&di in bt(r)?KE(r):lO(r)}function ql(r,f){return r>f}function pE(r,f){return r!=null&&yt.call(r,f)}function vE(r,f){return r!=null&&f in bt(r)}function mE(r,f,_){return r>=Kt(f,_)&&r<Nt(f,_)}function Kl(r,f,_){for(var S=_?Rl:fa,A=r[0].length,N=r.length,H=N,q=ge(N),re=1/0,me=[];H--;){var _e=r[H];H&&f&&(_e=Tt(_e,br(f))),re=Kt(_e.length,re),q[H]=!_&&(f||A>=120&&_e.length>=120)?new pi(H&&_e):o}_e=r[0];var we=-1,Me=q[0];e:for(;++we<A&&me.length<re;){var je=_e[we],Ve=f?f(je):je;if(je=_||je!==0?je:0,!(Me?Vo(Me,Ve):S(me,Ve,_))){for(H=N;--H;){var qe=q[H];if(!(qe?Vo(qe,Ve):S(r[H],Ve,_)))continue e}Me&&Me.push(Ve),me.push(je)}}return me}function yE(r,f,_,S){return rn(r,function(A,N,H){f(S,_(A),N,H)}),S}function $o(r,f,_){f=Nn(f,r),r=Jp(r,f);var S=r==null?r:r[on(Fr(f))];return S==null?o:_r(S,r,_)}function dp(r){return Rt(r)&&Jt(r)==G}function _E(r){return Rt(r)&&Jt(r)==Ne}function bE(r){return Rt(r)&&Jt(r)==z}function qo(r,f,_,S,A){return r===f?!0:r==null||f==null||!Rt(r)&&!Rt(f)?r!==r&&f!==f:wE(r,f,_,S,qo,A)}function wE(r,f,_,S,A,N){var H=Ge(r),q=Ge(f),re=H?O:Qt(r),me=q?O:Qt(f);re=re==G?se:re,me=me==G?se:me;var _e=re==se,we=me==se,Me=re==me;if(Me&&Un(r)){if(!Un(f))return!1;H=!0,_e=!1}if(Me&&!_e)return N||(N=new Xr),H||Qi(r)?Gp(r,f,_,S,A,N):$E(r,f,re,_,S,A,N);if(!(_&a)){var je=_e&&yt.call(r,"__wrapped__"),Ve=we&&yt.call(f,"__wrapped__");if(je||Ve){var qe=je?r.value():r,Ue=Ve?f.value():f;return N||(N=new Xr),A(qe,Ue,_,S,N)}}return Me?(N||(N=new Xr),qE(r,f,_,S,A,N)):!1}function xE(r){return Rt(r)&&Qt(r)==ie}function Ql(r,f,_,S){var A=_.length,N=A,H=!S;if(r==null)return!N;for(r=bt(r);A--;){var q=_[A];if(H&&q[2]?q[1]!==r[q[0]]:!(q[0]in r))return!1}for(;++A<N;){q=_[A];var re=q[0],me=r[re],_e=q[1];if(H&&q[2]){if(me===o&&!(re in r))return!1}else{var we=new Xr;if(S)var Me=S(me,_e,re,r,f,we);if(!(Me===o?qo(_e,me,a|s,S,we):Me))return!1}}return!0}function gp(r){if(!Ot(r)||iO(r))return!1;var f=xn(r)?xT:Ht;return f.test(_i(r))}function CE(r){return Rt(r)&&Jt(r)==pe}function SE(r){return Rt(r)&&Qt(r)==be}function TE(r){return Rt(r)&&Xa(r.length)&&!!Ct[Jt(r)]}function pp(r){return typeof r=="function"?r:r==null?lr:typeof r=="object"?Ge(r)?yp(r[0],r[1]):mp(r):Fv(r)}function Zl(r){if(!Zo(r))return AT(r);var f=[];for(var _ in bt(r))yt.call(r,_)&&_!="constructor"&&f.push(_);return f}function EE(r){if(!Ot(r))return uO(r);var f=Zo(r),_=[];for(var S in r)S=="constructor"&&(f||!yt.call(r,S))||_.push(S);return _}function Jl(r,f){return r<f}function vp(r,f){var _=-1,S=ar(r)?ge(r.length):[];return Fn(r,function(A,N,H){S[++_]=f(A,N,H)}),S}function mp(r){var f=gc(r);return f.length==1&&f[0][2]?Qp(f[0][0],f[0][1]):function(_){return _===r||Ql(_,r,f)}}function yp(r,f){return vc(r)&&Kp(f)?Qp(on(r),f):function(_){var S=Ec(_,r);return S===o&&S===f?Oc(_,r):qo(f,S,a|s)}}function Ma(r,f,_,S,A){r!==f&&Xl(f,function(N,H){if(A||(A=new Xr),Ot(N))OE(r,f,H,_,Ma,S,A);else{var q=S?S(yc(r,H),N,H+"",r,f,A):o;q===o&&(q=N),zl(r,H,q)}},ur)}function OE(r,f,_,S,A,N,H){var q=yc(r,_),re=yc(f,_),me=H.get(re);if(me){zl(r,_,me);return}var _e=N?N(q,re,_+"",r,f,H):o,we=_e===o;if(we){var Me=Ge(re),je=!Me&&Un(re),Ve=!Me&&!je&&Qi(re);_e=re,Me||je||Ve?Ge(q)?_e=q:kt(q)?_e=sr(q):je?(we=!1,_e=Dp(re,!0)):Ve?(we=!1,_e=Mp(re,!0)):_e=[]:es(re)||bi(re)?(_e=q,bi(q)?_e=Ov(q):(!Ot(q)||xn(q))&&(_e=qp(re))):we=!1}we&&(H.set(re,_e),A(_e,re,S,N,H),H.delete(re)),zl(r,_,_e)}function _p(r,f){var _=r.length;if(_)return f+=f<0?_:0,wn(f,_)?r[f]:o}function bp(r,f,_){f.length?f=Tt(f,function(N){return Ge(N)?function(H){return mi(H,N.length===1?N[0]:N)}:N}):f=[lr];var S=-1;f=Tt(f,br(Be()));var A=vp(r,function(N,H,q){var re=Tt(f,function(me){return me(N)});return{criteria:re,index:++S,value:N}});return eT(A,function(N,H){return VE(N,H,_)})}function AE(r,f){return wp(r,f,function(_,S){return Oc(r,S)})}function wp(r,f,_){for(var S=-1,A=f.length,N={};++S<A;){var H=f[S],q=mi(r,H);_(q,H)&&Ko(N,Nn(H,r),q)}return N}function PE(r){return function(f){return mi(f,r)}}function ec(r,f,_,S){var A=S?JS:Vi,N=-1,H=f.length,q=r;for(r===f&&(f=sr(f)),_&&(q=Tt(r,br(_)));++N<H;)for(var re=0,me=f[N],_e=_?_(me):me;(re=A(q,_e,re,S))>-1;)q!==r&&wa.call(q,re,1),wa.call(r,re,1);return r}function xp(r,f){for(var _=r?f.length:0,S=_-1;_--;){var A=f[_];if(_==S||A!==N){var N=A;wn(A)?wa.call(r,A,1):ic(r,A)}}return r}function tc(r,f){return r+Sa(rp()*(f-r+1))}function DE(r,f,_,S){for(var A=-1,N=Nt(Ca((f-r)/(_||1)),0),H=ge(N);N--;)H[S?N:++A]=r,r+=_;return H}function rc(r,f){var _="";if(!r||f<1||f>ye)return _;do f%2&&(_+=r),f=Sa(f/2),f&&(r+=r);while(f);return _}function Ke(r,f){return _c(Zp(r,f,lr),r+"")}function ME(r){return op(Zi(r))}function RE(r,f){var _=Zi(r);return Ua(_,vi(f,0,_.length))}function Ko(r,f,_,S){if(!Ot(r))return r;f=Nn(f,r);for(var A=-1,N=f.length,H=N-1,q=r;q!=null&&++A<N;){var re=on(f[A]),me=_;if(re==="__proto__"||re==="constructor"||re==="prototype")return r;if(A!=H){var _e=q[re];me=S?S(_e,re,q):o,me===o&&(me=Ot(_e)?_e:wn(f[A+1])?[]:{})}Go(q,re,me),q=q[re]}return r}var Cp=Ta?function(r,f){return Ta.set(r,f),r}:lr,kE=xa?function(r,f){return xa(r,"toString",{configurable:!0,enumerable:!1,value:Pc(f),writable:!0})}:lr;function IE(r){return Ua(Zi(r))}function Lr(r,f,_){var S=-1,A=r.length;f<0&&(f=-f>A?0:A+f),_=_>A?A:_,_<0&&(_+=A),A=f>_?0:_-f>>>0,f>>>=0;for(var N=ge(A);++S<A;)N[S]=r[S+f];return N}function jE(r,f){var _;return Fn(r,function(S,A,N){return _=f(S,A,N),!_}),!!_}function Ra(r,f,_){var S=0,A=r==null?S:r.length;if(typeof f=="number"&&f===f&&A<=F){for(;S<A;){var N=S+A>>>1,H=r[N];H!==null&&!xr(H)&&(_?H<=f:H<f)?S=N+1:A=N}return A}return nc(r,f,lr,_)}function nc(r,f,_,S){var A=0,N=r==null?0:r.length;if(N===0)return 0;f=_(f);for(var H=f!==f,q=f===null,re=xr(f),me=f===o;A<N;){var _e=Sa((A+N)/2),we=_(r[_e]),Me=we!==o,je=we===null,Ve=we===we,qe=xr(we);if(H)var Ue=S||Ve;else me?Ue=Ve&&(S||Me):q?Ue=Ve&&Me&&(S||!je):re?Ue=Ve&&Me&&!je&&(S||!qe):je||qe?Ue=!1:Ue=S?we<=f:we<f;Ue?A=_e+1:N=_e}return Kt(N,B)}function Sp(r,f){for(var _=-1,S=r.length,A=0,N=[];++_<S;){var H=r[_],q=f?f(H):H;if(!_||!$r(q,re)){var re=q;N[A++]=H===0?0:H}}return N}function Tp(r){return typeof r=="number"?r:xr(r)?ne:+r}function wr(r){if(typeof r=="string")return r;if(Ge(r))return Tt(r,wr)+"";if(xr(r))return np?np.call(r):"";var f=r+"";return f=="0"&&1/r==-le?"-0":f}function Bn(r,f,_){var S=-1,A=fa,N=r.length,H=!0,q=[],re=q;if(_)H=!1,A=Rl;else if(N>=v){var me=f?null:GE(r);if(me)return da(me);H=!1,A=Vo,re=new pi}else re=f?[]:q;e:for(;++S<N;){var _e=r[S],we=f?f(_e):_e;if(_e=_||_e!==0?_e:0,H&&we===we){for(var Me=re.length;Me--;)if(re[Me]===we)continue e;f&&re.push(we),q.push(_e)}else A(re,we,_)||(re!==q&&re.push(we),q.push(_e))}return q}function ic(r,f){return f=Nn(f,r),r=Jp(r,f),r==null||delete r[on(Fr(f))]}function Ep(r,f,_,S){return Ko(r,f,_(mi(r,f)),S)}function ka(r,f,_,S){for(var A=r.length,N=S?A:-1;(S?N--:++N<A)&&f(r[N],N,r););return _?Lr(r,S?0:N,S?N+1:A):Lr(r,S?N+1:0,S?A:N)}function Op(r,f){var _=r;return _ instanceof rt&&(_=_.value()),kl(f,function(S,A){return A.func.apply(A.thisArg,In([S],A.args))},_)}function oc(r,f,_){var S=r.length;if(S<2)return S?Bn(r[0]):[];for(var A=-1,N=ge(S);++A<S;)for(var H=r[A],q=-1;++q<S;)q!=A&&(N[A]=Xo(N[A]||H,r[q],f,_));return Bn(Gt(N,1),f,_)}function Ap(r,f,_){for(var S=-1,A=r.length,N=f.length,H={};++S<A;){var q=S<N?f[S]:o;_(H,r[S],q)}return H}function sc(r){return kt(r)?r:[]}function ac(r){return typeof r=="function"?r:lr}function Nn(r,f){return Ge(r)?r:vc(r,f)?[r]:nv(vt(r))}var LE=Ke;function Vn(r,f,_){var S=r.length;return _=_===o?S:_,!f&&_>=S?r:Lr(r,f,_)}var Pp=CT||function(r){return zt.clearTimeout(r)};function Dp(r,f){if(f)return r.slice();var _=r.length,S=Qg?Qg(_):new r.constructor(_);return r.copy(S),S}function uc(r){var f=new r.constructor(r.byteLength);return new _a(f).set(new _a(r)),f}function FE(r,f){var _=f?uc(r.buffer):r.buffer;return new r.constructor(_,r.byteOffset,r.byteLength)}function BE(r){var f=new r.constructor(r.source,pt.exec(r));return f.lastIndex=r.lastIndex,f}function NE(r){return zo?bt(zo.call(r)):{}}function Mp(r,f){var _=f?uc(r.buffer):r.buffer;return new r.constructor(_,r.byteOffset,r.length)}function Rp(r,f){if(r!==f){var _=r!==o,S=r===null,A=r===r,N=xr(r),H=f!==o,q=f===null,re=f===f,me=xr(f);if(!q&&!me&&!N&&r>f||N&&H&&re&&!q&&!me||S&&H&&re||!_&&re||!A)return 1;if(!S&&!N&&!me&&r<f||me&&_&&A&&!S&&!N||q&&_&&A||!H&&A||!re)return-1}return 0}function VE(r,f,_){for(var S=-1,A=r.criteria,N=f.criteria,H=A.length,q=_.length;++S<H;){var re=Rp(A[S],N[S]);if(re){if(S>=q)return re;var me=_[S];return re*(me=="desc"?-1:1)}}return r.index-f.index}function kp(r,f,_,S){for(var A=-1,N=r.length,H=_.length,q=-1,re=f.length,me=Nt(N-H,0),_e=ge(re+me),we=!S;++q<re;)_e[q]=f[q];for(;++A<H;)(we||A<N)&&(_e[_[A]]=r[A]);for(;me--;)_e[q++]=r[A++];return _e}function Ip(r,f,_,S){for(var A=-1,N=r.length,H=-1,q=_.length,re=-1,me=f.length,_e=Nt(N-q,0),we=ge(_e+me),Me=!S;++A<_e;)we[A]=r[A];for(var je=A;++re<me;)we[je+re]=f[re];for(;++H<q;)(Me||A<N)&&(we[je+_[H]]=r[A++]);return we}function sr(r,f){var _=-1,S=r.length;for(f||(f=ge(S));++_<S;)f[_]=r[_];return f}function nn(r,f,_,S){var A=!_;_||(_={});for(var N=-1,H=f.length;++N<H;){var q=f[N],re=S?S(_[q],r[q],q,_,r):o;re===o&&(re=r[q]),A?yn(_,q,re):Go(_,q,re)}return _}function UE(r,f){return nn(r,pc(r),f)}function YE(r,f){return nn(r,Xp(r),f)}function Ia(r,f){return function(_,S){var A=Ge(_)?XS:cE,N=f?f():{};return A(_,r,Be(S,2),N)}}function $i(r){return Ke(function(f,_){var S=-1,A=_.length,N=A>1?_[A-1]:o,H=A>2?_[2]:o;for(N=r.length>3&&typeof N=="function"?(A--,N):o,H&&er(_[0],_[1],H)&&(N=A<3?o:N,A=1),f=bt(f);++S<A;){var q=_[S];q&&r(f,q,S,N)}return f})}function jp(r,f){return function(_,S){if(_==null)return _;if(!ar(_))return r(_,S);for(var A=_.length,N=f?A:-1,H=bt(_);(f?N--:++N<A)&&S(H[N],N,H)!==!1;);return _}}function Lp(r){return function(f,_,S){for(var A=-1,N=bt(f),H=S(f),q=H.length;q--;){var re=H[r?q:++A];if(_(N[re],re,N)===!1)break}return f}}function WE(r,f,_){var S=f&l,A=Qo(r);function N(){var H=this&&this!==zt&&this instanceof N?A:r;return H.apply(S?_:this,arguments)}return N}function Fp(r){return function(f){f=vt(f);var _=Ui(f)?Gr(f):o,S=_?_[0]:f.charAt(0),A=_?Vn(_,1).join(""):f.slice(1);return S[r]()+A}}function qi(r){return function(f){return kl(jv(Iv(f).replace(kS,"")),r,"")}}function Qo(r){return function(){var f=arguments;switch(f.length){case 0:return new r;case 1:return new r(f[0]);case 2:return new r(f[0],f[1]);case 3:return new r(f[0],f[1],f[2]);case 4:return new r(f[0],f[1],f[2],f[3]);case 5:return new r(f[0],f[1],f[2],f[3],f[4]);case 6:return new r(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new r(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=Xi(r.prototype),S=r.apply(_,f);return Ot(S)?S:_}}function HE(r,f,_){var S=Qo(r);function A(){for(var N=arguments.length,H=ge(N),q=N,re=Ki(A);q--;)H[q]=arguments[q];var me=N<3&&H[0]!==re&&H[N-1]!==re?[]:jn(H,re);if(N-=me.length,N<_)return Yp(r,f,ja,A.placeholder,o,H,me,o,o,_-N);var _e=this&&this!==zt&&this instanceof A?S:r;return _r(_e,this,H)}return A}function Bp(r){return function(f,_,S){var A=bt(f);if(!ar(f)){var N=Be(_,3);f=Yt(f),_=function(q){return N(A[q],q,A)}}var H=r(f,_,S);return H>-1?A[N?f[H]:H]:o}}function Np(r){return bn(function(f){var _=f.length,S=_,A=Ir.prototype.thru;for(r&&f.reverse();S--;){var N=f[S];if(typeof N!="function")throw new kr(C);if(A&&!H&&Na(N)=="wrapper")var H=new Ir([],!0)}for(S=H?S:_;++S<_;){N=f[S];var q=Na(N),re=q=="wrapper"?dc(N):o;re&&mc(re[0])&&re[1]==(T|m|b|M)&&!re[4].length&&re[9]==1?H=H[Na(re[0])].apply(H,re[3]):H=N.length==1&&mc(N)?H[q]():H.thru(N)}return function(){var me=arguments,_e=me[0];if(H&&me.length==1&&Ge(_e))return H.plant(_e).value();for(var we=0,Me=_?f[we].apply(this,me):_e;++we<_;)Me=f[we].call(this,Me);return Me}})}function ja(r,f,_,S,A,N,H,q,re,me){var _e=f&T,we=f&l,Me=f&g,je=f&(m|y),Ve=f&I,qe=Me?o:Qo(r);function Ue(){for(var Je=arguments.length,it=ge(Je),Cr=Je;Cr--;)it[Cr]=arguments[Cr];if(je)var tr=Ki(Ue),Sr=rT(it,tr);if(S&&(it=kp(it,S,A,je)),N&&(it=Ip(it,N,H,je)),Je-=Sr,je&&Je<me){var It=jn(it,tr);return Yp(r,f,ja,Ue.placeholder,_,it,It,q,re,me-Je)}var qr=we?_:this,Sn=Me?qr[r]:r;return Je=it.length,q?it=cO(it,q):Ve&&Je>1&&it.reverse(),_e&&re<Je&&(it.length=re),this&&this!==zt&&this instanceof Ue&&(Sn=qe||Qo(Sn)),Sn.apply(qr,it)}return Ue}function Vp(r,f){return function(_,S){return yE(_,r,f(S),{})}}function La(r,f){return function(_,S){var A;if(_===o&&S===o)return f;if(_!==o&&(A=_),S!==o){if(A===o)return S;typeof _=="string"||typeof S=="string"?(_=wr(_),S=wr(S)):(_=Tp(_),S=Tp(S)),A=r(_,S)}return A}}function lc(r){return bn(function(f){return f=Tt(f,br(Be())),Ke(function(_){var S=this;return r(f,function(A){return _r(A,S,_)})})})}function Fa(r,f){f=f===o?" ":wr(f);var _=f.length;if(_<2)return _?rc(f,r):f;var S=rc(f,Ca(r/Yi(f)));return Ui(f)?Vn(Gr(S),0,r).join(""):S.slice(0,r)}function zE(r,f,_,S){var A=f&l,N=Qo(r);function H(){for(var q=-1,re=arguments.length,me=-1,_e=S.length,we=ge(_e+re),Me=this&&this!==zt&&this instanceof H?N:r;++me<_e;)we[me]=S[me];for(;re--;)we[me++]=arguments[++q];return _r(Me,A?_:this,we)}return H}function Up(r){return function(f,_,S){return S&&typeof S!="number"&&er(f,_,S)&&(_=S=o),f=Cn(f),_===o?(_=f,f=0):_=Cn(_),S=S===o?f<_?1:-1:Cn(S),DE(f,_,S,r)}}function Ba(r){return function(f,_){return typeof f=="string"&&typeof _=="string"||(f=Br(f),_=Br(_)),r(f,_)}}function Yp(r,f,_,S,A,N,H,q,re,me){var _e=f&m,we=_e?H:o,Me=_e?o:H,je=_e?N:o,Ve=_e?o:N;f|=_e?b:x,f&=~(_e?x:b),f&u||(f&=~(l|g));var qe=[r,f,A,je,we,Ve,Me,q,re,me],Ue=_.apply(o,qe);return mc(r)&&ev(Ue,qe),Ue.placeholder=S,tv(Ue,r,f)}function cc(r){var f=Bt[r];return function(_,S){if(_=Br(_),S=S==null?0:Kt($e(S),292),S&&tp(_)){var A=(vt(_)+"e").split("e"),N=f(A[0]+"e"+(+A[1]+S));return A=(vt(N)+"e").split("e"),+(A[0]+"e"+(+A[1]-S))}return f(_)}}var GE=zi&&1/da(new zi([,-0]))[1]==le?function(r){return new zi(r)}:Rc;function Wp(r){return function(f){var _=Qt(f);return _==ie?Vl(f):_==be?lT(f):tT(f,r(f))}}function _n(r,f,_,S,A,N,H,q){var re=f&g;if(!re&&typeof r!="function")throw new kr(C);var me=S?S.length:0;if(me||(f&=~(b|x),S=A=o),H=H===o?H:Nt($e(H),0),q=q===o?q:$e(q),me-=A?A.length:0,f&x){var _e=S,we=A;S=A=o}var Me=re?o:dc(r),je=[r,f,_,S,A,_e,we,N,H,q];if(Me&&aO(je,Me),r=je[0],f=je[1],_=je[2],S=je[3],A=je[4],q=je[9]=je[9]===o?re?0:r.length:Nt(je[9]-me,0),!q&&f&(m|y)&&(f&=~(m|y)),!f||f==l)var Ve=WE(r,f,_);else f==m||f==y?Ve=HE(r,f,q):(f==b||f==(l|b))&&!A.length?Ve=zE(r,f,_,S):Ve=ja.apply(o,je);var qe=Me?Cp:ev;return tv(qe(Ve,je),r,f)}function Hp(r,f,_,S){return r===o||$r(r,Hi[_])&&!yt.call(S,_)?f:r}function zp(r,f,_,S,A,N){return Ot(r)&&Ot(f)&&(N.set(f,r),Ma(r,f,o,zp,N),N.delete(f)),r}function XE(r){return es(r)?o:r}function Gp(r,f,_,S,A,N){var H=_&a,q=r.length,re=f.length;if(q!=re&&!(H&&re>q))return!1;var me=N.get(r),_e=N.get(f);if(me&&_e)return me==f&&_e==r;var we=-1,Me=!0,je=_&s?new pi:o;for(N.set(r,f),N.set(f,r);++we<q;){var Ve=r[we],qe=f[we];if(S)var Ue=H?S(qe,Ve,we,f,r,N):S(Ve,qe,we,r,f,N);if(Ue!==o){if(Ue)continue;Me=!1;break}if(je){if(!Il(f,function(Je,it){if(!Vo(je,it)&&(Ve===Je||A(Ve,Je,_,S,N)))return je.push(it)})){Me=!1;break}}else if(!(Ve===qe||A(Ve,qe,_,S,N))){Me=!1;break}}return N.delete(r),N.delete(f),Me}function $E(r,f,_,S,A,N,H){switch(_){case Xe:if(r.byteLength!=f.byteLength||r.byteOffset!=f.byteOffset)return!1;r=r.buffer,f=f.buffer;case Ne:return!(r.byteLength!=f.byteLength||!N(new _a(r),new _a(f)));case V:case z:case ee:return $r(+r,+f);case J:return r.name==f.name&&r.message==f.message;case pe:case Ie:return r==f+"";case ie:var q=Vl;case be:var re=S&a;if(q||(q=da),r.size!=f.size&&!re)return!1;var me=H.get(r);if(me)return me==f;S|=s,H.set(r,f);var _e=Gp(q(r),q(f),S,A,N,H);return H.delete(r),_e;case Pe:if(zo)return zo.call(r)==zo.call(f)}return!1}function qE(r,f,_,S,A,N){var H=_&a,q=fc(r),re=q.length,me=fc(f),_e=me.length;if(re!=_e&&!H)return!1;for(var we=re;we--;){var Me=q[we];if(!(H?Me in f:yt.call(f,Me)))return!1}var je=N.get(r),Ve=N.get(f);if(je&&Ve)return je==f&&Ve==r;var qe=!0;N.set(r,f),N.set(f,r);for(var Ue=H;++we<re;){Me=q[we];var Je=r[Me],it=f[Me];if(S)var Cr=H?S(it,Je,Me,f,r,N):S(Je,it,Me,r,f,N);if(!(Cr===o?Je===it||A(Je,it,_,S,N):Cr)){qe=!1;break}Ue||(Ue=Me=="constructor")}if(qe&&!Ue){var tr=r.constructor,Sr=f.constructor;tr!=Sr&&"constructor"in r&&"constructor"in f&&!(typeof tr=="function"&&tr instanceof tr&&typeof Sr=="function"&&Sr instanceof Sr)&&(qe=!1)}return N.delete(r),N.delete(f),qe}function bn(r){return _c(Zp(r,o,av),r+"")}function fc(r){return hp(r,Yt,pc)}function hc(r){return hp(r,ur,Xp)}var dc=Ta?function(r){return Ta.get(r)}:Rc;function Na(r){for(var f=r.name+"",_=Gi[f],S=yt.call(Gi,f)?_.length:0;S--;){var A=_[S],N=A.func;if(N==null||N==r)return A.name}return f}function Ki(r){var f=yt.call(j,"placeholder")?j:r;return f.placeholder}function Be(){var r=j.iteratee||Dc;return r=r===Dc?pp:r,arguments.length?r(arguments[0],arguments[1]):r}function Va(r,f){var _=r.__data__;return nO(f)?_[typeof f=="string"?"string":"hash"]:_.map}function gc(r){for(var f=Yt(r),_=f.length;_--;){var S=f[_],A=r[S];f[_]=[S,A,Kp(A)]}return f}function yi(r,f){var _=sT(r,f);return gp(_)?_:o}function KE(r){var f=yt.call(r,di),_=r[di];try{r[di]=o;var S=!0}catch{}var A=ma.call(r);return S&&(f?r[di]=_:delete r[di]),A}var pc=Yl?function(r){return r==null?[]:(r=bt(r),kn(Yl(r),function(f){return Jg.call(r,f)}))}:kc,Xp=Yl?function(r){for(var f=[];r;)In(f,pc(r)),r=ba(r);return f}:kc,Qt=Jt;(Wl&&Qt(new Wl(new ArrayBuffer(1)))!=Xe||Yo&&Qt(new Yo)!=ie||Hl&&Qt(Hl.resolve())!=de||zi&&Qt(new zi)!=be||Wo&&Qt(new Wo)!=Oe)&&(Qt=function(r){var f=Jt(r),_=f==se?r.constructor:o,S=_?_i(_):"";if(S)switch(S){case RT:return Xe;case kT:return ie;case IT:return de;case jT:return be;case LT:return Oe}return f});function QE(r,f,_){for(var S=-1,A=_.length;++S<A;){var N=_[S],H=N.size;switch(N.type){case"drop":r+=H;break;case"dropRight":f-=H;break;case"take":f=Kt(f,r+H);break;case"takeRight":r=Nt(r,f-H);break}}return{start:r,end:f}}function ZE(r){var f=r.match(Sl);return f?f[1].split(X):[]}function $p(r,f,_){f=Nn(f,r);for(var S=-1,A=f.length,N=!1;++S<A;){var H=on(f[S]);if(!(N=r!=null&&_(r,H)))break;r=r[H]}return N||++S!=A?N:(A=r==null?0:r.length,!!A&&Xa(A)&&wn(H,A)&&(Ge(r)||bi(r)))}function JE(r){var f=r.length,_=new r.constructor(f);return f&&typeof r[0]=="string"&&yt.call(r,"index")&&(_.index=r.index,_.input=r.input),_}function qp(r){return typeof r.constructor=="function"&&!Zo(r)?Xi(ba(r)):{}}function eO(r,f,_){var S=r.constructor;switch(f){case Ne:return uc(r);case V:case z:return new S(+r);case Xe:return FE(r,_);case et:case Dt:case _t:case yr:case Hr:case qt:case ci:case Rn:case fi:return Mp(r,_);case ie:return new S;case ee:case Ie:return new S(r);case pe:return BE(r);case be:return new S;case Pe:return NE(r)}}function tO(r,f){var _=f.length;if(!_)return r;var S=_-1;return f[S]=(_>1?"& ":"")+f[S],f=f.join(_>2?", ":" "),r.replace(Cl,`{
/* [wrapped with `+f+`] */
`)}function rO(r){return Ge(r)||bi(r)||!!(ep&&r&&r[ep])}function wn(r,f){var _=typeof r;return f=f??ye,!!f&&(_=="number"||_!="symbol"&&Mt.test(r))&&r>-1&&r%1==0&&r<f}function er(r,f,_){if(!Ot(_))return!1;var S=typeof f;return(S=="number"?ar(_)&&wn(f,_.length):S=="string"&&f in _)?$r(_[f],r):!1}function vc(r,f){if(Ge(r))return!1;var _=typeof r;return _=="number"||_=="symbol"||_=="boolean"||r==null||xr(r)?!0:aa.test(r)||!sa.test(r)||f!=null&&r in bt(f)}function nO(r){var f=typeof r;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?r!=="__proto__":r===null}function mc(r){var f=Na(r),_=j[f];if(typeof _!="function"||!(f in rt.prototype))return!1;if(r===_)return!0;var S=dc(_);return!!S&&r===S[0]}function iO(r){return!!Kg&&Kg in r}var oO=pa?xn:Ic;function Zo(r){var f=r&&r.constructor,_=typeof f=="function"&&f.prototype||Hi;return r===_}function Kp(r){return r===r&&!Ot(r)}function Qp(r,f){return function(_){return _==null?!1:_[r]===f&&(f!==o||r in bt(_))}}function sO(r){var f=za(r,function(S){return _.size===p&&_.clear(),S}),_=f.cache;return f}function aO(r,f){var _=r[1],S=f[1],A=_|S,N=A<(l|g|T),H=S==T&&_==m||S==T&&_==M&&r[7].length<=f[8]||S==(T|M)&&f[7].length<=f[8]&&_==m;if(!(N||H))return r;S&l&&(r[2]=f[2],A|=_&l?0:u);var q=f[3];if(q){var re=r[3];r[3]=re?kp(re,q,f[4]):q,r[4]=re?jn(r[3],i):f[4]}return q=f[5],q&&(re=r[5],r[5]=re?Ip(re,q,f[6]):q,r[6]=re?jn(r[5],i):f[6]),q=f[7],q&&(r[7]=q),S&T&&(r[8]=r[8]==null?f[8]:Kt(r[8],f[8])),r[9]==null&&(r[9]=f[9]),r[0]=f[0],r[1]=A,r}function uO(r){var f=[];if(r!=null)for(var _ in bt(r))f.push(_);return f}function lO(r){return ma.call(r)}function Zp(r,f,_){return f=Nt(f===o?r.length-1:f,0),function(){for(var S=arguments,A=-1,N=Nt(S.length-f,0),H=ge(N);++A<N;)H[A]=S[f+A];A=-1;for(var q=ge(f+1);++A<f;)q[A]=S[A];return q[f]=_(H),_r(r,this,q)}}function Jp(r,f){return f.length<2?r:mi(r,Lr(f,0,-1))}function cO(r,f){for(var _=r.length,S=Kt(f.length,_),A=sr(r);S--;){var N=f[S];r[S]=wn(N,_)?A[N]:o}return r}function yc(r,f){if(!(f==="constructor"&&typeof r[f]=="function")&&f!="__proto__")return r[f]}var ev=rv(Cp),Jo=TT||function(r,f){return zt.setTimeout(r,f)},_c=rv(kE);function tv(r,f,_){var S=f+"";return _c(r,tO(S,fO(ZE(S),_)))}function rv(r){var f=0,_=0;return function(){var S=PT(),A=$-(S-_);if(_=S,A>0){if(++f>=K)return arguments[0]}else f=0;return r.apply(o,arguments)}}function Ua(r,f){var _=-1,S=r.length,A=S-1;for(f=f===o?S:f;++_<f;){var N=tc(_,A),H=r[N];r[N]=r[_],r[_]=H}return r.length=f,r}var nv=sO(function(r){var f=[];return r.charCodeAt(0)===46&&f.push(""),r.replace(wl,function(_,S,A,N){f.push(A?N.replace(We,"$1"):S||_)}),f});function on(r){if(typeof r=="string"||xr(r))return r;var f=r+"";return f=="0"&&1/r==-le?"-0":f}function _i(r){if(r!=null){try{return va.call(r)}catch{}try{return r+""}catch{}}return""}function fO(r,f){return Rr(L,function(_){var S="_."+_[0];f&_[1]&&!fa(r,S)&&r.push(S)}),r.sort()}function iv(r){if(r instanceof rt)return r.clone();var f=new Ir(r.__wrapped__,r.__chain__);return f.__actions__=sr(r.__actions__),f.__index__=r.__index__,f.__values__=r.__values__,f}function hO(r,f,_){(_?er(r,f,_):f===o)?f=1:f=Nt($e(f),0);var S=r==null?0:r.length;if(!S||f<1)return[];for(var A=0,N=0,H=ge(Ca(S/f));A<S;)H[N++]=Lr(r,A,A+=f);return H}function dO(r){for(var f=-1,_=r==null?0:r.length,S=0,A=[];++f<_;){var N=r[f];N&&(A[S++]=N)}return A}function gO(){var r=arguments.length;if(!r)return[];for(var f=ge(r-1),_=arguments[0],S=r;S--;)f[S-1]=arguments[S];return In(Ge(_)?sr(_):[_],Gt(f,1))}var pO=Ke(function(r,f){return kt(r)?Xo(r,Gt(f,1,kt,!0)):[]}),vO=Ke(function(r,f){var _=Fr(f);return kt(_)&&(_=o),kt(r)?Xo(r,Gt(f,1,kt,!0),Be(_,2)):[]}),mO=Ke(function(r,f){var _=Fr(f);return kt(_)&&(_=o),kt(r)?Xo(r,Gt(f,1,kt,!0),o,_):[]});function yO(r,f,_){var S=r==null?0:r.length;return S?(f=_||f===o?1:$e(f),Lr(r,f<0?0:f,S)):[]}function _O(r,f,_){var S=r==null?0:r.length;return S?(f=_||f===o?1:$e(f),f=S-f,Lr(r,0,f<0?0:f)):[]}function bO(r,f){return r&&r.length?ka(r,Be(f,3),!0,!0):[]}function wO(r,f){return r&&r.length?ka(r,Be(f,3),!0):[]}function xO(r,f,_,S){var A=r==null?0:r.length;return A?(_&&typeof _!="number"&&er(r,f,_)&&(_=0,S=A),gE(r,f,_,S)):[]}function ov(r,f,_){var S=r==null?0:r.length;if(!S)return-1;var A=_==null?0:$e(_);return A<0&&(A=Nt(S+A,0)),ha(r,Be(f,3),A)}function sv(r,f,_){var S=r==null?0:r.length;if(!S)return-1;var A=S-1;return _!==o&&(A=$e(_),A=_<0?Nt(S+A,0):Kt(A,S-1)),ha(r,Be(f,3),A,!0)}function av(r){var f=r==null?0:r.length;return f?Gt(r,1):[]}function CO(r){var f=r==null?0:r.length;return f?Gt(r,le):[]}function SO(r,f){var _=r==null?0:r.length;return _?(f=f===o?1:$e(f),Gt(r,f)):[]}function TO(r){for(var f=-1,_=r==null?0:r.length,S={};++f<_;){var A=r[f];S[A[0]]=A[1]}return S}function uv(r){return r&&r.length?r[0]:o}function EO(r,f,_){var S=r==null?0:r.length;if(!S)return-1;var A=_==null?0:$e(_);return A<0&&(A=Nt(S+A,0)),Vi(r,f,A)}function OO(r){var f=r==null?0:r.length;return f?Lr(r,0,-1):[]}var AO=Ke(function(r){var f=Tt(r,sc);return f.length&&f[0]===r[0]?Kl(f):[]}),PO=Ke(function(r){var f=Fr(r),_=Tt(r,sc);return f===Fr(_)?f=o:_.pop(),_.length&&_[0]===r[0]?Kl(_,Be(f,2)):[]}),DO=Ke(function(r){var f=Fr(r),_=Tt(r,sc);return f=typeof f=="function"?f:o,f&&_.pop(),_.length&&_[0]===r[0]?Kl(_,o,f):[]});function MO(r,f){return r==null?"":OT.call(r,f)}function Fr(r){var f=r==null?0:r.length;return f?r[f-1]:o}function RO(r,f,_){var S=r==null?0:r.length;if(!S)return-1;var A=S;return _!==o&&(A=$e(_),A=A<0?Nt(S+A,0):Kt(A,S-1)),f===f?fT(r,f,A):ha(r,Yg,A,!0)}function kO(r,f){return r&&r.length?_p(r,$e(f)):o}var IO=Ke(lv);function lv(r,f){return r&&r.length&&f&&f.length?ec(r,f):r}function jO(r,f,_){return r&&r.length&&f&&f.length?ec(r,f,Be(_,2)):r}function LO(r,f,_){return r&&r.length&&f&&f.length?ec(r,f,o,_):r}var FO=bn(function(r,f){var _=r==null?0:r.length,S=Gl(r,f);return xp(r,Tt(f,function(A){return wn(A,_)?+A:A}).sort(Rp)),S});function BO(r,f){var _=[];if(!(r&&r.length))return _;var S=-1,A=[],N=r.length;for(f=Be(f,3);++S<N;){var H=r[S];f(H,S,r)&&(_.push(H),A.push(S))}return xp(r,A),_}function bc(r){return r==null?r:MT.call(r)}function NO(r,f,_){var S=r==null?0:r.length;return S?(_&&typeof _!="number"&&er(r,f,_)?(f=0,_=S):(f=f==null?0:$e(f),_=_===o?S:$e(_)),Lr(r,f,_)):[]}function VO(r,f){return Ra(r,f)}function UO(r,f,_){return nc(r,f,Be(_,2))}function YO(r,f){var _=r==null?0:r.length;if(_){var S=Ra(r,f);if(S<_&&$r(r[S],f))return S}return-1}function WO(r,f){return Ra(r,f,!0)}function HO(r,f,_){return nc(r,f,Be(_,2),!0)}function zO(r,f){var _=r==null?0:r.length;if(_){var S=Ra(r,f,!0)-1;if($r(r[S],f))return S}return-1}function GO(r){return r&&r.length?Sp(r):[]}function XO(r,f){return r&&r.length?Sp(r,Be(f,2)):[]}function $O(r){var f=r==null?0:r.length;return f?Lr(r,1,f):[]}function qO(r,f,_){return r&&r.length?(f=_||f===o?1:$e(f),Lr(r,0,f<0?0:f)):[]}function KO(r,f,_){var S=r==null?0:r.length;return S?(f=_||f===o?1:$e(f),f=S-f,Lr(r,f<0?0:f,S)):[]}function QO(r,f){return r&&r.length?ka(r,Be(f,3),!1,!0):[]}function ZO(r,f){return r&&r.length?ka(r,Be(f,3)):[]}var JO=Ke(function(r){return Bn(Gt(r,1,kt,!0))}),e2=Ke(function(r){var f=Fr(r);return kt(f)&&(f=o),Bn(Gt(r,1,kt,!0),Be(f,2))}),t2=Ke(function(r){var f=Fr(r);return f=typeof f=="function"?f:o,Bn(Gt(r,1,kt,!0),o,f)});function r2(r){return r&&r.length?Bn(r):[]}function n2(r,f){return r&&r.length?Bn(r,Be(f,2)):[]}function i2(r,f){return f=typeof f=="function"?f:o,r&&r.length?Bn(r,o,f):[]}function wc(r){if(!(r&&r.length))return[];var f=0;return r=kn(r,function(_){if(kt(_))return f=Nt(_.length,f),!0}),Bl(f,function(_){return Tt(r,jl(_))})}function cv(r,f){if(!(r&&r.length))return[];var _=wc(r);return f==null?_:Tt(_,function(S){return _r(f,o,S)})}var o2=Ke(function(r,f){return kt(r)?Xo(r,f):[]}),s2=Ke(function(r){return oc(kn(r,kt))}),a2=Ke(function(r){var f=Fr(r);return kt(f)&&(f=o),oc(kn(r,kt),Be(f,2))}),u2=Ke(function(r){var f=Fr(r);return f=typeof f=="function"?f:o,oc(kn(r,kt),o,f)}),l2=Ke(wc);function c2(r,f){return Ap(r||[],f||[],Go)}function f2(r,f){return Ap(r||[],f||[],Ko)}var h2=Ke(function(r){var f=r.length,_=f>1?r[f-1]:o;return _=typeof _=="function"?(r.pop(),_):o,cv(r,_)});function fv(r){var f=j(r);return f.__chain__=!0,f}function d2(r,f){return f(r),r}function Ya(r,f){return f(r)}var g2=bn(function(r){var f=r.length,_=f?r[0]:0,S=this.__wrapped__,A=function(N){return Gl(N,r)};return f>1||this.__actions__.length||!(S instanceof rt)||!wn(_)?this.thru(A):(S=S.slice(_,+_+(f?1:0)),S.__actions__.push({func:Ya,args:[A],thisArg:o}),new Ir(S,this.__chain__).thru(function(N){return f&&!N.length&&N.push(o),N}))});function p2(){return fv(this)}function v2(){return new Ir(this.value(),this.__chain__)}function m2(){this.__values__===o&&(this.__values__=Tv(this.value()));var r=this.__index__>=this.__values__.length,f=r?o:this.__values__[this.__index__++];return{done:r,value:f}}function y2(){return this}function _2(r){for(var f,_=this;_ instanceof Oa;){var S=iv(_);S.__index__=0,S.__values__=o,f?A.__wrapped__=S:f=S;var A=S;_=_.__wrapped__}return A.__wrapped__=r,f}function b2(){var r=this.__wrapped__;if(r instanceof rt){var f=r;return this.__actions__.length&&(f=new rt(this)),f=f.reverse(),f.__actions__.push({func:Ya,args:[bc],thisArg:o}),new Ir(f,this.__chain__)}return this.thru(bc)}function w2(){return Op(this.__wrapped__,this.__actions__)}var x2=Ia(function(r,f,_){yt.call(r,_)?++r[_]:yn(r,_,1)});function C2(r,f,_){var S=Ge(r)?Vg:dE;return _&&er(r,f,_)&&(f=o),S(r,Be(f,3))}function S2(r,f){var _=Ge(r)?kn:cp;return _(r,Be(f,3))}var T2=Bp(ov),E2=Bp(sv);function O2(r,f){return Gt(Wa(r,f),1)}function A2(r,f){return Gt(Wa(r,f),le)}function P2(r,f,_){return _=_===o?1:$e(_),Gt(Wa(r,f),_)}function hv(r,f){var _=Ge(r)?Rr:Fn;return _(r,Be(f,3))}function dv(r,f){var _=Ge(r)?$S:lp;return _(r,Be(f,3))}var D2=Ia(function(r,f,_){yt.call(r,_)?r[_].push(f):yn(r,_,[f])});function M2(r,f,_,S){r=ar(r)?r:Zi(r),_=_&&!S?$e(_):0;var A=r.length;return _<0&&(_=Nt(A+_,0)),$a(r)?_<=A&&r.indexOf(f,_)>-1:!!A&&Vi(r,f,_)>-1}var R2=Ke(function(r,f,_){var S=-1,A=typeof f=="function",N=ar(r)?ge(r.length):[];return Fn(r,function(H){N[++S]=A?_r(f,H,_):$o(H,f,_)}),N}),k2=Ia(function(r,f,_){yn(r,_,f)});function Wa(r,f){var _=Ge(r)?Tt:vp;return _(r,Be(f,3))}function I2(r,f,_,S){return r==null?[]:(Ge(f)||(f=f==null?[]:[f]),_=S?o:_,Ge(_)||(_=_==null?[]:[_]),bp(r,f,_))}var j2=Ia(function(r,f,_){r[_?0:1].push(f)},function(){return[[],[]]});function L2(r,f,_){var S=Ge(r)?kl:Hg,A=arguments.length<3;return S(r,Be(f,4),_,A,Fn)}function F2(r,f,_){var S=Ge(r)?qS:Hg,A=arguments.length<3;return S(r,Be(f,4),_,A,lp)}function B2(r,f){var _=Ge(r)?kn:cp;return _(r,Ga(Be(f,3)))}function N2(r){var f=Ge(r)?op:ME;return f(r)}function V2(r,f,_){(_?er(r,f,_):f===o)?f=1:f=$e(f);var S=Ge(r)?uE:RE;return S(r,f)}function U2(r){var f=Ge(r)?lE:IE;return f(r)}function Y2(r){if(r==null)return 0;if(ar(r))return $a(r)?Yi(r):r.length;var f=Qt(r);return f==ie||f==be?r.size:Zl(r).length}function W2(r,f,_){var S=Ge(r)?Il:jE;return _&&er(r,f,_)&&(f=o),S(r,Be(f,3))}var H2=Ke(function(r,f){if(r==null)return[];var _=f.length;return _>1&&er(r,f[0],f[1])?f=[]:_>2&&er(f[0],f[1],f[2])&&(f=[f[0]]),bp(r,Gt(f,1),[])}),Ha=ST||function(){return zt.Date.now()};function z2(r,f){if(typeof f!="function")throw new kr(C);return r=$e(r),function(){if(--r<1)return f.apply(this,arguments)}}function gv(r,f,_){return f=_?o:f,f=r&&f==null?r.length:f,_n(r,T,o,o,o,o,f)}function pv(r,f){var _;if(typeof f!="function")throw new kr(C);return r=$e(r),function(){return--r>0&&(_=f.apply(this,arguments)),r<=1&&(f=o),_}}var xc=Ke(function(r,f,_){var S=l;if(_.length){var A=jn(_,Ki(xc));S|=b}return _n(r,S,f,_,A)}),vv=Ke(function(r,f,_){var S=l|g;if(_.length){var A=jn(_,Ki(vv));S|=b}return _n(f,S,r,_,A)});function mv(r,f,_){f=_?o:f;var S=_n(r,m,o,o,o,o,o,f);return S.placeholder=mv.placeholder,S}function yv(r,f,_){f=_?o:f;var S=_n(r,y,o,o,o,o,o,f);return S.placeholder=yv.placeholder,S}function _v(r,f,_){var S,A,N,H,q,re,me=0,_e=!1,we=!1,Me=!0;if(typeof r!="function")throw new kr(C);f=Br(f)||0,Ot(_)&&(_e=!!_.leading,we="maxWait"in _,N=we?Nt(Br(_.maxWait)||0,f):N,Me="trailing"in _?!!_.trailing:Me);function je(It){var qr=S,Sn=A;return S=A=o,me=It,H=r.apply(Sn,qr),H}function Ve(It){return me=It,q=Jo(Je,f),_e?je(It):H}function qe(It){var qr=It-re,Sn=It-me,Bv=f-qr;return we?Kt(Bv,N-Sn):Bv}function Ue(It){var qr=It-re,Sn=It-me;return re===o||qr>=f||qr<0||we&&Sn>=N}function Je(){var It=Ha();if(Ue(It))return it(It);q=Jo(Je,qe(It))}function it(It){return q=o,Me&&S?je(It):(S=A=o,H)}function Cr(){q!==o&&Pp(q),me=0,S=re=A=q=o}function tr(){return q===o?H:it(Ha())}function Sr(){var It=Ha(),qr=Ue(It);if(S=arguments,A=this,re=It,qr){if(q===o)return Ve(re);if(we)return Pp(q),q=Jo(Je,f),je(re)}return q===o&&(q=Jo(Je,f)),H}return Sr.cancel=Cr,Sr.flush=tr,Sr}var G2=Ke(function(r,f){return up(r,1,f)}),X2=Ke(function(r,f,_){return up(r,Br(f)||0,_)});function $2(r){return _n(r,I)}function za(r,f){if(typeof r!="function"||f!=null&&typeof f!="function")throw new kr(C);var _=function(){var S=arguments,A=f?f.apply(this,S):S[0],N=_.cache;if(N.has(A))return N.get(A);var H=r.apply(this,S);return _.cache=N.set(A,H)||N,H};return _.cache=new(za.Cache||mn),_}za.Cache=mn;function Ga(r){if(typeof r!="function")throw new kr(C);return function(){var f=arguments;switch(f.length){case 0:return!r.call(this);case 1:return!r.call(this,f[0]);case 2:return!r.call(this,f[0],f[1]);case 3:return!r.call(this,f[0],f[1],f[2])}return!r.apply(this,f)}}function q2(r){return pv(2,r)}var K2=LE(function(r,f){f=f.length==1&&Ge(f[0])?Tt(f[0],br(Be())):Tt(Gt(f,1),br(Be()));var _=f.length;return Ke(function(S){for(var A=-1,N=Kt(S.length,_);++A<N;)S[A]=f[A].call(this,S[A]);return _r(r,this,S)})}),Cc=Ke(function(r,f){var _=jn(f,Ki(Cc));return _n(r,b,o,f,_)}),bv=Ke(function(r,f){var _=jn(f,Ki(bv));return _n(r,x,o,f,_)}),Q2=bn(function(r,f){return _n(r,M,o,o,o,f)});function Z2(r,f){if(typeof r!="function")throw new kr(C);return f=f===o?f:$e(f),Ke(r,f)}function J2(r,f){if(typeof r!="function")throw new kr(C);return f=f==null?0:Nt($e(f),0),Ke(function(_){var S=_[f],A=Vn(_,0,f);return S&&In(A,S),_r(r,this,A)})}function eA(r,f,_){var S=!0,A=!0;if(typeof r!="function")throw new kr(C);return Ot(_)&&(S="leading"in _?!!_.leading:S,A="trailing"in _?!!_.trailing:A),_v(r,f,{leading:S,maxWait:f,trailing:A})}function tA(r){return gv(r,1)}function rA(r,f){return Cc(ac(f),r)}function nA(){if(!arguments.length)return[];var r=arguments[0];return Ge(r)?r:[r]}function iA(r){return jr(r,n)}function oA(r,f){return f=typeof f=="function"?f:o,jr(r,n,f)}function sA(r){return jr(r,d|n)}function aA(r,f){return f=typeof f=="function"?f:o,jr(r,d|n,f)}function uA(r,f){return f==null||ap(r,f,Yt(f))}function $r(r,f){return r===f||r!==r&&f!==f}var lA=Ba(ql),cA=Ba(function(r,f){return r>=f}),bi=dp(function(){return arguments}())?dp:function(r){return Rt(r)&&yt.call(r,"callee")&&!Jg.call(r,"callee")},Ge=ge.isArray,fA=Ig?br(Ig):_E;function ar(r){return r!=null&&Xa(r.length)&&!xn(r)}function kt(r){return Rt(r)&&ar(r)}function hA(r){return r===!0||r===!1||Rt(r)&&Jt(r)==V}var Un=ET||Ic,dA=jg?br(jg):bE;function gA(r){return Rt(r)&&r.nodeType===1&&!es(r)}function pA(r){if(r==null)return!0;if(ar(r)&&(Ge(r)||typeof r=="string"||typeof r.splice=="function"||Un(r)||Qi(r)||bi(r)))return!r.length;var f=Qt(r);if(f==ie||f==be)return!r.size;if(Zo(r))return!Zl(r).length;for(var _ in r)if(yt.call(r,_))return!1;return!0}function vA(r,f){return qo(r,f)}function mA(r,f,_){_=typeof _=="function"?_:o;var S=_?_(r,f):o;return S===o?qo(r,f,o,_):!!S}function Sc(r){if(!Rt(r))return!1;var f=Jt(r);return f==J||f==Z||typeof r.message=="string"&&typeof r.name=="string"&&!es(r)}function yA(r){return typeof r=="number"&&tp(r)}function xn(r){if(!Ot(r))return!1;var f=Jt(r);return f==U||f==he||f==k||f==ue}function wv(r){return typeof r=="number"&&r==$e(r)}function Xa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ye}function Ot(r){var f=typeof r;return r!=null&&(f=="object"||f=="function")}function Rt(r){return r!=null&&typeof r=="object"}var xv=Lg?br(Lg):xE;function _A(r,f){return r===f||Ql(r,f,gc(f))}function bA(r,f,_){return _=typeof _=="function"?_:o,Ql(r,f,gc(f),_)}function wA(r){return Cv(r)&&r!=+r}function xA(r){if(oO(r))throw new ze(w);return gp(r)}function CA(r){return r===null}function SA(r){return r==null}function Cv(r){return typeof r=="number"||Rt(r)&&Jt(r)==ee}function es(r){if(!Rt(r)||Jt(r)!=se)return!1;var f=ba(r);if(f===null)return!0;var _=yt.call(f,"constructor")&&f.constructor;return typeof _=="function"&&_ instanceof _&&va.call(_)==bT}var Tc=Fg?br(Fg):CE;function TA(r){return wv(r)&&r>=-ye&&r<=ye}var Sv=Bg?br(Bg):SE;function $a(r){return typeof r=="string"||!Ge(r)&&Rt(r)&&Jt(r)==Ie}function xr(r){return typeof r=="symbol"||Rt(r)&&Jt(r)==Pe}var Qi=Ng?br(Ng):TE;function EA(r){return r===o}function OA(r){return Rt(r)&&Qt(r)==Oe}function AA(r){return Rt(r)&&Jt(r)==Fe}var PA=Ba(Jl),DA=Ba(function(r,f){return r<=f});function Tv(r){if(!r)return[];if(ar(r))return $a(r)?Gr(r):sr(r);if(Uo&&r[Uo])return uT(r[Uo]());var f=Qt(r),_=f==ie?Vl:f==be?da:Zi;return _(r)}function Cn(r){if(!r)return r===0?r:0;if(r=Br(r),r===le||r===-le){var f=r<0?-1:1;return f*Ee}return r===r?r:0}function $e(r){var f=Cn(r),_=f%1;return f===f?_?f-_:f:0}function Ev(r){return r?vi($e(r),0,P):0}function Br(r){if(typeof r=="number")return r;if(xr(r))return ne;if(Ot(r)){var f=typeof r.valueOf=="function"?r.valueOf():r;r=Ot(f)?f+"":f}if(typeof r!="string")return r===0?r:+r;r=zg(r);var _=Ze.test(r);return _||Et.test(r)?zS(r.slice(2),_?2:8):tt.test(r)?ne:+r}function Ov(r){return nn(r,ur(r))}function MA(r){return r?vi($e(r),-ye,ye):r===0?r:0}function vt(r){return r==null?"":wr(r)}var RA=$i(function(r,f){if(Zo(f)||ar(f)){nn(f,Yt(f),r);return}for(var _ in f)yt.call(f,_)&&Go(r,_,f[_])}),Av=$i(function(r,f){nn(f,ur(f),r)}),qa=$i(function(r,f,_,S){nn(f,ur(f),r,S)}),kA=$i(function(r,f,_,S){nn(f,Yt(f),r,S)}),IA=bn(Gl);function jA(r,f){var _=Xi(r);return f==null?_:sp(_,f)}var LA=Ke(function(r,f){r=bt(r);var _=-1,S=f.length,A=S>2?f[2]:o;for(A&&er(f[0],f[1],A)&&(S=1);++_<S;)for(var N=f[_],H=ur(N),q=-1,re=H.length;++q<re;){var me=H[q],_e=r[me];(_e===o||$r(_e,Hi[me])&&!yt.call(r,me))&&(r[me]=N[me])}return r}),FA=Ke(function(r){return r.push(o,zp),_r(Pv,o,r)});function BA(r,f){return Ug(r,Be(f,3),rn)}function NA(r,f){return Ug(r,Be(f,3),$l)}function VA(r,f){return r==null?r:Xl(r,Be(f,3),ur)}function UA(r,f){return r==null?r:fp(r,Be(f,3),ur)}function YA(r,f){return r&&rn(r,Be(f,3))}function WA(r,f){return r&&$l(r,Be(f,3))}function HA(r){return r==null?[]:Da(r,Yt(r))}function zA(r){return r==null?[]:Da(r,ur(r))}function Ec(r,f,_){var S=r==null?o:mi(r,f);return S===o?_:S}function GA(r,f){return r!=null&&$p(r,f,pE)}function Oc(r,f){return r!=null&&$p(r,f,vE)}var XA=Vp(function(r,f,_){f!=null&&typeof f.toString!="function"&&(f=ma.call(f)),r[f]=_},Pc(lr)),$A=Vp(function(r,f,_){f!=null&&typeof f.toString!="function"&&(f=ma.call(f)),yt.call(r,f)?r[f].push(_):r[f]=[_]},Be),qA=Ke($o);function Yt(r){return ar(r)?ip(r):Zl(r)}function ur(r){return ar(r)?ip(r,!0):EE(r)}function KA(r,f){var _={};return f=Be(f,3),rn(r,function(S,A,N){yn(_,f(S,A,N),S)}),_}function QA(r,f){var _={};return f=Be(f,3),rn(r,function(S,A,N){yn(_,A,f(S,A,N))}),_}var ZA=$i(function(r,f,_){Ma(r,f,_)}),Pv=$i(function(r,f,_,S){Ma(r,f,_,S)}),JA=bn(function(r,f){var _={};if(r==null)return _;var S=!1;f=Tt(f,function(N){return N=Nn(N,r),S||(S=N.length>1),N}),nn(r,hc(r),_),S&&(_=jr(_,d|c|n,XE));for(var A=f.length;A--;)ic(_,f[A]);return _});function eP(r,f){return Dv(r,Ga(Be(f)))}var tP=bn(function(r,f){return r==null?{}:AE(r,f)});function Dv(r,f){if(r==null)return{};var _=Tt(hc(r),function(S){return[S]});return f=Be(f),wp(r,_,function(S,A){return f(S,A[0])})}function rP(r,f,_){f=Nn(f,r);var S=-1,A=f.length;for(A||(A=1,r=o);++S<A;){var N=r==null?o:r[on(f[S])];N===o&&(S=A,N=_),r=xn(N)?N.call(r):N}return r}function nP(r,f,_){return r==null?r:Ko(r,f,_)}function iP(r,f,_,S){return S=typeof S=="function"?S:o,r==null?r:Ko(r,f,_,S)}var Mv=Wp(Yt),Rv=Wp(ur);function oP(r,f,_){var S=Ge(r),A=S||Un(r)||Qi(r);if(f=Be(f,4),_==null){var N=r&&r.constructor;A?_=S?new N:[]:Ot(r)?_=xn(N)?Xi(ba(r)):{}:_={}}return(A?Rr:rn)(r,function(H,q,re){return f(_,H,q,re)}),_}function sP(r,f){return r==null?!0:ic(r,f)}function aP(r,f,_){return r==null?r:Ep(r,f,ac(_))}function uP(r,f,_,S){return S=typeof S=="function"?S:o,r==null?r:Ep(r,f,ac(_),S)}function Zi(r){return r==null?[]:Nl(r,Yt(r))}function lP(r){return r==null?[]:Nl(r,ur(r))}function cP(r,f,_){return _===o&&(_=f,f=o),_!==o&&(_=Br(_),_=_===_?_:0),f!==o&&(f=Br(f),f=f===f?f:0),vi(Br(r),f,_)}function fP(r,f,_){return f=Cn(f),_===o?(_=f,f=0):_=Cn(_),r=Br(r),mE(r,f,_)}function hP(r,f,_){if(_&&typeof _!="boolean"&&er(r,f,_)&&(f=_=o),_===o&&(typeof f=="boolean"?(_=f,f=o):typeof r=="boolean"&&(_=r,r=o)),r===o&&f===o?(r=0,f=1):(r=Cn(r),f===o?(f=r,r=0):f=Cn(f)),r>f){var S=r;r=f,f=S}if(_||r%1||f%1){var A=rp();return Kt(r+A*(f-r+HS("1e-"+((A+"").length-1))),f)}return tc(r,f)}var dP=qi(function(r,f,_){return f=f.toLowerCase(),r+(_?kv(f):f)});function kv(r){return Ac(vt(r).toLowerCase())}function Iv(r){return r=vt(r),r&&r.replace(ir,nT).replace(IS,"")}function gP(r,f,_){r=vt(r),f=wr(f);var S=r.length;_=_===o?S:vi($e(_),0,S);var A=_;return _-=f.length,_>=0&&r.slice(_,A)==f}function pP(r){return r=vt(r),r&&na.test(r)?r.replace(Bi,iT):r}function vP(r){return r=vt(r),r&&ua.test(r)?r.replace(Bo,"\\$&"):r}var mP=qi(function(r,f,_){return r+(_?"-":"")+f.toLowerCase()}),yP=qi(function(r,f,_){return r+(_?" ":"")+f.toLowerCase()}),_P=Fp("toLowerCase");function bP(r,f,_){r=vt(r),f=$e(f);var S=f?Yi(r):0;if(!f||S>=f)return r;var A=(f-S)/2;return Fa(Sa(A),_)+r+Fa(Ca(A),_)}function wP(r,f,_){r=vt(r),f=$e(f);var S=f?Yi(r):0;return f&&S<f?r+Fa(f-S,_):r}function xP(r,f,_){r=vt(r),f=$e(f);var S=f?Yi(r):0;return f&&S<f?Fa(f-S,_)+r:r}function CP(r,f,_){return _||f==null?f=0:f&&(f=+f),DT(vt(r).replace(No,""),f||0)}function SP(r,f,_){return(_?er(r,f,_):f===o)?f=1:f=$e(f),rc(vt(r),f)}function TP(){var r=arguments,f=vt(r[0]);return r.length<3?f:f.replace(r[1],r[2])}var EP=qi(function(r,f,_){return r+(_?"_":"")+f.toLowerCase()});function OP(r,f,_){return _&&typeof _!="number"&&er(r,f,_)&&(f=_=o),_=_===o?P:_>>>0,_?(r=vt(r),r&&(typeof f=="string"||f!=null&&!Tc(f))&&(f=wr(f),!f&&Ui(r))?Vn(Gr(r),0,_):r.split(f,_)):[]}var AP=qi(function(r,f,_){return r+(_?" ":"")+Ac(f)});function PP(r,f,_){return r=vt(r),_=_==null?0:vi($e(_),0,r.length),f=wr(f),r.slice(_,_+f.length)==f}function DP(r,f,_){var S=j.templateSettings;_&&er(r,f,_)&&(f=o),r=vt(r),f=qa({},f,S,Hp);var A=qa({},f.imports,S.imports,Hp),N=Yt(A),H=Nl(A,N),q,re,me=0,_e=f.interpolate||zr,we="__p += '",Me=Ul((f.escape||zr).source+"|"+_e.source+"|"+(_e===oa?ot:zr).source+"|"+(f.evaluate||zr).source+"|$","g"),je="//# sourceURL="+(yt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++NS+"]")+`
`;r.replace(Me,function(Ue,Je,it,Cr,tr,Sr){return it||(it=Cr),we+=r.slice(me,Sr).replace(la,oT),Je&&(q=!0,we+=`' +
__e(`+Je+`) +
'`),tr&&(re=!0,we+=`';
`+tr+`;
__p += '`),it&&(we+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),me=Sr+Ue.length,Ue}),we+=`';
`;var Ve=yt.call(f,"variable")&&f.variable;if(!Ve)we=`with (obj) {
`+we+`
}
`;else if(De.test(Ve))throw new ze(E);we=(re?we.replace(jo,""):we).replace(Lo,"$1").replace(ra,"$1;"),we="function("+(Ve||"obj")+`) {
`+(Ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+we+`return __p
}`;var qe=Lv(function(){return at(N,je+"return "+we).apply(o,H)});if(qe.source=we,Sc(qe))throw qe;return qe}function MP(r){return vt(r).toLowerCase()}function RP(r){return vt(r).toUpperCase()}function kP(r,f,_){if(r=vt(r),r&&(_||f===o))return zg(r);if(!r||!(f=wr(f)))return r;var S=Gr(r),A=Gr(f),N=Gg(S,A),H=Xg(S,A)+1;return Vn(S,N,H).join("")}function IP(r,f,_){if(r=vt(r),r&&(_||f===o))return r.slice(0,qg(r)+1);if(!r||!(f=wr(f)))return r;var S=Gr(r),A=Xg(S,Gr(f))+1;return Vn(S,0,A).join("")}function jP(r,f,_){if(r=vt(r),r&&(_||f===o))return r.replace(No,"");if(!r||!(f=wr(f)))return r;var S=Gr(r),A=Gg(S,Gr(f));return Vn(S,A).join("")}function LP(r,f){var _=R,S=W;if(Ot(f)){var A="separator"in f?f.separator:A;_="length"in f?$e(f.length):_,S="omission"in f?wr(f.omission):S}r=vt(r);var N=r.length;if(Ui(r)){var H=Gr(r);N=H.length}if(_>=N)return r;var q=_-Yi(S);if(q<1)return S;var re=H?Vn(H,0,q).join(""):r.slice(0,q);if(A===o)return re+S;if(H&&(q+=re.length-q),Tc(A)){if(r.slice(q).search(A)){var me,_e=re;for(A.global||(A=Ul(A.source,vt(pt.exec(A))+"g")),A.lastIndex=0;me=A.exec(_e);)var we=me.index;re=re.slice(0,we===o?q:we)}}else if(r.indexOf(wr(A),q)!=q){var Me=re.lastIndexOf(A);Me>-1&&(re=re.slice(0,Me))}return re+S}function FP(r){return r=vt(r),r&&Fo.test(r)?r.replace(pn,hT):r}var BP=qi(function(r,f,_){return r+(_?" ":"")+f.toUpperCase()}),Ac=Fp("toUpperCase");function jv(r,f,_){return r=vt(r),f=_?o:f,f===o?aT(r)?pT(r):ZS(r):r.match(f)||[]}var Lv=Ke(function(r,f){try{return _r(r,o,f)}catch(_){return Sc(_)?_:new ze(_)}}),NP=bn(function(r,f){return Rr(f,function(_){_=on(_),yn(r,_,xc(r[_],r))}),r});function VP(r){var f=r==null?0:r.length,_=Be();return r=f?Tt(r,function(S){if(typeof S[1]!="function")throw new kr(C);return[_(S[0]),S[1]]}):[],Ke(function(S){for(var A=-1;++A<f;){var N=r[A];if(_r(N[0],this,S))return _r(N[1],this,S)}})}function UP(r){return hE(jr(r,d))}function Pc(r){return function(){return r}}function YP(r,f){return r==null||r!==r?f:r}var WP=Np(),HP=Np(!0);function lr(r){return r}function Dc(r){return pp(typeof r=="function"?r:jr(r,d))}function zP(r){return mp(jr(r,d))}function GP(r,f){return yp(r,jr(f,d))}var XP=Ke(function(r,f){return function(_){return $o(_,r,f)}}),$P=Ke(function(r,f){return function(_){return $o(r,_,f)}});function Mc(r,f,_){var S=Yt(f),A=Da(f,S);_==null&&!(Ot(f)&&(A.length||!S.length))&&(_=f,f=r,r=this,A=Da(f,Yt(f)));var N=!(Ot(_)&&"chain"in _)||!!_.chain,H=xn(r);return Rr(A,function(q){var re=f[q];r[q]=re,H&&(r.prototype[q]=function(){var me=this.__chain__;if(N||me){var _e=r(this.__wrapped__),we=_e.__actions__=sr(this.__actions__);return we.push({func:re,args:arguments,thisArg:r}),_e.__chain__=me,_e}return re.apply(r,In([this.value()],arguments))})}),r}function qP(){return zt._===this&&(zt._=wT),this}function Rc(){}function KP(r){return r=$e(r),Ke(function(f){return _p(f,r)})}var QP=lc(Tt),ZP=lc(Vg),JP=lc(Il);function Fv(r){return vc(r)?jl(on(r)):PE(r)}function e3(r){return function(f){return r==null?o:mi(r,f)}}var t3=Up(),r3=Up(!0);function kc(){return[]}function Ic(){return!1}function n3(){return{}}function i3(){return""}function o3(){return!0}function s3(r,f){if(r=$e(r),r<1||r>ye)return[];var _=P,S=Kt(r,P);f=Be(f),r-=P;for(var A=Bl(S,f);++_<r;)f(_);return A}function a3(r){return Ge(r)?Tt(r,on):xr(r)?[r]:sr(nv(vt(r)))}function u3(r){var f=++_T;return vt(r)+f}var l3=La(function(r,f){return r+f},0),c3=cc("ceil"),f3=La(function(r,f){return r/f},1),h3=cc("floor");function d3(r){return r&&r.length?Pa(r,lr,ql):o}function g3(r,f){return r&&r.length?Pa(r,Be(f,2),ql):o}function p3(r){return Wg(r,lr)}function v3(r,f){return Wg(r,Be(f,2))}function m3(r){return r&&r.length?Pa(r,lr,Jl):o}function y3(r,f){return r&&r.length?Pa(r,Be(f,2),Jl):o}var _3=La(function(r,f){return r*f},1),b3=cc("round"),w3=La(function(r,f){return r-f},0);function x3(r){return r&&r.length?Fl(r,lr):0}function C3(r,f){return r&&r.length?Fl(r,Be(f,2)):0}return j.after=z2,j.ary=gv,j.assign=RA,j.assignIn=Av,j.assignInWith=qa,j.assignWith=kA,j.at=IA,j.before=pv,j.bind=xc,j.bindAll=NP,j.bindKey=vv,j.castArray=nA,j.chain=fv,j.chunk=hO,j.compact=dO,j.concat=gO,j.cond=VP,j.conforms=UP,j.constant=Pc,j.countBy=x2,j.create=jA,j.curry=mv,j.curryRight=yv,j.debounce=_v,j.defaults=LA,j.defaultsDeep=FA,j.defer=G2,j.delay=X2,j.difference=pO,j.differenceBy=vO,j.differenceWith=mO,j.drop=yO,j.dropRight=_O,j.dropRightWhile=bO,j.dropWhile=wO,j.fill=xO,j.filter=S2,j.flatMap=O2,j.flatMapDeep=A2,j.flatMapDepth=P2,j.flatten=av,j.flattenDeep=CO,j.flattenDepth=SO,j.flip=$2,j.flow=WP,j.flowRight=HP,j.fromPairs=TO,j.functions=HA,j.functionsIn=zA,j.groupBy=D2,j.initial=OO,j.intersection=AO,j.intersectionBy=PO,j.intersectionWith=DO,j.invert=XA,j.invertBy=$A,j.invokeMap=R2,j.iteratee=Dc,j.keyBy=k2,j.keys=Yt,j.keysIn=ur,j.map=Wa,j.mapKeys=KA,j.mapValues=QA,j.matches=zP,j.matchesProperty=GP,j.memoize=za,j.merge=ZA,j.mergeWith=Pv,j.method=XP,j.methodOf=$P,j.mixin=Mc,j.negate=Ga,j.nthArg=KP,j.omit=JA,j.omitBy=eP,j.once=q2,j.orderBy=I2,j.over=QP,j.overArgs=K2,j.overEvery=ZP,j.overSome=JP,j.partial=Cc,j.partialRight=bv,j.partition=j2,j.pick=tP,j.pickBy=Dv,j.property=Fv,j.propertyOf=e3,j.pull=IO,j.pullAll=lv,j.pullAllBy=jO,j.pullAllWith=LO,j.pullAt=FO,j.range=t3,j.rangeRight=r3,j.rearg=Q2,j.reject=B2,j.remove=BO,j.rest=Z2,j.reverse=bc,j.sampleSize=V2,j.set=nP,j.setWith=iP,j.shuffle=U2,j.slice=NO,j.sortBy=H2,j.sortedUniq=GO,j.sortedUniqBy=XO,j.split=OP,j.spread=J2,j.tail=$O,j.take=qO,j.takeRight=KO,j.takeRightWhile=QO,j.takeWhile=ZO,j.tap=d2,j.throttle=eA,j.thru=Ya,j.toArray=Tv,j.toPairs=Mv,j.toPairsIn=Rv,j.toPath=a3,j.toPlainObject=Ov,j.transform=oP,j.unary=tA,j.union=JO,j.unionBy=e2,j.unionWith=t2,j.uniq=r2,j.uniqBy=n2,j.uniqWith=i2,j.unset=sP,j.unzip=wc,j.unzipWith=cv,j.update=aP,j.updateWith=uP,j.values=Zi,j.valuesIn=lP,j.without=o2,j.words=jv,j.wrap=rA,j.xor=s2,j.xorBy=a2,j.xorWith=u2,j.zip=l2,j.zipObject=c2,j.zipObjectDeep=f2,j.zipWith=h2,j.entries=Mv,j.entriesIn=Rv,j.extend=Av,j.extendWith=qa,Mc(j,j),j.add=l3,j.attempt=Lv,j.camelCase=dP,j.capitalize=kv,j.ceil=c3,j.clamp=cP,j.clone=iA,j.cloneDeep=sA,j.cloneDeepWith=aA,j.cloneWith=oA,j.conformsTo=uA,j.deburr=Iv,j.defaultTo=YP,j.divide=f3,j.endsWith=gP,j.eq=$r,j.escape=pP,j.escapeRegExp=vP,j.every=C2,j.find=T2,j.findIndex=ov,j.findKey=BA,j.findLast=E2,j.findLastIndex=sv,j.findLastKey=NA,j.floor=h3,j.forEach=hv,j.forEachRight=dv,j.forIn=VA,j.forInRight=UA,j.forOwn=YA,j.forOwnRight=WA,j.get=Ec,j.gt=lA,j.gte=cA,j.has=GA,j.hasIn=Oc,j.head=uv,j.identity=lr,j.includes=M2,j.indexOf=EO,j.inRange=fP,j.invoke=qA,j.isArguments=bi,j.isArray=Ge,j.isArrayBuffer=fA,j.isArrayLike=ar,j.isArrayLikeObject=kt,j.isBoolean=hA,j.isBuffer=Un,j.isDate=dA,j.isElement=gA,j.isEmpty=pA,j.isEqual=vA,j.isEqualWith=mA,j.isError=Sc,j.isFinite=yA,j.isFunction=xn,j.isInteger=wv,j.isLength=Xa,j.isMap=xv,j.isMatch=_A,j.isMatchWith=bA,j.isNaN=wA,j.isNative=xA,j.isNil=SA,j.isNull=CA,j.isNumber=Cv,j.isObject=Ot,j.isObjectLike=Rt,j.isPlainObject=es,j.isRegExp=Tc,j.isSafeInteger=TA,j.isSet=Sv,j.isString=$a,j.isSymbol=xr,j.isTypedArray=Qi,j.isUndefined=EA,j.isWeakMap=OA,j.isWeakSet=AA,j.join=MO,j.kebabCase=mP,j.last=Fr,j.lastIndexOf=RO,j.lowerCase=yP,j.lowerFirst=_P,j.lt=PA,j.lte=DA,j.max=d3,j.maxBy=g3,j.mean=p3,j.meanBy=v3,j.min=m3,j.minBy=y3,j.stubArray=kc,j.stubFalse=Ic,j.stubObject=n3,j.stubString=i3,j.stubTrue=o3,j.multiply=_3,j.nth=kO,j.noConflict=qP,j.noop=Rc,j.now=Ha,j.pad=bP,j.padEnd=wP,j.padStart=xP,j.parseInt=CP,j.random=hP,j.reduce=L2,j.reduceRight=F2,j.repeat=SP,j.replace=TP,j.result=rP,j.round=b3,j.runInContext=te,j.sample=N2,j.size=Y2,j.snakeCase=EP,j.some=W2,j.sortedIndex=VO,j.sortedIndexBy=UO,j.sortedIndexOf=YO,j.sortedLastIndex=WO,j.sortedLastIndexBy=HO,j.sortedLastIndexOf=zO,j.startCase=AP,j.startsWith=PP,j.subtract=w3,j.sum=x3,j.sumBy=C3,j.template=DP,j.times=s3,j.toFinite=Cn,j.toInteger=$e,j.toLength=Ev,j.toLower=MP,j.toNumber=Br,j.toSafeInteger=MA,j.toString=vt,j.toUpper=RP,j.trim=kP,j.trimEnd=IP,j.trimStart=jP,j.truncate=LP,j.unescape=FP,j.uniqueId=u3,j.upperCase=BP,j.upperFirst=Ac,j.each=hv,j.eachRight=dv,j.first=uv,Mc(j,function(){var r={};return rn(j,function(f,_){yt.call(j.prototype,_)||(r[_]=f)}),r}(),{chain:!1}),j.VERSION=h,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){j[r].placeholder=j}),Rr(["drop","take"],function(r,f){rt.prototype[r]=function(_){_=_===o?1:Nt($e(_),0);var S=this.__filtered__&&!f?new rt(this):this.clone();return S.__filtered__?S.__takeCount__=Kt(_,S.__takeCount__):S.__views__.push({size:Kt(_,P),type:r+(S.__dir__<0?"Right":"")}),S},rt.prototype[r+"Right"]=function(_){return this.reverse()[r](_).reverse()}}),Rr(["filter","map","takeWhile"],function(r,f){var _=f+1,S=_==ae||_==fe;rt.prototype[r]=function(A){var N=this.clone();return N.__iteratees__.push({iteratee:Be(A,3),type:_}),N.__filtered__=N.__filtered__||S,N}}),Rr(["head","last"],function(r,f){var _="take"+(f?"Right":"");rt.prototype[r]=function(){return this[_](1).value()[0]}}),Rr(["initial","tail"],function(r,f){var _="drop"+(f?"":"Right");rt.prototype[r]=function(){return this.__filtered__?new rt(this):this[_](1)}}),rt.prototype.compact=function(){return this.filter(lr)},rt.prototype.find=function(r){return this.filter(r).head()},rt.prototype.findLast=function(r){return this.reverse().find(r)},rt.prototype.invokeMap=Ke(function(r,f){return typeof r=="function"?new rt(this):this.map(function(_){return $o(_,r,f)})}),rt.prototype.reject=function(r){return this.filter(Ga(Be(r)))},rt.prototype.slice=function(r,f){r=$e(r);var _=this;return _.__filtered__&&(r>0||f<0)?new rt(_):(r<0?_=_.takeRight(-r):r&&(_=_.drop(r)),f!==o&&(f=$e(f),_=f<0?_.dropRight(-f):_.take(f-r)),_)},rt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},rt.prototype.toArray=function(){return this.take(P)},rn(rt.prototype,function(r,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),S=/^(?:head|last)$/.test(f),A=j[S?"take"+(f=="last"?"Right":""):f],N=S||/^find/.test(f);A&&(j.prototype[f]=function(){var H=this.__wrapped__,q=S?[1]:arguments,re=H instanceof rt,me=q[0],_e=re||Ge(H),we=function(Je){var it=A.apply(j,In([Je],q));return S&&Me?it[0]:it};_e&&_&&typeof me=="function"&&me.length!=1&&(re=_e=!1);var Me=this.__chain__,je=!!this.__actions__.length,Ve=N&&!Me,qe=re&&!je;if(!N&&_e){H=qe?H:new rt(this);var Ue=r.apply(H,q);return Ue.__actions__.push({func:Ya,args:[we],thisArg:o}),new Ir(Ue,Me)}return Ve&&qe?r.apply(this,q):(Ue=this.thru(we),Ve?S?Ue.value()[0]:Ue.value():Ue)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(r){var f=ga[r],_=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",S=/^(?:pop|shift)$/.test(r);j.prototype[r]=function(){var A=arguments;if(S&&!this.__chain__){var N=this.value();return f.apply(Ge(N)?N:[],A)}return this[_](function(H){return f.apply(Ge(H)?H:[],A)})}}),rn(rt.prototype,function(r,f){var _=j[f];if(_){var S=_.name+"";yt.call(Gi,S)||(Gi[S]=[]),Gi[S].push({name:f,func:_})}}),Gi[ja(o,g).name]=[{name:"wrapper",func:o}],rt.prototype.clone=FT,rt.prototype.reverse=BT,rt.prototype.value=NT,j.prototype.at=g2,j.prototype.chain=p2,j.prototype.commit=v2,j.prototype.next=m2,j.prototype.plant=_2,j.prototype.reverse=b2,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=w2,j.prototype.first=j.prototype.head,Uo&&(j.prototype[Uo]=y2),j},Wi=vT();hi?((hi.exports=Wi)._=Wi,Dl._=Wi):zt._=Wi}).call(Ji)}($s,$s.exports);var kw=$s.exports;const Iw=xe.styled(xe.Switch)(()=>`
  width: 32px;
  height: 20px;
  padding: 0;
  display: flex;
  margin-left: 12px;

  &:active {
    & .MuiSwitch-thumb {
      width: 19px;
    }
    & .MuiSwitch-switchBase.Mui-checked {
      transform: translateX(9px);
    }
  }
  & .MuiSwitch-switchBase {
    padding: 2px;
    &.Mui-checked {
      transform: translateX(12px);
      color: #fff;
      & + .MuiSwitch-track {
        opacity: 1;
        background-color: #2C62F6;
      }
    }
    &.Mui-disabled {
      color:#E6E6E6 !important;
    }
    &.Mui-checked.Mui-disabled+.MuiSwitch-track{
      opacity: 0.2;
      background-color: #BBBBBB;
    }
  }
  & .MuiSwitch-thumb {
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);
    width: 16px;
    height: 16px;
    border-radius: 10;
  }
  & .MuiSwitch-track {
    border-radius: 12px;
    opacity: 1;
    background-color: #EEEEEE;
    box-sizing: border-box;
  }
`),Sd=xe.styled(xe.FormControlLabel)(()=>`
  .MuiTypography-root  {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
    text-align: center;
    margin-bottom: 10px;
  }
`),Td=xe.styled(xe.Radio)(()=>`
  padding: 0;
  color: #DEE2EC;

  &.Mui-checked {
    color: #DEE2EC;

    svg:nth-of-type(2) {
      color: #2C62F6;
      transform: scale(1.2);
    }
  }
`),qs=xe.styled(xe.Stack)(()=>`
  &.controller-wrapper {
    gap: 30px;
  }
  &.controller {
    gap: 10px;
  }
`),jw=xe.styled(xe.MenuList)(()=>`
  background: #ffffff;
  border-radius: 4px;
  padding: 0;
`),Ku=xe.styled(xe.MenuItem)(()=>`
  min-height:40px !important; 

  .MuiTypography-root {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
  }

`),Lw=xe.styled(xe.Popper)(()=>`
  &[data-popper-placement*="top"] {
    span.arrow {
      bottom: -10px;
    }
  }

  &[data-popper-placement*="bottom"] {
    span.arrow {
      top: -10px;

      svg {
        transform: scaleY(-100%);
      }
    }
  }
`),Fw=xe.styled(xe.Button)(()=>`
  padding: 0;
  font-size: 15px;
  font-weight: 700;
  line-height: 18.15px;
  color: #2C62F6;
  min-width: unset;
`),Bw=xe.styled(xe.Dialog)(()=>""),Nw=xe.styled(xe.DialogTitle)(()=>`
  padding: 12px 22px;
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #DEE2EC;
`),Vw=xe.styled(xe.DialogContent)(()=>`
  padding: 30px 40px 46px !important;
`);class Uw{constructor(){Le(this,"toolbarVerticalPosition");Le(this,"saveToolbarVerticalPosition",e=>{this.toolbarVerticalPosition=e,localStorage.setItem("verticalPosition",e)});Le(this,"changeToolbarVerticalPosition",e=>{this.saveToolbarVerticalPosition(e)});R_(this);const e=localStorage.getItem("verticalPosition")??"bottom";this.toolbarVerticalPosition=e}}const Do=new Uw,Yw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMTSURBVHgB7Zx5jFXFnsd/t/t2Qzdrs68iyrixKeqgAupTXMFdXzTOZNSMos9JxsQY5w//eFETEydOZgxGE3XiOnEXExyf8nzijopGB0R2BNmlGwQamr7bnE81Bfeevkub96Tp4vtJbu6959SpU6fqW7/6VZ2qSuQiTIhAqDIhAkKCFkEhQYugSFoXY/fu3dazZ88D/7PZrK1fv94SiYT7pNNpGzJkiK1evdpGjRple/fudeH69u3rrq2urrbm5mb3vWvXLuvdu7f9/PPPduyxx1ptba3t27fPGhsbrb6+3n766ScbOnSobdu2zfr162dbtmyxwYMH26BBg9x9tm/fbn369HHHe/To4b5HjhxpO3bssGHDhrm0rVq1ygYOHGhVVW22g7RzXbdu3Vx6SCvneAbCcS332rx5sw0YMMCFJY0tLS1WU1NjdXV1B54jlUq5+/I8mUzGPSvx/fjjjy79xEPcPCfhfL5t3brV6DpxrzFjxti6devccxA+H+Lluq5ElxL0l19+aZ999pndddddBccp/IULF7rCo9AozLVr1zqBnHjiifbxxx/b2WefbUuWLLHTTjvN3njjDbv88svtnXfesYaGBieSNWvW2KWXXmorV660559/3mbMmGHffPONTZs2zebPn29XXHGFPf3003b77bc7QS9atMjFi+AREwIF7vvLL7/YxRdf7I6/8sorrqKce+65Lu3nn3++zZkzx66//nqbO3eu3XTTTda9e3cXbsSIEe76Y445xh1DoIjshx9+cM/GeQTGs/Kc3BNh79mzx6Vpw4YNLgzPMn36dPvggw/c81MZEPG1117r0sh9SRuV89tvv3UVhHyJC/qRRx6xG2+80VX2rkJRl2Pnzp3OAmG5oLW11Q4Hhg8f7go7HwoaS3XmmWdaMpl0Bbhp0yZXWFghChpLedRRRznry3GsEedGjx5t/fv3d9c0NTXZu+++ax9++KETIOJANAiLeyB6BMQxBIWYsapYQ/KLD9cRD7+pfMuXL3dWlfRhZY8++mhbvHixq4DEyQexUjn8fWhVsIyImXRh8bme1gexf/31106cY8eOdS0CxzlPeIRHa0Iaqcxcy3nSwH/SRTg+lCn5RV7wobLFmTBhgmvZDhfWbc1a486cbWzM2fL12aJhqv8YkX8AIb/22muumSLjaTqxHmSgbzY7C0Rx/PHHtztOWhELVodCv+yyy+z77793Vof/NN1YMQqbwiUcYiE+BI8lvuiii2zixIkuvpkzZ7rwuB5cy7NTIRAvoj3jjDNs8uTJ7hjxcH8Knw/pQGjnnHOOs95ULsJgHIjz6quvdtchKtKB5SYc6TzhhBPcPU8++WRnZal0HB83bpyrTAj2mmuucZUS0VMhuZY0cY77Xnjhhe45uRfpIhz/iYvKhgvE9eQjrQ9poeIhfuLLh/TQ2nUmrSmz2XPStvjHjK3eaJaJdPzah2lbui5n40dHhqZboiB8Ij4OjV9FU+z9Ph4eP46mmYIV4lDSmjZ785O0bW3KWfdIvCMHJmzVppwlI9s667L2HnM7k0sTg4XAumEVaM6o7ViTw8X1EEcOVZEBPmdCtf3+d0nr18tsYEPU+Y+Ot6SKvw9MlHtTiIjpdHRlqJCMePhOEE05TTOtDb4o/iYuAe4VTTMuCK0UrkmvXr2cC4avyTFaLfxx3AdGE+hM4dfD0qVLnT/uRydwKWjVaOZx22jlSAMuBR07OmD4t7gE+PYYEuImHPehY4kBwRVgtAUfnvMcI6z32enw8Qz8Bu/7kw5cCO7Hc3Ad7gW+elcF96O2Jhp9aTGrq6X/1D5M2VGOri5mQIwUKP4vIwAIiMLm94oVK5xgEBECxOf0guA4ImVkBH8T8dF5Ih4E7cXoBY2v/MUXX9jpp5/uRIQI8Wu/++47dz8EhZCpBHyoaAiMURXE6UVIuFNPPdUdp4XcuHGj86MRJ7aHuPHVqYx0kL1vznWIleuorFRO7ufPkw++cnVVEDP0KFMng3+xggXDQlOgWDgKlI4UVg6h54+zIh6srB8/RsAnnXSSs46IybtedJQIg2XFggMCZ4QCIVE5uAaDQMcK60l/BKuO6Lie39yP60kL4REi6UHgkyZNcvFj5Ukv1xEfwkeYpIWKQYfRW3wqCWnmGloJnpVrOM+HNIZO4kiYnERBA6KmUBEK1g+LjFA4jiVDVPwnPAL048v89v0HhMx/XBLiwaITjtEN7wLw7eMmnLeOCJd4CE8YxOyz3w/b+Rc2CJT4Eb+vNNzb3580kjZfsaicvp/Dc3AN4fyLJf5z3LsmoXJECFocOWguhwgKCVoERTKdMSGCIZmVBy0C4lfOtsvFvoX4LUnEvivTIUEnLBtp2M9ukpjFoSbBQH+kvMov+soLOhKxE7NELDqVSH/R6DKSzjGOkSg9llFS0IkcvcWsCXH4gKgzTty5RHFrXVTQnSFm3nwxh5nVFCwJYu4Cqz5OOeUUEx2DPPz888/tueeec5OpmDvNKhXeVuaiN4U7liyxzX+ZZ+ldu63/5Mk29Lzplki2SSDTvNIyOxZG4ZqtutdYq274+6iVP1xHdSPPAaNdRNSJfanCN4UJ5ysf2rE85iU89thj9vDDD7tZZh7mJTzwwAM2a9asI2Iewl/LV199Zdddd52bIwLk2ezZs+3WW2+1ncuW2qIHH7B9TY22/6Qd/4d/seGXzrBsa6PtW/2o5VI+7xNWO+xaS/afUvQ+/uVyR8vktwrfJujCSlekCla2zNzw17wxZxJNubieeeYZu//++wvEDPy/55577PHHHzdRmddff/2AmIG8feKJJ9zvrZ9+clDMbSdtzf+84H5mmj7LE7M7aamtf2oXP/ExV4T5KswR4dvPMymGn2fiw/O7lG44zlyU/Li5V1md5dprtap9gMpC/fTTT90yrY6AmB999FE31bIYTIN88skn3cN6mEDjl0Nx/KmnnnITdkpBIeKqlMtcDxnElM6OVEjuiRvEzLuOQL6wJpFrKsGMuhdffNFeeOEFtzaxEuTDRx995NYUlnpOJkTFQVSQjlrBOJlING2BiizciB0jHi8yhMd/0kG6ii384BzCxA3y4fMXi+RDWfh1kVxHWD/RinuWKquE6ywWijpmoSsX8ptvvukWiDJN8tlnn60YnuVcCJZV1MuWLWt3nvnFTO/0MM2R1ca4Gfh+wBzfUlYeMd93331u1lul+dtk1IMPPmhXXXWVvffee1YJ/FAEVK4y5cNK6wsuuMDuvvvuimGpJG+99Za9//779vbbb1cMT54Tt3MfospQDNYx+jzzsMYQGiZMPOAve4b87jz3XdV7QqSOwryr7ntqwX8v5DhejPmVjGOlrDHH4iIttxqKc+Use1yzyXIni8GURSbHMzWxlNXN56yzznJzeLEepWpyvnW++eabnTAuueSSA9M+i2Uk4JLccccdbqk9vmMln4tWhYWhLN0/7rjjrBJ0TFkEwIqWjkAHlnQXq7hxaIXoM7A6pSOCpjJ6V69U4ZIHVD7cDAwAC3+p7DBo2tlRZ3CXrX97bmSZ91rDuPE25pZ/dueqe/6d1Q69ytKNn0Rxt1p1j2OtZugVBffOLwMWPvhFD+BFndxfYfgdTyOWmemrXMM5yt11VvdfWw7uTbii5ct98g4nDx7PMZe04ksZ9q6gecdC33bbbVYJljQhIioCk9rjMAmdCsLIBhYWcSOMFt8cRjDBPX9zGQ8rPBA0BdeRDgcVhRaD/TU6ujzfb0DTEa688kqXfladV4L5zrgQpJvNXipBpWJrBIRRaiU2cdGy8Sl2bviMme5TjGT/qe5TDF+ZgO9XX33VLVzAKHjX0Fc07uPdHMCIYcxwJyhH34rmh8n/zSiN37aB1fVe9H4eeHtyBWI/MMqRwxeJhuuqDvFgAolhJ4WHHnqo6Hkqwp133unOa6SjMqlMyrY3N9me1j3WUN/Petf3tsR+K9WaytiWxmbbvafVBvWrt3596u1glqaj4t9pudbmyPtosETtQQOCNc03MLh5uD0IlSVn4Pcu8QsovNX1fjDliGHwZYhQOeZXAvkK43d1AoyhD+8XYsQhaDZ6g+jFnhci0SnvA0nwvffe69bNvfTSSwW1lUSywxAjHRJzZVrTrfb+knn2p0X/a7tadtmAngPsH8/6Jxs/cqK1tKbtpXeW2PNzF9n2X1qsf986++Md02zKKSPdtXvsc6trWWAta7fZvk0J6zn2VqsZ0rZjUrxvwn8Eyc4A+cd8GfltysCLOL9c8+PkHL+9D46I4xCm1J4wOSsc3isYh85EtTvZSWPp+OMvv/yyzZs3zy0ExQ1h2yya8a62v1pnsXTTDzb7z//lrLNnZL+R9m8z77PvV+ywu//9z7ar+WA/BlHP+c/rLFu3wxZn/9vGJoZYt811tvubZbZv2VYb+q//EXUk2zqZ+VY3DoLyax49fiOdYhCO8F6IiJ3wpfoGVIpSbl86S3wHO8IxG57Y749YSRBe/ho7Xn6Ug4fyQze+WSoGor3lllvshhtucOv7aI7YdqAUZDDx7dk/HEUmkXbW1sXhOJ0lwudnGhnptxOIp9mPJJAuriNNPGsx/5Xn8+OtWC4/RIWfHi8IP8ZKOPoF/lq+49f4dJMXXEM68n1JrBqdSs+G7RsKxAxNzdutaXejrf5pZ4GYoXHHXtvcuNuqhm2xTdnB1qdqnI2sGmDp3Tnbu2S5paN71wxss5g+TfnrIIG883vs5cMxnisuatKeL2Z/zIePx42bER+58bSFLbTABYLmVWcmm7ZkdWlFs6yfRDLCQITlOmQUAsNeDH8hEJbtT5kyxcrBGC6uB8N85QTNfnB0TNnOi7h5cNLE6944pHPBggVOkFh/Mg+h0qmkBYj7ZoiXjQ6pHHRauQfXT5061S2GjcNeHwgP39LvqUfa6NTEn4EhSITLeUYiSBPp95WTTSX91gjEwzZdfBM3lYlKQP6TdlaoM5TnaejREPWBItHnjc12r+lmfev72sB+GBSa/oOC6V5bbQP61ltrYoTtTdXYyqYhtuG7auu75kzrU9MQvQI/aKwoY0TtDQcf0pzvauTjReoX9vpjpcJTBn5hshc1YTlWSl88Svz1fEzQzK3zVqB4JCyPxzr7TzlIGA/FEA+1r9wbQ8/48ePd/haV9o9gqT6ZgDARBWkvdQ3Pg7+HKBiKI6xf0V0ss/zIDOFpUQjLdgalxrkJj/gpcNJFIZCWeEUhPxAllYpKwr399rj+fvktDOcJT1iu9RvlkB721ou/WZ0wYqJNGnWafb12oevkV1clbfrYC61Ht5429eQ6O2/yKPvLF2udqKsjozXr95OsT6+oY2bdrH5brc2fv892LUjZmK119g9/mGZV3bsVxO8tZkfxG1L+FuF5hmwu8r9jOm03l6NtjLDVWemqEjWDZsfXpEo78WClfbPUUbBUNDOlmpo4CNaPb5bLEB8OfEfF7ytdKnxHMzh//oG/rtz1fhck34FCuMXmMHjXyl9DeK7ze4PE489kM7Z045LI1WiyYQ0jbPTA0c5qQzqTta8Wb7Qt25pt1LA+Nv64wQda40wkkP9blbJ1K9I2/uikjT6x5rDtiJNNPEtV5DvHn7+doCEbiTWdTlltTZVGF8RhhZtPkooqdtRZLdZiFm0/qqKAyUjIralW1zRh1iVs0Zk4zyGDPx6JtgbLXNz9K2qh8yNJpVqdP4ar4oUtcYtDgXtp4t4S5lwHENcpWZMsO0+7rKA92WymLVL3ClSrWMShwZnNRFtHsZrRjg70ZzrUZcW8+7gOjhO6dzR25KDn7QzaRP03XvVdcIPEr19aHgZ63q6AtgITQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZB8f85ChaZEjaUZgAAAABJRU5ErkJggg==",Ww="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1ASURBVHgB7Zt7jFTVHcd/d2Z2WZbdZd1ll8cuq4ggj74QNFbENhqMomK1pE0bg9imSiMxGiMSNaYR/yAkptQEQatEE1uVBLHlkfgoRJGC2EqwIM/yfu2yLOyys+zsvHq/Zzizd2bvPP4ogr98P2Eyj3vumXPP+Zzf/Z0zrBOJJpNCiBICQogiKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFaHiiyZTj6R9TcjFxnH/OannIikotCMJ11/3QYnJpSCtHaQOSNLJn1TkPeok426FcaHM5NIDB+MpJ/MQyHWyk4y5zwkh3z16enokHA5LMtk3ECWjUYmfP+++8DnmypJMROTyDmCJC1L7t9E35XAuQVSOuh392WefybvvviuHDx+WESNGyJ133inTpk2TkpISIYVBH65atUqWLl0qXV1dcs8998hjjz0m/fv3l2QsJq2bN8nRtWsk3t0ttROuk6Zf/FKC/fqZc2Pt2yTe9k9X6G4JVlwrofqpbvp6ufY7pHYNdYJ9jjiRaNZUdfNlR+LybXL69GmZM2eOrFy5UhKJ3rtCIBCQmTNnyqJFi6S8vFxIft5//315+OGHpaOjw7x33AXV3LlzZf78+dKy8XPZteiPEusKy4WD0nj3dBk9+/eSCP9XIof+7GaX3RdqcqRk0M1SMvTnvt9jI7/jFLdYu1jlU0JnJhl9Ug6niDQDX+h3O/MjHo/L2bNn89a1ePFiWb16dYbMAO/ffPNNefnll4UUZsOGDWmZAfp27dq15vXZ7f/plTl1UE6u/4d5Ge/42iOzOSixM//qUz/Go9uN7oj+eJx3UxfcFXKBsUcZWx7nZo+xt62oy1t3JBLJWT51Ut9jgb4FCov61ltvyYIFC6QY0MHz5s2T1tZW3+MHDx409aHxloqKCrnrrrvS79944w05c+ZMzu/YtGmTvPTSSxKLxaSY9uBOUMyERNuWL19uUqFiWLhwoYmG7733XsGyR48elUceecRE1M2bNxcsjzTsxRdflNdee82I4QfuaNnYKOcX7ZyAvWUH/WrLeGflRB/bgIbPMG5+7YGcKI8ytjzOhazZkwDHUIcVGO/x7K3DD8dsIyfytLoImV955RWz4GhqapLnn3++YPm3337bPEaNGiVbtmzpc/zEiRNy8uTJ9PuBAwca4e6999507nzs2DHp7Oz0rR8Djck1ZswYCQaDeduCjnnqqafkgQceMLl6IZB7VldXm2sthueee84I/frrrxcs29LSIlVVVTJ06FDZvn17wfK7du2SF154QZYsWWL63w+sObJTsxkzZpjn2knXu/lyWcaxRjfHBsHqia4JpRnHQrVT0q8hGGTLFQQgqldSyOgNUNlk14Xzc0mLcljk5g5AmUKHvCc6RQh9yy23mIiIGXX77bcXLA95EOXKyspk0KBBfY6HQqGMnOmZZ54xUfSJJ55Id1KuRSGi/uzZs+Xxxx+XqVOnFsy53nnnHZk1a5bU1dXJ9OnTpRCDBw82bUP5Yrj11ltNvZCvELgm25b169dLMdTU1EhpaWnO47fddpt88sknJoVra2uT+++/36xBzLnXTZTrFiyUI3//QKJucKi9/nppnHa3ORbo3yBlI+ZItO1z166wBCvHuULflK7XRkz7es2aNXLDDTfIFVdckR4bjJX3tfdcCIuAhOBgxwifobw9ng8b5X3HF+p4Pk4vCs0J7lZdMXk7hG5vb5c77rijYFlcHKIKGgO50QleEKkwELt37zYRFmKuW7fOzErLuHHjZOPGjTJgwICMc/fv3y/Hjx+XyZMnF7XgOHfunLlL3HjjjX3qygXuHrW1tUXttGDC4HohKaJlPjDAX3zxhbnmhoYGcwcr1A6bW1599dXm7vFtAeFsWgFPli1bJtdcc43pw0mTJpnPke6gTRgHlLWS2lQCD/SjvYuiP/u5OyyoD9dlgxrGB+eiHkwaWx4BEcEvm6TZ7Qj1pla9Qqf295zif2X8v4E05umnn/a9TeGikVI8+uijQgoTjUflUOsBae08LQ3VDdJYO9wNYKlB7YnG5Zv9rXLiVKc0DamScSPrPOPt5sbRY5LoOiXJQL2EKnvTLK/Q4MCBA2YNgDvG+PHjzWdeoTGONkojMGESQmB7HHiFxnF7B/CmU0ifbPlcQieMvUF3PZDKnj0l3P0Nt/LgJTAat15cCBZViPwW5NNPPvmkPPTQQ0IKE46E5YOvVsjnezZIJBaRqrIquW/SDPnJtT+Vjs6ILFn+lfxt/R7pjsSkZmCZ/Pa+H8mvpo13s9ConJUPZWDsG+k5GZbuozHpN8zNx8febOpFlIRYNooi9x89erTU19env9uWsa+t0EiR8D47ZbBy4jMct0L73TltmZx46s3Yh467szt0if7/HToAiyPkZ1jo4baK2zbSDf6wUhxbD38lS9ctNlHaUldZJ3/42XzZsq1V5v1pnUR6ehdf/UqD8vGrv5ZIebN8Hf+L/DA4QipbKqT9y2/k/Jc7pPHZV8UpTf3wgkjrTQO9IDojgnp3WfLtTkBOlLeCZ6cd2SCS53IglkB9vceyYrhzYSZJTpqbm03lyEfRsMbGRskHOsFu1aBhmN1+oM4JEyaYHYWdO3eavBK/FuYCkRyzHD/KoG7MbLQduwbZoGP37t1rOhFl0PF25YxcMHu7C/ntqVOnzHEsZNHuHTt2mLb5LWyxpYjbLPbb8R2INhjQK6+80mxBekG9WPSivUOGDEmfi/7Erf2qq65K58f4fiwwcWvH9XojoG3/2LFje9sRbsuQGXT1dEmb+3nz6XCGzADvm9vC4pSFpS05Qo7EfyBNsRqJtrs7C4f3Suxsu5RciMJ2MYq+9oqHtqB/svsQ/YDryl7wYZxRlzda4zXK45q8kwCfo+5c0TnVjszvzRDacQIST8QllCe6HzlyxHS+nYEQL9eCDGU++ugj84xBhKBY9OVjz549Zh8XK/R8Qm/dutUsKCEwJgzaAlkefPDBPmXRIcj7sMrGNiFys8rKSrOgxJ0gezBwfZ9++qlZ3GEhg0kIsfxkBmgHdhXwjPKoD+9R3k9o5KOYtGgTFoPYrUE59BHaZYOE3bLCZERbMQmwqMbnhw4dMtfuFXpw1RAJunvLGENLRVmlDKqok6ZhjjuuAYnFe7e5ystKZFh9hUScfnK+Z4DsPlEj+/6dkMF7fyz15Y0SqqnNaDtEhJB2rxjX6bf3Daykdr/ajkMuV3AMExl12/QjX3mAS3Gyvr/PT9+xWNTNo9FY/4rQ+RgQrLrxxViJ5gLl9u3bZwYJEiGaYr+4ECtWrDD1Dh8+PGcZ3Cns1g8mDDob7cEEywYdirJYyEBSDAI6GnL7RWi7UMFxmwOiDlwDhM3GruIRbSEd2mEjNSaRt160G3XjLoAHIhDknzJlinlGee8Ohr2z2KiOSYPzJk6caMZi5MiR6bIJd2H/8Y4PZfW2VRKN9UhV/4Eyc/Is+V7D993BT8pf1+yQZSu3SSQak+rKMnn2dzfJ5AnDzc7X5pMRWb4m7P5EHpcJbtT7zdwqqRlz+aZ6uJ5E0p2kocw29hE69RNkj5QEnZxSk8ublo4Wd5fjlAyrHibV5ZnbpEebO+R4S6cMH1IpQ+sqM887k3DvGlEZ1RSSmkFBuVwxjsaSEnKDmeMUiNAAkQWRGqlHMMC/0iKXD3G4GXdlDpX6/9TvJzSwUiNGh0JutHYYrcmlI5FALp7Afxw1aUbO3D2X0AA/tqCSeDxmfpJBCpLKQig3ufiYv2LFz+7J1O/bwWDIfQT6pBle8gpt8f4PKEie/ltZQi4ijpPaeTOBNJBf5PQ5xQhNyHeF/wEM2yGelHbyZgAAAABJRU5ErkJggg==",Hw=Eo(t=>{const{onClose:e}=t,{toolbarVerticalPosition:o,changeToolbarVerticalPosition:h}=Do,[v,w]=Te.useState(o);Te.useEffect(()=>{v!==o&&w(o)},[o]);const C=p=>{w(p.target.value)},E=()=>{h(v),e()},D=()=>{e()};return Y.jsxs(Bw,{onClose:D,open:!0,children:[Y.jsxs(Nw,{children:["  "," ",Y.jsx(Fw,{variant:"text",onClick:E,children:""})]}),Y.jsx(Vw,{children:Y.jsx(xe.RadioGroup,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:v,onChange:C,children:Y.jsxs(qs,{flexDirection:"row",className:"controller-wrapper",children:[Y.jsxs(qs,{flexDirection:"column",className:"controller",children:[Y.jsx("img",{src:Yw,alt:" ",onClick:()=>{w("top")}}),Y.jsx(Sd,{value:"top",labelPlacement:"top",control:Y.jsx(Td,{}),label:" "})]}),Y.jsxs(qs,{flexDirection:"column",className:"controller",children:[Y.jsx("img",{src:Ww,alt:" ",onClick:()=>{w("bottom")}}),Y.jsx(Sd,{value:"bottom",labelPlacement:"top",control:Y.jsx(Td,{}),label:" "})]})]})})})]})}),zw=Eo(()=>{const{core:t,touch:e}=Ut(),{toolbarVerticalPosition:o}=Do,[h,v]=Te.useState(null),[w,C]=Te.useState(t.config.usePencil),[E,D]=Te.useState(null),[p,i]=Te.useState(!1),[d,c]=Te.useState(!1),n=Te.useCallback(kw.debounce(b=>{v(b),c(x=>!x)},100),[]),a=b=>{b.preventDefault(),b.stopPropagation();const x=b.currentTarget;n(x)},s=()=>{v(null),c(!1)},l=b=>{const x=b.target;C(!x.checked),t.setUsePencil(!x.checked)},g=b=>{s(),i(!0)},u=()=>{i(!1)},m=()=>{t.rotateBaseImage90(),s()},y=d?"simple-popper":void 0;return Y.jsxs(Y.Fragment,{children:[Y.jsx(mr,{"aria-describedby":y,Icon:()=>Y.jsx(jt,{variant:"more"}),onClick:a,onTouchEnd:a,style:{touchAction:"none"}}),h&&Y.jsx(Lw,{id:y,open:d,disablePortal:!1,anchorEl:h,placement:o==="bottom"?"top":"bottom",modifiers:[{name:"flip",enabled:!1,options:{altBoundary:!0,rootBoundary:"document",padding:8}},{name:"offset",options:{offset:[0,40]}},{name:"arrow",enabled:!0,options:{element:E}}],children:Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{ref:D,className:"arrow",style:{lineHeight:0,zIndex:"10"},children:Y.jsx(jt,{variant:"arrow",width:14,height:12})}),Y.jsx(xe.ClickAwayListener,{onClickAway:s,children:Y.jsxs(jw,{children:[e&&Y.jsxs(Y.Fragment,{children:[Y.jsxs(Ku,{children:[Y.jsx(xe.ListItemText,{children:" "}),Y.jsx(Iw,{checked:!w,onChange:l})]}),Y.jsx(Ku,{onClick:g,children:Y.jsx(xe.ListItemText,{children:"  "})})]}),Y.jsx(Ku,{onClick:m,children:Y.jsx(xe.ListItemText,{children:Y.jsxs(qs,{gap:"8px",flexDirection:"row",children:["90  ",Y.jsx(jt,{variant:"clockwise90"})]})})})]})})]})}),p&&Y.jsx(Hw,{onClose:u})]})});function Gw(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"undo"}),...t})}function Xw(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"redo"}),...t})}function $w(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"calendar"}),...t})}function qw(){const{core:t}=Ut(),e=o=>{const h=new Date;t.addText(ld(h,"yyyy-MM-dd"),void 0,!0)};return Y.jsx(mr,{disableToolbar:!0,Icon:$w,onClick:e,tooltip:""})}function Kw(t){return Y.jsx(xe.SvgIcon,{inheritViewBox:!0,component:()=>Y.jsx(jt,{variant:"bookmark_2"}),...t})}var Qu={},Ed={exports:{}};(function(t){function e(o){return o&&o.__esModule?o:{default:o}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ed);var Mo=Ed.exports,Zu={};function Qw(t,e){return nt({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const Zw=["mode","contrastThreshold","tonalOffset"],Od={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Po.white,default:Po.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ju={text:{primary:Po.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Po.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ad(t,e,o,h){const v=h.light||h,w=h.dark||h*1.5;t[e]||(t.hasOwnProperty(o)?t[e]=t[o]:e==="light"?t.light=z0(t.main,v):e==="dark"&&(t.dark=H0(t.main,w)))}function Jw(t="light"){return t==="dark"?{main:ki[200],light:ki[50],dark:ki[400]}:{main:ki[700],light:ki[400],dark:ki[800]}}function ex(t="light"){return t==="dark"?{main:oi[200],light:oi[50],dark:oi[400]}:{main:oi[500],light:oi[300],dark:oi[700]}}function tx(t="light"){return t==="dark"?{main:ii[500],light:ii[300],dark:ii[700]}:{main:ii[700],light:ii[400],dark:ii[800]}}function rx(t="light"){return t==="dark"?{main:si[400],light:si[300],dark:si[700]}:{main:si[700],light:si[500],dark:si[900]}}function nx(t="light"){return t==="dark"?{main:ai[400],light:ai[300],dark:ai[700]}:{main:ai[800],light:ai[500],dark:ai[900]}}function ix(t="light"){return t==="dark"?{main:Ii[400],light:Ii[300],dark:Ii[700]}:{main:"#ed6c02",light:Ii[500],dark:Ii[900]}}function ox(t){const{mode:e="light",contrastThreshold:o=3,tonalOffset:h=.2}=t,v=fr(t,Zw),w=t.primary||Jw(e),C=t.secondary||ex(e),E=t.error||tx(e),D=t.info||rx(e),p=t.success||nx(e),i=t.warning||ix(e);function d(s){const l=Ef(s,Ju.text.primary)>=o?Ju.text.primary:Od.text.primary;if(process.env.NODE_ENV!=="production"){const g=Ef(s,l);g<3&&console.error([`MUI: The contrast ratio of ${g}:1 for ${l} on ${s}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join(`
`))}return l}const c=({color:s,name:l,mainShade:g=500,lightShade:u=300,darkShade:m=700})=>{if(s=nt({},s),!s.main&&s[g]&&(s.main=s[g]),!s.hasOwnProperty("main"))throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${l?` (${l})`:""} provided to augmentColor(color) is invalid.
The color object needs to have a \`main\` property or a \`${g}\` property.`:wi(11,l?` (${l})`:"",g));if(typeof s.main!="string")throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${l?` (${l})`:""} provided to augmentColor(color) is invalid.
\`color.main\` should be a string, but \`${JSON.stringify(s.main)}\` was provided instead.

Did you intend to use one of the following approaches?

import { green } from "@mui/material/colors";

const theme1 = createTheme({ palette: {
  primary: green,
} });

const theme2 = createTheme({ palette: {
  primary: { main: green[500] },
} });`:wi(12,l?` (${l})`:"",JSON.stringify(s.main)));return Ad(s,"light",u,h),Ad(s,"dark",m,h),s.contrastText||(s.contrastText=d(s.main)),s},n={dark:Ju,light:Od};return process.env.NODE_ENV!=="production"&&(n[e]||console.error(`MUI: The palette mode \`${e}\` is not supported.`)),sn(nt({common:nt({},Po),mode:e,primary:c({color:w,name:"primary"}),secondary:c({color:C,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:c({color:E,name:"error"}),warning:c({color:i,name:"warning"}),info:c({color:D,name:"info"}),success:c({color:p,name:"success"}),grey:$t,contrastThreshold:o,getContrastText:d,augmentColor:c,tonalOffset:h},n[e]),v)}const sx=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ax(t){return Math.round(t*1e5)/1e5}const Pd={textTransform:"uppercase"},Dd='"Roboto", "Helvetica", "Arial", sans-serif';function ux(t,e){const o=typeof e=="function"?e(t):e,{fontFamily:h=Dd,fontSize:v=14,fontWeightLight:w=300,fontWeightRegular:C=400,fontWeightMedium:E=500,fontWeightBold:D=700,htmlFontSize:p=16,allVariants:i,pxToRem:d}=o,c=fr(o,sx);process.env.NODE_ENV!=="production"&&(typeof v!="number"&&console.error("MUI: `fontSize` is required to be a number."),typeof p!="number"&&console.error("MUI: `htmlFontSize` is required to be a number."));const n=v/14,a=d||(g=>`${g/p*n}rem`),s=(g,u,m,y,b)=>nt({fontFamily:h,fontWeight:g,fontSize:a(u),lineHeight:m},h===Dd?{letterSpacing:`${ax(y/u)}em`}:{},b,i),l={h1:s(w,96,1.167,-1.5),h2:s(w,60,1.2,-.5),h3:s(C,48,1.167,0),h4:s(C,34,1.235,.25),h5:s(C,24,1.334,0),h6:s(E,20,1.6,.15),subtitle1:s(C,16,1.75,.15),subtitle2:s(E,14,1.57,.1),body1:s(C,16,1.5,.15),body2:s(C,14,1.43,.15),button:s(E,14,1.75,.4,Pd),caption:s(C,12,1.66,.4),overline:s(C,12,2.66,1,Pd),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sn(nt({htmlFontSize:p,pxToRem:a,fontFamily:h,fontSize:v,fontWeightLight:w,fontWeightRegular:C,fontWeightMedium:E,fontWeightBold:D},l),c,{clone:!1})}const lx=.2,cx=.14,fx=.12;function St(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${lx})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${cx})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${fx})`].join(",")}const hx=["none",St(0,2,1,-1,0,1,1,0,0,1,3,0),St(0,3,1,-2,0,2,2,0,0,1,5,0),St(0,3,3,-2,0,3,4,0,0,1,8,0),St(0,2,4,-1,0,4,5,0,0,1,10,0),St(0,3,5,-1,0,5,8,0,0,1,14,0),St(0,3,5,-1,0,6,10,0,0,1,18,0),St(0,4,5,-2,0,7,10,1,0,2,16,1),St(0,5,5,-3,0,8,10,1,0,3,14,2),St(0,5,6,-3,0,9,12,1,0,3,16,2),St(0,6,6,-3,0,10,14,1,0,4,18,3),St(0,6,7,-4,0,11,15,1,0,4,20,3),St(0,7,8,-4,0,12,17,2,0,5,22,4),St(0,7,8,-4,0,13,19,2,0,5,24,4),St(0,7,9,-4,0,14,21,2,0,5,26,4),St(0,8,9,-5,0,15,22,2,0,6,28,5),St(0,8,10,-5,0,16,24,2,0,6,30,5),St(0,8,11,-5,0,17,26,2,0,6,32,5),St(0,9,11,-5,0,18,28,2,0,7,34,6),St(0,9,12,-6,0,19,29,2,0,7,36,6),St(0,10,13,-6,0,20,31,3,0,8,38,7),St(0,10,13,-6,0,21,33,3,0,8,40,7),St(0,10,14,-6,0,22,35,3,0,8,42,7),St(0,11,14,-7,0,23,36,3,0,9,44,8),St(0,11,15,-7,0,24,38,3,0,9,46,8)],dx=["duration","easing","delay"],gx={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},px={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Md(t){return`${Math.round(t)}ms`}function vx(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function mx(t){const e=nt({},gx,t.easing),o=nt({},px,t.duration);return nt({getAutoHeightDuration:vx,create:(v=["all"],w={})=>{const{duration:C=o.standard,easing:E=e.easeInOut,delay:D=0}=w,p=fr(w,dx);if(process.env.NODE_ENV!=="production"){const i=c=>typeof c=="string",d=c=>!isNaN(parseFloat(c));!i(v)&&!Array.isArray(v)&&console.error('MUI: Argument "props" must be a string or Array.'),!d(C)&&!i(C)&&console.error(`MUI: Argument "duration" must be a number or a string but found ${C}.`),i(E)||console.error('MUI: Argument "easing" must be a string.'),!d(D)&&!i(D)&&console.error('MUI: Argument "delay" must be a number or a string.'),Object.keys(p).length!==0&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(p).join(",")}].`)}return(Array.isArray(v)?v:[v]).map(i=>`${i} ${typeof C=="string"?C:Md(C)} ${E} ${typeof D=="string"?D:Md(D)}`).join(",")}},t,{easing:e,duration:o})}const yx={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},_x=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function bx(t={},...e){const{mixins:o={},palette:h={},transitions:v={},typography:w={}}=t,C=fr(t,_x);if(t.vars)throw new Error(process.env.NODE_ENV!=="production"?"MUI: `vars` is a private field used for CSS variables support.\nPlease use another name.":wi(18));const E=ox(h),D=fu(t);let p=sn(D,{mixins:Qw(D.breakpoints,o),palette:E,shadows:hx.slice(),typography:ux(E,w),transitions:mx(v),zIndex:nt({},yx)});if(p=sn(p,C),p=e.reduce((i,d)=>sn(i,d),p),process.env.NODE_ENV!=="production"){const i=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],d=(c,n)=>{let a;for(a in c){const s=c[a];if(i.indexOf(a)!==-1&&Object.keys(s).length>0){if(process.env.NODE_ENV!=="production"){const l=uu("",a);console.error([`MUI: The \`${n}\` component increases the CSS specificity of the \`${a}\` internal state.`,"You can not override it like this: ",JSON.stringify(c,null,2),"",`Instead, you need to use the '&.${l}' syntax:`,JSON.stringify({root:{[`&.${l}`]:s}},null,2),"","https://mui.com/r/state-classes-guide"].join(`
`))}c[a]={}}}};Object.keys(p.components).forEach(c=>{const n=p.components[c].styleOverrides;n&&c.indexOf("Mui")===0&&d(n,c)})}return p.unstable_sxConfig=nt({},hs,C==null?void 0:C.unstable_sxConfig),p.unstable_sx=function(d){return ds({sx:d,theme:this})},p}const Rd=bx();function wx({props:t,name:e}){return U0({props:t,name:e,defaultTheme:Rd})}const xx=N0({defaultTheme:Rd,rootShouldForwardProp:t=>gs(t)&&t!=="classes"});function Cx(t){return uu("MuiSvgIcon",t)}Sm("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Sx=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Tx=t=>{const{color:e,fontSize:o,classes:h}=t,v={root:["root",e!=="inherit"&&`color${Kr(e)}`,`fontSize${Kr(o)}`]};return xm(v,Cx,h)},Ex=xx("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.color!=="inherit"&&e[`color${Kr(o.color)}`],e[`fontSize${Kr(o.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var o,h,v,w,C,E,D,p,i,d,c,n,a,s,l,g,u;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(o=t.transitions)==null||(h=o.create)==null?void 0:h.call(o,"fill",{duration:(v=t.transitions)==null||(w=v.duration)==null?void 0:w.shorter}),fontSize:{inherit:"inherit",small:((C=t.typography)==null||(E=C.pxToRem)==null?void 0:E.call(C,20))||"1.25rem",medium:((D=t.typography)==null||(p=D.pxToRem)==null?void 0:p.call(D,24))||"1.5rem",large:((i=t.typography)==null||(d=i.pxToRem)==null?void 0:d.call(i,35))||"2.1875rem"}[e.fontSize],color:(c=(n=(t.vars||t).palette)==null||(a=n[e.color])==null?void 0:a.main)!=null?c:{action:(s=(t.vars||t).palette)==null||(l=s.action)==null?void 0:l.active,disabled:(g=(t.vars||t).palette)==null||(u=g.action)==null?void 0:u.disabled,inherit:void 0}[e.color]}}),el=Ae.forwardRef(function(e,o){const h=wx({props:e,name:"MuiSvgIcon"}),{children:v,className:w,color:C="inherit",component:E="svg",fontSize:D="medium",htmlColor:p,inheritViewBox:i=!1,titleAccess:d,viewBox:c="0 0 24 24"}=h,n=fr(h,Sx),a=nt({},h,{color:C,component:E,fontSize:D,instanceFontSize:e.fontSize,inheritViewBox:i,viewBox:c}),s={};i||(s.viewBox=c);const l=Tx(a);return Y.jsxs(Ex,nt({as:E,className:yf(l.root,w),focusable:"false",color:p,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:o},s,n,{ownerState:a,children:[v,d?Y.jsx("title",{children:d}):null]}))});process.env.NODE_ENV!=="production"&&(el.propTypes={children:Qe.node,classes:Qe.object,className:Qe.string,color:Qe.oneOfType([Qe.oneOf(["inherit","action","disabled","primary","secondary","error","info","success","warning"]),Qe.string]),component:Qe.elementType,fontSize:Qe.oneOfType([Qe.oneOf(["inherit","large","medium","small"]),Qe.string]),htmlColor:Qe.string,inheritViewBox:Qe.bool,shapeRendering:Qe.string,sx:Qe.oneOfType([Qe.arrayOf(Qe.oneOfType([Qe.func,Qe.object,Qe.bool])),Qe.func,Qe.object]),titleAccess:Qe.string,viewBox:Qe.string}),el.muiName="SvgIcon";const kd=el;function Ox(t,e){function o(h,v){return Y.jsx(kd,nt({"data-testid":`${e}Icon`,ref:v},h,{children:t}))}return process.env.NODE_ENV!=="production"&&(o.displayName=`${e}Icon`),o.muiName=kd.muiName,Ae.memo(Ae.forwardRef(o))}const Ax=Lc(Object.freeze(Object.defineProperty({__proto__:null,capitalize:Kr,createChainedFunction:nm,createSvgIcon:Ox,debounce:im,deprecatedPropType:om,isMuiElement:sm,ownerDocument:tf,ownerWindow:am,requirePropFactory:um,setRef:rf,unstable_ClassNameGenerator:{configure:t=>{process.env.NODE_ENV!=="production"&&console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),cf.configure(t)}},unstable_useEnhancedEffect:nf,unstable_useId:cm,unsupportedProp:fm,useControlled:hm,useEventCallback:dm,useForkRef:gm,useIsFocusVisible:wm},Symbol.toStringTag,{value:"Module"})));var Id;function Ro(){return Id||(Id=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Ax}(Zu)),Zu}var Px=Mo;Object.defineProperty(Qu,"__esModule",{value:!0});var jd=Qu.default=void 0,Dx=Px(Ro()),Mx=Y,Rx=(0,Dx.default)((0,Mx.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");jd=Qu.default=Rx;function kx({bp:t,onSelect:e,onDelete:o}){const[h,v]=Te.useState(null),w=D=>{D.stopPropagation(),v(D.currentTarget)},C=async D=>{D.stopPropagation(),E(),o(t.id)},E=()=>{v(null)};return Y.jsxs(xe.ListItem,{button:!0,onClick:()=>e(t.contents),children:[Y.jsx(xe.ListItemText,{primary:t.contents}),Y.jsx(xe.IconButton,{onClick:w,children:Y.jsx(jd,{})}),Y.jsx(xe.Menu,{anchorEl:h,open:!!h,onClose:E,children:Y.jsx(xe.MenuItem,{onClick:C,children:""})})]})}function Ix({open:t,boilerplates:e,onSelect:o,onClose:h,onDelete:v}){const w=E=>{o(E),h()},C=async E=>{v(E)};return Y.jsxs(xe.Dialog,{fullWidth:!0,maxWidth:"xs",onClose:h,open:t,children:[Y.jsx(xe.DialogTitle,{children:"  "}),Y.jsx(xe.List,{sx:{pt:0},children:e.map(E=>Y.jsx(kx,{bp:E,onSelect:w,onDelete:C},E.id))})]})}const tl=xe.styled(mr)(()=>`
  &.inner-btn {
    gap: 10px !important;
    &.svg-20 {
      svg,path {
        width: 20px;
        height: 20px;
      }
    }
    &.flex-row {
      flex-direction: row !important;
    }
    &.flex-column {
      flex-direction: column !important;
    }
    &.bg-grey {
      .MuiIconButton-root {
        background: ${$t[200]};
      }
    }
    .MuiTypography-root {
      background: ${$t[200]};
      border-radius: 2px;
      padding: 0 6px;
      line-height: 18px;
    }
    svg,path {
      fill: #000000;
    }
  }
`),jx=xe.styled(xe.CircularProgress)`
  color: #2c62f6;
`,Lx=xe.styled(xe.Dialog)(()=>`
  .MuiDialog-paper {
    max-width: 660px;
    min-height: 480px;
  }
`),Fx=xe.styled(xe.Button)(()=>`
  width: 100%;
  height: 100%;
  padding: 0;
`),Bx=xe.styled(xe.DialogTitle)(()=>`
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;

  border-bottom: 1px solid #DEE2EC;
  display: flex;
  justify-content: space-between;

`),Nx=xe.styled(xe.DialogContent)(()=>`
  padding: 7px !important;
`),Ld=xe.styled(xe.IconButton)(()=>`
  padding: 0;
  

  &.delete-btn {
    position: absolute;
    top: 4px;
    right: 4px;
  }
`),Vx=xe.styled(xe.List)(()=>`
  display: flex;
  gap: 2px;
  flex-wrap: wrap;
  padding: 0;
`),Ux=xe.styled(xe.ListItem)(()=>`
  padding: 0;
  width: 106px;
  height: 106px;
`),Yx=xe.styled(xe.Box)(()=>`
  &.image-item {
    width: 106px;
    height: 106px;
    background: #EAEAEA;
    display: inline-flex;
    justify-content: center;
    position: relative;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }
`);var rl={},Wx=Mo;Object.defineProperty(rl,"__esModule",{value:!0});var Fd=rl.default=void 0,Hx=Wx(Ro()),zx=Y,Gx=(0,Hx.default)((0,zx.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");Fd=rl.default=Gx;function Xx({bp:t,onSelect:e,onDelete:o}){const h=async v=>{v.stopPropagation(),o(t.id)};return Y.jsx(Ux,{children:Y.jsxs(Yx,{className:"image-item",children:[Y.jsx(Fx,{onClick:()=>e(t.contents),children:t.contents.thumbnailUrl?Y.jsx("img",{src:t.contents.thumbnailUrl}):Y.jsx(jx,{})}),Y.jsx(Ld,{onClick:h,className:"delete-btn",children:Y.jsx(jt,{variant:"delete"})})]})})}function $x({open:t,boilerplates:e,onSelect:o,onClose:h,onDelete:v}){const w=E=>{o(E.originalUrl),h()},C=async E=>{v(E)};return Y.jsxs(Lx,{maxWidth:"xs",onClose:h,open:t,children:[Y.jsxs(Bx,{children:["  ",Y.jsx(Ld,{"aria-label":"close",onClick:h,children:Y.jsx(Fd,{})})]}),Y.jsx(Nx,{children:Y.jsx(Vx,{children:e.map(E=>Y.jsx(Xx,{bp:E,onSelect:w,onDelete:C},E.id))})})]})}const qx=Eo(()=>{const{core:t,boilerplate:e,toolbarPosition:o}=Ut(),{toolbarVerticalPosition:h}=Do,[v,w]=Te.useState(null),[C,E]=Te.useState(!1),[D,p]=Te.useState(!1),[i,d]=Te.useState([]),[c,n]=Te.useState([]),{tool:a,setTool:s}=gn(),l=a===He.SIMPLE_INPUT,g=Te.useCallback(async()=>{if(!e||e&&!e[0])return;const $=await e[0].onLoadBoilerplate();d($)},[e]),u=Te.useCallback(async()=>{if(!e||e&&!e[1])return;const $=await e[1].onLoadBoilerplate();n($)},[e]),m=$=>{if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");s(He.SIMPLE_INPUT),w($.currentTarget)},y=$=>{t.addText($,void 0,!0),E(!1),s(He.PAN)},b=async $=>{e&&await e[0].onDeleteBoilerplate($),d(ae=>ae.filter(ce=>ce.id!==$))},x=async()=>{!e||e&&!e[0]||(await g(),E($=>!$))},T=()=>{w(null),s(He.PAN)},M=$=>{t.addImage($),p(!1),s(He.PAN)},I=async $=>{e&&await e[1].onDeleteBoilerplate($),n(ae=>ae.filter(ce=>ce.id!==$))},R=async()=>{!e||e&&!e[1]||(await u(),p($=>!$))},W=!!v,K=W?"simple-popover":void 0;return Y.jsxs("div",{style:{position:"relative"},children:[Y.jsx(xe.Popover,{id:K,open:W,anchorEl:v,onClose:T,anchorOrigin:o==="bottom"?h==="bottom"?{vertical:-15,horizontal:"left"}:{vertical:60,horizontal:"left"}:{vertical:"top",horizontal:-20},transformOrigin:o==="bottom"?h==="bottom"?{vertical:"bottom",horizontal:"left"}:{vertical:"top",horizontal:"left"}:{vertical:"top",horizontal:"right"},PaperProps:{sx:{background:"none",boxShadow:"none"}},children:Y.jsxs("div",{style:o==="bottom"?{display:"flex",flexDirection:"column",gap:"8px"}:{display:"flex",flexDirection:"row",gap:"8px"},children:[Y.jsx(tl,{className:`inner-btn ${o==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>Y.jsx(jt,{variant:"bookmark_text"}),onClick:x,disableToolbar:!0,tooltip:" "}),Y.jsx(tl,{className:`inner-btn ${o==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>Y.jsx(jt,{variant:"bookmark_image"}),onClick:R,disableToolbar:!0,tooltip:" "})]})}),Y.jsx(tl,{selected:l,disableToolbar:!0,Icon:Kw,onClick:m,tooltip:""}),Y.jsx(Ix,{open:C,onClose:()=>{E(!1)},onSelect:y,onDelete:b,boilerplates:i}),Y.jsx($x,{open:D,onClose:()=>{p(!1)},onSelect:M,onDelete:I,boilerplates:c})]})});function Kx(){const{core:t}=Ut(),{tool:e}=gn(),[o,h]=Te.useState(e?t.getToolConfig(e):null),[v,w]=Te.useState(t.getHistoryInfo()),[C,E]=Te.useState(t.available),D=d=>{t.undo()},p=d=>{t.redo()};Te.useEffect(()=>{e&&h(t.getToolConfig(e))},[t,e]),Te.useEffect(()=>t.on(nr.Event.AVAILABILITY_CHANGE,E),[t]),Te.useEffect(()=>t.on(nr.Event.HISTORY_CHANGE,w),[t]);const i=d=>{const c=t.updateToolConfig(e,{color:d});h(c)};return Y.jsx(Xu,{leadingItems:Y.jsxs(Y.Fragment,{children:[Y.jsx(xw,{}),Y.jsx(Cw,{}),Y.jsx(ww,{}),Y.jsx(Ew,{}),Y.jsx(Rw,{}),Y.jsx(Pw,{}),Y.jsx(Aw,{}),Y.jsx(qw,{}),Y.jsx(qx,{})]}),palette:Y.jsx(dd,{value:o==null?void 0:o.color,onChange:i}),trailingItems:Y.jsxs(Y.Fragment,{children:[Y.jsx(mr,{disabled:!C||v.index<=0,Icon:Gw,onClick:D,tooltip:""}),Y.jsx(mr,{disabled:!C||v.index>=v.histories-1,Icon:Xw,onClick:p,tooltip:""}),Y.jsx(zw,{})]})})}var nl={},Qx=Mo;Object.defineProperty(nl,"__esModule",{value:!0});var Bd=nl.default=void 0,Zx=Qx(Ro()),Jx=Y,eC=(0,Zx.default)((0,Jx.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"}),"TextDecrease");Bd=nl.default=eC;var il={},tC=Mo;Object.defineProperty(il,"__esModule",{value:!0});var Nd=il.default=void 0,rC=tC(Ro()),nC=Y,iC=(0,rC.default)((0,nC.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"}),"TextIncrease");Nd=il.default=iC;var ol={},oC=Mo;Object.defineProperty(ol,"__esModule",{value:!0});var sl=ol.default=void 0,sC=oC(Ro()),aC=Y,uC=(0,sC.default)((0,aC.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");sl=ol.default=uC;const Vd=xe.styled(mr)(()=>`
  &.save-btn {
    svg, path {
      width: 20px;
      height: 20px;
    }
  }
  &.delete-btn {
    margin-top: 16px;
  }
`),lC=({value:t,onChange:e})=>{const{toolbarPosition:o}=Ut();return Y.jsxs(xe.Stack,{spacing:2,direction:o==="bottom"?"row":"column-reverse",sx:{mb:1,...o==="bottom"&&{width:200},...o==="right"&&{height:200}},alignItems:"center",children:[Y.jsx(Bd,{}),Y.jsx(xe.Slider,{orientation:o==="bottom"?"horizontal":"vertical",value:t,onChange:e}),Y.jsx(Nd,{})]})};function cC(){const{core:t,boilerplate:e,toolbarPosition:o}=Ut();if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const[h,v]=Te.useState(t.getSelectedTextSize()),[w,C]=Te.useState(t.getSelectedTextColor()),E=()=>{t.deleteSelectedObject()},D=d=>{const c=d.target.value;t.changeSelectedTextSize(c),v(c)},p=d=>{t.changeSelectedTextColor(d),C(d)},i=async()=>{await e[0].onSaveBoilerplate(t.getSelectedTextContents())};return Y.jsx(Y.Fragment,{children:Y.jsx(Xu,{leadingItems:Y.jsxs(Y.Fragment,{children:[Y.jsx(lC,{value:h,onChange:D}),Y.jsx(Vd,{className:"save-btn",Icon:()=>Y.jsx(jt,{variant:"library_add"}),onClick:i,tooltip:o==="bottom"?"  ":Y.jsxs(Y.Fragment,{children:["  ",Y.jsx("br",{}),""]}),disableToolbar:!0})]}),palette:Y.jsx(dd,{value:w,onChange:p}),trailingItems:Y.jsx(Vd,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:sl,onClick:E})})})}function fC(t){function e(B,F,L,G,O){for(var k=0,V=0,z=0,Z=0,J,U,he=0,ie=0,ee,Q=ee=J=0,se=0,de=0,ue=0,pe=0,be=L.length,Ie=be-1,Pe,oe="",Oe="",Fe="",Ne="",Xe;se<be;){if(U=L.charCodeAt(se),se===Ie&&V+Z+z+k!==0&&(V!==0&&(U=V===47?10:47),Z=z=k=0,be++,Ie++),V+Z+z+k===0){if(se===Ie&&(0<de&&(oe=oe.replace(c,"")),0<oe.trim().length)){switch(U){case 32:case 9:case 59:case 13:case 10:break;default:oe+=L.charAt(se)}U=59}switch(U){case 123:for(oe=oe.trim(),J=oe.charCodeAt(0),ee=1,pe=++se;se<be;){switch(U=L.charCodeAt(se)){case 123:ee++;break;case 125:ee--;break;case 47:switch(U=L.charCodeAt(se+1)){case 42:case 47:e:{for(Q=se+1;Q<Ie;++Q)switch(L.charCodeAt(Q)){case 47:if(U===42&&L.charCodeAt(Q-1)===42&&se+2!==Q){se=Q+1;break e}break;case 10:if(U===47){se=Q+1;break e}}se=Q}}break;case 91:U++;case 40:U++;case 34:case 39:for(;se++<Ie&&L.charCodeAt(se)!==U;);}if(ee===0)break;se++}switch(ee=L.substring(pe,se),J===0&&(J=(oe=oe.replace(d,"").trim()).charCodeAt(0)),J){case 64:switch(0<de&&(oe=oe.replace(c,"")),U=oe.charCodeAt(1),U){case 100:case 109:case 115:case 45:de=F;break;default:de=fe}if(ee=e(F,de,ee,U,O+1),pe=ee.length,0<ye&&(de=o(fe,oe,ue),Xe=E(3,ee,de,F,$,K,pe,U,O,G),oe=de.join(""),Xe!==void 0&&(pe=(ee=Xe.trim()).length)===0&&(U=0,ee="")),0<pe)switch(U){case 115:oe=oe.replace(x,C);case 100:case 109:case 45:ee=oe+"{"+ee+"}";break;case 107:oe=oe.replace(u,"$1 $2"),ee=oe+"{"+ee+"}",ee=ce===1||ce===2&&w("@"+ee,3)?"@-webkit-"+ee+"@"+ee:"@"+ee;break;default:ee=oe+ee,G===112&&(ee=(Oe+=ee,""))}else ee="";break;default:ee=e(F,o(F,oe,ue),ee,G,O+1)}Fe+=ee,ee=ue=de=Q=J=0,oe="",U=L.charCodeAt(++se);break;case 125:case 59:if(oe=(0<de?oe.replace(c,""):oe).trim(),1<(pe=oe.length))switch(Q===0&&(J=oe.charCodeAt(0),J===45||96<J&&123>J)&&(pe=(oe=oe.replace(" ",":")).length),0<ye&&(Xe=E(1,oe,F,B,$,K,Oe.length,G,O,G))!==void 0&&(pe=(oe=Xe.trim()).length)===0&&(oe="\0\0"),J=oe.charCodeAt(0),U=oe.charCodeAt(1),J){case 0:break;case 64:if(U===105||U===99){Ne+=oe+L.charAt(se);break}default:oe.charCodeAt(pe-1)!==58&&(Oe+=v(oe,J,U,oe.charCodeAt(2)))}ue=de=Q=J=0,oe="",U=L.charCodeAt(++se)}}switch(U){case 13:case 10:V===47?V=0:1+J===0&&G!==107&&0<oe.length&&(de=1,oe+="\0"),0<ye*ne&&E(0,oe,F,B,$,K,Oe.length,G,O,G),K=1,$++;break;case 59:case 125:if(V+Z+z+k===0){K++;break}default:switch(K++,Pe=L.charAt(se),U){case 9:case 32:if(Z+k+V===0)switch(he){case 44:case 58:case 9:case 32:Pe="";break;default:U!==32&&(Pe=" ")}break;case 0:Pe="\\0";break;case 12:Pe="\\f";break;case 11:Pe="\\v";break;case 38:Z+V+k===0&&(de=ue=1,Pe="\f"+Pe);break;case 108:if(Z+V+k+ae===0&&0<Q)switch(se-Q){case 2:he===112&&L.charCodeAt(se-3)===58&&(ae=he);case 8:ie===111&&(ae=ie)}break;case 58:Z+V+k===0&&(Q=se);break;case 44:V+z+Z+k===0&&(de=1,Pe+="\r");break;case 34:case 39:V===0&&(Z=Z===U?0:Z===0?U:Z);break;case 91:Z+V+z===0&&k++;break;case 93:Z+V+z===0&&k--;break;case 41:Z+V+k===0&&z--;break;case 40:if(Z+V+k===0){if(J===0)switch(2*he+3*ie){case 533:break;default:J=1}z++}break;case 64:V+z+Z+k+Q+ee===0&&(ee=1);break;case 42:case 47:if(!(0<Z+k+z))switch(V){case 0:switch(2*U+3*L.charCodeAt(se+1)){case 235:V=47;break;case 220:pe=se,V=42}break;case 42:U===47&&he===42&&pe+2!==se&&(L.charCodeAt(pe+2)===33&&(Oe+=L.substring(pe,se+1)),Pe="",V=0)}}V===0&&(oe+=Pe)}ie=he,he=U,se++}if(pe=Oe.length,0<pe){if(de=F,0<ye&&(Xe=E(2,Oe,de,B,$,K,pe,G,O,G),Xe!==void 0&&(Oe=Xe).length===0))return Ne+Oe+Fe;if(Oe=de.join(",")+"{"+Oe+"}",ce*ae!==0){switch(ce!==2||w(Oe,2)||(ae=0),ae){case 111:Oe=Oe.replace(y,":-moz-$1")+Oe;break;case 112:Oe=Oe.replace(m,"::-webkit-input-$1")+Oe.replace(m,"::-moz-$1")+Oe.replace(m,":-ms-input-$1")+Oe}ae=0}}return Ne+Oe+Fe}function o(B,F,L){var G=F.trim().split(l);F=G;var O=G.length,k=B.length;switch(k){case 0:case 1:var V=0;for(B=k===0?"":B[0]+" ";V<O;++V)F[V]=h(B,F[V],L).trim();break;default:var z=V=0;for(F=[];V<O;++V)for(var Z=0;Z<k;++Z)F[z++]=h(B[Z]+" ",G[V],L).trim()}return F}function h(B,F,L){var G=F.charCodeAt(0);switch(33>G&&(G=(F=F.trim()).charCodeAt(0)),G){case 38:return F.replace(g,"$1"+B.trim());case 58:return B.trim()+F.replace(g,"$1"+B.trim());default:if(0<1*L&&0<F.indexOf("\f"))return F.replace(g,(B.charCodeAt(0)===58?"":"$1")+B.trim())}return B+F}function v(B,F,L,G){var O=B+";",k=2*F+3*L+4*G;if(k===944){B=O.indexOf(":",9)+1;var V=O.substring(B,O.length-1).trim();return V=O.substring(0,B).trim()+V+";",ce===1||ce===2&&w(V,1)?"-webkit-"+V+V:V}if(ce===0||ce===2&&!w(O,1))return O;switch(k){case 1015:return O.charCodeAt(10)===97?"-webkit-"+O+O:O;case 951:return O.charCodeAt(3)===116?"-webkit-"+O+O:O;case 963:return O.charCodeAt(5)===110?"-webkit-"+O+O:O;case 1009:if(O.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+O+O;case 978:return"-webkit-"+O+"-moz-"+O+O;case 1019:case 983:return"-webkit-"+O+"-moz-"+O+"-ms-"+O+O;case 883:if(O.charCodeAt(8)===45)return"-webkit-"+O+O;if(0<O.indexOf("image-set(",11))return O.replace(W,"$1-webkit-$2")+O;break;case 932:if(O.charCodeAt(4)===45)switch(O.charCodeAt(5)){case 103:return"-webkit-box-"+O.replace("-grow","")+"-webkit-"+O+"-ms-"+O.replace("grow","positive")+O;case 115:return"-webkit-"+O+"-ms-"+O.replace("shrink","negative")+O;case 98:return"-webkit-"+O+"-ms-"+O.replace("basis","preferred-size")+O}return"-webkit-"+O+"-ms-"+O+O;case 964:return"-webkit-"+O+"-ms-flex-"+O+O;case 1023:if(O.charCodeAt(8)!==99)break;return V=O.substring(O.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+V+"-webkit-"+O+"-ms-flex-pack"+V+O;case 1005:return a.test(O)?O.replace(n,":-webkit-")+O.replace(n,":-moz-")+O:O;case 1e3:switch(V=O.substring(13).trim(),F=V.indexOf("-")+1,V.charCodeAt(0)+V.charCodeAt(F)){case 226:V=O.replace(b,"tb");break;case 232:V=O.replace(b,"tb-rl");break;case 220:V=O.replace(b,"lr");break;default:return O}return"-webkit-"+O+"-ms-"+V+O;case 1017:if(O.indexOf("sticky",9)===-1)break;case 975:switch(F=(O=B).length-10,V=(O.charCodeAt(F)===33?O.substring(0,F):O).substring(B.indexOf(":",7)+1).trim(),k=V.charCodeAt(0)+(V.charCodeAt(7)|0)){case 203:if(111>V.charCodeAt(8))break;case 115:O=O.replace(V,"-webkit-"+V)+";"+O;break;case 207:case 102:O=O.replace(V,"-webkit-"+(102<k?"inline-":"")+"box")+";"+O.replace(V,"-webkit-"+V)+";"+O.replace(V,"-ms-"+V+"box")+";"+O}return O+";";case 938:if(O.charCodeAt(5)===45)switch(O.charCodeAt(6)){case 105:return V=O.replace("-items",""),"-webkit-"+O+"-webkit-box-"+V+"-ms-flex-"+V+O;case 115:return"-webkit-"+O+"-ms-flex-item-"+O.replace(M,"")+O;default:return"-webkit-"+O+"-ms-flex-line-pack"+O.replace("align-content","").replace(M,"")+O}break;case 973:case 989:if(O.charCodeAt(3)!==45||O.charCodeAt(4)===122)break;case 931:case 953:if(R.test(B)===!0)return(V=B.substring(B.indexOf(":")+1)).charCodeAt(0)===115?v(B.replace("stretch","fill-available"),F,L,G).replace(":fill-available",":stretch"):O.replace(V,"-webkit-"+V)+O.replace(V,"-moz-"+V.replace("fill-",""))+O;break;case 962:if(O="-webkit-"+O+(O.charCodeAt(5)===102?"-ms-"+O:"")+O,L+G===211&&O.charCodeAt(13)===105&&0<O.indexOf("transform",10))return O.substring(0,O.indexOf(";",27)+1).replace(s,"$1-webkit-$2")+O}return O}function w(B,F){var L=B.indexOf(F===1?":":"{"),G=B.substring(0,F!==3?L:10);return L=B.substring(L+1,B.length-1),Ee(F!==2?G:G.replace(I,"$1"),L,F)}function C(B,F){var L=v(F,F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2));return L!==F+";"?L.replace(T," or ($1)").substring(4):"("+F+")"}function E(B,F,L,G,O,k,V,z,Z,J){for(var U=0,he=F,ie;U<ye;++U)switch(ie=le[U].call(i,B,he,L,G,O,k,V,z,Z,J)){case void 0:case!1:case!0:case null:break;default:he=ie}if(he!==F)return he}function D(B){switch(B){case void 0:case null:ye=le.length=0;break;default:if(typeof B=="function")le[ye++]=B;else if(typeof B=="object")for(var F=0,L=B.length;F<L;++F)D(B[F]);else ne=!!B|0}return D}function p(B){return B=B.prefix,B!==void 0&&(Ee=null,B?typeof B!="function"?ce=1:(ce=2,Ee=B):ce=0),p}function i(B,F){var L=B;if(33>L.charCodeAt(0)&&(L=L.trim()),P=L,L=[P],0<ye){var G=E(-1,F,L,L,$,K,0,0,0,0);G!==void 0&&typeof G=="string"&&(F=G)}var O=e(fe,L,F,0,0);return 0<ye&&(G=E(-2,O,L,L,$,K,O.length,0,0,0),G!==void 0&&(O=G)),P="",ae=0,K=$=1,O}var d=/^\0+/g,c=/[\0\r\f]/g,n=/: */g,a=/zoo|gra/,s=/([,: ])(transform)/g,l=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,u=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,y=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,M=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,R=/stretch|:\s*\w+\-(?:conte|avail)/,W=/([^-])(image-set\()/,K=1,$=1,ae=0,ce=1,fe=[],le=[],ye=0,Ee=null,ne=0,P="";return i.use=D,i.set=p,t!==void 0&&p(t),i}var hC={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dC=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ud=Tm(function(t){return dC.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),al={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function gC(){if(Yd)return dt;Yd=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,o=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,D=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,i=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,l=t?Symbol.for("react.fundamental"):60117,g=t?Symbol.for("react.responder"):60118,u=t?Symbol.for("react.scope"):60119;function m(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case e:switch(b=b.type,b){case D:case p:case h:case w:case v:case d:return b;default:switch(b=b&&b.$$typeof,b){case E:case i:case a:case n:case C:return b;default:return x}}case o:return x}}}function y(b){return m(b)===p}return dt.AsyncMode=D,dt.ConcurrentMode=p,dt.ContextConsumer=E,dt.ContextProvider=C,dt.Element=e,dt.ForwardRef=i,dt.Fragment=h,dt.Lazy=a,dt.Memo=n,dt.Portal=o,dt.Profiler=w,dt.StrictMode=v,dt.Suspense=d,dt.isAsyncMode=function(b){return y(b)||m(b)===D},dt.isConcurrentMode=y,dt.isContextConsumer=function(b){return m(b)===E},dt.isContextProvider=function(b){return m(b)===C},dt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},dt.isForwardRef=function(b){return m(b)===i},dt.isFragment=function(b){return m(b)===h},dt.isLazy=function(b){return m(b)===a},dt.isMemo=function(b){return m(b)===n},dt.isPortal=function(b){return m(b)===o},dt.isProfiler=function(b){return m(b)===w},dt.isStrictMode=function(b){return m(b)===v},dt.isSuspense=function(b){return m(b)===d},dt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===h||b===p||b===w||b===v||b===d||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===a||b.$$typeof===n||b.$$typeof===C||b.$$typeof===E||b.$$typeof===i||b.$$typeof===l||b.$$typeof===g||b.$$typeof===u||b.$$typeof===s)},dt.typeOf=m,dt}var gt={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function pC(){return Wd||(Wd=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,o=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,D=t?Symbol.for("react.async_mode"):60111,p=t?Symbol.for("react.concurrent_mode"):60111,i=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,l=t?Symbol.for("react.fundamental"):60117,g=t?Symbol.for("react.responder"):60118,u=t?Symbol.for("react.scope"):60119;function m(U){return typeof U=="string"||typeof U=="function"||U===h||U===p||U===w||U===v||U===d||U===c||typeof U=="object"&&U!==null&&(U.$$typeof===a||U.$$typeof===n||U.$$typeof===C||U.$$typeof===E||U.$$typeof===i||U.$$typeof===l||U.$$typeof===g||U.$$typeof===u||U.$$typeof===s)}function y(U){if(typeof U=="object"&&U!==null){var he=U.$$typeof;switch(he){case e:var ie=U.type;switch(ie){case D:case p:case h:case w:case v:case d:return ie;default:var ee=ie&&ie.$$typeof;switch(ee){case E:case i:case a:case n:case C:return ee;default:return he}}case o:return he}}}var b=D,x=p,T=E,M=C,I=e,R=i,W=h,K=a,$=n,ae=o,ce=w,fe=v,le=d,ye=!1;function Ee(U){return ye||(ye=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ne(U)||y(U)===D}function ne(U){return y(U)===p}function P(U){return y(U)===E}function B(U){return y(U)===C}function F(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){return y(U)===i}function G(U){return y(U)===h}function O(U){return y(U)===a}function k(U){return y(U)===n}function V(U){return y(U)===o}function z(U){return y(U)===w}function Z(U){return y(U)===v}function J(U){return y(U)===d}gt.AsyncMode=b,gt.ConcurrentMode=x,gt.ContextConsumer=T,gt.ContextProvider=M,gt.Element=I,gt.ForwardRef=R,gt.Fragment=W,gt.Lazy=K,gt.Memo=$,gt.Portal=ae,gt.Profiler=ce,gt.StrictMode=fe,gt.Suspense=le,gt.isAsyncMode=Ee,gt.isConcurrentMode=ne,gt.isContextConsumer=P,gt.isContextProvider=B,gt.isElement=F,gt.isForwardRef=L,gt.isFragment=G,gt.isLazy=O,gt.isMemo=k,gt.isPortal=V,gt.isProfiler=z,gt.isStrictMode=Z,gt.isSuspense=J,gt.isValidElementType=m,gt.typeOf=y}()),gt}process.env.NODE_ENV==="production"?al.exports=gC():al.exports=pC();var vC=al.exports,ul=vC,mC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},yC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_C={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hd={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ll={};ll[ul.ForwardRef]=_C,ll[ul.Memo]=Hd;function zd(t){return ul.isMemo(t)?Hd:ll[t.$$typeof]||mC}var bC=Object.defineProperty,wC=Object.getOwnPropertyNames,Gd=Object.getOwnPropertySymbols,xC=Object.getOwnPropertyDescriptor,CC=Object.getPrototypeOf,Xd=Object.prototype;function $d(t,e,o){if(typeof e!="string"){if(Xd){var h=CC(e);h&&h!==Xd&&$d(t,h,o)}var v=wC(e);Gd&&(v=v.concat(Gd(e)));for(var w=zd(t),C=zd(e),E=0;E<v.length;++E){var D=v[E];if(!yC[D]&&!(o&&o[D])&&!(C&&C[D])&&!(w&&w[D])){var p=xC(e,D);try{bC(t,D,p)}catch{}}}}return t}var SC=$d;const TC=jc(SC);function dn(){return(dn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(t[h]=o[h])}return t}).apply(this,arguments)}var qd=function(t,e){for(var o=[t[0]],h=0,v=e.length;h<v;h+=1)o.push(e[h],t[h+1]);return o},cl=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!ro.typeOf(t)},Ks=Object.freeze([]),Mn=Object.freeze({});function ko(t){return typeof t=="function"}function fl(t){return process.env.NODE_ENV!=="production"&&typeof t=="string"&&t||t.displayName||t.name||"Component"}function hl(t){return t&&typeof t.styledComponentId=="string"}var ji=typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",dl=typeof window<"u"&&"HTMLElement"in window,EC=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:process.env.NODE_ENV!=="production")),OC=process.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`}:{};function AC(){for(var t=arguments.length<=0?void 0:arguments[0],e=[],o=1,h=arguments.length;o<h;o+=1)e.push(o<0||arguments.length<=o?void 0:arguments[o]);return e.forEach(function(v){t=t.replace(/%[a-z]/,v)}),t}function Li(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),h=1;h<e;h++)o[h-1]=arguments[h];throw process.env.NODE_ENV==="production"?new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(o.length>0?" Args: "+o.join(", "):"")):new Error(AC.apply(void 0,[OC[t]].concat(o)).trim())}var PC=function(){function t(o){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=o}var e=t.prototype;return e.indexOfGroup=function(o){for(var h=0,v=0;v<o;v++)h+=this.groupSizes[v];return h},e.insertRules=function(o,h){if(o>=this.groupSizes.length){for(var v=this.groupSizes,w=v.length,C=w;o>=C;)(C<<=1)<0&&Li(16,""+o);this.groupSizes=new Uint32Array(C),this.groupSizes.set(v),this.length=C;for(var E=w;E<C;E++)this.groupSizes[E]=0}for(var D=this.indexOfGroup(o+1),p=0,i=h.length;p<i;p++)this.tag.insertRule(D,h[p])&&(this.groupSizes[o]++,D++)},e.clearGroup=function(o){if(o<this.length){var h=this.groupSizes[o],v=this.indexOfGroup(o),w=v+h;this.groupSizes[o]=0;for(var C=v;C<w;C++)this.tag.deleteRule(v)}},e.getGroup=function(o){var h="";if(o>=this.length||this.groupSizes[o]===0)return h;for(var v=this.groupSizes[o],w=this.indexOfGroup(o),C=w+v,E=w;E<C;E++)h+=this.tag.getRule(E)+`/*!sc*/
`;return h},t}(),Qs=new Map,Zs=new Map,Io=1,Js=function(t){if(Qs.has(t))return Qs.get(t);for(;Zs.has(Io);)Io++;var e=Io++;return process.env.NODE_ENV!=="production"&&((0|e)<0||e>1<<30)&&Li(16,""+e),Qs.set(t,e),Zs.set(e,t),e},DC=function(t){return Zs.get(t)},MC=function(t,e){e>=Io&&(Io=e+1),Qs.set(t,e),Zs.set(e,t)},RC="style["+ji+'][data-styled-version="5.3.11"]',kC=new RegExp("^"+ji+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),IC=function(t,e,o){for(var h,v=o.split(","),w=0,C=v.length;w<C;w++)(h=v[w])&&t.registerName(e,h)},jC=function(t,e){for(var o=(e.textContent||"").split(`/*!sc*/
`),h=[],v=0,w=o.length;v<w;v++){var C=o[v].trim();if(C){var E=C.match(kC);if(E){var D=0|parseInt(E[1],10),p=E[2];D!==0&&(MC(p,D),IC(t,p,E[3]),t.getTag().insertRules(D,h)),h.length=0}else h.push(C)}}},LC=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Kd=function(t){var e=document.head,o=t||e,h=document.createElement("style"),v=function(E){for(var D=E.childNodes,p=D.length;p>=0;p--){var i=D[p];if(i&&i.nodeType===1&&i.hasAttribute(ji))return i}}(o),w=v!==void 0?v.nextSibling:null;h.setAttribute(ji,"active"),h.setAttribute("data-styled-version","5.3.11");var C=LC();return C&&h.setAttribute("nonce",C),o.insertBefore(h,w),h},FC=function(){function t(o){var h=this.element=Kd(o);h.appendChild(document.createTextNode("")),this.sheet=function(v){if(v.sheet)return v.sheet;for(var w=document.styleSheets,C=0,E=w.length;C<E;C++){var D=w[C];if(D.ownerNode===v)return D}Li(17)}(h),this.length=0}var e=t.prototype;return e.insertRule=function(o,h){try{return this.sheet.insertRule(h,o),this.length++,!0}catch{return!1}},e.deleteRule=function(o){this.sheet.deleteRule(o),this.length--},e.getRule=function(o){var h=this.sheet.cssRules[o];return h!==void 0&&typeof h.cssText=="string"?h.cssText:""},t}(),BC=function(){function t(o){var h=this.element=Kd(o);this.nodes=h.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(o,h){if(o<=this.length&&o>=0){var v=document.createTextNode(h),w=this.nodes[o];return this.element.insertBefore(v,w||null),this.length++,!0}return!1},e.deleteRule=function(o){this.element.removeChild(this.nodes[o]),this.length--},e.getRule=function(o){return o<this.length?this.nodes[o].textContent:""},t}(),NC=function(){function t(o){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(o,h){return o<=this.length&&(this.rules.splice(o,0,h),this.length++,!0)},e.deleteRule=function(o){this.rules.splice(o,1),this.length--},e.getRule=function(o){return o<this.length?this.rules[o]:""},t}(),Qd=dl,VC={isServer:!dl,useCSSOMInjection:!EC},Zd=function(){function t(o,h,v){o===void 0&&(o=Mn),h===void 0&&(h={}),this.options=dn({},VC,{},o),this.gs=h,this.names=new Map(v),this.server=!!o.isServer,!this.server&&dl&&Qd&&(Qd=!1,function(w){for(var C=document.querySelectorAll(RC),E=0,D=C.length;E<D;E++){var p=C[E];p&&p.getAttribute(ji)!=="active"&&(jC(w,p),p.parentNode&&p.parentNode.removeChild(p))}}(this))}t.registerId=function(o){return Js(o)};var e=t.prototype;return e.reconstructWithOptions=function(o,h){return h===void 0&&(h=!0),new t(dn({},this.options,{},o),this.gs,h&&this.names||void 0)},e.allocateGSInstance=function(o){return this.gs[o]=(this.gs[o]||0)+1},e.getTag=function(){return this.tag||(this.tag=(v=(h=this.options).isServer,w=h.useCSSOMInjection,C=h.target,o=v?new NC(C):w?new FC(C):new BC(C),new PC(o)));var o,h,v,w,C},e.hasNameForId=function(o,h){return this.names.has(o)&&this.names.get(o).has(h)},e.registerName=function(o,h){if(Js(o),this.names.has(o))this.names.get(o).add(h);else{var v=new Set;v.add(h),this.names.set(o,v)}},e.insertRules=function(o,h,v){this.registerName(o,h),this.getTag().insertRules(Js(o),v)},e.clearNames=function(o){this.names.has(o)&&this.names.get(o).clear()},e.clearRules=function(o){this.getTag().clearGroup(Js(o)),this.clearNames(o)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(o){for(var h=o.getTag(),v=h.length,w="",C=0;C<v;C++){var E=DC(C);if(E!==void 0){var D=o.names.get(E),p=h.getGroup(C);if(D&&p&&D.size){var i=ji+".g"+C+'[id="'+E+'"]',d="";D!==void 0&&D.forEach(function(c){c.length>0&&(d+=c+",")}),w+=""+p+i+'{content:"'+d+`"}/*!sc*/
`}}}return w}(this)},t}(),UC=/(a)(d)/gi,Jd=function(t){return String.fromCharCode(t+(t>25?39:97))};function gl(t){var e,o="";for(e=Math.abs(t);e>52;e=e/52|0)o=Jd(e%52)+o;return(Jd(e%52)+o).replace(UC,"$1-$2")}var ui=function(t,e){for(var o=e.length;o;)t=33*t^e.charCodeAt(--o);return t},eg=function(t){return ui(5381,t)};function YC(t){for(var e=0;e<t.length;e+=1){var o=t[e];if(ko(o)&&!hl(o))return!1}return!0}var WC=eg("5.3.11"),HC=function(){function t(e,o,h){this.rules=e,this.staticRulesId="",this.isStatic=process.env.NODE_ENV==="production"&&(h===void 0||h.isStatic)&&YC(e),this.componentId=o,this.baseHash=ui(WC,o),this.baseStyle=h,Zd.registerId(o)}return t.prototype.generateAndInjectStyles=function(e,o,h){var v=this.componentId,w=[];if(this.baseStyle&&w.push(this.baseStyle.generateAndInjectStyles(e,o,h)),this.isStatic&&!h.hash)if(this.staticRulesId&&o.hasNameForId(v,this.staticRulesId))w.push(this.staticRulesId);else{var C=Fi(this.rules,e,o,h).join(""),E=gl(ui(this.baseHash,C)>>>0);if(!o.hasNameForId(v,E)){var D=h(C,"."+E,void 0,v);o.insertRules(v,E,D)}w.push(E),this.staticRulesId=E}else{for(var p=this.rules.length,i=ui(this.baseHash,h.hash),d="",c=0;c<p;c++){var n=this.rules[c];if(typeof n=="string")d+=n,process.env.NODE_ENV!=="production"&&(i=ui(i,n+c));else if(n){var a=Fi(n,e,o,h),s=Array.isArray(a)?a.join(""):a;i=ui(i,s+c),d+=s}}if(d){var l=gl(i>>>0);if(!o.hasNameForId(v,l)){var g=h(d,"."+l,void 0,v);o.insertRules(v,l,g)}w.push(l)}}return w.join(" ")},t}(),zC=/^\s*\/\/.*$/gm,GC=[":","[",".","#"];function XC(t){var e,o,h,v,w=t===void 0?Mn:t,C=w.options,E=C===void 0?Mn:C,D=w.plugins,p=D===void 0?Ks:D,i=new fC(E),d=[],c=function(s){function l(g){if(g)try{s(g+"}")}catch{}}return function(g,u,m,y,b,x,T,M,I,R){switch(g){case 1:if(I===0&&u.charCodeAt(0)===64)return s(u+";"),"";break;case 2:if(M===0)return u+"/*|*/";break;case 3:switch(M){case 102:case 112:return s(m[0]+u),"";default:return u+(R===0?"/*|*/":"")}case-2:u.split("/*|*/}").forEach(l)}}}(function(s){d.push(s)}),n=function(s,l,g){return l===0&&GC.indexOf(g[o.length])!==-1||g.match(v)?s:"."+e};function a(s,l,g,u){u===void 0&&(u="&");var m=s.replace(zC,""),y=l&&g?g+" "+l+" { "+m+" }":m;return e=u,o=l,h=new RegExp("\\"+o+"\\b","g"),v=new RegExp("(\\"+o+"\\b){2,}"),i(g||!l?"":l,y)}return i.use([].concat(p,[function(s,l,g){s===2&&g.length&&g[0].lastIndexOf(o)>0&&(g[0]=g[0].replace(h,n))},c,function(s){if(s===-2){var l=d;return d=[],l}}])),a.hash=p.length?p.reduce(function(s,l){return l.name||Li(15),ui(s,l.name)},5381).toString():"",a}var tg=Te.createContext();tg.Consumer;var rg=Te.createContext(),$C=(rg.Consumer,new Zd),pl=XC();function qC(){return Te.useContext(tg)||$C}function KC(){return Te.useContext(rg)||pl}var QC=function(){function t(e,o){var h=this;this.inject=function(v,w){w===void 0&&(w=pl);var C=h.name+w.hash;v.hasNameForId(h.id,C)||v.insertRules(h.id,C,w(h.rules,C,"@keyframes"))},this.toString=function(){return Li(12,String(h.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=o}return t.prototype.getName=function(e){return e===void 0&&(e=pl),this.name+e.hash},t}(),ZC=/([A-Z])/,JC=/([A-Z])/g,eS=/^ms-/,tS=function(t){return"-"+t.toLowerCase()};function ng(t){return ZC.test(t)?t.replace(JC,tS).replace(eS,"-ms-"):t}var ig=function(t){return t==null||t===!1||t===""};function Fi(t,e,o,h){if(Array.isArray(t)){for(var v,w=[],C=0,E=t.length;C<E;C+=1)(v=Fi(t[C],e,o,h))!==""&&(Array.isArray(v)?w.push.apply(w,v):w.push(v));return w}if(ig(t))return"";if(hl(t))return"."+t.styledComponentId;if(ko(t)){if(typeof(p=t)!="function"||p.prototype&&p.prototype.isReactComponent||!e)return t;var D=t(e);return process.env.NODE_ENV!=="production"&&ro.isElement(D)&&console.warn(fl(t)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),Fi(D,e,o,h)}var p;return t instanceof QC?o?(t.inject(o,h),t.getName(h)):t:cl(t)?function i(d,c){var n,a,s=[];for(var l in d)d.hasOwnProperty(l)&&!ig(d[l])&&(Array.isArray(d[l])&&d[l].isCss||ko(d[l])?s.push(ng(l)+":",d[l],";"):cl(d[l])?s.push.apply(s,i(d[l],l)):s.push(ng(l)+": "+(n=l,(a=d[l])==null||typeof a=="boolean"||a===""?"":typeof a!="number"||a===0||n in hC||n.startsWith("--")?String(a).trim():a+"px")+";"));return c?[c+" {"].concat(s,["}"]):s}(t):t.toString()}var og=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function rS(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),h=1;h<e;h++)o[h-1]=arguments[h];return ko(t)||cl(t)?og(Fi(qd(Ks,[t].concat(o)))):o.length===0&&t.length===1&&typeof t[0]=="string"?t:og(Fi(qd(t,o)))}var sg=/invalid hook call/i,ea=new Set,nS=function(t,e){if(process.env.NODE_ENV!=="production"){var o="The component "+t+(e?' with the id of "'+e+'"':"")+` has been created dynamically.
You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,h=console.error;try{var v=!0;console.error=function(w){if(sg.test(w))v=!1,ea.delete(o);else{for(var C=arguments.length,E=new Array(C>1?C-1:0),D=1;D<C;D++)E[D-1]=arguments[D];h.apply(void 0,[w].concat(E))}},Te.useRef(),v&&!ea.has(o)&&(console.warn(o),ea.add(o))}catch(w){sg.test(w.message)&&ea.delete(o)}finally{console.error=h}}},iS=function(t,e,o){return o===void 0&&(o=Mn),t.theme!==o.theme&&t.theme||e||o.theme},oS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,sS=/(^-|-$)/g;function vl(t){return t.replace(oS,"-").replace(sS,"")}var aS=function(t){return gl(eg(t)>>>0)};function ta(t){return typeof t=="string"&&(process.env.NODE_ENV==="production"||t.charAt(0)===t.charAt(0).toLowerCase())}var ml=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},uS=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function lS(t,e,o){var h=t[o];ml(e)&&ml(h)?ag(h,e):t[o]=e}function ag(t){for(var e=arguments.length,o=new Array(e>1?e-1:0),h=1;h<e;h++)o[h-1]=arguments[h];for(var v=0,w=o;v<w.length;v++){var C=w[v];if(ml(C))for(var E in C)uS(E)&&lS(t,C[E],E)}return t}var ug=Te.createContext();ug.Consumer;var yl={};function lg(t,e,o){var h=hl(t),v=!ta(t),w=e.attrs,C=w===void 0?Ks:w,E=e.componentId,D=E===void 0?function(u,m){var y=typeof u!="string"?"sc":vl(u);yl[y]=(yl[y]||0)+1;var b=y+"-"+aS("5.3.11"+y+yl[y]);return m?m+"-"+b:b}(e.displayName,e.parentComponentId):E,p=e.displayName,i=p===void 0?function(u){return ta(u)?"styled."+u:"Styled("+fl(u)+")"}(t):p,d=e.displayName&&e.componentId?vl(e.displayName)+"-"+e.componentId:e.componentId||D,c=h&&t.attrs?Array.prototype.concat(t.attrs,C).filter(Boolean):C,n=e.shouldForwardProp;h&&t.shouldForwardProp&&(n=e.shouldForwardProp?function(u,m,y){return t.shouldForwardProp(u,m,y)&&e.shouldForwardProp(u,m,y)}:t.shouldForwardProp);var a,s=new HC(o,d,h?t.componentStyle:void 0),l=s.isStatic&&C.length===0,g=function(u,m){return function(y,b,x,T){var M=y.attrs,I=y.componentStyle,R=y.defaultProps,W=y.foldedComponentIds,K=y.shouldForwardProp,$=y.styledComponentId,ae=y.target,ce=function(G,O,k){G===void 0&&(G=Mn);var V=dn({},O,{theme:G}),z={};return k.forEach(function(Z){var J,U,he,ie=Z;for(J in ko(ie)&&(ie=ie(V)),ie)V[J]=z[J]=J==="className"?(U=z[J],he=ie[J],U&&he?U+" "+he:U||he):ie[J]}),[V,z]}(iS(b,Te.useContext(ug),R)||Mn,b,M),fe=ce[0],le=ce[1],ye=function(G,O,k,V){var z=qC(),Z=KC(),J=O?G.generateAndInjectStyles(Mn,z,Z):G.generateAndInjectStyles(k,z,Z);return process.env.NODE_ENV!=="production"&&!O&&V&&V(J),J}(I,T,fe,process.env.NODE_ENV!=="production"?y.warnTooManyClasses:void 0),Ee=x,ne=le.$as||b.$as||le.as||b.as||ae,P=ta(ne),B=le!==b?dn({},b,{},le):b,F={};for(var L in B)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?F.as=B[L]:(K?K(L,Ud,ne):!P||Ud(L))&&(F[L]=B[L]));return b.style&&le.style!==b.style&&(F.style=dn({},b.style,{},le.style)),F.className=Array.prototype.concat(W,$,ye!==$?ye:null,b.className,le.className).filter(Boolean).join(" "),F.ref=Ee,Te.createElement(ne,F)}(a,u,m,l)};return g.displayName=i,(a=Te.forwardRef(g)).attrs=c,a.componentStyle=s,a.displayName=i,a.shouldForwardProp=n,a.foldedComponentIds=h?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Ks,a.styledComponentId=d,a.target=h?t.target:t,a.withComponent=function(u){var m=e.componentId,y=function(x,T){if(x==null)return{};var M,I,R={},W=Object.keys(x);for(I=0;I<W.length;I++)M=W[I],T.indexOf(M)>=0||(R[M]=x[M]);return R}(e,["componentId"]),b=m&&m+"-"+(ta(u)?u:vl(fl(u)));return lg(u,dn({},y,{attrs:c,componentId:b}),o)},Object.defineProperty(a,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(u){this._foldedDefaultProps=h?ag({},t.defaultProps,u):u}}),process.env.NODE_ENV!=="production"&&(nS(i,d),a.warnTooManyClasses=function(u,m){var y={},b=!1;return function(x){if(!b&&(y[x]=!0,Object.keys(y).length>=200)){var T=m?' with the id of "'+m+'"':"";console.warn("Over 200 classes were generated for component "+u+T+`.
Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),b=!0,y={}}}}(i,d)),Object.defineProperty(a,"toString",{value:function(){return"."+a.styledComponentId}}),v&&TC(a,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),a}var _l=function(t){return function e(o,h,v){if(v===void 0&&(v=Mn),!ro.isValidElementType(h))return Li(1,String(h));var w=function(){return o(h,v,rS.apply(void 0,arguments))};return w.withConfig=function(C){return e(o,h,dn({},v,{},C))},w.attrs=function(C){return e(o,h,dn({},v,{attrs:Array.prototype.concat(v.attrs,C).filter(Boolean)}))},w}(lg,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){_l[t]=_l(t)}),process.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`),process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&typeof window<"u"&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,window["__styled-components-init__"]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window["__styled-components-init__"]+=1);const cg=_l,fg=cg(mr)(({$toolbarPosition:t})=>`
  &.delete-btn {
    margin-top: 16px;
  }
  &.save-library-btn {
    ${t==="bottom"?"width: 100%;":""}
    ${t==="right"?"height: 100%; display: flex !important; justify-content: center;":""}
  }
`);function cS(){const{core:t,boilerplate:e,toolbarPosition:o}=Ut();if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const h=()=>{t.deleteSelectedObject()},v=async()=>{const w=await t.saveImageAsBlob();await e[1].onSaveBoilerplate(w)};return Y.jsx(Xu,{trailingItems:Y.jsxs(Y.Fragment,{children:[Y.jsx(fg,{className:"save-library-btn",tooltip:o==="bottom"?"  ":Y.jsxs(Y.Fragment,{children:["",Y.jsx("br",{})," "]}),disableToolbar:!0,Icon:()=>Y.jsx(jt,{variant:"library_add"}),onClick:v,$toolbarPosition:o}),Y.jsx(fg,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:sl,onClick:h})]})})}const fS=xe.styled(xe.Paper)(()=>`
  border-radius: 43px;
  box-shadow: 0px 4px 4px 0px #D1D1D140;
`),li=cg(xe.Box)(({$toolbarverticalposition:t,toolbarposition:e,window_height:o,window_width:h,toolbar_width:v,toolbar_height:w,$showcontrolpad:C})=>`
  &.toolbar-wrapper {
    ${C&&(t==="bottom"?"padding-bottom: 10px;":"padding-top: 10px;")}
    display: flex;
    width: ${e==="right"?"initial":"100vw"};
    justify-content: ${e==="right"&&o&&w&&o<w||e==="bottom"&&h&&v&&h<v?"flex-start":"center"};
    flex-direction: ${e==="right"?"column":"row"};
  }
  &.toggle-show-control-box {
    width: 100%;
    height: 22px;
    overflow:hidden;
    padding-top: 6px;
    display: flex;
    justify-content: flex-end;
    padding-right: 30px;
  }
  &.show-control-btn-wrapper {
    width: 100%;
    padding: 0 40px;
    max-width: 842px;
    height: 88px;
    position:absolute;
    bottom: 0;
    margin: auto;
    transform: translate(-50%);
    left: 50%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    z-index: 10;
  }
  &.control-wrapper-1 {
    width: calc(100% - 2px);
    position: absolute;
    left: 1px;
    top: 1px;
    z-index: 10;
  }
`),hg=xe.styled(xe.IconButton)(()=>`
  
  &.show-control-box-btn {
    border: 1px solid #eeeeee;
    border-radius: 2px;
    box-shadow: none;
    &:hover {
      background: none;
    }
    &.border-none {
      border: 0 none;
    }
    &.btn-type-1 {
      width: 60px;
      height: 60px;
      background: #EEEEEE;
      border-radius: 50%;
    }
  }
  
  &.hide-control-box-btn {
    display: flex;
    width: 30px;
    height: 100%;
    padding: 0;
    justify-content: center;
  }
  &.rotate-180 {
    transform: rotate(180deg);
  }
`),hS=({toolbarMode:t})=>{const{tool:e}=gn();return t===nr.Mode.TEXT?Y.jsx(xd,{}):t===nr.Mode.IMAGE?Y.jsx(qu,{}):e===He.PAN?Y.jsx(md,{}):e===He.ERASER?Y.jsx(Cd,{}):e===He.FREEDRAW?Y.jsx(vd,{}):e===He.MARKER?Y.jsx(_d,{}):Y.jsx(yd,{})},dS=Eo(({leadingItems:t})=>{const{core:e,toolbarPosition:o}=Ut(),[h,v]=Te.useState(e.mode),w=Te.useRef(null),[C,E]=Te.useState(!0),[D,p]=Te.useState(window.innerHeight),[i,d]=Te.useState(window.innerWidth),c=ed(w),{toolbarVerticalPosition:n}=Do,a=()=>{p(window.innerHeight),d(window.innerWidth)};Te.useEffect(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[]),Te.useEffect(()=>e.on(nr.Event.MODE_CHANGE,v),[e]);const s=()=>{E(!C)};return Y.jsxs(Y.Fragment,{children:[Y.jsx(li,{className:"toolbar-wrapper",toolbarposition:o,$toolbarverticalposition:n,window_width:i,window_height:D,toolbar_width:c==null?void 0:c.width,toolbar_height:c==null?void 0:c.height,$showcontrolpad:C,children:Y.jsx("div",{style:{position:"relative"},children:C&&Y.jsxs(fS,{ref:w,sx:{display:"flex",backgroundColor:$t[50],alignItems:"center",gap:1,...o==="right"&&{flexDirection:"column",width:88,py:2},...o==="bottom"&&{flexDirection:"row",height:88,px:"27px"}},children:[o==="bottom"&&Y.jsx(li,{className:"control-wrapper-1",toolbarposition:o,children:Y.jsx(li,{className:"toggle-show-control-box",children:Y.jsx(hg,{className:"show-control-box-btn rotate-180 hide-control-box-btn border-none",onClick:s,children:Y.jsx(jt,{variant:"fold",width:16,height:16})})})}),t&&Y.jsx(li,{className:"leading-items",sx:{display:"flex",gap:1,...o==="right"&&{flexDirection:"column"},...o==="bottom"&&{flexDirection:"row"}},children:t}),Y.jsxs(li,{className:"toolbar-contents",sx:{display:"grid",position:"relative",color:"black",gap:"16px",...o==="right"&&(h===nr.Mode.IMAGE?{gridTemplateRows:"799px"}:{gridTemplateRows:"583px 88px 128px"}),...o==="bottom"&&(h===nr.Mode.IMAGE?{gridTemplateColumns:"655px"}:{gridTemplateColumns:"439px 88px 128px"})},children:[h===nr.Mode.BRUSH&&Y.jsx(Kx,{}),h===nr.Mode.TEXT&&Y.jsx(cC,{}),h===nr.Mode.IMAGE&&Y.jsx(cS,{})]})]})})}),!C&&Y.jsx(li,{className:"toolbar-wrapper control-wrapper-2",$showcontrolpad:C,toolbarposition:o,window_width:i,window_height:D,children:Y.jsx(li,{className:"show-control-btn-wrapper ",children:Y.jsx(hg,{className:"show-control-box-btn btn-type-1",onClick:s,children:Y.jsx(hS,{toolbarMode:h})})})})]})}),dg=Te.createContext(null),gS=({editorRef:t,imageUrl:e,children:o,touch:h=!0,boilerplate:v,toolbarPosition:w})=>{const C=Te.useMemo(()=>new nr({imageUrl:e,touchEnabled:h}),[e,h]);Te.useImperativeHandle(t,()=>({getDataUrl(D){return C.getDataUrl(D)},toBlob(){return C.toBlob()},isDirty(){return C.isDirty()},isBusy(){return C.busy}}),[C]);const E=Te.useMemo(()=>({core:C,boilerplate:v,touch:h,toolbarPosition:w}),[v,C,h,w]);return Y.jsx(dg.Provider,{value:E,children:o})};function Ut(){return Te.useContext(dg)}function gn(){var v;const{core:t}=Ut(),[e,o]=Te.useState((v=t.tool)==null?void 0:v.name);return Te.useEffect(()=>t.on(nr.Event.TOOL_CHANGE,w=>o(w)),[t]),{tool:e,setTool:w=>{t.selectTool(w)}}}const pS=()=>{const t=Te.useRef(null),e=ed(t);return Y.jsx(En,{ref:t,sx:{overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e&&Y.jsx(gb,{containerSize:e})})},vS=Eo(Te.forwardRef(function({viewOnly:e=!1,imageUrl:o,boilerplate:h,touch:v,toolbarPosition:w="bottom",leadingItems:C},E){const{toolbarVerticalPosition:D}=Do,p=Te.useMemo(()=>{const i=[{component:Y.jsx(pS,{})},{component:Y.jsx(Y.Fragment,{children:!e&&Y.jsx(dS,{leadingItems:C})})}];return D==="bottom"?i:i.reverse()},[D]);return Y.jsx(gS,{editorRef:E,imageUrl:o,boilerplate:h,touch:v,toolbarPosition:w,children:Y.jsx(En,{sx:{backgroundColor:"#f5f5f8",height:"100%",display:"flex",flexDirection:w==="right"?"row":"column"},children:p.map((i,d)=>Y.jsx(Te.Fragment,{children:i.component},d))})})}));Xt.ImageEditor=vS,Object.defineProperty(Xt,Symbol.toStringTag,{value:"Module"})});
