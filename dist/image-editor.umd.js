(function(et,le){typeof exports=="object"&&typeof module<"u"?le(exports,require("react"),require("react-dom"),require("@mui/material"),require("@emotion/styled"),require("@emotion/react")):typeof define=="function"&&define.amd?define(["exports","react","react-dom","@mui/material","@emotion/styled","@emotion/react"],le):(et=typeof globalThis<"u"?globalThis:et||self,le(et.ImageEditor={},et.React,et.ReactDOM,et.MuiMaterial,et.EmotionStyled))})(this,function(et,le,Qt,se,Fc){"use strict";var wy=Object.defineProperty;var xy=(et,le,Qt)=>le in et?wy(et,le,{enumerable:!0,configurable:!0,writable:!0,value:Qt}):et[le]=Qt;var ve=(et,le,Qt)=>(xy(et,typeof le!="symbol"?le+"":le,Qt),Qt);function Bc(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const c in t)if(c!=="default"){const h=Object.getOwnPropertyDescriptor(t,c);Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>t[c]})}}return e.default=t,Object.freeze(e)}const he=Bc(le);function Qo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var c=function h(){return this instanceof h?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};c.prototype=e.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(t).forEach(function(h){var g=Object.getOwnPropertyDescriptor(t,h);Object.defineProperty(c,h,g.get?g:{enumerable:!0,get:function(){return t[h]}})}),c}var _i={exports:{}},Nr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zo;function Nc(){if(Zo)return Nr;Zo=1;var t=le,e=Symbol.for("react.element"),c=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,g=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function _(x,T,d){var n,u={},l=null,r=null;d!==void 0&&(l=""+d),T.key!==void 0&&(l=""+T.key),T.ref!==void 0&&(r=T.ref);for(n in T)h.call(T,n)&&!y.hasOwnProperty(n)&&(u[n]=T[n]);if(x&&x.defaultProps)for(n in T=x.defaultProps,T)u[n]===void 0&&(u[n]=T[n]);return{$$typeof:e,type:x,key:l,ref:r,props:u,_owner:g.current}}return Nr.Fragment=c,Nr.jsx=_,Nr.jsxs=_,Nr}var Vr={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es;function Vc(){return es||(es=1,process.env.NODE_ENV!=="production"&&function(){var t=le,e=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),r=Symbol.for("react.offscreen"),o=Symbol.iterator,i="@@iterator";function a(N){if(N===null||typeof N!="object")return null;var ae=o&&N[o]||N[i];return typeof ae=="function"?ae:null}var f=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function s(N){{for(var ae=arguments.length,de=new Array(ae>1?ae-1:0),_e=1;_e<ae;_e++)de[_e-1]=arguments[_e];p("error",N,de)}}function p(N,ae,de){{var _e=f.ReactDebugCurrentFrame,De=_e.getStackAddendum();De!==""&&(ae+="%s",de=de.concat([De]));var Ne=de.map(function(Oe){return String(Oe)});Ne.unshift("Warning: "+ae),Function.prototype.apply.call(console[N],console,Ne)}}var v=!1,m=!1,b=!1,w=!1,E=!1,A;A=Symbol.for("react.module.reference");function O(N){return!!(typeof N=="string"||typeof N=="function"||N===h||N===y||E||N===g||N===d||N===n||w||N===r||v||m||b||typeof N=="object"&&N!==null&&(N.$$typeof===l||N.$$typeof===u||N.$$typeof===_||N.$$typeof===x||N.$$typeof===T||N.$$typeof===A||N.getModuleId!==void 0))}function L(N,ae,de){var _e=N.displayName;if(_e)return _e;var De=ae.displayName||ae.name||"";return De!==""?de+"("+De+")":de}function Y(N){return N.displayName||"Context"}function V(N){if(N==null)return null;if(typeof N.tag=="number"&&s("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof N=="function")return N.displayName||N.name||null;if(typeof N=="string")return N;switch(N){case h:return"Fragment";case c:return"Portal";case y:return"Profiler";case g:return"StrictMode";case d:return"Suspense";case n:return"SuspenseList"}if(typeof N=="object")switch(N.$$typeof){case x:var ae=N;return Y(ae)+".Consumer";case _:var de=N;return Y(de._context)+".Provider";case T:return L(N,N.render,"ForwardRef");case u:var _e=N.displayName||null;return _e!==null?_e:V(N.type)||"Memo";case l:{var De=N,Ne=De._payload,Oe=De._init;try{return V(Oe(Ne))}catch{return null}}}return null}var Q=Object.assign,J=0,Z,re,ie,ue,X,S,k;function M(){}M.__reactDisabledLog=!0;function D(){{if(J===0){Z=console.log,re=console.info,ie=console.warn,ue=console.error,X=console.group,S=console.groupCollapsed,k=console.groupEnd;var N={configurable:!0,enumerable:!0,value:M,writable:!0};Object.defineProperties(console,{info:N,log:N,warn:N,error:N,group:N,groupCollapsed:N,groupEnd:N})}J++}}function B(){{if(J--,J===0){var N={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Q({},N,{value:Z}),info:Q({},N,{value:re}),warn:Q({},N,{value:ie}),error:Q({},N,{value:ue}),group:Q({},N,{value:X}),groupCollapsed:Q({},N,{value:S}),groupEnd:Q({},N,{value:k})})}J<0&&s("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var C=f.ReactCurrentDispatcher,P;function j(N,ae,de){{if(P===void 0)try{throw Error()}catch(De){var _e=De.stack.trim().match(/\n( *(at )?)/);P=_e&&_e[1]||""}return`
`+P+N}}var F=!1,H;{var z=typeof WeakMap=="function"?WeakMap:Map;H=new z}function R(N,ae){if(!N||F)return"";{var de=H.get(N);if(de!==void 0)return de}var _e;F=!0;var De=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ne;Ne=C.current,C.current=null,D();try{if(ae){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(Ht){_e=Ht}Reflect.construct(N,[],Oe)}else{try{Oe.call()}catch(Ht){_e=Ht}N.call(Oe.prototype)}}else{try{throw Error()}catch(Ht){_e=Ht}N()}}catch(Ht){if(Ht&&_e&&typeof Ht.stack=="string"){for(var Se=Ht.stack.split(`
`),nt=_e.stack.split(`
`),We=Se.length-1,Xe=nt.length-1;We>=1&&Xe>=0&&Se[We]!==nt[Xe];)Xe--;for(;We>=1&&Xe>=0;We--,Xe--)if(Se[We]!==nt[Xe]){if(We!==1||Xe!==1)do if(We--,Xe--,Xe<0||Se[We]!==nt[Xe]){var wt=`
`+Se[We].replace(" at new "," at ");return N.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",N.displayName)),typeof N=="function"&&H.set(N,wt),wt}while(We>=1&&Xe>=0);break}}}finally{F=!1,C.current=Ne,B(),Error.prepareStackTrace=De}var Br=N?N.displayName||N.name:"",Lc=Br?j(Br):"";return typeof N=="function"&&H.set(N,Lc),Lc}function ee(N,ae,de){return R(N,!1)}function $(N){var ae=N.prototype;return!!(ae&&ae.isReactComponent)}function W(N,ae,de){if(N==null)return"";if(typeof N=="function")return R(N,$(N));if(typeof N=="string")return j(N);switch(N){case d:return j("Suspense");case n:return j("SuspenseList")}if(typeof N=="object")switch(N.$$typeof){case T:return ee(N.render);case u:return W(N.type,ae,de);case l:{var _e=N,De=_e._payload,Ne=_e._init;try{return W(Ne(De),ae,de)}catch{}}}return""}var U=Object.prototype.hasOwnProperty,q={},te=f.ReactDebugCurrentFrame;function K(N){if(N){var ae=N._owner,de=W(N.type,N._source,ae?ae.type:null);te.setExtraStackFrame(de)}else te.setExtraStackFrame(null)}function ne(N,ae,de,_e,De){{var Ne=Function.call.bind(U);for(var Oe in N)if(Ne(N,Oe)){var Se=void 0;try{if(typeof N[Oe]!="function"){var nt=Error((_e||"React class")+": "+de+" type `"+Oe+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof N[Oe]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw nt.name="Invariant Violation",nt}Se=N[Oe](ae,Oe,_e,de,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(We){Se=We}Se&&!(Se instanceof Error)&&(K(De),s("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",_e||"React class",de,Oe,typeof Se),K(null)),Se instanceof Error&&!(Se.message in q)&&(q[Se.message]=!0,K(De),s("Failed %s type: %s",de,Se.message),K(null))}}}var ce=Array.isArray;function me(N){return ce(N)}function pe(N){{var ae=typeof Symbol=="function"&&Symbol.toStringTag,de=ae&&N[Symbol.toStringTag]||N.constructor.name||"Object";return de}}function G(N){try{return fe(N),!1}catch{return!0}}function fe(N){return""+N}function be(N){if(G(N))return s("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",pe(N)),fe(N)}var xe=f.ReactCurrentOwner,Ee={key:!0,ref:!0,__self:!0,__source:!0},Ae,Je,Ue;Ue={};function Ut(N){if(U.call(N,"ref")){var ae=Object.getOwnPropertyDescriptor(N,"ref").get;if(ae&&ae.isReactWarning)return!1}return N.ref!==void 0}function br(N){if(U.call(N,"key")){var ae=Object.getOwnPropertyDescriptor(N,"key").get;if(ae&&ae.isReactWarning)return!1}return N.key!==void 0}function _t(N,ae){if(typeof N.ref=="string"&&xe.current&&ae&&xe.current.stateNode!==ae){var de=V(xe.current.type);Ue[de]||(s('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',V(xe.current.type),N.ref),Ue[de]=!0)}}function Wo(N,ae){{var de=function(){Ae||(Ae=!0,s("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ae))};de.isReactWarning=!0,Object.defineProperty(N,"key",{get:de,configurable:!0})}}function bi(N,ae){{var de=function(){Je||(Je=!0,s("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ae))};de.isReactWarning=!0,Object.defineProperty(N,"ref",{get:de,configurable:!0})}}var Xo=function(N,ae,de,_e,De,Ne,Oe){var Se={$$typeof:e,type:N,key:ae,ref:de,props:Oe,_owner:Ne};return Se._store={},Object.defineProperty(Se._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Se,"_self",{configurable:!1,enumerable:!1,writable:!1,value:_e}),Object.defineProperty(Se,"_source",{configurable:!1,enumerable:!1,writable:!1,value:De}),Object.freeze&&(Object.freeze(Se.props),Object.freeze(Se)),Se};function Go(N,ae,de,_e,De){{var Ne,Oe={},Se=null,nt=null;de!==void 0&&(be(de),Se=""+de),br(ae)&&(be(ae.key),Se=""+ae.key),Ut(ae)&&(nt=ae.ref,_t(ae,De));for(Ne in ae)U.call(ae,Ne)&&!Ee.hasOwnProperty(Ne)&&(Oe[Ne]=ae[Ne]);if(N&&N.defaultProps){var We=N.defaultProps;for(Ne in We)Oe[Ne]===void 0&&(Oe[Ne]=We[Ne])}if(Se||nt){var Xe=typeof N=="function"?N.displayName||N.name||"Unknown":N;Se&&Wo(Oe,Xe),nt&&bi(Oe,Xe)}return Xo(N,Se,nt,De,_e,xe.current,Oe)}}var $o=f.ReactCurrentOwner,Dc=f.ReactDebugCurrentFrame;function Fr(N){if(N){var ae=N._owner,de=W(N.type,N._source,ae?ae.type:null);Dc.setExtraStackFrame(de)}else Dc.setExtraStackFrame(null)}var qo;qo=!1;function Ko(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function Mc(){{if($o.current){var N=V($o.current.type);if(N)return`

Check the render method of \``+N+"`."}return""}}function dy(N){{if(N!==void 0){var ae=N.fileName.replace(/^.*[\\\/]/,""),de=N.lineNumber;return`

Check your code at `+ae+":"+de+"."}return""}}var kc={};function gy(N){{var ae=Mc();if(!ae){var de=typeof N=="string"?N:N.displayName||N.name;de&&(ae=`

Check the top-level render call using <`+de+">.")}return ae}}function jc(N,ae){{if(!N._store||N._store.validated||N.key!=null)return;N._store.validated=!0;var de=gy(ae);if(kc[de])return;kc[de]=!0;var _e="";N&&N._owner&&N._owner!==$o.current&&(_e=" It was passed a child from "+V(N._owner.type)+"."),Fr(N),s('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',de,_e),Fr(null)}}function Rc(N,ae){{if(typeof N!="object")return;if(me(N))for(var de=0;de<N.length;de++){var _e=N[de];Ko(_e)&&jc(_e,ae)}else if(Ko(N))N._store&&(N._store.validated=!0);else if(N){var De=a(N);if(typeof De=="function"&&De!==N.entries)for(var Ne=De.call(N),Oe;!(Oe=Ne.next()).done;)Ko(Oe.value)&&jc(Oe.value,ae)}}}function py(N){{var ae=N.type;if(ae==null||typeof ae=="string")return;var de;if(typeof ae=="function")de=ae.propTypes;else if(typeof ae=="object"&&(ae.$$typeof===T||ae.$$typeof===u))de=ae.propTypes;else return;if(de){var _e=V(ae);ne(de,N.props,"prop",_e,N)}else if(ae.PropTypes!==void 0&&!qo){qo=!0;var De=V(ae);s("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",De||"Unknown")}typeof ae.getDefaultProps=="function"&&!ae.getDefaultProps.isReactClassApproved&&s("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function vy(N){{for(var ae=Object.keys(N.props),de=0;de<ae.length;de++){var _e=ae[de];if(_e!=="children"&&_e!=="key"){Fr(N),s("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",_e),Fr(null);break}}N.ref!==null&&(Fr(N),s("Invalid attribute `ref` supplied to `React.Fragment`."),Fr(null))}}function Ic(N,ae,de,_e,De,Ne){{var Oe=O(N);if(!Oe){var Se="";(N===void 0||typeof N=="object"&&N!==null&&Object.keys(N).length===0)&&(Se+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var nt=dy(De);nt?Se+=nt:Se+=Mc();var We;N===null?We="null":me(N)?We="array":N!==void 0&&N.$$typeof===e?(We="<"+(V(N.type)||"Unknown")+" />",Se=" Did you accidentally export a JSX literal instead of a component?"):We=typeof N,s("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",We,Se)}var Xe=Go(N,ae,de,De,Ne);if(Xe==null)return Xe;if(Oe){var wt=ae.children;if(wt!==void 0)if(_e)if(me(wt)){for(var Br=0;Br<wt.length;Br++)Rc(wt[Br],N);Object.freeze&&Object.freeze(wt)}else s("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Rc(wt,N)}return N===h?vy(Xe):py(Xe),Xe}}function my(N,ae,de){return Ic(N,ae,de,!0)}function yy(N,ae,de){return Ic(N,ae,de,!1)}var by=yy,_y=my;Vr.Fragment=h,Vr.jsx=by,Vr.jsxs=_y}()),Vr}process.env.NODE_ENV==="production"?_i.exports=Nc():_i.exports=Vc();var I=_i.exports;function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(t[h]=c[h])}return t},Te.apply(this,arguments)}function Jt(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function ts(t){if(!Jt(t))return t;const e={};return Object.keys(t).forEach(c=>{e[c]=ts(t[c])}),e}function jt(t,e,c={clone:!0}){const h=c.clone?Te({},t):t;return Jt(t)&&Jt(e)&&Object.keys(e).forEach(g=>{g!=="__proto__"&&(Jt(e[g])&&g in t&&Jt(t[g])?h[g]=jt(t[g],e[g],c):c.clone?h[g]=Jt(e[g])?ts(e[g]):e[g]:h[g]=e[g])}),h}var wi={exports:{}},_n={exports:{}},Me={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rs;function Yc(){if(rs)return Me;rs=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,c=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,g=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,_=t?Symbol.for("react.provider"):60109,x=t?Symbol.for("react.context"):60110,T=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,n=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,l=t?Symbol.for("react.suspense_list"):60120,r=t?Symbol.for("react.memo"):60115,o=t?Symbol.for("react.lazy"):60116,i=t?Symbol.for("react.block"):60121,a=t?Symbol.for("react.fundamental"):60117,f=t?Symbol.for("react.responder"):60118,s=t?Symbol.for("react.scope"):60119;function p(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case T:case d:case h:case y:case g:case u:return m;default:switch(m=m&&m.$$typeof,m){case x:case n:case o:case r:case _:return m;default:return b}}case c:return b}}}function v(m){return p(m)===d}return Me.AsyncMode=T,Me.ConcurrentMode=d,Me.ContextConsumer=x,Me.ContextProvider=_,Me.Element=e,Me.ForwardRef=n,Me.Fragment=h,Me.Lazy=o,Me.Memo=r,Me.Portal=c,Me.Profiler=y,Me.StrictMode=g,Me.Suspense=u,Me.isAsyncMode=function(m){return v(m)||p(m)===T},Me.isConcurrentMode=v,Me.isContextConsumer=function(m){return p(m)===x},Me.isContextProvider=function(m){return p(m)===_},Me.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},Me.isForwardRef=function(m){return p(m)===n},Me.isFragment=function(m){return p(m)===h},Me.isLazy=function(m){return p(m)===o},Me.isMemo=function(m){return p(m)===r},Me.isPortal=function(m){return p(m)===c},Me.isProfiler=function(m){return p(m)===y},Me.isStrictMode=function(m){return p(m)===g},Me.isSuspense=function(m){return p(m)===u},Me.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===h||m===d||m===y||m===g||m===u||m===l||typeof m=="object"&&m!==null&&(m.$$typeof===o||m.$$typeof===r||m.$$typeof===_||m.$$typeof===x||m.$$typeof===n||m.$$typeof===a||m.$$typeof===f||m.$$typeof===s||m.$$typeof===i)},Me.typeOf=p,Me}var ke={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns;function Uc(){return ns||(ns=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,c=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,g=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,_=t?Symbol.for("react.provider"):60109,x=t?Symbol.for("react.context"):60110,T=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,n=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,l=t?Symbol.for("react.suspense_list"):60120,r=t?Symbol.for("react.memo"):60115,o=t?Symbol.for("react.lazy"):60116,i=t?Symbol.for("react.block"):60121,a=t?Symbol.for("react.fundamental"):60117,f=t?Symbol.for("react.responder"):60118,s=t?Symbol.for("react.scope"):60119;function p(R){return typeof R=="string"||typeof R=="function"||R===h||R===d||R===y||R===g||R===u||R===l||typeof R=="object"&&R!==null&&(R.$$typeof===o||R.$$typeof===r||R.$$typeof===_||R.$$typeof===x||R.$$typeof===n||R.$$typeof===a||R.$$typeof===f||R.$$typeof===s||R.$$typeof===i)}function v(R){if(typeof R=="object"&&R!==null){var ee=R.$$typeof;switch(ee){case e:var $=R.type;switch($){case T:case d:case h:case y:case g:case u:return $;default:var W=$&&$.$$typeof;switch(W){case x:case n:case o:case r:case _:return W;default:return ee}}case c:return ee}}}var m=T,b=d,w=x,E=_,A=e,O=n,L=h,Y=o,V=r,Q=c,J=y,Z=g,re=u,ie=!1;function ue(R){return ie||(ie=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),X(R)||v(R)===T}function X(R){return v(R)===d}function S(R){return v(R)===x}function k(R){return v(R)===_}function M(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function D(R){return v(R)===n}function B(R){return v(R)===h}function C(R){return v(R)===o}function P(R){return v(R)===r}function j(R){return v(R)===c}function F(R){return v(R)===y}function H(R){return v(R)===g}function z(R){return v(R)===u}ke.AsyncMode=m,ke.ConcurrentMode=b,ke.ContextConsumer=w,ke.ContextProvider=E,ke.Element=A,ke.ForwardRef=O,ke.Fragment=L,ke.Lazy=Y,ke.Memo=V,ke.Portal=Q,ke.Profiler=J,ke.StrictMode=Z,ke.Suspense=re,ke.isAsyncMode=ue,ke.isConcurrentMode=X,ke.isContextConsumer=S,ke.isContextProvider=k,ke.isElement=M,ke.isForwardRef=D,ke.isFragment=B,ke.isLazy=C,ke.isMemo=P,ke.isPortal=j,ke.isProfiler=F,ke.isStrictMode=H,ke.isSuspense=z,ke.isValidElementType=p,ke.typeOf=v}()),ke}var is;function os(){return is||(is=1,process.env.NODE_ENV==="production"?_n.exports=Yc():_n.exports=Uc()),_n.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var xi,ss;function Hc(){if(ss)return xi;ss=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function h(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function g(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var _={},x=0;x<10;x++)_["_"+String.fromCharCode(x)]=x;var T=Object.getOwnPropertyNames(_).map(function(n){return _[n]});if(T.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(n){d[n]=n}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return xi=g()?Object.assign:function(y,_){for(var x,T=h(y),d,n=1;n<arguments.length;n++){x=Object(arguments[n]);for(var u in x)e.call(x,u)&&(T[u]=x[u]);if(t){d=t(x);for(var l=0;l<d.length;l++)c.call(x,d[l])&&(T[d[l]]=x[d[l]])}}return T},xi}var Ci,as;function Si(){if(as)return Ci;as=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ci=t,Ci}var Ti,ls;function cs(){return ls||(ls=1,Ti=Function.call.bind(Object.prototype.hasOwnProperty)),Ti}var Ei,us;function zc(){if(us)return Ei;us=1;var t=function(){};if(process.env.NODE_ENV!=="production"){var e=Si(),c={},h=cs();t=function(y){var _="Warning: "+y;typeof console<"u"&&console.error(_);try{throw new Error(_)}catch{}}}function g(y,_,x,T,d){if(process.env.NODE_ENV!=="production"){for(var n in y)if(h(y,n)){var u;try{if(typeof y[n]!="function"){var l=Error((T||"React class")+": "+x+" type `"+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof y[n]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}u=y[n](_,n,T,x,null,e)}catch(o){u=o}if(u&&!(u instanceof Error)&&t((T||"React class")+": type specification of "+x+" `"+n+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in c)){c[u.message]=!0;var r=d?d():"";t("Failed "+x+" type: "+u.message+(r??""))}}}}return g.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(c={})},Ei=g,Ei}var Oi,hs;function Wc(){if(hs)return Oi;hs=1;var t=os(),e=Hc(),c=Si(),h=cs(),g=zc(),y=function(){};process.env.NODE_ENV!=="production"&&(y=function(x){var T="Warning: "+x;typeof console<"u"&&console.error(T);try{throw new Error(T)}catch{}});function _(){return null}return Oi=function(x,T){var d=typeof Symbol=="function"&&Symbol.iterator,n="@@iterator";function u(X){var S=X&&(d&&X[d]||X[n]);if(typeof S=="function")return S}var l="<<anonymous>>",r={array:f("array"),bigint:f("bigint"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:s(),arrayOf:p,element:v(),elementType:m(),instanceOf:b,node:O(),objectOf:E,oneOf:w,oneOfType:A,shape:Y,exact:V};function o(X,S){return X===S?X!==0||1/X===1/S:X!==X&&S!==S}function i(X,S){this.message=X,this.data=S&&typeof S=="object"?S:{},this.stack=""}i.prototype=Error.prototype;function a(X){if(process.env.NODE_ENV!=="production")var S={},k=0;function M(B,C,P,j,F,H,z){if(j=j||l,H=H||P,z!==c){if(T){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var ee=j+":"+P;!S[ee]&&k<3&&(y("You are manually calling a React.PropTypes validation function for the `"+H+"` prop on `"+j+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),S[ee]=!0,k++)}}return C[P]==null?B?C[P]===null?new i("The "+F+" `"+H+"` is marked as required "+("in `"+j+"`, but its value is `null`.")):new i("The "+F+" `"+H+"` is marked as required in "+("`"+j+"`, but its value is `undefined`.")):null:X(C,P,j,F,H)}var D=M.bind(null,!1);return D.isRequired=M.bind(null,!0),D}function f(X){function S(k,M,D,B,C,P){var j=k[M],F=Z(j);if(F!==X){var H=re(j);return new i("Invalid "+B+" `"+C+"` of type "+("`"+H+"` supplied to `"+D+"`, expected ")+("`"+X+"`."),{expectedType:X})}return null}return a(S)}function s(){return a(_)}function p(X){function S(k,M,D,B,C){if(typeof X!="function")return new i("Property `"+C+"` of component `"+D+"` has invalid PropType notation inside arrayOf.");var P=k[M];if(!Array.isArray(P)){var j=Z(P);return new i("Invalid "+B+" `"+C+"` of type "+("`"+j+"` supplied to `"+D+"`, expected an array."))}for(var F=0;F<P.length;F++){var H=X(P,F,D,B,C+"["+F+"]",c);if(H instanceof Error)return H}return null}return a(S)}function v(){function X(S,k,M,D,B){var C=S[k];if(!x(C)){var P=Z(C);return new i("Invalid "+D+" `"+B+"` of type "+("`"+P+"` supplied to `"+M+"`, expected a single ReactElement."))}return null}return a(X)}function m(){function X(S,k,M,D,B){var C=S[k];if(!t.isValidElementType(C)){var P=Z(C);return new i("Invalid "+D+" `"+B+"` of type "+("`"+P+"` supplied to `"+M+"`, expected a single ReactElement type."))}return null}return a(X)}function b(X){function S(k,M,D,B,C){if(!(k[M]instanceof X)){var P=X.name||l,j=ue(k[M]);return new i("Invalid "+B+" `"+C+"` of type "+("`"+j+"` supplied to `"+D+"`, expected ")+("instance of `"+P+"`."))}return null}return a(S)}function w(X){if(!Array.isArray(X))return process.env.NODE_ENV!=="production"&&(arguments.length>1?y("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):y("Invalid argument supplied to oneOf, expected an array.")),_;function S(k,M,D,B,C){for(var P=k[M],j=0;j<X.length;j++)if(o(P,X[j]))return null;var F=JSON.stringify(X,function(z,R){var ee=re(R);return ee==="symbol"?String(R):R});return new i("Invalid "+B+" `"+C+"` of value `"+String(P)+"` "+("supplied to `"+D+"`, expected one of "+F+"."))}return a(S)}function E(X){function S(k,M,D,B,C){if(typeof X!="function")return new i("Property `"+C+"` of component `"+D+"` has invalid PropType notation inside objectOf.");var P=k[M],j=Z(P);if(j!=="object")return new i("Invalid "+B+" `"+C+"` of type "+("`"+j+"` supplied to `"+D+"`, expected an object."));for(var F in P)if(h(P,F)){var H=X(P,F,D,B,C+"."+F,c);if(H instanceof Error)return H}return null}return a(S)}function A(X){if(!Array.isArray(X))return process.env.NODE_ENV!=="production"&&y("Invalid argument supplied to oneOfType, expected an instance of array."),_;for(var S=0;S<X.length;S++){var k=X[S];if(typeof k!="function")return y("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ie(k)+" at index "+S+"."),_}function M(D,B,C,P,j){for(var F=[],H=0;H<X.length;H++){var z=X[H],R=z(D,B,C,P,j,c);if(R==null)return null;R.data&&h(R.data,"expectedType")&&F.push(R.data.expectedType)}var ee=F.length>0?", expected one of type ["+F.join(", ")+"]":"";return new i("Invalid "+P+" `"+j+"` supplied to "+("`"+C+"`"+ee+"."))}return a(M)}function O(){function X(S,k,M,D,B){return Q(S[k])?null:new i("Invalid "+D+" `"+B+"` supplied to "+("`"+M+"`, expected a ReactNode."))}return a(X)}function L(X,S,k,M,D){return new i((X||"React class")+": "+S+" type `"+k+"."+M+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+D+"`.")}function Y(X){function S(k,M,D,B,C){var P=k[M],j=Z(P);if(j!=="object")return new i("Invalid "+B+" `"+C+"` of type `"+j+"` "+("supplied to `"+D+"`, expected `object`."));for(var F in X){var H=X[F];if(typeof H!="function")return L(D,B,C,F,re(H));var z=H(P,F,D,B,C+"."+F,c);if(z)return z}return null}return a(S)}function V(X){function S(k,M,D,B,C){var P=k[M],j=Z(P);if(j!=="object")return new i("Invalid "+B+" `"+C+"` of type `"+j+"` "+("supplied to `"+D+"`, expected `object`."));var F=e({},k[M],X);for(var H in F){var z=X[H];if(h(X,H)&&typeof z!="function")return L(D,B,C,H,re(z));if(!z)return new i("Invalid "+B+" `"+C+"` key `"+H+"` supplied to `"+D+"`.\nBad object: "+JSON.stringify(k[M],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(X),null,"  "));var R=z(P,H,D,B,C+"."+H,c);if(R)return R}return null}return a(S)}function Q(X){switch(typeof X){case"number":case"string":case"undefined":return!0;case"boolean":return!X;case"object":if(Array.isArray(X))return X.every(Q);if(X===null||x(X))return!0;var S=u(X);if(S){var k=S.call(X),M;if(S!==X.entries){for(;!(M=k.next()).done;)if(!Q(M.value))return!1}else for(;!(M=k.next()).done;){var D=M.value;if(D&&!Q(D[1]))return!1}}else return!1;return!0;default:return!1}}function J(X,S){return X==="symbol"?!0:S?S["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&S instanceof Symbol:!1}function Z(X){var S=typeof X;return Array.isArray(X)?"array":X instanceof RegExp?"object":J(S,X)?"symbol":S}function re(X){if(typeof X>"u"||X===null)return""+X;var S=Z(X);if(S==="object"){if(X instanceof Date)return"date";if(X instanceof RegExp)return"regexp"}return S}function ie(X){var S=re(X);switch(S){case"array":case"object":return"an "+S;case"boolean":case"date":case"regexp":return"a "+S;default:return S}}function ue(X){return!X.constructor||!X.constructor.name?l:X.constructor.name}return r.checkPropTypes=g,r.resetWarningCache=g.resetWarningCache,r.PropTypes=r,r},Oi}var Pi,fs;function Xc(){if(fs)return Pi;fs=1;var t=Si();function e(){}function c(){}return c.resetWarningCache=e,Pi=function(){function h(_,x,T,d,n,u){if(u!==t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}h.isRequired=h;function g(){return h}var y={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:g,element:h,elementType:h,instanceOf:g,node:h,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:c,resetWarningCache:e};return y.PropTypes=y,y},Pi}if(process.env.NODE_ENV!=="production"){var Gc=os(),$c=!0;wi.exports=Wc()(Gc.isElement,$c)}else wi.exports=Xc()();var qc=wi.exports;const Ce=Qo(qc);function _r(t){let e="https://mui.com/production-error/?code="+t;for(let c=1;c<arguments.length;c+=1)e+="&args[]="+encodeURIComponent(arguments[c]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var Ai={exports:{}},je={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds;function Kc(){if(ds)return je;ds=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),x=Symbol.for("react.server_context"),T=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),r=Symbol.for("react.offscreen"),o;o=Symbol.for("react.module.reference");function i(a){if(typeof a=="object"&&a!==null){var f=a.$$typeof;switch(f){case t:switch(a=a.type,a){case c:case g:case h:case d:case n:return a;default:switch(a=a&&a.$$typeof,a){case x:case _:case T:case l:case u:case y:return a;default:return f}}case e:return f}}}return je.ContextConsumer=_,je.ContextProvider=y,je.Element=t,je.ForwardRef=T,je.Fragment=c,je.Lazy=l,je.Memo=u,je.Portal=e,je.Profiler=g,je.StrictMode=h,je.Suspense=d,je.SuspenseList=n,je.isAsyncMode=function(){return!1},je.isConcurrentMode=function(){return!1},je.isContextConsumer=function(a){return i(a)===_},je.isContextProvider=function(a){return i(a)===y},je.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===t},je.isForwardRef=function(a){return i(a)===T},je.isFragment=function(a){return i(a)===c},je.isLazy=function(a){return i(a)===l},je.isMemo=function(a){return i(a)===u},je.isPortal=function(a){return i(a)===e},je.isProfiler=function(a){return i(a)===g},je.isStrictMode=function(a){return i(a)===h},je.isSuspense=function(a){return i(a)===d},je.isSuspenseList=function(a){return i(a)===n},je.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===c||a===g||a===h||a===d||a===n||a===r||typeof a=="object"&&a!==null&&(a.$$typeof===l||a.$$typeof===u||a.$$typeof===y||a.$$typeof===_||a.$$typeof===T||a.$$typeof===o||a.getModuleId!==void 0)},je.typeOf=i,je}var Re={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs;function Qc(){return gs||(gs=1,process.env.NODE_ENV!=="production"&&function(){var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),x=Symbol.for("react.server_context"),T=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),r=Symbol.for("react.offscreen"),o=!1,i=!1,a=!1,f=!1,s=!1,p;p=Symbol.for("react.module.reference");function v($){return!!(typeof $=="string"||typeof $=="function"||$===c||$===g||s||$===h||$===d||$===n||f||$===r||o||i||a||typeof $=="object"&&$!==null&&($.$$typeof===l||$.$$typeof===u||$.$$typeof===y||$.$$typeof===_||$.$$typeof===T||$.$$typeof===p||$.getModuleId!==void 0))}function m($){if(typeof $=="object"&&$!==null){var W=$.$$typeof;switch(W){case t:var U=$.type;switch(U){case c:case g:case h:case d:case n:return U;default:var q=U&&U.$$typeof;switch(q){case x:case _:case T:case l:case u:case y:return q;default:return W}}case e:return W}}}var b=_,w=y,E=t,A=T,O=c,L=l,Y=u,V=e,Q=g,J=h,Z=d,re=n,ie=!1,ue=!1;function X($){return ie||(ie=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1}function S($){return ue||(ue=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1}function k($){return m($)===_}function M($){return m($)===y}function D($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function B($){return m($)===T}function C($){return m($)===c}function P($){return m($)===l}function j($){return m($)===u}function F($){return m($)===e}function H($){return m($)===g}function z($){return m($)===h}function R($){return m($)===d}function ee($){return m($)===n}Re.ContextConsumer=b,Re.ContextProvider=w,Re.Element=E,Re.ForwardRef=A,Re.Fragment=O,Re.Lazy=L,Re.Memo=Y,Re.Portal=V,Re.Profiler=Q,Re.StrictMode=J,Re.Suspense=Z,Re.SuspenseList=re,Re.isAsyncMode=X,Re.isConcurrentMode=S,Re.isContextConsumer=k,Re.isContextProvider=M,Re.isElement=D,Re.isForwardRef=B,Re.isFragment=C,Re.isLazy=P,Re.isMemo=j,Re.isPortal=F,Re.isProfiler=H,Re.isStrictMode=z,Re.isSuspense=R,Re.isSuspenseList=ee,Re.isValidElementType=v,Re.typeOf=m}()),Re}process.env.NODE_ENV==="production"?Ai.exports=Kc():Ai.exports=Qc();var Yr=Ai.exports;const Jc=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Zc(t){const e=`${t}`.match(Jc);return e&&e[1]||""}function ps(t,e=""){return t.displayName||t.name||Zc(t)||e}function vs(t,e,c){const h=ps(e);return t.displayName||(h!==""?`${c}(${h})`:c)}function eu(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return ps(t,"Component");if(typeof t=="object")switch(t.$$typeof){case Yr.ForwardRef:return vs(t,t.render,"ForwardRef");case Yr.Memo:return vs(t,t.type,"memo");default:return}}}function Ot(t){if(typeof t!="string")throw new Error(process.env.NODE_ENV!=="production"?"MUI: `capitalize(string)` expects a string argument.":_r(7));return t.charAt(0).toUpperCase()+t.slice(1)}function tu(...t){return t.reduce((e,c)=>c==null?e:function(...g){e.apply(this,g),c.apply(this,g)},()=>{})}function ru(t,e=166){let c;function h(...g){const y=()=>{t.apply(this,g)};clearTimeout(c),c=setTimeout(y,e)}return h.clear=()=>{clearTimeout(c)},h}function nu(t,e){return process.env.NODE_ENV==="production"?()=>null:(c,h,g,y,_)=>{const x=g||"<<anonymous>>",T=_||h;return typeof c[h]<"u"?new Error(`The ${y} \`${T}\` of \`${x}\` is deprecated. ${e}`):null}}function iu(t,e){return he.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function ms(t){return t&&t.ownerDocument||document}function ou(t){return ms(t).defaultView||window}function su(t,e){if(process.env.NODE_ENV==="production")return()=>null;const c=e?Te({},e.propTypes):null;return g=>(y,_,x,T,d,...n)=>{const u=d||_,l=c==null?void 0:c[u];if(l){const r=l(y,_,x,T,d,...n);if(r)return r}return typeof y[_]<"u"&&!y[g]?new Error(`The prop \`${u}\` of \`${t}\` can only be used together with the \`${g}\` prop.`):null}}function ys(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const bs=typeof window<"u"?he.useLayoutEffect:he.useEffect;let _s=0;function au(t){const[e,c]=he.useState(t),h=t||e;return he.useEffect(()=>{e==null&&(_s+=1,c(`mui-${_s}`))},[e]),h}const ws=he["useId"];function lu(t){if(ws!==void 0){const e=ws();return t??e}return au(t)}function cu(t,e,c,h,g){if(process.env.NODE_ENV==="production")return null;const y=g||e;return typeof t[e]<"u"?new Error(`The prop \`${y}\` is not supported. Please remove it.`):null}function uu({controlled:t,default:e,name:c,state:h="value"}){const{current:g}=he.useRef(t!==void 0),[y,_]=he.useState(e),x=g?t:y;if(process.env.NODE_ENV!=="production"){he.useEffect(()=>{g!==(t!==void 0)&&console.error([`MUI: A component is changing the ${g?"":"un"}controlled ${h} state of ${c} to be ${g?"un":""}controlled.`,"Elements should not switch from uncontrolled to controlled (or vice versa).",`Decide between using a controlled or uncontrolled ${c} element for the lifetime of the component.`,"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.","More info: https://fb.me/react-controlled-components"].join(`
`))},[h,c,t]);const{current:d}=he.useRef(e);he.useEffect(()=>{!g&&d!==e&&console.error([`MUI: A component is changing the default ${h} state of an uncontrolled ${c} after being initialized. To suppress this warning opt to use a controlled ${c}.`].join(`
`))},[JSON.stringify(e)])}const T=he.useCallback(d=>{g||_(d)},[]);return[x,T]}function hu(t){const e=he.useRef(t);return bs(()=>{e.current=t}),he.useCallback((...c)=>(0,e.current)(...c),[])}function fu(...t){return he.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(c=>{ys(c,e)})},t)}let wn=!0,Di=!1,xs;const du={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function gu(t){const{type:e,tagName:c}=t;return!!(c==="INPUT"&&du[e]&&!t.readOnly||c==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function pu(t){t.metaKey||t.altKey||t.ctrlKey||(wn=!0)}function Mi(){wn=!1}function vu(){this.visibilityState==="hidden"&&Di&&(wn=!0)}function mu(t){t.addEventListener("keydown",pu,!0),t.addEventListener("mousedown",Mi,!0),t.addEventListener("pointerdown",Mi,!0),t.addEventListener("touchstart",Mi,!0),t.addEventListener("visibilitychange",vu,!0)}function yu(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return wn||gu(e)}function bu(){const t=he.useCallback(g=>{g!=null&&mu(g.ownerDocument)},[]),e=he.useRef(!1);function c(){return e.current?(Di=!0,window.clearTimeout(xs),xs=window.setTimeout(()=>{Di=!1},100),e.current=!1,!0):!1}function h(g){return yu(g)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:h,onBlur:c,ref:t}}function Cs(t,e){const c=Te({},e);return Object.keys(t).forEach(h=>{if(h.toString().match(/^(components|slots)$/))c[h]=Te({},t[h],c[h]);else if(h.toString().match(/^(componentsProps|slotProps)$/)){const g=t[h]||{},y=e[h];c[h]={},!y||!Object.keys(y)?c[h]=g:!g||!Object.keys(g)?c[h]=y:(c[h]=Te({},y),Object.keys(g).forEach(_=>{c[h][_]=Cs(g[_],y[_])}))}else c[h]===void 0&&(c[h]=t[h])}),c}function _u(t,e,c=void 0){const h={};return Object.keys(t).forEach(g=>{h[g]=t[g].reduce((y,_)=>{if(_){const x=e(_);x!==""&&y.push(x),c&&c[_]&&y.push(c[_])}return y},[]).join(" ")}),h}const Ss=t=>t,Ts=(()=>{let t=Ss;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Ss}}})(),wu={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function ki(t,e,c="Mui"){const h=wu[e];return h?`${c}-${h}`:`${Ts.generate(t)}-${e}`}function xu(t,e,c="Mui"){const h={};return e.forEach(g=>{h[g]=ki(t,g,c)}),h}function Cu(t){var e=Object.create(null);return function(c){return e[c]===void 0&&(e[c]=t(c)),e[c]}}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Es(t,e){const c=Fc(t,e);return process.env.NODE_ENV!=="production"?(...h)=>{const g=typeof t=="string"?`"${t}"`:"component";return h.length===0?console.error([`MUI: Seems like you called \`styled(${g})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join(`
`)):h.some(y=>y===void 0)&&console.error(`MUI: the styled(${g})(...args) API requires all its args to be defined.`),c(...h)}:c}const Su=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},zt=process.env.NODE_ENV!=="production"?Ce.oneOfType([Ce.number,Ce.string,Ce.object,Ce.array]):{};function Ur(t,e){return e?jt(t,e,{clone:!1}):t}const ji={xs:0,sm:600,md:900,lg:1200,xl:1536},Os={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${ji[t]}px)`};function Rt(t,e,c){const h=t.theme||{};if(Array.isArray(e)){const y=h.breakpoints||Os;return e.reduce((_,x,T)=>(_[y.up(y.keys[T])]=c(e[T]),_),{})}if(typeof e=="object"){const y=h.breakpoints||Os;return Object.keys(e).reduce((_,x)=>{if(Object.keys(y.values||ji).indexOf(x)!==-1){const T=y.up(x);_[T]=c(e[x],x)}else{const T=x;_[T]=e[T]}return _},{})}return c(e)}function Tu(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((h,g)=>{const y=t.up(g);return h[y]={},h},{}))||{}}function Eu(t,e){return t.reduce((c,h)=>{const g=c[h];return(!g||Object.keys(g).length===0)&&delete c[h],c},e)}function xn(t,e,c=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&c){const h=`vars.${e}`.split(".").reduce((g,y)=>g&&g[y]?g[y]:null,t);if(h!=null)return h}return e.split(".").reduce((h,g)=>h&&h[g]!=null?h[g]:null,t)}function Cn(t,e,c,h=c){let g;return typeof t=="function"?g=t(c):Array.isArray(t)?g=t[c]||h:g=xn(t,c)||h,e&&(g=e(g,h,t)),g}function Ie(t){const{prop:e,cssProperty:c=t.prop,themeKey:h,transform:g}=t,y=_=>{if(_[e]==null)return null;const x=_[e],T=_.theme,d=xn(T,h)||{};return Rt(_,x,u=>{let l=Cn(d,g,u);return u===l&&typeof u=="string"&&(l=Cn(d,g,`${e}${u==="default"?"":Ot(u)}`,u)),c===!1?l:{[c]:l}})};return y.propTypes=process.env.NODE_ENV!=="production"?{[e]:zt}:{},y.filterProps=[e],y}function Sn(...t){const e=t.reduce((h,g)=>(g.filterProps.forEach(y=>{h[y]=g}),h),{}),c=h=>Object.keys(h).reduce((g,y)=>e[y]?Ur(g,e[y](h)):g,{});return c.propTypes=process.env.NODE_ENV!=="production"?t.reduce((h,g)=>Object.assign(h,g.propTypes),{}):{},c.filterProps=t.reduce((h,g)=>h.concat(g.filterProps),[]),c}function Ou(t){const e={};return c=>(e[c]===void 0&&(e[c]=t(c)),e[c])}const Pu={m:"margin",p:"padding"},Au={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ps={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Du=Ou(t=>{if(t.length>2)if(Ps[t])t=Ps[t];else return[t];const[e,c]=t.split(""),h=Pu[e],g=Au[c]||"";return Array.isArray(g)?g.map(y=>h+y):[h+g]}),Tn=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],En=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],Mu=[...Tn,...En];function Hr(t,e,c,h){var g;const y=(g=xn(t,e,!1))!=null?g:c;return typeof y=="number"?_=>typeof _=="string"?_:(process.env.NODE_ENV!=="production"&&typeof _!="number"&&console.error(`MUI: Expected ${h} argument to be a number or a string, got ${_}.`),y*_):Array.isArray(y)?_=>typeof _=="string"?_:(process.env.NODE_ENV!=="production"&&(Number.isInteger(_)?_>y.length-1&&console.error([`MUI: The value provided (${_}) overflows.`,`The supported values are: ${JSON.stringify(y)}.`,`${_} > ${y.length-1}, you need to add the missing values.`].join(`
`)):console.error([`MUI: The \`theme.${e}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${e}\` as a number.`].join(`
`))),y[_]):typeof y=="function"?y:(process.env.NODE_ENV!=="production"&&console.error([`MUI: The \`theme.${e}\` value (${y}) is invalid.`,"It should be a number, an array or a function."].join(`
`)),()=>{})}function As(t){return Hr(t,"spacing",8,"spacing")}function zr(t,e){if(typeof e=="string"||e==null)return e;const c=Math.abs(e),h=t(c);return e>=0?h:typeof h=="number"?-h:`-${h}`}function ku(t,e){return c=>t.reduce((h,g)=>(h[g]=zr(e,c),h),{})}function ju(t,e,c,h){if(e.indexOf(c)===-1)return null;const g=Du(c),y=ku(g,h),_=t[c];return Rt(t,_,y)}function Ds(t,e){const c=As(t.theme);return Object.keys(t).map(h=>ju(t,e,h,c)).reduce(Ur,{})}function He(t){return Ds(t,Tn)}He.propTypes=process.env.NODE_ENV!=="production"?Tn.reduce((t,e)=>(t[e]=zt,t),{}):{},He.filterProps=Tn;function ze(t){return Ds(t,En)}ze.propTypes=process.env.NODE_ENV!=="production"?En.reduce((t,e)=>(t[e]=zt,t),{}):{},ze.filterProps=En,process.env.NODE_ENV!=="production"&&Mu.reduce((t,e)=>(t[e]=zt,t),{});function Pt(t){return typeof t!="number"?t:`${t}px solid`}const Ru=Ie({prop:"border",themeKey:"borders",transform:Pt}),Iu=Ie({prop:"borderTop",themeKey:"borders",transform:Pt}),Lu=Ie({prop:"borderRight",themeKey:"borders",transform:Pt}),Fu=Ie({prop:"borderBottom",themeKey:"borders",transform:Pt}),Bu=Ie({prop:"borderLeft",themeKey:"borders",transform:Pt}),Nu=Ie({prop:"borderColor",themeKey:"palette"}),Vu=Ie({prop:"borderTopColor",themeKey:"palette"}),Yu=Ie({prop:"borderRightColor",themeKey:"palette"}),Uu=Ie({prop:"borderBottomColor",themeKey:"palette"}),Hu=Ie({prop:"borderLeftColor",themeKey:"palette"}),On=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Hr(t.theme,"shape.borderRadius",4,"borderRadius"),c=h=>({borderRadius:zr(e,h)});return Rt(t,t.borderRadius,c)}return null};On.propTypes=process.env.NODE_ENV!=="production"?{borderRadius:zt}:{},On.filterProps=["borderRadius"],Sn(Ru,Iu,Lu,Fu,Bu,Nu,Vu,Yu,Uu,Hu,On);const Pn=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Hr(t.theme,"spacing",8,"gap"),c=h=>({gap:zr(e,h)});return Rt(t,t.gap,c)}return null};Pn.propTypes=process.env.NODE_ENV!=="production"?{gap:zt}:{},Pn.filterProps=["gap"];const An=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Hr(t.theme,"spacing",8,"columnGap"),c=h=>({columnGap:zr(e,h)});return Rt(t,t.columnGap,c)}return null};An.propTypes=process.env.NODE_ENV!=="production"?{columnGap:zt}:{},An.filterProps=["columnGap"];const Dn=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Hr(t.theme,"spacing",8,"rowGap"),c=h=>({rowGap:zr(e,h)});return Rt(t,t.rowGap,c)}return null};Dn.propTypes=process.env.NODE_ENV!=="production"?{rowGap:zt}:{},Dn.filterProps=["rowGap"];const zu=Ie({prop:"gridColumn"}),Wu=Ie({prop:"gridRow"}),Xu=Ie({prop:"gridAutoFlow"}),Gu=Ie({prop:"gridAutoColumns"}),$u=Ie({prop:"gridAutoRows"}),qu=Ie({prop:"gridTemplateColumns"}),Ku=Ie({prop:"gridTemplateRows"}),Qu=Ie({prop:"gridTemplateAreas"}),Ju=Ie({prop:"gridArea"});Sn(Pn,An,Dn,zu,Wu,Xu,Gu,$u,qu,Ku,Qu,Ju);function wr(t,e){return e==="grey"?e:t}const Zu=Ie({prop:"color",themeKey:"palette",transform:wr}),eh=Ie({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:wr}),th=Ie({prop:"backgroundColor",themeKey:"palette",transform:wr});Sn(Zu,eh,th);function st(t){return t<=1&&t!==0?`${t*100}%`:t}const rh=Ie({prop:"width",transform:st}),Ri=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=c=>{var h,g,y;return{maxWidth:((h=t.theme)==null||(g=h.breakpoints)==null||(y=g.values)==null?void 0:y[c])||ji[c]||st(c)}};return Rt(t,t.maxWidth,e)}return null};Ri.filterProps=["maxWidth"];const nh=Ie({prop:"minWidth",transform:st}),ih=Ie({prop:"height",transform:st}),oh=Ie({prop:"maxHeight",transform:st}),sh=Ie({prop:"minHeight",transform:st});Ie({prop:"size",cssProperty:"width",transform:st}),Ie({prop:"size",cssProperty:"height",transform:st});const ah=Ie({prop:"boxSizing"});Sn(rh,Ri,nh,ih,oh,sh,ah);const Mn={border:{themeKey:"borders",transform:Pt},borderTop:{themeKey:"borders",transform:Pt},borderRight:{themeKey:"borders",transform:Pt},borderBottom:{themeKey:"borders",transform:Pt},borderLeft:{themeKey:"borders",transform:Pt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:On},color:{themeKey:"palette",transform:wr},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:wr},backgroundColor:{themeKey:"palette",transform:wr},p:{style:ze},pt:{style:ze},pr:{style:ze},pb:{style:ze},pl:{style:ze},px:{style:ze},py:{style:ze},padding:{style:ze},paddingTop:{style:ze},paddingRight:{style:ze},paddingBottom:{style:ze},paddingLeft:{style:ze},paddingX:{style:ze},paddingY:{style:ze},paddingInline:{style:ze},paddingInlineStart:{style:ze},paddingInlineEnd:{style:ze},paddingBlock:{style:ze},paddingBlockStart:{style:ze},paddingBlockEnd:{style:ze},m:{style:He},mt:{style:He},mr:{style:He},mb:{style:He},ml:{style:He},mx:{style:He},my:{style:He},margin:{style:He},marginTop:{style:He},marginRight:{style:He},marginBottom:{style:He},marginLeft:{style:He},marginX:{style:He},marginY:{style:He},marginInline:{style:He},marginInlineStart:{style:He},marginInlineEnd:{style:He},marginBlock:{style:He},marginBlockStart:{style:He},marginBlockEnd:{style:He},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Pn},rowGap:{style:Dn},columnGap:{style:An},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:st},maxWidth:{style:Ri},minWidth:{transform:st},height:{transform:st},maxHeight:{transform:st},minHeight:{transform:st},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function lh(...t){const e=t.reduce((h,g)=>h.concat(Object.keys(g)),[]),c=new Set(e);return t.every(h=>c.size===Object.keys(h).length)}function ch(t,e){return typeof t=="function"?t(e):t}function uh(){function t(c,h,g,y){const _={[c]:h,theme:g},x=y[c];if(!x)return{[c]:h};const{cssProperty:T=c,themeKey:d,transform:n,style:u}=x;if(h==null)return null;if(d==="typography"&&h==="inherit")return{[c]:h};const l=xn(g,d)||{};return u?u(_):Rt(_,h,o=>{let i=Cn(l,n,o);return o===i&&typeof o=="string"&&(i=Cn(l,n,`${c}${o==="default"?"":Ot(o)}`,o)),T===!1?i:{[T]:i}})}function e(c){var h;const{sx:g,theme:y={}}=c||{};if(!g)return null;const _=(h=y.unstable_sxConfig)!=null?h:Mn;function x(T){let d=T;if(typeof T=="function")d=T(y);else if(typeof T!="object")return T;if(!d)return null;const n=Tu(y.breakpoints),u=Object.keys(n);let l=n;return Object.keys(d).forEach(r=>{const o=ch(d[r],y);if(o!=null)if(typeof o=="object")if(_[r])l=Ur(l,t(r,o,y,_));else{const i=Rt({theme:y},o,a=>({[r]:a}));lh(i,o)?l[r]=e({sx:o,theme:y}):l=Ur(l,i)}else l=Ur(l,t(r,o,y,_))}),Eu(u,l)}return Array.isArray(g)?g.map(x):x(g)}return e}const Ms=uh();Ms.filterProps=["sx"];const kn=Ms;function at(t,e){if(t==null)return{};var c={},h=Object.keys(t),g,y;for(y=0;y<h.length;y++)g=h[y],!(e.indexOf(g)>=0)&&(c[g]=t[g]);return c}const hh=["sx"],fh=t=>{var e,c;const h={systemProps:{},otherProps:{}},g=(e=t==null||(c=t.theme)==null?void 0:c.unstable_sxConfig)!=null?e:Mn;return Object.keys(t).forEach(y=>{g[y]?h.systemProps[y]=t[y]:h.otherProps[y]=t[y]}),h};function dh(t){const{sx:e}=t,c=at(t,hh),{systemProps:h,otherProps:g}=fh(c);let y;return Array.isArray(e)?y=[h,...e]:typeof e=="function"?y=(..._)=>{const x=e(..._);return Jt(x)?Te({},h,x):h}:y=Te({},h,e),Te({},g,{sx:y})}function ks(t){var e,c,h="";if(typeof t=="string"||typeof t=="number")h+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(c=ks(t[e]))&&(h&&(h+=" "),h+=c);else for(e in t)t[e]&&(h&&(h+=" "),h+=e);return h}function js(){for(var t,e,c=0,h="";c<arguments.length;)(t=arguments[c++])&&(e=ks(t))&&(h&&(h+=" "),h+=e);return h}const gh=["values","unit","step"],ph=t=>{const e=Object.keys(t).map(c=>({key:c,val:t[c]}))||[];return e.sort((c,h)=>c.val-h.val),e.reduce((c,h)=>Te({},c,{[h.key]:h.val}),{})};function vh(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:c="px",step:h=5}=t,g=at(t,gh),y=ph(e),_=Object.keys(y);function x(l){return`@media (min-width:${typeof e[l]=="number"?e[l]:l}${c})`}function T(l){return`@media (max-width:${(typeof e[l]=="number"?e[l]:l)-h/100}${c})`}function d(l,r){const o=_.indexOf(r);return`@media (min-width:${typeof e[l]=="number"?e[l]:l}${c}) and (max-width:${(o!==-1&&typeof e[_[o]]=="number"?e[_[o]]:r)-h/100}${c})`}function n(l){return _.indexOf(l)+1<_.length?d(l,_[_.indexOf(l)+1]):x(l)}function u(l){const r=_.indexOf(l);return r===0?x(_[1]):r===_.length-1?T(_[r]):d(l,_[_.indexOf(l)+1]).replace("@media","@media not all and")}return Te({keys:_,values:y,up:x,down:T,between:d,only:n,not:u,unit:c},g)}const mh={borderRadius:4};function yh(t=8){if(t.mui)return t;const e=As({spacing:t}),c=(...h)=>(process.env.NODE_ENV!=="production"&&(h.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${h.length}`)),(h.length===0?[1]:h).map(y=>{const _=e(y);return typeof _=="number"?`${_}px`:_}).join(" "));return c.mui=!0,c}const bh=["breakpoints","palette","spacing","shape"];function Ii(t={},...e){const{breakpoints:c={},palette:h={},spacing:g,shape:y={}}=t,_=at(t,bh),x=vh(c),T=yh(g);let d=jt({breakpoints:x,direction:"ltr",components:{},palette:Te({mode:"light"},h),spacing:T,shape:Te({},mh,y)},_);return d=e.reduce((n,u)=>jt(n,u),d),d.unstable_sxConfig=Te({},Mn,_==null?void 0:_.unstable_sxConfig),d.unstable_sx=function(u){return kn({sx:u,theme:this})},d}const Rs=he.createContext(null);process.env.NODE_ENV!=="production"&&(Rs.displayName="ThemeContext");const _h=Rs;function wh(){const t=he.useContext(_h);return process.env.NODE_ENV!=="production"&&he.useDebugValue(t),t}function xh(t){return Object.keys(t).length===0}function Ch(t=null){const e=wh();return!e||xh(e)?t:e}const Sh=Ii();function Is(t=Sh){return Ch(t)}const Th=["className","component"];function Eh(t={}){const{defaultTheme:e,defaultClassName:c="MuiBox-root",generateClassName:h}=t,g=Es("div",{shouldForwardProp:_=>_!=="theme"&&_!=="sx"&&_!=="as"})(kn);return he.forwardRef(function(x,T){const d=Is(e),n=dh(x),{className:u,component:l="div"}=n,r=at(n,Th);return I.jsx(g,Te({as:l,ref:T,className:js(u,h?h(c):c),theme:d},r))})}const Ls=Eh();process.env.NODE_ENV!=="production"&&(Ls.propTypes={children:Ce.node,component:Ce.elementType,sx:Ce.oneOfType([Ce.arrayOf(Ce.oneOfType([Ce.func,Ce.object,Ce.bool])),Ce.func,Ce.object])});const Wt=Ls,Oh=["variant"];function Fs(t){return t.length===0}function Bs(t){const{variant:e}=t,c=at(t,Oh);let h=e||"";return Object.keys(c).sort().forEach(g=>{g==="color"?h+=Fs(h)?t[g]:Ot(t[g]):h+=`${Fs(h)?g:Ot(g)}${Ot(t[g].toString())}`}),h}const Ph=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ah=["theme"],Dh=["theme"];function Wr(t){return Object.keys(t).length===0}function Mh(t){return typeof t=="string"&&t.charCodeAt(0)>96}const kh=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,jh=(t,e)=>{let c=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(c=e.components[t].variants);const h={};return c.forEach(g=>{const y=Bs(g.props);h[y]=g.style}),h},Rh=(t,e,c,h)=>{var g,y;const{ownerState:_={}}=t,x=[],T=c==null||(g=c.components)==null||(y=g[h])==null?void 0:y.variants;return T&&T.forEach(d=>{let n=!0;Object.keys(d.props).forEach(u=>{_[u]!==d.props[u]&&t[u]!==d.props[u]&&(n=!1)}),n&&x.push(e[Bs(d.props)])}),x};function jn(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Ih=Ii(),Lh=t=>t.charAt(0).toLowerCase()+t.slice(1);function Fh(t={}){const{defaultTheme:e=Ih,rootShouldForwardProp:c=jn,slotShouldForwardProp:h=jn}=t,g=y=>{const _=Wr(y.theme)?e:y.theme;return kn(Te({},y,{theme:_}))};return g.__mui_systemSx=!0,(y,_={})=>{Su(y,p=>p.filter(v=>!(v!=null&&v.__mui_systemSx)));const{name:x,slot:T,skipVariantsResolver:d,skipSx:n,overridesResolver:u}=_,l=at(_,Ph),r=d!==void 0?d:T&&T!=="Root"||!1,o=n||!1;let i;process.env.NODE_ENV!=="production"&&x&&(i=`${x}-${Lh(T||"Root")}`);let a=jn;T==="Root"?a=c:T?a=h:Mh(y)&&(a=void 0);const f=Es(y,Te({shouldForwardProp:a,label:i},l)),s=(p,...v)=>{const m=v?v.map(A=>typeof A=="function"&&A.__emotion_real!==A?O=>{let{theme:L}=O,Y=at(O,Ah);return A(Te({theme:Wr(L)?e:L},Y))}:A):[];let b=p;x&&u&&m.push(A=>{const O=Wr(A.theme)?e:A.theme,L=kh(x,O);if(L){const Y={};return Object.entries(L).forEach(([V,Q])=>{Y[V]=typeof Q=="function"?Q(Te({},A,{theme:O})):Q}),u(A,Y)}return null}),x&&!r&&m.push(A=>{const O=Wr(A.theme)?e:A.theme;return Rh(A,jh(x,O),O,x)}),o||m.push(g);const w=m.length-v.length;if(Array.isArray(p)&&w>0){const A=new Array(w).fill("");b=[...p,...A],b.raw=[...p.raw,...A]}else typeof p=="function"&&p.__emotion_real!==p&&(b=A=>{let{theme:O}=A,L=at(A,Dh);return p(Te({theme:Wr(O)?e:O},L))});const E=f(b,...m);if(process.env.NODE_ENV!=="production"){let A;x&&(A=`${x}${T||""}`),A===void 0&&(A=`Styled(${eu(y)})`),E.displayName=A}return E};return f.withConfig&&(s.withConfig=f.withConfig),s}}function Bh(t){const{theme:e,name:c,props:h}=t;return!e||!e.components||!e.components[c]||!e.components[c].defaultProps?h:Cs(e.components[c].defaultProps,h)}function Nh({props:t,name:e,defaultTheme:c}){const h=Is(c);return Bh({theme:h,name:e,props:t})}function Ns(t,e=0,c=1){return process.env.NODE_ENV!=="production"&&(t<e||t>c)&&console.error(`MUI: The value provided ${t} is out of range [${e}, ${c}].`),Math.min(Math.max(e,t),c)}function Vh(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let c=t.match(e);return c&&c[0].length===1&&(c=c.map(h=>h+h)),c?`rgb${c.length===4?"a":""}(${c.map((h,g)=>g<3?parseInt(h,16):Math.round(parseInt(h,16)/255*1e3)/1e3).join(", ")})`:""}function xr(t){if(t.type)return t;if(t.charAt(0)==="#")return xr(Vh(t));const e=t.indexOf("("),c=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(c)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: Unsupported \`${t}\` color.
The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`:_r(9,t));let h=t.substring(e+1,t.length-1),g;if(c==="color"){if(h=h.split(" "),g=h.shift(),h.length===4&&h[3].charAt(0)==="/"&&(h[3]=h[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(g)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: unsupported \`${g}\` color space.
The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`:_r(10,g))}else h=h.split(",");return h=h.map(y=>parseFloat(y)),{type:c,values:h,colorSpace:g}}function Li(t){const{type:e,colorSpace:c}=t;let{values:h}=t;return e.indexOf("rgb")!==-1?h=h.map((g,y)=>y<3?parseInt(g,10):g):e.indexOf("hsl")!==-1&&(h[1]=`${h[1]}%`,h[2]=`${h[2]}%`),e.indexOf("color")!==-1?h=`${c} ${h.join(" ")}`:h=`${h.join(", ")}`,`${e}(${h})`}function Yh(t){t=xr(t);const{values:e}=t,c=e[0],h=e[1]/100,g=e[2]/100,y=h*Math.min(g,1-g),_=(d,n=(d+c/30)%12)=>g-y*Math.max(Math.min(n-3,9-n,1),-1);let x="rgb";const T=[Math.round(_(0)*255),Math.round(_(8)*255),Math.round(_(4)*255)];return t.type==="hsla"&&(x+="a",T.push(e[3])),Li({type:x,values:T})}function Vs(t){t=xr(t);let e=t.type==="hsl"||t.type==="hsla"?xr(Yh(t)).values:t.values;return e=e.map(c=>(t.type!=="color"&&(c/=255),c<=.03928?c/12.92:((c+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Ys(t,e){const c=Vs(t),h=Vs(e);return(Math.max(c,h)+.05)/(Math.min(c,h)+.05)}function Uh(t,e){if(t=xr(t),e=Ns(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let c=0;c<3;c+=1)t.values[c]*=1-e;return Li(t)}function Hh(t,e){if(t=xr(t),e=Ns(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let c=0;c<3;c+=1)t.values[c]+=(255-t.values[c])*e;else if(t.type.indexOf("color")!==-1)for(let c=0;c<3;c+=1)t.values[c]+=(1-t.values[c])*e;return Li(t)}var zh={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(e,c){return"Cannot apply '"+e+"' to '"+c.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(e,c){return"[mobx.array] Index out of bounds, "+e+" is larger than "+c},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(e){return"Cannot initialize from classes that inherit from Map: "+e.constructor.name},20:function(e){return"Cannot initialize map from "+e},21:function(e){return"Cannot convert to map from '"+e+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(e){return"Cannot obtain administration from "+e},25:function(e,c){return"the entry '"+e+"' does not exist in the observable map '"+c+"'"},26:"please specify a property",27:function(e,c){return"no observable property '"+e.toString()+"' found on the observable object '"+c+"'"},28:function(e){return"Cannot obtain atom from "+e},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(e,c){return"Cycle detected in computation "+e+": "+c},33:function(e){return"The setter of computed value '"+e+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(e){return"[ComputedValue '"+e+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(e){return"[mobx] `observableArray."+e+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+e+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"},Wh=process.env.NODE_ENV!=="production"?zh:{};function ge(t){for(var e=arguments.length,c=new Array(e>1?e-1:0),h=1;h<e;h++)c[h-1]=arguments[h];if(process.env.NODE_ENV!=="production"){var g=typeof t=="string"?t:Wh[t];throw typeof g=="function"&&(g=g.apply(null,c)),new Error("[MobX] "+g)}throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(c.length?" "+c.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var Xh={};function Fi(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Xh}var Us=Object.assign,Rn=Object.getOwnPropertyDescriptor,At=Object.defineProperty,In=Object.prototype,Ln=[];Object.freeze(Ln);var Hs={};Object.freeze(Hs);var Gh=typeof Proxy<"u",$h=Object.toString();function zs(){Gh||ge(process.env.NODE_ENV!=="production"?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function Xr(t){process.env.NODE_ENV!=="production"&&oe.verifyProxies&&ge("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+t)}function xt(){return++oe.mobxGuid}function Bi(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var Cr=function(){};function Ge(t){return typeof t=="function"}function Zt(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function Fn(t){return t!==null&&typeof t=="object"}function lt(t){if(!Fn(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var c=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof c=="function"&&c.toString()===$h}function Ws(t){var e=t==null?void 0:t.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function Gr(t,e,c){At(t,e,{enumerable:!1,writable:!0,configurable:!0,value:c})}function Xs(t,e,c){At(t,e,{enumerable:!1,writable:!1,configurable:!0,value:c})}function er(t,e){var c="isMobX"+t;return e.prototype[c]=!0,function(h){return Fn(h)&&h[c]===!0}}function Sr(t){return t instanceof Map}function $r(t){return t instanceof Set}var Gs=typeof Object.getOwnPropertySymbols<"u";function qh(t){var e=Object.keys(t);if(!Gs)return e;var c=Object.getOwnPropertySymbols(t);return c.length?[].concat(e,c.filter(function(h){return In.propertyIsEnumerable.call(t,h)})):e}var Tr=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Gs?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function Ni(t){return typeof t=="string"?t:typeof t=="symbol"?t.toString():new String(t).toString()}function $s(t){return t===null?null:typeof t=="object"?""+t:t}function gt(t,e){return In.hasOwnProperty.call(t,e)}var Kh=Object.getOwnPropertyDescriptors||function(e){var c={};return Tr(e).forEach(function(h){c[h]=Rn(e,h)}),c};function qs(t,e){for(var c=0;c<e.length;c++){var h=e[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,Zh(h.key),h)}}function Vi(t,e,c){return e&&qs(t.prototype,e),c&&qs(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}function It(){return It=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(t[h]=c[h])}return t},It.apply(this,arguments)}function Ks(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yi(t,e)}function Yi(t,e){return Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},Yi(t,e)}function Bn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qh(t,e){if(t){if(typeof t=="string")return Qs(t,e);var c=Object.prototype.toString.call(t).slice(8,-1);if(c==="Object"&&t.constructor&&(c=t.constructor.name),c==="Map"||c==="Set")return Array.from(t);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Qs(t,e)}}function Qs(t,e){(e==null||e>t.length)&&(e=t.length);for(var c=0,h=new Array(e);c<e;c++)h[c]=t[c];return h}function Er(t,e){var c=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(c)return(c=c.call(t)).next.bind(c);if(Array.isArray(t)||(c=Qh(t))||e&&t&&typeof t.length=="number"){c&&(t=c);var h=0;return function(){return h>=t.length?{done:!0}:{done:!1,value:t[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jh(t,e){if(typeof t!="object"||t===null)return t;var c=t[Symbol.toPrimitive];if(c!==void 0){var h=c.call(t,e||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zh(t){var e=Jh(t,"string");return typeof e=="symbol"?e:String(e)}var it=Symbol("mobx-stored-annotations");function Dt(t){function e(c,h){if(qr(h))return t.decorate_20223_(c,h);Or(c,h,t)}return Object.assign(e,t)}function Or(t,e,c){if(gt(t,it)||Gr(t,it,It({},t[it])),process.env.NODE_ENV!=="production"&&Un(c)&&!gt(t[it],e)){var h=t.constructor.name+".prototype."+e.toString();ge("'"+h+"' is decorated with 'override', but no such decorated member was found on prototype.")}ef(t,c,e),Un(c)||(t[it][e]=c)}function ef(t,e,c){if(process.env.NODE_ENV!=="production"&&!Un(e)&&gt(t[it],c)){var h=t.constructor.name+".prototype."+c.toString(),g=t[it][c].annotationType_,y=e.annotationType_;ge("Cannot apply '@"+y+"' to '"+h+"':"+(`
The field is already decorated with '@`+g+"'.")+`
Re-decorating fields is not allowed.
Use '@override' decorator for methods overridden by subclass.`)}}function tf(t){return gt(t,it)||Gr(t,it,It({},t[it])),t[it]}function qr(t){return typeof t=="object"&&typeof t.kind=="string"}function Nn(t,e){process.env.NODE_ENV!=="production"&&!e.includes(t.kind)&&ge("The decorator applied to '"+String(t.name)+"' cannot be used on a "+t.kind+" element")}var ye=Symbol("mobx administration"),Kr=function(){function t(c){c===void 0&&(c=process.env.NODE_ENV!=="production"?"Atom@"+xt():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Pe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=c}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(h){return h()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(h){return h()})},e.reportObserved=function(){return ya(this)},e.reportChanged=function(){vt(),ba(this),mt()},e.toString=function(){return this.name_},t}(),Ui=er("Atom",Kr);function Js(t,e,c){e===void 0&&(e=Cr),c===void 0&&(c=Cr);var h=new Kr(t);return e!==Cr&&yd(h,e),c!==Cr&&Ea(h,c),h}function rf(t,e){return t===e}function nf(t,e){return so(t,e)}function of(t,e){return so(t,e,1)}function sf(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Vn={identity:rf,structural:nf,default:sf,shallow:of};function tr(t,e,c){return nn(t)?t:Array.isArray(t)?Ke.array(t,{name:c}):lt(t)?Ke.object(t,void 0,{name:c}):Sr(t)?Ke.map(t,{name:c}):$r(t)?Ke.set(t,{name:c}):typeof t=="function"&&!tn(t)&&!rn(t)?Ws(t)?Ar(t):en(c,t):t}function af(t,e,c){if(t==null||cr(t)||an(t)||Bt(t)||Dr(t))return t;if(Array.isArray(t))return Ke.array(t,{name:c,deep:!1});if(lt(t))return Ke.object(t,void 0,{name:c,deep:!1});if(Sr(t))return Ke.map(t,{name:c,deep:!1});if($r(t))return Ke.set(t,{name:c,deep:!1});process.env.NODE_ENV!=="production"&&ge("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}function Yn(t){return t}function lf(t,e){return process.env.NODE_ENV!=="production"&&nn(t)&&ge("observable.struct should not be used with observable values"),so(t,e)?e:t}var cf="override";function Un(t){return t.annotationType_===cf}function Qr(t,e){return{annotationType_:t,options_:e,make_:uf,extend_:hf,decorate_20223_:ff}}function uf(t,e,c,h){var g;if((g=this.options_)!=null&&g.bound)return this.extend_(t,e,c,!1)===null?0:1;if(h===t.target_)return this.extend_(t,e,c,!1)===null?0:2;if(tn(c.value))return 1;var y=Zs(t,this,e,c,!1);return At(h,e,y),2}function hf(t,e,c,h){var g=Zs(t,this,e,c);return t.defineProperty_(e,g,h)}function ff(t,e){process.env.NODE_ENV!=="production"&&Nn(e,["method","field"]);var c=e.kind,h=e.name,g=e.addInitializer,y=this,_=function(d){var n,u,l,r;return rr((n=(u=y.options_)==null?void 0:u.name)!=null?n:h.toString(),d,(l=(r=y.options_)==null?void 0:r.autoAction)!=null?l:!1)};if(c=="field"){g(function(){Or(this,h,y)});return}if(c=="method"){var x;return tn(t)||(t=_(t)),(x=this.options_)!=null&&x.bound&&g(function(){var T=this,d=T[h].bind(T);d.isMobxAction=!0,T[h]=d}),t}ge("Cannot apply '"+y.annotationType_+"' to '"+String(h)+"' (kind: "+c+"):"+(`
'`+y.annotationType_+"' can only be used on properties with a function value."))}function df(t,e,c,h){var g=e.annotationType_,y=h.value;process.env.NODE_ENV!=="production"&&!Ge(y)&&ge("Cannot apply '"+g+"' to '"+t.name_+"."+c.toString()+"':"+(`
'`+g+"' can only be used on properties with a function value."))}function Zs(t,e,c,h,g){var y,_,x,T,d,n,u;g===void 0&&(g=oe.safeDescriptors),df(t,e,c,h);var l=h.value;if((y=e.options_)!=null&&y.bound){var r;l=l.bind((r=t.proxy_)!=null?r:t.target_)}return{value:rr((_=(x=e.options_)==null?void 0:x.name)!=null?_:c.toString(),l,(T=(d=e.options_)==null?void 0:d.autoAction)!=null?T:!1,(n=e.options_)!=null&&n.bound?(u=t.proxy_)!=null?u:t.target_:void 0),configurable:g?t.isPlainObject_:!0,enumerable:!1,writable:!g}}function ea(t,e){return{annotationType_:t,options_:e,make_:gf,extend_:pf,decorate_20223_:vf}}function gf(t,e,c,h){var g;if(h===t.target_)return this.extend_(t,e,c,!1)===null?0:2;if((g=this.options_)!=null&&g.bound&&(!gt(t.target_,e)||!rn(t.target_[e]))&&this.extend_(t,e,c,!1)===null)return 0;if(rn(c.value))return 1;var y=ta(t,this,e,c,!1,!1);return At(h,e,y),2}function pf(t,e,c,h){var g,y=ta(t,this,e,c,(g=this.options_)==null?void 0:g.bound);return t.defineProperty_(e,y,h)}function vf(t,e){var c;process.env.NODE_ENV!=="production"&&Nn(e,["method"]);var h=e.name,g=e.addInitializer;return rn(t)||(t=Ar(t)),(c=this.options_)!=null&&c.bound&&g(function(){var y=this,_=y[h].bind(y);_.isMobXFlow=!0,y[h]=_}),t}function mf(t,e,c,h){var g=e.annotationType_,y=h.value;process.env.NODE_ENV!=="production"&&!Ge(y)&&ge("Cannot apply '"+g+"' to '"+t.name_+"."+c.toString()+"':"+(`
'`+g+"' can only be used on properties with a generator function value."))}function ta(t,e,c,h,g,y){y===void 0&&(y=oe.safeDescriptors),mf(t,e,c,h);var _=h.value;if(rn(_)||(_=Ar(_)),g){var x;_=_.bind((x=t.proxy_)!=null?x:t.target_),_.isMobXFlow=!0}return{value:_,configurable:y?t.isPlainObject_:!0,enumerable:!1,writable:!y}}function Hi(t,e){return{annotationType_:t,options_:e,make_:yf,extend_:bf,decorate_20223_:_f}}function yf(t,e,c){return this.extend_(t,e,c,!1)===null?0:1}function bf(t,e,c,h){return wf(t,this,e,c),t.defineComputedProperty_(e,It({},this.options_,{get:c.get,set:c.set}),h)}function _f(t,e){process.env.NODE_ENV!=="production"&&Nn(e,["getter"]);var c=this,h=e.name,g=e.addInitializer;return g(function(){var y=lr(this)[ye],_=It({},c.options_,{get:t,context:this});_.name||(_.name=process.env.NODE_ENV!=="production"?y.name_+"."+h.toString():"ObservableObject."+h.toString()),y.values_.set(h,new ir(_))}),function(){return this[ye].getObservablePropValue_(h)}}function wf(t,e,c,h){var g=e.annotationType_,y=h.get;process.env.NODE_ENV!=="production"&&!y&&ge("Cannot apply '"+g+"' to '"+t.name_+"."+c.toString()+"':"+(`
'`+g+"' can only be used on getter(+setter) properties."))}function Hn(t,e){return{annotationType_:t,options_:e,make_:xf,extend_:Cf,decorate_20223_:Sf}}function xf(t,e,c){return this.extend_(t,e,c,!1)===null?0:1}function Cf(t,e,c,h){var g,y;return Tf(t,this,e,c),t.defineObservableProperty_(e,c.value,(g=(y=this.options_)==null?void 0:y.enhancer)!=null?g:tr,h)}function Sf(t,e){if(process.env.NODE_ENV!=="production"){if(e.kind==="field")throw ge("Please use `@observable accessor "+String(e.name)+"` instead of `@observable "+String(e.name)+"`");Nn(e,["accessor"])}var c=this,h=e.kind,g=e.name,y=new WeakSet;function _(x,T){var d,n,u=lr(x)[ye],l=new nr(T,(d=(n=c.options_)==null?void 0:n.enhancer)!=null?d:tr,process.env.NODE_ENV!=="production"?u.name_+"."+g.toString():"ObservableObject."+g.toString(),!1);u.values_.set(g,l),y.add(x)}if(h=="accessor")return{get:function(){return y.has(this)||_(this,t.get.call(this)),this[ye].getObservablePropValue_(g)},set:function(T){return y.has(this)||_(this,T),this[ye].setObservablePropValue_(g,T)},init:function(T){return y.has(this)||_(this,T),T}}}function Tf(t,e,c,h){var g=e.annotationType_;process.env.NODE_ENV!=="production"&&!("value"in h)&&ge("Cannot apply '"+g+"' to '"+t.name_+"."+c.toString()+"':"+(`
'`+g+"' cannot be used on getter/setter properties"))}var Ef="true",Of=ra();function ra(t){return{annotationType_:Ef,options_:t,make_:Pf,extend_:Af,decorate_20223_:Df}}function Pf(t,e,c,h){var g,y;if(c.get)return Xn.make_(t,e,c,h);if(c.set){var _=rr(e.toString(),c.set);return h===t.target_?t.defineProperty_(e,{configurable:oe.safeDescriptors?t.isPlainObject_:!0,set:_})===null?0:2:(At(h,e,{configurable:!0,set:_}),2)}if(h!==t.target_&&typeof c.value=="function"){var x;if(Ws(c.value)){var T,d=(T=this.options_)!=null&&T.autoBind?Ar.bound:Ar;return d.make_(t,e,c,h)}var n=(x=this.options_)!=null&&x.autoBind?en.bound:en;return n.make_(t,e,c,h)}var u=((g=this.options_)==null?void 0:g.deep)===!1?Ke.ref:Ke;if(typeof c.value=="function"&&(y=this.options_)!=null&&y.autoBind){var l;c.value=c.value.bind((l=t.proxy_)!=null?l:t.target_)}return u.make_(t,e,c,h)}function Af(t,e,c,h){var g,y;if(c.get)return Xn.extend_(t,e,c,h);if(c.set)return t.defineProperty_(e,{configurable:oe.safeDescriptors?t.isPlainObject_:!0,set:rr(e.toString(),c.set)},h);if(typeof c.value=="function"&&(g=this.options_)!=null&&g.autoBind){var _;c.value=c.value.bind((_=t.proxy_)!=null?_:t.target_)}var x=((y=this.options_)==null?void 0:y.deep)===!1?Ke.ref:Ke;return x.extend_(t,e,c,h)}function Df(t,e){ge("'"+this.annotationType_+"' cannot be used as a decorator")}var Mf="observable",kf="observable.ref",jf="observable.shallow",Rf="observable.struct",na={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(na);function zn(t){return t||na}var zi=Hn(Mf),If=Hn(kf,{enhancer:Yn}),Lf=Hn(jf,{enhancer:af}),Ff=Hn(Rf,{enhancer:lf}),ia=Dt(zi);function Wn(t){return t.deep===!0?tr:t.deep===!1?Yn:Nf(t.defaultDecorator)}function Bf(t){var e;return t?(e=t.defaultDecorator)!=null?e:ra(t):void 0}function Nf(t){var e,c;return t&&(e=(c=t.options_)==null?void 0:c.enhancer)!=null?e:tr}function oa(t,e,c){if(qr(e))return zi.decorate_20223_(t,e);if(Zt(e)){Or(t,e,zi);return}return nn(t)?t:lt(t)?Ke.object(t,e,c):Array.isArray(t)?Ke.array(t,e):Sr(t)?Ke.map(t,e):$r(t)?Ke.set(t,e):typeof t=="object"&&t!==null?t:Ke.box(t,e)}Us(oa,ia);var Vf={box:function(e,c){var h=zn(c);return new nr(e,Wn(h),h.name,!0,h.equals)},array:function(e,c){var h=zn(c);return(oe.useProxies===!1||h.proxy===!1?zd:Rd)(e,Wn(h),h.name)},map:function(e,c){var h=zn(c);return new Fa(e,Wn(h),h.name)},set:function(e,c){var h=zn(c);return new Va(e,Wn(h),h.name)},object:function(e,c,h){return $t(function(){return Pa(oe.useProxies===!1||(h==null?void 0:h.proxy)===!1?lr({},h):Ad({},h),e,c)})},ref:Dt(If),shallow:Dt(Lf),deep:ia,struct:Dt(Ff)},Ke=Us(oa,Vf),sa="computed",Yf="computed.struct",Wi=Hi(sa),Uf=Hi(Yf,{equals:Vn.structural}),Xn=function(e,c){if(qr(c))return Wi.decorate_20223_(e,c);if(Zt(c))return Or(e,c,Wi);if(lt(e))return Dt(Hi(sa,e));process.env.NODE_ENV!=="production"&&(Ge(e)||ge("First argument to `computed` should be an expression."),Ge(c)&&ge("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var h=lt(c)?c:{};return h.get=e,h.name||(h.name=e.name||""),new ir(h)};Object.assign(Xn,Wi),Xn.struct=Dt(Uf);var aa,la,Gn=0,Hf=1,zf=(aa=(la=Rn(function(){},"name"))==null?void 0:la.configurable)!=null?aa:!1,ca={value:"action",configurable:!0,writable:!1,enumerable:!1};function rr(t,e,c,h){c===void 0&&(c=!1),process.env.NODE_ENV!=="production"&&(Ge(e)||ge("`action` can only be invoked on functions"),(typeof t!="string"||!t)&&ge("actions should have valid names, got: '"+t+"'"));function g(){return Wf(t,c,e,h||this,arguments)}return g.isMobxAction=!0,g.toString=function(){return e.toString()},zf&&(ca.value=t,At(g,"name",ca)),g}function Wf(t,e,c,h,g){var y=Xf(t,e,h,g);try{return c.apply(h,g)}catch(_){throw y.error_=_,_}finally{Gf(y)}}function Xf(t,e,c,h){var g=process.env.NODE_ENV!=="production"&&Ze()&&!!t,y=0;if(process.env.NODE_ENV!=="production"&&g){y=Date.now();var _=h?Array.from(h):Ln;ct({type:Ki,name:t,object:c,arguments:_})}var x=oe.trackingDerivation,T=!e||!x;vt();var d=oe.allowStateChanges;T&&(or(),d=$n(!0));var n=$i(!0),u={runAsAction_:T,prevDerivation_:x,prevAllowStateChanges_:d,prevAllowStateReads_:n,notifySpy_:g,startTime_:y,actionId_:Hf++,parentActionId_:Gn};return Gn=u.actionId_,u}function Gf(t){Gn!==t.actionId_&&ge(30),Gn=t.parentActionId_,t.error_!==void 0&&(oe.suppressReactionErrors=!0),qn(t.prevAllowStateChanges_),Jr(t.prevAllowStateReads_),mt(),t.runAsAction_&&Lt(t.prevDerivation_),process.env.NODE_ENV!=="production"&&t.notifySpy_&&ut({time:Date.now()-t.startTime_}),oe.suppressReactionErrors=!1}function $f(t,e){var c=$n(t);try{return e()}finally{qn(c)}}function $n(t){var e=oe.allowStateChanges;return oe.allowStateChanges=t,e}function qn(t){oe.allowStateChanges=t}var ua,qf="create";ua=Symbol.toPrimitive;var nr=function(t){Ks(e,t);function e(h,g,y,_,x){var T;return y===void 0&&(y=process.env.NODE_ENV!=="production"?"ObservableValue@"+xt():"ObservableValue"),_===void 0&&(_=!0),x===void 0&&(x=Vn.default),T=t.call(this,y)||this,T.enhancer=void 0,T.name_=void 0,T.equals=void 0,T.hasUnreportedChange_=!1,T.interceptors_=void 0,T.changeListeners_=void 0,T.value_=void 0,T.dehancer=void 0,T.enhancer=g,T.name_=y,T.equals=x,T.value_=g(h,void 0,y),process.env.NODE_ENV!=="production"&&_&&Ze()&&sr({type:qf,object:Bn(T),observableKind:"value",debugObjectName:T.name_,newValue:""+T.value_}),T}var c=e.prototype;return c.dehanceValue=function(g){return this.dehancer!==void 0?this.dehancer(g):g},c.set=function(g){var y=this.value_;if(g=this.prepareNewValue_(g),g!==oe.UNCHANGED){var _=Ze();process.env.NODE_ENV!=="production"&&_&&ct({type:Tt,object:this,observableKind:"value",debugObjectName:this.name_,newValue:g,oldValue:y}),this.setNewValue_(g),process.env.NODE_ENV!=="production"&&_&&ut()}},c.prepareNewValue_=function(g){if(Mt(this),yt(this)){var y=bt(this,{object:this,type:Tt,newValue:g});if(!y)return oe.UNCHANGED;g=y.newValue}return g=this.enhancer(g,this.value_,this.name_),this.equals(this.value_,g)?oe.UNCHANGED:g},c.setNewValue_=function(g){var y=this.value_;this.value_=g,this.reportChanged(),Ct(this)&&St(this,{type:Tt,object:this,newValue:g,oldValue:y})},c.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},c.intercept_=function(g){return on(this,g)},c.observe_=function(g,y){return y&&g({observableKind:"value",debugObjectName:this.name_,object:this,type:Tt,newValue:this.value_,oldValue:void 0}),sn(this,g)},c.raw=function(){return this.value_},c.toJSON=function(){return this.get()},c.toString=function(){return this.name_+"["+this.value_+"]"},c.valueOf=function(){return $s(this.get())},c[ua]=function(){return this.valueOf()},e}(Kr),ha;ha=Symbol.toPrimitive;var ir=function(){function t(c){this.dependenciesState_=Pe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Pe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Qn(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=pt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,c.get||ge(31),this.derivation=c.get,this.name_=c.name||(process.env.NODE_ENV!=="production"?"ComputedValue@"+xt():"ComputedValue"),c.set&&(this.setter_=rr(process.env.NODE_ENV!=="production"?this.name_+"-setter":"ComputedValue-setter",c.set)),this.equals_=c.equals||(c.compareStructural||c.struct?Vn.structural:Vn.default),this.scope_=c.context,this.requiresReaction_=c.requiresReaction,this.keepAlive_=!!c.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){nd(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(h){return h()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(h){return h()})},e.get=function(){if(this.isComputing_&&ge(32,this.name_,this.derivation),oe.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)Xi(this)&&(this.warnAboutUntrackedRead_(),vt(),this.value_=this.computeValue_(!1),mt());else if(ya(this),Xi(this)){var h=oe.trackingContext;this.keepAlive_&&!h&&(oe.trackingContext=this),this.trackAndCompute()&&rd(this),oe.trackingContext=h}var g=this.value_;if(Jn(g))throw g.cause;return g},e.set=function(h){if(this.setter_){this.isRunningSetter_&&ge(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,h)}finally{this.isRunningSetter_=!1}}else ge(34,this.name_)},e.trackAndCompute=function(){var h=this.value_,g=this.dependenciesState_===Pe.NOT_TRACKING_,y=this.computeValue_(!0),_=g||Jn(h)||Jn(y)||!this.equals_(h,y);return _&&(this.value_=y,process.env.NODE_ENV!=="production"&&Ze()&&sr({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:h,newValue:y})),_},e.computeValue_=function(h){this.isComputing_=!0;var g=$n(!1),y;if(h)y=fa(this,this.derivation,this.scope_);else if(oe.disableErrorBoundaries===!0)y=this.derivation.call(this.scope_);else try{y=this.derivation.call(this.scope_)}catch(_){y=new Qn(_)}return qn(g),this.isComputing_=!1,y},e.suspend_=function(){this.keepAlive_||(Gi(this),this.value_=void 0,process.env.NODE_ENV!=="production"&&this.isTracing_!==pt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},e.observe_=function(h,g){var y=this,_=!0,x=void 0;return dd(function(){var T=y.get();if(!_||g){var d=or();h({observableKind:"computed",debugObjectName:y.name_,type:Tt,object:y,newValue:T,oldValue:x}),Lt(d)}_=!1,x=T})},e.warnAboutUntrackedRead_=function(){process.env.NODE_ENV!=="production"&&(this.isTracing_!==pt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),(typeof this.requiresReaction_=="boolean"?this.requiresReaction_:oe.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."))},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return $s(this.get())},e[ha]=function(){return this.valueOf()},t}(),Kn=er("ComputedValue",ir),Pe;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(Pe||(Pe={}));var pt;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(pt||(pt={}));var Qn=function(e){this.cause=void 0,this.cause=e};function Jn(t){return t instanceof Qn}function Xi(t){switch(t.dependenciesState_){case Pe.UP_TO_DATE_:return!1;case Pe.NOT_TRACKING_:case Pe.STALE_:return!0;case Pe.POSSIBLY_STALE_:{for(var e=$i(!0),c=or(),h=t.observing_,g=h.length,y=0;y<g;y++){var _=h[y];if(Kn(_)){if(oe.disableErrorBoundaries)_.get();else try{_.get()}catch{return Lt(c),Jr(e),!0}if(t.dependenciesState_===Pe.STALE_)return Lt(c),Jr(e),!0}}return ga(t),Lt(c),Jr(e),!1}}}function Mt(t){if(process.env.NODE_ENV!=="production"){var e=t.observers_.size>0;!oe.allowStateChanges&&(e||oe.enforceActions==="always")&&console.warn("[MobX] "+(oe.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+t.name_)}}function Kf(t){process.env.NODE_ENV!=="production"&&!oe.allowStateReads&&oe.observableRequiresReaction&&console.warn("[mobx] Observable '"+t.name_+"' being read outside a reactive context.")}function fa(t,e,c){var h=$i(!0);ga(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++oe.runId;var g=oe.trackingDerivation;oe.trackingDerivation=t,oe.inBatch++;var y;if(oe.disableErrorBoundaries===!0)y=e.call(c);else try{y=e.call(c)}catch(_){y=new Qn(_)}return oe.inBatch--,oe.trackingDerivation=g,Jf(t),Qf(t),Jr(h),y}function Qf(t){process.env.NODE_ENV!=="production"&&t.observing_.length===0&&(typeof t.requiresObservable_=="boolean"?t.requiresObservable_:oe.reactionRequiresObservable)&&console.warn("[mobx] Derivation '"+t.name_+"' is created/updated without reading any observable value.")}function Jf(t){for(var e=t.observing_,c=t.observing_=t.newObserving_,h=Pe.UP_TO_DATE_,g=0,y=t.unboundDepsCount_,_=0;_<y;_++){var x=c[_];x.diffValue_===0&&(x.diffValue_=1,g!==_&&(c[g]=x),g++),x.dependenciesState_>h&&(h=x.dependenciesState_)}for(c.length=g,t.newObserving_=null,y=e.length;y--;){var T=e[y];T.diffValue_===0&&va(T,t),T.diffValue_=0}for(;g--;){var d=c[g];d.diffValue_===1&&(d.diffValue_=0,td(d,t))}h!==Pe.UP_TO_DATE_&&(t.dependenciesState_=h,t.onBecomeStale_())}function Gi(t){var e=t.observing_;t.observing_=[];for(var c=e.length;c--;)va(e[c],t);t.dependenciesState_=Pe.NOT_TRACKING_}function da(t){var e=or();try{return t()}finally{Lt(e)}}function or(){var t=oe.trackingDerivation;return oe.trackingDerivation=null,t}function Lt(t){oe.trackingDerivation=t}function $i(t){var e=oe.allowStateReads;return oe.allowStateReads=t,e}function Jr(t){oe.allowStateReads=t}function ga(t){if(t.dependenciesState_!==Pe.UP_TO_DATE_){t.dependenciesState_=Pe.UP_TO_DATE_;for(var e=t.observing_,c=e.length;c--;)e[c].lowestObserverState_=Pe.UP_TO_DATE_}}var Zn=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ei=!0,pa=!1,oe=function(){var t=Fi();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ei=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new Zn().version&&(ei=!1),ei?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Zn):(setTimeout(function(){pa||ge(35)},1),new Zn)}();function Zf(){if((oe.pendingReactions.length||oe.inBatch||oe.isRunningReactions)&&ge(36),pa=!0,ei){var t=Fi();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),oe=new Zn}}function ed(){return oe}function td(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function va(t,e){t.observers_.delete(e),t.observers_.size===0&&ma(t)}function ma(t){t.isPendingUnobservation_===!1&&(t.isPendingUnobservation_=!0,oe.pendingUnobservations.push(t))}function vt(){oe.inBatch++}function mt(){if(--oe.inBatch===0){Ca();for(var t=oe.pendingUnobservations,e=0;e<t.length;e++){var c=t[e];c.isPendingUnobservation_=!1,c.observers_.size===0&&(c.isBeingObserved_&&(c.isBeingObserved_=!1,c.onBUO()),c instanceof ir&&c.suspend_())}oe.pendingUnobservations=[]}}function ya(t){Kf(t);var e=oe.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&oe.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(t.observers_.size===0&&oe.inBatch>0&&ma(t),!1)}function ba(t){t.lowestObserverState_!==Pe.STALE_&&(t.lowestObserverState_=Pe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Pe.UP_TO_DATE_&&(process.env.NODE_ENV!=="production"&&e.isTracing_!==pt.NONE&&_a(e,t),e.onBecomeStale_()),e.dependenciesState_=Pe.STALE_}))}function rd(t){t.lowestObserverState_!==Pe.STALE_&&(t.lowestObserverState_=Pe.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Pe.POSSIBLY_STALE_?(e.dependenciesState_=Pe.STALE_,process.env.NODE_ENV!=="production"&&e.isTracing_!==pt.NONE&&_a(e,t)):e.dependenciesState_===Pe.UP_TO_DATE_&&(t.lowestObserverState_=Pe.UP_TO_DATE_)}))}function nd(t){t.lowestObserverState_===Pe.UP_TO_DATE_&&(t.lowestObserverState_=Pe.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===Pe.UP_TO_DATE_&&(e.dependenciesState_=Pe.POSSIBLY_STALE_,e.onBecomeStale_())}))}function _a(t,e){if(console.log("[mobx.trace] '"+t.name_+"' is invalidated due to a change in: '"+e.name_+"'"),t.isTracing_===pt.BREAK){var c=[];wa(Aa(t),c,1),new Function(`debugger;
/*
Tracing '`+t.name_+`'

You are entering this break point because derivation '`+t.name_+"' is being traced and '"+e.name_+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(t instanceof ir?t.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+c.join(`
`)+`
*/
    `)()}}function wa(t,e,c){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+"	".repeat(c-1)+t.name),t.dependencies&&t.dependencies.forEach(function(h){return wa(h,e,c+1)})}var Zr=function(){function t(c,h,g,y){c===void 0&&(c=process.env.NODE_ENV!=="production"?"Reaction@"+xt():"Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Pe.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=pt.NONE,this.name_=c,this.onInvalidate_=h,this.errorHandler_=g,this.requiresObservable_=y}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,oe.pendingReactions.push(this),Ca())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){vt(),this.isScheduled_=!1;var h=oe.trackingContext;if(oe.trackingContext=this,Xi(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),process.env.NODE_ENV!=="production"&&this.isTrackPending_&&Ze()&&sr({name:this.name_,type:"scheduled-reaction"})}catch(g){this.reportExceptionInDerivation_(g)}}oe.trackingContext=h,mt()}},e.track=function(h){if(!this.isDisposed_){vt();var g=Ze(),y;process.env.NODE_ENV!=="production"&&g&&(y=Date.now(),ct({name:this.name_,type:"reaction"})),this.isRunning_=!0;var _=oe.trackingContext;oe.trackingContext=this;var x=fa(this,h,void 0);oe.trackingContext=_,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Gi(this),Jn(x)&&this.reportExceptionInDerivation_(x.cause),process.env.NODE_ENV!=="production"&&g&&ut({time:Date.now()-y}),mt()}},e.reportExceptionInDerivation_=function(h){var g=this;if(this.errorHandler_){this.errorHandler_(h,this);return}if(oe.disableErrorBoundaries)throw h;var y=process.env.NODE_ENV!=="production"?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";oe.suppressReactionErrors?process.env.NODE_ENV!=="production"&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(y,h),process.env.NODE_ENV!=="production"&&Ze()&&sr({type:"error",name:this.name_,message:y,error:""+h}),oe.globalReactionErrorHandlers.forEach(function(_){return _(h,g)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(vt(),Gi(this),mt()))},e.getDisposer_=function(h){var g=this,y=function _(){g.dispose(),h==null||h.removeEventListener==null||h.removeEventListener("abort",_)};return h==null||h.addEventListener==null||h.addEventListener("abort",y),y[ye]=this,y},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(h){h===void 0&&(h=!1),Ed(this,h)},t}(),xa=100,qi=function(e){return e()};function Ca(){oe.inBatch>0||oe.isRunningReactions||qi(id)}function id(){oe.isRunningReactions=!0;for(var t=oe.pendingReactions,e=0;t.length>0;){++e===xa&&(console.error(process.env.NODE_ENV!=="production"?"Reaction doesn't converge to a stable state after "+xa+" iterations."+(" Probably there is a cycle in the reactive function: "+t[0]):"[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var c=t.splice(0),h=0,g=c.length;h<g;h++)c[h].runReaction_()}oe.isRunningReactions=!1}var ti=er("Reaction",Zr);function od(t){var e=qi;qi=function(h){return t(function(){return e(h)})}}function Ze(){return process.env.NODE_ENV!=="production"&&!!oe.spyListeners.length}function sr(t){if(process.env.NODE_ENV!=="production"&&oe.spyListeners.length)for(var e=oe.spyListeners,c=0,h=e.length;c<h;c++)e[c](t)}function ct(t){if(process.env.NODE_ENV!=="production"){var e=It({},t,{spyReportStart:!0});sr(e)}}var sd={type:"report-end",spyReportEnd:!0};function ut(t){process.env.NODE_ENV!=="production"&&sr(t?It({},t,{type:"report-end",spyReportEnd:!0}):sd)}function ad(t){return process.env.NODE_ENV==="production"?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(oe.spyListeners.push(t),Bi(function(){oe.spyListeners=oe.spyListeners.filter(function(e){return e!==t})}))}var Ki="action",ld="action.bound",Sa="autoAction",cd="autoAction.bound",ud="<unnamed action>",Qi=Qr(Ki),hd=Qr(ld,{bound:!0}),Ji=Qr(Sa,{autoAction:!0}),fd=Qr(cd,{autoAction:!0,bound:!0});function Ta(t){var e=function(h,g){if(Ge(h))return rr(h.name||ud,h,t);if(Ge(g))return rr(h,g,t);if(qr(g))return(t?Ji:Qi).decorate_20223_(h,g);if(Zt(g))return Or(h,g,t?Ji:Qi);if(Zt(h))return Dt(Qr(t?Sa:Ki,{name:h,autoAction:t}));process.env.NODE_ENV!=="production"&&ge("Invalid arguments for `action`")};return e}var Pr=Ta(!1);Object.assign(Pr,Qi);var en=Ta(!0);Object.assign(en,Ji),Pr.bound=Dt(hd),en.bound=Dt(fd);function tn(t){return Ge(t)&&t.isMobxAction===!0}function dd(t,e){var c,h,g,y,_;e===void 0&&(e=Hs),process.env.NODE_ENV!=="production"&&(Ge(t)||ge("Autorun expects a function as first argument"),tn(t)&&ge("Autorun does not accept actions since actions are untrackable"));var x=(c=(h=e)==null?void 0:h.name)!=null?c:process.env.NODE_ENV!=="production"?t.name||"Autorun@"+xt():"Autorun",T=!e.scheduler&&!e.delay,d;if(T)d=new Zr(x,function(){this.track(l)},e.onError,e.requiresObservable);else{var n=pd(e),u=!1;d=new Zr(x,function(){u||(u=!0,n(function(){u=!1,d.isDisposed_||d.track(l)}))},e.onError,e.requiresObservable)}function l(){t(d)}return(g=e)!=null&&(y=g.signal)!=null&&y.aborted||d.schedule_(),d.getDisposer_((_=e)==null?void 0:_.signal)}var gd=function(e){return e()};function pd(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:gd}var vd="onBO",md="onBUO";function yd(t,e,c){return Oa(vd,t,e,c)}function Ea(t,e,c){return Oa(md,t,e,c)}function Oa(t,e,c,h){var g=typeof h=="function"?Gt(e,c):Gt(e),y=Ge(h)?h:c,_=t+"L";return g[_]?g[_].add(y):g[_]=new Set([y]),function(){var x=g[_];x&&(x.delete(y),x.size===0&&delete g[_])}}var bd="never",ri="always",_d="observed";function wd(t){t.isolateGlobalState===!0&&Zf();var e=t.useProxies,c=t.enforceActions;if(e!==void 0&&(oe.useProxies=e===ri?!0:e===bd?!1:typeof Proxy<"u"),e==="ifavailable"&&(oe.verifyProxies=!0),c!==void 0){var h=c===ri?ri:c===_d;oe.enforceActions=h,oe.allowStateChanges=!(h===!0||h===ri)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(g){g in t&&(oe[g]=!!t[g])}),oe.allowStateReads=!oe.observableRequiresReaction,process.env.NODE_ENV!=="production"&&oe.disableErrorBoundaries===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),t.reactionScheduler&&od(t.reactionScheduler)}function Pa(t,e,c,h){process.env.NODE_ENV!=="production"&&(arguments.length>4&&ge("'extendObservable' expected 2-4 arguments"),typeof t!="object"&&ge("'extendObservable' expects an object as first argument"),Bt(t)&&ge("'extendObservable' should not be used on maps, use map.merge instead"),lt(e)||ge("'extendObservable' only accepts plain objects as second argument"),(nn(e)||nn(c))&&ge("Extending an object with another observable (object) is not supported"));var g=Kh(e);return $t(function(){var y=lr(t,h)[ye];Tr(g).forEach(function(_){y.extend_(_,g[_],c&&_ in c?c[_]:!0)})}),t}function Aa(t,e){return Da(Gt(t,e))}function Da(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=xd(t.observing_).map(Da)),e}function xd(t){return Array.from(new Set(t))}var Cd=0;function Ma(){this.message="FLOW_CANCELLED"}Ma.prototype=Object.create(Error.prototype);var Zi=ea("flow"),Sd=ea("flow.bound",{bound:!0}),Ar=Object.assign(function(e,c){if(qr(c))return Zi.decorate_20223_(e,c);if(Zt(c))return Or(e,c,Zi);process.env.NODE_ENV!=="production"&&arguments.length!==1&&ge("Flow expects single argument with generator function");var h=e,g=h.name||"<unnamed flow>",y=function(){var x=this,T=arguments,d=++Cd,n=Pr(g+" - runid: "+d+" - init",h).apply(x,T),u,l=void 0,r=new Promise(function(o,i){var a=0;u=i;function f(v){l=void 0;var m;try{m=Pr(g+" - runid: "+d+" - yield "+a++,n.next).call(n,v)}catch(b){return i(b)}p(m)}function s(v){l=void 0;var m;try{m=Pr(g+" - runid: "+d+" - yield "+a++,n.throw).call(n,v)}catch(b){return i(b)}p(m)}function p(v){if(Ge(v==null?void 0:v.then)){v.then(p,i);return}return v.done?o(v.value):(l=Promise.resolve(v.value),l.then(f,s))}f(void 0)});return r.cancel=Pr(g+" - runid: "+d+" - cancel",function(){try{l&&ka(l);var o=n.return(void 0),i=Promise.resolve(o.value);i.then(Cr,Cr),ka(i),u(new Ma)}catch(a){u(a)}}),r};return y.isMobXFlow=!0,y},Zi);Ar.bound=Dt(Sd);function ka(t){Ge(t.cancel)&&t.cancel()}function rn(t){return(t==null?void 0:t.isMobXFlow)===!0}function Td(t,e){return t?e!==void 0?process.env.NODE_ENV!=="production"&&(Bt(t)||an(t))?ge("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):cr(t)?t[ye].values_.has(e):!1:cr(t)||!!t[ye]||Ui(t)||ti(t)||Kn(t):!1}function nn(t){return process.env.NODE_ENV!=="production"&&arguments.length!==1&&ge("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),Td(t)}function Ed(){if(process.env.NODE_ENV!=="production"){for(var t=!1,e=arguments.length,c=new Array(e),h=0;h<e;h++)c[h]=arguments[h];typeof c[c.length-1]=="boolean"&&(t=c.pop());var g=Od(c);if(!g)return ge("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===pt.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled"),g.isTracing_=t?pt.BREAK:pt.LOG}}function Od(t){switch(t.length){case 0:return oe.trackingDerivation;case 1:return Gt(t[0]);case 2:return Gt(t[0],t[1])}}function Ft(t,e){e===void 0&&(e=void 0),vt();try{return t.apply(e)}finally{mt()}}function ar(t){return t[ye]}var Pd={has:function(e,c){return process.env.NODE_ENV!=="production"&&oe.trackingDerivation&&Xr("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),ar(e).has_(c)},get:function(e,c){return ar(e).get_(c)},set:function(e,c,h){var g;return Zt(c)?(process.env.NODE_ENV!=="production"&&!ar(e).values_.has(c)&&Xr("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),(g=ar(e).set_(c,h,!0))!=null?g:!0):!1},deleteProperty:function(e,c){var h;return process.env.NODE_ENV!=="production"&&Xr("delete properties from an observable object. Use 'remove' from 'mobx' instead."),Zt(c)?(h=ar(e).delete_(c,!0))!=null?h:!0:!1},defineProperty:function(e,c,h){var g;return process.env.NODE_ENV!=="production"&&Xr("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),(g=ar(e).defineProperty_(c,h))!=null?g:!0},ownKeys:function(e){return process.env.NODE_ENV!=="production"&&oe.trackingDerivation&&Xr("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),ar(e).ownKeys_()},preventExtensions:function(e){ge(13)}};function Ad(t,e){var c,h;return zs(),t=lr(t,e),(h=(c=t[ye]).proxy_)!=null?h:c.proxy_=new Proxy(t,Pd)}function yt(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function on(t,e){var c=t.interceptors_||(t.interceptors_=[]);return c.push(e),Bi(function(){var h=c.indexOf(e);h!==-1&&c.splice(h,1)})}function bt(t,e){var c=or();try{for(var h=[].concat(t.interceptors_||[]),g=0,y=h.length;g<y&&(e=h[g](e),e&&!e.type&&ge(14),!!e);g++);return e}finally{Lt(c)}}function Ct(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function sn(t,e){var c=t.changeListeners_||(t.changeListeners_=[]);return c.push(e),Bi(function(){var h=c.indexOf(e);h!==-1&&c.splice(h,1)})}function St(t,e){var c=or(),h=t.changeListeners_;if(h){h=h.slice();for(var g=0,y=h.length;g<y;g++)h[g](e);Lt(c)}}function Dd(t,e,c){return $t(function(){var h,g=lr(t,c)[ye];process.env.NODE_ENV!=="production"&&e&&t[it]&&ge("makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported."),(h=e)!=null||(e=tf(t)),Tr(e).forEach(function(y){return g.make_(y,e[y])})}),t}var eo=Symbol("mobx-keys");function Md(t,e,c){return process.env.NODE_ENV!=="production"&&(!lt(t)&&!lt(Object.getPrototypeOf(t))&&ge("'makeAutoObservable' can only be used for classes that don't have a superclass"),cr(t)&&ge("makeAutoObservable can only be used on objects not already made observable")),lt(t)?Pa(t,t,e,c):($t(function(){var h=lr(t,c)[ye];if(!t[eo]){var g=Object.getPrototypeOf(t),y=new Set([].concat(Tr(t),Tr(g)));y.delete("constructor"),y.delete(ye),Gr(g,eo,y)}t[eo].forEach(function(_){return h.make_(_,e&&_ in e?e[_]:!0)})}),t)}var ja="splice",Tt="update",kd=1e4,jd={get:function(e,c){var h=e[ye];return c===ye?h:c==="length"?h.getArrayLength_():typeof c=="string"&&!isNaN(c)?h.get_(parseInt(c)):gt(ni,c)?ni[c]:e[c]},set:function(e,c,h){var g=e[ye];return c==="length"&&g.setArrayLength_(h),typeof c=="symbol"||isNaN(c)?e[c]=h:g.set_(parseInt(c),h),!0},preventExtensions:function(){ge(15)}},to=function(){function t(c,h,g,y){c===void 0&&(c=process.env.NODE_ENV!=="production"?"ObservableArray@"+xt():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=g,this.legacyMode_=y,this.atom_=new Kr(c),this.enhancer_=function(_,x){return h(_,x,process.env.NODE_ENV!=="production"?c+"[..]":"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.dehanceValues_=function(h){return this.dehancer!==void 0&&h.length>0?h.map(this.dehancer):h},e.intercept_=function(h){return on(this,h)},e.observe_=function(h,g){return g===void 0&&(g=!1),g&&h({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),sn(this,h)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(h){(typeof h!="number"||isNaN(h)||h<0)&&ge("Out of range: "+h);var g=this.values_.length;if(h!==g)if(h>g){for(var y=new Array(h-g),_=0;_<h-g;_++)y[_]=void 0;this.spliceWithArray_(g,0,y)}else this.spliceWithArray_(h,g-h)},e.updateArrayLength_=function(h,g){h!==this.lastKnownLength_&&ge(16),this.lastKnownLength_+=g,this.legacyMode_&&g>0&&$a(h+g+1)},e.spliceWithArray_=function(h,g,y){var _=this;Mt(this.atom_);var x=this.values_.length;if(h===void 0?h=0:h>x?h=x:h<0&&(h=Math.max(0,x+h)),arguments.length===1?g=x-h:g==null?g=0:g=Math.max(0,Math.min(g,x-h)),y===void 0&&(y=Ln),yt(this)){var T=bt(this,{object:this.proxy_,type:ja,index:h,removedCount:g,added:y});if(!T)return Ln;g=T.removedCount,y=T.added}if(y=y.length===0?y:y.map(function(u){return _.enhancer_(u,void 0)}),this.legacyMode_||process.env.NODE_ENV!=="production"){var d=y.length-g;this.updateArrayLength_(x,d)}var n=this.spliceItemsIntoValues_(h,g,y);return(g!==0||y.length!==0)&&this.notifyArraySplice_(h,y,n),this.dehanceValues_(n)},e.spliceItemsIntoValues_=function(h,g,y){if(y.length<kd){var _;return(_=this.values_).splice.apply(_,[h,g].concat(y))}else{var x=this.values_.slice(h,h+g),T=this.values_.slice(h+g);this.values_.length+=y.length-g;for(var d=0;d<y.length;d++)this.values_[h+d]=y[d];for(var n=0;n<T.length;n++)this.values_[h+y.length+n]=T[n];return x}},e.notifyArrayChildUpdate_=function(h,g,y){var _=!this.owned_&&Ze(),x=Ct(this),T=x||_?{observableKind:"array",object:this.proxy_,type:Tt,debugObjectName:this.atom_.name_,index:h,newValue:g,oldValue:y}:null;process.env.NODE_ENV!=="production"&&_&&ct(T),this.atom_.reportChanged(),x&&St(this,T),process.env.NODE_ENV!=="production"&&_&&ut()},e.notifyArraySplice_=function(h,g,y){var _=!this.owned_&&Ze(),x=Ct(this),T=x||_?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ja,index:h,removed:y,added:g,removedCount:y.length,addedCount:g.length}:null;process.env.NODE_ENV!=="production"&&_&&ct(T),this.atom_.reportChanged(),x&&St(this,T),process.env.NODE_ENV!=="production"&&_&&ut()},e.get_=function(h){if(this.legacyMode_&&h>=this.values_.length){console.warn(process.env.NODE_ENV!=="production"?"[mobx.array] Attempt to read an array index ("+h+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX":"[mobx] Out of bounds read: "+h);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[h])},e.set_=function(h,g){var y=this.values_;if(this.legacyMode_&&h>y.length&&ge(17,h,y.length),h<y.length){Mt(this.atom_);var _=y[h];if(yt(this)){var x=bt(this,{type:Tt,object:this.proxy_,index:h,newValue:g});if(!x)return;g=x.newValue}g=this.enhancer_(g,_);var T=g!==_;T&&(y[h]=g,this.notifyArrayChildUpdate_(h,g,_))}else{for(var d=new Array(h+1-y.length),n=0;n<d.length-1;n++)d[n]=void 0;d[d.length-1]=g,this.spliceWithArray_(y.length,0,d)}},t}();function Rd(t,e,c,h){return c===void 0&&(c=process.env.NODE_ENV!=="production"?"ObservableArray@"+xt():"ObservableArray"),h===void 0&&(h=!1),zs(),$t(function(){var g=new to(c,e,h,!1);Xs(g.values_,ye,g);var y=new Proxy(g.values_,jd);return g.proxy_=y,t&&t.length&&g.spliceWithArray_(0,0,t),y})}var ni={clear:function(){return this.splice(0)},replace:function(e){var c=this[ye];return c.spliceWithArray_(0,c.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,c){for(var h=arguments.length,g=new Array(h>2?h-2:0),y=2;y<h;y++)g[y-2]=arguments[y];var _=this[ye];switch(arguments.length){case 0:return[];case 1:return _.spliceWithArray_(e);case 2:return _.spliceWithArray_(e,c)}return _.spliceWithArray_(e,c,g)},spliceWithArray:function(e,c,h){return this[ye].spliceWithArray_(e,c,h)},push:function(){for(var e=this[ye],c=arguments.length,h=new Array(c),g=0;g<c;g++)h[g]=arguments[g];return e.spliceWithArray_(e.values_.length,0,h),e.values_.length},pop:function(){return this.splice(Math.max(this[ye].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ye],c=arguments.length,h=new Array(c),g=0;g<c;g++)h[g]=arguments[g];return e.spliceWithArray_(0,0,h),e.values_.length},reverse:function(){return oe.trackingDerivation&&ge(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){oe.trackingDerivation&&ge(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var c=this[ye],h=c.dehanceValues_(c.values_).indexOf(e);return h>-1?(this.splice(h,1),!0):!1}};Ve("at",ht),Ve("concat",ht),Ve("flat",ht),Ve("includes",ht),Ve("indexOf",ht),Ve("join",ht),Ve("lastIndexOf",ht),Ve("slice",ht),Ve("toString",ht),Ve("toLocaleString",ht),Ve("toSorted",ht),Ve("toSpliced",ht),Ve("with",ht),Ve("every",Et),Ve("filter",Et),Ve("find",Et),Ve("findIndex",Et),Ve("findLast",Et),Ve("findLastIndex",Et),Ve("flatMap",Et),Ve("forEach",Et),Ve("map",Et),Ve("some",Et),Ve("toReversed",Et),Ve("reduce",Ra),Ve("reduceRight",Ra);function Ve(t,e){typeof Array.prototype[t]=="function"&&(ni[t]=e(t))}function ht(t){return function(){var e=this[ye];e.atom_.reportObserved();var c=e.dehanceValues_(e.values_);return c[t].apply(c,arguments)}}function Et(t){return function(e,c){var h=this,g=this[ye];g.atom_.reportObserved();var y=g.dehanceValues_(g.values_);return y[t](function(_,x){return e.call(c,_,x,h)})}}function Ra(t){return function(){var e=this,c=this[ye];c.atom_.reportObserved();var h=c.dehanceValues_(c.values_),g=arguments[0];return arguments[0]=function(y,_,x){return g(y,_,x,e)},h[t].apply(h,arguments)}}var Id=er("ObservableArrayAdministration",to);function an(t){return Fn(t)&&Id(t[ye])}var Ia,La,Ld={},Xt="add",ii="delete";Ia=Symbol.iterator,La=Symbol.toStringTag;var Fa=function(){function t(c,h,g){var y=this;h===void 0&&(h=tr),g===void 0&&(g=process.env.NODE_ENV!=="production"?"ObservableMap@"+xt():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ye]=Ld,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=h,this.name_=g,Ge(Map)||ge(18),$t(function(){y.keysAtom_=Js(process.env.NODE_ENV!=="production"?y.name_+".keys()":"ObservableMap.keys()"),y.data_=new Map,y.hasMap_=new Map,c&&y.merge(c)})}var e=t.prototype;return e.has_=function(h){return this.data_.has(h)},e.has=function(h){var g=this;if(!oe.trackingDerivation)return this.has_(h);var y=this.hasMap_.get(h);if(!y){var _=y=new nr(this.has_(h),Yn,process.env.NODE_ENV!=="production"?this.name_+"."+Ni(h)+"?":"ObservableMap.key?",!1);this.hasMap_.set(h,_),Ea(_,function(){return g.hasMap_.delete(h)})}return y.get()},e.set=function(h,g){var y=this.has_(h);if(yt(this)){var _=bt(this,{type:y?Tt:Xt,object:this,newValue:g,name:h});if(!_)return this;g=_.newValue}return y?this.updateValue_(h,g):this.addValue_(h,g),this},e.delete=function(h){var g=this;if(Mt(this.keysAtom_),yt(this)){var y=bt(this,{type:ii,object:this,name:h});if(!y)return!1}if(this.has_(h)){var _=Ze(),x=Ct(this),T=x||_?{observableKind:"map",debugObjectName:this.name_,type:ii,object:this,oldValue:this.data_.get(h).value_,name:h}:null;return process.env.NODE_ENV!=="production"&&_&&ct(T),Ft(function(){var d;g.keysAtom_.reportChanged(),(d=g.hasMap_.get(h))==null||d.setNewValue_(!1);var n=g.data_.get(h);n.setNewValue_(void 0),g.data_.delete(h)}),x&&St(this,T),process.env.NODE_ENV!=="production"&&_&&ut(),!0}return!1},e.updateValue_=function(h,g){var y=this.data_.get(h);if(g=y.prepareNewValue_(g),g!==oe.UNCHANGED){var _=Ze(),x=Ct(this),T=x||_?{observableKind:"map",debugObjectName:this.name_,type:Tt,object:this,oldValue:y.value_,name:h,newValue:g}:null;process.env.NODE_ENV!=="production"&&_&&ct(T),y.setNewValue_(g),x&&St(this,T),process.env.NODE_ENV!=="production"&&_&&ut()}},e.addValue_=function(h,g){var y=this;Mt(this.keysAtom_),Ft(function(){var d,n=new nr(g,y.enhancer_,process.env.NODE_ENV!=="production"?y.name_+"."+Ni(h):"ObservableMap.key",!1);y.data_.set(h,n),g=n.value_,(d=y.hasMap_.get(h))==null||d.setNewValue_(!0),y.keysAtom_.reportChanged()});var _=Ze(),x=Ct(this),T=x||_?{observableKind:"map",debugObjectName:this.name_,type:Xt,object:this,name:h,newValue:g}:null;process.env.NODE_ENV!=="production"&&_&&ct(T),x&&St(this,T),process.env.NODE_ENV!=="production"&&_&&ut()},e.get=function(h){return this.has(h)?this.dehanceValue_(this.data_.get(h).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var h=this,g=this.keys();return ln({next:function(){var _=g.next(),x=_.done,T=_.value;return{done:x,value:x?void 0:h.get(T)}}})},e.entries=function(){var h=this,g=this.keys();return ln({next:function(){var _=g.next(),x=_.done,T=_.value;return{done:x,value:x?void 0:[T,h.get(T)]}}})},e[Ia]=function(){return this.entries()},e.forEach=function(h,g){for(var y=Er(this),_;!(_=y()).done;){var x=_.value,T=x[0],d=x[1];h.call(g,d,T,this)}},e.merge=function(h){var g=this;return Bt(h)&&(h=new Map(h)),Ft(function(){lt(h)?qh(h).forEach(function(y){return g.set(y,h[y])}):Array.isArray(h)?h.forEach(function(y){var _=y[0],x=y[1];return g.set(_,x)}):Sr(h)?(h.constructor!==Map&&ge(19,h),h.forEach(function(y,_){return g.set(_,y)})):h!=null&&ge(20,h)}),this},e.clear=function(){var h=this;Ft(function(){da(function(){for(var g=Er(h.keys()),y;!(y=g()).done;){var _=y.value;h.delete(_)}})})},e.replace=function(h){var g=this;return Ft(function(){for(var y=Fd(h),_=new Map,x=!1,T=Er(g.data_.keys()),d;!(d=T()).done;){var n=d.value;if(!y.has(n)){var u=g.delete(n);if(u)x=!0;else{var l=g.data_.get(n);_.set(n,l)}}}for(var r=Er(y.entries()),o;!(o=r()).done;){var i=o.value,a=i[0],f=i[1],s=g.data_.has(a);if(g.set(a,f),g.data_.has(a)){var p=g.data_.get(a);_.set(a,p),s||(x=!0)}}if(!x)if(g.data_.size!==_.size)g.keysAtom_.reportChanged();else for(var v=g.data_.keys(),m=_.keys(),b=v.next(),w=m.next();!b.done;){if(b.value!==w.value){g.keysAtom_.reportChanged();break}b=v.next(),w=m.next()}g.data_=_}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(h,g){return process.env.NODE_ENV!=="production"&&g===!0&&ge("`observe` doesn't support fireImmediately=true in combination with maps."),sn(this,h)},e.intercept_=function(h){return on(this,h)},Vi(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:La,get:function(){return"Map"}}]),t}(),Bt=er("ObservableMap",Fa);function Fd(t){if(Sr(t)||Bt(t))return t;if(Array.isArray(t))return new Map(t);if(lt(t)){var e=new Map;for(var c in t)e.set(c,t[c]);return e}else return ge(21,t)}var Ba,Na,Bd={};Ba=Symbol.iterator,Na=Symbol.toStringTag;var Va=function(){function t(c,h,g){var y=this;h===void 0&&(h=tr),g===void 0&&(g=process.env.NODE_ENV!=="production"?"ObservableSet@"+xt():"ObservableSet"),this.name_=void 0,this[ye]=Bd,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=g,Ge(Set)||ge(22),this.enhancer_=function(_,x){return h(_,x,g)},$t(function(){y.atom_=Js(y.name_),c&&y.replace(c)})}var e=t.prototype;return e.dehanceValue_=function(h){return this.dehancer!==void 0?this.dehancer(h):h},e.clear=function(){var h=this;Ft(function(){da(function(){for(var g=Er(h.data_.values()),y;!(y=g()).done;){var _=y.value;h.delete(_)}})})},e.forEach=function(h,g){for(var y=Er(this),_;!(_=y()).done;){var x=_.value;h.call(g,x,x,this)}},e.add=function(h){var g=this;if(Mt(this.atom_),yt(this)){var y=bt(this,{type:Xt,object:this,newValue:h});if(!y)return this}if(!this.has(h)){Ft(function(){g.data_.add(g.enhancer_(h,void 0)),g.atom_.reportChanged()});var _=process.env.NODE_ENV!=="production"&&Ze(),x=Ct(this),T=x||_?{observableKind:"set",debugObjectName:this.name_,type:Xt,object:this,newValue:h}:null;_&&process.env.NODE_ENV!=="production"&&ct(T),x&&St(this,T),_&&process.env.NODE_ENV!=="production"&&ut()}return this},e.delete=function(h){var g=this;if(yt(this)){var y=bt(this,{type:ii,object:this,oldValue:h});if(!y)return!1}if(this.has(h)){var _=process.env.NODE_ENV!=="production"&&Ze(),x=Ct(this),T=x||_?{observableKind:"set",debugObjectName:this.name_,type:ii,object:this,oldValue:h}:null;return _&&process.env.NODE_ENV!=="production"&&ct(T),Ft(function(){g.atom_.reportChanged(),g.data_.delete(h)}),x&&St(this,T),_&&process.env.NODE_ENV!=="production"&&ut(),!0}return!1},e.has=function(h){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(h))},e.entries=function(){var h=0,g=Array.from(this.keys()),y=Array.from(this.values());return ln({next:function(){var x=h;return h+=1,x<y.length?{value:[g[x],y[x]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var h=this,g=0,y=Array.from(this.data_.values());return ln({next:function(){return g<y.length?{value:h.dehanceValue_(y[g++]),done:!1}:{done:!0}}})},e.replace=function(h){var g=this;return Dr(h)&&(h=new Set(h)),Ft(function(){Array.isArray(h)?(g.clear(),h.forEach(function(y){return g.add(y)})):$r(h)?(g.clear(),h.forEach(function(y){return g.add(y)})):h!=null&&ge("Cannot initialize set from "+h)}),this},e.observe_=function(h,g){return process.env.NODE_ENV!=="production"&&g===!0&&ge("`observe` doesn't support fireImmediately=true in combination with sets."),sn(this,h)},e.intercept_=function(h){return on(this,h)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Ba]=function(){return this.values()},Vi(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Na,get:function(){return"Set"}}]),t}(),Dr=er("ObservableSet",Va),Ya=Object.create(null),Ua="remove",ro=function(){function t(c,h,g,y){h===void 0&&(h=new Map),y===void 0&&(y=Of),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=c,this.values_=h,this.name_=g,this.defaultAnnotation_=y,this.keysAtom_=new Kr(process.env.NODE_ENV!=="production"?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=lt(this.target_),process.env.NODE_ENV!=="production"&&!Qa(this.defaultAnnotation_)&&ge("defaultAnnotation must be valid annotation"),process.env.NODE_ENV!=="production"&&(this.appliedAnnotations_={})}var e=t.prototype;return e.getObservablePropValue_=function(h){return this.values_.get(h).get()},e.setObservablePropValue_=function(h,g){var y=this.values_.get(h);if(y instanceof ir)return y.set(g),!0;if(yt(this)){var _=bt(this,{type:Tt,object:this.proxy_||this.target_,name:h,newValue:g});if(!_)return null;g=_.newValue}if(g=y.prepareNewValue_(g),g!==oe.UNCHANGED){var x=Ct(this),T=process.env.NODE_ENV!=="production"&&Ze(),d=x||T?{type:Tt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:y.value_,name:h,newValue:g}:null;process.env.NODE_ENV!=="production"&&T&&ct(d),y.setNewValue_(g),x&&St(this,d),process.env.NODE_ENV!=="production"&&T&&ut()}return!0},e.get_=function(h){return oe.trackingDerivation&&!gt(this.target_,h)&&this.has_(h),this.target_[h]},e.set_=function(h,g,y){return y===void 0&&(y=!1),gt(this.target_,h)?this.values_.has(h)?this.setObservablePropValue_(h,g):y?Reflect.set(this.target_,h,g):(this.target_[h]=g,!0):this.extend_(h,{value:g,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,y)},e.has_=function(h){if(!oe.trackingDerivation)return h in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var g=this.pendingKeys_.get(h);return g||(g=new nr(h in this.target_,Yn,process.env.NODE_ENV!=="production"?this.name_+"."+Ni(h)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(h,g)),g.get()},e.make_=function(h,g){if(g===!0&&(g=this.defaultAnnotation_),g!==!1){if(Wa(this,g,h),!(h in this.target_)){var y;if((y=this.target_[it])!=null&&y[h])return;ge(1,g.annotationType_,this.name_+"."+h.toString())}for(var _=this.target_;_&&_!==In;){var x=Rn(_,h);if(x){var T=g.make_(this,h,x,_);if(T===0)return;if(T===1)break}_=Object.getPrototypeOf(_)}za(this,g,h)}},e.extend_=function(h,g,y,_){if(_===void 0&&(_=!1),y===!0&&(y=this.defaultAnnotation_),y===!1)return this.defineProperty_(h,g,_);Wa(this,y,h);var x=y.extend_(this,h,g,_);return x&&za(this,y,h),x},e.defineProperty_=function(h,g,y){y===void 0&&(y=!1),Mt(this.keysAtom_);try{vt();var _=this.delete_(h);if(!_)return _;if(yt(this)){var x=bt(this,{object:this.proxy_||this.target_,name:h,type:Xt,newValue:g.value});if(!x)return null;var T=x.newValue;g.value!==T&&(g=It({},g,{value:T}))}if(y){if(!Reflect.defineProperty(this.target_,h,g))return!1}else At(this.target_,h,g);this.notifyPropertyAddition_(h,g.value)}finally{mt()}return!0},e.defineObservableProperty_=function(h,g,y,_){_===void 0&&(_=!1),Mt(this.keysAtom_);try{vt();var x=this.delete_(h);if(!x)return x;if(yt(this)){var T=bt(this,{object:this.proxy_||this.target_,name:h,type:Xt,newValue:g});if(!T)return null;g=T.newValue}var d=Ha(h),n={configurable:oe.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:d.get,set:d.set};if(_){if(!Reflect.defineProperty(this.target_,h,n))return!1}else At(this.target_,h,n);var u=new nr(g,y,process.env.NODE_ENV!=="production"?this.name_+"."+h.toString():"ObservableObject.key",!1);this.values_.set(h,u),this.notifyPropertyAddition_(h,u.value_)}finally{mt()}return!0},e.defineComputedProperty_=function(h,g,y){y===void 0&&(y=!1),Mt(this.keysAtom_);try{vt();var _=this.delete_(h);if(!_)return _;if(yt(this)){var x=bt(this,{object:this.proxy_||this.target_,name:h,type:Xt,newValue:void 0});if(!x)return null}g.name||(g.name=process.env.NODE_ENV!=="production"?this.name_+"."+h.toString():"ObservableObject.key"),g.context=this.proxy_||this.target_;var T=Ha(h),d={configurable:oe.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:T.get,set:T.set};if(y){if(!Reflect.defineProperty(this.target_,h,d))return!1}else At(this.target_,h,d);this.values_.set(h,new ir(g)),this.notifyPropertyAddition_(h,void 0)}finally{mt()}return!0},e.delete_=function(h,g){if(g===void 0&&(g=!1),Mt(this.keysAtom_),!gt(this.target_,h))return!0;if(yt(this)){var y=bt(this,{object:this.proxy_||this.target_,name:h,type:Ua});if(!y)return null}try{var _,x;vt();var T=Ct(this),d=process.env.NODE_ENV!=="production"&&Ze(),n=this.values_.get(h),u=void 0;if(!n&&(T||d)){var l;u=(l=Rn(this.target_,h))==null?void 0:l.value}if(g){if(!Reflect.deleteProperty(this.target_,h))return!1}else delete this.target_[h];if(process.env.NODE_ENV!=="production"&&delete this.appliedAnnotations_[h],n&&(this.values_.delete(h),n instanceof nr&&(u=n.value_),ba(n)),this.keysAtom_.reportChanged(),(_=this.pendingKeys_)==null||(x=_.get(h))==null||x.set(h in this.target_),T||d){var r={type:Ua,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:u,name:h};process.env.NODE_ENV!=="production"&&d&&ct(r),T&&St(this,r),process.env.NODE_ENV!=="production"&&d&&ut()}}finally{mt()}return!0},e.observe_=function(h,g){return process.env.NODE_ENV!=="production"&&g===!0&&ge("`observe` doesn't support the fire immediately property for observable objects."),sn(this,h)},e.intercept_=function(h){return on(this,h)},e.notifyPropertyAddition_=function(h,g){var y,_,x=Ct(this),T=process.env.NODE_ENV!=="production"&&Ze();if(x||T){var d=x||T?{type:Xt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:h,newValue:g}:null;process.env.NODE_ENV!=="production"&&T&&ct(d),x&&St(this,d),process.env.NODE_ENV!=="production"&&T&&ut()}(y=this.pendingKeys_)==null||(_=y.get(h))==null||_.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Tr(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function lr(t,e){var c;if(process.env.NODE_ENV!=="production"&&e&&cr(t)&&ge("Options can't be provided for already observable objects."),gt(t,ye))return process.env.NODE_ENV!=="production"&&!(oo(t)instanceof ro)&&ge("Cannot convert '"+oi(t)+`' into observable object:
The target is already observable of different type.
Extending builtins is not supported.`),t;process.env.NODE_ENV!=="production"&&!Object.isExtensible(t)&&ge("Cannot make the designated object observable; it is not extensible");var h=(c=e==null?void 0:e.name)!=null?c:process.env.NODE_ENV!=="production"?(lt(t)?"ObservableObject":t.constructor.name)+"@"+xt():"ObservableObject",g=new ro(t,new Map,String(h),Bf(e));return Gr(t,ye,g),t}var Nd=er("ObservableObjectAdministration",ro);function Ha(t){return Ya[t]||(Ya[t]={get:function(){return this[ye].getObservablePropValue_(t)},set:function(c){return this[ye].setObservablePropValue_(t,c)}})}function cr(t){return Fn(t)?Nd(t[ye]):!1}function za(t,e,c){var h;process.env.NODE_ENV!=="production"&&(t.appliedAnnotations_[c]=e),(h=t.target_[it])==null||delete h[c]}function Wa(t,e,c){if(process.env.NODE_ENV!=="production"&&!Qa(e)&&ge("Cannot annotate '"+t.name_+"."+c.toString()+"': Invalid annotation."),process.env.NODE_ENV!=="production"&&!Un(e)&&gt(t.appliedAnnotations_,c)){var h=t.name_+"."+c.toString(),g=t.appliedAnnotations_[c].annotationType_,y=e.annotationType_;ge("Cannot apply '"+y+"' to '"+h+"':"+(`
The field is already annotated with '`+g+"'.")+`
Re-annotating fields is not allowed.
Use 'override' annotation for methods overridden by subclass.`)}}var Vd=Ga(0),Yd=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1}(),no=0,Xa=function(){};function Ud(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}Ud(Xa,Array.prototype);var io=function(t,e,c){Ks(h,t);function h(y,_,x,T){var d;return x===void 0&&(x=process.env.NODE_ENV!=="production"?"ObservableArray@"+xt():"ObservableArray"),T===void 0&&(T=!1),d=t.call(this)||this,$t(function(){var n=new to(x,_,T,!0);n.proxy_=Bn(d),Xs(Bn(d),ye,n),y&&y.length&&d.spliceWithArray(0,0,y),Yd&&Object.defineProperty(Bn(d),"0",Vd)}),d}var g=h.prototype;return g.concat=function(){this[ye].atom_.reportObserved();for(var _=arguments.length,x=new Array(_),T=0;T<_;T++)x[T]=arguments[T];return Array.prototype.concat.apply(this.slice(),x.map(function(d){return an(d)?d.slice():d}))},g[c]=function(){var y=this,_=0;return ln({next:function(){return _<y.length?{value:y[_++],done:!1}:{done:!0,value:void 0}}})},Vi(h,[{key:"length",get:function(){return this[ye].getArrayLength_()},set:function(_){this[ye].setArrayLength_(_)}},{key:e,get:function(){return"Array"}}]),h}(Xa,Symbol.toStringTag,Symbol.iterator);Object.entries(ni).forEach(function(t){var e=t[0],c=t[1];e!=="concat"&&Gr(io.prototype,e,c)});function Ga(t){return{enumerable:!1,configurable:!0,get:function(){return this[ye].get_(t)},set:function(c){this[ye].set_(t,c)}}}function Hd(t){At(io.prototype,""+t,Ga(t))}function $a(t){if(t>no){for(var e=no;e<t+100;e++)Hd(e);no=t}}$a(1e3);function zd(t,e,c){return new io(t,e,c)}function Gt(t,e){if(typeof t=="object"&&t!==null){if(an(t))return e!==void 0&&ge(23),t[ye].atom_;if(Dr(t))return t.atom_;if(Bt(t)){if(e===void 0)return t.keysAtom_;var c=t.data_.get(e)||t.hasMap_.get(e);return c||ge(25,e,oi(t)),c}if(cr(t)){if(!e)return ge(26);var h=t[ye].values_.get(e);return h||ge(27,e,oi(t)),h}if(Ui(t)||Kn(t)||ti(t))return t}else if(Ge(t)&&ti(t[ye]))return t[ye];ge(28)}function oo(t,e){if(t||ge(29),e!==void 0)return oo(Gt(t,e));if(Ui(t)||Kn(t)||ti(t)||Bt(t)||Dr(t))return t;if(t[ye])return t[ye];ge(24,t)}function oi(t,e){var c;if(e!==void 0)c=Gt(t,e);else{if(tn(t))return t.name;cr(t)||Bt(t)||Dr(t)?c=oo(t):c=Gt(t)}return c.name_}function $t(t){var e=or(),c=$n(!0);vt();try{return t()}finally{mt(),qn(c),Lt(e)}}var qa=In.toString;function so(t,e,c){return c===void 0&&(c=-1),ao(t,e,c)}function ao(t,e,c,h,g){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var y=typeof t;if(y!=="function"&&y!=="object"&&typeof e!="object")return!1;var _=qa.call(t);if(_!==qa.call(e))return!1;switch(_){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":c>=0&&c++;break}t=Ka(t),e=Ka(e);var x=_==="[object Array]";if(!x){if(typeof t!="object"||typeof e!="object")return!1;var T=t.constructor,d=e.constructor;if(T!==d&&!(Ge(T)&&T instanceof T&&Ge(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(c===0)return!1;c<0&&(c=-1),h=h||[],g=g||[];for(var n=h.length;n--;)if(h[n]===t)return g[n]===e;if(h.push(t),g.push(e),x){if(n=t.length,n!==e.length)return!1;for(;n--;)if(!ao(t[n],e[n],c-1,h,g))return!1}else{var u=Object.keys(t),l;if(n=u.length,Object.keys(e).length!==n)return!1;for(;n--;)if(l=u[n],!(gt(e,l)&&ao(t[l],e[l],c-1,h,g)))return!1}return h.pop(),g.pop(),!0}function Ka(t){return an(t)?t.slice():Sr(t)||Bt(t)||$r(t)||Dr(t)?Array.from(t.entries()):t}function ln(t){return t[Symbol.iterator]=Wd,t}function Wd(){return this}function Qa(t){return t instanceof Object&&typeof t.annotationType_=="string"&&Ge(t.make_)&&Ge(t.extend_)}if(["Symbol","Map","Set"].forEach(function(t){var e=Fi();typeof e[t]>"u"&&ge("MobX requires global '"+t+"' to be available or polyfilled")}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:ad,extras:{getDebugName:oi},$mobx:ye}),!le.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Dd)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Xd(t){t()}function Gd(t){t||(t=Xd,process.env.NODE_ENV!=="production"&&console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")),wd({reactionScheduler:t})}function $d(t){return Aa(t)}var qd=1e4,Kd=1e4,Qd=function(){function t(e){var c=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(h){h===void 0&&(h=qd),clearTimeout(c.sweepTimeout),c.sweepTimeout=void 0;var g=Date.now();c.registrations.forEach(function(y,_){g-y.registeredAt>=h&&(c.finalize(y.value),c.registrations.delete(_))}),c.registrations.size>0&&c.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){c.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,c,h){this.registrations.set(h,{value:c,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Kd))}}),t}(),Jd=typeof FinalizationRegistry<"u"?FinalizationRegistry:Qd,cn=new Jd(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),lo={exports:{}},co={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja;function Zd(){if(Ja)return co;Ja=1;var t=le;function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var c=typeof Object.is=="function"?Object.is:e,h=t.useState,g=t.useEffect,y=t.useLayoutEffect,_=t.useDebugValue;function x(u,l){var r=l(),o=h({inst:{value:r,getSnapshot:l}}),i=o[0].inst,a=o[1];return y(function(){i.value=r,i.getSnapshot=l,T(i)&&a({inst:i})},[u,r,l]),g(function(){return T(i)&&a({inst:i}),u(function(){T(i)&&a({inst:i})})},[u]),_(r),r}function T(u){var l=u.getSnapshot;u=u.value;try{var r=l();return!c(u,r)}catch{return!0}}function d(u,l){return l()}var n=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:x;return co.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:n,co}var uo={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za;function eg(){return Za||(Za=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=le,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function c(p){{for(var v=arguments.length,m=new Array(v>1?v-1:0),b=1;b<v;b++)m[b-1]=arguments[b];h("error",p,m)}}function h(p,v,m){{var b=e.ReactDebugCurrentFrame,w=b.getStackAddendum();w!==""&&(v+="%s",m=m.concat([w]));var E=m.map(function(A){return String(A)});E.unshift("Warning: "+v),Function.prototype.apply.call(console[p],console,E)}}function g(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var y=typeof Object.is=="function"?Object.is:g,_=t.useState,x=t.useEffect,T=t.useLayoutEffect,d=t.useDebugValue,n=!1,u=!1;function l(p,v,m){n||t.startTransition!==void 0&&(n=!0,c("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var b=v();if(!u){var w=v();y(b,w)||(c("The result of getSnapshot should be cached to avoid an infinite loop"),u=!0)}var E=_({inst:{value:b,getSnapshot:v}}),A=E[0].inst,O=E[1];return T(function(){A.value=b,A.getSnapshot=v,r(A)&&O({inst:A})},[p,b,v]),x(function(){r(A)&&O({inst:A});var L=function(){r(A)&&O({inst:A})};return p(L)},[p]),d(b),b}function r(p){var v=p.getSnapshot,m=p.value;try{var b=v();return!y(m,b)}catch{return!0}}function o(p,v,m){return v()}var i=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a=!i,f=a?o:l,s=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f;uo.useSyncExternalStore=s,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),uo}process.env.NODE_ENV==="production"?lo.exports=Zd():lo.exports=eg();var tg=lo.exports;function el(t){t.reaction=new Zr("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function rg(t,e){e===void 0&&(e="observed");var c=le.useRef(null);if(!c.current){var h={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(x){return cn.unregister(h),h.onStoreChange=x,h.reaction||(el(h),h.stateVersion=Symbol()),function(){var T;h.onStoreChange=null,(T=h.reaction)===null||T===void 0||T.dispose(),h.reaction=null}},getSnapshot:function(){return h.stateVersion}};c.current=h}var g=c.current;g.reaction||(el(g),cn.register(c,g,g)),le.useDebugValue(g.reaction,$d),tg.useSyncExternalStore(g.subscribe,g.getSnapshot,g.getSnapshot);var y,_;if(g.reaction.track(function(){try{y=t()}catch(x){_=x}}),_)throw _;return y}var ho,fo,tl=!0,rl=typeof Symbol=="function"&&Symbol.for,ng=(fo=(ho=Object.getOwnPropertyDescriptor(function(){},"name"))===null||ho===void 0?void 0:ho.configurable)!==null&&fo!==void 0?fo:!1,nl=rl?Symbol.for("react.forward_ref"):typeof le.forwardRef=="function"&&le.forwardRef(function(t){return null}).$$typeof,il=rl?Symbol.for("react.memo"):typeof le.memo=="function"&&le.memo(function(t){return null}).$$typeof;function ig(t,e){var c;if(process.env.NODE_ENV!=="production"&&tl&&e&&(tl=!1,console.warn("[mobx-react-lite] `observer(fn, { forwardRef: true })` is deprecated, use `observer(React.forwardRef(fn))`")),il&&t.$$typeof===il)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var h=(c=e==null?void 0:e.forwardRef)!==null&&c!==void 0?c:!1,g=t,y=t.displayName||t.name;if(nl&&t.$$typeof===nl&&(h=!0,g=t.render,typeof g!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var _=function(x,T){return rg(function(){return g(x,T)},y)};return _.displayName=t.displayName,ng&&Object.defineProperty(_,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(_.contextTypes=t.contextTypes),h&&(_=le.forwardRef(_)),_=le.memo(_),sg(t,_),process.env.NODE_ENV!=="production"&&Object.defineProperty(_,"contextTypes",{set:function(){var x,T;throw new Error("[mobx-react-lite] `".concat(this.displayName||((x=this.type)===null||x===void 0?void 0:x.displayName)||((T=this.type)===null||T===void 0?void 0:T.name)||"Component",".contextTypes` must be set before applying `observer`."))}}),_}var og={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function sg(t,e){Object.keys(t).forEach(function(c){og[c]||Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(t,c))})}process.env.NODE_ENV,globalThis&&globalThis.__read;var go;Gd(Qt.unstable_batchedUpdates),go=cn.finalizeAllImmediately;function ag(t,e){if(ol(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var c=Object.keys(t),h=Object.keys(e);if(c.length!==h.length)return!1;for(var g=0;g<c.length;g++)if(!Object.hasOwnProperty.call(e,c[g])||!ol(t[c[g]],e[c[g]]))return!1;return!0}function ol(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sl=Symbol("patchMixins"),al=Symbol("patchedDefinition");function lg(t,e){var c=t[sl]=t[sl]||{},h=c[e]=c[e]||{};return h.locks=h.locks||0,h.methods=h.methods||[],h}function ll(t,e){for(var c=this,h=arguments.length,g=new Array(h>2?h-2:0),y=2;y<h;y++)g[y-2]=arguments[y];e.locks++;try{var _;return t!=null&&(_=t.apply(this,g)),_}finally{e.locks--,e.locks===0&&e.methods.forEach(function(x){x.apply(c,g)})}}function cl(t,e){var c=function(){for(var g=arguments.length,y=new Array(g),_=0;_<g;_++)y[_]=arguments[_];ll.call.apply(ll,[this,t,e].concat(y))};return c}function cg(t,e,c){var h=lg(t,e);h.methods.indexOf(c)<0&&h.methods.push(c);var g=Object.getOwnPropertyDescriptor(t,e);if(!(g&&g[al])){var y=t[e],_=ul(t,e,g?g.enumerable:void 0,h,y);Object.defineProperty(t,e,_)}}function ul(t,e,c,h,g){var y,_=cl(g,h);return y={},y[al]=!0,y.get=function(){return _},y.set=function(T){if(this===t)_=cl(T,h);else{var d=ul(this,e,c,h,T);Object.defineProperty(this,e,d)}},y.configurable=!0,y.enumerable=c,y}var hl=Symbol("ObserverAdministration"),fl=Symbol("isMobXReactObserver"),dl;process.env.NODE_ENV!=="production"&&(dl={props:po("props"),state:po("state"),context:po("context")});function un(t){var e;return(e=t[hl])!=null?e:t[hl]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:si(t.constructor),state:void 0,props:void 0,context:void 0}}function ug(t){var e=t.prototype;if(t[fl]){var c=si(t);throw new Error("The provided component class ("+c+") has already been declared as an observer component.")}else t[fl]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==le.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=gl;else if(e.shouldComponentUpdate!==gl)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}process.env.NODE_ENV!=="production"&&Object.defineProperties(e,dl);var h=e.render;if(typeof h!="function"){var g=si(t);throw new Error("[mobx-react] class component ("+g+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}e.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:hg.call(this,h)}),this.render()};var y=e.componentDidMount;return e.componentDidMount=function(){var _=this;if(process.env.NODE_ENV!=="production"&&this.componentDidMount!==Object.getPrototypeOf(this).componentDidMount){var x=si(t);throw new Error("[mobx-react] `observer("+x+").componentDidMount` must be defined on prototype.\n`componentDidMount = () => {}` or `componentDidMount = function() {}` is not supported.")}var T=un(this);return T.mounted=!0,cn.unregister(this),T.forceUpdate=function(){return _.forceUpdate()},(!T.reaction||T.reactionInvalidatedBeforeMount)&&T.forceUpdate(),y==null?void 0:y.apply(this,arguments)},cg(e,"componentWillUnmount",function(){var _,x=un(this);(_=x.reaction)==null||_.dispose(),x.reaction=null,x.forceUpdate=null,x.mounted=!1,x.reactionInvalidatedBeforeMount=!1}),t}function si(t){return t.displayName||t.name||"<component>"}function hg(t){var e=t.bind(this),c=un(this);function h(){c.reaction||(c.reaction=fg(c),c.mounted||cn.register(this,c,this));var g=void 0,y=void 0;if(c.reaction.track(function(){try{y=$f(!1,e)}catch(_){g=_}}),g)throw g;return y}return h}function fg(t){return new Zr(t.name+".render()",function(){if(!t.mounted){t.reactionInvalidatedBeforeMount=!0;return}try{t.forceUpdate==null||t.forceUpdate()}catch{var e;(e=t.reaction)==null||e.dispose(),t.reaction=null}})}function gl(t,e){return this.state!==e?!0:!ag(this.props,t)}function po(t){return{configurable:!0,enumerable:!0,get:function(){var c=un(this),h=ed().trackingDerivation;if(h&&h!==c.reaction)throw new Error('[mobx-react] Cannot read "'+c.name+"."+t+`" in a reactive context, as it isn't observable.
                    Please use component lifecycle method to copy the value into a local observable first.
                    See https://github.com/mobxjs/mobx/blob/main/packages/mobx-react/README.md#note-on-using-props-and-state-in-derivations`);return c[t]},set:function(c){un(this)[t]=c}}}function hn(t,e){if(e&&e.kind!=="class")throw new Error("The @observer decorator can be used on classes only");return t.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(le.Component,t)||Object.prototype.isPrototypeOf.call(le.PureComponent,t)?ug(t):ig(t)}if(le.version.split(".")[0],!le.Component)throw new Error("mobx-react requires React to be available");if(!Ke)throw new Error("mobx-react requires mobx to be available");function pl(t){const[e,c]=le.useState(null);return le.useEffect(()=>{if(!t.current)throw Error("ref must be initialized in intial render");const h=new ResizeObserver(y=>{const x=y[0].target.getBoundingClientRect();c(T=>T&&T.width===x.width&&T.height===x.height?T:{width:x.width,height:x.height})}),g=t.current;return h.observe(g),()=>{h.unobserve(g)}},[t]),e}function dg({containerSize:t}){const e=le.useRef(null),{core:c}=Qe();return le.useEffect(()=>(c.setCanvas(e.current),()=>{c.detach()}),[c]),le.useEffect(()=>{c.setContainerSize(t)},[t,c]),I.jsx(I.Fragment,{children:I.jsx("canvas",{ref:e})})}var ft={};const vo=Jo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.1"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var c=vo,h=new c.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=h.document,e.jsdomImplForWrapper=vo.implForWrapper,e.nodeCanvas=vo.Canvas,e.window=h,DOMParser=e.window.DOMParser}if(e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),typeof g>"u")var g={};if(function(d){d.modifyEventListener=!1,d.modifySelectors=!1,d.configure=function(O){isFinite(O.modifyEventListener)&&(d.modifyEventListener=O.modifyEventListener),isFinite(O.modifySelectors)&&(d.modifySelectors=O.modifySelectors),b===!1&&d.modifyEventListener&&w(),E===!1&&d.modifySelectors&&A()},d.add=function(O,L,Y,V){return u(O,L,Y,V,"add")},d.remove=function(O,L,Y,V){return u(O,L,Y,V,"remove")},d.returnFalse=function(O){return!1},d.stop=function(O){O&&(O.stopPropagation&&O.stopPropagation(),O.cancelBubble=!0,O.cancelBubbleCount=0)},d.prevent=function(O){O&&(O.preventDefault?O.preventDefault():O.preventManipulation?O.preventManipulation():O.returnValue=!1)},d.cancel=function(O){d.stop(O),d.prevent(O)},d.blur=function(){var O=document.activeElement;if(O){var L=document.activeElement.nodeName;(L==="INPUT"||L==="TEXTAREA"||O.contentEditable==="true")&&O.blur&&O.blur()}},d.getEventSupport=function(O,L){if(typeof O=="string"&&(L=O,O=window),L="on"+L,L in O)return!0;if(O.setAttribute||(O=document.createElement("div")),O.setAttribute&&O.removeAttribute){O.setAttribute(L,"");var Y=typeof O[L]=="function";return typeof O[L]<"u"&&(O[L]=null),O.removeAttribute(L),Y}};var n=function(O){if(!O||typeof O!="object")return O;var L=new O.constructor;for(var Y in O)!O[Y]||typeof O[Y]!="object"?L[Y]=O[Y]:L[Y]=n(O[Y]);return L},u=function(O,L,Y,V,Q,J){if(V=V||{},String(O)==="[object Object]"){var Z=O;if(O=Z.target,delete Z.target,Z.type&&Z.listener){L=Z.type,delete Z.type,Y=Z.listener,delete Z.listener;for(var re in Z)V[re]=Z[re]}else{for(var ie in Z){var ue=Z[ie];typeof ue!="function"&&(V[ie]=ue)}var X={};for(var re in Z){var ie=re.split(","),S=Z[re],k={};for(var M in V)k[M]=V[M];if(typeof S=="function")var Y=S;else if(typeof S.listener=="function"){var Y=S.listener;for(var M in S)typeof S[M]!="function"&&(k[M]=S[M])}else continue;for(var D=0;D<ie.length;D++)X[re]=g.add(O,ie[D],Y,k,Q)}return X}}if(!(!O||!L||!Y)){if(typeof O=="string"&&L==="ready")if(window.eventjs_stallOnReady)L="load",O=window;else{var B=new Date().getTime(),C=V.timeout,P=V.interval||1e3/60,j=window.setInterval(function(){new Date().getTime()-B>C&&window.clearInterval(j),document.querySelector(O)&&(window.clearInterval(j),setTimeout(Y,1))},P);return}if(typeof O=="string"){if(O=document.querySelectorAll(O),O.length===0)return r("Missing target on listener!",arguments);O.length===1&&(O=O[0])}var F,H={};if(O.length>0&&O!==window){for(var z=0,R=O.length;z<R;z++)F=u(O[z],L,Y,n(V),Q),F&&(H[z]=F);return l(H)}if(typeof L=="string"&&(L=L.toLowerCase(),L.indexOf(" ")!==-1?L=L.split(" "):L.indexOf(",")!==-1&&(L=L.split(","))),typeof L!="string"){if(typeof L.length=="number")for(var ee=0,$=L.length;ee<$;ee++)F=u(O,L[ee],Y,n(V),Q),F&&(H[L[ee]]=F);else for(var re in L)typeof L[re]=="function"?F=u(O,re,L[re],n(V),Q):F=u(O,re,L[re].listener,n(L[re]),Q),F&&(H[re]=F);return l(H)}else L.indexOf("on")===0&&(L=L.slice(2));if(typeof O!="object")return r("Target is not defined!",arguments);if(typeof Y!="function")return r("Listener is not a function!",arguments);var W=V.useCapture||!1,U=p(O)+"."+p(Y)+"."+(W?1:0);if(d.Gesture&&d.Gesture._gestureHandlers[L]){if(U=L+U,Q==="remove"){if(!f[U])return;f[U].remove(),delete f[U]}else if(Q==="add"){if(f[U])return f[U].add(),f[U];if(V.useCall&&!d.modifyEventListener){var q=Y;Y=function(ne,ce){for(var me in ce)ne[me]=ce[me];return q.call(O,ne)}}V.gesture=L,V.target=O,V.listener=Y,V.fromOverwrite=J,f[U]=d.proxy[L](V)}return f[U]}else{for(var te=a(L),D=0,K;D<te.length;D++)if(L=te[D],K=L+"."+U,Q==="remove"){if(!f[K])continue;O[m](L,Y,W),delete f[K]}else if(Q==="add"){if(f[K])return f[K];O[v](L,Y,W),f[K]={id:K,type:L,target:O,listener:Y,remove:function(){for(var ce=0;ce<te.length;ce++)d.remove(O,te[ce],Y,V)}}}return f[K]}}},l=function(O){return{remove:function(){for(var L in O)O[L].remove()},add:function(){for(var L in O)O[L].add()}}},r=function(O,L){typeof console>"u"||typeof console.error>"u"||console.error(O,L)},o={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},i={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2};(function(){d.supports={},window.navigator.msPointerEnabled&&(d.supports.msPointer=!0),d.getEventSupport("touchstart")&&(d.supports.touch=!0),d.getEventSupport("mousedown")&&(d.supports.mouse=!0)})();var a=function(){return function(O){var L=document.addEventListener?"":"on",Y=i[O];if(isFinite(Y)){var V=[];for(var Q in d.supports)V.push(L+o[Q][Y]);return V}else return[L+O]}}(),f={},s=0,p=function(O){return O===window?"#window":O===document?"#document":(O.uniqueID||(O.uniqueID="e"+s++),O.uniqueID)},v=document.addEventListener?"addEventListener":"attachEvent",m=document.removeEventListener?"removeEventListener":"detachEvent";d.createPointerEvent=function(O,L,Y){var V=L.gesture,Q=L.target,J=O.changedTouches||d.proxy.getCoords(O);if(J.length){var Z=J[0];L.pointers=Y?[]:J,L.pageX=Z.pageX,L.pageY=Z.pageY,L.x=L.pageX,L.y=L.pageY}var re=document.createEvent("Event");re.initEvent(V,!0,!0),re.originalEvent=O;for(var ie in L)ie!=="target"&&(re[ie]=L[ie]);var ue=re.type;d.Gesture&&d.Gesture._gestureHandlers[ue]&&L.oldListener.call(Q,re,L,!1)};var b=!1,w=function(){if(window.HTMLElement){var O=function(L){var Y=function(V){var Q=V+"EventListener",J=L[Q];L[Q]=function(Z,re,ie){if(d.Gesture&&d.Gesture._gestureHandlers[Z]){var ue=ie;typeof ie=="object"?ue.useCall=!0:ue={useCall:!0,useCapture:ie},u(this,Z,re,ue,V,!0)}else for(var X=a(Z),S=0;S<X.length;S++)J.call(this,X[S],re,ie)}};Y("add"),Y("remove")};navigator.userAgent.match(/Firefox/)?(O(HTMLDivElement.prototype),O(HTMLCanvasElement.prototype)):O(HTMLElement.prototype),O(document),O(window)}},E=!1,A=function(){var O=NodeList.prototype;O.removeEventListener=function(L,Y,V){for(var Q=0,J=this.length;Q<J;Q++)this[Q].removeEventListener(L,Y,V)},O.addEventListener=function(L,Y,V){for(var Q=0,J=this.length;Q<J;Q++)this[Q].addEventListener(L,Y,V)}};return d}(g),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){d.pointerSetup=function(l,r){l.target=l.target||window,l.doc=l.target.ownerDocument||l.target,l.minFingers=l.minFingers||l.fingers||1,l.maxFingers=l.maxFingers||l.fingers||1/0,l.position=l.position||"relative",delete l.fingers,r=r||{},r.enabled=!0,r.gesture=l.gesture,r.target=l.target,r.env=l.env,g.modifyEventListener&&l.fromOverwrite&&(l.oldListener=l.listener,l.listener=g.createPointerEvent);var o=0,i=r.gesture.indexOf("pointer")===0&&g.modifyEventListener?"pointer":"mouse";return l.oldListener&&(r.oldListener=l.oldListener),r.listener=l.listener,r.proxy=function(a){r.defaultListener=l.listener,l.listener=a,a(l.event,r)},r.add=function(){r.enabled!==!0&&(l.onPointerDown&&g.add(l.target,i+"down",l.onPointerDown),l.onPointerMove&&g.add(l.doc,i+"move",l.onPointerMove),l.onPointerUp&&g.add(l.doc,i+"up",l.onPointerUp),r.enabled=!0)},r.remove=function(){r.enabled!==!1&&(l.onPointerDown&&g.remove(l.target,i+"down",l.onPointerDown),l.onPointerMove&&g.remove(l.doc,i+"move",l.onPointerMove),l.onPointerUp&&g.remove(l.doc,i+"up",l.onPointerUp),r.reset(),r.enabled=!1)},r.pause=function(a){l.onPointerMove&&(!a||a.move)&&g.remove(l.doc,i+"move",l.onPointerMove),l.onPointerUp&&(!a||a.up)&&g.remove(l.doc,i+"up",l.onPointerUp),o=l.fingers,l.fingers=0},r.resume=function(a){l.onPointerMove&&(!a||a.move)&&g.add(l.doc,i+"move",l.onPointerMove),l.onPointerUp&&(!a||a.up)&&g.add(l.doc,i+"up",l.onPointerUp),l.fingers=o},r.reset=function(){l.tracker={},l.fingers=0},r};var n=g.supports;g.isMouse=!!n.mouse,g.isMSPointer=!!n.touch,g.isTouch=!!n.msPointer,d.pointerStart=function(l,r,o){var i=(l.type||"mousedown").toUpperCase();i.indexOf("MOUSE")===0?(g.isMouse=!0,g.isTouch=!1,g.isMSPointer=!1):i.indexOf("TOUCH")===0?(g.isMouse=!1,g.isTouch=!0,g.isMSPointer=!1):i.indexOf("MSPOINTER")===0&&(g.isMouse=!1,g.isTouch=!1,g.isMSPointer=!0);var a=function(O,L){var Y=o.bbox,V=s[L]={};switch(o.position){case"absolute":V.offsetX=0,V.offsetY=0;break;case"differenceFromLast":V.offsetX=O.pageX,V.offsetY=O.pageY;break;case"difference":V.offsetX=O.pageX,V.offsetY=O.pageY;break;case"move":V.offsetX=O.pageX-Y.x1,V.offsetY=O.pageY-Y.y1;break;default:V.offsetX=Y.x1-Y.scrollLeft,V.offsetY=Y.y1-Y.scrollTop;break}var Q=O.pageX-V.offsetX,J=O.pageY-V.offsetY;V.rotation=0,V.scale=1,V.startTime=V.moveTime=new Date().getTime(),V.move={x:Q,y:J},V.start={x:Q,y:J},o.fingers++};o.event=l,r.defaultListener&&(o.listener=r.defaultListener,delete r.defaultListener);for(var f=!o.fingers,s=o.tracker,p=l.changedTouches||d.getCoords(l),v=p.length,m=0;m<v;m++){var b=p[m],w=b.identifier||1/0;if(o.fingers){if(o.fingers>=o.maxFingers){var A=[];for(var w in o.tracker)A.push(w);return r.identifier=A.join(","),f}for(var E in s)if(s[E].up){delete s[E],a(b,w),o.cancel=!0;break}if(s[w])continue;a(b,w)}else s=o.tracker={},r.bbox=o.bbox=d.getBoundingBox(o.target),o.fingers=0,o.cancel=!1,a(b,w)}var A=[];for(var w in o.tracker)A.push(w);return r.identifier=A.join(","),f},d.pointerEnd=function(l,r,o,i){for(var a=l.touches||[],f=a.length,s={},p=0;p<f;p++){var v=a[p],m=v.identifier;s[m||1/0]=!0}for(var m in o.tracker){var b=o.tracker[m];s[m]||b.up||(i&&i({pageX:b.pageX,pageY:b.pageY,changedTouches:[{pageX:b.pageX,pageY:b.pageY,identifier:m==="Infinity"?1/0:m}]},"up"),b.up=!0,o.fingers--)}if(o.fingers!==0)return!1;var w=[];o.gestureFingers=0;for(var m in o.tracker)o.gestureFingers++,w.push(m);return r.identifier=w.join(","),!0},d.getCoords=function(l){return typeof l.pageX<"u"?d.getCoords=function(r){return Array({type:"mouse",x:r.pageX,y:r.pageY,pageX:r.pageX,pageY:r.pageY,identifier:r.pointerId||1/0})}:d.getCoords=function(r){var o=document.documentElement;return r=r||window.event,Array({type:"mouse",x:r.clientX+o.scrollLeft,y:r.clientY+o.scrollTop,pageX:r.clientX+o.scrollLeft,pageY:r.clientY+o.scrollTop,identifier:1/0})},d.getCoords(l)},d.getCoord=function(l){if("ontouchstart"in window){var r=0,o=0;d.getCoord=function(i){var a=i.changedTouches;return a&&a.length?{x:r=a[0].pageX,y:o=a[0].pageY}:{x:r,y:o}}}else typeof l.pageX<"u"&&typeof l.pageY<"u"?d.getCoord=function(i){return{x:i.pageX,y:i.pageY}}:d.getCoord=function(i){var a=document.documentElement;return i=i||window.event,{x:i.clientX+a.scrollLeft,y:i.clientY+a.scrollTop}};return d.getCoord(l)};var u=function(l,r){var o=parseFloat(l.getPropertyValue(r),10);return isFinite(o)?o:0};return d.getBoundingBox=function(l){(l===window||l===document)&&(l=document.body);var r={},o=l.getBoundingClientRect();r.width=o.width,r.height=o.height,r.x1=o.left,r.y1=o.top,r.scaleX=o.width/l.offsetWidth||1,r.scaleY=o.height/l.offsetHeight||1,r.scrollLeft=0,r.scrollTop=0;var i=window.getComputedStyle(l),a=i.getPropertyValue("box-sizing")==="border-box";if(a===!1){var f=u(i,"border-left-width"),s=u(i,"border-right-width"),p=u(i,"border-bottom-width"),v=u(i,"border-top-width");r.border=[f,s,v,p],r.x1+=f,r.y1+=v,r.width-=s+f,r.height-=p+v}r.x2=r.x1+r.width,r.y2=r.y1+r.height;for(var m=i.getPropertyValue("position"),b=m==="fixed"?l:l.parentNode;b!==null&&!(b===document.body||b.scrollTop===void 0);){var i=window.getComputedStyle(b),m=i.getPropertyValue("position");if(m!=="absolute")if(m==="fixed"){r.scrollTop-=b.parentNode.scrollTop,r.scrollLeft-=b.parentNode.scrollLeft;break}else r.scrollLeft+=b.scrollLeft,r.scrollTop+=b.scrollTop;b=b.parentNode}return r.scrollBodyLeft=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,r.scrollBodyTop=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,r.scrollLeft-=r.scrollBodyLeft,r.scrollTop-=r.scrollBodyTop,r},function(){var l=navigator.userAgent.toLowerCase(),r=l.indexOf("macintosh")!==-1,o;r&&l.indexOf("khtml")!==-1?o={91:!0,93:!0}:r&&l.indexOf("firefox")!==-1?o={224:!0}:o={17:!0},(d.metaTrackerReset=function(){g.fnKey=d.fnKey=!1,g.metaKey=d.metaKey=!1,g.escKey=d.escKey=!1,g.ctrlKey=d.ctrlKey=!1,g.shiftKey=d.shiftKey=!1,g.altKey=d.altKey=!1})(),d.metaTracker=function(i){var a=i.type==="keydown";i.keyCode===27&&(g.escKey=d.escKey=a),o[i.keyCode]&&(g.metaKey=d.metaKey=a),g.ctrlKey=d.ctrlKey=i.ctrlKey,g.shiftKey=d.shiftKey=i.shiftKey,g.altKey=d.altKey=i.altKey}}(),d}(g.proxy),typeof g>"u")var g={};if(g.MutationObserver=function(){var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=!d&&function(){var u=document.createElement("p"),l=!1,r=function(){l=!0};if(u.addEventListener)u.addEventListener("DOMAttrModified",r,!1);else if(u.attachEvent)u.attachEvent("onDOMAttrModified",r);else return!1;return u.setAttribute("id","target"),l}();return function(u,l){if(d){var r={subtree:!1,attributes:!0},o=new d(function(i){i.forEach(function(a){l.call(a.target,a.attributeName)})});o.observe(u,r)}else n?g.add(u,"DOMAttrModified",function(i){l.call(u,i.attrName)}):"onpropertychange"in document.body&&g.add(u,"propertychange",function(i){l.call(u,window.event.propertyName)})}}(),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.click=function(n){n.gesture=n.gesture||"click",n.maxFingers=n.maxFingers||n.fingers||1,n.onPointerDown=function(l){d.pointerStart(l,u,n)&&g.add(n.target,"mouseup",n.onPointerUp)},n.onPointerUp=function(l){if(d.pointerEnd(l,u,n)){g.remove(n.target,"mouseup",n.onPointerUp);var r=l.changedTouches||d.getCoords(l),o=r[0],i=n.bbox,a=d.getBoundingBox(n.target),f=o.pageY-a.scrollBodyTop,s=o.pageX-a.scrollBodyLeft;if(s>i.x1&&f>i.y1&&s<i.x2&&f<i.y2&&i.scrollTop===a.scrollTop){for(var p in n.tracker)break;var v=n.tracker[p];u.x=v.start.x,u.y=v.start.y,n.listener(l,u)}}};var u=d.pointerSetup(n);return u.state="click",g.add(n.target,"mousedown",n.onPointerDown),u},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.click=d.click,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.dbltap=d.dblclick=function(n){n.gesture=n.gesture||"dbltap",n.maxFingers=n.maxFingers||n.fingers||1;var u=700,l,r,o,i,a;n.onPointerDown=function(s){var p=s.changedTouches||d.getCoords(s);l&&!r?(a=p[0],r=new Date().getTime()-l):(i=p[0],l=new Date().getTime(),r=0,clearTimeout(o),o=setTimeout(function(){l=0},u)),d.pointerStart(s,f,n)&&(g.add(n.target,"mousemove",n.onPointerMove).listener(s),g.add(n.target,"mouseup",n.onPointerUp))},n.onPointerMove=function(s){if(l&&!r){var p=s.changedTouches||d.getCoords(s);a=p[0]}var v=n.bbox,m=a.pageX-v.x1,b=a.pageY-v.y1;m>0&&m<v.width&&b>0&&b<v.height&&Math.abs(a.pageX-i.pageX)<=25&&Math.abs(a.pageY-i.pageY)<=25||(g.remove(n.target,"mousemove",n.onPointerMove),clearTimeout(o),l=r=0)},n.onPointerUp=function(s){if(d.pointerEnd(s,f,n)&&(g.remove(n.target,"mousemove",n.onPointerMove),g.remove(n.target,"mouseup",n.onPointerUp)),l&&r){if(r<=u){f.state=n.gesture;for(var p in n.tracker)break;var v=n.tracker[p];f.x=v.start.x,f.y=v.start.y,n.listener(s,f)}clearTimeout(o),l=r=0}};var f=d.pointerSetup(n);return f.state="dblclick",g.add(n.target,"mousedown",n.onPointerDown),f},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.dbltap=d.dbltap,g.Gesture._gestureHandlers.dblclick=d.dblclick,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.dragElement=function(n,u){d.drag({event:u,target:n,position:"move",listener:function(l,r){n.style.left=r.x+"px",n.style.top=r.y+"px",g.prevent(l)}})},d.drag=function(n){n.gesture="drag",n.onPointerDown=function(l){d.pointerStart(l,u,n)&&(n.monitor||(g.add(n.doc,"mousemove",n.onPointerMove),g.add(n.doc,"mouseup",n.onPointerUp))),n.onPointerMove(l,"down")},n.onPointerMove=function(l,r){if(!n.tracker)return n.onPointerDown(l);n.bbox;for(var o=l.changedTouches||d.getCoords(l),i=o.length,a=0;a<i;a++){var f=o[a],s=f.identifier||1/0,p=n.tracker[s];p&&(p.pageX=f.pageX,p.pageY=f.pageY,u.state=r||"move",u.identifier=s,u.start=p.start,u.fingers=n.fingers,n.position==="differenceFromLast"?(u.x=p.pageX-p.offsetX,u.y=p.pageY-p.offsetY,p.offsetX=p.pageX,p.offsetY=p.pageY):(u.x=p.pageX-p.offsetX,u.y=p.pageY-p.offsetY),n.listener(l,u))}},n.onPointerUp=function(l){d.pointerEnd(l,u,n,n.onPointerMove)&&(n.monitor||(g.remove(n.doc,"mousemove",n.onPointerMove),g.remove(n.doc,"mouseup",n.onPointerUp)))};var u=d.pointerSetup(n);return n.event?n.onPointerDown(n.event):(g.add(n.target,"mousedown",n.onPointerDown),n.monitor&&(g.add(n.doc,"mousemove",n.onPointerMove),g.add(n.doc,"mouseup",n.onPointerUp))),u},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.drag=d.drag,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){var n=Math.PI/180,u=function(l,r){var o=0,i=0,a=0;for(var f in r){var s=r[f];s.up||(o+=s.move.x,i+=s.move.y,a++)}return l.x=o/=a,l.y=i/=a,l};return d.gesture=function(l){l.gesture=l.gesture||"gesture",l.minFingers=l.minFingers||l.fingers||2,l.onPointerDown=function(o){var i=l.fingers;if(d.pointerStart(o,r,l)&&(g.add(l.doc,"mousemove",l.onPointerMove),g.add(l.doc,"mouseup",l.onPointerUp)),l.fingers===l.minFingers&&i!==l.fingers){r.fingers=l.minFingers,r.scale=1,r.rotation=0,r.state="start";var a="";for(var f in l.tracker)a+=f;r.identifier=parseInt(a),u(r,l.tracker),l.listener(o,r)}},l.onPointerMove=function(o,i){for(var a=l.bbox,f=l.tracker,w=o.changedTouches||d.getCoords(o),s=w.length,p=0;p<s;p++){var v=w[p],m=v.identifier||1/0,b=f[m];b&&(b.move.x=v.pageX-a.x1,b.move.y=v.pageY-a.y1)}if(!(l.fingers<l.minFingers)){var w=[],E=0,A=0;u(r,f);for(var m in f){var v=f[m];if(!v.up){var O=v.start;if(!O.distance){var L=O.x-r.x,Y=O.y-r.y;O.distance=Math.sqrt(L*L+Y*Y),O.angle=Math.atan2(L,Y)/n}var L=v.move.x-r.x,Y=v.move.y-r.y,V=Math.sqrt(L*L+Y*Y);O.distance!==0&&(E+=V/O.distance);var Q=Math.atan2(L,Y)/n,J=(O.angle-Q+360)%360-180;v.DEG2=v.DEG1,v.DEG1=J>0?J:-J,typeof v.DEG2<"u"&&(J>0?v.rotation+=v.DEG1-v.DEG2:v.rotation-=v.DEG1-v.DEG2,A+=v.rotation),w.push(v.move)}}r.touches=w,r.fingers=l.fingers,r.scale=E/l.fingers,r.rotation=A/l.fingers,r.state="change",l.listener(o,r)}},l.onPointerUp=function(o){var i=l.fingers;d.pointerEnd(o,r,l)&&(g.remove(l.doc,"mousemove",l.onPointerMove),g.remove(l.doc,"mouseup",l.onPointerUp)),i===l.minFingers&&l.fingers<l.minFingers&&(r.fingers=l.fingers,r.state="end",l.listener(o,r))};var r=d.pointerSetup(l);return g.add(l.target,"mousedown",l.onPointerDown),r},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.gesture=d.gesture,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.pointerdown=d.pointermove=d.pointerup=function(n){if(n.gesture=n.gesture||"pointer",!n.target.isPointerEmitter){var u=!0;n.onPointerDown=function(r){u=!1,l.gesture="pointerdown",n.listener(r,l)},n.onPointerMove=function(r){l.gesture="pointermove",n.listener(r,l,u)},n.onPointerUp=function(r){u=!0,l.gesture="pointerup",n.listener(r,l,!0)};var l=d.pointerSetup(n);return g.add(n.target,"mousedown",n.onPointerDown),g.add(n.target,"mousemove",n.onPointerMove),g.add(n.doc,"mouseup",n.onPointerUp),n.target.isPointerEmitter=!0,l}},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.pointerdown=d.pointerdown,g.Gesture._gestureHandlers.pointermove=d.pointermove,g.Gesture._gestureHandlers.pointerup=d.pointerup,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.shake=function(n){var u={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:n.target,listener:n.listener,remove:function(){window.removeEventListener("devicemotion",p,!1)}},l=4,r=1e3,o=200,i=3,a=new Date().getTime(),f={x:0,y:0,z:0},s={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},p=function(v){var m=.8,b=v.accelerationIncludingGravity;if(f.x=m*f.x+(1-m)*b.x,f.y=m*f.y+(1-m)*b.y,f.z=m*f.z+(1-m)*b.z,u.accelerationIncludingGravity=f,u.acceleration.x=b.x-f.x,u.acceleration.y=b.y-f.y,u.acceleration.z=b.z-f.z,n.gesture==="devicemotion"){n.listener(v,u);return}for(var w="xyz",E=new Date().getTime(),A=0,O=w.length;A<O;A++){var L=w[A],Y=u.acceleration[L],V=s[L],Q=Math.abs(Y);if(!(E-a<r)&&Q>l){var J=E*Y/Q,Z=Math.abs(J+V.value);V.value&&Z<o?(V.value=J,V.count++,V.count===i&&(n.listener(v,u),a=E,V.value=0,V.count=0)):(V.value=J,V.count=1)}}};if(window.addEventListener)return window.addEventListener("devicemotion",p,!1),u},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.shake=d.shake,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){var n=Math.PI/180;return d.swipe=function(u){u.snap=u.snap||90,u.threshold=u.threshold||1,u.gesture=u.gesture||"swipe",u.onPointerDown=function(r){d.pointerStart(r,l,u)&&(g.add(u.doc,"mousemove",u.onPointerMove).listener(r),g.add(u.doc,"mouseup",u.onPointerUp))},u.onPointerMove=function(r){for(var o=r.changedTouches||d.getCoords(r),i=o.length,a=0;a<i;a++){var f=o[a],s=f.identifier||1/0,p=u.tracker[s];p&&(p.move.x=f.pageX,p.move.y=f.pageY,p.moveTime=new Date().getTime())}},u.onPointerUp=function(r){if(d.pointerEnd(r,l,u)){g.remove(u.doc,"mousemove",u.onPointerMove),g.remove(u.doc,"mouseup",u.onPointerUp);var o,i,a,f,s={x:0,y:0},p=0,v=0,m=0;for(var b in u.tracker){var w=u.tracker[b],E=w.move.x-w.start.x,A=w.move.y-w.start.y;p+=w.move.x,v+=w.move.y,s.x+=w.start.x,s.y+=w.start.y,m++;var O=Math.sqrt(E*E+A*A),L=w.moveTime-w.startTime,f=Math.atan2(E,A)/n+180,i=L?O/L:0;if(typeof a>"u")a=f,o=i;else if(Math.abs(f-a)<=20)a=(a+f)/2,o=(o+i)/2;else return}var Y=u.gestureFingers;u.minFingers<=Y&&u.maxFingers>=Y&&o>u.threshold&&(s.x/=m,s.y/=m,l.start=s,l.x=p/m,l.y=v/m,l.angle=-(((a/u.snap+.5>>0)*u.snap||360)-360),l.velocity=o,l.fingers=Y,l.state="swipe",u.listener(r,l))}};var l=d.pointerSetup(u);return g.add(u.target,"mousedown",u.onPointerDown),l},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.swipe=d.swipe,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.longpress=function(n){return n.gesture="longpress",d.tap(n)},d.tap=function(n){n.delay=n.delay||500,n.timeout=n.timeout||250,n.driftDeviance=n.driftDeviance||10,n.gesture=n.gesture||"tap";var u,l;n.onPointerDown=function(o){if(d.pointerStart(o,r,n)){if(u=new Date().getTime(),g.add(n.doc,"mousemove",n.onPointerMove).listener(o),g.add(n.doc,"mouseup",n.onPointerUp),n.gesture!=="longpress")return;l=setTimeout(function(){if(!(o.cancelBubble&&++o.cancelBubbleCount>1)){var i=0;for(var a in n.tracker){var f=n.tracker[a];if(f.end===!0||n.cancel)return;i++}n.minFingers<=i&&n.maxFingers>=i&&(r.state="start",r.fingers=i,r.x=f.start.x,r.y=f.start.y,n.listener(o,r))}},n.delay)}},n.onPointerMove=function(o){for(var i=n.bbox,a=o.changedTouches||d.getCoords(o),f=a.length,s=0;s<f;s++){var p=a[s],v=p.identifier||1/0,m=n.tracker[v];if(m){var b=p.pageX-i.x1-parseInt(window.scrollX),w=p.pageY-i.y1-parseInt(window.scrollY),E=b-m.start.x,A=w-m.start.y,O=Math.sqrt(E*E+A*A);if(!(b>0&&b<i.width&&w>0&&w<i.height&&O<=n.driftDeviance)){g.remove(n.doc,"mousemove",n.onPointerMove),n.cancel=!0;return}}}},n.onPointerUp=function(o){if(d.pointerEnd(o,r,n)){if(clearTimeout(l),g.remove(n.doc,"mousemove",n.onPointerMove),g.remove(n.doc,"mouseup",n.onPointerUp),o.cancelBubble&&++o.cancelBubbleCount>1)return;if(n.gesture==="longpress"){r.state==="start"&&(r.state="end",n.listener(o,r));return}if(n.cancel||new Date().getTime()-u>n.timeout)return;var i=n.gestureFingers;n.minFingers<=i&&n.maxFingers>=i&&(r.state="tap",r.fingers=n.gestureFingers,n.listener(o,r))}};var r=d.pointerSetup(n);return g.add(n.target,"mousedown",n.onPointerDown),r},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.tap=d.tap,g.Gesture._gestureHandlers.longpress=d.longpress,d}(g.proxy),typeof g>"u")var g={};if(typeof g.proxy>"u"&&(g.proxy={}),g.proxy=function(d){return d.wheelPreventElasticBounce=function(n){n&&(typeof n=="string"&&(n=document.querySelector(n)),g.add(n,"wheel",function(u,l){l.preventElasticBounce(),g.stop(u)}))},d.wheel=function(n){var u,l=n.timeout||150,r=0,o={gesture:"wheel",state:"start",wheelDelta:0,target:n.target,listener:n.listener,preventElasticBounce:function(p){var v=this.target,m=v.scrollTop,b=m+v.offsetHeight,w=v.scrollHeight;(b===w&&this.wheelDelta<=0||m===0&&this.wheelDelta>=0)&&g.cancel(p),g.stop(p)},add:function(){n.target[a](s,i,!1)},remove:function(){n.target[f](s,i,!1)}},i=function(p){p=p||window.event,o.state=r++?"change":"start",o.wheelDelta=p.detail?p.detail*-20:p.wheelDelta,n.listener(p,o),clearTimeout(u),u=setTimeout(function(){r=0,o.state="end",o.wheelDelta=0,n.listener(p,o)},l)},a=document.addEventListener?"addEventListener":"attachEvent",f=document.removeEventListener?"removeEventListener":"detachEvent",s=g.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return n.target[a](s,i,!1),o},g.Gesture=g.Gesture||{},g.Gesture._gestureHandlers=g.Gesture._gestureHandlers||{},g.Gesture._gestureHandlers.wheel=d.wheel,d}(g.proxy),typeof y>"u")var y={};typeof y.proxy>"u"&&(y.proxy={}),y.proxy=function(d){return d.orientation=function(n){var u={gesture:"orientationchange",previous:null,current:window.orientation,target:n.target,listener:n.listener,remove:function(){window.removeEventListener("orientationchange",l,!1)}},l=function(r){if(u.previous=u.current,u.current=window.orientation,u.previous!==null&&u.previous!=u.current){n.listener(r,u);return}};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",l,!1),u},y.Gesture=y.Gesture||{},y.Gesture._gestureHandlers=y.Gesture._gestureHandlers||{},y.Gesture._gestureHandlers.orientation=d.orientation,d}(y.proxy),function(){function d(i,a){if(this.__eventListeners[i]){var f=this.__eventListeners[i];a?f[f.indexOf(a)]=!1:e.util.array.fill(f,!1)}}function n(i,a){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var f in i)this.on(f,i[f]);else this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(a);return this}function u(i,a){var f=(function(){a.apply(this,arguments),this.off(i,f)}).bind(this);this.on(i,f)}function l(i,a){if(arguments.length===1)for(var f in i)u.call(this,f,i[f]);else u.call(this,i,a);return this}function r(i,a){if(!this.__eventListeners)return this;if(arguments.length===0)for(i in this.__eventListeners)d.call(this,i);else if(arguments.length===1&&typeof arguments[0]=="object")for(var f in i)d.call(this,f,i[f]);else d.call(this,i,a);return this}function o(i,a){if(!this.__eventListeners)return this;var f=this.__eventListeners[i];if(!f)return this;for(var s=0,p=f.length;s<p;s++)f[s]&&f[s].call(this,a||{});return this.__eventListeners[i]=f.filter(function(v){return v!==!1}),this}e.Observable={fire:o,on:n,once:l,off:r}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,n=arguments.length;d<n;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,n,u){var l=this._objects;return u?l[n]=d:l.splice(n,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,n,u=!1,l=0,r=arguments.length;l<r;l++)n=d.indexOf(arguments[l]),n!==-1&&(u=!0,d.splice(n,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(d,n){for(var u=this.getObjects(),l=0,r=u.length;l<r;l++)d.call(n,u[l],l,u);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(n){return n.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d,n){return this._objects.indexOf(d)>-1?!0:n?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(d,!0)}):!1},complexity:function(){return this._objects.reduce(function(d,n){return d+=n.complexity?n.complexity():0,d},0)}},e.CommonMethods={_setOptions:function(d){for(var n in d)this.set(n,d[n])},_initGradient:function(d,n){d&&d.colorStops&&!(d instanceof e.Gradient)&&this.set(n,new e.Gradient(d))},_initPattern:function(d,n,u){d&&d.source&&!(d instanceof e.Pattern)?this.set(n,new e.Pattern(d,u)):u&&u()},_setObject:function(d){for(var n in d)this._set(n,d[n])},set:function(d,n){return typeof d=="object"?this._setObject(d):this._set(d,n),this},_set:function(d,n){this[d]=n},toggle:function(d){var n=this.get(d);return typeof n=="boolean"&&this.set(d,!n),this},get:function(d){return this[d]}},function(d){var n=Math.sqrt,u=Math.atan2,l=Math.pow,r=Math.PI/180,o=Math.PI/2;e.util={cos:function(i){if(i===0)return 1;i<0&&(i=-i);var a=i/o;switch(a){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(i===0)return 0;var a=i/o,f=1;switch(i<0&&(f=-1),a){case 1:return f;case 2:return 0;case 3:return-f}return Math.sin(i)},removeFromArray:function(i,a){var f=i.indexOf(a);return f!==-1&&i.splice(f,1),i},getRandomInt:function(i,a){return Math.floor(Math.random()*(a-i+1))+i},degreesToRadians:function(i){return i*r},radiansToDegrees:function(i){return i/r},rotatePoint:function(i,a,f){var s=new e.Point(i.x-a.x,i.y-a.y),p=e.util.rotateVector(s,f);return new e.Point(p.x,p.y).addEquals(a)},rotateVector:function(i,a){var f=e.util.sin(a),s=e.util.cos(a),p=i.x*s-i.y*f,v=i.x*f+i.y*s;return{x:p,y:v}},createVector:function(i,a){return new e.Point(a.x-i.x,a.y-i.y)},calcAngleBetweenVectors:function(i,a){return Math.acos((i.x*a.x+i.y*a.y)/(Math.hypot(i.x,i.y)*Math.hypot(a.x,a.y)))},getHatVector:function(i){return new e.Point(i.x,i.y).multiply(1/Math.hypot(i.x,i.y))},getBisector:function(i,a,f){var s=e.util.createVector(i,a),p=e.util.createVector(i,f),v=e.util.calcAngleBetweenVectors(s,p),m=e.util.calcAngleBetweenVectors(e.util.rotateVector(s,v),p),b=v*(m===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(s,b)),angle:v}},projectStrokeOnPoints:function(i,a,f){var s=[],p=a.strokeWidth/2,v=a.strokeUniform?new e.Point(1/a.scaleX,1/a.scaleY):new e.Point(1,1),m=function(b){var w=p/Math.hypot(b.x,b.y);return new e.Point(b.x*w*v.x,b.y*w*v.y)};return i.length<=1||i.forEach(function(b,w){var E=new e.Point(b.x,b.y),A,O;w===0?(O=i[w+1],A=f?m(e.util.createVector(O,E)).addEquals(E):i[i.length-1]):w===i.length-1?(A=i[w-1],O=f?m(e.util.createVector(A,E)).addEquals(E):i[0]):(A=i[w-1],O=i[w+1]);var L=e.util.getBisector(E,A,O),Y=L.vector,V=L.angle,Q,J;if(a.strokeLineJoin==="miter"&&(Q=-p/Math.sin(V/2),J=new e.Point(Y.x*Q*v.x,Y.y*Q*v.y),Math.hypot(J.x,J.y)/p<=a.strokeMiterLimit)){s.push(E.add(J)),s.push(E.subtract(J));return}Q=-p*Math.SQRT2,J=new e.Point(Y.x*Q*v.x,Y.y*Q*v.y),s.push(E.add(J)),s.push(E.subtract(J))}),s},transformPoint:function(i,a,f){return f?new e.Point(a[0]*i.x+a[2]*i.y,a[1]*i.x+a[3]*i.y):new e.Point(a[0]*i.x+a[2]*i.y+a[4],a[1]*i.x+a[3]*i.y+a[5])},makeBoundingBoxFromPoints:function(i,a){if(a)for(var f=0;f<i.length;f++)i[f]=e.util.transformPoint(i[f],a);var s=[i[0].x,i[1].x,i[2].x,i[3].x],p=e.util.array.min(s),v=e.util.array.max(s),m=v-p,b=[i[0].y,i[1].y,i[2].y,i[3].y],w=e.util.array.min(b),E=e.util.array.max(b),A=E-w;return{left:p,top:w,width:m,height:A}},invertTransform:function(i){var a=1/(i[0]*i[3]-i[1]*i[2]),f=[a*i[3],-a*i[1],-a*i[2],a*i[0]],s=e.util.transformPoint({x:i[4],y:i[5]},f,!0);return f[4]=-s.x,f[5]=-s.y,f},toFixed:function(i,a){return parseFloat(Number(i).toFixed(a))},parseUnit:function(i,a){var f=/\D{0,2}$/.exec(i),s=parseFloat(i);switch(a||(a=e.Text.DEFAULT_SVG_FONT_SIZE),f[0]){case"mm":return s*e.DPI/25.4;case"cm":return s*e.DPI/2.54;case"in":return s*e.DPI;case"pt":return s*e.DPI/72;case"pc":return s*e.DPI/72*12;case"em":return s*a;default:return s}},falseFunction:function(){return!1},getKlass:function(i,a){return i=e.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),e.util.resolveNamespace(a)[i]},getSvgAttributes:function(i){var a=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"]);break}return a},resolveNamespace:function(i){if(!i)return e;var a=i.split("."),f=a.length,s,p=d||e.window;for(s=0;s<f;++s)p=p[a[s]];return p},loadImage:function(i,a,f,s){if(!i){a&&a.call(f,i);return}var p=e.util.createImage(),v=function(){a&&a.call(f,p,!1),p=p.onload=p.onerror=null};p.onload=v,p.onerror=function(){e.log("Error loading "+p.src),a&&a.call(f,null,!0),p=p.onload=p.onerror=null},i.indexOf("data")!==0&&s!==void 0&&s!==null&&(p.crossOrigin=s),i.substring(0,14)==="data:image/svg"&&(p.onload=null,e.util.loadImageInDom(p,v)),p.src=i},loadImageInDom:function(i,a){var f=e.document.createElement("div");f.style.width=f.style.height="1px",f.style.left=f.style.top="-100%",f.style.position="absolute",f.appendChild(i),e.document.querySelector("body").appendChild(f),i.onload=function(){a(),f.parentNode.removeChild(f),f=null}},enlivenObjects:function(i,a,f,s){i=i||[];var p=[],v=0,m=i.length;function b(){++v===m&&a&&a(p.filter(function(w){return w}))}if(!m){a&&a(p);return}i.forEach(function(w,E){if(!w||!w.type){b();return}var A=e.util.getKlass(w.type,f);A.fromObject(w,function(O,L){L||(p[E]=O),s&&s(w,O,L),b()})})},enlivenObjectEnlivables:function(i,a,f){var s=e.Object.ENLIVEN_PROPS.filter(function(p){return!!i[p]});e.util.enlivenObjects(s.map(function(p){return i[p]}),function(p){var v={};s.forEach(function(m,b){v[m]=p[b],a&&(a[m]=p[b])}),f&&f(v)})},enlivenPatterns:function(i,a){i=i||[];function f(){++p===v&&a&&a(s)}var s=[],p=0,v=i.length;if(!v){a&&a(s);return}i.forEach(function(m,b){m&&m.source?new e.Pattern(m,function(w){s[b]=w,f()}):(s[b]=m,f())})},groupSVGElements:function(i,a,f){var s;return i&&i.length===1?i[0]:(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),s=new e.Group(i,a),typeof f<"u"&&(s.sourcePath=f),s)},populateWithProperties:function(i,a,f){if(f&&Array.isArray(f))for(var s=0,p=f.length;s<p;s++)f[s]in i&&(a[f[s]]=i[f[s]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(i){var a=e.util.createCanvasElement();return a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0),a},toDataURL:function(i,a,f){return i.toDataURL("image/"+a,f)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(i,a,f){return[i[0]*a[0]+i[2]*a[1],i[1]*a[0]+i[3]*a[1],i[0]*a[2]+i[2]*a[3],i[1]*a[2]+i[3]*a[3],f?0:i[0]*a[4]+i[2]*a[5]+i[4],f?0:i[1]*a[4]+i[3]*a[5]+i[5]]},qrDecompose:function(i){var a=u(i[1],i[0]),f=l(i[0],2)+l(i[1],2),s=n(f),p=(i[0]*i[3]-i[2]*i[1])/s,v=u(i[0]*i[2]+i[1]*i[3],f);return{angle:a/r,scaleX:s,scaleY:p,skewX:v/r,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return e.iMatrix.concat();var a=e.util.degreesToRadians(i.angle),f=e.util.cos(a),s=e.util.sin(a);return[f,s,-s,f,0,0]},calcDimensionsMatrix:function(i){var a=typeof i.scaleX>"u"?1:i.scaleX,f=typeof i.scaleY>"u"?1:i.scaleY,s=[i.flipX?-a:a,0,0,i.flipY?-f:f,0,0],p=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return i.skewX&&(s=p(s,[1,0,Math.tan(v(i.skewX)),1],!0)),i.skewY&&(s=p(s,[1,Math.tan(v(i.skewY)),0,1],!0)),s},composeMatrix:function(i){var a=[1,0,0,1,i.translateX||0,i.translateY||0],f=e.util.multiplyTransformMatrices;return i.angle&&(a=f(a,e.util.calcRotateMatrix(i))),(i.scaleX!==1||i.scaleY!==1||i.skewX||i.skewY||i.flipX||i.flipY)&&(a=f(a,e.util.calcDimensionsMatrix(i))),a},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,a,f,s){s>0&&(a>s?a-=s:a=0,f>s?f-=s:f=0);var p=!0,v,m,b=i.getImageData(a,f,s*2||1,s*2||1),w=b.data.length;for(v=3;v<w&&(m=b.data[v],p=m<=0,p!==!1);v+=4);return b=null,p},parsePreserveAspectRatioAttribute:function(i){var a="meet",f="Mid",s="Mid",p=i.split(" "),v;return p&&p.length&&(a=p.pop(),a!=="meet"&&a!=="slice"?(v=a,a="meet"):p.length&&(v=p.pop())),f=v!=="none"?v.slice(1,4):"none",s=v!=="none"?v.slice(5,8):"none",{meetOrSlice:a,alignX:f,alignY:s}},clearFabricFontCache:function(i){i=(i||"").toLowerCase(),i?e.charWidthsCache[i]&&delete e.charWidthsCache[i]:e.charWidthsCache={}},limitDimsByArea:function(i,a){var f=Math.sqrt(a*i),s=Math.floor(a/f);return{x:Math.floor(f),y:s}},capValue:function(i,a,f){return Math.max(i,Math.min(a,f))},findScaleToFit:function(i,a){return Math.min(a.width/i.width,a.height/i.height)},findScaleToCover:function(i,a){return Math.max(a.width/i.width,a.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(a){return e.util.toFixed(a,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,a){var f=e.util.invertTransform(a),s=e.util.multiplyTransformMatrices(f,i.calcOwnMatrix());e.util.applyTransformToObject(i,s)},addTransformToObject:function(i,a){e.util.applyTransformToObject(i,e.util.multiplyTransformMatrices(a,i.calcOwnMatrix()))},applyTransformToObject:function(i,a){var f=e.util.qrDecompose(a),s=new e.Point(f.translateX,f.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",f.scaleX),i.set("scaleY",f.scaleY),i.skewX=f.skewX,i.skewY=f.skewY,i.angle=f.angle,i.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(i,a,f){var s=i/2,p=a/2,v=[{x:-s,y:-p},{x:s,y:-p},{x:-s,y:p},{x:s,y:p}],m=e.util.calcDimensionsMatrix(f),b=e.util.makeBoundingBoxFromPoints(v,m);return{x:b.width,y:b.height}},mergeClipPaths:function(i,a){var f=i,s=a;f.inverted&&!s.inverted&&(f=a,s=i),e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(e.util.invertTransform(f.calcTransformMatrix()),s.calcTransformMatrix()));var p=f.inverted&&s.inverted;return p&&(f.inverted=s.inverted=!1),new e.Group([f],{clipPath:s,inverted:p})}}}(t),function(){var d=Array.prototype.join,n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function l(S,k,M,D,B,C,P,j,F,H,z){var R=e.util.cos(S),ee=e.util.sin(S),$=e.util.cos(k),W=e.util.sin(k),U=M*B*$-D*C*W+P,q=D*B*$+M*C*W+j,te=H+F*(-M*B*ee-D*C*R),K=z+F*(-D*B*ee+M*C*R),ne=U+F*(M*B*W+D*C*$),ce=q+F*(D*B*W-M*C*$);return["C",te,K,ne,ce,U,q]}function r(S,k,M,D,B,C,P){var j=Math.PI,F=P*j/180,H=e.util.sin(F),z=e.util.cos(F),R=0,ee=0;M=Math.abs(M),D=Math.abs(D);var $=-z*S*.5-H*k*.5,W=-z*k*.5+H*S*.5,U=M*M,q=D*D,te=W*W,K=$*$,ne=U*q-U*te-q*K,ce=0;if(ne<0){var me=Math.sqrt(1-ne/(U*q));M*=me,D*=me}else ce=(B===C?-1:1)*Math.sqrt(ne/(U*te+q*K));var pe=ce*M*W/D,G=-ce*D*$/M,fe=z*pe-H*G+S*.5,be=H*pe+z*G+k*.5,xe=o(1,0,($-pe)/M,(W-G)/D),Ee=o(($-pe)/M,(W-G)/D,(-$-pe)/M,(-W-G)/D);C===0&&Ee>0?Ee-=2*j:C===1&&Ee<0&&(Ee+=2*j);for(var Ae=Math.ceil(Math.abs(Ee/j*2)),Je=[],Ue=Ee/Ae,Ut=8/3*Math.sin(Ue/4)*Math.sin(Ue/4)/Math.sin(Ue/2),br=xe+Ue,_t=0;_t<Ae;_t++)Je[_t]=l(xe,br,z,H,M,D,fe,be,Ut,R,ee),R=Je[_t][5],ee=Je[_t][6],xe=br,br+=Ue;return Je}function o(S,k,M,D){var B=Math.atan2(k,S),C=Math.atan2(D,M);return C>=B?C-B:2*Math.PI-(B-C)}function i(S,k,M,D,B,C,P,j){var F;if(e.cachesBoundsOfCurve&&(F=d.call(arguments),e.boundsOfCurveCache[F]))return e.boundsOfCurveCache[F];var H=Math.sqrt,z=Math.min,R=Math.max,ee=Math.abs,$=[],W=[[],[]],U,q,te,K,ne,ce,me,pe;q=6*S-12*M+6*B,U=-3*S+9*M-9*B+3*P,te=3*M-3*S;for(var G=0;G<2;++G){if(G>0&&(q=6*k-12*D+6*C,U=-3*k+9*D-9*C+3*j,te=3*D-3*k),ee(U)<1e-12){if(ee(q)<1e-12)continue;K=-te/q,0<K&&K<1&&$.push(K);continue}me=q*q-4*te*U,!(me<0)&&(pe=H(me),ne=(-q+pe)/(2*U),0<ne&&ne<1&&$.push(ne),ce=(-q-pe)/(2*U),0<ce&&ce<1&&$.push(ce))}for(var fe,be,xe=$.length,Ee=xe,Ae;xe--;)K=$[xe],Ae=1-K,fe=Ae*Ae*Ae*S+3*Ae*Ae*K*M+3*Ae*K*K*B+K*K*K*P,W[0][xe]=fe,be=Ae*Ae*Ae*k+3*Ae*Ae*K*D+3*Ae*K*K*C+K*K*K*j,W[1][xe]=be;W[0][Ee]=S,W[1][Ee]=k,W[0][Ee+1]=P,W[1][Ee+1]=j;var Je=[{x:z.apply(null,W[0]),y:z.apply(null,W[1])},{x:R.apply(null,W[0]),y:R.apply(null,W[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[F]=Je),Je}function a(S,k,M){for(var D=M[1],B=M[2],C=M[3],P=M[4],j=M[5],F=M[6],H=M[7],z=r(F-S,H-k,D,B,P,j,C),R=0,ee=z.length;R<ee;R++)z[R][1]+=S,z[R][2]+=k,z[R][3]+=S,z[R][4]+=k,z[R][5]+=S,z[R][6]+=k;return z}function f(S){var k=0,M=0,D=S.length,B=0,C=0,P,j,F,H=[],z,R,ee;for(j=0;j<D;++j){switch(F=!1,P=S[j].slice(0),P[0]){case"l":P[0]="L",P[1]+=k,P[2]+=M;case"L":k=P[1],M=P[2];break;case"h":P[1]+=k;case"H":P[0]="L",P[2]=M,k=P[1];break;case"v":P[1]+=M;case"V":P[0]="L",M=P[1],P[1]=k,P[2]=M;break;case"m":P[0]="M",P[1]+=k,P[2]+=M;case"M":k=P[1],M=P[2],B=P[1],C=P[2];break;case"c":P[0]="C",P[1]+=k,P[2]+=M,P[3]+=k,P[4]+=M,P[5]+=k,P[6]+=M;case"C":R=P[3],ee=P[4],k=P[5],M=P[6];break;case"s":P[0]="S",P[1]+=k,P[2]+=M,P[3]+=k,P[4]+=M;case"S":z==="C"?(R=2*k-R,ee=2*M-ee):(R=k,ee=M),k=P[3],M=P[4],P[0]="C",P[5]=P[3],P[6]=P[4],P[3]=P[1],P[4]=P[2],P[1]=R,P[2]=ee,R=P[3],ee=P[4];break;case"q":P[0]="Q",P[1]+=k,P[2]+=M,P[3]+=k,P[4]+=M;case"Q":R=P[1],ee=P[2],k=P[3],M=P[4];break;case"t":P[0]="T",P[1]+=k,P[2]+=M;case"T":z==="Q"?(R=2*k-R,ee=2*M-ee):(R=k,ee=M),P[0]="Q",k=P[1],M=P[2],P[1]=R,P[2]=ee,P[3]=k,P[4]=M;break;case"a":P[0]="A",P[6]+=k,P[7]+=M;case"A":F=!0,H=H.concat(a(k,M,P)),k=P[6],M=P[7];break;case"z":case"Z":k=B,M=C;break}F||H.push(P),z=P[0]}return H}function s(S,k,M,D){return Math.sqrt((M-S)*(M-S)+(D-k)*(D-k))}function p(S){return S*S*S}function v(S){return 3*S*S*(1-S)}function m(S){return 3*S*(1-S)*(1-S)}function b(S){return(1-S)*(1-S)*(1-S)}function w(S,k,M,D,B,C,P,j){return function(F){var H=p(F),z=v(F),R=m(F),ee=b(F);return{x:P*H+B*z+M*R+S*ee,y:j*H+C*z+D*R+k*ee}}}function E(S,k,M,D,B,C,P,j){return function(F){var H=1-F,z=3*H*H*(M-S)+6*H*F*(B-M)+3*F*F*(P-B),R=3*H*H*(D-k)+6*H*F*(C-D)+3*F*F*(j-C);return Math.atan2(R,z)}}function A(S){return S*S}function O(S){return 2*S*(1-S)}function L(S){return(1-S)*(1-S)}function Y(S,k,M,D,B,C){return function(P){var j=A(P),F=O(P),H=L(P);return{x:B*j+M*F+S*H,y:C*j+D*F+k*H}}}function V(S,k,M,D,B,C){return function(P){var j=1-P,F=2*j*(M-S)+2*P*(B-M),H=2*j*(D-k)+2*P*(C-D);return Math.atan2(H,F)}}function Q(S,k,M){var D={x:k,y:M},B,C=0,P;for(P=1;P<=100;P+=1)B=S(P/100),C+=s(D.x,D.y,B.x,B.y),D=B;return C}function J(S,k){for(var M=0,D=0,B=S.iterator,C={x:S.x,y:S.y},P,j,F=.01,H=S.angleFinder,z;D<k&&F>1e-4;)P=B(M),z=M,j=s(C.x,C.y,P.x,P.y),j+D>k?(M-=F,F/=2):(C=P,M+=F,D+=j);return P.angle=H(z),P}function Z(S){for(var k=0,M=S.length,D,B=0,C=0,P=0,j=0,F=[],H,z,R,ee=0;ee<M;ee++){switch(D=S[ee],z={x:B,y:C,command:D[0]},D[0]){case"M":z.length=0,P=B=D[1],j=C=D[2];break;case"L":z.length=s(B,C,D[1],D[2]),B=D[1],C=D[2];break;case"C":H=w(B,C,D[1],D[2],D[3],D[4],D[5],D[6]),R=E(B,C,D[1],D[2],D[3],D[4],D[5],D[6]),z.iterator=H,z.angleFinder=R,z.length=Q(H,B,C),B=D[5],C=D[6];break;case"Q":H=Y(B,C,D[1],D[2],D[3],D[4]),R=V(B,C,D[1],D[2],D[3],D[4]),z.iterator=H,z.angleFinder=R,z.length=Q(H,B,C),B=D[3],C=D[4];break;case"Z":case"z":z.destX=P,z.destY=j,z.length=s(B,C,P,j),B=P,C=j;break}k+=z.length,F.push(z)}return F.push({length:k,x:B,y:C}),F}function re(S,k,M){M||(M=Z(S));for(var D=0;k-M[D].length>0&&D<M.length-2;)k-=M[D].length,D++;var B=M[D],C=k/B.length,P=B.command,j=S[D],F;switch(P){case"M":return{x:B.x,y:B.y,angle:0};case"Z":case"z":return F=new e.Point(B.x,B.y).lerp(new e.Point(B.destX,B.destY),C),F.angle=Math.atan2(B.destY-B.y,B.destX-B.x),F;case"L":return F=new e.Point(B.x,B.y).lerp(new e.Point(j[1],j[2]),C),F.angle=Math.atan2(j[2]-B.y,j[1]-B.x),F;case"C":return J(B,k);case"Q":return J(B,k)}}function ie(S){var k=[],M=[],D,B,C=e.rePathCommand,P="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",j="("+P+")"+e.commaWsp,F="([01])"+e.commaWsp+"?",H=j+"?"+j+"?"+j+F+F+j+"?("+P+")",z=new RegExp(H,"g"),R,ee,$;if(!S||!S.match)return k;$=S.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var W=0,U,q=$.length;W<q;W++){D=$[W],ee=D.slice(1).trim(),M.length=0;var te=D.charAt(0);if(U=[te],te.toLowerCase()==="a")for(var K;K=z.exec(ee);)for(var ne=1;ne<K.length;ne++)M.push(K[ne]);else for(;R=C.exec(ee);)M.push(R[0]);for(var ne=0,ce=M.length;ne<ce;ne++)B=parseFloat(M[ne]),isNaN(B)||U.push(B);var me=n[te.toLowerCase()],pe=u[te]||te;if(U.length-1>me)for(var G=1,fe=U.length;G<fe;G+=me)k.push([te].concat(U.slice(G,G+me))),te=pe;else k.push(U)}return k}function ue(S,k){var M=[],D,B=new e.Point(S[0].x,S[0].y),C=new e.Point(S[1].x,S[1].y),P=S.length,j=1,F=0,H=P>2;for(k=k||0,H&&(j=S[2].x<C.x?-1:S[2].x===C.x?0:1,F=S[2].y<C.y?-1:S[2].y===C.y?0:1),M.push(["M",B.x-j*k,B.y-F*k]),D=1;D<P;D++){if(!B.eq(C)){var z=B.midPointFrom(C);M.push(["Q",B.x,B.y,z.x,z.y])}B=S[D],D+1<S.length&&(C=S[D+1])}return H&&(j=B.x>S[D-2].x?1:B.x===S[D-2].x?0:-1,F=B.y>S[D-2].y?1:B.y===S[D-2].y?0:-1),M.push(["L",B.x+j*k,B.y+F*k]),M}function X(S,k,M){return M&&(k=e.util.multiplyTransformMatrices(k,[1,0,0,1,-M.x,-M.y])),S.map(function(D){for(var B=D.slice(0),C={},P=1;P<D.length-1;P+=2)C.x=D[P],C.y=D[P+1],C=e.util.transformPoint(C,k),B[P]=C.x,B[P+1]=C.y;return B})}e.util.joinPath=function(S){return S.map(function(k){return k.join(" ")}).join(" ")},e.util.parsePath=ie,e.util.makePathSimpler=f,e.util.getSmoothPathFromPoints=ue,e.util.getPathSegmentsInfo=Z,e.util.getBoundsOfCurve=i,e.util.getPointOnPath=re,e.util.transformPath=X}(),function(){var d=Array.prototype.slice;function n(i,a){for(var f=d.call(arguments,2),s=[],p=0,v=i.length;p<v;p++)s[p]=f.length?i[p][a].apply(i[p],f):i[p][a].call(i[p]);return s}function u(i,a){return o(i,a,function(f,s){return f>=s})}function l(i,a){return o(i,a,function(f,s){return f<s})}function r(i,a){for(var f=i.length;f--;)i[f]=a;return i}function o(i,a,f){if(!(!i||i.length===0)){var s=i.length-1,p=a?i[s][a]:i[s];if(a)for(;s--;)f(i[s][a],p)&&(p=i[s][a]);else for(;s--;)f(i[s],p)&&(p=i[s]);return p}}e.util.array={fill:r,invoke:n,min:l,max:u}}(),function(){function d(u,l,r){if(r)if(!e.isLikelyNode&&l instanceof Element)u=l;else if(l instanceof Array){u=[];for(var o=0,i=l.length;o<i;o++)u[o]=d({},l[o],r)}else if(l&&typeof l=="object")for(var a in l)a==="canvas"||a==="group"?u[a]=null:l.hasOwnProperty(a)&&(u[a]=d({},l[a],r));else u=l;else for(var a in l)u[a]=l[a];return u}function n(u,l){return d({},u,l)}e.util.object={extend:d,clone:n},e.util.object.extend(e.util,e.Observable)}(),function(){function d(o){return o.replace(/-+(.)?/g,function(i,a){return a?a.toUpperCase():""})}function n(o,i){return o.charAt(0).toUpperCase()+(i?o.slice(1):o.slice(1).toLowerCase())}function u(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(o){var i=0,a,f=[];for(i=0,a;i<o.length;i++)(a=r(o,i))!==!1&&f.push(a);return f}function r(o,i){var a=o.charCodeAt(i);if(isNaN(a))return"";if(a<55296||a>57343)return o.charAt(i);if(55296<=a&&a<=56319){if(o.length<=i+1)throw"High surrogate without following low surrogate";var f=o.charCodeAt(i+1);if(56320>f||f>57343)throw"High surrogate without following low surrogate";return o.charAt(i)+o.charAt(i+1)}if(i===0)throw"Low surrogate without preceding high surrogate";var s=o.charCodeAt(i-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:d,capitalize:n,escapeXml:u,graphemeSplit:l}}(),function(){var d=Array.prototype.slice,n=function(){},u=function(){for(var a in{toString:1})if(a==="toString")return!1;return!0}(),l=function(a,f,s){for(var p in f)p in a.prototype&&typeof a.prototype[p]=="function"&&(f[p]+"").indexOf("callSuper")>-1?a.prototype[p]=function(v){return function(){var m=this.constructor.superclass;this.constructor.superclass=s;var b=f[v].apply(this,arguments);if(this.constructor.superclass=m,v!=="initialize")return b}}(p):a.prototype[p]=f[p],u&&(f.toString!==Object.prototype.toString&&(a.prototype.toString=f.toString),f.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=f.valueOf))};function r(){}function o(a){for(var f=null,s=this;s.constructor.superclass;){var p=s.constructor.superclass.prototype[a];if(s[a]!==p){f=p;break}s=s.constructor.superclass.prototype}return f?arguments.length>1?f.apply(this,d.call(arguments,1)):f.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}function i(){var a=null,f=d.call(arguments,0);typeof f[0]=="function"&&(a=f.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=a,s.subclasses=[],a&&(r.prototype=a.prototype,s.prototype=new r,a.subclasses.push(s));for(var p=0,v=f.length;p<v;p++)l(s,f[p],a);return s.prototype.initialize||(s.prototype.initialize=n),s.prototype.constructor=s,s.prototype.callSuper=o,s}e.util.createClass=i}(),function(){var d=!!e.document.createElement("div").attachEvent,n=["touchstart","touchmove","touchend"];e.util.addListener=function(l,r,o,i){l&&l.addEventListener(r,o,d?!1:i)},e.util.removeListener=function(l,r,o,i){l&&l.removeEventListener(r,o,d?!1:i)};function u(l){var r=l.changedTouches;return r&&r[0]?r[0]:l}e.util.getPointer=function(l){var r=l.target,o=e.util.getScrollLeftTop(r),i=u(l);return{x:i.clientX+o.left,y:i.clientY+o.top}},e.util.isTouchEvent=function(l){return n.indexOf(l.type)>-1||l.pointerType==="touch"}}(),function(){function d(i,a){var f=i.style;if(!f)return i;if(typeof a=="string")return i.style.cssText+=";"+a,a.indexOf("opacity")>-1?o(i,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):i;for(var s in a)if(s==="opacity")o(i,a[s]);else{var p=s==="float"||s==="cssFloat"?typeof f.styleFloat>"u"?"cssFloat":"styleFloat":s;f[p]=a[s]}return i}var n=e.document.createElement("div"),u=typeof n.style.opacity=="string",l=typeof n.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(i){return i};u?o=function(i,a){return i.style.opacity=a,i}:l&&(o=function(i,a){var f=i.style;return i.currentStyle&&!i.currentStyle.hasLayout&&(f.zoom=1),r.test(f.filter)?(a=a>=.9999?"":"alpha(opacity="+a*100+")",f.filter=f.filter.replace(r,a)):f.filter+=" alpha(opacity="+a*100+")",i}),e.util.setStyle=d}(),function(){var d=Array.prototype.slice;function n(b){return typeof b=="string"?e.document.getElementById(b):b}var u,l=function(b){return d.call(b,0)};try{u=l(e.document.childNodes)instanceof Array}catch{}u||(l=function(b){for(var w=new Array(b.length),E=b.length;E--;)w[E]=b[E];return w});function r(b,w){var E=e.document.createElement(b);for(var A in w)A==="class"?E.className=w[A]:A==="for"?E.htmlFor=w[A]:E.setAttribute(A,w[A]);return E}function o(b,w){b&&(" "+b.className+" ").indexOf(" "+w+" ")===-1&&(b.className+=(b.className?" ":"")+w)}function i(b,w,E){return typeof w=="string"&&(w=r(w,E)),b.parentNode&&b.parentNode.replaceChild(w,b),w.appendChild(b),w}function a(b){for(var w=0,E=0,A=e.document.documentElement,O=e.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===e.document?(w=O.scrollLeft||A.scrollLeft||0,E=O.scrollTop||A.scrollTop||0):(w+=b.scrollLeft||0,E+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:w,top:E}}function f(b){var w,E=b&&b.ownerDocument,A={left:0,top:0},O={left:0,top:0},L,Y={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!E)return O;for(var V in Y)O[Y[V]]+=parseInt(s(b,V),10)||0;return w=E.documentElement,typeof b.getBoundingClientRect<"u"&&(A=b.getBoundingClientRect()),L=a(b),{left:A.left+L.left-(w.clientLeft||0)+O.left,top:A.top+L.top-(w.clientTop||0)+O.top}}var s;e.document.defaultView&&e.document.defaultView.getComputedStyle?s=function(b,w){var E=e.document.defaultView.getComputedStyle(b,null);return E?E[w]:void 0}:s=function(b,w){var E=b.style[w];return!E&&b.currentStyle&&(E=b.currentStyle[w]),E},function(){var b=e.document.documentElement.style,w="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function E(O){return typeof O.onselectstart<"u"&&(O.onselectstart=e.util.falseFunction),w?O.style[w]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function A(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),w?O.style[w]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}e.util.makeElementUnselectable=E,e.util.makeElementSelectable=A}();function p(b){var w=e.jsdomImplForWrapper(b);return w._canvas||w._image}function v(b){if(e.isLikelyNode){var w=e.jsdomImplForWrapper(b);w&&(w._image=null,w._canvas=null,w._currentSrc=null,w._attributes=null,w._classList=null)}}function m(b,w){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=w}e.util.setImageSmoothing=m,e.util.getById=n,e.util.toArray=l,e.util.addClass=o,e.util.makeElement=r,e.util.wrapElement=i,e.util.getScrollLeftTop=a,e.util.getElementOffset=f,e.util.getNodeCanvas=p,e.util.cleanUpJsdomNode=v}(),function(){function d(l,r){return l+(/\?/.test(l)?"&":"?")+r}function n(){}function u(l,r){r||(r={});var o=r.method?r.method.toUpperCase():"GET",i=r.onComplete||function(){},a=new e.window.XMLHttpRequest,f=r.body||r.parameters;return a.onreadystatechange=function(){a.readyState===4&&(i(a),a.onreadystatechange=n)},o==="GET"&&(f=null,typeof r.parameters=="string"&&(l=d(l,r.parameters))),a.open(o,l,!0),(o==="POST"||o==="PUT")&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(f),a}e.util.request=u}(),e.log=console.log,e.warn=console.warn,function(){var d=e.util.object.extend,n=e.util.object.clone,u=[];e.util.object.extend(u,{cancelAll:function(){var p=this.splice(0);return p.forEach(function(v){v.cancel()}),p},cancelByCanvas:function(p){if(!p)return[];var v=this.filter(function(m){return typeof m.target=="object"&&m.target.canvas===p});return v.forEach(function(m){m.cancel()}),v},cancelByTarget:function(p){var v=this.findAnimationsByTarget(p);return v.forEach(function(m){m.cancel()}),v},findAnimationIndex:function(p){return this.indexOf(this.findAnimation(p))},findAnimation:function(p){return this.find(function(v){return v.cancel===p})},findAnimationsByTarget:function(p){return p?this.filter(function(v){return v.target===p}):[]}});function l(){return!1}function r(p,v,m,b){return-m*Math.cos(p/b*(Math.PI/2))+m+v}function o(p){p||(p={});var v=!1,m,b=function(){var w=e.runningAnimations.indexOf(m);return w>-1&&e.runningAnimations.splice(w,1)[0]};return m=d(n(p),{cancel:function(){return v=!0,b()},currentValue:"startValue"in p?p.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(m),f(function(w){var E=w||+new Date,A=p.duration||500,O=E+A,L,Y=p.onChange||l,V=p.abort||l,Q=p.onComplete||l,J=p.easing||r,Z="startValue"in p?p.startValue.length>0:!1,re="startValue"in p?p.startValue:0,ie="endValue"in p?p.endValue:100,ue=p.byValue||(Z?re.map(function(X,S){return ie[S]-re[S]}):ie-re);p.onStart&&p.onStart(),function X(S){L=S||+new Date;var k=L>O?A:L-E,M=k/A,D=Z?re.map(function(C,P){return J(k,re[P],ue[P],A)}):J(k,re,ue,A),B=Math.abs(Z?(D[0]-re[0])/ue[0]:(D-re)/ue);if(m.currentValue=Z?D.slice():D,m.completionRate=B,m.durationRate=M,!v){if(V(D,B,M)){b();return}if(L>O){m.currentValue=Z?ie.slice():ie,m.completionRate=1,m.durationRate=1,Y(Z?ie.slice():ie,1,1),Q(ie,1,1),b();return}else Y(D,B,M),f(X)}}(E)}),m.cancel}var i=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(p){return e.window.setTimeout(p,1e3/60)},a=e.window.cancelAnimationFrame||e.window.clearTimeout;function f(){return i.apply(e.window,arguments)}function s(){return a.apply(e.window,arguments)}e.util.animate=o,e.util.requestAnimFrame=f,e.util.cancelAnimFrame=s,e.runningAnimations=u}(),function(){function d(u,l,r){var o="rgba("+parseInt(u[0]+r*(l[0]-u[0]),10)+","+parseInt(u[1]+r*(l[1]-u[1]),10)+","+parseInt(u[2]+r*(l[2]-u[2]),10);return o+=","+(u&&l?parseFloat(u[3]+r*(l[3]-u[3])):1),o+=")",o}function n(u,l,r,o){var i=new e.Color(u).getSource(),a=new e.Color(l).getSource(),f=o.onComplete,s=o.onChange;return o=o||{},e.util.animate(e.util.object.extend(o,{duration:r||500,startValue:i,endValue:a,byValue:a,easing:function(p,v,m,b){var w=o.colorEasing?o.colorEasing(p,b):1-Math.cos(p/b*(Math.PI/2));return d(v,m,w)},onComplete:function(p,v,m){if(f)return f(d(a,a,0),v,m)},onChange:function(p,v,m){if(s){if(Array.isArray(p))return s(d(p,p,0),v,m);s(p,v,m)}}}))}e.util.animateColor=n}(),function(){function d(S,k,M,D){return S<Math.abs(k)?(S=k,D=M/4):k===0&&S===0?D=M/(2*Math.PI)*Math.asin(1):D=M/(2*Math.PI)*Math.asin(k/S),{a:S,c:k,p:M,s:D}}function n(S,k,M){return S.a*Math.pow(2,10*(k-=1))*Math.sin((k*M-S.s)*(2*Math.PI)/S.p)}function u(S,k,M,D){return M*((S=S/D-1)*S*S+1)+k}function l(S,k,M,D){return S/=D/2,S<1?M/2*S*S*S+k:M/2*((S-=2)*S*S+2)+k}function r(S,k,M,D){return M*(S/=D)*S*S*S+k}function o(S,k,M,D){return-M*((S=S/D-1)*S*S*S-1)+k}function i(S,k,M,D){return S/=D/2,S<1?M/2*S*S*S*S+k:-M/2*((S-=2)*S*S*S-2)+k}function a(S,k,M,D){return M*(S/=D)*S*S*S*S+k}function f(S,k,M,D){return M*((S=S/D-1)*S*S*S*S+1)+k}function s(S,k,M,D){return S/=D/2,S<1?M/2*S*S*S*S*S+k:M/2*((S-=2)*S*S*S*S+2)+k}function p(S,k,M,D){return-M*Math.cos(S/D*(Math.PI/2))+M+k}function v(S,k,M,D){return M*Math.sin(S/D*(Math.PI/2))+k}function m(S,k,M,D){return-M/2*(Math.cos(Math.PI*S/D)-1)+k}function b(S,k,M,D){return S===0?k:M*Math.pow(2,10*(S/D-1))+k}function w(S,k,M,D){return S===D?k+M:M*(-Math.pow(2,-10*S/D)+1)+k}function E(S,k,M,D){return S===0?k:S===D?k+M:(S/=D/2,S<1?M/2*Math.pow(2,10*(S-1))+k:M/2*(-Math.pow(2,-10*--S)+2)+k)}function A(S,k,M,D){return-M*(Math.sqrt(1-(S/=D)*S)-1)+k}function O(S,k,M,D){return M*Math.sqrt(1-(S=S/D-1)*S)+k}function L(S,k,M,D){return S/=D/2,S<1?-M/2*(Math.sqrt(1-S*S)-1)+k:M/2*(Math.sqrt(1-(S-=2)*S)+1)+k}function Y(S,k,M,D){var B=1.70158,C=0,P=M;if(S===0)return k;if(S/=D,S===1)return k+M;C||(C=D*.3);var j=d(P,M,C,B);return-n(j,S,D)+k}function V(S,k,M,D){var B=1.70158,C=0,P=M;if(S===0)return k;if(S/=D,S===1)return k+M;C||(C=D*.3);var j=d(P,M,C,B);return j.a*Math.pow(2,-10*S)*Math.sin((S*D-j.s)*(2*Math.PI)/j.p)+j.c+k}function Q(S,k,M,D){var B=1.70158,C=0,P=M;if(S===0)return k;if(S/=D/2,S===2)return k+M;C||(C=D*(.3*1.5));var j=d(P,M,C,B);return S<1?-.5*n(j,S,D)+k:j.a*Math.pow(2,-10*(S-=1))*Math.sin((S*D-j.s)*(2*Math.PI)/j.p)*.5+j.c+k}function J(S,k,M,D,B){return B===void 0&&(B=1.70158),M*(S/=D)*S*((B+1)*S-B)+k}function Z(S,k,M,D,B){return B===void 0&&(B=1.70158),M*((S=S/D-1)*S*((B+1)*S+B)+1)+k}function re(S,k,M,D,B){return B===void 0&&(B=1.70158),S/=D/2,S<1?M/2*(S*S*(((B*=1.525)+1)*S-B))+k:M/2*((S-=2)*S*(((B*=1.525)+1)*S+B)+2)+k}function ie(S,k,M,D){return M-ue(D-S,0,M,D)+k}function ue(S,k,M,D){return(S/=D)<1/2.75?M*(7.5625*S*S)+k:S<2/2.75?M*(7.5625*(S-=1.5/2.75)*S+.75)+k:S<2.5/2.75?M*(7.5625*(S-=2.25/2.75)*S+.9375)+k:M*(7.5625*(S-=2.625/2.75)*S+.984375)+k}function X(S,k,M,D){return S<D/2?ie(S*2,0,M,D)*.5+k:ue(S*2-D,0,M,D)*.5+M*.5+k}e.util.ease={easeInQuad:function(S,k,M,D){return M*(S/=D)*S+k},easeOutQuad:function(S,k,M,D){return-M*(S/=D)*(S-2)+k},easeInOutQuad:function(S,k,M,D){return S/=D/2,S<1?M/2*S*S+k:-M/2*(--S*(S-2)-1)+k},easeInCubic:function(S,k,M,D){return M*(S/=D)*S*S+k},easeOutCubic:u,easeInOutCubic:l,easeInQuart:r,easeOutQuart:o,easeInOutQuart:i,easeInQuint:a,easeOutQuint:f,easeInOutQuint:s,easeInSine:p,easeOutSine:v,easeInOutSine:m,easeInExpo:b,easeOutExpo:w,easeInOutExpo:E,easeInCirc:A,easeOutCirc:O,easeInOutCirc:L,easeInElastic:Y,easeOutElastic:V,easeInOutElastic:Q,easeInBack:J,easeOutBack:Z,easeInOutBack:re,easeInBounce:ie,easeOutBounce:ue,easeInOutBounce:X}}(),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.util.object.clone,r=n.util.toFixed,o=n.util.parseUnit,i=n.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],f=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],p=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},m={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",w="clip-path";n.svgValidTagNamesRegEx=O(a),n.svgViewBoxElementsRegEx=O(f),n.svgInvalidAncestorsRegEx=O(s),n.svgValidParentsRegEx=O(p),n.cssRules={},n.gradientDefs={},n.clipPaths={};function E(C){return C in v?v[C]:C}function A(C,P,j,F){var H=Array.isArray(P),z;if((C==="fill"||C==="stroke")&&P==="none")P="";else{if(C==="strokeUniform")return P==="non-scaling-stroke";if(C==="strokeDashArray")P==="none"?P=null:P=P.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(C==="transformMatrix")j&&j.transformMatrix?P=i(j.transformMatrix,n.parseTransformAttribute(P)):P=n.parseTransformAttribute(P);else if(C==="visible")P=P!=="none"&&P!=="hidden",j&&j.visible===!1&&(P=!1);else if(C==="opacity")P=parseFloat(P),j&&typeof j.opacity<"u"&&(P*=j.opacity);else if(C==="textAnchor")P=P==="start"?"left":P==="end"?"right":"center";else if(C==="charSpacing")z=o(P,F)/F*1e3;else if(C==="paintFirst"){var R=P.indexOf("fill"),ee=P.indexOf("stroke"),P="fill";(R>-1&&ee>-1&&ee<R||R===-1&&ee>-1)&&(P="stroke")}else{if(C==="href"||C==="xlink:href"||C==="font")return P;if(C==="imageSmoothing")return P==="optimizeQuality";z=H?P.map(o):o(P,F)}}return!H&&isNaN(z)?P:z}function O(C){return new RegExp("^("+C.join("|")+")\\b","i")}function L(C){for(var P in m)if(!(typeof C[m[P]]>"u"||C[P]==="")){if(typeof C[P]>"u"){if(!n.Object.prototype[P])continue;C[P]=n.Object.prototype[P]}if(C[P].indexOf("url(")!==0){var j=new n.Color(C[P]);C[P]=j.setAlpha(r(j.getAlpha()*C[m[P]],2)).toRgba()}}return C}function Y(C,P){var j,F=[],H,z,R;for(z=0,R=P.length;z<R;z++)j=P[z],H=C.getElementsByTagName(j),F=F.concat(Array.prototype.slice.call(H));return F}n.parseTransformAttribute=function(){function C(G,fe){var be=n.util.cos(fe[0]),xe=n.util.sin(fe[0]),Ee=0,Ae=0;fe.length===3&&(Ee=fe[1],Ae=fe[2]),G[0]=be,G[1]=xe,G[2]=-xe,G[3]=be,G[4]=Ee-(be*Ee-xe*Ae),G[5]=Ae-(xe*Ee+be*Ae)}function P(G,fe){var be=fe[0],xe=fe.length===2?fe[1]:fe[0];G[0]=be,G[3]=xe}function j(G,fe,be){G[be]=Math.tan(n.util.degreesToRadians(fe[0]))}function F(G,fe){G[4]=fe[0],fe.length===2&&(G[5]=fe[1])}var H=n.iMatrix,z=n.reNum,R=n.commaWsp,ee="(?:(skewX)\\s*\\(\\s*("+z+")\\s*\\))",$="(?:(skewY)\\s*\\(\\s*("+z+")\\s*\\))",W="(?:(rotate)\\s*\\(\\s*("+z+")(?:"+R+"("+z+")"+R+"("+z+"))?\\s*\\))",U="(?:(scale)\\s*\\(\\s*("+z+")(?:"+R+"("+z+"))?\\s*\\))",q="(?:(translate)\\s*\\(\\s*("+z+")(?:"+R+"("+z+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+z+")"+R+"("+z+")"+R+"("+z+")"+R+"("+z+")"+R+"("+z+")"+R+"("+z+")\\s*\\))",K="(?:"+te+"|"+q+"|"+U+"|"+W+"|"+ee+"|"+$+")",ne="(?:"+K+"(?:"+R+"*"+K+")*)",ce="^\\s*(?:"+ne+"?)\\s*$",me=new RegExp(ce),pe=new RegExp(K,"g");return function(G){var fe=H.concat(),be=[];if(!G||G&&!me.test(G))return fe;G.replace(pe,function(Ee){var Ae=new RegExp(K).exec(Ee).filter(function(Ut){return!!Ut}),Je=Ae[1],Ue=Ae.slice(2).map(parseFloat);switch(Je){case"translate":F(fe,Ue);break;case"rotate":Ue[0]=n.util.degreesToRadians(Ue[0]),C(fe,Ue);break;case"scale":P(fe,Ue);break;case"skewX":j(fe,Ue,2);break;case"skewY":j(fe,Ue,1);break;case"matrix":fe=Ue;break}be.push(fe.concat()),fe=H.concat()});for(var xe=be[0];be.length>1;)be.shift(),xe=n.util.multiplyTransformMatrices(xe,be[0]);return xe}}();function V(C,P){var j,F;C.replace(/;\s*$/,"").split(";").forEach(function(H){var z=H.split(":");j=z[0].trim().toLowerCase(),F=z[1].trim(),P[j]=F})}function Q(C,P){var j,F;for(var H in C)typeof C[H]>"u"||(j=H.toLowerCase(),F=C[H],P[j]=F)}function J(C,P){var j={};for(var F in n.cssRules[P])if(Z(C,F.split(" ")))for(var H in n.cssRules[P][F])j[H]=n.cssRules[P][F][H];return j}function Z(C,P){var j,F=!0;return j=ie(C,P.pop()),j&&P.length&&(F=re(C,P)),j&&F&&P.length===0}function re(C,P){for(var j,F=!0;C.parentNode&&C.parentNode.nodeType===1&&P.length;)F&&(j=P.pop()),C=C.parentNode,F=ie(C,j);return P.length===0}function ie(C,P){var j=C.nodeName,F=C.getAttribute("class"),H=C.getAttribute("id"),z,R;if(z=new RegExp("^"+j,"i"),P=P.replace(z,""),H&&P.length&&(z=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),P=P.replace(z,"")),F&&P.length)for(F=F.split(" "),R=F.length;R--;)z=new RegExp("\\."+F[R]+"(?![a-zA-Z\\-]+)","i"),P=P.replace(z,"");return P.length===0}function ue(C,P){var j;if(C.getElementById&&(j=C.getElementById(P)),j)return j;var F,H,z,R=C.getElementsByTagName("*");for(H=0,z=R.length;H<z;H++)if(F=R[H],P===F.getAttribute("id"))return F}function X(C){for(var P=Y(C,["use","svg:use"]),j=0;P.length&&j<P.length;){var F=P[j],H=F.getAttribute("xlink:href")||F.getAttribute("href");if(H===null)return;var z=H.slice(1),R=F.getAttribute("x")||0,ee=F.getAttribute("y")||0,$=ue(C,z).cloneNode(!0),W=($.getAttribute("transform")||"")+" translate("+R+", "+ee+")",U,q=P.length,te,K,ne,ce,me=n.svgNS;if(k($),/^svg$/i.test($.nodeName)){var pe=$.ownerDocument.createElementNS(me,"g");for(K=0,ne=$.attributes,ce=ne.length;K<ce;K++)te=ne.item(K),pe.setAttributeNS(me,te.nodeName,te.nodeValue);for(;$.firstChild;)pe.appendChild($.firstChild);$=pe}for(K=0,ne=F.attributes,ce=ne.length;K<ce;K++)te=ne.item(K),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?W=te.nodeValue+" "+W:$.setAttribute(te.nodeName,te.nodeValue));$.setAttribute("transform",W),$.setAttribute("instantiated_by_use","1"),$.removeAttribute("id"),U=F.parentNode,U.replaceChild($,F),P.length===q&&j++}}var S=new RegExp("^\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*,?\\s*("+n.reNum+"+)\\s*$");function k(C){if(!n.svgViewBoxElementsRegEx.test(C.nodeName))return{};var P=C.getAttribute("viewBox"),j=1,F=1,H=0,z=0,R,ee,$,W,U=C.getAttribute("width"),q=C.getAttribute("height"),te=C.getAttribute("x")||0,K=C.getAttribute("y")||0,ne=C.getAttribute("preserveAspectRatio")||"",ce=!P||!(P=P.match(S)),me=!U||!q||U==="100%"||q==="100%",pe=ce&&me,G={},fe="",be=0,xe=0;if(G.width=0,G.height=0,G.toBeParsed=pe,ce&&(te||K)&&C.parentNode&&C.parentNode.nodeName!=="#document"&&(fe=" translate("+o(te)+" "+o(K)+") ",$=(C.getAttribute("transform")||"")+fe,C.setAttribute("transform",$),C.removeAttribute("x"),C.removeAttribute("y")),pe)return G;if(ce)return G.width=o(U),G.height=o(q),G;if(H=-parseFloat(P[1]),z=-parseFloat(P[2]),R=parseFloat(P[3]),ee=parseFloat(P[4]),G.minX=H,G.minY=z,G.viewBoxWidth=R,G.viewBoxHeight=ee,me?(G.width=R,G.height=ee):(G.width=o(U),G.height=o(q),j=G.width/R,F=G.height/ee),ne=n.util.parsePreserveAspectRatioAttribute(ne),ne.alignX!=="none"&&(ne.meetOrSlice==="meet"&&(F=j=j>F?F:j),ne.meetOrSlice==="slice"&&(F=j=j>F?j:F),be=G.width-R*j,xe=G.height-ee*j,ne.alignX==="Mid"&&(be/=2),ne.alignY==="Mid"&&(xe/=2),ne.alignX==="Min"&&(be=0),ne.alignY==="Min"&&(xe=0)),j===1&&F===1&&H===0&&z===0&&te===0&&K===0)return G;if((te||K)&&C.parentNode.nodeName!=="#document"&&(fe=" translate("+o(te)+" "+o(K)+") "),$=fe+" matrix("+j+" 0 0 "+F+" "+(H*j+be)+" "+(z*F+xe)+") ",C.nodeName==="svg"){for(W=C.ownerDocument.createElementNS(n.svgNS,"g");C.firstChild;)W.appendChild(C.firstChild);C.appendChild(W)}else W=C,W.removeAttribute("x"),W.removeAttribute("y"),$=W.getAttribute("transform")+$;return W.setAttribute("transform",$),G}function M(C,P){for(;C&&(C=C.parentNode);)if(C.nodeName&&P.test(C.nodeName.replace("svg:",""))&&!C.getAttribute("instantiated_by_use"))return!0;return!1}n.parseSVGDocument=function(C,P,j,F){if(C){X(C);var H=n.Object.__uid++,z,R,ee=k(C),$=n.util.toArray(C.getElementsByTagName("*"));if(ee.crossOrigin=F&&F.crossOrigin,ee.svgUid=H,$.length===0&&n.isLikelyNode){$=C.selectNodes('//*[name(.)!="svg"]');var W=[];for(z=0,R=$.length;z<R;z++)W[z]=$[z];$=W}var U=$.filter(function(te){return k(te),n.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!M(te,n.svgInvalidAncestorsRegEx)});if(!U||U&&!U.length){P&&P([],{});return}var q={};$.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var K=te.getAttribute("id");q[K]=n.util.toArray(te.getElementsByTagName("*")).filter(function(ne){return n.svgValidTagNamesRegEx.test(ne.nodeName.replace("svg:",""))})}),n.gradientDefs[H]=n.getGradientDefs(C),n.cssRules[H]=n.getCSSRules(C),n.clipPaths[H]=q,n.parseElements(U,function(te,K){P&&(P(te,ee,K,$),delete n.gradientDefs[H],delete n.cssRules[H],delete n.clipPaths[H])},l(ee),j,F)}};function D(C,P){var j=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],F="xlink:href",H=P.getAttribute(F).slice(1),z=ue(C,H);if(z&&z.getAttribute(F)&&D(C,z),j.forEach(function(ee){z&&!P.hasAttribute(ee)&&z.hasAttribute(ee)&&P.setAttribute(ee,z.getAttribute(ee))}),!P.children.length)for(var R=z.cloneNode(!0);R.firstChild;)P.appendChild(R.firstChild);P.removeAttribute(F)}var B=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+n.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+n.reNum+"))?\\s+(.*)");u(n,{parseFontDeclaration:function(C,P){var j=C.match(B);if(j){var F=j[1],H=j[3],z=j[4],R=j[5],ee=j[6];F&&(P.fontStyle=F),H&&(P.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),z&&(P.fontSize=o(z)),ee&&(P.fontFamily=ee),R&&(P.lineHeight=R==="normal"?1:R)}},getGradientDefs:function(C){var P=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],j=Y(C,P),F,H=0,z={};for(H=j.length;H--;)F=j[H],F.getAttribute("xlink:href")&&D(C,F),z[F.getAttribute("id")]=F;return z},parseAttributes:function(C,P,j){if(C){var F,H={},z,R;typeof j>"u"&&(j=C.getAttribute("svgUid")),C.parentNode&&n.svgValidParentsRegEx.test(C.parentNode.nodeName)&&(H=n.parseAttributes(C.parentNode,P,j));var ee=P.reduce(function(ne,ce){return F=C.getAttribute(ce),F&&(ne[ce]=F),ne},{}),$=u(J(C,j),n.parseStyleAttribute(C));ee=u(ee,$),$[w]&&C.setAttribute(w,$[w]),z=R=H.fontSize||n.Text.DEFAULT_SVG_FONT_SIZE,ee[b]&&(ee[b]=z=o(ee[b],R));var W,U,q={};for(var te in ee)W=E(te),U=A(W,ee[te],H,z),q[W]=U;q&&q.font&&n.parseFontDeclaration(q.font,q);var K=u(H,q);return n.svgValidParentsRegEx.test(C.nodeName)?K:L(K)}},parseElements:function(C,P,j,F,H){new n.ElementsParser(C,P,j,F,H).parse()},parseStyleAttribute:function(C){var P={},j=C.getAttribute("style");return j&&(typeof j=="string"?V(j,P):Q(j,P)),P},parsePointsAttribute:function(C){if(!C)return null;C=C.replace(/,/g," ").trim(),C=C.split(/\s+/);var P=[],j,F;for(j=0,F=C.length;j<F;j+=2)P.push({x:parseFloat(C[j]),y:parseFloat(C[j+1])});return P},getCSSRules:function(C){var P=C.getElementsByTagName("style"),j,F,H={},z;for(j=0,F=P.length;j<F;j++){var R=P[j].textContent;R=R.replace(/\/\*[\s\S]*?\*\//g,""),R.trim()!==""&&(z=R.split("}"),z=z.filter(function(ee){return ee.trim()}),z.forEach(function(ee){var $=ee.split("{"),W={},U=$[1].trim(),q=U.split(";").filter(function(ce){return ce.trim()});for(j=0,F=q.length;j<F;j++){var te=q[j].split(":"),K=te[0].trim(),ne=te[1].trim();W[K]=ne}ee=$[0].trim(),ee.split(",").forEach(function(ce){ce=ce.replace(/^svg/i,"").trim(),ce!==""&&(H[ce]?n.util.object.extend(H[ce],W):H[ce]=n.util.object.clone(W))})}))}return H},loadSVGFromURL:function(C,P,j,F){C=C.replace(/^\n\s*/,"").trim(),new n.util.request(C,{method:"get",onComplete:H});function H(z){var R=z.responseXML;if(!R||!R.documentElement)return P&&P(null),!1;n.parseSVGDocument(R.documentElement,function(ee,$,W,U){P&&P(ee,$,W,U)},j,F)}},loadSVGFromString:function(C,P,j,F){var H=new n.window.DOMParser,z=H.parseFromString(C.trim(),"text/xml");n.parseSVGDocument(z.documentElement,function(R,ee,$,W){P(R,ee,$,W)},j,F)}})}(t),e.ElementsParser=function(d,n,u,l,r,o){this.elements=d,this.callback=n,this.options=u,this.reviver=l,this.svgUid=u&&u.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var n=this;this.elements.forEach(function(u,l){u.setAttribute("svgUid",n.svgUid),n.createObject(u,l)})},d.findTag=function(n){return e[e.util.string.capitalize(n.tagName.replace("svg:",""))]},d.createObject=function(n,u){var l=this.findTag(n);if(l&&l.fromElement)try{l.fromElement(n,this.createCallback(u,n),this.options)}catch(r){e.log(r)}else this.checkIfDone()},d.createCallback=function(n,u){var l=this;return function(r){var o;l.resolveGradient(r,u,"fill"),l.resolveGradient(r,u,"stroke"),r instanceof e.Image&&r._originalElement&&(o=r.parsePreserveAspectRatioAttribute(u)),r._removeTransformMatrix(o),l.resolveClipPath(r,u),l.reviver&&l.reviver(u,r),l.instances[n]=r,l.checkIfDone()}},d.extractPropertyDefinition=function(n,u,l){var r=n[u],o=this.regexUrl;if(o.test(r)){o.lastIndex=0;var i=o.exec(r)[1];return o.lastIndex=0,e[l][this.svgUid][i]}},d.resolveGradient=function(n,u,l){var r=this.extractPropertyDefinition(n,l,"gradientDefs");if(r){var o=u.getAttribute(l+"-opacity"),i=e.Gradient.fromElement(r,n,o,this.options);n.set(l,i)}},d.createClipPathCallback=function(n,u){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,u.push(l)}},d.resolveClipPath=function(n,u){var l=this.extractPropertyDefinition(n,"clipPath","clipPaths"),r,o,i,a,f,s;if(l){a=[],i=e.util.invertTransform(n.calcTransformMatrix());for(var p=l[0].parentNode,v=u;v.parentNode&&v.getAttribute("clip-path")!==n.clipPath;)v=v.parentNode;v.parentNode.appendChild(p);for(var m=0;m<l.length;m++)r=l[m],o=this.findTag(r),o.fromElement(r,this.createClipPathCallback(n,a),this.options);a.length===1?l=a[0]:l=new e.Group(a),f=e.util.multiplyTransformMatrices(i,l.calcTransformMatrix()),l.clipPath&&this.resolveClipPath(l,v);var s=e.util.qrDecompose(f);l.flipX=!1,l.flipY=!1,l.set("scaleX",s.scaleX),l.set("scaleY",s.scaleY),l.angle=s.angle,l.skewX=s.skewX,l.skewY=0,l.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),n.clipPath=l}else delete n.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(n){return n!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(d){var n=d.fabric||(d.fabric={});if(n.Point){n.warn("fabric.Point is already defined");return}n.Point=u;function u(l,r){this.x=l,this.y=r}u.prototype={type:"point",constructor:u,add:function(l){return new u(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new u(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new u(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new u(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new u(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new u(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new u(this.x+(l.x-this.x)*r,this.y+(l.y-this.y)*r)},distanceFrom:function(l){var r=this.x-l.x,o=this.y-l.y;return Math.sqrt(r*r+o*o)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new u(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new u(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,r){return this.x=l,this.y=r,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var r=this.x,o=this.y;this.x=l.x,this.y=l.y,l.x=r,l.y=o},clone:function(){return new u(this.x,this.y)}}}(t),function(d){var n=d.fabric||(d.fabric={});if(n.Intersection){n.warn("fabric.Intersection is already defined");return}function u(l){this.status=l,this.points=[]}n.Intersection=u,n.Intersection.prototype={constructor:u,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},n.Intersection.intersectLineLine=function(l,r,o,i){var a,f=(i.x-o.x)*(l.y-o.y)-(i.y-o.y)*(l.x-o.x),s=(r.x-l.x)*(l.y-o.y)-(r.y-l.y)*(l.x-o.x),p=(i.y-o.y)*(r.x-l.x)-(i.x-o.x)*(r.y-l.y);if(p!==0){var v=f/p,m=s/p;0<=v&&v<=1&&0<=m&&m<=1?(a=new u("Intersection"),a.appendPoint(new n.Point(l.x+v*(r.x-l.x),l.y+v*(r.y-l.y)))):a=new u}else f===0||s===0?a=new u("Coincident"):a=new u("Parallel");return a},n.Intersection.intersectLinePolygon=function(l,r,o){var i=new u,a=o.length,f,s,p,v;for(v=0;v<a;v++)f=o[v],s=o[(v+1)%a],p=u.intersectLineLine(l,r,f,s),i.appendPoints(p.points);return i.points.length>0&&(i.status="Intersection"),i},n.Intersection.intersectPolygonPolygon=function(l,r){var o=new u,i=l.length,a;for(a=0;a<i;a++){var f=l[a],s=l[(a+1)%i],p=u.intersectLinePolygon(f,s,r);o.appendPoints(p.points)}return o.points.length>0&&(o.status="Intersection"),o},n.Intersection.intersectPolygonRectangle=function(l,r,o){var i=r.min(o),a=r.max(o),f=new n.Point(a.x,i.y),s=new n.Point(i.x,a.y),p=u.intersectLinePolygon(i,f,l),v=u.intersectLinePolygon(f,a,l),m=u.intersectLinePolygon(a,s,l),b=u.intersectLinePolygon(s,i,l),w=new u;return w.appendPoints(p.points),w.appendPoints(v.points),w.appendPoints(m.points),w.appendPoints(b.points),w.points.length>0&&(w.status="Intersection"),w}}(t),function(d){var n=d.fabric||(d.fabric={});if(n.Color){n.warn("fabric.Color is already defined.");return}function u(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}n.Color=u,n.Color.prototype={_tryParsingColor:function(r){var o;r in u.colorNameMap&&(r=u.colorNameMap[r]),r==="transparent"&&(o=[255,255,255,0]),o||(o=u.sourceFromHex(r)),o||(o=u.sourceFromRgb(r)),o||(o=u.sourceFromHsl(r)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(r,o,i){r/=255,o/=255,i/=255;var a,f,s,p=n.util.array.max([r,o,i]),v=n.util.array.min([r,o,i]);if(s=(p+v)/2,p===v)a=f=0;else{var m=p-v;switch(f=s>.5?m/(2-p-v):m/(p+v),p){case r:a=(o-i)/m+(o<i?6:0);break;case o:a=(i-r)/m+2;break;case i:a=(r-o)/m+4;break}a/=6}return[Math.round(a*360),Math.round(f*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),o,i,a;return o=r[0].toString(16),o=o.length===1?"0"+o:o,i=r[1].toString(16),i=i.length===1?"0"+i:i,a=r[2].toString(16),a=a.length===1?"0"+a:a,o.toUpperCase()+i.toUpperCase()+a.toUpperCase()},toHexa:function(){var r=this.getSource(),o;return o=Math.round(r[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var o=this.getSource();return o[3]=r,this.setSource(o),this},toGrayscale:function(){var r=this.getSource(),o=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),i=r[3];return this.setSource([o,o,o,i]),this},toBlackWhite:function(r){var o=this.getSource(),i=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),a=o[3];return r=r||127,i=Number(i)<Number(r)?0:255,this.setSource([i,i,i,a]),this},overlayWith:function(r){r instanceof u||(r=new u(r));var o=[],i=this.getAlpha(),a=.5,f=this.getSource(),s=r.getSource(),p;for(p=0;p<3;p++)o.push(Math.round(f[p]*(1-a)+s[p]*a));return o[3]=i,this.setSource(o),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,n.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function l(r,o,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?r+(o-r)*6*i:i<1/2?o:i<2/3?r+(o-r)*(2/3-i)*6:r}n.Color.fromRgb=function(r){return u.fromSource(u.sourceFromRgb(r))},n.Color.sourceFromRgb=function(r){var o=r.match(u.reRGBa);if(o){var i=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),a=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),f=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(i,10),parseInt(a,10),parseInt(f,10),o[4]?parseFloat(o[4]):1]}},n.Color.fromRgba=u.fromRgb,n.Color.fromHsl=function(r){return u.fromSource(u.sourceFromHsl(r))},n.Color.sourceFromHsl=function(r){var o=r.match(u.reHSLa);if(o){var i=(parseFloat(o[1])%360+360)%360/360,a=parseFloat(o[2])/(/%$/.test(o[2])?100:1),f=parseFloat(o[3])/(/%$/.test(o[3])?100:1),s,p,v;if(a===0)s=p=v=f;else{var m=f<=.5?f*(a+1):f+a-f*a,b=f*2-m;s=l(b,m,i+1/3),p=l(b,m,i),v=l(b,m,i-1/3)}return[Math.round(s*255),Math.round(p*255),Math.round(v*255),o[4]?parseFloat(o[4]):1]}},n.Color.fromHsla=u.fromHsl,n.Color.fromHex=function(r){return u.fromSource(u.sourceFromHex(r))},n.Color.sourceFromHex=function(r){if(r.match(u.reHex)){var o=r.slice(r.indexOf("#")+1),i=o.length===3||o.length===4,a=o.length===8||o.length===4,f=i?o.charAt(0)+o.charAt(0):o.substring(0,2),s=i?o.charAt(1)+o.charAt(1):o.substring(2,4),p=i?o.charAt(2)+o.charAt(2):o.substring(4,6),v=a?i?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(f,16),parseInt(s,16),parseInt(p,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},n.Color.fromSource=function(r){var o=new u;return o.setSource(r),o}}(t),function(d){var n=d.fabric||(d.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],r={},o="left",i="top",a="right",f="bottom",s="center",p={top:f,bottom:i,left:a,right:o,center:s},v=n.util.radiansToDegrees,m=Math.sign||function(W){return(W>0)-(W<0)||+W};function b(W,U){var q=W.angle+v(Math.atan2(U.y,U.x))+360;return Math.round(q%360/45)}function w(W,U){var q=U.transform.target,te=q.canvas,K=n.util.object.clone(U);K.target=q,te&&te.fire("object:"+W,K),q.fire(W,U)}function E(W,U){var q=U.canvas,te=q.uniScaleKey,K=W[te];return q.uniformScaling&&!K||!q.uniformScaling&&K}function A(W){return W.originX===s&&W.originY===s}function O(W,U,q){var te=W.lockScalingX,K=W.lockScalingY;return!!(te&&K||!U&&(te||K)&&q||te&&U==="x"||K&&U==="y")}function L(W,U,q){var te="not-allowed",K=E(W,q),ne="";if(U.x!==0&&U.y===0?ne="x":U.x===0&&U.y!==0&&(ne="y"),O(q,ne,K))return te;var ce=b(q,U);return u[ce]+"-resize"}function Y(W,U,q){var te="not-allowed";if(U.x!==0&&q.lockSkewingY||U.y!==0&&q.lockSkewingX)return te;var K=b(q,U)%4;return l[K]+"-resize"}function V(W,U,q){return W[q.canvas.altActionKey]?r.skewCursorStyleHandler(W,U,q):r.scaleCursorStyleHandler(W,U,q)}function Q(W,U,q){var te=W[q.canvas.altActionKey];if(U.x===0)return te?"skewX":"scaleY";if(U.y===0)return te?"skewY":"scaleX"}function J(W,U,q){return q.lockRotation?"not-allowed":U.cursorStyle}function Z(W,U,q,te){return{e:W,transform:U,pointer:{x:q,y:te}}}function re(W){return function(U,q,te,K){var ne=q.target,ce=ne.getCenterPoint(),me=ne.translateToOriginPoint(ce,q.originX,q.originY),pe=W(U,q,te,K);return ne.setPositionByOrigin(me,q.originX,q.originY),pe}}function ie(W,U){return function(q,te,K,ne){var ce=U(q,te,K,ne);return ce&&w(W,Z(q,te,K,ne)),ce}}function ue(W,U,q,te,K){var ne=W.target,ce=ne.controls[W.corner],me=ne.canvas.getZoom(),pe=ne.padding/me,G=ne.toLocalPoint(new n.Point(te,K),U,q);return G.x>=pe&&(G.x-=pe),G.x<=-pe&&(G.x+=pe),G.y>=pe&&(G.y-=pe),G.y<=pe&&(G.y+=pe),G.x-=ce.offsetX,G.y-=ce.offsetY,G}function X(W){return W.flipX!==W.flipY}function S(W,U,q,te,K){if(W[U]!==0){var ne=W._getTransformedDimensions()[te],ce=K/ne*W[q];W.set(q,ce)}}function k(W,U,q,te){var K=U.target,ne=K._getTransformedDimensions(0,K.skewY),ce=ue(U,U.originX,U.originY,q,te),me=Math.abs(ce.x*2)-ne.x,pe=K.skewX,G;me<2?G=0:(G=v(Math.atan2(me/K.scaleX,ne.y/K.scaleY)),U.originX===o&&U.originY===f&&(G=-G),U.originX===a&&U.originY===i&&(G=-G),X(K)&&(G=-G));var fe=pe!==G;if(fe){var be=K._getTransformedDimensions().y;K.set("skewX",G),S(K,"skewY","scaleY","y",be)}return fe}function M(W,U,q,te){var K=U.target,ne=K._getTransformedDimensions(K.skewX,0),ce=ue(U,U.originX,U.originY,q,te),me=Math.abs(ce.y*2)-ne.y,pe=K.skewY,G;me<2?G=0:(G=v(Math.atan2(me/K.scaleY,ne.x/K.scaleX)),U.originX===o&&U.originY===f&&(G=-G),U.originX===a&&U.originY===i&&(G=-G),X(K)&&(G=-G));var fe=pe!==G;if(fe){var be=K._getTransformedDimensions().x;K.set("skewY",G),S(K,"skewX","scaleX","x",be)}return fe}function D(W,U,q,te){var K=U.target,ne=K.skewX,ce,me=U.originY;if(K.lockSkewingX)return!1;if(ne===0){var pe=ue(U,s,s,q,te);pe.x>0?ce=o:ce=a}else ne>0&&(ce=me===i?o:a),ne<0&&(ce=me===i?a:o),X(K)&&(ce=ce===o?a:o);U.originX=ce;var G=ie("skewing",re(k));return G(W,U,q,te)}function B(W,U,q,te){var K=U.target,ne=K.skewY,ce,me=U.originX;if(K.lockSkewingY)return!1;if(ne===0){var pe=ue(U,s,s,q,te);pe.y>0?ce=i:ce=f}else ne>0&&(ce=me===o?i:f),ne<0&&(ce=me===o?f:i),X(K)&&(ce=ce===i?f:i);U.originY=ce;var G=ie("skewing",re(M));return G(W,U,q,te)}function C(W,U,q,te){var K=U,ne=K.target,ce=ne.translateToOriginPoint(ne.getCenterPoint(),K.originX,K.originY);if(ne.lockRotation)return!1;var me=Math.atan2(K.ey-ce.y,K.ex-ce.x),pe=Math.atan2(te-ce.y,q-ce.x),G=v(pe-me+K.theta),fe=!0;if(ne.snapAngle>0){var be=ne.snapAngle,xe=ne.snapThreshold||be,Ee=Math.ceil(G/be)*be,Ae=Math.floor(G/be)*be;Math.abs(G-Ae)<xe?G=Ae:Math.abs(G-Ee)<xe&&(G=Ee)}return G<0&&(G=360+G),G%=360,fe=ne.angle!==G,ne.angle=G,fe}function P(W,U,q,te,K){K=K||{};var ne=U.target,ce=ne.lockScalingX,me=ne.lockScalingY,pe=K.by,G,fe,be,xe,Ee=E(W,ne),Ae=O(ne,pe,Ee),Je,Ue,Ut=U.gestureScale;if(Ae)return!1;if(Ut)fe=U.scaleX*Ut,be=U.scaleY*Ut;else{if(G=ue(U,U.originX,U.originY,q,te),Je=pe!=="y"?m(G.x):1,Ue=pe!=="x"?m(G.y):1,U.signX||(U.signX=Je),U.signY||(U.signY=Ue),ne.lockScalingFlip&&(U.signX!==Je||U.signY!==Ue))return!1;if(xe=ne._getTransformedDimensions(),Ee&&!pe){var br=Math.abs(G.x)+Math.abs(G.y),_t=U.original,Wo=Math.abs(xe.x*_t.scaleX/ne.scaleX)+Math.abs(xe.y*_t.scaleY/ne.scaleY),bi=br/Wo;fe=_t.scaleX*bi,be=_t.scaleY*bi}else fe=Math.abs(G.x*ne.scaleX/xe.x),be=Math.abs(G.y*ne.scaleY/xe.y);A(U)&&(fe*=2,be*=2),U.signX!==Je&&pe!=="y"&&(U.originX=p[U.originX],fe*=-1,U.signX=Je),U.signY!==Ue&&pe!=="x"&&(U.originY=p[U.originY],be*=-1,U.signY=Ue)}var Xo=ne.scaleX,Go=ne.scaleY;return pe?(pe==="x"&&ne.set("scaleX",fe),pe==="y"&&ne.set("scaleY",be)):(!ce&&ne.set("scaleX",fe),!me&&ne.set("scaleY",be)),Xo!==ne.scaleX||Go!==ne.scaleY}function j(W,U,q,te){return P(W,U,q,te)}function F(W,U,q,te){return P(W,U,q,te,{by:"x"})}function H(W,U,q,te){return P(W,U,q,te,{by:"y"})}function z(W,U,q,te){return W[U.target.canvas.altActionKey]?r.skewHandlerX(W,U,q,te):r.scalingY(W,U,q,te)}function R(W,U,q,te){return W[U.target.canvas.altActionKey]?r.skewHandlerY(W,U,q,te):r.scalingX(W,U,q,te)}function ee(W,U,q,te){var K=U.target,ne=ue(U,U.originX,U.originY,q,te),ce=K.strokeWidth/(K.strokeUniform?K.scaleX:1),me=A(U)?2:1,pe=K.width,G=Math.abs(ne.x*me/K.scaleX)-ce;return K.set("width",Math.max(G,0)),pe!==G}function $(W,U,q,te){var K=U.target,ne=q-U.offsetX,ce=te-U.offsetY,me=!K.get("lockMovementX")&&K.left!==ne,pe=!K.get("lockMovementY")&&K.top!==ce;return me&&K.set("left",ne),pe&&K.set("top",ce),(me||pe)&&w("moving",Z(W,U,q,te)),me||pe}r.scaleCursorStyleHandler=L,r.skewCursorStyleHandler=Y,r.scaleSkewCursorStyleHandler=V,r.rotationWithSnapping=ie("rotating",re(C)),r.scalingEqually=ie("scaling",re(j)),r.scalingX=ie("scaling",re(F)),r.scalingY=ie("scaling",re(H)),r.scalingYOrSkewingX=z,r.scalingXOrSkewingY=R,r.changeWidth=ie("resizing",re(ee)),r.skewHandlerX=D,r.skewHandlerY=B,r.dragHandler=$,r.scaleOrSkewActionName=Q,r.rotationStyleHandler=J,r.fireEvent=w,r.wrapWithFixedAnchor=re,r.wrapWithFireEvent=ie,r.getLocalPoint=ue,n.controlsUtils=r}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.degreesToRadians,l=n.controlsUtils;function r(i,a,f,s,p){s=s||{};var v=this.sizeX||s.cornerSize||p.cornerSize,m=this.sizeY||s.cornerSize||p.cornerSize,b=typeof s.transparentCorners<"u"?s.transparentCorners:p.transparentCorners,w=b?"stroke":"fill",E=!b&&(s.cornerStrokeColor||p.cornerStrokeColor),A=a,O=f,L;i.save(),i.fillStyle=s.cornerColor||p.cornerColor,i.strokeStyle=s.cornerStrokeColor||p.cornerStrokeColor,v>m?(L=v,i.scale(1,m/v),O=f*v/m):m>v?(L=m,i.scale(v/m,1),A=a*m/v):L=v,i.lineWidth=1,i.beginPath(),i.arc(A,O,L/2,0,2*Math.PI,!1),i[w](),E&&i.stroke(),i.restore()}function o(i,a,f,s,p){s=s||{};var v=this.sizeX||s.cornerSize||p.cornerSize,m=this.sizeY||s.cornerSize||p.cornerSize,b=typeof s.transparentCorners<"u"?s.transparentCorners:p.transparentCorners,w=b?"stroke":"fill",E=!b&&(s.cornerStrokeColor||p.cornerStrokeColor),A=v/2,O=m/2;i.save(),i.fillStyle=s.cornerColor||p.cornerColor,i.strokeStyle=s.cornerStrokeColor||p.cornerStrokeColor,i.lineWidth=1,i.translate(a,f),i.rotate(u(p.angle)),i[w+"Rect"](-A,-O,v,m),E&&i.strokeRect(-A,-O,v,m),i.restore()}l.renderCircleControl=r,l.renderSquareControl=o}(t),function(d){var n=d.fabric||(d.fabric={});function u(l){for(var r in l)this[r]=l[r]}n.Control=u,n.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(l,r){return r.cursorStyle},getActionName:function(l,r){return r.actionName},getVisibility:function(l,r){var o=l._controlsVisibility;return o&&typeof o[r]<"u"?o[r]:this.visible},setVisibility:function(l){this.visible=l},positionHandler:function(l,r){var o=n.util.transformPoint({x:this.x*l.x+this.offsetX,y:this.y*l.y+this.offsetY},r);return o},calcCornerCoords:function(l,r,o,i,a){var f,s,p,v,m=a?this.touchSizeX:this.sizeX,b=a?this.touchSizeY:this.sizeY;if(m&&b&&m!==b){var w=Math.atan2(b,m),E=Math.sqrt(m*m+b*b)/2,A=w-n.util.degreesToRadians(l),O=Math.PI/2-w-n.util.degreesToRadians(l);f=E*n.util.cos(A),s=E*n.util.sin(A),p=E*n.util.cos(O),v=E*n.util.sin(O)}else{var L=m&&b?m:r;E=L*.7071067812;var A=n.util.degreesToRadians(45-l);f=p=E*n.util.cos(A),s=v=E*n.util.sin(A)}return{tl:{x:o-v,y:i-p},tr:{x:o+f,y:i-s},bl:{x:o-f,y:i+s},br:{x:o+v,y:i+p}}},render:function(l,r,o,i,a){switch(i=i||{},i.cornerStyle||a.cornerStyle){case"circle":n.controlsUtils.renderCircleControl.call(this,l,r,o,i,a);break;default:n.controlsUtils.renderSquareControl.call(this,l,r,o,i,a)}}}}(t),function(){function d(o,i){var a=o.getAttribute("style"),f=o.getAttribute("offset")||0,s,p,v,m;if(f=parseFloat(f)/(/%$/.test(f)?100:1),f=f<0?0:f>1?1:f,a){var b=a.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),m=b.length;m--;){var w=b[m].split(/\s*:\s*/),E=w[0].trim(),A=w[1].trim();E==="stop-color"?s=A:E==="stop-opacity"&&(v=A)}}return s||(s=o.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=o.getAttribute("stop-opacity")),s=new e.Color(s),p=s.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=p*i,{offset:f,color:s.toRgb(),opacity:v}}function n(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function u(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var l=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var i,a=this;Object.keys(o).forEach(function(f){a[f]=o[f]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,i={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(i.r1=o.coords.r1||0,i.r2=o.coords.r2||0),this.coords=i,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var i in o){var a=new e.Color(o[i]);this.colorStops.push({offset:parseFloat(i),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(o){var i={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,i,o),i},toSVG:function(o,p){var a=l(this.coords,!0),f,s,p=p||{},v,m,b=l(this.colorStops,!0),w=a.r1>a.r2,E=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),A=-this.offsetX,O=-this.offsetY,L=!!p.additionalTransform,Y=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(re,ie){return re.offset-ie.offset}),Y==="objectBoundingBox"?(A/=o.width,O/=o.height):(A+=o.width/2,O+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(A-=o.pathOffset.x,O-=o.pathOffset.y),E[4]-=A,E[5]-=O,m='id="SVGID_'+this.id+'" gradientUnits="'+Y+'"',m+=' gradientTransform="'+(L?p.additionalTransform+" ":"")+e.util.matrixToSVG(E)+'" ',this.type==="linear"?v=["<linearGradient ",m,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",m,' cx="',w?a.x1:a.x2,'" cy="',w?a.y1:a.y2,'" r="',w?a.r1:a.r2,'" fx="',w?a.x2:a.x1,'" fy="',w?a.y2:a.y1,`">
`]),this.type==="radial"){if(w)for(b=b.concat(),b.reverse(),f=0,s=b.length;f<s;f++)b[f].offset=1-b[f].offset;var V=Math.min(a.r1,a.r2);if(V>0){var Q=Math.max(a.r1,a.r2),J=V/Q;for(f=0,s=b.length;f<s;f++)b[f].offset+=J*(1-b[f].offset)}}for(f=0,s=b.length;f<s;f++){var Z=b[f];v.push("<stop ",'offset="',Z.offset*100+"%",'" style="stop-color:',Z.color,typeof Z.opacity<"u"?";stop-opacity: "+Z.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(o){var i,a=e.util.object.clone(this.coords),f,s;if(this.type){for(this.type==="linear"?i=o.createLinearGradient(a.x1,a.y1,a.x2,a.y2):this.type==="radial"&&(i=o.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),f=0,s=this.colorStops.length;f<s;f++){var p=this.colorStops[f].color,v=this.colorStops[f].opacity,m=this.colorStops[f].offset;typeof v<"u"&&(p=new e.Color(p).setAlpha(v).toRgba()),i.addColorStop(m,p)}return i}}}),e.util.object.extend(e.Gradient,{fromElement:function(o,i,a,f){var s=parseFloat(a)/(/%$/.test(a)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var p=o.getElementsByTagName("stop"),v,m=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=o.getAttribute("gradientTransform")||"",w=[],E,A,O=0,L=0,Y;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(v="linear",E=n(o)):(v="radial",E=u(o)),A=p.length;A--;)w.push(d(p[A],s));Y=e.parseTransformAttribute(b),r(i,E,f,m),m==="pixels"&&(O=-i.left,L=-i.top);var V=new e.Gradient({id:o.getAttribute("id"),type:v,coords:E,colorStops:w,gradientUnits:m,gradientTransform:Y,offsetX:O,offsetY:L});return V}});function r(o,i,a,f){var s,p;Object.keys(i).forEach(function(v){s=i[v],s==="Infinity"?p=1:s==="-Infinity"?p=0:(p=parseFloat(i[v],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(p*=.01,f==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(p*=a.viewBoxWidth||a.width),(v==="y1"||v==="y2")&&(p*=a.viewBoxHeight||a.height)))),i[v]=p})}}(),function(){var d=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(n,u){if(n||(n={}),this.id=e.Object.__uid++,this.setOptions(n),!n.source||n.source&&typeof n.source!="string"){u&&u(this);return}else{var l=this;this.source=e.util.createImage(),e.util.loadImage(n.source,function(r,o){l.source=r,u&&u(l,o)},null,this.crossOrigin)}},toObject:function(n){var u=e.Object.NUM_FRACTION_DIGITS,l,r;return typeof this.source.src=="string"?l=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(l=this.source.toDataURL()),r={type:"pattern",source:l,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,u),offsetY:d(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,r,n),r},toSVG:function(n){var u=typeof this.source=="function"?this.source():this.source,l=u.width/n.width,r=u.height/n.height,o=this.offsetX/n.width,i=this.offsetY/n.height,a="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,i&&(r+=Math.abs(i))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(l=1,o&&(l+=Math.abs(o))),u.src?a=u.src:u.toDataURL&&(a=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+i+'" width="'+l+'" height="'+r+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+a+`"></image>
</pattern>
`},setOptions:function(n){for(var u in n)this[u]=n[u]},toLive:function(n){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":n.createPattern(u,this.repeat)}})}(),function(d){var n=d.fabric||(d.fabric={}),u=n.util.toFixed;if(n.Shadow){n.warn("fabric.Shadow is already defined.");return}n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){typeof l=="string"&&(l=this._parseShadow(l));for(var r in l)this[r]=l[r];this.id=n.Object.__uid++},_parseShadow:function(l){var r=l.trim(),o=n.Shadow.reOffsetsAndBlur.exec(r)||[],i=r.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:i.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var r=40,o=40,i=n.Object.NUM_FRACTION_DIGITS,a=n.util.rotateVector({x:this.offsetX,y:this.offsetY},n.util.degreesToRadians(-l.angle)),f=20,s=new n.Color(this.color);return l.width&&l.height&&(r=u((Math.abs(a.x)+this.blur)/l.width,i)*100+f,o=u((Math.abs(a.y)+this.blur)/l.height,i)*100+f),l.flipX&&(a.x*=-1),l.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,i)+`"></feGaussianBlur>
	<feOffset dx="`+u(a.x,i)+'" dy="'+u(a.y,i)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},r=n.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==r[o]&&(l[o]=this[o])},this),l}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var d=e.util.object.extend,n=e.util.getElementOffset,u=e.util.removeFromArray,l=e.util.toFixed,r=e.util.transformPoint,o=e.util.invertTransform,i=e.util.getNodeCanvas,a=e.util.createCanvasElement,f=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(s,p){p||(p={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,p)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,p){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(p),this.interactive||this._initRetinaScaling(),p.overlayImage&&this.setOverlayImage(p.overlayImage,v),p.backgroundImage&&this.setBackgroundImage(p.backgroundImage,v),p.backgroundColor&&this.setBackgroundColor(p.backgroundColor,v),p.overlayColor&&this.setOverlayColor(p.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var s=e.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,p,v){p.setAttribute("width",this.width*s),p.setAttribute("height",this.height*s),v.scale(s,s)},calcOffset:function(){return this._offset=n(this.lowerCanvasEl),this},setOverlayImage:function(s,p,v){return this.__setBgOverlayImage("overlayImage",s,p,v)},setBackgroundImage:function(s,p,v){return this.__setBgOverlayImage("backgroundImage",s,p,v)},setOverlayColor:function(s,p){return this.__setBgOverlayColor("overlayColor",s,p)},setBackgroundColor:function(s,p){return this.__setBgOverlayColor("backgroundColor",s,p)},__setBgOverlayImage:function(s,p,v,m){return typeof p=="string"?e.util.loadImage(p,function(b,w){if(b){var E=new e.Image(b,m);this[s]=E,E.canvas=this}v&&v(b,w)},this,m&&m.crossOrigin):(m&&p.setOptions(m),this[s]=p,p&&(p.canvas=this),v&&v(p,!1)),this},__setBgOverlayColor:function(s,p,v){return this[s]=p,this._initGradient(p,s),this._initPattern(p,s,v),this},_createCanvasElement:function(){var s=a();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw f;return s},_initOptions:function(s){var p=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(p.width,10)||0,this.height=this.height||parseInt(p.height,10)||0,this.lowerCanvasEl.style&&(p.width=this.width,p.height=this.height,p.style.width=this.width+"px",p.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=e.util.getById(s)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,p){return this.setDimensions({width:s},p)},setHeight:function(s,p){return this.setDimensions({height:s},p)},setDimensions:function(s,p){var v;p=p||{};for(var m in s)v=s[m],p.cssOnly||(this._setBackstoreDimension(m,s[m]),v+="px",this.hasLostContext=!0),p.backstoreOnly||this._setCssDimension(m,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),p.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,p){return this.lowerCanvasEl[s]=p,this.upperCanvasEl&&(this.upperCanvasEl[s]=p),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=p),this[s]=p,this},_setCssDimension:function(s,p){return this.lowerCanvasEl.style[s]=p,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=p),this.wrapperEl&&(this.wrapperEl.style[s]=p),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var p=this._activeObject,v=this.backgroundImage,m=this.overlayImage,b,w,E;for(this.viewportTransform=s,w=0,E=this._objects.length;w<E;w++)b=this._objects[w],b.group||b.setCoords(!0);return p&&p.setCoords(),v&&v.setCoords(!0),m&&m.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,p){var v=s,m=this.viewportTransform.slice(0);s=r(s,o(this.viewportTransform)),m[0]=p,m[3]=p;var b=r(s,m);return m[4]+=v.x-b.x,m[5]+=v.y-b.y,this.setViewportTransform(m)},setZoom:function(s){return this.zoomToPoint(new e.Point(0,0),s),this},absolutePan:function(s){var p=this.viewportTransform.slice(0);return p[4]=-s.x,p[5]=-s.y,this.setViewportTransform(p)},relativePan:function(s){return this.absolutePan(new e.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},p=this.width,v=this.height,m=o(this.viewportTransform);return s.tl=r({x:0,y:0},m),s.br=r({x:p,y:v},m),s.tr=new e.Point(s.br.x,s.tl.y),s.bl=new e.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,p){var v=this.viewportTransform,m=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),e.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(s,p),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),m&&(m.canvas=this,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var p=this.viewportTransform,v=this.clipPath;s.save(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s.globalCompositeOperation="destination-in",v.transform(s),s.scale(1/v.zoomX,1/v.zoomY),s.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),s.restore()},_renderObjects:function(s,p){var v,m;for(v=0,m=p.length;v<m;++v)p[v]&&p[v].render(s)},_renderBackgroundOrOverlay:function(s,p){var v=this[p+"Color"],m=this[p+"Image"],b=this.viewportTransform,w=this[p+"Vpt"];if(!(!v&&!m)){if(v){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=v.toLive?v.toLive(s,this):v,w&&s.transform(b[0],b[1],b[2],b[3],b[4],b[5]),s.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var E=v.gradientTransform||v.patternTransform;E&&s.transform(E[0],E[1],E[2],E[3],E[4],E[5]),s.fill(),s.restore()}m&&(s.save(),w&&s.transform(b[0],b[1],b[2],b[3],b[4],b[5]),m.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(s){return this._centerObject(s,new e.Point(this.getCenterPoint().x,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new e.Point(s.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(s){var p=this.getCenterPoint();return this._centerObject(s,p)},viewportCenterObject:function(s){var p=this.getVpCenter();return this._centerObject(s,p)},viewportCenterObjectH:function(s){var p=this.getVpCenter();return this._centerObject(s,new e.Point(p.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var p=this.getVpCenter();return this._centerObject(s,new e.Point(s.getCenterPoint().x,p.y))},getVpCenter:function(){var s=this.getCenterPoint(),p=o(this.viewportTransform);return r(s,p)},_centerObject:function(s,p){return s.setPositionByOrigin(p,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,p){var v=this.clipPath,m={version:e.version,objects:this._toObjects(s,p)};return v&&!v.excludeFromExport&&(m.clipPath=this._toObject(this.clipPath,s,p)),d(m,this.__serializeBgOverlay(s,p)),e.util.populateWithProperties(this,m,p),m},_toObjects:function(s,p){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,s,p)},this)},_toObject:function(s,p,v){var m;this.includeDefaultValues||(m=s.includeDefaultValues,s.includeDefaultValues=!1);var b=s[p](v);return this.includeDefaultValues||(s.includeDefaultValues=m),b},__serializeBgOverlay:function(s,p){var v={},m=this.backgroundImage,b=this.overlayImage,w=this.backgroundColor,E=this.overlayColor;return w&&w.toObject?w.excludeFromExport||(v.background=w.toObject(p)):w&&(v.background=w),E&&E.toObject?E.excludeFromExport||(v.overlay=E.toObject(p)):E&&(v.overlay=E),m&&!m.excludeFromExport&&(v.backgroundImage=this._toObject(m,s,p)),b&&!b.excludeFromExport&&(v.overlayImage=this._toObject(b,s,p)),v},svgViewportTransformation:!0,toSVG:function(s,p){s||(s={}),s.reviver=p;var v=[];return this._setSVGPreamble(v,s),this._setSVGHeader(v,s),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",p),this._setSVGObjects(v,p),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",p),v.push("</svg>"),v.join("")},_setSVGPreamble:function(s,p){p.suppressPreamble||s.push('<?xml version="1.0" encoding="',p.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,p){var v=p.width||this.width,m=p.height||this.height,b,w='viewBox="0 0 '+this.width+" "+this.height+'" ',E=e.Object.NUM_FRACTION_DIGITS;p.viewBox?w='viewBox="'+p.viewBox.x+" "+p.viewBox.y+" "+p.viewBox.width+" "+p.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,w='viewBox="'+l(-b[4]/b[0],E)+" "+l(-b[5]/b[3],E)+" "+l(this.width/b[0],E)+" "+l(this.height/b[3],E)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',m,'" ',w,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(p),`</defs>
`)},createSVGClipPathMarkup:function(s){var p=this.clipPath;return p?(p.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+p.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,p=["background","overlay"].map(function(v){var m=s[v+"Color"];if(m&&m.toLive){var b=s[v+"Vpt"],w=s.viewportTransform,E={width:s.width/(b?w[0]:1),height:s.height/(b?w[3]:1)};return m.toSVG(E,{additionalTransform:b?e.util.matrixToSVG(w):""})}});return p.join("")},createSVGFontFacesMarkup:function(){var s="",p={},v,m,b,w,E,A,O,L,Y,V=e.fontPaths,Q=[];for(this._objects.forEach(function Z(re){Q.push(re),re._objects&&re._objects.forEach(Z)}),L=0,Y=Q.length;L<Y;L++)if(v=Q[L],m=v.fontFamily,!(v.type.indexOf("text")===-1||p[m]||!V[m])&&(p[m]=!0,!!v.styles)){b=v.styles;for(E in b){w=b[E];for(O in w)A=w[O],m=A.fontFamily,!p[m]&&V[m]&&(p[m]=!0)}}for(var J in p)s+=[`		@font-face {
`,"			font-family: '",J,`';
`,"			src: url('",V[J],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,p){var v,m,b,w=this._objects;for(m=0,b=w.length;m<b;m++)v=w[m],!v.excludeFromExport&&this._setSVGObject(s,v,p)},_setSVGObject:function(s,p,v){s.push(p.toSVG(v))},_setSVGBgOverlayImage:function(s,p,v){this[p]&&!this[p].excludeFromExport&&this[p].toSVG&&s.push(this[p].toSVG(v))},_setSVGBgOverlayColor:function(s,p){var v=this[p+"Color"],m=this.viewportTransform,b=this.width,w=this.height;if(v)if(v.toLive){var E=v.repeat,A=e.util.invertTransform(m),O=this[p+"Vpt"],L=O?e.util.matrixToSVG(A):"";s.push('<rect transform="'+L+" translate(",b/2,",",w/2,')"',' x="',v.offsetX-b/2,'" y="',v.offsetY-w/2,'" ','width="',E==="repeat-y"||E==="no-repeat"?v.source.width:b,'" height="',E==="repeat-x"||E==="no-repeat"?v.source.height:w,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var p=this._activeObject,v,m,b;if(s===p&&s.type==="activeSelection")for(b=p._objects,v=b.length;v--;)m=b[v],u(this._objects,m),this._objects.unshift(m);else u(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var p=this._activeObject,v,m,b;if(s===p&&s.type==="activeSelection")for(b=p._objects,v=0;v<b.length;v++)m=b[v],u(this._objects,m),this._objects.push(m);else u(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,p){if(!s)return this;var v=this._activeObject,m,b,w,E,A,O=0;if(s===v&&s.type==="activeSelection")for(A=v._objects,m=0;m<A.length;m++)b=A[m],w=this._objects.indexOf(b),w>0+O&&(E=w-1,u(this._objects,b),this._objects.splice(E,0,b)),O++;else w=this._objects.indexOf(s),w!==0&&(E=this._findNewLowerIndex(s,w,p),u(this._objects,s),this._objects.splice(E,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,p,v){var m,b;if(v)for(m=p,b=p-1;b>=0;--b){var w=s.intersectsWithObject(this._objects[b])||s.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(s);if(w){m=b;break}}else m=p-1;return m},bringForward:function(s,p){if(!s)return this;var v=this._activeObject,m,b,w,E,A,O=0;if(s===v&&s.type==="activeSelection")for(A=v._objects,m=A.length;m--;)b=A[m],w=this._objects.indexOf(b),w<this._objects.length-1-O&&(E=w+1,u(this._objects,b),this._objects.splice(E,0,b)),O++;else w=this._objects.indexOf(s),w!==this._objects.length-1&&(E=this._findNewUpperIndex(s,w,p),u(this._objects,s),this._objects.splice(E,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,p,v){var m,b,w;if(v)for(m=p,b=p+1,w=this._objects.length;b<w;++b){var E=s.intersectsWithObject(this._objects[b])||s.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(s);if(E){m=b;break}}else m=p+1;return m},moveTo:function(s,p){return u(this._objects,s),this._objects.splice(p,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(e.StaticCanvas.prototype,e.Observable),d(e.StaticCanvas.prototype,e.Collection),d(e.StaticCanvas.prototype,e.DataURLExporter),d(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var p=a();if(!p||!p.getContext)return null;var v=p.getContext("2d");if(!v)return null;switch(s){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var s=i(this.lowerCanvasEl);return s&&s.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(s){var p=i(this.lowerCanvasEl);return p&&p.createJPEGStream(s)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(d){d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var n=this.canvas.viewportTransform;d.save(),d.transform(n[0],n[1],n[2],n[3],n[4],n[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,n=this.shadow,u=d.contextTop,l=d.getZoom();d&&d._isRetinaScaling()&&(l*=e.devicePixelRatio),u.shadowColor=n.color,u.shadowBlur=n.blur*l,u.shadowOffsetX=n.offsetX*l,u.shadowOffsetY=n.offsetY*l}},needsFullRender:function(){var d=new e.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(d){this.canvas=d,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(d,n,u){var l=n.midPointFrom(u);return d.quadraticCurveTo(n.x,n.y,l.x,l.y),l},onMouseDown:function(d,n){this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],this._prepareForDrawing(d))},onMouseMove:function(d,n){if(this.canvas._isMainEvent(n.e)&&(this.drawStraightLine=n.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,l=u.length,r=this.canvas.contextTop;this._saveAndTransform(r),r.beginPath(),this.oldEnd&&r.moveTo(this.oldEnd.x,this.oldEnd.y),this.oldEnd=this._drawSegment(r,u[l-2],u[l-1],!0),r.stroke(),r.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.finish(),!1):!0},finish:function(){this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath()},_prepareForDrawing:function(d){var n=new e.Point(d.x,d.y);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(d){var n=new e.Point(d.x,d.y);return this._addPoint(n)},_render:function(d){var n,u,l=this._points[0],r=this._points[1];if(d=d||this.canvas.contextTop,this._saveAndTransform(d),d.beginPath(),this._points.length===2&&l.x===r.x&&l.y===r.y){var o=this.width/1e3;l=new e.Point(l.x,l.y),r=new e.Point(r.x,r.y),l.x-=o,r.x+=o}for(d.moveTo(l.x,l.y),n=1,u=this._points.length;n<u;n++)this._drawSegment(d,l,r),l=this._points[n],r=this._points[n+1];d.lineTo(l.x,l.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var n=this.width/1e3;return e.util.getSmoothPathFromPoints(d,n)},_isEmptySVGPath:function(d){var n=e.util.joinPath(d);return n==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(d){var n=new e.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,n.shadow=new e.Shadow(this.shadow)),n},decimatePoints:function(d,n){if(d.length<=2)return d;var u=this.canvas.getZoom(),l=Math.pow(n/u,2),r,o=d.length-1,i=d[0],a=[i],f;for(r=1;r<o-1;r++)f=Math.pow(i.x-d[r].x,2)+Math.pow(i.y-d[r].y,2),f>=l&&(i=d[r],a.push(i));return a.push(d[o]),a},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;if(d.closePath(),this._points.length<2){this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this._resetShadow();return}this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var n=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(n)){this.canvas.requestRenderAll();return}var u=this.createPath(n);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var n=this.addPoint(d),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,n),u.restore()},dot:function(d,n){d.fillStyle=n.fill,d.beginPath(),d.arc(n.x,n.y,n.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,n,u,l=this.points;for(this._saveAndTransform(d),n=0,u=l.length;n<u;n++)this.dot(d,l[n]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,n,u;this.canvas.renderOnAddRemove=!1;var l=[];for(n=0,u=this.points.length;n<u;n++){var r=this.points[n],o=new e.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new e.Shadow(this.shadow)),l.push(o)}var i=new e.Group(l);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var n=new e.Point(d.x,d.y),u=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return n.radius=u,n.fill=l,this.points.push(n),n}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var n=[],u=0,l=this.sprayChunks.length;u<l;u++)for(var r=this.sprayChunks[u],o=0,i=r.length;o<i;o++){var a=new e.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});n.push(a)}this.optimizeOverlapping&&(n=this._getOptimizedRects(n));var f=new e.Group(n);this.shadow&&f.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var n={},u,l,r;for(l=0,r=d.length;l<r;l++)u=d[l].left+""+d[l].top,n[u]||(n[u]=d[l]);var o=[];for(u in n)o.push(n[u]);return o},render:function(d){var n=this.canvas.contextTop,u,l;for(n.fillStyle=this.color,this._saveAndTransform(n),u=0,l=d.length;u<l;u++){var r=d[u];typeof r.opacity<"u"&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var d=this.canvas.contextTop,n,u;for(d.fillStyle=this.color,this._saveAndTransform(d),n=0,u=this.sprayChunks.length;n<u;n++)this.render(this.sprayChunks[n]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var n,u,l,r=this.width/2,o;for(o=0;o<this.density;o++){n=e.util.getRandomInt(d.x-r,d.x+r),u=e.util.getRandomInt(d.y-r,d.y+r),this.dotWidthVariance?l=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):l=this.dotWidth;var i=new e.Point(n,u);i.width=l,this.randomOpacity&&(i.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var d=20,n=5,u=e.util.createCanvasElement(),l=u.getContext("2d");return u.width=u.height=d+n,l.fillStyle=this.color,l.beginPath(),l.arc(d/2,d/2,d/2,0,Math.PI*2,!1),l.closePath(),l.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(d){return d.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(d){this.callSuper("_setBrushStyles",d),d.strokeStyle=this.getPattern(d)},createPath:function(d){var n=this.callSuper("createPath",d),u=n._getLeftTopCoords().scalarAdd(n.strokeWidth/2);return n.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),n}}),function(){var d=e.util.getPointer,n=e.util.degreesToRadians,u=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(r,o){o||(o={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,o),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r=this.getActiveObjects(),o,i,a;if(r.length>0&&!this.preserveObjectStacking){i=[],a=[];for(var f=0,s=this._objects.length;f<s;f++)o=this._objects[f],r.indexOf(o)===-1?i.push(o):a.push(o);r.length>1&&(this._activeObject._objects=a),i.push.apply(i,a)}else i=this._objects;return i},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,o){var i=r.calcTransformMatrix(),a=e.util.invertTransform(i),f=this.restorePointerVpt(o);return e.util.transformPoint(f,a)},isTargetTransparent:function(r,o,i){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var a=this._normalizePointer(r,{x:o,y:i}),f=Math.max(r.cacheTranslationX+a.x*r.zoomX,0),s=Math.max(r.cacheTranslationY+a.y*r.zoomY,0),b=e.util.isTransparent(r._cacheContext,Math.round(f),Math.round(s),this.targetFindTolerance);return b}var p=this.contextCache,v=r.selectionBackgroundColor,m=this.viewportTransform;r.selectionBackgroundColor="",this.clearContext(p),p.save(),p.transform(m[0],m[1],m[2],m[3],m[4],m[5]),r.render(p),p.restore(),r.selectionBackgroundColor=v;var b=e.util.isTransparent(p,o,i,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(r){var o=!1;return Array.isArray(this.selectionKey)?o=!!this.selectionKey.find(function(i){return r[i]===!0}):o=r[this.selectionKey],o},_shouldClearSelection:function(r,o){var i=this.getActiveObjects(),a=this._activeObject;return!o||o&&a&&i.length>1&&i.indexOf(o)===-1&&a!==o&&!this._isSelectionKeyPressed(r)||o&&!o.evented||o&&!o.selectable&&a&&a!==o},_shouldCenterTransform:function(r,o,i){if(r){var a;return o==="scale"||o==="scaleX"||o==="scaleY"||o==="resizing"?a=this.centeredScaling||r.centeredScaling:o==="rotate"&&(a=this.centeredRotation||r.centeredRotation),a?!i:i}},_getOriginFromCorner:function(r,o){var i={x:r.originX,y:r.originY};return o==="ml"||o==="tl"||o==="bl"?i.x="right":(o==="mr"||o==="tr"||o==="br")&&(i.x="left"),o==="tl"||o==="mt"||o==="tr"?i.y="bottom":(o==="bl"||o==="mb"||o==="br")&&(i.y="top"),i},_getActionFromCorner:function(r,o,i,a){if(!o||!r)return"drag";var f=a.controls[o];return f.getActionName(i,f,a)},_setupCurrentTransform:function(r,o,i){if(o){var a=this.getPointer(r),f=o.__corner,s=o.controls[f],p=i&&f?s.getActionHandler(r,o,s):e.controlsUtils.dragHandler,v=this._getActionFromCorner(i,f,r,o),m=this._getOriginFromCorner(o,f),b=r[this.centeredKey],w={target:o,action:v,actionHandler:p,corner:f,scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,offsetX:a.x-o.left,offsetY:a.y-o.top,originX:m.x,originY:m.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:n(o.angle),width:o.width*o.scaleX,shiftKey:r.shiftKey,altKey:b,original:e.util.saveObjectTransform(o)};this._shouldCenterTransform(o,v,b)&&(w.originX="center",w.originY="center"),w.original.originX=m.x,w.original.originY=m.y,this._currentTransform=w,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var o=this._groupSelector,i=new e.Point(o.ex,o.ey),a=e.util.transformPoint(i,this.viewportTransform),f=new e.Point(o.ex+o.left,o.ey+o.top),s=e.util.transformPoint(f,this.viewportTransform),p=Math.min(a.x,s.x),v=Math.min(a.y,s.y),m=Math.max(a.x,s.x),b=Math.max(a.y,s.y),w=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(p,v,m-p,b-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,p+=w,v+=w,m-=w,b-=w,e.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(p,v,m-p,b-v))},findTarget:function(r,o){if(!this.skipTargetFind){var i=!0,a=this.getPointer(r,i),f=this._activeObject,s=this.getActiveObjects(),p,v,m=u(r),b=s.length>1&&!o||s.length===1;if(this.targets=[],b&&f._findTargetCorner(a,m)||s.length>1&&!o&&f===this._searchPossibleTargets([f],a))return f;if(s.length===1&&f===this._searchPossibleTargets([f],a))if(this.preserveObjectStacking)p=f,v=this.targets,this.targets=[];else return f;var w=this._searchPossibleTargets(this._objects,a);return r[this.altSelectionKey]&&w&&p&&w!==p&&(w=p,this.targets=v),w}},_checkTarget:function(r,o,i){if(o&&o.visible&&o.evented&&o.containsPoint(r))if((this.perPixelTargetFind||o.perPixelTargetFind)&&!o.isEditing){var a=this.isTargetTransparent(o,i.x,i.y);if(!a)return!0}else return!0},_searchPossibleTargets:function(r,o){for(var i,a=r.length,f;a--;){var s=r[a],p=s.group?this._normalizePointer(s.group,o):o;if(this._checkTarget(p,s,o)){i=r[a],i.subTargetCheck&&i instanceof e.Group&&(f=this._searchPossibleTargets(i._objects,o),f&&this.targets.push(f));break}}return i},restorePointerVpt:function(r){return e.util.transformPoint(r,e.util.invertTransform(this.viewportTransform))},getPointer:function(r,o){if(this._absolutePointer&&!o)return this._absolutePointer;if(this._pointer&&o)return this._pointer;var i=d(r),a=this.upperCanvasEl,f=a.getBoundingClientRect(),s=f.width||0,p=f.height||0,v;(!s||!p)&&("top"in f&&"bottom"in f&&(p=Math.abs(f.top-f.bottom)),"right"in f&&"left"in f&&(s=Math.abs(f.right-f.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,o||(i=this.restorePointerVpt(i));var m=this.getRetinaScaling();return m!==1&&(i.x/=m,i.y/=m),s===0||p===0?v={width:1,height:1}:v={width:a.width/s,height:a.height/p},{x:i.x*v.width,y:i.y*v.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),o=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),e.util.addClass(i,"upper-canvas "+r),this.wrapperEl.appendChild(i),this._copyCanvasStyle(o,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var o=this.width||r.width,i=this.height||r.height;e.util.setStyle(r,{position:"absolute",width:o+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=o,r.height=i,e.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,o){o.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,o){var i=!1,a=this.getActiveObjects(),f=[],s=[];r.forEach(function(p){a.indexOf(p)===-1&&(i=!0,p.fire("deselected",{e:o,target:p}),s.push(p))}),a.forEach(function(p){r.indexOf(p)===-1&&(i=!0,p.fire("selected",{e:o,target:p}),f.push(p))}),r.length>0&&a.length>0?i&&this.fire("selection:updated",{e:o,selected:f,deselected:s}):a.length>0?this.fire("selection:created",{e:o,selected:f}):r.length>0&&this.fire("selection:cleared",{e:o,deselected:s})},setActiveObject:function(r,o){var i=this.getActiveObjects();return this._setActiveObject(r,o),this._fireSelectionEvents(i,o),this},_setActiveObject:function(r,o){return this._activeObject===r||!this._discardActiveObject(o,r)||r.onSelect({e:o})?!1:(this._activeObject=r,!0)},_discardActiveObject:function(r,o){var i=this._activeObject;if(i){if(i.onDeselect({e:r,object:o}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var o=this.getActiveObjects(),i=this.getActiveObject();return o.length&&this.fire("before:selection:cleared",{target:i,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(o,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.upperCanvasEl.width=0,this.upperCanvasEl.height=0,this.cacheCanvasEl&&(this.cacheCanvasEl.width=0,this.cacheCanvasEl.height=0),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(o){e.util.cleanUpJsdomNode(this[o]),this[o]=void 0}).bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var o=this._activeObject;o&&o._renderControls(r)},_toObject:function(r,o,i){var a=this._realizeGroupTransformOnObject(r),f=this.callSuper("_toObject",r,o,i);return this._unwindGroupTransformOnObject(r,a),f},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var o=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return o.forEach(function(a){i[a]=r[a]}),e.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),i}else return null},_unwindGroupTransformOnObject:function(r,o){o&&r.set(o)},_setSVGObject:function(r,o,i){var a=this._realizeGroupTransformOnObject(o);this.callSuper("_setSVGObject",r,o,i),this._unwindGroupTransformOnObject(o,a)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,r)}});for(var l in e.StaticCanvas)l!=="prototype"&&(e.Canvas[l]=e.StaticCanvas[l])}(),function(){var d=e.util.addListener,n=e.util.removeListener,u=3,l=2,r=1,o={passive:!1};function i(a,f){return a.button&&a.button===f-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,f){var s=this.upperCanvasEl,p=this._getEventPrefix();a(e.window,"resize",this._onResize),a(s,p+"down",this._onMouseDown),a(s,p+"move",this._onMouseMove,o),a(s,p+"out",this._onMouseOut),a(s,p+"enter",this._onMouseEnter),a(s,"wheel",this._onMouseWheel),a(s,"contextmenu",this._onContextMenu),a(s,"dblclick",this._onDoubleClick),a(s,"dragover",this._onDragOver),a(s,"dragenter",this._onDragEnter),a(s,"dragleave",this._onDragLeave),a(s,"drop",this._onDrop),this.enablePointerEvents||a(s,"touchstart",this._onTouchStart,o),typeof g<"u"&&f in g&&(g[f](s,"gesture",this._onGesture),g[f](s,"drag",this._onDrag),g[f](s,"orientation",this._onOrientationChange),g[f](s,"shake",this._onShake),g[f](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove");var a=this._getEventPrefix();n(e.document,a+"up",this._onMouseUp),n(e.document,"touchend",this._onTouchEnd,o),n(e.document,a+"move",this._onMouseMove,o),n(e.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(a,f){this.__onTransformGesture&&this.__onTransformGesture(a,f)},_onDrag:function(a,f){this.__onDrag&&this.__onDrag(a,f)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var f=this._hoveredTarget;this.fire("mouse:out",{target:f,e:a}),this._hoveredTarget=null,f&&f.fire("mouseout",{e:a});var s=this;this._hoveredTargets.forEach(function(p){s.fire("mouse:out",{target:f,e:a}),p&&f.fire("mouseout",{e:a})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(p){p.isEditing&&p.hiddenTextarea.focus()})},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,f){this.__onOrientationChange&&this.__onOrientationChange(a,f)},_onShake:function(a,f){this.__onShake&&this.__onShake(a,f)},_onLongPress:function(a,f){this.__onLongPress&&this.__onLongPress(a,f)},_onDragOver:function(a){a.preventDefault();var f=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(f,a)},_onDrop:function(a){return this._simpleEventHandler("drop:before",a),this._simpleEventHandler("drop",a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var f=a.changedTouches;return f?f[0]&&f[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0?!0:a.isPrimary===!1?!1:a.type==="touchend"&&a.touches.length===0?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var f=this.upperCanvasEl,s=this._getEventPrefix();d(e.document,"touchend",this._onTouchEnd,o),d(e.document,"touchmove",this._onMouseMove,o),n(f,s+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var f=this.upperCanvasEl,s=this._getEventPrefix();n(f,s+"move",this._onMouseMove,o),d(e.document,s+"up",this._onMouseUp),d(e.document,s+"move",this._onMouseMove,o)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var f=this._getEventPrefix();n(e.document,"touchend",this._onTouchEnd,o),n(e.document,"touchmove",this._onMouseMove,o);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(s.upperCanvasEl,f+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var f=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(a)&&(n(e.document,s+"up",this._onMouseUp),n(e.document,s+"move",this._onMouseMove,o),d(f,s+"move",this._onMouseMove,o))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var f=this._activeObject;return!!f!=!!a||f&&a&&f!==a?!0:(f&&f.isEditing,!1)},__onMouseUp:function(a){var f,s=this._currentTransform,p=this._groupSelector,v=!1,m=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(a),f=this._target,this._handleEvent(a,"up:before"),i(a,u)){this.fireRightClick&&this._handleEvent(a,"up",u,m);return}if(i(a,l)){this.fireMiddleClick&&this._handleEvent(a,"up",l,m),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(a);return}if(this._isMainEvent(a)){if(s&&(this._finalizeCurrentTransform(a),v=s.actionPerformed),!m){var b=f===this._activeObject;this._maybeGroupObjects(a),v||(v=this._shouldRender(f)||!b&&f===this._activeObject)}var w,E;if(f){if(w=f._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a)),f.selectable&&f!==this._activeObject&&f.activeOn==="up")this.setActiveObject(f,a),v=!0;else{var A=f.controls[w],O=A&&A.getMouseUpHandler(a,f,A);O&&(E=this.getPointer(a),O(a,s,E.x,E.y))}f.isMoving=!1}if(s&&(s.target!==f||s.corner!==w)){var L=s.target&&s.target.controls[s.corner],Y=L&&L.getMouseUpHandler(a,f,A);E=E||this.getPointer(a),Y&&Y(a,s,E.x,E.y)}this._setCursorFromEvent(a,f),this._handleEvent(a,"up",r,m),this._groupSelector=null,this._currentTransform=null,f&&(f.__corner=0),v?this.requestRenderAll():m||this.renderTop()}},_simpleEventHandler:function(a,f){var s=this.findTarget(f),p=this.targets,v={e:f,target:s,subTargets:p};if(this.fire(a,v),s&&s.fire(a,v),!p)return s;for(var m=0;m<p.length;m++)p[m].fire(a,v);return s},_handleEvent:function(a,f,s,p){var v=this._target,m=this.targets||[],b={e:a,target:v,subTargets:m,button:s||r,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};f==="up"&&(b.currentTarget=this.findTarget(a),b.currentSubTargets=this.targets),this.fire("mouse:"+f,b),v&&v.fire("mouse"+f,b);for(var w=0;w<m.length;w++)m[w].fire("mouse"+f,b)},_finalizeCurrentTransform:function(a){var f=this._currentTransform,s=f.target,p={e:a,target:s,transform:f,action:f.action};s._scaling&&(s._scaling=!1),s.setCoords(),(f.actionPerformed||this.stateful&&s.hasStateChanged())&&this._fire("modified",p)},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var f=this.getPointer(a);this.freeDrawingBrush.onMouseDown(f,{e:a,pointer:f}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var f=this.getPointer(a);this.freeDrawingBrush.onMouseMove(f,{e:a,pointer:f})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var f=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:f}),this._handleEvent(a,"up")},_finishDrawing:function(){this.freeDrawingBrush.finish(),this._isCurrentlyDrawing=!1},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var f=this._target;if(i(a,u)){this.fireRightClick&&this._handleEvent(a,"down",u);return}if(i(a,l)){this.fireMiddleClick&&this._handleEvent(a,"down",l);return}if(this.isDrawingMode)if(!this.usePencil||this._isStylus(a)){if(a.type==="touchstart"&&a.touches.length>1){this._isCurrentlyDrawing&&this._finishDrawing(a),this._handleEvent(a,"down");return}this._onMouseDownInDrawingMode(a);return}else{this._handleEvent(a,"down");return}if(this._isMainEvent(a)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var p=this._shouldRender(f),v=this._shouldGroup(a,f);if(this._shouldClearSelection(a,f)?this.discardActiveObject(a):v&&(this._handleGrouping(a,f),f=this._activeObject),this.selection&&(!f||!f.selectable&&!f.isEditing&&f!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),f){var m=f===this._activeObject;f.selectable&&f.activeOn==="down"&&this.setActiveObject(f,a);var b=f._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a));if(f.__corner=b,f===this._activeObject&&(b||!v)){this._setupCurrentTransform(a,f,m);var w=f.controls[b],s=this.getPointer(a),E=w&&w.getMouseDownHandler(a,f,w);E&&E(a,this._currentTransform,s.x,s.y)}}this._handleEvent(a,"down"),(p||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var f=this._currentTransform;this.stateful&&f.target.saveState(),this.fire("before:transform",{e:a,transform:f})},_isStylus:function(a){if(!a.changedTouches)return!1;for(var f=0;f<a.changedTouches.length;f++){var s=a.changedTouches[f];if(s.touchType&&s.touchType==="stylus"||s.radiusX===0)return!0}return!1},__onMouseMove:function(a){this._handleEvent(a,"move:before"),this._cacheTransformEventData(a);var f,s;if(this.isDrawingMode)if(!this.usePencil||this._isStylus(a)){this._onMouseMoveInDrawingMode(a);return}else return;if(this._isMainEvent(a)){var p=this._groupSelector;p?(s=this._absolutePointer,p.left=s.x-p.ex,p.top=s.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(f=this.findTarget(a)||null,this._setCursorFromEvent(a,f),this._fireOverOutEvents(f,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,f){var s=this._hoveredTarget,p=this._hoveredTargets,v=this.targets,m=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(a,f,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<m;b++)this.fireSyntheticInOutEvents(v[b],f,{oldTarget:p[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,f){var s=this._draggedoverTarget,p=this._hoveredTargets,v=this.targets,m=Math.max(p.length,v.length);this.fireSyntheticInOutEvents(a,f,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<m;b++)this.fireSyntheticInOutEvents(v[b],f,{oldTarget:p[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,f,s){var p,v,m=s.oldTarget,b,w,E=m!==a,A=s.canvasEvtIn,O=s.canvasEvtOut;E&&(p={e:f,target:a,previousTarget:m},v={e:f,target:m,nextTarget:a}),w=a&&E,b=m&&E,b&&(O&&this.fire(O,v),m.fire(s.evtOut,v)),w&&(A&&this.fire(A,p),a.fire(s.evtIn,p))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var f=this.getPointer(a),s=this._currentTransform;s.reset=!1,s.shiftKey=a.shiftKey,s.altKey=a[this.centeredKey],this._performTransformAction(a,s,f),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,f,s){var p=s.x,v=s.y,m=f.action,b=!1,w=f.actionHandler;w&&(b=w(a,f,p,v)),m==="drag"&&b&&(f.target.isMoving=!0,this.setCursor(f.target.moveCursor||this.moveCursor)),f.actionPerformed=f.actionPerformed||b},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(a,f){if(!f)return this.setCursor(this.defaultCursor),!1;var s=f.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!p||!p.contains(f))&&f._findTargetCorner(this.getPointer(a,!0));v?this.setCursor(this.getCornerCursor(v,f,a)):(f.subTargetCheck&&this.targets.concat().reverse().map(function(m){s=m.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(a,f,s){var p=f.controls[a];return p.cursorStyleHandler(s,p,f)}})}(),function(){var d=Math.min,n=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(u,l){var r=this._activeObject;return r&&this._isSelectionKeyPressed(u)&&l&&l.selectable&&this.selection&&(r!==l||r.type==="activeSelection")&&!l.onSelect({e:u})},_handleGrouping:function(u,l){var r=this._activeObject;r.__corner||l===r&&(l=this.findTarget(u,!0),!l||!l.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(l,u):this._createActiveSelection(l,u))},_updateActiveSelection:function(u,l){var r=this._activeObject,o=r._objects.slice(0);r.contains(u)?(r.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),l)):(r.addWithUpdate(u),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,l)},_createActiveSelection:function(u,l){var r=this.getActiveObjects(),o=this._createGroup(u);this._hoveredTarget=o,this._setActiveObject(o,l),this._fireSelectionEvents(r,l)},_createGroup:function(u){var l=this._objects,r=l.indexOf(this._activeObject)<l.indexOf(u),o=r?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(u){var l=this._collectObjects(u),r;l.length===1?this.setActiveObject(l[0],u):l.length>1&&(r=new e.ActiveSelection(l.reverse(),{canvas:this}),this.setActiveObject(r,u))},_collectObjects:function(u){for(var l=[],r,o=this._groupSelector.ex,i=this._groupSelector.ey,a=o+this._groupSelector.left,f=i+this._groupSelector.top,s=new e.Point(d(o,a),d(i,f)),p=new e.Point(n(o,a),n(i,f)),v=!this.selectionFullyContained,m=o===a&&i===f,b=this._objects.length;b--&&(r=this._objects[b],!(!(!r||!r.selectable||!r.visible)&&(v&&r.intersectsWithRect(s,p,!0)||r.isContainedWithinRect(s,p,!0)||v&&r.containsPoint(s,null,!0)||v&&r.containsPoint(p,null,!0))&&(l.push(r),m))););return l.length>1&&(l=l.filter(function(w){return!w.onSelect({e:u})})),l},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var n=d.format||"png",u=d.quality||1,l=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(l,d),o=e.util.toDataURL(r,n,u);return r.width=0,r.height=0,o},toBlob:function(d,n){n||(n={});var u=(n.multiplier||1)*(n.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(u,n);l.toBlob(function(r){d(r),l.width=0,l.height=0})},toCanvasElement:function(d,n){d=d||1,n=n||{};var u=(n.width||this.width)*d,l=(n.height||this.height)*d,r=this.getZoom(),o=this.width,i=this.height,a=r*d,f=this.viewportTransform,s=(f[4]-(n.left||0))*d,p=(f[5]-(n.top||0))*d,v=this.interactive,m=[a,0,0,a,s,p],b=this.enableRetinaScaling,w=e.util.createCanvasElement(),E=this.contextTop;return w.width=u,w.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=m,this.width=u,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),this._objects),this.viewportTransform=f,this.width=o,this.height=i,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=b,this.contextTop=E,w}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(d,n,u){if(d){var l=typeof d=="string"?JSON.parse(d):e.util.object.clone(d),r=this,o=l.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(a){r.clear(),r._setBgOverlay(l,function(){o?r._enlivenObjects([o],function(f){r.clipPath=f[0],r.__setupCanvas.call(r,l,a,i,n)}):r.__setupCanvas.call(r,l,a,i,n)})},u),this}},__setupCanvas:function(d,n,u,l){var r=this;n.forEach(function(o,i){r.insertAt(o,i)}),this.renderOnAddRemove=u,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),l&&l()},_setBgOverlay:function(d,n){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){n&&n();return}var l=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&n&&n()};this.__setBgOverlay("backgroundImage",d.backgroundImage,u,l),this.__setBgOverlay("overlayImage",d.overlayImage,u,l),this.__setBgOverlay("backgroundColor",d.background,u,l),this.__setBgOverlay("overlayColor",d.overlay,u,l)},__setBgOverlay:function(d,n,u,l){var r=this;if(!n){u[d]=!0,l&&l();return}d==="backgroundImage"||d==="overlayImage"?e.util.enlivenObjects([n],function(o){r[d]=o[0],u[d]=!0,l&&l()}):this["set"+e.util.string.capitalize(d,!0)](n,function(){u[d]=!0,l&&l()})},_enlivenObjects:function(d,n,u){if(!d||d.length===0){n&&n([]);return}e.util.enlivenObjects(d,function(l){n&&n(l)},null,u)},_toDataURL:function(d,n){this.clone(function(u){n(u.toDataURL(d))})},_toDataURLWithMultiplier:function(d,n,u){this.clone(function(l){u(l.toDataURLWithMultiplier(d,n))})},clone:function(d,n){var u=JSON.stringify(this.toJSON(n));this.cloneWithoutData(function(l){l.loadFromJSON(u,function(){d&&d(l)})})},cloneWithoutData:function(d){var n=e.util.createCanvasElement();n.width=this.width,n.height=this.height;var u=new e.Canvas(n);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),d&&d(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):d&&d(u)}}),function(){var d=e.util.degreesToRadians,n=e.util.radiansToDegrees;e.util.object.extend(e.Canvas.prototype,{__onTransformGesture:function(u,l){if(!(!u.touches||u.touches.length!==2||l.gesture!=="gesture")){var r=this.findTarget(u);typeof r<"u"&&(this.__gesturesParams={e:u,self:l,target:r},this.__gesturesRenderer()),this.fire("touch:gesture",{target:r,e:u,self:l})}},__gesturesParams:null,__gesturesRenderer:function(){if(!(this.__gesturesParams===null||this._currentTransform===null)){var u=this.__gesturesParams.self,l=this._currentTransform,r=this.__gesturesParams.e;l.action="scale",l.originX=l.originY="center",this._scaleObjectBy(u.scale,r),u.rotation!==0&&(l.action="rotate",this._rotateObjectByAngle(u.rotation,r)),this.requestRenderAll(),l.action="drag"}},__onDrag:function(u,l){this.fire("touch:drag",{e:u,self:l})},__onOrientationChange:function(u,l){this.fire("touch:orientation",{e:u,self:l})},__onShake:function(u,l){this.fire("touch:shake",{e:u,self:l})},__onLongPress:function(u,l){this.fire("touch:longpress",{e:u,self:l})},_scaleObjectBy:function(u,l){var r=this._currentTransform,o=r.target;return r.gestureScale=u,o._scaling=!0,e.controlsUtils.scalingEqually(l,r,0,0)},_rotateObjectByAngle:function(u,l){var r=this._currentTransform;r.target.get("lockRotation")||(r.target.rotate(n(d(u)+r.theta)),this._fire("rotating",{target:r.target,e:l,transform:r}))}})}(),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.util.object.clone,r=n.util.toFixed,o=n.util.string.capitalize,i=n.util.degreesToRadians,a=!n.isLikelyNode,f=2;n.Object||(n.Object=n.util.createClass(n.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=n.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var p=n.perfLimitSizeTotal,v=s.width,m=s.height,b=n.maxCacheSideLimit,w=n.minCacheSideLimit;if(v<=b&&m<=b&&v*m<=p)return v<w&&(s.width=w),m<w&&(s.height=w),s;var E=v/m,A=n.util.limitDimsByArea(E,p),O=n.util.capValue,L=O(w,A.x,b),Y=O(w,A.y,b);return v>L&&(s.zoomX/=v/L,s.width=L,s.capped=!0),m>Y&&(s.zoomY/=m/Y,s.height=Y,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),p=this._getTransformedDimensions(0,0),v=p.x*s.scaleX/this.scaleX,m=p.y*s.scaleY/this.scaleY;return{width:v+f,height:m+f,zoomX:s.scaleX,zoomY:s.scaleY,x:v,y:m}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var p=s._currentTransform.target,v=s._currentTransform.action;if(this===p&&v.slice&&v.slice(0,5)==="scale")return!1}var m=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),w=n.minCacheSideLimit,E=b.width,A=b.height,O,L,Y=b.zoomX,V=b.zoomY,Q=E!==this.cacheWidth||A!==this.cacheHeight,J=this.zoomX!==Y||this.zoomY!==V,Z=Q||J,re=0,ie=0,ue=!1;if(Q){var X=this._cacheCanvas.width,S=this._cacheCanvas.height,k=E>X||A>S,M=(E<X*.9||A<S*.9)&&X>w&&S>w;ue=k||M,k&&!b.capped&&(E>w||A>w)&&(re=E*.1,ie=A*.1)}return this instanceof n.Text&&this.path&&(Z=!0,ue=!0,re+=this.getHeightOfLine(0)*this.zoomX,ie+=this.getHeightOfLine(0)*this.zoomY),Z?(ue?(m.width=Math.ceil(E+re),m.height=Math.ceil(A+ie)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,m.width,m.height)),O=b.x/2,L=b.y/2,this.cacheTranslationX=Math.round(m.width/2-O)+O,this.cacheTranslationY=Math.round(m.height/2-L)+L,this.cacheWidth=E,this.cacheHeight=A,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Y,V),this.zoomX=Y,this.zoomY=V,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var p=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,v=this.calcTransformMatrix(!p);s.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(s){var p=n.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:n.version,originX:this.originX,originY:this.originY,left:r(this.left,p),top:r(this.top,p),width:r(this.width,p),height:r(this.height,p),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,p),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,p),scaleX:r(this.scaleX,p),scaleY:r(this.scaleY,p),angle:r(this.angle,p),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,p),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,p),skewY:r(this.skewY,p)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(s),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),n.util.populateWithProperties(this,v,s),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var p=n.util.getKlass(s.type).prototype,v=p.stateProperties;return v.forEach(function(m){m==="left"||m==="top"||(s[m]===p[m]&&delete s[m],Array.isArray(s[m])&&Array.isArray(p[m])&&s[m].length===0&&p[m].length===0&&delete s[m])}),s},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=n.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),p=s.scaleX,v=s.scaleY;if(this.canvas){var m=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();p*=m*b,v*=m*b}return{scaleX:p,scaleY:v}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,p){var v=s==="scaleX"||s==="scaleY",m=this[s]!==p,b=!1;return v&&(p=this._constrainScale(p)),s==="scaleX"&&p<0?(this.flipX=!this.flipX,p*=-1):s==="scaleY"&&p<0?(this.flipY=!this.flipY,p*=-1):s==="shadow"&&p&&!(p instanceof n.Shadow)?p=new n.Shadow(p):s==="dirty"&&this.group&&this.group.set("dirty",p),this[s]=p,m&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:n.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s,p){if(s.save(),p.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",p.absolutePositioned){var v=n.util.invertTransform(this.calcTransformMatrix());s.transform(v[0],v[1],v[2],v[3],v[4],v[5])}p.transform(s),s.scale(1/p.zoomX,1/p.zoomY),s.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),s.restore()},drawObject:function(s,p){var v=this.fill,m=this.stroke;p?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s,this.clipPath),this.fill=v,this.stroke=m},_drawClipPath:function(s,p){p&&(p.canvas=this.canvas,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCache(s,p))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!s){var p=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-v/2,p,v)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var p=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-p.x/2,-p.y/2,p.x,p.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,p){var v=p.stroke;v&&(s.lineWidth=p.strokeWidth,s.lineCap=p.strokeLineCap,s.lineDashOffset=p.strokeDashOffset,s.lineJoin=p.strokeLineJoin,s.miterLimit=p.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(s,v):(s.strokeStyle=v.toLive(s,this),this._applyPatternGradientTransform(s,v)):s.strokeStyle=p.stroke)},_setFillStyles:function(s,p){var v=p.fill;v&&(v.toLive?(s.fillStyle=v.toLive(s,this),this._applyPatternGradientTransform(s,p.fill)):s.fillStyle=v)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,p){!p||p.length===0||(1&p.length&&p.push.apply(p,p),s.setLineDash(p))},_renderControls:function(s,p){var v=this.getViewportTransform(),m=this.calcTransformMatrix(),b,w,E;p=p||{},w=typeof p.hasBorders<"u"?p.hasBorders:this.hasBorders,E=typeof p.hasControls<"u"?p.hasControls:this.hasControls,m=n.util.multiplyTransformMatrices(v,m),b=n.util.qrDecompose(m),s.save(),s.translate(b.translateX,b.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),s.rotate(i(this.group?b.angle:this.angle)),p.forActiveSelection||this.group?w&&this.drawBordersInGroup(s,b,p):w&&this.drawBorders(s,p),E&&this.drawControls(s,p),s.restore()},_setShadow:function(s){if(this.shadow){var p=this.shadow,v=this.canvas,m,b=v&&v.viewportTransform[0]||1,w=v&&v.viewportTransform[3]||1;p.nonScaling?m={scaleX:1,scaleY:1}:m=this.getObjectScaling(),v&&v._isRetinaScaling()&&(b*=n.devicePixelRatio,w*=n.devicePixelRatio),s.shadowColor=p.color,s.shadowBlur=p.blur*n.browserShadowBlurConstant*(b+w)*(m.scaleX+m.scaleY)/4,s.shadowOffsetX=p.offsetX*b*m.scaleX,s.shadowOffsetY=p.offsetY*w*m.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,p){if(!p||!p.toLive)return{offsetX:0,offsetY:0};var v=p.gradientTransform||p.patternTransform,m=-this.width/2+p.offsetX||0,b=-this.height/2+p.offsetY||0;return p.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,m,b):s.transform(1,0,0,1,m,b),v&&s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:m,offsetY:b}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var p=this.getObjectScaling();s.scale(1/p.scaleX,1/p.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,p){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),m=n.util.createCanvasElement(),b,w=this.canvas.getRetinaScaling(),E=v.x/this.scaleX/w,A=v.y/this.scaleY/w;m.width=E,m.height=A,b=m.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(E,0),b.lineTo(E,A),b.lineTo(0,A),b.closePath(),b.translate(E/2,A/2),b.scale(v.zoomX/this.scaleX/w,v.zoomY/this.scaleY/w),this._applyPatternGradientTransform(b,p),b.fillStyle=p.toLive(s),b.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(w*this.scaleX/v.zoomX,w*this.scaleY/v.zoomY),s.strokeStyle=b.createPattern(m,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=n.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var p=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),p=n.util.transformPoint(p,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,p.x+=s.offsetLeft,p.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(p,"center","center")},clone:function(s,p){var v=this.toObject(p);this.constructor.fromObject?this.constructor.fromObject(v,s):n.Object._fromObject("Object",v,s)},cloneAsImage:function(s,p){var v=this.toCanvasElement(p);return s&&s(new n.Image(v)),this},toCanvasElement:function(s){s||(s={});var p=n.util,v=p.saveObjectTransform(this),m=this.group,b=this.shadow,w=Math.abs,E=(s.multiplier||1)*(s.enableRetinaScaling?n.devicePixelRatio:1);delete this.group,s.withoutTransform&&p.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var A=n.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),L=this.shadow,Y,V={x:0,y:0},Q,J,Z;L&&(Q=L.blur,L.nonScaling?Y={scaleX:1,scaleY:1}:Y=this.getObjectScaling(),V.x=2*Math.round(w(L.offsetX)+Q)*w(Y.scaleX),V.y=2*Math.round(w(L.offsetY)+Q)*w(Y.scaleY)),J=O.width+V.x,Z=O.height+V.y,A.width=Math.ceil(J),A.height=Math.ceil(Z);var re=new n.StaticCanvas(A,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(re.backgroundColor="#fff"),this.setPositionByOrigin(new n.Point(re.width/2,re.height/2),"center","center");var ie=this.canvas;re.add(this);var ue=re.toCanvasElement(E||1,s);return this.shadow=b,this.set("canvas",ie),m&&(this.group=m),this.set(v).setCoords(),re._objects=[],re.dispose(),re=null,ue},toDataURL:function(s){return s||(s={}),n.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var p=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return p&&this._setOriginToCenter(),this.set("angle",s),p&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,p){p=p||this.canvas.getPointer(s);var v=new n.Point(p.x,p.y),m=this._getLeftTopCoords();return this.angle&&(v=n.util.rotatePoint(v,m,i(-this.angle))),{x:v.x-m.x,y:v.y-m.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){n.runningAnimations&&n.runningAnimations.cancelByTarget(this)}}),n.util.createAccessors&&n.util.createAccessors(n.Object),u(n.Object.prototype,n.Observable),n.Object.NUM_FRACTION_DIGITS=2,n.Object.ENLIVEN_PROPS=["clipPath"],n.Object._fromObject=function(s,p,v,m){var b=n[s];p=l(p,!0),n.util.enlivenPatterns([p.fill,p.stroke],function(w){typeof w[0]<"u"&&(p.fill=w[0]),typeof w[1]<"u"&&(p.stroke=w[1]),n.util.enlivenObjectEnlivables(p,p,function(){var E=m?new b(p[m],p):new b(p);v&&v(E)})})},n.Object.__uid=0)}(t),function(){var d=e.util.degreesToRadians,n={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(l,r,o,i,a){var f=l.x,s=l.y,p,v,m;return typeof r=="string"?r=n[r]:r-=.5,typeof i=="string"?i=n[i]:i-=.5,p=i-r,typeof o=="string"?o=u[o]:o-=.5,typeof a=="string"?a=u[a]:a-=.5,v=a-o,(p||v)&&(m=this._getTransformedDimensions(),f=l.x+p*m.x,s=l.y+v*m.y),new e.Point(f,s)},translateToCenterPoint:function(l,r,o){var i=this.translateToGivenOrigin(l,r,o,"center","center");return this.angle?e.util.rotatePoint(i,l,d(this.angle)):i},translateToOriginPoint:function(l,r,o){var i=this.translateToGivenOrigin(l,"center","center",r,o);return this.angle?e.util.rotatePoint(i,l,d(this.angle)):i},getCenterPoint:function(){var l=new e.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,r){var o=this.getCenterPoint();return this.translateToOriginPoint(o,l,r)},toLocalPoint:function(l,r,o){var i=this.getCenterPoint(),a,f;return typeof r<"u"&&typeof o<"u"?a=this.translateToGivenOrigin(i,"center","center",r,o):a=new e.Point(this.left,this.top),f=new e.Point(l.x,l.y),this.angle&&(f=e.util.rotatePoint(f,i,-d(this.angle))),f.subtractEquals(a)},setPositionByOrigin:function(l,r,o){var i=this.translateToCenterPoint(l,r,o),a=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(l){var r=d(this.angle),o=this.getScaledWidth(),i=e.util.cos(r)*o,a=e.util.sin(r)*o,f,s;typeof this.originX=="string"?f=n[this.originX]:f=this.originX-.5,typeof l=="string"?s=n[l]:s=l-.5,this.left+=i*(s-f),this.top+=a*(s-f),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(o){return[new e.Point(o.tl.x,o.tl.y),new e.Point(o.tr.x,o.tr.y),new e.Point(o.br.x,o.br.y),new e.Point(o.bl.x,o.bl.y)]}var n=e.util,u=n.degreesToRadians,l=n.multiplyTransformMatrices,r=n.transformPoint;n.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,i){return i?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,i){return d(this._getCoords(o,i))},intersectsWithRect:function(o,i,a,f){var s=this.getCoords(a,f),p=e.Intersection.intersectPolygonRectangle(s,o,i);return p.status==="Intersection"},intersectsWithObject:function(o,i,a){var f=e.Intersection.intersectPolygonPolygon(this.getCoords(i,a),o.getCoords(i,a));return f.status==="Intersection"||o.isContainedWithinObject(this,i,a)||this.isContainedWithinObject(o,i,a)},isContainedWithinObject:function(o,i,a){for(var f=this.getCoords(i,a),s=i?o.aCoords:o.lineCoords,p=0,v=o._getImageLines(s);p<4;p++)if(!o.containsPoint(f[p],v))return!1;return!0},isContainedWithinRect:function(o,i,a,f){var s=this.getBoundingRect(a,f);return s.left>=o.x&&s.left+s.width<=i.x&&s.top>=o.y&&s.top+s.height<=i.y},containsPoint:function(o,p,a,f){var s=this._getCoords(a,f),p=p||this._getImageLines(s),v=this._findCrossPoints(o,p);return v!==0&&v%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,f=this.getCoords(!0,o);return f.some(function(s){return s.x<=a.x&&s.x>=i.x&&s.y<=a.y&&s.y>=i.y})||this.intersectsWithRect(i,a,!0,o)?!0:this._containsCenterOfCanvas(i,a,o)},_containsCenterOfCanvas:function(o,i,a){var f={x:(o.x+i.x)/2,y:(o.y+i.y)/2};return!!this.containsPoint(f,null,!0,a)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;if(this.intersectsWithRect(i,a,!0,o))return!0;var f=this.getCoords(!0,o).every(function(s){return(s.x>=a.x||s.x<=i.x)&&(s.y>=a.y||s.y<=i.y)});return f&&this._containsCenterOfCanvas(i,a,o)},_getImageLines:function(o){var i={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return i},_findCrossPoints:function(o,i){var a,f,s,p,v,m=0,b;for(var w in i)if(b=i[w],!(b.o.y<o.y&&b.d.y<o.y)&&!(b.o.y>=o.y&&b.d.y>=o.y)&&(b.o.x===b.d.x&&b.o.x>=o.x?v=b.o.x:(a=0,f=(b.d.y-b.o.y)/(b.d.x-b.o.x),s=o.y-a*o.x,p=b.o.y-f*b.o.x,v=-(s-p)/(a-f)),v>=o.x&&(m+=1),m===2))break;return m},getBoundingRect:function(o,i){var a=this.getCoords(o,i);return n.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,i){var a=this.getBoundingRect(i).width/this.getScaledWidth();return this.scale(o/this.width/a)},scaleToHeight:function(o,i){var a=this.getBoundingRect(i).height/this.getScaledHeight();return this.scale(o/this.height/a)},calcLineCoords:function(){var o=this.getViewportTransform(),i=this.padding,a=u(this.angle),f=n.cos(a),s=n.sin(a),p=f*i,v=s*i,m=p+v,b=p-v,w=this.calcACoords(),E={tl:r(w.tl,o),tr:r(w.tr,o),bl:r(w.bl,o),br:r(w.br,o)};return i&&(E.tl.x-=b,E.tl.y-=m,E.tr.x+=m,E.tr.y-=b,E.bl.x-=m,E.bl.y+=b,E.br.x+=b,E.br.y+=m),E},calcOCoords:function(){var o=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),a=this.getViewportTransform(),f=l(a,i),s=l(f,o),s=l(s,[1/a[0],0,0,1/a[3],0,0]),p=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(m,b,w){v[b]=m.positionHandler(p,s,w)}),v},calcACoords:function(){var o=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),a=l(i,o),f=this._getTransformedDimensions(),s=f.x/2,p=f.y/2;return{tl:r({x:-s,y:-p},a),tr:r({x:s,y:-p},a),bl:r({x:-s,y:p},a),br:r({x:s,y:p},a)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return n.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var i="_",a="";return!o&&this.group&&(a=this.group.transformMatrixKey(o)+i),a+this.top+i+this.left+i+this.scaleX+i+this.scaleY+i+this.skewX+i+this.skewY+i+this.angle+i+this.originX+i+this.originY+i+this.width+i+this.height+i+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var i=this.calcOwnMatrix();if(o||!this.group)return i;var a=this.transformMatrixKey(o),f=this.matrixCache||(this.matrixCache={});return f.key===a?f.value:(this.group&&(i=l(this.group.calcTransformMatrix(!1),i)),f.key=a,f.value=i,i)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===o)return i.value;var a=this._calcTranslateMatrix(),f={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=o,i.value=n.composeMatrix(f),i.value},_getNonTransformedDimensions:function(){var o=this.strokeWidth,i=this.width+o,a=this.height+o;return{x:i,y:a}},_getTransformedDimensions:function(o,i){typeof o>"u"&&(o=this.skewX),typeof i>"u"&&(i=this.skewY);var a,f,s,p=o===0&&i===0;if(this.strokeUniform?(f=this.width,s=this.height):(a=this._getNonTransformedDimensions(),f=a.x,s=a.y),p)return this._finalizeDimensions(f*this.scaleX,s*this.scaleY);var v=n.sizeAfterTransform(f,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:i});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(o,i){return this.strokeUniform?{x:o+this.strokeWidth,y:i+this.strokeWidth}:{x:o,y:i}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),i=this._getTransformedDimensions(),a=r(i,o,!0);return a.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(u,l){if(l){if(l.toLive)return u+": url(#SVGID_"+l.id+"); ";var r=new e.Color(l),o=u+": "+r.toRgb()+"; ",i=r.getAlpha();return i!==1&&(o+=u+"-opacity: "+i.toString()+"; "),o}else return u+": none; "}var n=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(u){var l=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",f=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",p=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",m=u?"":this.getSvgFilter(),b=d("fill",this.fill),w=d("stroke",this.stroke);return[w,"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",f,"; ","stroke-miterlimit: ",s,"; ",b,"fill-rule: ",l,"; ","opacity: ",p,";",m,v].join("")},getSvgSpanStyles:function(u,l){var r="; ",i=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+r:"",o=u.strokeWidth?"stroke-width: "+u.strokeWidth+r:"",i=i,a=u.fontSize?"font-size: "+u.fontSize+"px"+r:"",f=u.fontStyle?"font-style: "+u.fontStyle+r:"",s=u.fontWeight?"font-weight: "+u.fontWeight+r:"",p=u.fill?d("fill",u.fill):"",v=u.stroke?d("stroke",u.stroke):"",m=this.getSvgTextDecoration(u),b=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return m&&(m="text-decoration: "+m+r),[v,o,i,a,f,s,m,p,b,l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(l){return u[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,l){var r=u?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+e.util.matrixToSVG(r);return o+(l||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var l=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',n(-this.width/2,l),'" y="',n(-this.height/2,l),'" width="',n(this.width,l),'" height="',n(this.height,l),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,l){l=l||{};var r=l.reviver,o=l.additionalTransform||"",i=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),a=u.indexOf("COMMON_PARTS");return u[a]=i,r?r(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,l){l=l||{};var r=l.noStyle,o=l.reviver,i=r?"":'style="'+this.getSvgStyles()+'" ',a=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=f&&f.absolutePositioned,v=this.stroke,m=this.fill,b=this.shadow,w,E=[],A,O=u.indexOf("COMMON_PARTS"),L=l.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+e.Object.__uid++,A='<clipPath id="'+f.clipPathId+`" >
`+f.toClipPathSVG(o)+`</clipPath>
`),p&&E.push("<g ",a,this.getSvgCommons(),` >
`),E.push("<g ",this.getSvgTransform(!1),p?"":a+this.getSvgCommons(),` >
`),w=[i,s,r?"":this.addPaintOrder()," ",L?'transform="'+L+'" ':""].join(""),u[O]=w,m&&m.toLive&&E.push(m.toSVG(this)),v&&v.toLive&&E.push(v.toSVG(this)),b&&E.push(b.toSVG(this)),f&&E.push(A),E.push(u.join("")),E.push(`</g>
`),p&&E.push(`</g>
`),o?o(E.join("")):E.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=e.util.object.extend,n="stateProperties";function u(r,o,i){var a={},f=!0;i.forEach(function(s){a[s]=r[s]}),d(r[o],a,f)}function l(r,o,i){if(r===o)return!0;if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(var a=0,f=r.length;a<f;a++)if(!l(r[a],o[a]))return!1;return!0}else if(r&&typeof r=="object"){var s=Object.keys(r),p;if(!o||typeof o!="object"||!i&&s.length!==Object.keys(o).length)return!1;for(var a=0,f=s.length;a<f;a++)if(p=s[a],!(p==="canvas"||p==="group")&&!l(r[p],o[p]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(r){r=r||n;var o="_"+r;return Object.keys(this[o]).length<this[r].length?!0:!l(this[o],this,!0)},saveState:function(r){var o=r&&r.propertySet||n,i="_"+o;return this[i]?(u(this,i,this[o]),r&&r.stateProperties&&u(this,i,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var o=r.propertySet||n;return r.propertySet=o,this["_"+o]={},this.saveState(r),this}})}(),function(){var d=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(n,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l=n.x,r=n.y,o,i,a=Object.keys(this.oCoords),f=a.length-1,s;for(this.__corner=0;f>=0;f--)if(s=a[f],!!this.isControlVisible(s)&&(i=this._getImageLines(u?this.oCoords[s].touchCorner:this.oCoords[s].corner),o=this._findCrossPoints({x:l,y:r},i),o!==0&&o%2===1))return this.__corner=s,s;return!1},forEachControl:function(n){for(var u in this.controls)n(this.controls[u],u,this)},_setCornerCoords:function(){var n=this.oCoords;for(var u in n){var l=this.controls[u];n[u].corner=l.calcCornerCoords(this.angle,this.cornerSize,n[u].x,n[u].y,!1),n[u].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,n[u].x,n[u].y,!0)}},drawSelectionBackground:function(n){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;n.save();var u=this.getCenterPoint(),l=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return n.translate(u.x,u.y),n.scale(1/r[0],1/r[3]),n.rotate(d(this.angle)),n.fillStyle=this.selectionBackgroundColor,n.fillRect(-l.x/2,-l.y/2,l.x,l.y),n.restore(),this},drawBorders:function(n,u){u=u||{};var l=this._calculateCurrentDimensions(),r=this.borderScaleFactor,o=l.x+r,i=l.y+r,a=typeof u.hasControls<"u"?u.hasControls:this.hasControls,f=!1;return n.save(),n.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(n,u.borderDashArray||this.borderDashArray),n.strokeRect(-o/2,-i/2,o,i),a&&(n.beginPath(),this.forEachControl(function(s,p,v){s.withConnection&&s.getVisibility(v,p)&&(f=!0,n.moveTo(s.x*o,s.y*i),n.lineTo(s.x*o+s.offsetX,s.y*i+s.offsetY))}),f&&n.stroke()),n.restore(),this},drawBordersInGroup:function(n,u,l){l=l||{};var r=e.util.sizeAfterTransform(this.width,this.height,u),o=this.strokeWidth,i=this.strokeUniform,a=this.borderScaleFactor,f=r.x+o*(i?this.canvas.getZoom():u.scaleX)+a,s=r.y+o*(i?this.canvas.getZoom():u.scaleY)+a;return n.save(),this._setLineDash(n,l.borderDashArray||this.borderDashArray),n.strokeStyle=l.borderColor||this.borderColor,n.strokeRect(-f/2,-s/2,f,s),n.restore(),this},drawControls:function(n,u){u=u||{},n.save();var l=this.canvas.getRetinaScaling(),r,o;return n.setTransform(l,0,0,l,0,0),n.strokeStyle=n.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(n.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(n,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(i,a,f){o=f.oCoords[a],i.getVisibility(f,a)&&(r&&(o=e.util.transformPoint(o,r)),i.render(n,o.x,o.y,u,f))}),n.restore(),this},isControlVisible:function(n){return this.controls[n]&&this.controls[n].getVisibility(this,n)},setControlVisible:function(n,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[n]=u,this},setControlsVisibility:function(n){n||(n={});for(var u in n)this.setControlVisible(u,n[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,n){n=n||{};var u=function(){},l=n.onComplete||u,r=n.onChange||u,o=this;return e.util.animate({target:this,startValue:d.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(i){d.set("left",i),o.requestRenderAll(),r()},onComplete:function(){d.setCoords(),l()}})},fxCenterObjectV:function(d,n){n=n||{};var u=function(){},l=n.onComplete||u,r=n.onChange||u,o=this;return e.util.animate({target:this,startValue:d.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(i){d.set("top",i),o.requestRenderAll(),r()},onComplete:function(){d.setCoords(),l()}})},fxRemove:function(d,n){n=n||{};var u=function(){},l=n.onComplete||u,r=n.onChange||u,o=this;return e.util.animate({target:this,startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){d.set("opacity",i),o.requestRenderAll(),r()},onComplete:function(){o.remove(d),l()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],n,u,l=[];for(n in arguments[0])d.push(n);for(var r=0,o=d.length;r<o;r++)n=d[r],u=r!==o-1,l.push(this._animate(n,arguments[0][n],arguments[1],u));return l}else return this._animate.apply(this,arguments)},_animate:function(d,n,u,l){var r=this,o;n=n.toString(),u?u=e.util.object.clone(u):u={},~d.indexOf(".")&&(o=d.split("."));var i=r.colorProperties.indexOf(d)>-1||o&&r.colorProperties.indexOf(o[1])>-1,a=o?this.get(o[0])[o[1]]:this.get(d);"from"in u||(u.from=a),i||(~n.indexOf("=")?n=a+parseFloat(n.replace("=","")):n=parseFloat(n));var f={target:this,startValue:u.from,endValue:n,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(s,p,v){return u.abort.call(r,s,p,v)},onChange:function(s,p,v){o?r[o[0]][o[1]]=s:r.set(d,s),!l&&u.onChange&&u.onChange(s,p,v)},onComplete:function(s,p,v){l||(r.setCoords(),u.onComplete&&u.onComplete(s,p,v))}};return i?e.util.animateColor(f.startValue,f.endValue,f.duration,f):e.util.animate(f)}}),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};if(n.Line){n.warn("fabric.Line is already defined");return}n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,a){i||(i=[0,0,0,0]),this.callSuper("initialize",a),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(a)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,a){return this.callSuper("_set",i,a),typeof r[i]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var a=this.calcLinePoints();i.moveTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineWidth=this.strokeWidth;var f=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=f},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return u(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(i.y-=this.strokeWidth),this.height===0&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1,f=i*this.width*.5,s=a*this.height*.5,p=i*this.width*-.5,v=a*this.height*-.5;return{x1:f,x2:p,y1:s,y2:v}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,`" />
`]}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(i,a,f){f=f||{};var s=n.parseAttributes(i,n.Line.ATTRIBUTE_NAMES),p=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];a(new n.Line(p,u(s,f)))},n.Line.fromObject=function(i,a){function f(p){delete p.points,a&&a(p)}var s=l(i,!0);s.points=[i.x1,i.y1,i.x2,i.y2],n.Object._fromObject("Line",s,f,"points")};function o(i,a){var f=i.origin,s=i.axis1,p=i.axis2,v=i.dimension,m=a.nearest,b=a.center,w=a.farthest;return function(){switch(this.get(f)){case m:return Math.min(this.get(s),this.get(p));case b:return Math.min(this.get(s),this.get(p))+.5*this.get(v);case w:return Math.max(this.get(s),this.get(p))}}}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.degreesToRadians;if(n.Circle){n.warn("fabric.Circle is already defined.");return}n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,o){return this.callSuper("_set",r,o),r==="radius"&&this.setRadius(o),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,o=0,i=0,a=(this.endAngle-this.startAngle)%360;if(a===0)r=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+i+'" ','r="',this.radius,`" />
`];else{var f=u(this.startAngle),s=u(this.endAngle),p=this.radius,v=n.util.cos(f)*p,m=n.util.sin(f)*p,b=n.util.cos(s)*p,w=n.util.sin(s)*p,E=a>180?"1":"0";r=['<path d="M '+v+" "+m," A "+p+" "+p," 0 ",+E+" 1"," "+b+" "+w,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(r,o){var i=n.parseAttributes(r,n.Circle.ATTRIBUTE_NAMES);if(!l(i))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,o(new n.Circle(i))};function l(r){return"radius"in r&&r.radius>=0}n.Circle.fromObject=function(r,o){n.Object._fromObject("Circle",r,o)}}(t),function(d){var n=d.fabric||(d.fabric={});if(n.Triangle){n.warn("fabric.Triangle is already defined");return}n.Triangle=n.util.createClass(n.Object,{type:"triangle",width:100,height:100,_render:function(u){var l=this.width/2,r=this.height/2;u.beginPath(),u.moveTo(-l,r),u.lineTo(0,-r),u.lineTo(l,r),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,l=this.height/2,r=[-u+" "+l,"0 "+-l,u+" "+l].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),n.Triangle.fromObject=function(u,l){return n.Object._fromObject("Triangle",u,l)}}(t),function(d){var n=d.fabric||(d.fabric={}),u=Math.PI*2;if(n.Ellipse){n.warn("fabric.Ellipse is already defined.");return}n.Ellipse=n.util.createClass(n.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,r){switch(this.callSuper("_set",l,r),l){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,u,!1),l.restore(),this._renderPaintInOrder(l)}}),n.Ellipse.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),n.Ellipse.fromElement=function(l,r){var o=n.parseAttributes(l,n.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,r(new n.Ellipse(o))},n.Ellipse.fromObject=function(l,r){n.Object._fromObject("Ellipse",l,r)}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend;if(n.Rect){n.warn("fabric.Rect is already defined");return}n.Rect=n.util.createClass(n.Object,{stateProperties:n.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:n.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var r=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,a=this.height,f=-this.width/2,s=-this.height/2,p=r!==0||o!==0,v=1-.5522847498;l.beginPath(),l.moveTo(f+r,s),l.lineTo(f+i-r,s),p&&l.bezierCurveTo(f+i-v*r,s,f+i,s+v*o,f+i,s+o),l.lineTo(f+i,s+a-o),p&&l.bezierCurveTo(f+i,s+a-v*o,f+i-v*r,s+a,f+i-r,s+a),l.lineTo(f+r,s+a),p&&l.bezierCurveTo(f+v*r,s+a,f,s+a-v*o,f,s+a-o),l.lineTo(f,s+o),p&&l.bezierCurveTo(f,s+v*o,f+v*r,s,f+r,s),l.closePath(),this._renderPaintInOrder(l)},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){var l=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',l,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),n.Rect.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),n.Rect.fromElement=function(l,r,o){if(!l)return r(null);o=o||{};var i=n.parseAttributes(l,n.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var a=new n.Rect(u(o?n.util.object.clone(o):{},i));a.visible=a.visible&&a.width>0&&a.height>0,r(a)},n.Rect.fromObject=function(l,r){return n.Object._fromObject("Rect",l,r)}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.util.array.min,r=n.util.array.max,o=n.util.toFixed,i=n.util.projectStrokeOnPoints;if(n.Polyline){n.warn("fabric.Polyline is already defined");return}n.Polyline=n.util.createClass(n.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:n.Object.prototype.cacheProperties.concat("points"),initialize:function(a,f){f=f||{},this.points=a||[],this.callSuper("initialize",f),this._setPositionDimensions(f)},_projectStrokeOnPoints:function(){return i(this.points,this,!0)},_setPositionDimensions:function(a){var f=this._calcDimensions(a),s,p=this.exactBoundingBox?this.strokeWidth:0;this.width=f.width-p,this.height=f.height-p,a.fromSVG||(s=this.translateToGivenOrigin({x:f.left-this.strokeWidth/2+p/2,y:f.top-this.strokeWidth/2+p/2},"left","top",this.originX,this.originY)),typeof a.left>"u"&&(this.left=a.fromSVG?f.left:s.x),typeof a.top>"u"&&(this.top=a.fromSVG?f.top:s.y),this.pathOffset={x:f.left+this.width/2+p/2,y:f.top+this.height/2+p/2}},_calcDimensions:function(){var a=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,f=l(a,"x")||0,s=l(a,"y")||0,p=r(a,"x")||0,v=r(a,"y")||0,m=p-f,b=v-s;return{left:f,top:s,width:m,height:b}},toObject:function(a){return u(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],f=this.pathOffset.x,s=this.pathOffset.y,p=n.Object.NUM_FRACTION_DIGITS,v=0,m=this.points.length;v<m;v++)a.push(o(this.points[v].x-f,p),",",o(this.points[v].y-s,p)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var f,s=this.points.length,p=this.pathOffset.x,v=this.pathOffset.y;if(!s||isNaN(this.points[s-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-p,this.points[0].y-v);for(var m=0;m<s;m++)f=this.points[m],a.lineTo(f.x-p,f.y-v);return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},complexity:function(){return this.get("points").length}}),n.Polyline.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polyline.fromElementGenerator=function(a){return function(f,s,p){if(!f)return s(null);p||(p={});var v=n.parsePointsAttribute(f.getAttribute("points")),m=n.parseAttributes(f,n[a].ATTRIBUTE_NAMES);m.fromSVG=!0,s(new n[a](v,u(m,p)))}},n.Polyline.fromElement=n.Polyline.fromElementGenerator("Polyline"),n.Polyline.fromObject=function(a,f){return n.Object._fromObject("Polyline",a,f,"points")}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.projectStrokeOnPoints;if(n.Polygon){n.warn("fabric.Polygon is already defined");return}n.Polygon=n.util.createClass(n.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),n.Polygon.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(),n.Polygon.fromElement=n.Polyline.fromElementGenerator("Polygon"),n.Polygon.fromObject=function(l,r){n.Object._fromObject("Polygon",l,r,"points")}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.array.min,l=n.util.array.max,r=n.util.object.extend,o=n.util.object.clone,i=n.util.toFixed;if(n.Path){n.warn("fabric.Path is already defined");return}n.Path=n.util.createClass(n.Object,{type:"path",path:null,cacheProperties:n.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:n.Object.prototype.stateProperties.concat("path"),initialize:function(a,f){f=o(f||{}),delete f.path,this.callSuper("initialize",f),this._setPath(a||[],f)},_setPath:function(a,f){this.path=n.util.makePathSimpler(Array.isArray(a)?a:n.util.parsePath(a)),n.Polyline.prototype._setPositionDimensions.call(this,f||{})},_renderPathCommands:function(a){var f,s=0,p=0,v=0,m=0,b=0,w=0,E=-this.pathOffset.x,A=-this.pathOffset.y;a.beginPath();for(var O=0,L=this.path.length;O<L;++O)switch(f=this.path[O],f[0]){case"L":v=f[1],m=f[2],a.lineTo(v+E,m+A);break;case"M":v=f[1],m=f[2],s=v,p=m,a.moveTo(v+E,m+A);break;case"C":v=f[5],m=f[6],b=f[3],w=f[4],a.bezierCurveTo(f[1]+E,f[2]+A,b+E,w+A,v+E,m+A);break;case"Q":a.quadraticCurveTo(f[1]+E,f[2]+A,f[3]+E,f[4]+A),v=f[3],m=f[4],b=f[1],w=f[2];break;case"z":case"Z":v=s,m=p,a.closePath();break}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return r(this.callSuper("toObject",a),{path:this.path.map(function(f){return f.slice()})})},toDatalessObject:function(a){var f=this.toObject(["sourcePath"].concat(a));return f.sourcePath&&delete f.path,f},_toSVG:function(){var a=n.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',a,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var a=n.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,a)+", "+i(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var f=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:f})},toSVG:function(a){var f=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:f})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var a=[],f=[],s,p=0,v=0,m=0,b=0,w,E=0,A=this.path.length;E<A;++E){switch(s=this.path[E],s[0]){case"L":m=s[1],b=s[2],w=[];break;case"M":m=s[1],b=s[2],p=m,v=b,w=[];break;case"C":w=n.util.getBoundsOfCurve(m,b,s[1],s[2],s[3],s[4],s[5],s[6]),m=s[5],b=s[6];break;case"Q":w=n.util.getBoundsOfCurve(m,b,s[1],s[2],s[1],s[2],s[3],s[4]),m=s[3],b=s[4];break;case"z":case"Z":m=p,b=v;break}w.forEach(function(Z){a.push(Z.x),f.push(Z.y)}),a.push(m),f.push(b)}var O=u(a)||0,L=u(f)||0,Y=l(a)||0,V=l(f)||0,Q=Y-O,J=V-L;return{left:O,top:L,width:Q,height:J}}}),n.Path.fromObject=function(a,f){if(typeof a.sourcePath=="string"){var s=a.sourcePath;n.loadSVGFromURL(s,function(p){var v=p[0];v.setOptions(a),f&&f(v)})}else n.Object._fromObject("Path",a,f,"path")},n.Path.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(["d"]),n.Path.fromElement=function(a,f,s){var p=n.parseAttributes(a,n.Path.ATTRIBUTE_NAMES);p.fromSVG=!0,f(new n.Path(p.d,r(p,s)))}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.array.min,l=n.util.array.max;n.Group||(n.Group=n.util.createClass(n.Object,n.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,o,i){o=o||{},this._objects=[],i&&this.callSuper("initialize",o),this._objects=r||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(i)this._updateObjectsACoords();else{var f=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),f||this._calcBounds(),this._updateObjectsCoords(f),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,o=this._objects.length;o--;)this._objects[o].setCoords(r)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],o)},_updateObjectCoords:function(r,o){var i=r.left,a=r.top,f=!0;r.set({left:i-o.x,top:a-o.y}),r.group=this,r.setCoords(f)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var o=!!this.group;return this._restoreObjectsState(),n.util.resetObjectTransform(this),r&&(o&&n.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),n.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,o){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(r,o);if(r==="canvas")for(;i--;)this._objects[i]._set(r,o);n.Object.prototype._set.call(this,r,o)},toObject:function(r){var o=this.includeDefaultValues,i=this._objects.filter(function(f){return!f.excludeFromExport}).map(function(f){var s=f.includeDefaultValues;f.includeDefaultValues=o;var p=f.toObject(r);return f.includeDefaultValues=s,p}),a=n.Object.prototype.toObject.call(this,r);return a.objects=i,a},toDatalessObject:function(r){var o,i=this.sourcePath;if(i)o=i;else{var a=this.includeDefaultValues;o=this._objects.map(function(s){var p=s.includeDefaultValues;s.includeDefaultValues=a;var v=s.toDatalessObject(r);return s.includeDefaultValues=p,v})}var f=n.Object.prototype.toDatalessObject.call(this,r);return f.objects=o,f},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=n.Object.prototype.shouldCache.call(this);if(r){for(var o=0,i=this._objects.length;o<i;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(n.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,o=this._objects.length;r<o;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var o=0,i=this._objects.length;o<i;o++)this._objects[o].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var o=0,i=this._objects.length;o<i;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-f/2,a,f)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(o){n.util.addTransformToObject(o,r),delete o.group,o.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,o=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var a=new n.ActiveSelection([]);return a.set(i),a.type="activeSelection",o.remove(this),r.forEach(function(f){f.group=a,f.dirty=!0,o.add(f)}),a.canvas=o,a._objects=r,o._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(o){o.setCoords(r)}),this},_calcBounds:function(r){for(var o=[],i=[],a,f,s,p=["tr","br","bl","tl"],v=0,m=this._objects.length,b,w=p.length;v<m;++v){for(a=this._objects[v],s=a.calcACoords(),b=0;b<w;b++)f=p[b],o.push(s[f].x),i.push(s[f].y);a.aCoords=s}this._getBounds(o,i,r)},_getBounds:function(r,o,i){var a=new n.Point(u(r),u(o)),f=new n.Point(l(r),l(o)),s=a.y||0,p=a.x||0,v=f.x-a.x||0,m=f.y-a.y||0;this.width=v,this.height=m,i||this.setPositionByOrigin({x:p,y:s},"left","top")},_toSVG:function(r){for(var o=["<g ","COMMON_PARTS",` >
`],i=0,a=this._objects.length;i<a;i++)o.push("		",this._objects[i].toSVG(r));return o.push(`</g>
`),o},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),o].join("")},toClipPathSVG:function(r){for(var o=[],i=0,a=this._objects.length;i<a;i++)o.push("	",this._objects[i].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(o,{reviver:r})}}),n.Group.fromObject=function(r,o){var i=r.objects,a=n.util.object.clone(r,!0);if(delete a.objects,typeof i=="string"){n.loadSVGFromURL(i,function(f){var s=n.util.groupSVGElements(f,r,i);s.set(a),o&&o(s)});return}n.util.enlivenObjects(i,function(f){var s=n.util.object.clone(r,!0);delete s.objects,n.util.enlivenObjectEnlivables(r,s,function(){o&&o(new n.Group(f,s,!0))})})})}(t),function(d){var n=d.fabric||(d.fabric={});n.ActiveSelection||(n.ActiveSelection=n.util.createClass(n.Group,{type:"activeSelection",initialize:function(u,l){l=l||{},this._objects=u||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),n.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var l=n.Object.prototype.toObject.call(this),r=new n.Group([]);if(delete l.type,r.set(l),u.forEach(function(i){i.canvas.remove(i),i.group=r}),r._objects=u,!this.canvas)return r;var o=this.canvas;return o.add(r),o._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,l,r){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,l),r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var o=0,i=this._objects.length;o<i;o++)this._objects[o]._renderControls(u,r);u.restore()}}),n.ActiveSelection.fromObject=function(u,l){n.util.enlivenObjects(u.objects,function(r){delete u.objects,l&&l(new n.ActiveSelection(r,u,!0))})})}(t),function(d){var n=e.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,l){l||(l={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",l),this._initElement(u,l)},getElement:function(){return this._element||{}},setElement:function(u,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(l),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var l=e.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var l=this.width/2,r=this.height/2;u.beginPath(),u.moveTo(-l,-r),u.lineTo(l,-r),u.lineTo(l,r),u.lineTo(-l,r),u.lineTo(-l,-r),u.closePath()}},toObject:function(u){var l=[];this.filters.forEach(function(o){o&&l.push(o.toObject())});var r=n(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],l=[],r,o=this._element,i=-this.width/2,a=-this.height/2,f="",s="";if(!o)return[];if(this.hasCrop()){var p=e.Object.__uid++;u.push('<clipPath id="imageCrop_'+p+`">
`,'	<rect x="'+i+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),f=' clip-path="url(#imageCrop_'+p+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),l.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',a-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,s,'"',f,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,r=["	<rect ",'x="',i,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?u=u.concat(r,l):u=u.concat(l,r),u},getSrc:function(u){var l=u?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(u,l,r){return e.util.loadImage(u,function(o,i){this.setElement(o,r),this._setWidthHeight(),l&&l(this,i)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,l=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.scaleX,i=r.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||o>l&&i>l){this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=i;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var f=e.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,p=a.width,v=a.height;f.width=p,f.height=v,this._element=f,this._lastScaleX=u.scaleX=o,this._lastScaleY=u.scaleY=i,e.filterBackend.applyFilters([u],a,p,v,this._element,s),this._filterScalingX=f.width/this._originalElement.width,this._filterScalingY=f.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,r=l.naturalWidth||l.width,o=l.naturalHeight||l.height;if(this._element===this._originalElement){var i=e.util.createCanvasElement();i.width=r,i.height=o,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(u,this._originalElement,r,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var l=this._element;if(l){var r=this._filterScalingX,o=this._filterScalingY,i=this.width,a=this.height,f=Math.min,s=Math.max,p=s(this.cropX,0),v=s(this.cropY,0),m=l.naturalWidth||l.width,b=l.naturalHeight||l.height,w=p*r,E=v*o,A=f(i*r,m-w),O=f(a*o,b-E),L=-i/2,Y=-a/2,V=f(i,m/r-p),Q=f(a,b/o-v);l&&u.drawImage(l,w,E,A,O,L,Y,V,Q)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,l){this.setElement(e.util.getById(u),l),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,l){u&&u.length?e.util.enlivenObjects(u,function(r){l&&l(r)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(u){u||(u={});var l=this.getElement();this.width=u.width||l.naturalWidth||l.width||0,this.height=u.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var u=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),l=this._element.width,r=this._element.height,o=1,i=1,a=0,f=0,s=0,p=0,v,m=this.width,b=this.height,w={width:m,height:b};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(o=i=e.util.findScaleToFit(this._element,w),v=(m-l*o)/2,u.alignX==="Min"&&(a=-v),u.alignX==="Max"&&(a=v),v=(b-r*i)/2,u.alignY==="Min"&&(f=-v),u.alignY==="Max"&&(f=v)),u.meetOrSlice==="slice"&&(o=i=e.util.findScaleToCover(this._element,w),v=l-m/o,u.alignX==="Mid"&&(s=v/2),u.alignX==="Max"&&(s=v),v=r-b/i,u.alignY==="Mid"&&(p=v/2),u.alignY==="Max"&&(p=v),l=m/o,r=b/i)):(o=m/l,i=b/r),{width:l,height:r,scaleX:o,scaleY:i,offsetLeft:a,offsetTop:f,cropX:s,cropY:p}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(u,l){var r=e.util.object.clone(u);e.util.loadImage(r.src,function(o,i){if(i){l&&l(null,!0);return}e.Image.prototype._initFilters.call(r,r.filters,function(a){r.filters=a||[],e.Image.prototype._initFilters.call(r,[r.resizeFilter],function(f){r.resizeFilter=f[0],e.util.enlivenObjectEnlivables(r,r,function(){var s=new e.Image(o,r);l(s,!1)})})})},null,r.crossOrigin)},e.Image.fromURL=function(u,l,r){e.util.loadImage(u,function(o,i){l&&l(new e.Image(o,r),i)},null,r&&r.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(u,l,r){var o=e.parseAttributes(u,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(o["xlink:href"],l,n(r?e.util.object.clone(r):{},o))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(d){d=d||{};var n=function(){},u=d.onComplete||n,l=d.onChange||n,r=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){r.rotate(o),l()},onComplete:function(){r.setCoords(),u()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function d(u,l){var r="precision "+l+` float;
void main(){}`,o=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(o,r),u.compileShader(o),!!u.getShaderParameter(o,u.COMPILE_STATUS)}e.isWebglSupported=function(u){if(e.isLikelyNode)return!1;u=u||e.WebglFilterBackend.prototype.tileSize;var l=document.createElement("canvas"),r=l.getContext("webgl")||l.getContext("experimental-webgl"),o=!1;if(r){e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),o=e.maxTextureSize>=u;for(var i=["highp","mediump","lowp"],a=0;a<3;a++)if(d(r,i[a])){e.webGlPrecision=i[a];break}}return this.isSupported=o,o},e.WebglFilterBackend=n;function n(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.prototype={tileSize:2048,resources:{},setupGLContext:function(u,l){this.dispose(),this.createWebGLCanvas(u,l),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,l)},chooseFastestCopyGLTo2DMethod:function(u,l){var r=typeof window.performance<"u",o;try{new ImageData(1,1),o=!0}catch{o=!1}var i=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(r&&o&&i&&a){var f=e.util.createCanvasElement(),s=new ArrayBuffer(u*l*4);if(e.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=T;return}var p={imageBuffer:s,destinationWidth:u,destinationHeight:l,targetCanvas:f},v,m,b;f.width=u,f.height=l,v=window.performance.now(),x.call(p,this.gl,p),m=window.performance.now()-v,v=window.performance.now(),T.call(p,this.gl,p),b=window.performance.now()-v,m>b?(this.imageBuffer=s,this.copyGLTo2D=T):this.copyGLTo2D=x}},createWebGLCanvas:function(u,l){var r=e.util.createCanvasElement();r.width=u,r.height=l;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=r.getContext("webgl",o);i||(i=r.getContext("experimental-webgl",o)),i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)},applyFilters:function(u,l,r,o,i,a){var f=this.gl,s;a&&(s=this.getCachedTexture(a,l));var p={originalWidth:l.width||l.originalWidth,originalHeight:l.height||l.originalHeight,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:f,sourceTexture:this.createTexture(f,r,o,!s&&l),targetTexture:this.createTexture(f,r,o),originalTexture:s||this.createTexture(f,r,o,!s&&l),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},v=f.createFramebuffer();return f.bindFramebuffer(f.FRAMEBUFFER,v),u.forEach(function(m){m&&m.applyTo(p)}),_(p),this.copyGLTo2D(f,p),f.bindTexture(f.TEXTURE_2D,null),f.deleteTexture(p.sourceTexture),f.deleteTexture(p.targetTexture),f.deleteFramebuffer(v),i.getContext("2d").setTransform(1,0,0,1,0,0),p},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,l,r,o){var i=u.createTexture();return u.bindTexture(u.TEXTURE_2D,i),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),o?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,o):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,l,r,0,u.RGBA,u.UNSIGNED_BYTE,null),i},getCachedTexture:function(u,l){if(this.textureCache[u])return this.textureCache[u];var r=this.createTexture(this.gl,l.width,l.height,l);return this.textureCache[u]=r,r},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:x,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,l={renderer:"",vendor:""};if(!u)return l;var r=u.getExtension("WEBGL_debug_renderer_info");if(r){var o=u.getParameter(r.UNMASKED_RENDERER_WEBGL),i=u.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(l.renderer=o.toLowerCase()),i&&(l.vendor=i.toLowerCase())}return this.gpuInfo=l,l}}}();function _(d){var n=d.targetCanvas,u=n.width,l=n.height,r=d.destinationWidth,o=d.destinationHeight;(u!==r||l!==o)&&(n.width=r,n.height=o)}function x(d,n){var u=d.canvas,l=n.targetCanvas,r=l.getContext("2d");r.translate(0,l.height),r.scale(1,-1);var o=u.height-l.height;r.drawImage(u,0,o,l.width,l.height,0,0,l.width,l.height)}function T(d,n){var u=n.targetCanvas,l=u.getContext("2d"),r=n.destinationWidth,o=n.destinationHeight,i=r*o*4,a=new Uint8Array(this.imageBuffer,0,i),f=new Uint8ClampedArray(this.imageBuffer,0,i);d.readPixels(0,0,r,o,d.RGBA,d.UNSIGNED_BYTE,a);var s=new ImageData(f,r,o);l.putImageData(s,0,0)}(function(){var d=function(){};e.Canvas2dFilterBackend=n;function n(){}n.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(u,l,r,o,i){var a=i.getContext("2d");a.drawImage(l,0,0,r,o);var f=a.getImageData(0,0,r,o),s=a.getImageData(0,0,r,o),p={sourceWidth:r,sourceHeight:o,imageData:f,originalEl:l,originalImageData:s,canvasEl:i,ctx:a,filterBackend:this};return u.forEach(function(v){v.applyTo(p)}),(p.imageData.width!==r||p.imageData.height!==o)&&(i.width=p.imageData.width,i.height=p.imageData.height),a.putImageData(p.imageData,0,0),p}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var n in d)this[n]=d[n]},createProgram:function(d,n,u){n=n||this.fragmentSource,u=u||this.vertexSource,e.webGlPrecision!=="highp"&&(n=n.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var l=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(l,u),d.compileShader(l),!d.getShaderParameter(l,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(l));var r=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(r,n),d.compileShader(r),!d.getShaderParameter(r,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(r));var o=d.createProgram();if(d.attachShader(o,l),d.attachShader(o,r),d.linkProgram(o),!d.getProgramParameter(o,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(o));var i=this.getAttributeLocations(d,o),a=this.getUniformLocations(d,o)||{};return a.uStepW=d.getUniformLocation(o,"uStepW"),a.uStepH=d.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:i,uniformLocations:a}},getAttributeLocations:function(d,n){return{aPosition:d.getAttribLocation(n,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,n,u){var l=n.aPosition,r=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,r),d.enableVertexAttribArray(l),d.vertexAttribPointer(l,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,u,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var n=d.context,u,l;d.passes>1?(u=d.destinationWidth,l=d.destinationHeight,(d.sourceWidth!==u||d.sourceHeight!==l)&&(n.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(n,u,l)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,d.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(d){d.passes--,d.pass++;var n=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=n},isNeutralState:function(){var d=this.mainParameter,n=e.Image.filters[this.type].prototype;if(d)if(Array.isArray(n[d])){for(var u=n[d].length;u--;)if(this[d][u]!==n[d][u])return!1;return!0}else return n[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var n=d.context,u=this.retrieveShader(d);d.pass===0&&d.originalTexture?n.bindTexture(n.TEXTURE_2D,d.originalTexture):n.bindTexture(n.TEXTURE_2D,d.sourceTexture),n.useProgram(u.program),this.sendAttributeData(n,u.attributeLocations,d.aPosition),n.uniform1f(u.uniformLocations.uStepW,1/d.sourceWidth),n.uniform1f(u.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(n,u.uniformLocations),n.viewport(0,0,d.destinationWidth,d.destinationHeight),n.drawArrays(n.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,n,u){d.activeTexture(u),d.bindTexture(d.TEXTURE_2D,n),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,n){d.activeTexture(n),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var n=document.createElement("canvas");n.width=d.sourceWidth,n.height=d.sourceHeight,d.helpLayer=n}},toObject:function(){var d={type:this.type},n=this.mainParameter;return n&&(d[n]=this[n]),d},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(d,n){var u=new e.Image.filters[d.type](d);return n&&n(u),u},function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.ColorMatrix=l(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var o=r.imageData,i=o.data,a=i.length,f=this.matrix,s,p,v,m,b,w=this.colorsOnly;for(b=0;b<a;b+=4)s=i[b],p=i[b+1],v=i[b+2],w?(i[b]=s*f[0]+p*f[1]+v*f[2]+f[4]*255,i[b+1]=s*f[5]+p*f[6]+v*f[7]+f[9]*255,i[b+2]=s*f[10]+p*f[11]+v*f[12]+f[14]*255):(m=i[b+3],i[b]=s*f[0]+p*f[1]+v*f[2]+m*f[3]+f[4]*255,i[b+1]=s*f[5]+p*f[6]+v*f[7]+m*f[8]+f[9]*255,i[b+2]=s*f[10]+p*f[11]+v*f[12]+m*f[13]+f[14]*255,i[b+3]=s*f[15]+p*f[16]+v*f[17]+m*f[18]+f[19]*255)},getUniformLocations:function(r,o){return{uColorMatrix:r.getUniformLocation(o,"uColorMatrix"),uConstants:r.getUniformLocation(o,"uConstants")}},sendUniformData:function(r,o){var i=this.matrix,a=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],f=[i[4],i[9],i[14],i[19]];r.uniformMatrix4fv(o.uColorMatrix,!1,a),r.uniform4fv(o.uConstants,f)}}),n.Image.filters.ColorMatrix.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Brightness=l(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var o=r.imageData,i=o.data,a,f=i.length,s=Math.round(this.brightness*255);for(a=0;a<f;a+=4)i[a]=i[a]+s,i[a+1]=i[a+1]+s,i[a+2]=i[a+2]+s}},getUniformLocations:function(r,o){return{uBrightness:r.getUniformLocation(o,"uBrightness")}},sendUniformData:function(r,o){r.uniform1f(o.uBrightness,this.brightness)}}),n.Image.filters.Brightness.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.Image.filters,r=n.util.createClass;l.Convolute=r(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var i=Math.sqrt(this.matrix.length),a=this.type+"_"+i+"_"+(this.opaque?1:0),f=this.fragmentSource[a];return o.programCache.hasOwnProperty(a)||(o.programCache[a]=this.createProgram(o.context,f)),o.programCache[a]},applyTo2d:function(o){var i=o.imageData,a=i.data,f=this.matrix,s=Math.round(Math.sqrt(f.length)),p=Math.floor(s/2),v=i.width,m=i.height,b=o.ctx.createImageData(v,m),w=b.data,E=this.opaque?1:0,A,O,L,Y,V,Q,J,Z,re,ie,ue,X,S;for(ue=0;ue<m;ue++)for(ie=0;ie<v;ie++){for(V=(ue*v+ie)*4,A=0,O=0,L=0,Y=0,S=0;S<s;S++)for(X=0;X<s;X++)J=ue+S-p,Q=ie+X-p,!(J<0||J>=m||Q<0||Q>=v)&&(Z=(J*v+Q)*4,re=f[S*s+X],A+=a[Z]*re,O+=a[Z+1]*re,L+=a[Z+2]*re,E||(Y+=a[Z+3]*re));w[V]=A,w[V+1]=O,w[V+2]=L,E?w[V+3]=a[V+3]:w[V+3]=Y}o.imageData=b},getUniformLocations:function(o,i){return{uMatrix:o.getUniformLocation(i,"uMatrix"),uOpaque:o.getUniformLocation(i,"uOpaque"),uHalfSize:o.getUniformLocation(i,"uHalfSize"),uSize:o.getUniformLocation(i,"uSize")}},sendUniformData:function(o,i){o.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),n.Image.filters.Convolute.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Grayscale=l(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var o=r.imageData,i=o.data,a,f=i.length,s,p=this.mode;for(a=0;a<f;a+=4)p==="average"?s=(i[a]+i[a+1]+i[a+2])/3:p==="lightness"?s=(Math.min(i[a],i[a+1],i[a+2])+Math.max(i[a],i[a+1],i[a+2]))/2:p==="luminosity"&&(s=.21*i[a]+.72*i[a+1]+.07*i[a+2]),i[a]=s,i[a+1]=s,i[a+2]=s},retrieveShader:function(r){var o=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(o)){var i=this.fragmentSource[this.mode];r.programCache[o]=this.createProgram(r.context,i)}return r.programCache[o]},getUniformLocations:function(r,o){return{uMode:r.getUniformLocation(o,"uMode")}},sendUniformData:function(r,o){var i=1;r.uniform1i(o.uMode,i)},isNeutralState:function(){return!1}}),n.Image.filters.Grayscale.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Invert=l(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var o=r.imageData,i=o.data,a,f=i.length;for(a=0;a<f;a+=4)i[a]=255-i[a],i[a+1]=255-i[a+1],i[a+2]=255-i[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,o){return{uInvert:r.getUniformLocation(o,"uInvert")}},sendUniformData:function(r,o){r.uniform1i(o.uInvert,this.invert)}}),n.Image.filters.Invert.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.Image.filters,r=n.util.createClass;l.Noise=r(l.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var i=o.imageData,a=i.data,f,s=a.length,p=this.noise,v;for(f=0,s=a.length;f<s;f+=4)v=(.5-Math.random())*p,a[f]+=v,a[f+1]+=v,a[f+2]+=v}},getUniformLocations:function(o,i){return{uNoise:o.getUniformLocation(i,"uNoise"),uSeed:o.getUniformLocation(i,"uSeed")}},sendUniformData:function(o,i){o.uniform1f(i.uNoise,this.noise/255),o.uniform1f(i.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),n.Image.filters.Noise.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Pixelate=l(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var o=r.imageData,i=o.data,a=o.height,f=o.width,s,p,v,m,b,w,E,A,O,L,Y;for(p=0;p<a;p+=this.blocksize)for(v=0;v<f;v+=this.blocksize)for(s=p*4*f+v*4,m=i[s],b=i[s+1],w=i[s+2],E=i[s+3],L=Math.min(p+this.blocksize,a),Y=Math.min(v+this.blocksize,f),A=p;A<L;A++)for(O=v;O<Y;O++)s=A*4*f+O*4,i[s]=m,i[s+1]=b,i[s+2]=w,i[s+3]=E},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,o){return{uBlocksize:r.getUniformLocation(o,"uBlocksize"),uStepW:r.getUniformLocation(o,"uStepW"),uStepH:r.getUniformLocation(o,"uStepH")}},sendUniformData:function(r,o){r.uniform1f(o.uBlocksize,this.blocksize)}}),n.Image.filters.Pixelate.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.extend,l=n.Image.filters,r=n.util.createClass;l.RemoveColor=r(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var i=o.imageData,a=i.data,f,s=this.distance*255,p,v,m,b=new n.Color(this.color).getSource(),w=[b[0]-s,b[1]-s,b[2]-s],E=[b[0]+s,b[1]+s,b[2]+s];for(f=0;f<a.length;f+=4)p=a[f],v=a[f+1],m=a[f+2],p>w[0]&&v>w[1]&&m>w[2]&&p<E[0]&&v<E[1]&&m<E[2]&&(a[f+3]=0)},getUniformLocations:function(o,i){return{uLow:o.getUniformLocation(i,"uLow"),uHigh:o.getUniformLocation(i,"uHigh")}},sendUniformData:function(o,i){var a=new n.Color(this.color).getSource(),f=parseFloat(this.distance),s=[0+a[0]/255-f,0+a[1]/255-f,0+a[2]/255-f,1],p=[a[0]/255+f,a[1]/255+f,a[2]/255+f,1];o.uniform4fv(i.uLow,s),o.uniform4fv(i.uHigh,p)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),n.Image.filters.RemoveColor.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)u[o]=l(u.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),n.Image.filters[o].fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric,u=n.Image.filters,l=n.util.createClass;u.BlendColor=l(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,i;return r.programCache.hasOwnProperty(o)||(i=this.buildSource(this.mode),r.programCache[o]=this.createProgram(r.context,i)),r.programCache[o]},applyTo2d:function(r){var o=r.imageData,i=o.data,a=i.length,f,s,p,v,m,b,w,E=1-this.alpha;w=new n.Color(this.color).getSource(),f=w[0]*this.alpha,s=w[1]*this.alpha,p=w[2]*this.alpha;for(var A=0;A<a;A+=4)switch(v=i[A],m=i[A+1],b=i[A+2],this.mode){case"multiply":i[A]=v*f/255,i[A+1]=m*s/255,i[A+2]=b*p/255;break;case"screen":i[A]=255-(255-v)*(255-f)/255,i[A+1]=255-(255-m)*(255-s)/255,i[A+2]=255-(255-b)*(255-p)/255;break;case"add":i[A]=v+f,i[A+1]=m+s,i[A+2]=b+p;break;case"diff":case"difference":i[A]=Math.abs(v-f),i[A+1]=Math.abs(m-s),i[A+2]=Math.abs(b-p);break;case"subtract":i[A]=v-f,i[A+1]=m-s,i[A+2]=b-p;break;case"darken":i[A]=Math.min(v,f),i[A+1]=Math.min(m,s),i[A+2]=Math.min(b,p);break;case"lighten":i[A]=Math.max(v,f),i[A+1]=Math.max(m,s),i[A+2]=Math.max(b,p);break;case"overlay":i[A]=f<128?2*v*f/255:255-2*(255-v)*(255-f)/255,i[A+1]=s<128?2*m*s/255:255-2*(255-m)*(255-s)/255,i[A+2]=p<128?2*b*p/255:255-2*(255-b)*(255-p)/255;break;case"exclusion":i[A]=f+v-2*f*v/255,i[A+1]=s+m-2*s*m/255,i[A+2]=p+b-2*p*b/255;break;case"tint":i[A]=f+v*E,i[A+1]=s+m*E,i[A+2]=p+b*E}},getUniformLocations:function(r,o){return{uColor:r.getUniformLocation(o,"uColor")}},sendUniformData:function(r,o){var i=new n.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,r.uniform4fv(o.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendColor.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric,u=n.Image.filters,l=n.util.createClass;u.BlendImage=l(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(o)||(r.programCache[o]=this.createProgram(r.context,i)),r.programCache[o]},applyToWebGL:function(r){var o=r.context,i=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(o,i,o.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(r,o){return r.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var r=this.image,o=r._element.width,i=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/o,-r.top/i,1]},applyTo2d:function(r){var o=r.imageData,i=r.filterBackend.resources,a=o.data,f=a.length,s=o.width,p=o.height,v,m,b,w,E,A,O,L,Y,V,Q=this.image,J;i.blendImage||(i.blendImage=n.util.createCanvasElement()),Y=i.blendImage,V=Y.getContext("2d"),Y.width!==s||Y.height!==p?(Y.width=s,Y.height=p):V.clearRect(0,0,s,p),V.setTransform(Q.scaleX,0,0,Q.scaleY,Q.left,Q.top),V.drawImage(Q._element,0,0,s,p),J=V.getImageData(0,0,s,p).data;for(var Z=0;Z<f;Z+=4)switch(E=a[Z],A=a[Z+1],O=a[Z+2],L=a[Z+3],v=J[Z],m=J[Z+1],b=J[Z+2],w=J[Z+3],this.mode){case"multiply":a[Z]=E*v/255,a[Z+1]=A*m/255,a[Z+2]=O*b/255,a[Z+3]=L*w/255;break;case"mask":a[Z+3]=w;break}},getUniformLocations:function(r,o){return{uTransformMatrix:r.getUniformLocation(o,"uTransformMatrix"),uImage:r.getUniformLocation(o,"uImage")}},sendUniformData:function(r,o){var i=this.calculateMatrix();r.uniform1i(o.uImage,1),r.uniformMatrix3fv(o.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),n.Image.filters.BlendImage.fromObject=function(r,o){n.Image.fromObject(r.image,function(i){var a=n.util.object.clone(r);a.image=i,o(new n.Image.filters.BlendImage(a))})}}(t),function(d){var n=d.fabric||(d.fabric={}),u=Math.pow,l=Math.floor,r=Math.sqrt,o=Math.abs,i=Math.round,a=Math.sin,f=Math.ceil,s=n.Image.filters,p=n.util.createClass;s.Resize=p(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,m){return{uDelta:v.getUniformLocation(m,"uDelta"),uTaps:v.getUniformLocation(m,"uTaps")}},sendUniformData:function(v,m){v.uniform2fv(m.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(m.uTaps,this.taps)},retrieveShader:function(v){var m=this.getFilterWindow(),b=this.type+"_"+m;if(!v.programCache.hasOwnProperty(b)){var w=this.generateShader(m);v.programCache[b]=this.createProgram(v.context,w)}return v.programCache[b]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),m=this.tempScale,b=this.getFilterWindow(),w=new Array(b),E=1;E<=b;E++)w[E-1]=v(E*m);return w},generateShader:function(w){for(var m=new Array(w),b=this.fragmentSourceTOP,w,E=1;E<=w;E++)m[E-1]=E+".0 * uDelta";return b+="uniform float uTaps["+w+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,m.forEach(function(A,O){b+="  color += texture2D(uTexture, vTexCoord + "+A+") * uTaps["+O+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+A+") * uTaps["+O+`];
`,b+="  sum += 2.0 * uTaps["+O+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(m){if(m>=v||m<=-v)return 0;if(m<11920929e-14&&m>-11920929e-14)return 1;m*=Math.PI;var b=m/v;return a(m)/m*a(b)/b}},applyTo2d:function(v){var m=v.imageData,b=this.scaleX,w=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/w;var E=m.width,A=m.height,O=i(E*b),L=i(A*w),Y;this.resizeType==="sliceHack"?Y=this.sliceByTwo(v,E,A,O,L):this.resizeType==="hermite"?Y=this.hermiteFastResize(v,E,A,O,L):this.resizeType==="bilinear"?Y=this.bilinearFiltering(v,E,A,O,L):this.resizeType==="lanczos"&&(Y=this.lanczosResize(v,E,A,O,L)),v.imageData=Y},sliceByTwo:function(v,m,b,w,E){var A=v.imageData,O=.5,L=!1,Y=!1,V=m*O,Q=b*O,J=n.filterBackend.resources,Z,re,ie=0,ue=0,X=m,S=0;for(J.sliceByTwo||(J.sliceByTwo=document.createElement("canvas")),Z=J.sliceByTwo,(Z.width<m*1.5||Z.height<b)&&(Z.width=m*1.5,Z.height=b),re=Z.getContext("2d"),re.clearRect(0,0,m*1.5,b),re.putImageData(A,0,0),w=l(w),E=l(E);!L||!Y;)m=V,b=Q,w<l(V*O)?V=l(V*O):(V=w,L=!0),E<l(Q*O)?Q=l(Q*O):(Q=E,Y=!0),re.drawImage(Z,ie,ue,m,b,X,S,V,Q),ie=X,ue=S,S+=Q;return re.getImageData(ie,ue,w,E)},lanczosResize:function(v,m,b,w,E){function A(M){var D,B,C,P,j,F,H,z,R,ee,$;for(S.x=(M+.5)*Q,k.x=l(S.x),D=0;D<E;D++){for(S.y=(D+.5)*J,k.y=l(S.y),j=0,F=0,H=0,z=0,R=0,B=k.x-ie;B<=k.x+ie;B++)if(!(B<0||B>=m)){ee=l(1e3*o(B-S.x)),X[ee]||(X[ee]={});for(var W=k.y-ue;W<=k.y+ue;W++)W<0||W>=b||($=l(1e3*o(W-S.y)),X[ee][$]||(X[ee][$]=V(r(u(ee*Z,2)+u($*re,2))/1e3)),C=X[ee][$],C>0&&(P=(W*m+B)*4,j+=C,F+=C*O[P],H+=C*O[P+1],z+=C*O[P+2],R+=C*O[P+3]))}P=(D*w+M)*4,Y[P]=F/j,Y[P+1]=H/j,Y[P+2]=z/j,Y[P+3]=R/j}return++M<w?A(M):L}var O=v.imageData.data,L=v.ctx.createImageData(w,E),Y=L.data,V=this.lanczosCreate(this.lanczosLobes),Q=this.rcpScaleX,J=this.rcpScaleY,Z=2/this.rcpScaleX,re=2/this.rcpScaleY,ie=f(Q*this.lanczosLobes/2),ue=f(J*this.lanczosLobes/2),X={},S={},k={};return A(0)},bilinearFiltering:function(v,m,b,w,E){var A,O,L,Y,V,Q,J,Z,re,ie,ue,X,S=0,k,M=this.rcpScaleX,D=this.rcpScaleY,B=4*(m-1),C=v.imageData,P=C.data,j=v.ctx.createImageData(w,E),F=j.data;for(J=0;J<E;J++)for(Z=0;Z<w;Z++)for(V=l(M*Z),Q=l(D*J),re=M*Z-V,ie=D*J-Q,k=4*(Q*m+V),ue=0;ue<4;ue++)A=P[k+ue],O=P[k+4+ue],L=P[k+B+ue],Y=P[k+B+4+ue],X=A*(1-re)*(1-ie)+O*re*(1-ie)+L*ie*(1-re)+Y*re*ie,F[S++]=X;return j},hermiteFastResize:function(v,m,b,w,E){for(var A=this.rcpScaleX,O=this.rcpScaleY,L=f(A/2),Y=f(O/2),V=v.imageData,Q=V.data,J=v.ctx.createImageData(w,E),Z=J.data,re=0;re<E;re++)for(var ie=0;ie<w;ie++){for(var ue=(ie+re*w)*4,X=0,S=0,k=0,M=0,D=0,B=0,C=0,P=(re+.5)*O,j=l(re*O);j<(re+1)*O;j++)for(var F=o(P-(j+.5))/Y,H=(ie+.5)*A,z=F*F,R=l(ie*A);R<(ie+1)*A;R++){var ee=o(H-(R+.5))/L,$=r(z+ee*ee);$>1&&$<-1||(X=2*$*$*$-3*$*$+1,X>0&&(ee=4*(R+j*m),C+=X*Q[ee+3],k+=X,Q[ee+3]<255&&(X=X*Q[ee+3]/250),M+=X*Q[ee],D+=X*Q[ee+1],B+=X*Q[ee+2],S+=X))}Z[ue]=M/S,Z[ue+1]=D/S,Z[ue+2]=B/S,Z[ue+3]=C/k}return J},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),n.Image.filters.Resize.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Contrast=l(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var o=r.imageData,i,f,a=o.data,f=a.length,s=Math.floor(this.contrast*255),p=259*(s+255)/(255*(259-s));for(i=0;i<f;i+=4)a[i]=p*(a[i]-128)+128,a[i+1]=p*(a[i+1]-128)+128,a[i+2]=p*(a[i+2]-128)+128}},getUniformLocations:function(r,o){return{uContrast:r.getUniformLocation(o,"uContrast")}},sendUniformData:function(r,o){r.uniform1f(o.uContrast,this.contrast)}}),n.Image.filters.Contrast.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Saturation=l(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var o=r.imageData,i=o.data,a=i.length,f=-this.saturation,s,p;for(s=0;s<a;s+=4)p=Math.max(i[s],i[s+1],i[s+2]),i[s]+=p!==i[s]?(p-i[s])*f:0,i[s+1]+=p!==i[s+1]?(p-i[s+1])*f:0,i[s+2]+=p!==i[s+2]?(p-i[s+2])*f:0}},getUniformLocations:function(r,o){return{uSaturation:r.getUniformLocation(o,"uSaturation")}},sendUniformData:function(r,o){r.uniform1f(o.uSaturation,-this.saturation)}}),n.Image.filters.Saturation.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Vibrance=l(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var o=r.imageData,i=o.data,a=i.length,f=-this.vibrance,s,p,v,m;for(s=0;s<a;s+=4)p=Math.max(i[s],i[s+1],i[s+2]),v=(i[s]+i[s+1]+i[s+2])/3,m=Math.abs(p-v)*2/255*f,i[s]+=p!==i[s]?(p-i[s])*m:0,i[s+1]+=p!==i[s+1]?(p-i[s+1])*m:0,i[s+2]+=p!==i[s+2]?(p-i[s+2])*m:0}},getUniformLocations:function(r,o){return{uVibrance:r.getUniformLocation(o,"uVibrance")}},sendUniformData:function(r,o){r.uniform1f(o.uVibrance,-this.vibrance)}}),n.Image.filters.Vibrance.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Blur=l(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var o=r.filterBackend.resources,i,a,f=r.imageData.width,s=r.imageData.height;o.blurLayer1||(o.blurLayer1=n.util.createCanvasElement(),o.blurLayer2=n.util.createCanvasElement()),i=o.blurLayer1,a=o.blurLayer2,(i.width!==f||i.height!==s)&&(a.width=i.width=f,a.height=i.height=s);var p=i.getContext("2d"),v=a.getContext("2d"),m=15,b,w,E,A,O=this.blur*.06*.5;for(p.putImageData(r.imageData,0,0),v.clearRect(0,0,f,s),A=-m;A<=m;A++)b=(Math.random()-.5)/4,w=A/m,E=O*w*f+b,v.globalAlpha=1-Math.abs(w),v.drawImage(i,E,b),p.drawImage(a,0,0),v.globalAlpha=1,v.clearRect(0,0,a.width,a.height);for(A=-m;A<=m;A++)b=(Math.random()-.5)/4,w=A/m,E=O*w*s+b,v.globalAlpha=1-Math.abs(w),v.drawImage(i,b,E),p.drawImage(a,0,0),v.globalAlpha=1,v.clearRect(0,0,a.width,a.height);r.ctx.drawImage(i,0,0);var L=r.ctx.getImageData(0,0,i.width,i.height);return p.globalAlpha=1,p.clearRect(0,0,i.width,i.height),L},getUniformLocations:function(r,o){return{delta:r.getUniformLocation(o,"uDelta")}},sendUniformData:function(r,o){var i=this.chooseRightDelta();r.uniform2fv(o.delta,i)},chooseRightDelta:function(){var r=1,o=[0,0],i;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),i=r*this.blur*.12,this.horizontal?o[0]=i:o[1]=i,o}}),u.Blur.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Gamma=l(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var o=r.imageData,i=o.data,a=this.gamma,f=i.length,s=1/a[0],p=1/a[1],v=1/a[2],m;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),m=0,f=256;m<f;m++)this.rVals[m]=Math.pow(m/255,s)*255,this.gVals[m]=Math.pow(m/255,p)*255,this.bVals[m]=Math.pow(m/255,v)*255;for(m=0,f=i.length;m<f;m+=4)i[m]=this.rVals[i[m]],i[m+1]=this.gVals[i[m+1]],i[m+2]=this.bVals[i[m+2]]},getUniformLocations:function(r,o){return{uGamma:r.getUniformLocation(o,"uGamma")}},sendUniformData:function(r,o){r.uniform3fv(o.uGamma,this.gamma)}}),n.Image.filters.Gamma.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.Composed=l(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(r)})},toObject:function(){return n.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),n.Image.filters.Composed.fromObject=function(r,o){var i=r.subFilters||[],a=i.map(function(s){return new n.Image.filters[s.type](s)}),f=new n.Image.filters.Composed({subFilters:a});return o&&o(f),f}}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.Image.filters,l=n.util.createClass;u.HueRotation=l(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,o=n.util.cos(r),i=n.util.sin(r),a=1/3,f=Math.sqrt(a)*i,s=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+s/3,this.matrix[1]=a*s-f,this.matrix[2]=a*s+f,this.matrix[5]=a*s+f,this.matrix[6]=o+a*s,this.matrix[7]=a*s-f,this.matrix[10]=a*s-f,this.matrix[11]=a*s+f,this.matrix[12]=o+a*s},isNeutralState:function(r){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,r)}}),n.Image.filters.HueRotation.fromObject=n.Image.filters.BaseFilter.fromObject}(t),function(d){var n=d.fabric||(d.fabric={}),u=n.util.object.clone;if(n.Text){n.warn("fabric.Text is already defined");return}var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");n.Text=n.util.createClass(n.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:n.Object.prototype.stateProperties.concat(l),cacheProperties:n.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,o){this.styles=o?o.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=n.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return n._measuringContext||(n._measuringContext=this.canvas&&this.canvas.contextCache||n.util.createCanvasElement().getContext("2d")),n._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,o,i,a,f,s,p,v=0,m=this._textLines.length;v<m;v++)if(!(this.textAlign!=="justify"&&(v===m-1||this.isEndOfWrapping(v)))&&(a=0,f=this._textLines[v],o=this.getLineWidth(v),o<this.width&&(p=this.textLines[v].match(this._reSpacesAndTabs)))){i=p.length,r=(this.width-o)/i;for(var b=0,w=f.length;b<=w;b++)s=this.__charBounds[v][b],this._reSpaceAndTab.test(f[b])?(s.width+=r,s.kernedWidth+=r,s.left+=a,a+=r):s.left+=a}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return r.width+=o*r.zoomX,r.height+=o*r.zoomY,r},_render:function(r){var o=this.path;o&&!o.isNotVisible()&&o._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,o,i){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom";break}r.font=this._getFontDeclaration(o,i)},calcTextWidth:function(){for(var r=this.getLineWidth(0),o=1,i=this._textLines.length;o<i;o++){var a=this.getLineWidth(o);a>r&&(r=a)}return r},_renderTextLine:function(r,o,i,a,f,s){this._renderChars(r,o,i,a,f,s)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,i,a=r.fillStyle,f,s,p=this._getLeftOffset(),v=this._getTopOffset(),m=0,b=0,w,E,A=this.path,O,L=0,Y=this._textLines.length;L<Y;L++){if(o=this.getHeightOfLine(L),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",L)){v+=o;continue}f=this._textLines[L],i=this._getLineLeftOffset(L),b=0,m=0,s=this.getValueOfPropertyAt(L,0,"textBackgroundColor");for(var V=0,Q=f.length;V<Q;V++)w=this.__charBounds[L][V],E=this.getValueOfPropertyAt(L,V,"textBackgroundColor"),A?(r.save(),r.translate(w.renderLeft,w.renderTop),r.rotate(w.angle),r.fillStyle=E,E&&r.fillRect(-w.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),w.width,o/this.lineHeight),r.restore()):E!==s?(O=p+i+m,this.direction==="rtl"&&(O=this.width-O-b),r.fillStyle=s,s&&r.fillRect(O,v,b,o/this.lineHeight),m=w.left,b=w.width,s=E):b+=w.kernedWidth;E&&!A&&(O=p+i+m,this.direction==="rtl"&&(O=this.width-O-b),r.fillStyle=E,r.fillRect(O,v,b,o/this.lineHeight)),v+=o}r.fillStyle=a,this._removeShadow(r)}},getFontCache:function(r){var o=r.fontFamily.toLowerCase();n.charWidthsCache[o]||(n.charWidthsCache[o]={});var i=n.charWidthsCache[o],a=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return i[a]||(i[a]={}),i[a]},_measureChar:function(r,o,i,a){var f=this.getFontCache(o),s=this._getFontDeclaration(o),p=this._getFontDeclaration(a),v=i+r,m=s===p,b,w,E,A=o.fontSize/this.CACHE_FONT_SIZE,O;if(i&&f[i]!==void 0&&(E=f[i]),f[r]!==void 0&&(O=b=f[r]),m&&f[v]!==void 0&&(w=f[v],O=w-E),b===void 0||E===void 0||w===void 0){var L=this.getMeasuringContext();this._setTextStyles(L,o,!0)}return b===void 0&&(O=b=L.measureText(r).width,f[r]=b),E===void 0&&m&&i&&(E=L.measureText(i).width,f[i]=E),m&&w===void 0&&(w=L.measureText(v).width,f[v]=w,O=w-E),{width:b*A,kernedWidth:O*A}},getHeightOfChar:function(r,o){return this.getValueOfPropertyAt(r,o,"fontSize")},measureLine:function(r){var o=this._measureLine(r);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(r){var o=0,i,a,f=this._textLines[r],s,p,v=0,m=new Array(f.length),b=0,w,E,A=this.path,O=this.pathSide==="right";for(this.__charBounds[r]=m,i=0;i<f.length;i++)a=f[i],p=this._getGraphemeBox(a,r,i,s),m[i]=p,o+=p.kernedWidth,s=a;if(m[i]={left:p?p.left+p.width:0,width:0,kernedWidth:0,height:this.fontSize},A){switch(E=A.segmentsInfo[A.segmentsInfo.length-1].length,w=n.util.getPointOnPath(A.path,0,A.segmentsInfo),w.x+=A.pathOffset.x,w.y+=A.pathOffset.y,this.textAlign){case"left":b=O?E-o:0;break;case"center":b=(E-o)/2;break;case"right":b=O?0:E-o;break}for(b+=this.pathStartOffset*(O?-1:1),i=O?f.length-1:0;O?i>=0:i<f.length;O?i--:i++)p=m[i],b>E?b%=E:b<0&&(b+=E),this._setGraphemeOnPath(b,p,w),b+=p.kernedWidth}return{width:o,numOfSpaces:v}},_setGraphemeOnPath:function(r,o,i){var a=r+o.kernedWidth/2,f=this.path,s=n.util.getPointOnPath(f.path,a,f.segmentsInfo);o.renderLeft=s.x-i.x,o.renderTop=s.y-i.y,o.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,o,i,a,f){var s=this.getCompleteStyleDeclaration(o,i),p=a?this.getCompleteStyleDeclaration(o,i-1):{},v=this._measureChar(r,s,a,p),m=v.kernedWidth,b=v.width,w;this.charSpacing!==0&&(w=this._getWidthOfCharSpacing(),b+=w,m+=w);var E={width:b,left:0,height:s.fontSize,kernedWidth:m,deltaY:s.deltaY};if(i>0&&!f){var A=this.__charBounds[o][i-1];E.left=A.left+A.width+v.kernedWidth-v.width}return E},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var o=this._textLines[r],i=this.getHeightOfChar(r,0),a=1,f=o.length;a<f;a++)i=Math.max(this.getHeightOfChar(r,a),i);return this.__lineHeights[r]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,o=0,i=0,a=this._textLines.length;i<a;i++)r=this.getHeightOfLine(i),o+=i===a-1?r/this.lineHeight:r;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,o){r.save();for(var i=0,a=this._getLeftOffset(),f=this._getTopOffset(),s=0,p=this._textLines.length;s<p;s++){var v=this.getHeightOfLine(s),m=v/this.lineHeight,b=this._getLineLeftOffset(s);this._renderTextLine(o,r,this._textLines[s],a+b,f+i+m,s),i+=v}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,o,i,a,f,s){var p=this.getHeightOfLine(s),v=this.textAlign.indexOf("justify")!==-1,m,b,w="",E,A=0,O,L=this.path,Y=!v&&this.charSpacing===0&&this.isEmptyStyles(s)&&!L,V=this.direction==="ltr",Q=this.direction==="ltr"?1:-1,J,Z=o.canvas.getAttribute("dir");if(o.save(),Z!==this.direction&&(o.canvas.setAttribute("dir",V?"ltr":"rtl"),o.direction=V?"ltr":"rtl",o.textAlign=V?"left":"right"),f-=p*this._fontSizeFraction/this.lineHeight,Y){this._renderChar(r,o,s,0,i.join(""),a,f,p),o.restore();return}for(var re=0,ie=i.length-1;re<=ie;re++)O=re===ie||this.charSpacing||L,w+=i[re],E=this.__charBounds[s][re],A===0?(a+=Q*(E.kernedWidth-E.width),A+=E.width):A+=E.kernedWidth,v&&!O&&this._reSpaceAndTab.test(i[re])&&(O=!0),O||(m=m||this.getCompleteStyleDeclaration(s,re),b=this.getCompleteStyleDeclaration(s,re+1),O=this._hasStyleChanged(m,b)),O&&(L?(o.save(),o.translate(E.renderLeft,E.renderTop),o.rotate(E.angle),this._renderChar(r,o,s,re,w,-A/2,0,p),o.restore()):(J=a,this._renderChar(r,o,s,re,w,J,f,p)),w="",m=b,a+=Q*A,A=0);o.restore()},_applyPatternGradientTransformText:function(r){var o=n.util.createCanvasElement(),i,a=this.width+this.strokeWidth,f=this.height+this.strokeWidth;return o.width=a,o.height=f,i=o.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(a,0),i.lineTo(a,f),i.lineTo(0,f),i.closePath(),i.translate(a/2,f/2),i.fillStyle=r.toLive(i),this._applyPatternGradientTransform(i,r),i.fill(),i.createPattern(o,"no-repeat")},handleFiller:function(r,o,i){var a,f;return i.toLive?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(a=-this.width/2,f=-this.height/2,r.translate(a,f),r[o]=this._applyPatternGradientTransformText(i),{offsetX:a,offsetY:f}):(r[o]=i.toLive(r,this),this._applyPatternGradientTransform(r,i)):(r[o]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,o){return r.lineWidth=o.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",o.stroke)},_setFillStyles:function(r,o){return this.handleFiller(r,"fillStyle",o.fill)},_renderChar:function(r,o,i,a,f,s,p){var v=this._getStyleDeclaration(i,a),m=this.getCompleteStyleDeclaration(i,a),b=r==="fillText"&&m.fill,w=r==="strokeText"&&m.stroke&&m.strokeWidth,E,A;!w&&!b||(o.save(),b&&(E=this._setFillStyles(o,m)),w&&(A=this._setStrokeStyles(o,m)),o.font=this._getFontDeclaration(m),v&&v.textBackgroundColor&&this._removeShadow(o),v&&v.deltaY&&(p+=v.deltaY),b&&o.fillText(f,s-E.offsetX,p-E.offsetY),w&&o.strokeText(f,s-A.offsetX,p-A.offsetY),o.restore())},setSuperscript:function(r,o){return this._setScript(r,o,this.superscript)},setSubscript:function(r,o){return this._setScript(r,o,this.subscript)},_setScript:function(r,o,i){var a=this.get2DCursorLocation(r,!0),f=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),s=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),p={fontSize:f*i.size,deltaY:s+f*i.baseline};return this.setSelectionStyles(p,r,o),this},_hasStyleChanged:function(r,o){return r.fill!==o.fill||r.stroke!==o.stroke||r.strokeWidth!==o.strokeWidth||r.fontSize!==o.fontSize||r.fontFamily!==o.fontFamily||r.fontWeight!==o.fontWeight||r.fontStyle!==o.fontStyle||r.deltaY!==o.deltaY},_hasStyleChangedForSvg:function(r,o){return this._hasStyleChanged(r,o)||r.overline!==o.overline||r.underline!==o.underline||r.linethrough!==o.linethrough},_getLineLeftOffset:function(r){var o=this.getLineWidth(r),i=this.width-o,a=this.textAlign,f=this.direction,p,s=0,p=this.isEndOfWrapping(r);return a==="justify"||a==="justify-center"&&!p||a==="justify-right"&&!p||a==="justify-left"&&!p?0:(a==="center"&&(s=i/2),a==="right"&&(s=i),a==="justify-center"&&(s=i/2),a==="justify-right"&&(s=i),f==="rtl"&&(s-=i),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var o=this.measureLine(r),i=o.width;return this.__lineWidths[r]=i,i},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,o,i){var a=this._getStyleDeclaration(r,o);return a&&typeof a[i]<"u"?a[i]:this[i]},_renderTextDecoration:function(r,o){if(!(!this[o]&&!this.styleHas(o))){for(var i,a,f,s,p,v,m,b,w=this._getLeftOffset(),E=this._getTopOffset(),A,O,L,Y,V,Q,J,Z,re=this.path,ie=this._getWidthOfCharSpacing(),ue=this.offsets[o],X=0,S=this._textLines.length;X<S;X++){if(i=this.getHeightOfLine(X),!this[o]&&!this.styleHas(o,X)){E+=i;continue}m=this._textLines[X],Q=i/this.lineHeight,s=this._getLineLeftOffset(X),O=0,L=0,b=this.getValueOfPropertyAt(X,0,o),Z=this.getValueOfPropertyAt(X,0,"fill"),A=E+Q*(1-this._fontSizeFraction),a=this.getHeightOfChar(X,0),p=this.getValueOfPropertyAt(X,0,"deltaY");for(var k=0,M=m.length;k<M;k++)if(Y=this.__charBounds[X][k],V=this.getValueOfPropertyAt(X,k,o),J=this.getValueOfPropertyAt(X,k,"fill"),f=this.getHeightOfChar(X,k),v=this.getValueOfPropertyAt(X,k,"deltaY"),re&&V&&J)r.save(),r.fillStyle=Z,r.translate(Y.renderLeft,Y.renderTop),r.rotate(Y.angle),r.fillRect(-Y.kernedWidth/2,ue*f+v,Y.kernedWidth,this.fontSize/15),r.restore();else if((V!==b||J!==Z||f!==a||v!==p)&&L>0){var D=w+s+O;this.direction==="rtl"&&(D=this.width-D-L),b&&Z&&(r.fillStyle=Z,r.fillRect(D,A+ue*a+p,L,this.fontSize/15)),O=Y.left,L=Y.width,b=V,Z=J,a=f,p=v}else L+=Y.kernedWidth;var D=w+s+O;this.direction==="rtl"&&(D=this.width-D-L),r.fillStyle=J,V&&J&&r.fillRect(D,A+ue*a+p,L-ie,this.fontSize/15),E+=i}this._removeShadow(r)}},_getFontDeclaration:function(r,o){var i=r||this,a=this.fontFamily,f=n.Text.genericFonts.indexOf(a.toLowerCase())>-1,s=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||f?i.fontFamily:'"'+i.fontFamily+'"';return[n.isLikelyNode?i.fontWeight:i.fontStyle,n.isLikelyNode?i.fontStyle:i.fontWeight,o?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",s].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var o=r.split(this._reNewline),i=new Array(o.length),a=[`
`],f=[],s=0;s<o.length;s++)i[s]=n.util.string.graphemeSplit(o[s]),f=f.concat(i[s],a);return f.pop(),{_unwrappedLines:i,lines:o,graphemeText:f,graphemeLines:i}},toObject:function(r){var o=l.concat(r),i=this.callSuper("toObject",o);return i.styles=u(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(r,o){this.callSuper("set",r,o);var i=!1,a=!1;if(typeof r=="object")for(var f in r)f==="path"&&this.setPathInfo(),i=i||this._dimensionAffectingProps.indexOf(f)!==-1,a=a||f==="path";else i=this._dimensionAffectingProps.indexOf(r)!==-1,a=r==="path";return a&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),n.Text.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),n.Text.DEFAULT_SVG_FONT_SIZE=16,n.Text.fromElement=function(r,o,i){if(!r)return o(null);var a=n.parseAttributes(r,n.Text.ATTRIBUTE_NAMES),f=a.textAnchor||"left";if(i=n.util.object.extend(i?u(i):{},a),i.top=i.top||0,i.left=i.left||0,a.textDecoration){var s=a.textDecoration;s.indexOf("underline")!==-1&&(i.underline=!0),s.indexOf("overline")!==-1&&(i.overline=!0),s.indexOf("line-through")!==-1&&(i.linethrough=!0),delete i.textDecoration}"dx"in a&&(i.left+=a.dx),"dy"in a&&(i.top+=a.dy),"fontSize"in i||(i.fontSize=n.Text.DEFAULT_SVG_FONT_SIZE);var p="";"textContent"in r?p=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(p=r.firstChild.data),p=p.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=i.strokeWidth;i.strokeWidth=0;var m=new n.Text(p,i),b=m.getScaledHeight()/m.height,w=(m.height+m.strokeWidth)*m.lineHeight-m.height,E=w*b,A=m.getScaledHeight()+E,O=0;f==="center"&&(O=m.getScaledWidth()/2),f==="right"&&(O=m.getScaledWidth()),m.set({left:m.left-O,top:m.top-(A-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:typeof v<"u"?v:1}),o(m)},n.Text.fromObject=function(r,o){var i=u(r),a=r.path;return delete i.path,n.Object._fromObject("Text",i,function(f){a?n.Object._fromObject("Path",a,function(s){f.set("path",s),o(f)},"path"):o(f)},"text")},n.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],n.util.createAccessors&&n.util.createAccessors(n.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var n=typeof d>"u"?this.styles:{line:this.styles[d]};for(var u in n)for(var l in n[u])for(var r in n[u][l])return!1;return!0},styleHas:function(d,n){if(!this.styles||!d||d===""||typeof n<"u"&&!this.styles[n])return!1;var u=typeof n>"u"?this.styles:{0:this.styles[n]};for(var l in u)for(var r in u[l])if(typeof u[l][r][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var n=this.styles,u=0,l,r,o=!0,i=0,a;for(var f in n){l=0;for(var s in n[f]){var a=n[f][s],p=a.hasOwnProperty(d);u++,p?(r?a[d]!==r&&(o=!1):r=a[d],a[d]===this[d]&&delete a[d]):o=!1,Object.keys(a).length!==0?l++:delete n[f][s]}l===0&&delete n[f]}for(var v=0;v<this._textLines.length;v++)i+=this._textLines[v].length;o&&u===i&&(this[d]=r,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var n=this.styles,u,l,r;for(l in n){u=n[l];for(r in u)delete u[r][d],Object.keys(u[r]).length===0&&delete u[r];Object.keys(u).length===0&&delete n[l]}}},_extendStyles:function(d,n){var u=this.get2DCursorLocation(d);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),n)},get2DCursorLocation:function(d,n){typeof d>"u"&&(d=this.selectionStart);for(var u=n?this._unwrappedTextLines:this._textLines,l=u.length,r=0;r<l;r++){if(d<=u[r].length)return{lineIndex:r,charIndex:d};d-=u[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:u[r-1].length<d?u[r-1].length:d}},getSelectionStyles:function(d,n,u){typeof d>"u"&&(d=this.selectionStart||0),typeof n>"u"&&(n=this.selectionEnd||d);for(var l=[],r=d;r<n;r++)l.push(this.getStyleAtPosition(r,u));return l},getStyleAtPosition:function(d,n){var u=this.get2DCursorLocation(d),l=n?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return l||{}},setSelectionStyles:function(d,n,u){typeof n>"u"&&(n=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||n);for(var l=n;l<u;l++)this._extendStyles(l,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,n){var u=this.styles&&this.styles[d];return u?u[n]:null},getCompleteStyleDeclaration:function(d,n){for(var u=this._getStyleDeclaration(d,n)||{},l={},r,o=0;o<this._styleProperties.length;o++)r=this._styleProperties[o],l[r]=typeof u[r]>"u"?this[r]:u[r];return l},_setStyleDeclaration:function(d,n,u){this.styles[d][n]=u},_deleteStyleDeclaration:function(d,n){delete this.styles[d][n]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(n){n.textDecoration&&(n.textDecoration.indexOf("underline")>-1&&(n.underline=!0),n.textDecoration.indexOf("line-through")>-1&&(n.linethrough=!0),n.textDecoration.indexOf("overline")>-1&&(n.overline=!0),delete n.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(n,u){this.callSuper("initialize",n,u),this.initBehavior()},setSelectionStart:function(n){n=Math.max(n,0),this._updateAndFire("selectionStart",n)},setSelectionEnd:function(n){n=Math.min(n,this.text.length),this._updateAndFire("selectionEnd",n)},_updateAndFire:function(n,u){this[n]!==u&&(this._fireSelectionChanged(),this[n]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(n){this.clearContextTop(),this.callSuper("render",n),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(n){this.callSuper("_render",n)},clearContextTop:function(n){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,l=this.canvas.viewportTransform;u.save(),u.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(u),this._clearTextArea(u),n||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var n=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(n,u):this.renderSelection(n,u),u.restore()}},_clearTextArea:function(n){var u=this.width+4,l=this.height+4;n.clearRect(-u/2,-l/2,u,l)},_getCursorBoundaries:function(n){typeof n>"u"&&(n=this.selectionStart);var u=this._getLeftOffset(),l=this._getTopOffset(),r=this._getCursorBoundariesOffsets(n);return{left:u,top:l,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(n){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,l,r,o=0,i=0,a,f=this.get2DCursorLocation(n);r=f.charIndex,l=f.lineIndex;for(var s=0;s<l;s++)o+=this.getHeightOfLine(s);u=this._getLineLeftOffset(l);var p=this.__charBounds[l][r];return p&&(i=p.left),this.charSpacing!==0&&r===this._textLines[l].length&&(i-=this._getWidthOfCharSpacing()),a={top:o,left:u+(i>0?i:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(n,u){var l=this.get2DCursorLocation(),r=l.lineIndex,o=l.charIndex>0?l.charIndex-1:0,i=this.getValueOfPropertyAt(r,o,"fontSize"),a=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/a,s=n.topOffset,p=this.getValueOfPropertyAt(r,o,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(n,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,o,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(n.left+n.leftOffset-f/2,s+n.top+p,f,i)},renderSelection:function(n,u){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,i=this.get2DCursorLocation(l),a=this.get2DCursorLocation(r),f=i.lineIndex,s=a.lineIndex,p=i.charIndex<0?0:i.charIndex,v=a.charIndex<0?0:a.charIndex,m=f;m<=s;m++){var b=this._getLineLeftOffset(m)||0,w=this.getHeightOfLine(m),E=0,A=0,O=0;if(m===f&&(A=this.__charBounds[f][p].left),m>=f&&m<s)O=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===s)if(v===0)O=this.__charBounds[s][v].left;else{var L=this._getWidthOfCharSpacing();O=this.__charBounds[s][v-1].left+this.__charBounds[s][v-1].width-L}E=w,(this.lineHeight<1||m===s&&this.lineHeight>1)&&(w/=this.lineHeight);var Y=n.left+b+A,V=O-A,Q=w,J=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",Q=1,J=w):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(Y=this.width-Y-V),u.fillRect(Y,n.top+n.topOffset+J,V,Q),n.topOffset+=E}},getCurrentCharFontSize:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fontSize")},getCurrentCharColor:function(){var n=this._getCurrentCharIndex();return this.getValueOfPropertyAt(n.l,n.c,"fill")},_getCurrentCharIndex:function(){var n=this.get2DCursorLocation(this.selectionStart,!0),u=n.charIndex>0?n.charIndex-1:0;return{l:n.lineIndex,c:u}}}),e.IText.fromObject=function(n,u){if(d(n),n.styles)for(var l in n.styles)for(var r in n.styles[l])d(n.styles[l][r]);e.Object._fromObject("IText",n,u,"text")}}(),function(){var d=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var n=this;this.on("added",function(){var u=n.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,n._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(n))})},initRemovedHandler:function(){var n=this;this.on("removed",function(){var u=n.canvas;u&&(u._iTextInstances=u._iTextInstances||[],e.util.removeFromArray(u._iTextInstances,n),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,n._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(n){n._mouseUpITextHandler=function(){n._iTextInstances&&n._iTextInstances.forEach(function(u){u.__isMousedown=!1})},n.on("mouse:up",n._mouseUpITextHandler)},_removeCanvasHandlers:function(n){n.off("mouse:up",n._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(n,u,l,r){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},n.animate("_currentCursorOpacity",u,{duration:l,onComplete:function(){o.isAborted||n[r]()},onChange:function(){n.canvas&&n.selectionStart===n.selectionEnd&&n.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var n=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){n._currentTickCompleteState=n._animateCursor(n,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(n){var u=this,l=n?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},l)},abortCursorAnimation:function(){var n=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,n&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(n){var u=0,l=n-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)u++,l--;for(;/\S/.test(this._text[l])&&l>-1;)u++,l--;return n-u},findWordBoundaryRight:function(n){var u=0,l=n;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)u++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)u++,l++;return n+u},findLineBoundaryLeft:function(n){for(var u=0,l=n-1;!/\n/.test(this._text[l])&&l>-1;)u++,l--;return n-u},findLineBoundaryRight:function(n){for(var u=0,l=n;!/\n/.test(this._text[l])&&l<this._text.length;)u++,l++;return n+u},searchWordBoundary:function(n,u){for(var l=this._text,r=this._reSpace.test(l[n])?n-1:n,o=l[r],i=e.reNonWord;!i.test(o)&&r>0&&r<l.length;)r+=u,o=l[r];return i.test(o)&&(r+=u===1?0:1),r},selectWord:function(n){n=n||this.selectionStart;var u=this.searchWordBoundary(n,-1),l=this.searchWordBoundary(n,1);this.selectionStart=u,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(n){n=n||this.selectionStart;var u=this.findLineBoundaryLeft(n),l=this.findLineBoundaryRight(n);return this.selectionStart=u,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(n){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(n),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(n){n._iTextInstances&&n._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(n){if(!(!this.__isMousedown||!this.isEditing)){var u=this.getSelectionStartFromPointer(n.e),l=this.selectionStart,r=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||l===r)&&(l===u||r===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==l||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(n,u,l){var r=l.slice(0,n),o=e.util.string.graphemeSplit(r).length;if(n===u)return{selectionStart:o,selectionEnd:o};var i=l.slice(n,u),a=e.util.string.graphemeSplit(i).length;return{selectionStart:o,selectionEnd:o+a}},fromGraphemeToStringSelection:function(n,u,l){var r=l.slice(0,n),o=r.join("").length;if(n===u)return{selectionStart:o,selectionEnd:o};var i=l.slice(n,u),a=i.join("").length;return{selectionStart:o,selectionEnd:o+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var n=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=n.selectionStart,this.hiddenTextarea.selectionEnd=n.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var n=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=n.selectionEnd,this.inCompositionMode||(this.selectionStart=n.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var n=this._calcTextareaPosition();this.hiddenTextarea.style.left=n.left,this.hiddenTextarea.style.top=n.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var n=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(n),l=this.get2DCursorLocation(n),r=l.lineIndex,o=l.charIndex,i=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,a=u.leftOffset,f=this.calcTransformMatrix(),s={x:u.left+a,y:u.top+u.topOffset+i},p=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,m=v.width/p,b=v.height/p,w=m-i,E=b-i,A=v.clientWidth/m,O=v.clientHeight/b;return s=e.util.transformPoint(s,f),s=e.util.transformPoint(s,this.canvas.viewportTransform),s.x*=A,s.y*=O,s.x<0&&(s.x=0),s.x>w&&(s.x=w),s.y<0&&(s.y=0),s.y>E&&(s.y=E),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var n=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),n&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),n&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var n in this.styles)this._textLines[n]||delete this.styles[n]},removeStyleFromTo:function(n,u){var l=this.get2DCursorLocation(n,!0),r=this.get2DCursorLocation(u,!0),o=l.lineIndex,i=l.charIndex,a=r.lineIndex,f=r.charIndex,s,p;if(o!==a){if(this.styles[o])for(s=i;s<this._unwrappedTextLines[o].length;s++)delete this.styles[o][s];if(this.styles[a])for(s=f;s<this._unwrappedTextLines[a].length;s++)p=this.styles[a][s],p&&(this.styles[o]||(this.styles[o]={}),this.styles[o][i+s-f]=p);for(s=o+1;s<=a;s++)delete this.styles[s];this.shiftLineStyles(a,o-a)}else if(this.styles[o]){p=this.styles[o];var v=f-i,m,b;for(s=i;s<f;s++)delete p[s];for(b in this.styles[o])m=parseInt(b,10),m>=f&&(p[m-v]=p[b],delete p[b])}},shiftLineStyles:function(n,u){var l=d(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>n&&(this.styles[o+u]=l[o],l[o-u]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(n,u,l,r){var o,i={},a=!1,f=this._unwrappedTextLines[n].length===u;l||(l=1),this.shiftLineStyles(n,l),this.styles[n]&&(o=this.styles[n][u===0?u:u-1]);for(var s in this.styles[n]){var p=parseInt(s,10);p>=u&&(a=!0,i[p-u]=this.styles[n][s],f&&u===0||delete this.styles[n][s])}var v=!1;for(a&&!f&&(this.styles[n+l]=i,v=!0),v&&l--;l>0;)r&&r[l-1]?this.styles[n+l]={0:d(r[l-1])}:o?this.styles[n+l]={0:d(o)}:delete this.styles[n+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(n,u,l,r){this.styles||(this.styles={});var o=this.styles[n],i=o?d(o):{};l||(l=1);for(var a in i){var f=parseInt(a,10);f>=u&&(o[f+l]=i[f],i[f-l]||delete o[f])}if(this._forceClearCache=!0,r){for(;l--;)Object.keys(r[l]).length&&(this.styles[n]||(this.styles[n]={}),this.styles[n][u+l]=d(r[l]));return}if(o)for(var s=o[u?u-1:1];s&&l--;)this.styles[n][u+l]=d(s)},insertNewStyleBlock:function(n,u,l){for(var r=this.get2DCursorLocation(u,!0),o=[0],i=0,a=0;a<n.length;a++)n[a]===`
`?(i++,o[i]=0):o[i]++;o[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,o[0],l),l=l&&l.slice(o[0]+1)),i&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+o[0],i);for(var a=1;a<i;a++)o[a]>0?this.insertCharStyleObject(r.lineIndex+a,0,o[a],l):l&&this.styles[r.lineIndex+a]&&l[0]&&(this.styles[r.lineIndex+a][0]=l[0]),l=l&&l.slice(o[a]+1);o[a]>0&&this.insertCharStyleObject(r.lineIndex+a,0,o[a],l)},setSelectionStartEndWithShift:function(n,u,l){l<=n?(u===n?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=n),this.selectionStart=l):l>n&&l<u?this._selectionDirection==="right"?this.selectionEnd=l:this.selectionStart=l:(u===n?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=l)},setSelectionInBoundaries:function(){var n=this.text.length;this.selectionStart>n?this.selectionStart=n:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>n?this.selectionEnd=n:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var n=d.pointer;this.isTripleClick(n)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=n,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var n=this.canvas._activeObject;if(n&&n!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var n=this.getSelectionStartFromPointer(d),u=this.selectionStart,l=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(u,l,n):(this.selectionStart=n,this.selectionEnd=n),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var n=this.getLocalPointer(d),u=0,l=0,r=0,o=0,i=0,a,f,s=0,p=this._textLines.length;s<p&&r<=n.y;s++)r+=this.getHeightOfLine(s)*this.scaleY,i=s,s>0&&(o+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));a=this._getLineLeftOffset(i),l=a*this.scaleX,f=this._textLines[i],this.direction==="rtl"&&(n.x=this.width*this.scaleX-n.x+l);for(var v=0,m=f.length;v<m&&(u=l,l+=this.__charBounds[i][v].kernedWidth*this.scaleX,l<=n.x);v++)o++;return this._getNewSelectionStartFromOffset(n,u,l,o,m)},_getNewSelectionStartFromOffset:function(d,n,u,l,r){var o=d.x-n,i=u-d.x,a=i>o||i<0?0:1,f=l+a;return this.flipX&&(f=r-f),f>this._text.length&&(f=this._text.length),f}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+d.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var n=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in n)this[n[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var n=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,r=u.length,o,i,a=r-l,f=this.selectionStart,s=this.selectionEnd,p=f!==s,v,m,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var w=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),E=f>w.selectionStart;p?(o=this._text.slice(f,s),a+=s-f):r<l&&(E?o=this._text.slice(s+a,s):o=this._text.slice(f,f-a)),i=u.slice(w.selectionEnd-a,w.selectionEnd),o&&o.length&&(i.length&&(v=this.getSelectionStyles(f,f+1,!1),v=i.map(function(){return v[0]})),p?(m=f,b=s):E?(m=s-o.length,b=s):(m=s,b=s+o.length),this.removeStyleFromTo(m,b)),i.length&&(n&&i.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(i,f,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(d,n){var u=this._getLineLeftOffset(d),l;return n>0&&(l=this.__charBounds[d][n-1],u+=l.left+l.width),u},getDownCursorOffset:function(d,n){var u=this._getSelectionForOffset(d,n),l=this.get2DCursorLocation(u),r=l.lineIndex;if(r===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-u;var o=l.charIndex,i=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,i),f=this._textLines[r].slice(o);return f.length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(d,n){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&n?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,n){var u=this._getSelectionForOffset(d,n),l=this.get2DCursorLocation(u),r=l.lineIndex;if(r===0||d.metaKey||d.keyCode===33)return-u;var o=l.charIndex,i=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,i),f=this._textLines[r].slice(0,o),s=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-f.length+(1-s)},_getIndexOnLine:function(d,n){for(var u=this._textLines[d],l=this._getLineLeftOffset(d),r=l,o=0,i,a,f=0,s=u.length;f<s;f++)if(i=this.__charBounds[d][f].width,r+=i,r>n){a=!0;var p=r-i,v=r,m=Math.abs(p-n),b=Math.abs(v-n);o=b<m?f:f-1;break}return a||(o=u.length-1),o},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,n){var u="get"+d+"CursorOffset",l=this[u](n,this._selectionDirection==="right");n.shiftKey?this.moveCursorWithShift(l):this.moveCursorWithoutShift(l),l!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var n=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,n),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,n,u){var l;if(d.altKey)l=this["findWordBoundary"+u](this[n]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)l=this["findLineBoundary"+u](this[n]);else return this[n]+=u==="Left"?-1:1,!0;if(typeof l!==void 0&&this[n]!==l)return this[n]=l,!0},_moveLeft:function(d,n){return this._move(d,n,"Left")},_moveRight:function(d,n){return this._move(d,n,"Right")},moveCursorLeftWithoutShift:function(d){var n=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(n=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,n},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,n){var u="moveCursor"+d+"With";this._currentCursorOpacity=1,n.shiftKey?u+="Shift":u+="outShift",this[u](n)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var n=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(n=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,n},removeChars:function(d,n){typeof n>"u"&&(n=d+1),this.removeStyleFromTo(d,n),this._text.splice(d,n-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,n,u,l){typeof l>"u"&&(l=u),l>u&&this.removeStyleFromTo(u,l);var r=e.util.string.graphemeSplit(d);this.insertNewStyleBlock(r,u,n),this._text=[].concat(this._text.slice(0,u),r,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=e.util.toFixed,n=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var l=!0,r=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(l),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,l){var r=[],o=[],i=u,a;this._setSVGBg(o);for(var f=0,s=this._textLines.length;f<s;f++)a=this._getLineLeftOffset(f),(this.textBackgroundColor||this.styleHas("textBackgroundColor",f))&&this._setSVGTextLineBg(o,f,l+a,i),this._setSVGTextLineText(r,f,l+a,i),i+=this.getHeightOfLine(f);return{textSpans:r,textBgRects:o}},_createTextCharSpan:function(u,l,r,o){var i=u!==u.trim()||u.match(n),a=this.getSvgSpanStyles(l,i),f=a?'style="'+a+'"':"",s=l.deltaY,p="",v=e.Object.NUM_FRACTION_DIGITS;return s&&(p=' dy="'+d(s,v)+'" '),['<tspan x="',d(r,v),'" y="',d(o,v),'" ',p,f,">",e.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,l,r,o){var i=this.getHeightOfLine(l),a=this.textAlign.indexOf("justify")!==-1,f,s,p="",v,m,b=0,w=this._textLines[l],E;o+=i*(1-this._fontSizeFraction)/this.lineHeight;for(var A=0,O=w.length-1;A<=O;A++)E=A===O||this.charSpacing,p+=w[A],v=this.__charBounds[l][A],b===0?(r+=v.kernedWidth-v.width,b+=v.width):b+=v.kernedWidth,a&&!E&&this._reSpaceAndTab.test(w[A])&&(E=!0),E||(f=f||this.getCompleteStyleDeclaration(l,A),s=this.getCompleteStyleDeclaration(l,A+1),E=this._hasStyleChangedForSvg(f,s)),E&&(m=this._getStyleDeclaration(l,A)||{},u.push(this._createTextCharSpan(p,m,r,o)),p="",f=s,r+=b,b=0)},_pushTextBgRect:function(u,l,r,o,i,a){var f=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(l),' x="',d(r,f),'" y="',d(o,f),'" width="',d(i,f),'" height="',d(a,f),`"></rect>
`)},_setSVGTextLineBg:function(u,l,r,o){for(var i=this._textLines[l],a=this.getHeightOfLine(l)/this.lineHeight,f=0,s=0,p,v,m=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),b=0,w=i.length;b<w;b++)p=this.__charBounds[l][b],v=this.getValueOfPropertyAt(l,b,"textBackgroundColor"),v!==m?(m&&this._pushTextBgRect(u,m,r+s,o,f,a),s=p.left,f=p.width,m=v):f+=p.kernedWidth;v&&this._pushTextBgRect(u,v,r+s,o,f,a)},_getFillAttributes:function(u){var l=u&&typeof u=="string"?new e.Color(u):"";return!l||!l.getSource()||l.getAlpha()===1?'fill="'+u+'"':'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(u){for(var l=0,r=0,o=0;o<u;o++)l+=this.getHeightOfLine(o);return r=this.getHeightOfLine(o),{lineTop:l,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){var l=e.Object.prototype.getSvgStyles.call(this,u);return l+" white-space: pre;"}})}(),function(d){var n=d.fabric||(d.fabric={});n.Textbox=n.util.createClass(n.IText,n.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:n.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var l=0,r=0,o=0,i={},a=0;a<u.graphemeLines.length;a++)u.graphemeText[o]===`
`&&a>0?(r=0,o++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[o])&&a>0&&(r++,o++),i[a]={line:l,offset:r},o+=u.graphemeLines[a].length,r+=u.graphemeLines[a].length;return i},styleHas:function(u,l){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[l];r&&(l=r.line)}return n.Text.prototype.styleHas.call(this,u,l)},isEmptyStyles:function(u){if(!this.styles)return!0;var l=0,r=u+1,o,i,a=!1,f=this._styleMap[u],s=this._styleMap[u+1];f&&(u=f.line,l=f.offset),s&&(r=s.line,a=r===u,o=s.offset),i=typeof u>"u"?this.styles:{line:this.styles[u]};for(var p in i)for(var v in i[p])if(v>=l&&(!a||v<o))for(var m in i[p][v])return!1;return!0},_getStyleDeclaration:function(u,l){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[u];if(!r)return null;u=r.line,l=r.offset+l}return this.callSuper("_getStyleDeclaration",u,l)},_setStyleDeclaration:function(u,l,r){var o=this._styleMap[u];u=o.line,l=o.offset+l,this.styles[u][l]=r},_deleteStyleDeclaration:function(u,l){var r=this._styleMap[u];u=r.line,l=r.offset+l,delete this.styles[u][l]},_getLineStyle:function(u){var l=this._styleMap[u];return!!this.styles[l.line]},_setLineStyle:function(u){var l=this._styleMap[u];this.styles[l.line]={}},_wrapText:function(u,l){var r=[],o;for(this.isWrapping=!0,o=0;o<u.length;o++)r=r.concat(this._wrapLine(u[o],o,l));return this.isWrapping=!1,r},_measureWord:function(u,l,r){var o=0,i,a=!0;r=r||0;for(var f=0,s=u.length;f<s;f++){var p=this._getGraphemeBox(u[f],l,f+r,i,a);o+=p.kernedWidth,i=u[f]}return o},_wrapLine:function(u,l,r,Y){var i=0,a=this.splitByGrapheme,f=[],s=[],p=a?n.util.string.graphemeSplit(u):u.split(this._wordJoiners),v="",m=0,b=a?"":" ",w=0,E=0,A=0,O=!0,L=this._getWidthOfCharSpacing(),Y=Y||0;p.length===0&&p.push([]),r-=Y;for(var V=0;V<p.length;V++)v=a?p[V]:n.util.string.graphemeSplit(p[V]),w=this._measureWord(v,l,m),m+=v.length,i+=E+w-L,i>r&&!O?(f.push(s),s=[],i=w,O=!0):i+=L,!O&&!a&&s.push(b),s=s.concat(v),E=a?0:this._measureWord([b],l,m),m++,O=!1,w>A&&(A=w);return V&&f.push(s),A+Y>this.dynamicMinWidth&&(this.dynamicMinWidth=A-L+Y),f},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var l=n.Text.prototype._splitTextIntoLines.call(this,u),r=this._wrapText(l.lines,this.width),o=new Array(r.length),i=0;i<r.length;i++)o[i]=r[i].join("");return l.lines=o,l.graphemeLines=r,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var l in this._styleMap)this._textLines[l]&&(u[this._styleMap[l].line]=1);for(var l in this.styles)u[l]||delete this.styles[l]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),n.Textbox.fromObject=function(u,l){return n.Object._fromObject("Textbox",u,l,"text")}}(t),function(){var d=e.controlsUtils,n=d.scaleSkewCursorStyleHandler,u=d.scaleCursorStyleHandler,l=d.scalingEqually,r=d.scalingYOrSkewingX,o=d.scalingXOrSkewingY,i=d.scaleOrSkewActionName,a=e.Object.prototype.controls;if(a.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:n,actionHandler:o,getActionName:i}),a.mr=new e.Control({x:.5,y:0,cursorStyleHandler:n,actionHandler:o,getActionName:i}),a.mb=new e.Control({x:0,y:.5,cursorStyleHandler:n,actionHandler:r,getActionName:i}),a.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:n,actionHandler:r,getActionName:i}),a.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:l}),a.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:l}),a.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:l}),a.br=new e.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:l}),a.mtr=new e.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var f=e.Textbox.prototype.controls={};f.mtr=a.mtr,f.tr=a.tr,f.br=a.br,f.tl=a.tl,f.bl=a.bl,f.mt=a.mt,f.mb=a.mb,f.mr=new e.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:n,actionName:"resizing"}),f.ml=new e.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:n,actionName:"resizing"})}}(),function(){e.Object.ENLIVEN_PROPS.push("eraser");var d=e.Object.prototype._drawClipPath,n=e.Object.prototype.needsItsOwnCache,u=e.Object.prototype.toObject,l=e.Object.prototype.getSvgCommons,r=e.Object.prototype._createBaseClipPathSVGMarkup,o=e.Object.prototype._createBaseSVGMarkup;e.Object.prototype.cacheProperties.push("eraser"),e.Object.prototype.stateProperties.push("eraser"),e.util.object.extend(e.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return n.call(this)||!!this.eraser},_drawClipPath:function(f,s){if(d.call(this,f,s),this.eraser){var p=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:p.x,height:p.y}),d.call(this,f,this.eraser)}},toObject:function(f){var s=u.call(this,["erasable"].concat(f));return this.eraser&&!this.eraser.excludeFromExport&&(s.eraser=this.eraser.toObject(f)),s},getSvgCommons:function(){return l.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(f){return this.eraser?(this.eraser.clipPathId="MASK_"+e.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(f),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(f,s){return[this._createEraserSVGMarkup(s&&s.reviver),r.call(this,f,s)].join("")},_createBaseSVGMarkup:function(f,s){return[this._createEraserSVGMarkup(s&&s.reviver),o.call(this,f,s)].join("")}});var i=e.Group.prototype._restoreObjectsState;e.util.object.extend(e.Group.prototype,{_addEraserPathToObjects:function(f){this._objects.forEach(function(s){e.EraserBrush.prototype._addPathToObjectEraser.call(e.EraserBrush.prototype,s,f)})},applyEraserToObjects:function(){var f=this,s=this.eraser;if(s){delete this.eraser;var p=f.calcTransformMatrix();s.clone(function(v){var m=f.clipPath;v.getObjects("path").forEach(function(b){var w=e.util.multiplyTransformMatrices(p,b.calcTransformMatrix());e.util.applyTransformToObject(b,w),m?m.clone(function(E){var A=e.EraserBrush.prototype.applyClipPathToPath.call(e.EraserBrush.prototype,b,E,p);f._addEraserPathToObjects(A)},["absolutePositioned","inverted"]):f._addEraserPathToObjects(b)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),i.call(this)}}),e.Eraser=e.util.createClass(e.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(f){f.save(),f.fillStyle="black",f.fillRect(-this.width/2,-this.height/2,this.width,this.height),f.restore(),this.callSuper("drawObject",f)},_getBounds:function(){},_toSVG:function(f){var s=["<g ","COMMON_PARTS",` >
`],p=-this.width/2,v=-this.height/2,m=["<rect ",'fill="white" ','x="',p,'" y="',v,'" width="',this.width,'" height="',this.height,`" />
`].join("");s.push("		",m);for(var b=0,w=this._objects.length;b<w;b++)s.push("		",this._objects[b].toSVG(f));return s.push(`</g>
`),s}}),e.Eraser.fromObject=function(f,s){var p=f.objects;e.util.enlivenObjects(p,function(v){var m=e.util.object.clone(f,!0);delete m.objects,e.util.enlivenObjectEnlivables(f,m,function(){s&&s(new e.Eraser(v,m,!0))})})};var a=e.Canvas.prototype._renderOverlay;e.util.object.extend(e.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(f){a.call(this,f),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),e.EraserBrush=e.util.createClass(e.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(f){return f.erasable!==!1},_prepareCollectionTraversal:function(f,s,p){f.forEachObject(function(v){v.forEachObject&&v.erasable==="deep"?this._prepareCollectionTraversal(v,s,p):!this.inverted&&v.erasable&&v.visible?(v.visible=!1,f.dirty=!0,p.visibility.push(v),p.collection.push(f)):this.inverted&&v.visible&&(v.erasable&&v.eraser?(v.eraser.inverted=!0,v.dirty=!0,f.dirty=!0,p.eraser.push(v),p.collection.push(f)):(v.visible=!1,f.dirty=!0,p.visibility.push(v),p.collection.push(f)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=e.util.createCanvasElement());var f=this._patternCanvas;f.width=this.canvas.width,f.height=this.canvas.height;var s=f.getContext("2d");if(this.canvas._isRetinaScaling()){var p=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(p,f,s)}var v=this.canvas.backgroundImage,m=v&&this._isErasable(v),b=this.canvas.overlayImage,w=b&&this._isErasable(b);if(!this.inverted&&(v&&!m||this.canvas.backgroundColor))m&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(s),m&&(this.canvas.backgroundImage=v);else if(this.inverted&&v&&m){var E=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(s),this.canvas.backgroundColor=E}s.save(),s.transform.apply(s,this.canvas.viewportTransform);var A={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,s,A),this.canvas._renderObjects(s,this.canvas._objects),A.visibility.forEach(function(O){O.visible=!0}),A.eraser.forEach(function(O){O.eraser.inverted=!1,O.dirty=!0}),A.collection.forEach(function(O){O.dirty=!0}),s.restore(),!this.inverted&&(b&&!w||this.canvas.overlayColor))w&&(this.canvas.overlayImage=void 0),a.call(this.canvas,s),w&&(this.canvas.overlayImage=b);else if(this.inverted&&b&&w){var E=this.canvas.overlayColor;this.canvas.overlayColor=void 0,a.call(this.canvas,s),this.canvas.overlayColor=E}},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle="black"},_saveAndTransform:function(f){this.callSuper("_saveAndTransform",f),this._setBrushStyles(f),f.globalCompositeOperation=f===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(f,s){this.canvas._isMainEvent(s.e)&&(this._prepareForDrawing(f),this._captureDrawingPath(f),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var f;this.inverted||(f=this.canvas.getContext(),this.callSuper("_render",f)),f=this.canvas.contextTop,this.canvas.clearContext(f),this.callSuper("_render",f),f.save();var s=this.canvas.getRetinaScaling(),p=1/s;f.scale(p,p),f.globalCompositeOperation="source-in",f.drawImage(this._patternCanvas,0,0),f.restore()},createPath:function(f){var s=this.callSuper("createPath",f);return s.globalCompositeOperation=this.inverted?"source-over":"destination-out",s.stroke=this.inverted?"white":"black",s},applyClipPathToPath:function(f,s,p){var v=e.util.invertTransform(f.calcTransformMatrix()),m=s.calcTransformMatrix(),b=s.absolutePositioned?v:e.util.multiplyTransformMatrices(v,p);return s.absolutePositioned=!1,e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(b,m)),f.clipPath=f.clipPath?e.util.mergeClipPaths(s,f.clipPath):s,f},clonePathWithClipPath:function(f,s,p){var v=s.calcTransformMatrix(),m=s.clipPath,b=this;f.clone(function(w){m.clone(function(E){p(b.applyClipPathToPath(w,E,v))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(f,s){var p=this;if(f.forEachObject&&f.erasable==="deep"){var v=f._objects.filter(function(b){return b.erasable});v.length>0&&f.clipPath?this.clonePathWithClipPath(s,f,function(b){v.forEach(function(w){p._addPathToObjectEraser(w,b)})}):v.length>0&&v.forEach(function(b){p._addPathToObjectEraser(b,s)});return}var m=f.eraser;m||(m=new e.Eraser,f.eraser=m),s.clone(function(b){var w=e.util.multiplyTransformMatrices(e.util.invertTransform(f.calcTransformMatrix()),b.calcTransformMatrix());e.util.applyTransformToObject(b,w),m.addWithUpdate(b),f.set("dirty",!0),f.fire("erasing:end",{path:b}),f.group&&Array.isArray(p.__subTargets)&&p.__subTargets.push(f)})},applyEraserToCanvas:function(f){var s=this.canvas,p={};return["backgroundImage","overlayImage"].forEach(function(v){var m=s[v];m&&m.erasable&&(this._addPathToObjectEraser(m,f),p[v]=m)},this),p},_finalizeAndAddPath:function(){var f=this.canvas.contextTop,s=this.canvas;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),s.clearContext(s.contextTop),this._isErasing=!1;var p=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!p||this._isEmptySVGPath(p)){s.fire("erasing:end"),s.requestRenderAll();return}var v=this.createPath(p);v.setCoords(),s.fire("before:path:created",{path:v});var m=this.applyEraserToCanvas(v),b=this;this.__subTargets=[];var w=[];s.forEachObject(function(E){E.erasable&&E.intersectsWithObject(v,!0,!0)&&(b._addPathToObjectEraser(E,v),w.push(E))}),s.fire("erasing:end",{path:v,targets:w,subTargets:this.__subTargets,drawables:m}),delete this.__subTargets,s.requestRenderAll(),this._resetShadow(),s.fire("path:created",{path:v})}})}()})(ft);class ur{constructor(e,c){ve(this,"core");ve(this,"config");ve(this,"c");ve(this,"name");this.core=e,this.config=c,this.c=e.c,this.name="unknown"}}class gg extends ur{constructor(c,h){super(c,h);ve(this,"onPathCreated");this.onPathCreated=g=>{const y=g.path;y.selectable=!1,y.hoverCursor="default"}}onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new ft.fabric.EraserBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*4/this.core.zoomMin,this.c.on("path:created",this.onPathCreated)}onDeselect(){this.c.isDrawingMode=!1,this.c.off("path:created",this.onPathCreated)}}class pg extends ur{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new ft.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*1/this.core.zoomMin,this.c.freeDrawingBrush.color=this.config.color.code}onDeselect(){this.c.isDrawingMode=!1}}function vg(t,e){var c=parseInt(t.slice(1,3),16),h=parseInt(t.slice(3,5),16),g=parseInt(t.slice(5,7),16);return e?"rgba("+c+", "+h+", "+g+", "+e+")":"rgb("+c+", "+h+", "+g+")"}class mg extends ur{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new ft.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*8/this.core.zoomMin,this.c.freeDrawingBrush.color=vg(this.config.color.code,.4),this.c.isDrawingMode=!0}onDeselect(){this.c.isDrawingMode=!1}}class yg extends ur{constructor(c,h=null){super(c,h);ve(this,"touchPositions");ve(this,"onMouseDown");ve(this,"isDragging");ve(this,"onMouseUp");ve(this,"onMouseMove");ve(this,"onObjectSelected");ve(this,"onSelectionCleared");ve(this,"onTouchDrag");ve(this,"lastPosX");ve(this,"lastPosY");ve(this,"pausePanning");this.touchPositions={},this.onMouseDown=g=>{const y=g.e;if(y.type==="touchstart"){this.isDragging=y.touches.length===1;for(const _ of y.changedTouches)this.touchPositions[_.identifier]={x:_.clientX,y:_.clientY}}else this.isDragging=!0,this.lastPosX=y.clientX,this.lastPosY=y.clientY},this.onMouseUp=g=>{const y=g.e;if(y.type==="touchend")for(const _ of y.changedTouches)delete this.touchPositions[_.identifier];this.c.setViewportTransform(this.c.viewportTransform),this.isDragging=!1},this.onMouseMove=g=>{if(g.e.type==="mousemove"&&this.isDragging){const y=g.e;this.core.pan(y.clientX-this.lastPosX,y.clientY-this.lastPosY),this.lastPosX=y.clientX,this.lastPosY=y.clientY}},this.onObjectSelected=g=>{this.pausePanning=!0},this.onSelectionCleared=g=>{this.pausePanning=!1},this.onTouchDrag=g=>{const y=g.e;if(y.type==="touchmove"&&this.isDragging){if(y.touches.length>1)return;for(const _ of y.changedTouches){const x=this.touchPositions[_.identifier];if(!x)return;this.core.pan(_.clientX-x.x,_.clientY-x.y),this.touchPositions[_.identifier]={x:_.clientX,y:_.clientY}}}}}onSelect(){this.c.on("mouse:down",this.onMouseDown),this.c.on("mouse:move",this.onMouseMove),this.c.on("mouse:up",this.onMouseUp),this.c.on("object:selected",this.onObjectSelected),this.c.on("selection:cleared",this.onSelectionCleared),this.c.on("touch:drag",this.onTouchDrag)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:move",this.onMouseMove),this.c.off("mouse:up",this.onMouseUp),this.c.off("object:selected",this.onObjectSelected),this.c.off("selection:cleared",this.onSelectionCleared),this.c.off("touch:drag",this.onTouchDrag)}}class vl extends ur{constructor(e,c=null){super(e,c)}onDeselect(){this.c.discardActiveObject().renderAll()}}class bg extends ur{constructor(c,h=null){super(c,h);ve(this,"selected",!1);ve(this,"onMouseDownBefore",c=>{this.selected=!!this.c.getActiveObject()});ve(this,"onMouseDown",c=>{if(this.selected)return;const h=c.e,g={x:h.clientX,y:h.clientY};this.core.addText("text",g)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}function ai(t){"@babel/helpers - typeof";return ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ai(t)}function hr(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function rt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function kt(t){rt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ai(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function _g(t,e){rt(2,arguments);var c=kt(t).getTime(),h=hr(e);return new Date(c+h)}var wg={};function li(){return wg}function xg(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Cg(t){return rt(1,arguments),t instanceof Date||ai(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Sg(t){if(rt(1,arguments),!Cg(t)&&typeof t!="number")return!1;var e=kt(t);return!isNaN(Number(e))}function Tg(t,e){rt(2,arguments);var c=hr(e);return _g(t,-c)}var Eg=864e5;function Og(t){rt(1,arguments);var e=kt(t),c=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var h=e.getTime(),g=c-h;return Math.floor(g/Eg)+1}function ci(t){rt(1,arguments);var e=1,c=kt(t),h=c.getUTCDay(),g=(h<e?7:0)+h-e;return c.setUTCDate(c.getUTCDate()-g),c.setUTCHours(0,0,0,0),c}function ml(t){rt(1,arguments);var e=kt(t),c=e.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(c+1,0,4),h.setUTCHours(0,0,0,0);var g=ci(h),y=new Date(0);y.setUTCFullYear(c,0,4),y.setUTCHours(0,0,0,0);var _=ci(y);return e.getTime()>=g.getTime()?c+1:e.getTime()>=_.getTime()?c:c-1}function Pg(t){rt(1,arguments);var e=ml(t),c=new Date(0);c.setUTCFullYear(e,0,4),c.setUTCHours(0,0,0,0);var h=ci(c);return h}var Ag=6048e5;function Dg(t){rt(1,arguments);var e=kt(t),c=ci(e).getTime()-Pg(e).getTime();return Math.round(c/Ag)+1}function ui(t,e){var c,h,g,y,_,x,T,d;rt(1,arguments);var n=li(),u=hr((c=(h=(g=(y=e==null?void 0:e.weekStartsOn)!==null&&y!==void 0?y:e==null||(_=e.locale)===null||_===void 0||(x=_.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&g!==void 0?g:n.weekStartsOn)!==null&&h!==void 0?h:(T=n.locale)===null||T===void 0||(d=T.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&c!==void 0?c:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=kt(t),r=l.getUTCDay(),o=(r<u?7:0)+r-u;return l.setUTCDate(l.getUTCDate()-o),l.setUTCHours(0,0,0,0),l}function yl(t,e){var c,h,g,y,_,x,T,d;rt(1,arguments);var n=kt(t),u=n.getUTCFullYear(),l=li(),r=hr((c=(h=(g=(y=e==null?void 0:e.firstWeekContainsDate)!==null&&y!==void 0?y:e==null||(_=e.locale)===null||_===void 0||(x=_.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&g!==void 0?g:l.firstWeekContainsDate)!==null&&h!==void 0?h:(T=l.locale)===null||T===void 0||(d=T.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&c!==void 0?c:1);if(!(r>=1&&r<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var o=new Date(0);o.setUTCFullYear(u+1,0,r),o.setUTCHours(0,0,0,0);var i=ui(o,e),a=new Date(0);a.setUTCFullYear(u,0,r),a.setUTCHours(0,0,0,0);var f=ui(a,e);return n.getTime()>=i.getTime()?u+1:n.getTime()>=f.getTime()?u:u-1}function Mg(t,e){var c,h,g,y,_,x,T,d;rt(1,arguments);var n=li(),u=hr((c=(h=(g=(y=e==null?void 0:e.firstWeekContainsDate)!==null&&y!==void 0?y:e==null||(_=e.locale)===null||_===void 0||(x=_.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&g!==void 0?g:n.firstWeekContainsDate)!==null&&h!==void 0?h:(T=n.locale)===null||T===void 0||(d=T.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&c!==void 0?c:1),l=yl(t,e),r=new Date(0);r.setUTCFullYear(l,0,u),r.setUTCHours(0,0,0,0);var o=ui(r,e);return o}var kg=6048e5;function jg(t,e){rt(1,arguments);var c=kt(t),h=ui(c,e).getTime()-Mg(c,e).getTime();return Math.round(h/kg)+1}function Be(t,e){for(var c=t<0?"-":"",h=Math.abs(t).toString();h.length<e;)h="0"+h;return c+h}var Rg={y:function(e,c){var h=e.getUTCFullYear(),g=h>0?h:1-h;return Be(c==="yy"?g%100:g,c.length)},M:function(e,c){var h=e.getUTCMonth();return c==="M"?String(h+1):Be(h+1,2)},d:function(e,c){return Be(e.getUTCDate(),c.length)},a:function(e,c){var h=e.getUTCHours()/12>=1?"pm":"am";switch(c){case"a":case"aa":return h.toUpperCase();case"aaa":return h;case"aaaaa":return h[0];case"aaaa":default:return h==="am"?"a.m.":"p.m."}},h:function(e,c){return Be(e.getUTCHours()%12||12,c.length)},H:function(e,c){return Be(e.getUTCHours(),c.length)},m:function(e,c){return Be(e.getUTCMinutes(),c.length)},s:function(e,c){return Be(e.getUTCSeconds(),c.length)},S:function(e,c){var h=c.length,g=e.getUTCMilliseconds(),y=Math.floor(g*Math.pow(10,h-3));return Be(y,c.length)}};const qt=Rg;var Mr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ig={G:function(e,c,h){var g=e.getUTCFullYear()>0?1:0;switch(c){case"G":case"GG":case"GGG":return h.era(g,{width:"abbreviated"});case"GGGGG":return h.era(g,{width:"narrow"});case"GGGG":default:return h.era(g,{width:"wide"})}},y:function(e,c,h){if(c==="yo"){var g=e.getUTCFullYear(),y=g>0?g:1-g;return h.ordinalNumber(y,{unit:"year"})}return qt.y(e,c)},Y:function(e,c,h,g){var y=yl(e,g),_=y>0?y:1-y;if(c==="YY"){var x=_%100;return Be(x,2)}return c==="Yo"?h.ordinalNumber(_,{unit:"year"}):Be(_,c.length)},R:function(e,c){var h=ml(e);return Be(h,c.length)},u:function(e,c){var h=e.getUTCFullYear();return Be(h,c.length)},Q:function(e,c,h){var g=Math.ceil((e.getUTCMonth()+1)/3);switch(c){case"Q":return String(g);case"QQ":return Be(g,2);case"Qo":return h.ordinalNumber(g,{unit:"quarter"});case"QQQ":return h.quarter(g,{width:"abbreviated",context:"formatting"});case"QQQQQ":return h.quarter(g,{width:"narrow",context:"formatting"});case"QQQQ":default:return h.quarter(g,{width:"wide",context:"formatting"})}},q:function(e,c,h){var g=Math.ceil((e.getUTCMonth()+1)/3);switch(c){case"q":return String(g);case"qq":return Be(g,2);case"qo":return h.ordinalNumber(g,{unit:"quarter"});case"qqq":return h.quarter(g,{width:"abbreviated",context:"standalone"});case"qqqqq":return h.quarter(g,{width:"narrow",context:"standalone"});case"qqqq":default:return h.quarter(g,{width:"wide",context:"standalone"})}},M:function(e,c,h){var g=e.getUTCMonth();switch(c){case"M":case"MM":return qt.M(e,c);case"Mo":return h.ordinalNumber(g+1,{unit:"month"});case"MMM":return h.month(g,{width:"abbreviated",context:"formatting"});case"MMMMM":return h.month(g,{width:"narrow",context:"formatting"});case"MMMM":default:return h.month(g,{width:"wide",context:"formatting"})}},L:function(e,c,h){var g=e.getUTCMonth();switch(c){case"L":return String(g+1);case"LL":return Be(g+1,2);case"Lo":return h.ordinalNumber(g+1,{unit:"month"});case"LLL":return h.month(g,{width:"abbreviated",context:"standalone"});case"LLLLL":return h.month(g,{width:"narrow",context:"standalone"});case"LLLL":default:return h.month(g,{width:"wide",context:"standalone"})}},w:function(e,c,h,g){var y=jg(e,g);return c==="wo"?h.ordinalNumber(y,{unit:"week"}):Be(y,c.length)},I:function(e,c,h){var g=Dg(e);return c==="Io"?h.ordinalNumber(g,{unit:"week"}):Be(g,c.length)},d:function(e,c,h){return c==="do"?h.ordinalNumber(e.getUTCDate(),{unit:"date"}):qt.d(e,c)},D:function(e,c,h){var g=Og(e);return c==="Do"?h.ordinalNumber(g,{unit:"dayOfYear"}):Be(g,c.length)},E:function(e,c,h){var g=e.getUTCDay();switch(c){case"E":case"EE":case"EEE":return h.day(g,{width:"abbreviated",context:"formatting"});case"EEEEE":return h.day(g,{width:"narrow",context:"formatting"});case"EEEEEE":return h.day(g,{width:"short",context:"formatting"});case"EEEE":default:return h.day(g,{width:"wide",context:"formatting"})}},e:function(e,c,h,g){var y=e.getUTCDay(),_=(y-g.weekStartsOn+8)%7||7;switch(c){case"e":return String(_);case"ee":return Be(_,2);case"eo":return h.ordinalNumber(_,{unit:"day"});case"eee":return h.day(y,{width:"abbreviated",context:"formatting"});case"eeeee":return h.day(y,{width:"narrow",context:"formatting"});case"eeeeee":return h.day(y,{width:"short",context:"formatting"});case"eeee":default:return h.day(y,{width:"wide",context:"formatting"})}},c:function(e,c,h,g){var y=e.getUTCDay(),_=(y-g.weekStartsOn+8)%7||7;switch(c){case"c":return String(_);case"cc":return Be(_,c.length);case"co":return h.ordinalNumber(_,{unit:"day"});case"ccc":return h.day(y,{width:"abbreviated",context:"standalone"});case"ccccc":return h.day(y,{width:"narrow",context:"standalone"});case"cccccc":return h.day(y,{width:"short",context:"standalone"});case"cccc":default:return h.day(y,{width:"wide",context:"standalone"})}},i:function(e,c,h){var g=e.getUTCDay(),y=g===0?7:g;switch(c){case"i":return String(y);case"ii":return Be(y,c.length);case"io":return h.ordinalNumber(y,{unit:"day"});case"iii":return h.day(g,{width:"abbreviated",context:"formatting"});case"iiiii":return h.day(g,{width:"narrow",context:"formatting"});case"iiiiii":return h.day(g,{width:"short",context:"formatting"});case"iiii":default:return h.day(g,{width:"wide",context:"formatting"})}},a:function(e,c,h){var g=e.getUTCHours(),y=g/12>=1?"pm":"am";switch(c){case"a":case"aa":return h.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"aaa":return h.dayPeriod(y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return h.dayPeriod(y,{width:"narrow",context:"formatting"});case"aaaa":default:return h.dayPeriod(y,{width:"wide",context:"formatting"})}},b:function(e,c,h){var g=e.getUTCHours(),y;switch(g===12?y=Mr.noon:g===0?y=Mr.midnight:y=g/12>=1?"pm":"am",c){case"b":case"bb":return h.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"bbb":return h.dayPeriod(y,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return h.dayPeriod(y,{width:"narrow",context:"formatting"});case"bbbb":default:return h.dayPeriod(y,{width:"wide",context:"formatting"})}},B:function(e,c,h){var g=e.getUTCHours(),y;switch(g>=17?y=Mr.evening:g>=12?y=Mr.afternoon:g>=4?y=Mr.morning:y=Mr.night,c){case"B":case"BB":case"BBB":return h.dayPeriod(y,{width:"abbreviated",context:"formatting"});case"BBBBB":return h.dayPeriod(y,{width:"narrow",context:"formatting"});case"BBBB":default:return h.dayPeriod(y,{width:"wide",context:"formatting"})}},h:function(e,c,h){if(c==="ho"){var g=e.getUTCHours()%12;return g===0&&(g=12),h.ordinalNumber(g,{unit:"hour"})}return qt.h(e,c)},H:function(e,c,h){return c==="Ho"?h.ordinalNumber(e.getUTCHours(),{unit:"hour"}):qt.H(e,c)},K:function(e,c,h){var g=e.getUTCHours()%12;return c==="Ko"?h.ordinalNumber(g,{unit:"hour"}):Be(g,c.length)},k:function(e,c,h){var g=e.getUTCHours();return g===0&&(g=24),c==="ko"?h.ordinalNumber(g,{unit:"hour"}):Be(g,c.length)},m:function(e,c,h){return c==="mo"?h.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):qt.m(e,c)},s:function(e,c,h){return c==="so"?h.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):qt.s(e,c)},S:function(e,c){return qt.S(e,c)},X:function(e,c,h,g){var y=g._originalDate||e,_=y.getTimezoneOffset();if(_===0)return"Z";switch(c){case"X":return _l(_);case"XXXX":case"XX":return fr(_);case"XXXXX":case"XXX":default:return fr(_,":")}},x:function(e,c,h,g){var y=g._originalDate||e,_=y.getTimezoneOffset();switch(c){case"x":return _l(_);case"xxxx":case"xx":return fr(_);case"xxxxx":case"xxx":default:return fr(_,":")}},O:function(e,c,h,g){var y=g._originalDate||e,_=y.getTimezoneOffset();switch(c){case"O":case"OO":case"OOO":return"GMT"+bl(_,":");case"OOOO":default:return"GMT"+fr(_,":")}},z:function(e,c,h,g){var y=g._originalDate||e,_=y.getTimezoneOffset();switch(c){case"z":case"zz":case"zzz":return"GMT"+bl(_,":");case"zzzz":default:return"GMT"+fr(_,":")}},t:function(e,c,h,g){var y=g._originalDate||e,_=Math.floor(y.getTime()/1e3);return Be(_,c.length)},T:function(e,c,h,g){var y=g._originalDate||e,_=y.getTime();return Be(_,c.length)}};function bl(t,e){var c=t>0?"-":"+",h=Math.abs(t),g=Math.floor(h/60),y=h%60;if(y===0)return c+String(g);var _=e||"";return c+String(g)+_+Be(y,2)}function _l(t,e){if(t%60===0){var c=t>0?"-":"+";return c+Be(Math.abs(t)/60,2)}return fr(t,e)}function fr(t,e){var c=e||"",h=t>0?"-":"+",g=Math.abs(t),y=Be(Math.floor(g/60),2),_=Be(g%60,2);return h+y+c+_}const Lg=Ig;var wl=function(e,c){switch(e){case"P":return c.date({width:"short"});case"PP":return c.date({width:"medium"});case"PPP":return c.date({width:"long"});case"PPPP":default:return c.date({width:"full"})}},xl=function(e,c){switch(e){case"p":return c.time({width:"short"});case"pp":return c.time({width:"medium"});case"ppp":return c.time({width:"long"});case"pppp":default:return c.time({width:"full"})}},Fg=function(e,c){var h=e.match(/(P+)(p+)?/)||[],g=h[1],y=h[2];if(!y)return wl(e,c);var _;switch(g){case"P":_=c.dateTime({width:"short"});break;case"PP":_=c.dateTime({width:"medium"});break;case"PPP":_=c.dateTime({width:"long"});break;case"PPPP":default:_=c.dateTime({width:"full"});break}return _.replace("{{date}}",wl(g,c)).replace("{{time}}",xl(y,c))},Bg={p:xl,P:Fg};const Ng=Bg;var Vg=["D","DD"],Yg=["YY","YYYY"];function Ug(t){return Vg.indexOf(t)!==-1}function Hg(t){return Yg.indexOf(t)!==-1}function Cl(t,e,c){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zg={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wg=function(e,c,h){var g,y=zg[e];return typeof y=="string"?g=y:c===1?g=y.one:g=y.other.replace("{{count}}",c.toString()),h!=null&&h.addSuffix?h.comparison&&h.comparison>0?"in "+g:g+" ago":g};const Xg=Wg;function mo(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=e.width?String(e.width):t.defaultWidth,h=t.formats[c]||t.formats[t.defaultWidth];return h}}var Gg={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$g={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qg={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Kg={date:mo({formats:Gg,defaultWidth:"full"}),time:mo({formats:$g,defaultWidth:"full"}),dateTime:mo({formats:qg,defaultWidth:"full"})};const Qg=Kg;var Jg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zg=function(e,c,h,g){return Jg[e]};const ep=Zg;function fn(t){return function(e,c){var h=c!=null&&c.context?String(c.context):"standalone",g;if(h==="formatting"&&t.formattingValues){var y=t.defaultFormattingWidth||t.defaultWidth,_=c!=null&&c.width?String(c.width):y;g=t.formattingValues[_]||t.formattingValues[y]}else{var x=t.defaultWidth,T=c!=null&&c.width?String(c.width):t.defaultWidth;g=t.values[T]||t.values[x]}var d=t.argumentCallback?t.argumentCallback(e):e;return g[d]}}var tp={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rp={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},np={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ip={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},op={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sp={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ap=function(e,c){var h=Number(e),g=h%100;if(g>20||g<10)switch(g%10){case 1:return h+"st";case 2:return h+"nd";case 3:return h+"rd"}return h+"th"},lp={ordinalNumber:ap,era:fn({values:tp,defaultWidth:"wide"}),quarter:fn({values:rp,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:fn({values:np,defaultWidth:"wide"}),day:fn({values:ip,defaultWidth:"wide"}),dayPeriod:fn({values:op,defaultWidth:"wide",formattingValues:sp,defaultFormattingWidth:"wide"})};const cp=lp;function dn(t){return function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=c.width,g=h&&t.matchPatterns[h]||t.matchPatterns[t.defaultMatchWidth],y=e.match(g);if(!y)return null;var _=y[0],x=h&&t.parsePatterns[h]||t.parsePatterns[t.defaultParseWidth],T=Array.isArray(x)?hp(x,function(u){return u.test(_)}):up(x,function(u){return u.test(_)}),d;d=t.valueCallback?t.valueCallback(T):T,d=c.valueCallback?c.valueCallback(d):d;var n=e.slice(_.length);return{value:d,rest:n}}}function up(t,e){for(var c in t)if(t.hasOwnProperty(c)&&e(t[c]))return c}function hp(t,e){for(var c=0;c<t.length;c++)if(e(t[c]))return c}function fp(t){return function(e){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=e.match(t.matchPattern);if(!h)return null;var g=h[0],y=e.match(t.parsePattern);if(!y)return null;var _=t.valueCallback?t.valueCallback(y[0]):y[0];_=c.valueCallback?c.valueCallback(_):_;var x=e.slice(g.length);return{value:_,rest:x}}}var dp=/^(\d+)(th|st|nd|rd)?/i,gp=/\d+/i,pp={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vp={any:[/^b/i,/^(a|c)/i]},mp={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yp={any:[/1/i,/2/i,/3/i,/4/i]},bp={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_p={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wp={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xp={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cp={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sp={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tp={ordinalNumber:fp({matchPattern:dp,parsePattern:gp,valueCallback:function(e){return parseInt(e,10)}}),era:dn({matchPatterns:pp,defaultMatchWidth:"wide",parsePatterns:vp,defaultParseWidth:"any"}),quarter:dn({matchPatterns:mp,defaultMatchWidth:"wide",parsePatterns:yp,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:dn({matchPatterns:bp,defaultMatchWidth:"wide",parsePatterns:_p,defaultParseWidth:"any"}),day:dn({matchPatterns:wp,defaultMatchWidth:"wide",parsePatterns:xp,defaultParseWidth:"any"}),dayPeriod:dn({matchPatterns:Cp,defaultMatchWidth:"any",parsePatterns:Sp,defaultParseWidth:"any"})},Ep={code:"en-US",formatDistance:Xg,formatLong:Qg,formatRelative:ep,localize:cp,match:Tp,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Op=Ep;var Pp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ap=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dp=/^'([^]*?)'?$/,Mp=/''/g,kp=/[a-zA-Z]/;function Sl(t,e,c){var h,g,y,_,x,T,d,n,u,l,r,o,i,a,f,s,p,v;rt(2,arguments);var m=String(e),b=li(),w=(h=(g=c==null?void 0:c.locale)!==null&&g!==void 0?g:b.locale)!==null&&h!==void 0?h:Op,E=hr((y=(_=(x=(T=c==null?void 0:c.firstWeekContainsDate)!==null&&T!==void 0?T:c==null||(d=c.locale)===null||d===void 0||(n=d.options)===null||n===void 0?void 0:n.firstWeekContainsDate)!==null&&x!==void 0?x:b.firstWeekContainsDate)!==null&&_!==void 0?_:(u=b.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&y!==void 0?y:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=hr((r=(o=(i=(a=c==null?void 0:c.weekStartsOn)!==null&&a!==void 0?a:c==null||(f=c.locale)===null||f===void 0||(s=f.options)===null||s===void 0?void 0:s.weekStartsOn)!==null&&i!==void 0?i:b.weekStartsOn)!==null&&o!==void 0?o:(p=b.locale)===null||p===void 0||(v=p.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&r!==void 0?r:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var O=kt(t);if(!Sg(O))throw new RangeError("Invalid time value");var L=xg(O),Y=Tg(O,L),V={firstWeekContainsDate:E,weekStartsOn:A,locale:w,_originalDate:O},Q=m.match(Ap).map(function(J){var Z=J[0];if(Z==="p"||Z==="P"){var re=Ng[Z];return re(J,w.formatLong)}return J}).join("").match(Pp).map(function(J){if(J==="''")return"'";var Z=J[0];if(Z==="'")return jp(J);var re=Lg[Z];if(re)return!(c!=null&&c.useAdditionalWeekYearTokens)&&Hg(J)&&Cl(J,e,String(t)),!(c!=null&&c.useAdditionalDayOfYearTokens)&&Ug(J)&&Cl(J,e,String(t)),re(Y,J,w.localize,V);if(Z.match(kp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return J}).join("");return Q}function jp(t){var e=t.match(Dp);return e?e[1].replace(Mp,"'"):t}class Rp extends ur{constructor(c,h=null){super(c,h);ve(this,"selected",!1);ve(this,"onMouseDownBefore",c=>{this.selected=!!this.c.getActiveObject()});ve(this,"onMouseDown",c=>{if(this.selected)return;const h=c.e,g={x:h.clientX,y:h.clientY},y=new Date;this.core.addText(Sl(y,"yyyy-MM-dd"),g)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}const we={FREEDRAW:"FREEDRAW",SELECT:"SELECT",PAN:"PAN",TEXT:"TEXT",MARKER:"MARKER",ERASER:"ERASER",TIMESTAMP:"TIMESTAMP",SIMPLE_INPUT:"SIMPLE_INPUT"},Nt={BLACK:"#000000",RED:"#d82735",YELLOW:"#ffcb35",GREEN:"#009e47",BLUE:"#0052a5"},hi=6,Tl=60,Ip={HISTORY_CHANGE:"history.change",AVAILABILITY_CHANGE:"availability.change",TOOL_CHANGE:"tool.change",MODE_CHANGE:"mode.change",TEXT_CHANGE:"text.change"},Lp={BRUSH:"BRUSH",TEXT:"TEXT",IMAGE:"IMAGE"},Fp={FREEDRAW:"FREEBRUSH",MARKER:"MARKER",ERASER:"ERASER",TEXT:"TEXT"},qe=class qe extends EventTarget{constructor({imageUrl:c,touchEnabled:h}){super();ve(this,"mode",qe.Mode.BRUSH);ve(this,"imageUrl");ve(this,"_busy");ve(this,"zoomMin",1);ve(this,"zoomMax",2);ve(this,"history",{index:-1,records:[]});ve(this,"_isTraversingHistory",!1);ve(this,"touchEnabled");ve(this,"c",null);ve(this,"tool",null);ve(this,"config");ve(this,"isDragging");ve(this,"zoomStartScale");ve(this,"touches");ve(this,"lastPoint");ve(this,"onMouseWheel");ve(this,"onMouseUp");ve(this,"onGesture");ve(this,"onObjectAdded");ve(this,"onObjectModified");ve(this,"onObjectRemoved");ve(this,"onObjectSelected");ve(this,"onObjectSelectionUpdated");ve(this,"onObjectDeselected");ve(this,"onEraseEnd");ve(this,"containerSize");ve(this,"onHistoryChangeListener");ve(this,"onAvailabilityChangeListener");ve(this,"tools",{[we.FREEDRAW]:{class:pg},[we.MARKER]:{class:mg},[we.ERASER]:{class:gg},[we.PAN]:{class:yg},[we.SELECT]:{class:vl},[we.TEXT]:{class:bg},[we.TIMESTAMP]:{class:Rp},[we.SIMPLE_INPUT]:{class:vl}});this.config=this.fetchConfig(),this._busy=!0,this.imageUrl=c,this.touchEnabled=h}setCanvas(c){this.c=new ft.fabric.Canvas(c,{selection:!1});const h=this.c;this.c.usePencil=this.touchEnabled?this.config.usePencil:!1,ft.fabric.Image.fromURL(this.imageUrl,g=>{h.getElement()&&(g.erasable=!1,this.busy=!1,h.setBackgroundImage(g,null),this.fitCanvas(),this.pushHistory(),this.selectTool(this.fetchTool()),this.c.on("touch:gesture",this.onGesture),this.c.on("mouse:up",this.onMouseUp),this.c.on("mouse:wheel",this.onMouseWheel),this.c.on("object:added",this.onObjectAdded),this.c.on("object:modified",this.onObjectModified),this.c.on("object:removed",this.onObjectRemoved),this.c.on("selection:created",this.onObjectSelected),this.c.on("selection:updated",this.onObjectSelectionUpdated),this.c.on("selection:cleared",this.onObjectDeselected),this.c.on("erasing:end",this.onEraseEnd))},{crossOrigin:"anonymous"}),this.onMouseWheel=g=>{g.e.preventDefault(),g.e.stopPropagation();const y=g.e.deltaY;this.zoom({x:g.e.offsetX,y:g.e.offsetY},this.c.getZoom()*.999**y)},this.onGesture=g=>{const y=g.e;if(y.touches&&y.touches.length===2){this.isDragging=!1;const _=new ft.fabric.Point(g.self.x,g.self.y),x=[];for(const d of y.touches)x.push({identifier:d.identifier,clientX:d.clientX,clientY:d.clientY});if(g.self.state==="start"){this.zoomStartScale=this.c.getZoom(),this.touches=x;return}this.lastPoint&&this.pan(_.x-this.lastPoint.x,_.y-this.lastPoint.y);const T=this.zoomStartScale*(y.scale??g.self.scale);this.zoom(_,T),this.lastPoint=_,this.touches=x}},this.onMouseUp=g=>{g.e.type==="touchend"&&(this.lastPoint=null,this.touches=null)},this.onObjectAdded=g=>{if(g.target.type==="path"){const y=g.target;y.selectable=!1,y.hoverCursor="default"}this.c.getObjects("image").forEach(y=>{this.c.bringToFront(y)}),this.c.getObjects("path").forEach(y=>{this.c.bringToFront(y)}),this.c.getObjects("i-text").forEach(y=>{this.c.bringToFront(y)}),!this.isTraversingHistory&&this.pushHistory()},this.onObjectModified=g=>{if(!this.isTraversingHistory){if(g.target.type==="i-text"&&g.target.text.trim()===""){const y=this.isTraversingHistory;this.isTraversingHistory=!0,this.c.remove(g.target),this.isTraversingHistory=y}this.pushHistory()}},this.onEraseEnd=g=>{this.isTraversingHistory||this.pushHistory()},this.onObjectRemoved=g=>{this.isTraversingHistory||this.pushHistory()},this.onObjectSelected=g=>{const y=g.selected[0];switch(y.type){case"i-text":return this._dispatch(qe.Event.MODE_CHANGE,qe.Mode.TEXT);case"image":return this._dispatch(qe.Event.MODE_CHANGE,qe.Mode.IMAGE);default:throw new Error(`object type ${y.type} selected`)}},this.onObjectSelectionUpdated=g=>{switch(g.selected[0].type){case"i-text":return this._dispatch(qe.Event.MODE_CHANGE,qe.Mode.TEXT);case"image":return this._dispatch(qe.Event.MODE_CHANGE,qe.Mode.IMAGE)}},this.onObjectDeselected=g=>{this._dispatch(qe.Event.MODE_CHANGE,qe.Mode.BRUSH)}}zoom(c,h){const g=Math.max(this.zoomMin,Math.min(this.zoomMax,h));this.c.zoomToPoint(c,g),this.adjustPan()}pan(c,h){this.c.relativePan({x:c,y:h}),this.adjustPan()}clamp(c,h,g){return Math.min(Math.max(c,h),g)}adjustPan(){const c=this.c.viewportTransform,h=this.c.getZoom(),g={x:this.c.getWidth()*(1/this.zoomMin-1)/2,y:this.c.getHeight()*(1/this.zoomMin-1)/2},y={width:(g.x+this.c.backgroundImage.left)*2+this.c.backgroundImage.width,height:(g.y+this.c.backgroundImage.top)*2+this.c.backgroundImage.height},_={x:{min:this.c.getWidth()+(g.x-y.width)*h,max:g.x*h},y:{min:this.c.getHeight()+(g.y-y.height)*h,max:g.y*h}};c[4]=this.clamp(c[4],_.x.min,_.x.max),c[5]=this.clamp(c[5],_.y.min,_.y.max),this.c.setViewportTransform(c)}detach(){this.c&&(this.c.dispose(),this.tool=null)}getToolConfig(c){switch(c){case we.FREEDRAW:return this.config.freedraw;case we.MARKER:return this.config.marker;case we.ERASER:return this.config.eraser;default:return null}}selectTool(c){var _,x,T;if(!this.available)return;const h=this.getToolConfig(c),g=new this.tools[c].class(this,h),y=this.tool;(x=y==null?void 0:(_=y.instance).onDeselect)==null||x.call(_),this.tool={name:c,instance:g},(T=g.onSelect)==null||T.call(g),(y==null?void 0:y.type)!==g&&this._dispatch(qe.Event.TOOL_CHANGE,c),this.cacheTool()}updateToolConfig(c,h){const g=this.getToolConfig(c),y=Object.assign({},g,h);switch(c){case we.FREEDRAW:this.config.freedraw=y;break;case we.MARKER:this.config.marker=y;break;case we.ERASER:this.config.eraser=y;break;default:throw new Error(`Invalid toolId ${c}`)}return this.tool.name===c&&this.selectTool(c),this.cacheConfig(),y}setContainerSize(c){this.containerSize=c,this.c&&this.fitCanvas()}addImage(c){this.available&&(this.busy=!0,this.selectTool(we.SELECT),ft.fabric.Image.fromURL(c,h=>{this.c.add(h),this.c.centerObject(h),this.c.setActiveObject(h),h.erasable=!1,this.busy=!1},{crossOrigin:"anonymous",borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11}))}async saveImageAsBlob(){return new Promise((c,h)=>{const g=this.c.getActiveObject();if(g&&g.type==="image"){const y=g.getScaledWidth(),_=g.getScaledHeight(),x=document.createElement("canvas"),T=x.getContext("2d");x.width=y,x.height=_,T&&T.drawImage(g._element,0,0,y,_),x.toBlob(function(d){c(d)})}else h(new Error("   ."))})}calcTextSize(c){return(hi+c/100*(Tl-hi))/this.zoomMin}calcFontSize(c){return(c*this.zoomMin-hi)/(Tl-hi)*100}addText(c,h,g){if(!this.available)return;this.touchEnabled&&this.selectTool(we.SELECT);const y=new ft.fabric.IText(c,{borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11});if(y.set("fill",this.config.text.color.code),y.set("fontSize",this.calcTextSize(this.config.text.fontSize)),h){const _=this.c.getPointer({clientX:h.x,clientY:h.y});y.set("left",_.x),y.set("top",_.y)}else this.c.viewportCenterObject(y);y.erasable=!1,this.c.add(y),g||(this.c.setActiveObject(y),y.selectAll(),y.enterEditing())}async undo(){if(!this.available||this.history.index===0)return;this.history.index-=1;const c=this.history.records[this.history.index];await this.loadFromHistory(c),this._dispatchHistoryChange()}async redo(){if(!this.available||this.history.index>=this.history.records.length-1)return;this.history.index+=1;const c=this.history.records[this.history.index];await this.loadFromHistory(c),this._dispatchHistoryChange()}async loadFromHistory(c){this.isTraversingHistory=!0,await new Promise((h,g)=>{try{ft.fabric.util.enlivenObjects(c,y=>{this.c.remove(...this.c.getObjects()),y.forEach(_=>{this.c.add(_)}),this.c.renderAll(),h()},null)}catch(y){g(y)}}),this.isTraversingHistory=!1}get isTraversingHistory(){return this._isTraversingHistory}set isTraversingHistory(c){this._isTraversingHistory=c,this._dispatchAvailbilityChange()}get busy(){return this._busy}set busy(c){this._busy=c,this._dispatchAvailbilityChange()}get available(){return!this._isTraversingHistory&&!this.busy}pushHistory(){const c=this.history.records.slice(0,this.history.index+1);this.history.records=[...c,this.c.toObject().objects],this.history.index=this.history.records.length-1,this._dispatchHistoryChange()}onHistoryChange(c){this.onHistoryChangeListener=c}onAvailabilityChange(c){this.onAvailabilityChangeListener=c}on(c,h){const g=y=>{h(y.detail)};return this.addEventListener(c,g),()=>{this.removeEventListener(c,g)}}getHistoryInfo(){return{index:this.history.index,histories:this.history.records.length}}_dispatch(c,h){this.dispatchEvent(new CustomEvent(c,{detail:h}))}_dispatchHistoryChange(){this._dispatch(qe.Event.HISTORY_CHANGE,this.getHistoryInfo())}_dispatchAvailbilityChange(){this._dispatch(qe.Event.AVAILABILITY_CHANGE,this.available)}fitCanvas(){if(!this.c.backgroundImage||!this.containerSize)return;let c=Math.min(1,Math.min(this.containerSize.width/this.c.backgroundImage.width,this.containerSize.height/this.c.backgroundImage.height));(this.containerSize.width>this.c.backgroundImage.width||this.containerSize.height>this.c.backgroundImage.height)&&(c=Math.min(this.containerSize.width/this.c.backgroundImage.width,this.containerSize.height/this.c.backgroundImage.height)),this.c.setWidth(this.containerSize.width),this.c.setHeight(this.containerSize.height),this.c.backgroundImage.center();const g=new ft.fabric.Rect({width:this.c.backgroundImage.width+2,height:this.c.backgroundImage.height+2,top:this.c.backgroundImage.top-1,left:this.c.backgroundImage.left-1});this.c.clipPath=g,this.zoomMin=c,this.zoom({x:this.containerSize.width/2,y:this.containerSize.height/2},c)}getDataUrl(c){const h=this.c.viewportTransform;this.c.viewportTransform=ft.fabric.iMatrix.slice(0);const g=this.c.toDataURL({format:c.toLowerCase()==="png"?"png":"jpeg",width:this.c.clipPath.width,height:this.c.clipPath.height,left:this.c.clipPath.left,top:this.c.clipPath.top});return this.c.viewportTransform=h,g}async toBlob(){const c=this.c.viewportTransform;this.c.viewportTransform=ft.fabric.iMatrix.slice(0);const h=new Promise((g,y)=>{this.c.toBlob(_=>{if(!_){y(new Error("Cannot create blob"));return}g(_)},{width:this.c.clipPath.width-2,height:this.c.clipPath.height-2,left:this.c.clipPath.left+1,top:this.c.clipPath.top+1})});try{return this.busy=!0,await h,h}finally{this.c.viewportTransform=c,this.busy=!1}}deleteSelectedObject(){this.c.remove(this.c.getActiveObject())}changeSelectedTextSize(c){this.c.getActiveObject().set("fontSize",this.calcTextSize(c)),this.config.text.fontSize=c,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextColor(c){this.c.getActiveObject().set("fill",c.code),this.config.text.color=c,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextMessage(c){this.c.getActiveObject().set("text",c),this.c.requestRenderAll()}getSelectedTextSize(){const c=this.c.getActiveObject();return this.calcFontSize(c.fontSize)}getSelectedTextColor(){const c=this.c.getActiveObject();return Object.values(Nt).includes(c.fill)?{type:"preset",code:c.fill}:{type:"custom",code:c.fill}}getSelectedTextContents(){return this.c.getActiveObject().text}setUsePencil(c){this.config.usePencil=c,this.c.usePencil=c,this.cacheConfig()}fetchConfig(){const c=localStorage.getItem("editorConfig"),h=c?JSON.parse(c):null;return{freedraw:(h==null?void 0:h.freedraw)??{thickness:3,color:{type:"preset",code:Nt.BLACK}},marker:(h==null?void 0:h.marker)??{thickness:3,color:{type:"preset",code:Nt.BLACK}},eraser:(h==null?void 0:h.eraser)??{thickness:3},text:(h==null?void 0:h.text)??{color:{type:"preset",code:Nt.BLACK},fontSize:40},usePencil:(h==null?void 0:h.usePencil)??!0}}fetchTool(){return localStorage.getItem("editorTool")??we.PAN}cacheConfig(){localStorage.setItem("editorConfig",JSON.stringify(this.config))}cacheTool(){localStorage.setItem("editorTool",this.tool.name)}isDirty(){return this.history.index>0}};ve(qe,"Event",Ip),ve(qe,"Mode",Lp),ve(qe,"ConfigName",Fp);let ot=qe;const Bp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABgpJREFUWEeVl7uPG1UYxc+1x563X7uERwUtDVIoIlIgIhQBUoRWSFAihSIgKFKCqOiSAkSEBCI0adOQCCUNKChQkCD+BUoQCo+APU/P+HHRuQ971uvNwkqf7npm7fP7zvnu3bHA//iRv+CEnLffE3XrFOpWD7UQqAHUUqKSCerl96jnF8UruPtfP1Yc9YdSwpVp+6qYdfZQd4CZA9QOMGsBtYACqCRQL4FqAUznQFUD1fwmlvNXxVlMH6TxQIDZwrnkLDrnMXOhqwMN0QZqlgGoJVARgOJzYFqbqoCi+kycX7xzGMRWgJ8l3C4694bwB/HSN+IE6BoAutDSLlQqAt29qtlavJwC+RTIyhR/1g+Lj1FughwAuDnGsN93748QiBECjOCju/CA2tMAygVGQAcYAyNY6giU/QSodFE8L4GsYElMp8fER/irCbEP4BMJdwduOUIodhBipMrHQPoQc0KYGBSEjYAxmPyb9hf7xIEsB9Jcoj0Nm07sA7goO/8MEQ12EGGECBpCuxDYKOqmC40hbNpP6wmQ2e4pntlKxZW6Z11YAby1cC6NWsH5HcTQRQjrgoZw6AKHUUE0IlD22/w5eJviFiAFUlb2hfhy8SYhFMBLEu4Q/nQHPeyuAGLjAkEIEKAvOZBmFuxWVENodgCnv2T2q9wbnadAYisBFkUobqBQACeX7esjEe/tKoAeCNJ0Yu1GAI8DqbYkdwJdMENoh88OXpoDmbF9JUyABJhM6MTX4rv5iwrgSenJXfSV+HptQtCNUM3EEAFaCoBb0gIY+5m9yl0NnLa72bUSNwCE+KFsCV/ixBDxjw+hD5YGsDDaDe2KHkxGsT4bGgC031rPgUvYPcUIMdHCdh3z9RgoiudEe9m/3hPe3lB9eLyC2ITRsXBn6OHUZwNjYARzM3hFo3PTrRVlx1bY/p6k34iOfHw8QNjvI8QAIfqI1Eog3b11pjkfEQYygFAxQJ987F51zk43rLbCB9dMuPLp5QChaIrz983XBGrGQyfU2UAAbjtabges2e1KdKwdGI+1/VzHYyk8eVpawYHp3rqgr2tHNoEYFx1yCMBBU6L8cLNqAVMm833X9D3hydcMwFqIojqSbdf0dd7vSR9+AbTT8nBx1e02KO2EcOW55QCRimCzy6YTFLTVQ4h44cLPgW4BBCXgZku0Joxhw4kmwNp6O5BSdOW74z7Cvha3EOsu18IBKMyKagdBAXQzwMmAaAblhJcB3WQOsZoFE4mF2Leqe7lw5IWveghebopvdquFA8QyQDRtIaRYATipLgIEFZQjhPDV9UrPg9qGFsTOglmTyS0B+fkzPXh39osGOmNTsTp8PESl0OI54OZavJUA0RwIKx2FdYIQbirRTgoNsQ0kT59XR7Enr8lmvn0KNsXnXSXMovUUp/3tBBATICYAXZgaCDrBSrUbbrqEUEcyO191DxRnWgrAkd/eiBGcsVarIVMVIKraiBritvtOprsXY+0AYwhrA1BqAD9bR0KYbjIzBxX/GU1uidnx0/p5QN72AhwrKajFTd6lUOLsmqXsNd1z+FoT7QCFFQQBmlHwPRsQBHESPi1NIoFH8tUDSVv++mkE/23V9cJDzK7Lte0cMALQejX9KSCMA0G9jkHNgomCg6re1xhOAng5roQz8cbqgcQ+HnVlnUR1J45K7LOdwvwQZs/qpDx8dAQYA/4UiBeNGKwLZigVhHUiQ/FEJcIDj2Q6Cul7fyMPCwg7dFac3djhY/cKYKIB3BLoLQ664BOAZVzwc0i/RPwURL4dgFd/k7veGH8EBYTN3XbftfkTgPYbB3gaWoDVMDKGqQHQ8yP7JR47BXHv0Mfy1Y070u/W+N3PEdvBW3Vv8rdbkA50cgPQiEHNwjqKIqhw7PVG54c70MBrX5WX3RznbPb26LUHEHcAAfi6t9QRqDOhNluyUuuVD8zAbft6duSXU1yWgXMf1zopXuDeZ7F7dQYYAM6DisDMgYphhluPzrD34Zauj45g6zdJKZyzeLaV4H2R4KRIEIoJBA8iMYHsLVH0l7jbk7jw0xy3ASGP+ubN+/8CCrP4h3UWm6AAAAAASUVORK5CYII=";function fi({children:t,...e}){return I.jsx(se.Popover,{sx:{"& .MuiPaper-root":{overflowX:"unset",overflowY:"unset",backgroundColor:"grey.background","::before":{content:'""',position:"absolute",marginRight:"-0.71em",bottom:0,left:"50%",width:16,height:16,backgroundColor:"grey.background",boxShadow:1,transform:"translate(-50%, 50%) rotate(135deg)",clipPath:`polygon(
              -8px -8px,
              calc(100% + 8px) -8px,
              calc(100% + 8px) calc(100% + 8px)
            )`}}},anchorOrigin:{vertical:-16,horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},...e,children:t})}const gn={black:"#000",white:"#fff"},dr={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Np={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},gr={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Vp={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},Yp={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},kr={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},pr={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},vr={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Up={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},Hp={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},zp={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},jr={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},tt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Wp=[Nt.BLACK,Nt.RED,Nt.YELLOW,Nt.GREEN,Nt.BLUE];function El({type:t,color:e,selected:c,onClick:h}){return I.jsx(se.IconButton,{sx:{p:0},onClick:h,children:I.jsxs("svg",{width:"24",height:"24",children:[I.jsxs("mask",{id:"mask",children:[I.jsx("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"white",strokeWidth:"4",fill:"none"}),I.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:"white"})]}),t==="preset"?I.jsx("circle",{cx:"50%",cy:"50%",r:"50%",fill:e,mask:c?"url(#mask)":""}):I.jsx("image",{x:"0",y:"0",width:"100%",height:"100%",href:Bp,mask:c?"url(#mask)":""}),e&&I.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:e})]})})}const Ol=[100,200,300,400,500,600,700,800,900],Xp=["#ffffff",...Ol.map(t=>tt[t]),"#000000"],Gp=[pr,Yp,Vp,gr,Np,dr,jr,zp,Hp,Up,vr],$p=Xp.concat(...Ol.map(t=>Gp.map(e=>e[t])));function qp({color:t,onClick:e}){return I.jsx(Wt,{sx:{width:24,height:24,borderRadius:0,p:0,backgroundColor:t},onClick:e})}function Kp({onChange:t}){return I.jsx(Wt,{sx:{p:2,display:"grid",gridTemplateColumns:"repeat(11, 1fr)"},children:$p.map(e=>I.jsx(qp,{color:e,onClick:()=>t(e)},e))})}function Pl({value:t,onChange:e}){const[c,h]=le.useState(null),{toolbarPosition:g}=Qe(),y=d=>{t&&e({type:"preset",code:d})},_=d=>{t&&h(d.currentTarget)},x=le.useCallback(()=>{h(null)},[]),T=d=>{e({type:"custom",code:d}),x()};return I.jsxs(Wt,{sx:{display:"grid",...g==="bottom"&&{gridTemplateRows:"repeat(2, minmax(0, 1fr))",gridTemplateColumns:"repeat(3, minmax(0, min-content))"},...g==="right"&&{gridTemplateRows:"repeat(3, minmax(0, 1fr))",gridTemplateColumns:"repeat(2, minmax(0, min-content))"},gridRowGap:"6px",gridColumnGap:"8px"},children:[Wp.map((d,n)=>I.jsx(El,{selected:(t==null?void 0:t.type)==="preset"&&(t==null?void 0:t.code)===d,type:"preset",color:d,onClick:()=>y(d)},n)),I.jsx(El,{selected:(t==null?void 0:t.type)==="custom",type:"custom",color:(t==null?void 0:t.type)==="custom"?t==null?void 0:t.code:null,onClick:_}),I.jsx(fi,{open:!!c,anchorEl:c,onClose:x,anchorOrigin:{vertical:-16,horizontal:"center"},children:I.jsx(Kp,{onChange:T})})]})}function yo({leadingItems:t=null,palette:e=null,trailingItems:c}){const{toolbarPosition:h}=Qe();return I.jsxs(I.Fragment,{children:[t&&I.jsx(Wt,{sx:{display:"flex",alignItems:"center",gap:"10px",flexDirection:h==="right"?"column":"row"},children:t}),e&&I.jsx(Wt,{sx:{display:"flex",alignItems:"center",flexDirection:h==="right"?"column":"row"},children:e}),c&&I.jsx(Wt,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"10px",flexDirection:h==="right"?"column":"row"},children:c})]})}const Al=se.styled(se.Box)(()=>`
  &.toolbar-btn-wrapper {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }
`),Dl=se.styled(se.IconButton)(({selected:t,disabled:e})=>`
  ${t?"background: black;":""}
  svg {
    width: 20px;
    height: 20px;
  }
  ${t?`
      svg, path {
        fill: white;
      }  
    `:""}
  ${e?`
      svg, path {
        fill: ${tt[400]};
      }
    `:""}
`),Qp=se.styled(se.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 11px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
  white-space: nowrap;
`),dt=({Icon:t,selected:e=!1,small:c=!1,tooltip:h,disableToolbar:g=!1,sx:y,disabled:_,className:x,...T})=>{const{toolbarPosition:d}=Qe();return g?I.jsxs(Al,{className:`toolbar-btn-wrapper ${x||""}`,children:[I.jsx(Dl,{color:"inherit",disabled:_,sx:{":disabled":{backgroundColor:tt[200],color:tt[400]},":hover":{backgroundColor:e?"black":tt[200]},p:c?1:1.25,borderRadius:"50%",color:e?"white":"black",...y},selected:e,...T,children:I.jsx(t,{sx:{fontSize:c?16:20}})}),I.jsx(Qp,{variant:"body1",children:h})]}):I.jsx(se.Tooltip,{title:h,arrow:!0,placement:d==="right"?"left":"top",children:I.jsx(Al,{style:{cursor:"pointer"},className:`toolbar-btn-wrapper ${x||""}`,children:I.jsx(Dl,{disabled:_,color:"inherit",selected:e,className:"",sx:{":disabled":{backgroundColor:tt[200],color:tt[400]},":hover":{backgroundColor:e?"black":tt[200]},p:c?1:1.2,borderRadius:"50%",backgroundColor:e?"black":tt[200],color:e?"white":"black",...y},...T,children:I.jsx(t,{sx:{fontSize:c?16:20}})})})})},bo=({thickness:t,selected:e})=>I.jsx(se.Box,{sx:{width:32,height:32,backgroundColor:e?"black":"transparent",borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},children:I.jsx(se.Box,{sx:{width:t*4,height:t*4,borderRadius:"50%",backgroundColor:e?"white":"black"}})}),Jp=[1,2,3,4,5],Zp=({value:t,onChange:e})=>{const c=h=>{e({thickness:h})};return I.jsx(se.Box,{children:I.jsx(se.Box,{sx:{display:"flex",gap:1},children:Jp.map(h=>I.jsx(se.IconButton,{onClick:()=>c(h),children:I.jsx(bo,{thickness:h,selected:t.thickness===h})},h))})})},ev=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M13.5333 2.96669L17.6583 7.08335C18.3083 7.74169 18.3083 8.79169 17.6583 9.45002L9.99996 17.1084C8.69996 18.4084 6.59163 18.4084 5.28329 17.1084L2.34163 14.1667C1.69163 13.5084 1.69163 12.4584 2.34163 11.8L11.175 2.96669C11.8333 2.31669 12.8833 2.31669 13.5333 2.96669ZM3.51663 12.9834L6.46663 15.925C7.11663 16.5834 8.16663 16.5834 8.82496 15.925L11.7666 12.9834L7.64163 8.85835L3.51663 12.9834Z",fill:"black"})),tv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M7.08333 11.25L9.16667 13.75L12.0833 10L15.8333 15H4.16667M17.5 15.8333V4.16667C17.5 3.24167 16.75 2.5 15.8333 2.5H4.16667C3.72464 2.5 3.30072 2.67559 2.98816 2.98816C2.67559 3.30072 2.5 3.72464 2.5 4.16667V15.8333C2.5 16.2754 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2754 17.5 15.8333Z",fill:"black"})),rv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M15.5167 1.25C15.0917 1.25 14.6667 1.40833 14.3417 1.74167L8.95835 7.125L12.4584 10.6167L17.8417 5.24167C18.5 4.58333 18.5 3.53333 17.8417 2.88333L16.7 1.74167C16.375 1.40833 15.95 1.25 15.5167 1.25ZM8.16668 7.91667L2.69168 13.3917L3.27502 13.975C2.83335 14.3667 2.40835 14.8167 1.98335 15.2417C1.33335 15.9 1.33335 16.95 1.98335 17.6C2.63335 18.25 3.68335 18.25 4.34168 17.6C4.76668 17.1917 5.20835 16.7333 5.60835 16.3167L6.19168 16.8917L11.6667 11.4167",fill:"black"})),nv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("g",{clipPath:"url(#clip0_2_107)"},he.createElement("path",{d:"M8.33337 7.49998H11.6667V4.99998H14.1667L10 0.833313L5.83337 4.99998H8.33337V7.49998ZM7.50004 8.33331H5.00004V5.83331L0.833374 9.99998L5.00004 14.1666V11.6666H7.50004V8.33331ZM19.1667 9.99998L15 5.83331V8.33331H12.5V11.6666H15V14.1666L19.1667 9.99998ZM11.6667 12.5H8.33337V15H5.83337L10 19.1666L14.1667 15H11.6667V12.5Z",fill:"black"})),he.createElement("defs",null,he.createElement("clipPath",{id:"clip0_2_107"},he.createElement("rect",{width:20,height:20,fill:"white"})))),iv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M8.75004 15H15V16.6666H8.75004C5.75837 16.6666 3.33337 14.2416 3.33337 11.25C3.33337 8.25831 5.75837 5.83331 8.75004 5.83331H13.475L10.9 3.25831L12.0834 2.08331L16.6667 6.66665L12.0834 11.25L10.9084 10.075L13.475 7.49998H8.75004C6.66671 7.49998 5.00004 9.16665 5.00004 11.25C5.00004 13.3333 6.66671 15 8.75004 15Z",fill:"black"})),ov=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M16.6667 11.25C16.6667 14.2416 14.2417 16.6666 11.25 16.6666H5.00004V15H11.25C13.3334 15 15 13.3333 15 11.25C15 9.16665 13.3334 7.49998 11.25 7.49998H6.52504L9.09171 10.075L7.91671 11.25L3.33337 6.66665L7.91671 2.08331L9.10004 3.25831L6.52504 5.83331H11.25C14.2417 5.83331 16.6667 8.25831 16.6667 11.25Z",fill:"black"})),sv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M7.79891 0C8.72176 0 9.51086 0.806641 9.51086 1.75V5.65043C10.1768 5.01215 11.4548 4.93379 12.2821 5.89648C13.1739 5.33836 14.3531 5.81262 14.7163 6.53906C16.6359 6.18852 17.5 7.39633 17.5 9.375C17.5 9.48227 17.4921 9.89359 17.4924 10C17.4989 12.4207 16.2789 13.0037 15.9957 14.8332C15.9251 15.2892 15.5312 15.625 15.0698 15.625H8.36957L8.36953 15.6249C7.65211 15.6245 6.96762 15.2106 6.65684 14.513C6.14926 13.3847 4.74129 10.786 3.63641 10.3125C2.92566 10.0079 2.50031 9.47719 2.5 8.75C2.49945 7.4132 3.87102 6.49406 5.11359 7.0266C5.44012 7.16656 5.76477 7.35129 6.08695 7.57945V1.75C6.08695 0.833984 6.88941 0 7.79891 0ZM7.8125 16.25H15.3125C15.8303 16.25 16.25 16.6697 16.25 17.1875V19.0625C16.25 19.5803 15.8303 20 15.3125 20H7.8125C7.29473 20 6.875 19.5803 6.875 19.0625V17.1875C6.875 16.6697 7.29473 16.25 7.8125 16.25ZM14.375 17.3438C13.9435 17.3438 13.5938 17.6935 13.5938 18.125C13.5938 18.5565 13.9435 18.9062 14.375 18.9062C14.8065 18.9062 15.1562 18.5565 15.1562 18.125C15.1562 17.6935 14.8065 17.3438 14.375 17.3438Z",fill:"black"})),av=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M15.8333 2.5H4.16667C3.25 2.5 2.5 3.25 2.5 4.16667V15.8333C2.5 16.75 3.25 17.5 4.16667 17.5H15.8333C16.75 17.5 17.5 16.75 17.5 15.8333V4.16667C17.5 3.25 16.75 2.5 15.8333 2.5ZM15 11.6667L12.9167 10.4167L10.8333 11.6667V5H15V11.6667Z",fill:"black"})),lv=t=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M12.3333 1H4.55556C3.7 1 3.00778 1.7 3.00778 2.55556L3 15L8.44444 12.6667L13.8889 15V2.55556C13.8889 1.7 13.1889 1 12.3333 1Z",fill:"black"})),cv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M15.4167 3.33331L16.3834 6.95831L15.5834 7.17498C15.2084 6.44998 14.825 5.72498 14.3834 5.35831C13.9417 4.99998 13.425 4.99998 12.9167 4.99998H10.8334V13.75C10.8334 14.1666 10.8334 14.5833 11.1084 14.7916C11.3917 15 11.9417 15 12.5 15V15.8333H7.50003V15C8.05837 15 8.60837 15 8.8917 14.7916C9.1667 14.5833 9.1667 14.1666 9.1667 13.75V4.99998H7.08337C6.57503 4.99998 6.05837 4.99998 5.6167 5.35831C5.17503 5.72498 4.7917 6.44998 4.4167 7.17498L3.6167 6.95831L4.58337 3.33331H15.4167Z",fill:"black"})),uv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M7.5 8.33331H5.83333V9.99998H7.5V8.33331ZM10.8333 8.33331H9.16667V9.99998H10.8333V8.33331ZM14.1667 8.33331H12.5V9.99998H14.1667V8.33331ZM15.8333 2.49998H15V0.833313H13.3333V2.49998H6.66667V0.833313H5V2.49998H4.16667C3.24167 2.49998 2.5 3.24998 2.5 4.16665V15.8333C2.5 16.2753 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2753 17.5 15.8333V4.16665C17.5 3.72462 17.3244 3.3007 17.0118 2.98813C16.6993 2.67557 16.2754 2.49998 15.8333 2.49998ZM15.8333 15.8333H4.16667V6.66665H15.8333V15.8333Z",fill:"black"})),hv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M14.0334 2.27502C13.7084 2.27502 13.3917 2.40002 13.1417 2.64169L11.375 4.40836L15.7917 8.83336L17.5584 7.08336C18.0584 6.57502 18.0584 5.78336 17.5584 5.30002L14.9167 2.64169C14.6667 2.40002 14.35 2.27502 14.0334 2.27502ZM10.7834 5.00002L4.03337 11.7584L6.16671 11.9917L6.31671 13.9L8.21671 14.0417L8.45837 16.175L15.2084 9.41669M3.54171 12.5334L2.08337 18.1084L7.66671 16.6167L7.46671 14.8167L5.54171 14.675L5.39171 12.7417",fill:"black"})),fv=t=>he.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M6.58053 6.25992L9.9197 8.92093C10.1501 9.10457 10.5 8.94787 10.5 8.66102L10.5 3.33898C10.5 3.05213 10.1501 2.89543 9.9197 3.07907L6.58053 5.74008C6.4108 5.87535 6.4108 6.12465 6.58053 6.25992Z",fill:"black"}),he.createElement("path",{d:"M1.6273 6.25992L4.96647 8.92093C5.19691 9.10457 5.54677 8.94787 5.54677 8.66102L5.54677 3.33898C5.54677 3.05213 5.19691 2.89543 4.96647 3.07907L1.6273 5.74008C1.45757 5.87535 1.45757 6.12465 1.6273 6.25992Z",fill:"black"})),dv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("g",{clipPath:"url(#clip0_2_160)"},he.createElement("path",{d:"M5.00004 8.33331C4.08337 8.33331 3.33337 9.08331 3.33337 9.99998C3.33337 10.9166 4.08337 11.6666 5.00004 11.6666C5.91671 11.6666 6.66671 10.9166 6.66671 9.99998C6.66671 9.08331 5.91671 8.33331 5.00004 8.33331ZM15 8.33331C14.0834 8.33331 13.3334 9.08331 13.3334 9.99998C13.3334 10.9166 14.0834 11.6666 15 11.6666C15.9167 11.6666 16.6667 10.9166 16.6667 9.99998C16.6667 9.08331 15.9167 8.33331 15 8.33331ZM10 8.33331C9.08337 8.33331 8.33337 9.08331 8.33337 9.99998C8.33337 10.9166 9.08337 11.6666 10 11.6666C10.9167 11.6666 11.6667 10.9166 11.6667 9.99998C11.6667 9.08331 10.9167 8.33331 10 8.33331Z",fill:"black"})),he.createElement("defs",null,he.createElement("clipPath",{id:"clip0_2_160"},he.createElement("rect",{width:20,height:20,fill:"white"})))),gv=t=>he.createElement("svg",{width:13,height:11,viewBox:"0 0 13 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M6.06221 10.5L3.52502e-05 -1.05994e-06L12.1244 0L6.06221 10.5Z",fill:"white"})),pv=t=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("g",{clipPath:"url(#clip0_1_378)"},he.createElement("path",{d:"M2.66665 4.00004H1.33331V13.3334C1.33331 14.0667 1.93331 14.6667 2.66665 14.6667H12V13.3334H2.66665V4.00004ZM13.3333 1.33337H5.33331C4.59998 1.33337 3.99998 1.93337 3.99998 2.66671V10.6667C3.99998 11.4 4.59998 12 5.33331 12H13.3333C14.0666 12 14.6666 11.4 14.6666 10.6667V2.66671C14.6666 1.93337 14.0666 1.33337 13.3333 1.33337ZM12.6666 7.33337H9.99998V10H8.66665V7.33337H5.99998V6.00004H8.66665V3.33337H9.99998V6.00004H12.6666V7.33337Z",fill:"black"})),he.createElement("defs",null,he.createElement("clipPath",{id:"clip0_1_378"},he.createElement("rect",{width:16,height:16,fill:"white"})))),vv=t=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("g",{clipPath:"url(#clip0_30_760)"},he.createElement("path",{d:"M2.66671 3.99998H1.33337V13.3333C1.33337 14.0666 1.93337 14.6666 2.66671 14.6666H12V13.3333H2.66671V3.99998ZM13.3334 1.33331H5.33337C4.60004 1.33331 4.00004 1.93331 4.00004 2.66665V10.6666C4.00004 11.4 4.60004 12 5.33337 12H13.3334C14.0667 12 14.6667 11.4 14.6667 10.6666V2.66665C14.6667 1.93331 14.0667 1.33331 13.3334 1.33331ZM12.6667 7.33331H6.00004V5.99998H12.6667V7.33331ZM10 9.99998H6.00004V8.66665H10V9.99998ZM12.6667 4.66665H6.00004V3.33331H12.6667V4.66665Z",fill:"black"})),he.createElement("defs",null,he.createElement("clipPath",{id:"clip0_30_760"},he.createElement("rect",{width:16,height:16,fill:"white"})))),mv=t=>he.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("path",{d:"M5.66667 9L7.33333 11L9.66667 8L12.6667 12H3.33333M14 12.6667V3.33333C14 2.59333 13.4 2 12.6667 2H3.33333C2.97971 2 2.64057 2.14048 2.39052 2.39052C2.14048 2.64057 2 2.97971 2 3.33333V12.6667C2 13.0203 2.14048 13.3594 2.39052 13.6095C2.64057 13.8595 2.97971 14 3.33333 14H12.6667C13.0203 14 13.3594 13.8595 13.6095 13.6095C13.8595 13.3594 14 13.0203 14 12.6667Z",fill:"white"})),yv=t=>he.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},he.createElement("rect",{width:20,height:20,rx:2,fill:"black",fillOpacity:.5}),he.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55556 4C9.06464 4 8.66667 4.39797 8.66667 4.88889H6.44444C6.19898 4.88889 6 5.08787 6 5.33333C6 5.57879 6.19898 5.77778 6.44444 5.77778H13.5556C13.801 5.77778 14 5.57879 14 5.33333C14 5.08787 13.801 4.88889 13.5556 4.88889H11.3333C11.3333 4.39797 10.9354 4 10.4444 4H9.55556ZM14 6.66667H6V13.7778C6 14.2687 6.59695 14.6667 7.33333 14.6667H12.6667C13.403 14.6667 14 14.2687 14 13.7778V6.66667ZM7.77778 8.88889C7.77778 8.64343 7.97676 8.44444 8.22222 8.44444C8.46768 8.44444 8.66667 8.64343 8.66667 8.88889V12.4444C8.66667 12.6899 8.46768 12.8889 8.22222 12.8889C7.97676 12.8889 7.77778 12.6899 7.77778 12.4444V8.88889ZM9.55556 8.88889C9.55556 8.64343 9.75454 8.44444 10 8.44444C10.2455 8.44444 10.4444 8.64343 10.4444 8.88889V12.4444C10.4444 12.6899 10.2455 12.8889 10 12.8889C9.75454 12.8889 9.55556 12.6899 9.55556 12.4444V8.88889ZM11.7778 8.44444C11.5323 8.44444 11.3333 8.64343 11.3333 8.88889V12.4444C11.3333 12.6899 11.5323 12.8889 11.7778 12.8889C12.0232 12.8889 12.2222 12.6899 12.2222 12.4444V8.88889C12.2222 8.64343 12.0232 8.44444 11.7778 8.44444Z",fill:"white"})),$e=({variant:t,...e})=>{switch(t){case"eraser":return I.jsx(ev,{...e});case"image":return I.jsx(tv,{...e});case"pen":return I.jsx(rv,{...e});case"move":return I.jsx(nv,{...e});case"redo":return I.jsx(iv,{...e});case"undo":return I.jsx(ov,{...e});case"hand":return I.jsx(sv,{...e});case"bookmark":return I.jsx(av,{...e});case"bookmark_2":return I.jsx(lv,{...e});case"text":return I.jsx(cv,{...e});case"calendar":return I.jsx(uv,{...e});case"pencil":return I.jsx(hv,{...e});case"fold":return I.jsx(fv,{...e});case"more":return I.jsx(dv,{...e});case"arrow":return I.jsx(gv,{...e});case"bookmark_text":return I.jsx(vv,{...e});case"bookmark_image":return I.jsx(mv,{...e});case"library_add":return I.jsx(pv,{...e});case"delete":return I.jsx(yv,{...e});default:return I.jsx(I.Fragment,{})}};function Ml(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"pencil"}),...t})}function bv(){const[t,e]=le.useState(null),{core:c}=Qe(),{tool:h,setTool:g}=Yt(),[y,_]=le.useState(c.getToolConfig(we.FREEDRAW)),x=h===we.FREEDRAW,T=u=>{x?e(u.currentTarget):g(we.FREEDRAW)},d=()=>{e(null)},n=u=>{const l=c.updateToolConfig(we.FREEDRAW,u);_(l),d()};return I.jsxs(I.Fragment,{children:[I.jsx(dt,{selected:x,Icon:Ml,onClick:T,tooltip:"",disableToolbar:!0}),I.jsx(fi,{open:!!t,anchorEl:t,onClose:d,children:I.jsx(Zp,{value:y,onChange:n})})]})}function kl(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"move"}),...t})}function _v(){const{tool:t,setTool:e}=Yt(),c=t===we.PAN,h=g=>{e(we.PAN)};return I.jsx(dt,{disableToolbar:!0,selected:c,Icon:kl,onClick:h,tooltip:""})}function jl(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"hand"}),...t})}function wv(){const{tool:t,setTool:e}=Yt(),c=t===we.SELECT,h=g=>{e(we.SELECT)};return I.jsx(dt,{selected:c,disableToolbar:!0,Icon:jl,onClick:h,tooltip:""})}const xv=[1,2,3,4,5],Cv=({value:t,onChange:e})=>{const c=h=>{e({thickness:h})};return I.jsx(se.Box,{children:I.jsx(se.Box,{sx:{display:"flex",gap:1},children:xv.map(h=>I.jsx(se.IconButton,{onClick:()=>c(h),children:I.jsx(bo,{thickness:h,selected:t.thickness===h})},h))})})};function Rl(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"pen"}),...t})}function Sv(){const[t,e]=le.useState(null),{core:c}=Qe(),{tool:h,setTool:g}=Yt(),[y,_]=le.useState(c.getToolConfig(we.MARKER)),x=h===we.MARKER,T=u=>{x?e(u.currentTarget):g(we.MARKER)},d=()=>{e(null)},n=u=>{const l=c.updateToolConfig(we.MARKER,u);_(l),d()};return I.jsxs(I.Fragment,{children:[I.jsx(dt,{selected:x,Icon:Rl,onClick:T,tooltip:"",disableToolbar:!0}),I.jsx(fi,{open:!!t,anchorEl:t,onClose:d,children:I.jsx(Cv,{value:y,onChange:n})})]})}function _o(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"image"}),...t})}const Tv=se.styled(se.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 10px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
`),Il=se.styled("label")`
  cursor: pointer;
`,Ll=se.styled("input")`
  display: none;
`,Ev=({disableToolbar:t=!0,tooltip:e="",...c})=>{const{core:h,toolbarPosition:g}=Qe(),y=x=>{x.target.value=null},_=async x=>{await Promise.all([...x.target.files].map(T=>new Promise((d,n)=>{const u=new FileReader;u.onload=function(l){h.addImage(l.target.result),d()},u.readAsDataURL(T)}))),h.selectTool(we.SELECT)};return t?I.jsxs("span",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[I.jsxs(Il,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:tt[200]},p:1.2,borderRadius:"50%",color:"black"},children:[I.jsx(_o,{sx:{fontSize:20,color:"inherit"}}),I.jsx(Ll,{id:"file-upload",type:"file",...c,accept:"image/*",onClick:y,onChange:_})]}),I.jsx(Tv,{variant:"body1",children:e})]}):I.jsx(se.Tooltip,{title:e,arrow:!0,placement:g==="right"?"left":"top",children:I.jsxs(Il,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:tt[200]},p:1.5,borderRadius:"50%",backgroundColor:tt[200],color:"black"},children:[I.jsx(_o,{sx:{fontSize:20,color:"inherit"}}),I.jsx(Ll,{id:"file-upload",type:"file",...c,accept:"image/*",onClick:y,onChange:_})]})})};function Fl(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"text"}),...t})}function Ov(){const{core:t,touch:e}=Qe(),{tool:c,setTool:h}=Yt(),g=c===we.TEXT,y=_=>{e?t.addText("text"):h(we.TEXT)};return I.jsx(I.Fragment,{children:I.jsx(dt,{disableToolbar:!0,selected:g,Icon:Fl,onClick:y,tooltip:""})})}const Pv=[1,2,3,4,5],Av=({value:t,onChange:e})=>{const c=h=>{e({thickness:h})};return I.jsx(se.Box,{children:I.jsx(se.Box,{sx:{display:"flex",gap:1},children:Pv.map(h=>I.jsx(se.IconButton,{onClick:()=>c(h),children:I.jsx(bo,{thickness:h,selected:t.thickness===h})},h))})})};function Bl(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"eraser"}),...t})}function Dv(){const[t,e]=le.useState(null),{core:c}=Qe(),{tool:h,setTool:g}=Yt(),[y,_]=le.useState(c.getToolConfig(we.ERASER)),x=h===we.ERASER,T=u=>{x?e(u.currentTarget):g(we.ERASER)},d=()=>{e(null)},n=u=>{const l=c.updateToolConfig(we.ERASER,u);_(l),d()};return I.jsxs(I.Fragment,{children:[I.jsx(dt,{selected:x,Icon:Bl,onClick:T,tooltip:"",disableToolbar:!0}),I.jsx(fi,{open:!!t,anchorEl:t,onClose:d,children:I.jsx(Av,{value:y,onChange:n})})]})}const Mv=se.styled(se.Switch)(()=>`
  width: 32px;
  height: 20px;
  padding: 0;
  display: flex;
  margin-left: 12px;

  &:active {
    & .MuiSwitch-thumb {
      width: 19px;
    }
    & .MuiSwitch-switchBase.Mui-checked {
      transform: translateX(9px);
    }
  }
  & .MuiSwitch-switchBase {
    padding: 2px;
    &.Mui-checked {
      transform: translateX(12px);
      color: #fff;
      & + .MuiSwitch-track {
        opacity: 1;
        background-color: #2C62F6;
      }
    }
    &.Mui-disabled {
      color:#E6E6E6 !important;
    }
    &.Mui-checked.Mui-disabled+.MuiSwitch-track{
      opacity: 0.2;
      background-color: #BBBBBB;
    }
  }
  & .MuiSwitch-thumb {
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);
    width: 16px;
    height: 16px;
    border-radius: 10;
  }
  & .MuiSwitch-track {
    border-radius: 12px;
    opacity: 1;
    background-color: #EEEEEE;
    box-sizing: border-box;
  }
`),Nl=se.styled(se.FormControlLabel)(()=>`
  .MuiTypography-root  {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
    text-align: center;
    margin-bottom: 10px;
  }
`),Vl=se.styled(se.Radio)(()=>`
  padding: 0;
  color: #DEE2EC;

  &.Mui-checked {
    color: #DEE2EC;

    svg:nth-of-type(2) {
      color: #2C62F6;
      transform: scale(1.2);
    }
  }
`),wo=se.styled(se.Stack)(()=>`
  &.controller-wrapper {
    gap: 30px;
  }
  &.controller {
    gap: 10px;
  }
`),kv=se.styled(se.MenuList)(()=>`
  background: #ffffff;
  border-radius: 4px;
  padding: 0;
`),Yl=se.styled(se.MenuItem)(()=>`
  min-height:40px !important; 

  .MuiTypography-root {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
  }

`),jv=se.styled(se.Popper)(()=>`
  &[data-popper-placement*="top"] {
    span.arrow {
      bottom: -10px;
    }
  }

  &[data-popper-placement*="bottom"] {
    span.arrow {
      top: -10px;

      svg {
        transform: scaleY(-100%);
      }
    }
  }
`),Rv=se.styled(se.Button)(()=>`
  padding: 0;
  font-size: 15px;
  font-weight: 700;
  line-height: 18.15px;
  color: #2C62F6;
  min-width: unset;
`),Iv=se.styled(se.Dialog)(()=>""),Lv=se.styled(se.DialogTitle)(()=>`
  padding: 12px 22px;
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #DEE2EC;
`),Fv=se.styled(se.DialogContent)(()=>`
  padding: 30px 40px 46px !important;
`);class Bv{constructor(){ve(this,"toolbarVerticalPosition");ve(this,"saveToolbarVerticalPosition",e=>{this.toolbarVerticalPosition=e,localStorage.setItem("verticalPosition",e)});ve(this,"changeToolbarVerticalPosition",e=>{this.saveToolbarVerticalPosition(e)});Md(this);const e=localStorage.getItem("verticalPosition")??"bottom";this.toolbarVerticalPosition=e}}const pn=new Bv,Nv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMTSURBVHgB7Zx5jFXFnsd/t/t2Qzdrs68iyrixKeqgAupTXMFdXzTOZNSMos9JxsQY5w//eFETEydOZgxGE3XiOnEXExyf8nzijopGB0R2BNmlGwQamr7bnE81Bfeevkub96Tp4vtJbu6959SpU6fqW7/6VZ2qSuQiTIhAqDIhAkKCFkEhQYugSFoXY/fu3dazZ88D/7PZrK1fv94SiYT7pNNpGzJkiK1evdpGjRple/fudeH69u3rrq2urrbm5mb3vWvXLuvdu7f9/PPPduyxx1ptba3t27fPGhsbrb6+3n766ScbOnSobdu2zfr162dbtmyxwYMH26BBg9x9tm/fbn369HHHe/To4b5HjhxpO3bssGHDhrm0rVq1ygYOHGhVVW22g7RzXbdu3Vx6SCvneAbCcS332rx5sw0YMMCFJY0tLS1WU1NjdXV1B54jlUq5+/I8mUzGPSvx/fjjjy79xEPcPCfhfL5t3brV6DpxrzFjxti6devccxA+H+Lluq5ElxL0l19+aZ999pndddddBccp/IULF7rCo9AozLVr1zqBnHjiifbxxx/b2WefbUuWLLHTTjvN3njjDbv88svtnXfesYaGBieSNWvW2KWXXmorV660559/3mbMmGHffPONTZs2zebPn29XXHGFPf3003b77bc7QS9atMjFi+AREwIF7vvLL7/YxRdf7I6/8sorrqKce+65Lu3nn3++zZkzx66//nqbO3eu3XTTTda9e3cXbsSIEe76Y445xh1DoIjshx9+cM/GeQTGs/Kc3BNh79mzx6Vpw4YNLgzPMn36dPvggw/c81MZEPG1117r0sh9SRuV89tvv3UVhHyJC/qRRx6xG2+80VX2rkJRl2Pnzp3OAmG5oLW11Q4Hhg8f7go7HwoaS3XmmWdaMpl0Bbhp0yZXWFghChpLedRRRznry3GsEedGjx5t/fv3d9c0NTXZu+++ax9++KETIOJANAiLeyB6BMQxBIWYsapYQ/KLD9cRD7+pfMuXL3dWlfRhZY8++mhbvHixq4DEyQexUjn8fWhVsIyImXRh8bme1gexf/31106cY8eOdS0CxzlPeIRHa0Iaqcxcy3nSwH/SRTg+lCn5RV7wobLFmTBhgmvZDhfWbc1a486cbWzM2fL12aJhqv8YkX8AIb/22muumSLjaTqxHmSgbzY7C0Rx/PHHtztOWhELVodCv+yyy+z77793Vof/NN1YMQqbwiUcYiE+BI8lvuiii2zixIkuvpkzZ7rwuB5cy7NTIRAvoj3jjDNs8uTJ7hjxcH8Knw/pQGjnnHOOs95ULsJgHIjz6quvdtchKtKB5SYc6TzhhBPcPU8++WRnZal0HB83bpyrTAj2mmuucZUS0VMhuZY0cY77Xnjhhe45uRfpIhz/iYvKhgvE9eQjrQ9poeIhfuLLh/TQ2nUmrSmz2XPStvjHjK3eaJaJdPzah2lbui5n40dHhqZboiB8Ij4OjV9FU+z9Ph4eP46mmYIV4lDSmjZ785O0bW3KWfdIvCMHJmzVppwlI9s667L2HnM7k0sTg4XAumEVaM6o7ViTw8X1EEcOVZEBPmdCtf3+d0nr18tsYEPU+Y+Ot6SKvw9MlHtTiIjpdHRlqJCMePhOEE05TTOtDb4o/iYuAe4VTTMuCK0UrkmvXr2cC4avyTFaLfxx3AdGE+hM4dfD0qVLnT/uRydwKWjVaOZx22jlSAMuBR07OmD4t7gE+PYYEuImHPehY4kBwRVgtAUfnvMcI6z32enw8Qz8Bu/7kw5cCO7Hc3Ad7gW+elcF96O2Jhp9aTGrq6X/1D5M2VGOri5mQIwUKP4vIwAIiMLm94oVK5xgEBECxOf0guA4ImVkBH8T8dF5Ih4E7cXoBY2v/MUXX9jpp5/uRIQI8Wu/++47dz8EhZCpBHyoaAiMURXE6UVIuFNPPdUdp4XcuHGj86MRJ7aHuPHVqYx0kL1vznWIleuorFRO7ufPkw++cnVVEDP0KFMng3+xggXDQlOgWDgKlI4UVg6h54+zIh6srB8/RsAnnXSSs46IybtedJQIg2XFggMCZ4QCIVE5uAaDQMcK60l/BKuO6Lie39yP60kL4REi6UHgkyZNcvFj5Ukv1xEfwkeYpIWKQYfRW3wqCWnmGloJnpVrOM+HNIZO4kiYnERBA6KmUBEK1g+LjFA4jiVDVPwnPAL048v89v0HhMx/XBLiwaITjtEN7wLw7eMmnLeOCJd4CE8YxOyz3w/b+Rc2CJT4Eb+vNNzb3580kjZfsaicvp/Dc3AN4fyLJf5z3LsmoXJECFocOWguhwgKCVoERTKdMSGCIZmVBy0C4lfOtsvFvoX4LUnEvivTIUEnLBtp2M9ukpjFoSbBQH+kvMov+soLOhKxE7NELDqVSH/R6DKSzjGOkSg9llFS0IkcvcWsCXH4gKgzTty5RHFrXVTQnSFm3nwxh5nVFCwJYu4Cqz5OOeUUEx2DPPz888/tueeec5OpmDvNKhXeVuaiN4U7liyxzX+ZZ+ldu63/5Mk29Lzplki2SSDTvNIyOxZG4ZqtutdYq274+6iVP1xHdSPPAaNdRNSJfanCN4UJ5ysf2rE85iU89thj9vDDD7tZZh7mJTzwwAM2a9asI2Iewl/LV199Zdddd52bIwLk2ezZs+3WW2+1ncuW2qIHH7B9TY22/6Qd/4d/seGXzrBsa6PtW/2o5VI+7xNWO+xaS/afUvQ+/uVyR8vktwrfJujCSlekCla2zNzw17wxZxJNubieeeYZu//++wvEDPy/55577PHHHzdRmddff/2AmIG8feKJJ9zvrZ9+clDMbSdtzf+84H5mmj7LE7M7aamtf2oXP/ExV4T5KswR4dvPMymGn2fiw/O7lG44zlyU/Li5V1md5dprtap9gMpC/fTTT90yrY6AmB999FE31bIYTIN88skn3cN6mEDjl0Nx/KmnnnITdkpBIeKqlMtcDxnElM6OVEjuiRvEzLuOQL6wJpFrKsGMuhdffNFeeOEFtzaxEuTDRx995NYUlnpOJkTFQVSQjlrBOJlING2BiizciB0jHi8yhMd/0kG6ii384BzCxA3y4fMXi+RDWfh1kVxHWD/RinuWKquE6ywWijpmoSsX8ptvvukWiDJN8tlnn60YnuVcCJZV1MuWLWt3nvnFTO/0MM2R1ca4Gfh+wBzfUlYeMd93331u1lul+dtk1IMPPmhXXXWVvffee1YJ/FAEVK4y5cNK6wsuuMDuvvvuimGpJG+99Za9//779vbbb1cMT54Tt3MfospQDNYx+jzzsMYQGiZMPOAve4b87jz3XdV7QqSOwryr7ntqwX8v5DhejPmVjGOlrDHH4iIttxqKc+Use1yzyXIni8GURSbHMzWxlNXN56yzznJzeLEepWpyvnW++eabnTAuueSSA9M+i2Uk4JLccccdbqk9vmMln4tWhYWhLN0/7rjjrBJ0TFkEwIqWjkAHlnQXq7hxaIXoM7A6pSOCpjJ6V69U4ZIHVD7cDAwAC3+p7DBo2tlRZ3CXrX97bmSZ91rDuPE25pZ/dueqe/6d1Q69ytKNn0Rxt1p1j2OtZugVBffOLwMWPvhFD+BFndxfYfgdTyOWmemrXMM5yt11VvdfWw7uTbii5ct98g4nDx7PMZe04ksZ9q6gecdC33bbbVYJljQhIioCk9rjMAmdCsLIBhYWcSOMFt8cRjDBPX9zGQ8rPBA0BdeRDgcVhRaD/TU6ujzfb0DTEa688kqXfladV4L5zrgQpJvNXipBpWJrBIRRaiU2cdGy8Sl2bviMme5TjGT/qe5TDF+ZgO9XX33VLVzAKHjX0Fc07uPdHMCIYcxwJyhH34rmh8n/zSiN37aB1fVe9H4eeHtyBWI/MMqRwxeJhuuqDvFgAolhJ4WHHnqo6Hkqwp133unOa6SjMqlMyrY3N9me1j3WUN/Petf3tsR+K9WaytiWxmbbvafVBvWrt3596u1glqaj4t9pudbmyPtosETtQQOCNc03MLh5uD0IlSVn4Pcu8QsovNX1fjDliGHwZYhQOeZXAvkK43d1AoyhD+8XYsQhaDZ6g+jFnhci0SnvA0nwvffe69bNvfTSSwW1lUSywxAjHRJzZVrTrfb+knn2p0X/a7tadtmAngPsH8/6Jxs/cqK1tKbtpXeW2PNzF9n2X1qsf986++Md02zKKSPdtXvsc6trWWAta7fZvk0J6zn2VqsZ0rZjUrxvwn8Eyc4A+cd8GfltysCLOL9c8+PkHL+9D46I4xCm1J4wOSsc3isYh85EtTvZSWPp+OMvv/yyzZs3zy0ExQ1h2yya8a62v1pnsXTTDzb7z//lrLNnZL+R9m8z77PvV+ywu//9z7ar+WA/BlHP+c/rLFu3wxZn/9vGJoZYt811tvubZbZv2VYb+q//EXUk2zqZ+VY3DoLyax49fiOdYhCO8F6IiJ3wpfoGVIpSbl86S3wHO8IxG57Y749YSRBe/ho7Xn6Ug4fyQze+WSoGor3lllvshhtucOv7aI7YdqAUZDDx7dk/HEUmkXbW1sXhOJ0lwudnGhnptxOIp9mPJJAuriNNPGsx/5Xn8+OtWC4/RIWfHi8IP8ZKOPoF/lq+49f4dJMXXEM68n1JrBqdSs+G7RsKxAxNzdutaXejrf5pZ4GYoXHHXtvcuNuqhm2xTdnB1qdqnI2sGmDp3Tnbu2S5paN71wxss5g+TfnrIIG883vs5cMxnisuatKeL2Z/zIePx42bER+58bSFLbTABYLmVWcmm7ZkdWlFs6yfRDLCQITlOmQUAsNeDH8hEJbtT5kyxcrBGC6uB8N85QTNfnB0TNnOi7h5cNLE6944pHPBggVOkFh/Mg+h0qmkBYj7ZoiXjQ6pHHRauQfXT5061S2GjcNeHwgP39LvqUfa6NTEn4EhSITLeUYiSBPp95WTTSX91gjEwzZdfBM3lYlKQP6TdlaoM5TnaejREPWBItHnjc12r+lmfev72sB+GBSa/oOC6V5bbQP61ltrYoTtTdXYyqYhtuG7auu75kzrU9MQvQI/aKwoY0TtDQcf0pzvauTjReoX9vpjpcJTBn5hshc1YTlWSl88Svz1fEzQzK3zVqB4JCyPxzr7TzlIGA/FEA+1r9wbQ8/48ePd/haV9o9gqT6ZgDARBWkvdQ3Pg7+HKBiKI6xf0V0ss/zIDOFpUQjLdgalxrkJj/gpcNJFIZCWeEUhPxAllYpKwr399rj+fvktDOcJT1iu9RvlkB721ou/WZ0wYqJNGnWafb12oevkV1clbfrYC61Ht5429eQ6O2/yKPvLF2udqKsjozXr95OsT6+oY2bdrH5brc2fv892LUjZmK119g9/mGZV3bsVxO8tZkfxG1L+FuF5hmwu8r9jOm03l6NtjLDVWemqEjWDZsfXpEo78WClfbPUUbBUNDOlmpo4CNaPb5bLEB8OfEfF7ytdKnxHMzh//oG/rtz1fhck34FCuMXmMHjXyl9DeK7ze4PE489kM7Z045LI1WiyYQ0jbPTA0c5qQzqTta8Wb7Qt25pt1LA+Nv64wQda40wkkP9blbJ1K9I2/uikjT6x5rDtiJNNPEtV5DvHn7+doCEbiTWdTlltTZVGF8RhhZtPkooqdtRZLdZiFm0/qqKAyUjIralW1zRh1iVs0Zk4zyGDPx6JtgbLXNz9K2qh8yNJpVqdP4ar4oUtcYtDgXtp4t4S5lwHENcpWZMsO0+7rKA92WymLVL3ClSrWMShwZnNRFtHsZrRjg70ZzrUZcW8+7gOjhO6dzR25KDn7QzaRP03XvVdcIPEr19aHgZ63q6AtgITQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZB8f85ChaZEjaUZgAAAABJRU5ErkJggg==",Vv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1ASURBVHgB7Zt7jFTVHcd/d2Z2WZbdZd1ll8cuq4ggj74QNFbENhqMomK1pE0bg9imSiMxGiMSNaYR/yAkptQEQatEE1uVBLHlkfgoRJGC2EqwIM/yfu2yLOyys+zsvHq/Zzizd2bvPP4ogr98P2Eyj3vumXPP+Zzf/Z0zrBOJJpNCiBICQogiKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFaHiiyZTj6R9TcjFxnH/OannIikotCMJ11/3QYnJpSCtHaQOSNLJn1TkPeok426FcaHM5NIDB+MpJ/MQyHWyk4y5zwkh3z16enokHA5LMtk3ECWjUYmfP+++8DnmypJMROTyDmCJC1L7t9E35XAuQVSOuh392WefybvvviuHDx+WESNGyJ133inTpk2TkpISIYVBH65atUqWLl0qXV1dcs8998hjjz0m/fv3l2QsJq2bN8nRtWsk3t0ttROuk6Zf/FKC/fqZc2Pt2yTe9k9X6G4JVlwrofqpbvp6ufY7pHYNdYJ9jjiRaNZUdfNlR+LybXL69GmZM2eOrFy5UhKJ3rtCIBCQmTNnyqJFi6S8vFxIft5//315+OGHpaOjw7x33AXV3LlzZf78+dKy8XPZteiPEusKy4WD0nj3dBk9+/eSCP9XIof+7GaX3RdqcqRk0M1SMvTnvt9jI7/jFLdYu1jlU0JnJhl9Ug6niDQDX+h3O/MjHo/L2bNn89a1ePFiWb16dYbMAO/ffPNNefnll4UUZsOGDWmZAfp27dq15vXZ7f/plTl1UE6u/4d5Ge/42iOzOSixM//qUz/Go9uN7oj+eJx3UxfcFXKBsUcZWx7nZo+xt62oy1t3JBLJWT51Ut9jgb4FCov61ltvyYIFC6QY0MHz5s2T1tZW3+MHDx409aHxloqKCrnrrrvS79944w05c+ZMzu/YtGmTvPTSSxKLxaSY9uBOUMyERNuWL19uUqFiWLhwoYmG7733XsGyR48elUceecRE1M2bNxcsjzTsxRdflNdee82I4QfuaNnYKOcX7ZyAvWUH/WrLeGflRB/bgIbPMG5+7YGcKI8ytjzOhazZkwDHUIcVGO/x7K3DD8dsIyfytLoImV955RWz4GhqapLnn3++YPm3337bPEaNGiVbtmzpc/zEiRNy8uTJ9PuBAwca4e6999507nzs2DHp7Oz0rR8Djck1ZswYCQaDeduCjnnqqafkgQceMLl6IZB7VldXm2sthueee84I/frrrxcs29LSIlVVVTJ06FDZvn17wfK7du2SF154QZYsWWL63w+sObJTsxkzZpjn2knXu/lyWcaxRjfHBsHqia4JpRnHQrVT0q8hGGTLFQQgqldSyOgNUNlk14Xzc0mLcljk5g5AmUKHvCc6RQh9yy23mIiIGXX77bcXLA95EOXKyspk0KBBfY6HQqGMnOmZZ54xUfSJJ55Id1KuRSGi/uzZs+Xxxx+XqVOnFsy53nnnHZk1a5bU1dXJ9OnTpRCDBw82bUP5Yrj11ltNvZCvELgm25b169dLMdTU1EhpaWnO47fddpt88sknJoVra2uT+++/36xBzLnXTZTrFiyUI3//QKJucKi9/nppnHa3ORbo3yBlI+ZItO1z166wBCvHuULflK7XRkz7es2aNXLDDTfIFVdckR4bjJX3tfdcCIuAhOBgxwifobw9ng8b5X3HF+p4Pk4vCs0J7lZdMXk7hG5vb5c77rijYFlcHKIKGgO50QleEKkwELt37zYRFmKuW7fOzErLuHHjZOPGjTJgwICMc/fv3y/Hjx+XyZMnF7XgOHfunLlL3HjjjX3qygXuHrW1tUXttGDC4HohKaJlPjDAX3zxhbnmhoYGcwcr1A6bW1599dXm7vFtAeFsWgFPli1bJtdcc43pw0mTJpnPke6gTRgHlLWS2lQCD/SjvYuiP/u5OyyoD9dlgxrGB+eiHkwaWx4BEcEvm6TZ7Qj1pla9Qqf295zif2X8v4E05umnn/a9TeGikVI8+uijQgoTjUflUOsBae08LQ3VDdJYO9wNYKlB7YnG5Zv9rXLiVKc0DamScSPrPOPt5sbRY5LoOiXJQL2EKnvTLK/Q4MCBA2YNgDvG+PHjzWdeoTGONkojMGESQmB7HHiFxnF7B/CmU0ifbPlcQieMvUF3PZDKnj0l3P0Nt/LgJTAat15cCBZViPwW5NNPPvmkPPTQQ0IKE46E5YOvVsjnezZIJBaRqrIquW/SDPnJtT+Vjs6ILFn+lfxt/R7pjsSkZmCZ/Pa+H8mvpo13s9ConJUPZWDsG+k5GZbuozHpN8zNx8febOpFlIRYNooi9x89erTU19env9uWsa+t0EiR8D47ZbBy4jMct0L73TltmZx46s3Yh467szt0if7/HToAiyPkZ1jo4baK2zbSDf6wUhxbD38lS9ctNlHaUldZJ3/42XzZsq1V5v1pnUR6ehdf/UqD8vGrv5ZIebN8Hf+L/DA4QipbKqT9y2/k/Jc7pPHZV8UpTf3wgkjrTQO9IDojgnp3WfLtTkBOlLeCZ6cd2SCS53IglkB9vceyYrhzYSZJTpqbm03lyEfRsMbGRskHOsFu1aBhmN1+oM4JEyaYHYWdO3eavBK/FuYCkRyzHD/KoG7MbLQduwbZoGP37t1rOhFl0PF25YxcMHu7C/ntqVOnzHEsZNHuHTt2mLb5LWyxpYjbLPbb8R2INhjQK6+80mxBekG9WPSivUOGDEmfi/7Erf2qq65K58f4fiwwcWvH9XojoG3/2LFje9sRbsuQGXT1dEmb+3nz6XCGzADvm9vC4pSFpS05Qo7EfyBNsRqJtrs7C4f3Suxsu5RciMJ2MYq+9oqHtqB/svsQ/YDryl7wYZxRlzda4zXK45q8kwCfo+5c0TnVjszvzRDacQIST8QllCe6HzlyxHS+nYEQL9eCDGU++ugj84xBhKBY9OVjz549Zh8XK/R8Qm/dutUsKCEwJgzaAlkefPDBPmXRIcj7sMrGNiFys8rKSrOgxJ0gezBwfZ9++qlZ3GEhg0kIsfxkBmgHdhXwjPKoD+9R3k9o5KOYtGgTFoPYrUE59BHaZYOE3bLCZERbMQmwqMbnhw4dMtfuFXpw1RAJunvLGENLRVmlDKqok6ZhjjuuAYnFe7e5ystKZFh9hUScfnK+Z4DsPlEj+/6dkMF7fyz15Y0SqqnNaDtEhJB2rxjX6bf3Daykdr/ajkMuV3AMExl12/QjX3mAS3Gyvr/PT9+xWNTNo9FY/4rQ+RgQrLrxxViJ5gLl9u3bZwYJEiGaYr+4ECtWrDD1Dh8+PGcZ3Cns1g8mDDob7cEEywYdirJYyEBSDAI6GnL7RWi7UMFxmwOiDlwDhM3GruIRbSEd2mEjNSaRt160G3XjLoAHIhDknzJlinlGee8Ohr2z2KiOSYPzJk6caMZi5MiR6bIJd2H/8Y4PZfW2VRKN9UhV/4Eyc/Is+V7D993BT8pf1+yQZSu3SSQak+rKMnn2dzfJ5AnDzc7X5pMRWb4m7P5EHpcJbtT7zdwqqRlz+aZ6uJ5E0p2kocw29hE69RNkj5QEnZxSk8ublo4Wd5fjlAyrHibV5ZnbpEebO+R4S6cMH1IpQ+sqM887k3DvGlEZ1RSSmkFBuVwxjsaSEnKDmeMUiNAAkQWRGqlHMMC/0iKXD3G4GXdlDpX6/9TvJzSwUiNGh0JutHYYrcmlI5FALp7Afxw1aUbO3D2X0AA/tqCSeDxmfpJBCpLKQig3ufiYv2LFz+7J1O/bwWDIfQT6pBle8gpt8f4PKEie/ltZQi4ijpPaeTOBNJBf5PQ5xQhNyHeF/wEM2yGelHbyZgAAAABJRU5ErkJggg==",Yv=hn(t=>{const{onClose:e}=t,{toolbarVerticalPosition:c,changeToolbarVerticalPosition:h}=pn,[g,y]=le.useState(c);le.useEffect(()=>{g!==c&&y(c)},[c]);const _=d=>{y(d.target.value)},x=()=>{h(g),e()},T=()=>{e()};return I.jsxs(Iv,{onClose:T,open:!0,children:[I.jsxs(Lv,{children:["  "," ",I.jsx(Rv,{variant:"text",onClick:x,children:""})]}),I.jsx(Fv,{children:I.jsx(se.RadioGroup,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:g,onChange:_,children:I.jsxs(wo,{flexDirection:"row",className:"controller-wrapper",children:[I.jsxs(wo,{flexDirection:"column",className:"controller",children:[I.jsx("img",{src:Nv,alt:" ",onClick:()=>{y("top")}}),I.jsx(Nl,{value:"top",labelPlacement:"top",control:I.jsx(Vl,{}),label:" "})]}),I.jsxs(wo,{flexDirection:"column",className:"controller",children:[I.jsx("img",{src:Vv,alt:" ",onClick:()=>{y("bottom")}}),I.jsx(Nl,{value:"bottom",labelPlacement:"top",control:I.jsx(Vl,{}),label:" "})]})]})})})]})}),Uv=hn(()=>{const{core:t}=Qe(),{toolbarVerticalPosition:e}=pn,[c,h]=le.useState(null),[g,y]=le.useState(t.config.usePencil),[_,x]=le.useState(null),[T,d]=le.useState(!1),n=f=>{h(c?null:f.currentTarget)},u=()=>{h(null)},l=f=>{const s=f.target;y(!s.checked),t.setUsePencil(!s.checked)},r=f=>{d(!0)},o=()=>{d(!1)},i=!!c,a=i?"simple-popper":void 0;return I.jsxs(I.Fragment,{children:[I.jsx(dt,{"aria-describedby":a,Icon:()=>I.jsx($e,{variant:"more"}),onClick:n}),I.jsx(jv,{id:a,open:i,disablePortal:!1,anchorEl:c,placement:e==="bottom"?"top":"bottom",modifiers:[{name:"flip",enabled:!1,options:{altBoundary:!0,rootBoundary:"document",padding:8}},{name:"offset",options:{offset:[0,40]}},{name:"arrow",enabled:!0,options:{element:_}}],children:I.jsxs(I.Fragment,{children:[I.jsx("span",{ref:x,className:"arrow",style:{lineHeight:0,zIndex:"10"},children:I.jsx($e,{variant:"arrow",width:14,height:12})}),I.jsx(se.ClickAwayListener,{onClickAway:u,children:I.jsxs(kv,{children:[I.jsxs(Yl,{children:[I.jsx(se.ListItemText,{children:" "}),I.jsx(Mv,{checked:!g,onChange:l})]}),I.jsx(Yl,{onClick:r,children:I.jsx(se.ListItemText,{children:"  "})})]})})]})}),T&&I.jsx(Yv,{onClose:o})]})});function Hv(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"undo"}),...t})}function zv(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"redo"}),...t})}function Wv(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"calendar"}),...t})}function Xv(){const{core:t}=Qe(),e=c=>{const h=new Date;t.addText(Sl(h,"yyyy-MM-dd"),void 0,!0)};return I.jsx(dt,{disableToolbar:!0,Icon:Wv,onClick:e,tooltip:""})}function Gv(t){return I.jsx(se.SvgIcon,{inheritViewBox:!0,component:()=>I.jsx($e,{variant:"bookmark_2"}),...t})}var xo={},Ul={exports:{}};(function(t){function e(c){return c&&c.__esModule?c:{default:c}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Ul);var vn=Ul.exports,Co={};function $v(t,e){return Te({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const qv=["mode","contrastThreshold","tonalOffset"],Hl={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:gn.white,default:gn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},So={text:{primary:gn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:gn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function zl(t,e,c,h){const g=h.light||h,y=h.dark||h*1.5;t[e]||(t.hasOwnProperty(c)?t[e]=t[c]:e==="light"?t.light=Hh(t.main,g):e==="dark"&&(t.dark=Uh(t.main,y)))}function Kv(t="light"){return t==="dark"?{main:kr[200],light:kr[50],dark:kr[400]}:{main:kr[700],light:kr[400],dark:kr[800]}}function Qv(t="light"){return t==="dark"?{main:gr[200],light:gr[50],dark:gr[400]}:{main:gr[500],light:gr[300],dark:gr[700]}}function Jv(t="light"){return t==="dark"?{main:dr[500],light:dr[300],dark:dr[700]}:{main:dr[700],light:dr[400],dark:dr[800]}}function Zv(t="light"){return t==="dark"?{main:pr[400],light:pr[300],dark:pr[700]}:{main:pr[700],light:pr[500],dark:pr[900]}}function em(t="light"){return t==="dark"?{main:vr[400],light:vr[300],dark:vr[700]}:{main:vr[800],light:vr[500],dark:vr[900]}}function tm(t="light"){return t==="dark"?{main:jr[400],light:jr[300],dark:jr[700]}:{main:"#ed6c02",light:jr[500],dark:jr[900]}}function rm(t){const{mode:e="light",contrastThreshold:c=3,tonalOffset:h=.2}=t,g=at(t,qv),y=t.primary||Kv(e),_=t.secondary||Qv(e),x=t.error||Jv(e),T=t.info||Zv(e),d=t.success||em(e),n=t.warning||tm(e);function u(i){const a=Ys(i,So.text.primary)>=c?So.text.primary:Hl.text.primary;if(process.env.NODE_ENV!=="production"){const f=Ys(i,a);f<3&&console.error([`MUI: The contrast ratio of ${f}:1 for ${a} on ${i}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join(`
`))}return a}const l=({color:i,name:a,mainShade:f=500,lightShade:s=300,darkShade:p=700})=>{if(i=Te({},i),!i.main&&i[f]&&(i.main=i[f]),!i.hasOwnProperty("main"))throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${a?` (${a})`:""} provided to augmentColor(color) is invalid.
The color object needs to have a \`main\` property or a \`${f}\` property.`:_r(11,a?` (${a})`:"",f));if(typeof i.main!="string")throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${a?` (${a})`:""} provided to augmentColor(color) is invalid.
\`color.main\` should be a string, but \`${JSON.stringify(i.main)}\` was provided instead.

Did you intend to use one of the following approaches?

import { green } from "@mui/material/colors";

const theme1 = createTheme({ palette: {
  primary: green,
} });

const theme2 = createTheme({ palette: {
  primary: { main: green[500] },
} });`:_r(12,a?` (${a})`:"",JSON.stringify(i.main)));return zl(i,"light",s,h),zl(i,"dark",p,h),i.contrastText||(i.contrastText=u(i.main)),i},r={dark:So,light:Hl};return process.env.NODE_ENV!=="production"&&(r[e]||console.error(`MUI: The palette mode \`${e}\` is not supported.`)),jt(Te({common:Te({},gn),mode:e,primary:l({color:y,name:"primary"}),secondary:l({color:_,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:l({color:x,name:"error"}),warning:l({color:n,name:"warning"}),info:l({color:T,name:"info"}),success:l({color:d,name:"success"}),grey:tt,contrastThreshold:c,getContrastText:u,augmentColor:l,tonalOffset:h},r[e]),g)}const nm=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function im(t){return Math.round(t*1e5)/1e5}const Wl={textTransform:"uppercase"},Xl='"Roboto", "Helvetica", "Arial", sans-serif';function om(t,e){const c=typeof e=="function"?e(t):e,{fontFamily:h=Xl,fontSize:g=14,fontWeightLight:y=300,fontWeightRegular:_=400,fontWeightMedium:x=500,fontWeightBold:T=700,htmlFontSize:d=16,allVariants:n,pxToRem:u}=c,l=at(c,nm);process.env.NODE_ENV!=="production"&&(typeof g!="number"&&console.error("MUI: `fontSize` is required to be a number."),typeof d!="number"&&console.error("MUI: `htmlFontSize` is required to be a number."));const r=g/14,o=u||(f=>`${f/d*r}rem`),i=(f,s,p,v,m)=>Te({fontFamily:h,fontWeight:f,fontSize:o(s),lineHeight:p},h===Xl?{letterSpacing:`${im(v/s)}em`}:{},m,n),a={h1:i(y,96,1.167,-1.5),h2:i(y,60,1.2,-.5),h3:i(_,48,1.167,0),h4:i(_,34,1.235,.25),h5:i(_,24,1.334,0),h6:i(x,20,1.6,.15),subtitle1:i(_,16,1.75,.15),subtitle2:i(x,14,1.57,.1),body1:i(_,16,1.5,.15),body2:i(_,14,1.43,.15),button:i(x,14,1.75,.4,Wl),caption:i(_,12,1.66,.4),overline:i(_,12,2.66,1,Wl),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jt(Te({htmlFontSize:d,pxToRem:o,fontFamily:h,fontSize:g,fontWeightLight:y,fontWeightRegular:_,fontWeightMedium:x,fontWeightBold:T},a),l,{clone:!1})}const sm=.2,am=.14,lm=.12;function Ye(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${sm})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${am})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${lm})`].join(",")}const cm=["none",Ye(0,2,1,-1,0,1,1,0,0,1,3,0),Ye(0,3,1,-2,0,2,2,0,0,1,5,0),Ye(0,3,3,-2,0,3,4,0,0,1,8,0),Ye(0,2,4,-1,0,4,5,0,0,1,10,0),Ye(0,3,5,-1,0,5,8,0,0,1,14,0),Ye(0,3,5,-1,0,6,10,0,0,1,18,0),Ye(0,4,5,-2,0,7,10,1,0,2,16,1),Ye(0,5,5,-3,0,8,10,1,0,3,14,2),Ye(0,5,6,-3,0,9,12,1,0,3,16,2),Ye(0,6,6,-3,0,10,14,1,0,4,18,3),Ye(0,6,7,-4,0,11,15,1,0,4,20,3),Ye(0,7,8,-4,0,12,17,2,0,5,22,4),Ye(0,7,8,-4,0,13,19,2,0,5,24,4),Ye(0,7,9,-4,0,14,21,2,0,5,26,4),Ye(0,8,9,-5,0,15,22,2,0,6,28,5),Ye(0,8,10,-5,0,16,24,2,0,6,30,5),Ye(0,8,11,-5,0,17,26,2,0,6,32,5),Ye(0,9,11,-5,0,18,28,2,0,7,34,6),Ye(0,9,12,-6,0,19,29,2,0,7,36,6),Ye(0,10,13,-6,0,20,31,3,0,8,38,7),Ye(0,10,13,-6,0,21,33,3,0,8,40,7),Ye(0,10,14,-6,0,22,35,3,0,8,42,7),Ye(0,11,14,-7,0,23,36,3,0,9,44,8),Ye(0,11,15,-7,0,24,38,3,0,9,46,8)],um=["duration","easing","delay"],hm={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},fm={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Gl(t){return`${Math.round(t)}ms`}function dm(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function gm(t){const e=Te({},hm,t.easing),c=Te({},fm,t.duration);return Te({getAutoHeightDuration:dm,create:(g=["all"],y={})=>{const{duration:_=c.standard,easing:x=e.easeInOut,delay:T=0}=y,d=at(y,um);if(process.env.NODE_ENV!=="production"){const n=l=>typeof l=="string",u=l=>!isNaN(parseFloat(l));!n(g)&&!Array.isArray(g)&&console.error('MUI: Argument "props" must be a string or Array.'),!u(_)&&!n(_)&&console.error(`MUI: Argument "duration" must be a number or a string but found ${_}.`),n(x)||console.error('MUI: Argument "easing" must be a string.'),!u(T)&&!n(T)&&console.error('MUI: Argument "delay" must be a number or a string.'),Object.keys(d).length!==0&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(d).join(",")}].`)}return(Array.isArray(g)?g:[g]).map(n=>`${n} ${typeof _=="string"?_:Gl(_)} ${x} ${typeof T=="string"?T:Gl(T)}`).join(",")}},t,{easing:e,duration:c})}const pm={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},vm=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function mm(t={},...e){const{mixins:c={},palette:h={},transitions:g={},typography:y={}}=t,_=at(t,vm);if(t.vars)throw new Error(process.env.NODE_ENV!=="production"?"MUI: `vars` is a private field used for CSS variables support.\nPlease use another name.":_r(18));const x=rm(h),T=Ii(t);let d=jt(T,{mixins:$v(T.breakpoints,c),palette:x,shadows:cm.slice(),typography:om(x,y),transitions:gm(g),zIndex:Te({},pm)});if(d=jt(d,_),d=e.reduce((n,u)=>jt(n,u),d),process.env.NODE_ENV!=="production"){const n=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],u=(l,r)=>{let o;for(o in l){const i=l[o];if(n.indexOf(o)!==-1&&Object.keys(i).length>0){if(process.env.NODE_ENV!=="production"){const a=ki("",o);console.error([`MUI: The \`${r}\` component increases the CSS specificity of the \`${o}\` internal state.`,"You can not override it like this: ",JSON.stringify(l,null,2),"",`Instead, you need to use the '&.${a}' syntax:`,JSON.stringify({root:{[`&.${a}`]:i}},null,2),"","https://mui.com/r/state-classes-guide"].join(`
`))}l[o]={}}}};Object.keys(d.components).forEach(l=>{const r=d.components[l].styleOverrides;r&&l.indexOf("Mui")===0&&u(r,l)})}return d.unstable_sxConfig=Te({},Mn,_==null?void 0:_.unstable_sxConfig),d.unstable_sx=function(u){return kn({sx:u,theme:this})},d}const $l=mm();function ym({props:t,name:e}){return Nh({props:t,name:e,defaultTheme:$l})}const bm=Fh({defaultTheme:$l,rootShouldForwardProp:t=>jn(t)&&t!=="classes"});function _m(t){return ki("MuiSvgIcon",t)}xu("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const wm=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],xm=t=>{const{color:e,fontSize:c,classes:h}=t,g={root:["root",e!=="inherit"&&`color${Ot(e)}`,`fontSize${Ot(c)}`]};return _u(g,_m,h)},Cm=bm("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:c}=t;return[e.root,c.color!=="inherit"&&e[`color${Ot(c.color)}`],e[`fontSize${Ot(c.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var c,h,g,y,_,x,T,d,n,u,l,r,o,i,a,f,s;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(c=t.transitions)==null||(h=c.create)==null?void 0:h.call(c,"fill",{duration:(g=t.transitions)==null||(y=g.duration)==null?void 0:y.shorter}),fontSize:{inherit:"inherit",small:((_=t.typography)==null||(x=_.pxToRem)==null?void 0:x.call(_,20))||"1.25rem",medium:((T=t.typography)==null||(d=T.pxToRem)==null?void 0:d.call(T,24))||"1.5rem",large:((n=t.typography)==null||(u=n.pxToRem)==null?void 0:u.call(n,35))||"2.1875rem"}[e.fontSize],color:(l=(r=(t.vars||t).palette)==null||(o=r[e.color])==null?void 0:o.main)!=null?l:{action:(i=(t.vars||t).palette)==null||(a=i.action)==null?void 0:a.active,disabled:(f=(t.vars||t).palette)==null||(s=f.action)==null?void 0:s.disabled,inherit:void 0}[e.color]}}),To=he.forwardRef(function(e,c){const h=ym({props:e,name:"MuiSvgIcon"}),{children:g,className:y,color:_="inherit",component:x="svg",fontSize:T="medium",htmlColor:d,inheritViewBox:n=!1,titleAccess:u,viewBox:l="0 0 24 24"}=h,r=at(h,wm),o=Te({},h,{color:_,component:x,fontSize:T,instanceFontSize:e.fontSize,inheritViewBox:n,viewBox:l}),i={};n||(i.viewBox=l);const a=xm(o);return I.jsxs(Cm,Te({as:x,className:js(a.root,y),focusable:"false",color:d,"aria-hidden":u?void 0:!0,role:u?"img":void 0,ref:c},i,r,{ownerState:o,children:[g,u?I.jsx("title",{children:u}):null]}))});process.env.NODE_ENV!=="production"&&(To.propTypes={children:Ce.node,classes:Ce.object,className:Ce.string,color:Ce.oneOfType([Ce.oneOf(["inherit","action","disabled","primary","secondary","error","info","success","warning"]),Ce.string]),component:Ce.elementType,fontSize:Ce.oneOfType([Ce.oneOf(["inherit","large","medium","small"]),Ce.string]),htmlColor:Ce.string,inheritViewBox:Ce.bool,shapeRendering:Ce.string,sx:Ce.oneOfType([Ce.arrayOf(Ce.oneOfType([Ce.func,Ce.object,Ce.bool])),Ce.func,Ce.object]),titleAccess:Ce.string,viewBox:Ce.string}),To.muiName="SvgIcon";const ql=To;function Sm(t,e){function c(h,g){return I.jsx(ql,Te({"data-testid":`${e}Icon`,ref:g},h,{children:t}))}return process.env.NODE_ENV!=="production"&&(c.displayName=`${e}Icon`),c.muiName=ql.muiName,he.memo(he.forwardRef(c))}const Tm=Jo(Object.freeze(Object.defineProperty({__proto__:null,capitalize:Ot,createChainedFunction:tu,createSvgIcon:Sm,debounce:ru,deprecatedPropType:nu,isMuiElement:iu,ownerDocument:ms,ownerWindow:ou,requirePropFactory:su,setRef:ys,unstable_ClassNameGenerator:{configure:t=>{process.env.NODE_ENV!=="production"&&console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),Ts.configure(t)}},unstable_useEnhancedEffect:bs,unstable_useId:lu,unsupportedProp:cu,useControlled:uu,useEventCallback:hu,useForkRef:fu,useIsFocusVisible:bu},Symbol.toStringTag,{value:"Module"})));var Kl;function mn(){return Kl||(Kl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Tm}(Co)),Co}var Em=vn;Object.defineProperty(xo,"__esModule",{value:!0});var Ql=xo.default=void 0,Om=Em(mn()),Pm=I,Am=(0,Om.default)((0,Pm.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");Ql=xo.default=Am;function Dm({bp:t,onSelect:e,onDelete:c}){const[h,g]=le.useState(null),y=T=>{T.stopPropagation(),g(T.currentTarget)},_=async T=>{T.stopPropagation(),x(),c(t.id)},x=()=>{g(null)};return I.jsxs(se.ListItem,{button:!0,onClick:()=>e(t.contents),children:[I.jsx(se.ListItemText,{primary:t.contents}),I.jsx(se.IconButton,{onClick:y,children:I.jsx(Ql,{})}),I.jsx(se.Menu,{anchorEl:h,open:!!h,onClose:x,children:I.jsx(se.MenuItem,{onClick:_,children:""})})]})}function Mm({open:t,boilerplates:e,onSelect:c,onClose:h,onDelete:g}){const y=x=>{c(x),h()},_=async x=>{g(x)};return I.jsxs(se.Dialog,{fullWidth:!0,maxWidth:"xs",onClose:h,open:t,children:[I.jsx(se.DialogTitle,{children:"  "}),I.jsx(se.List,{sx:{pt:0},children:e.map(x=>I.jsx(Dm,{bp:x,onSelect:y,onDelete:_},x.id))})]})}const Eo=se.styled(dt)(()=>`
  &.inner-btn {
    gap: 10px !important;
    &.svg-20 {
      svg,path {
        width: 20px;
        height: 20px;
      }
    }
    &.flex-row {
      flex-direction: row !important;
    }
    &.flex-column {
      flex-direction: column !important;
    }
    &.bg-grey {
      .MuiIconButton-root {
        background: ${tt[200]};
      }
    }
    .MuiTypography-root {
      background: ${tt[200]};
      border-radius: 2px;
      padding: 0 6px;
      line-height: 18px;
    }
    svg,path {
      fill: #000000;
    }
  }
`),km=se.styled(se.Dialog)(()=>`
  .MuiDialog-paper {
    max-width: 660px;
    min-height: 480px;
  }
`),jm=se.styled(se.Button)(()=>`
  width: 100%;
  height: 100%;
  padding: 0;
`),Rm=se.styled(se.DialogTitle)(()=>`
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;

  border-bottom: 1px solid #DEE2EC;
  display: flex;
  justify-content: space-between;

`),Im=se.styled(se.DialogContent)(()=>`
  padding: 3px 7px;
`),Jl=se.styled(se.IconButton)(()=>`
  padding: 0;
  

  &.delete-btn {
    position: absolute;
    top: 4px;
    right: 4px;
  }
`),Lm=se.styled(se.List)(()=>`
  display: flex;
  gap: 2px;
  flex-wrap: wrap;
`),Fm=se.styled(se.ListItem)(()=>`
  padding: 0;
  width: 106px;
  height: 106px;
`),Bm=se.styled(se.Box)(()=>`
  &.image-item {
    width: 106px;
    height: 106px;
    background: #EAEAEA;
    display: inline-flex;
    justify-content: center;
    position: relative;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }
`);var Oo={},Nm=vn;Object.defineProperty(Oo,"__esModule",{value:!0});var Zl=Oo.default=void 0,Vm=Nm(mn()),Ym=I,Um=(0,Vm.default)((0,Ym.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");Zl=Oo.default=Um;function Hm({bp:t,onSelect:e,onDelete:c}){const h=async g=>{g.stopPropagation(),c(t.id)};return I.jsx(Fm,{children:I.jsxs(Bm,{className:"image-item",children:[I.jsx(jm,{onClick:()=>e(t.contents),children:I.jsx("img",{src:t.contents})}),I.jsx(Jl,{onClick:h,className:"delete-btn",children:I.jsx($e,{variant:"delete"})})]})})}function zm({open:t,boilerplates:e,onSelect:c,onClose:h,onDelete:g}){const y=x=>{c(x),h()},_=async x=>{g(x)};return I.jsxs(km,{maxWidth:"xs",onClose:h,open:t,children:[I.jsxs(Rm,{children:["  ",I.jsx(Jl,{"aria-label":"close",onClick:h,children:I.jsx(Zl,{})})]}),I.jsx(Im,{children:I.jsx(Lm,{children:e.map(x=>I.jsx(Hm,{bp:x,onSelect:y,onDelete:_},x.id))})})]})}const Wm=hn(()=>{const{core:t,boilerplate:e,toolbarPosition:c}=Qe(),{toolbarVerticalPosition:h}=pn,[g,y]=le.useState(null),[_,x]=le.useState(!1),[T,d]=le.useState(!1),[n,u]=le.useState([]),[l,r]=le.useState([]),{tool:o,setTool:i}=Yt(),a=o===we.SIMPLE_INPUT,f=le.useCallback(async()=>{if(!e||e&&!e[0])return;const V=await e[0].onLoadBoilerplate();u(V)},[e]),s=le.useCallback(async()=>{if(!e||e&&!e[1])return;const V=await e[1].onLoadBoilerplate();r(V)},[e]),p=V=>{if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");i(we.SIMPLE_INPUT),y(V.currentTarget)},v=V=>{t.addText(V,void 0,!0),x(!1),i(we.PAN)},m=async V=>{e&&await e[0].onDeleteBoilerplate(V),u(Q=>Q.filter(J=>J.id!==V))},b=async()=>{!e||e&&!e[0]||(await f(),x(V=>!V))},w=()=>{y(null),i(we.PAN)},E=V=>{t.addImage(V),d(!1),i(we.PAN)},A=async V=>{e&&await e[1].onDeleteBoilerplate(V),r(Q=>Q.filter(J=>J.id!==V))},O=async()=>{!e||e&&!e[1]||(await s(),d(V=>!V))},L=!!g,Y=L?"simple-popover":void 0;return I.jsxs("div",{style:{position:"relative"},children:[I.jsx(se.Popover,{id:Y,open:L,anchorEl:g,onClose:w,anchorOrigin:c==="bottom"?h==="bottom"?{vertical:-15,horizontal:"left"}:{vertical:60,horizontal:"left"}:{vertical:"top",horizontal:-20},transformOrigin:c==="bottom"?h==="bottom"?{vertical:"bottom",horizontal:"left"}:{vertical:"top",horizontal:"left"}:{vertical:"top",horizontal:"right"},PaperProps:{sx:{background:"none",boxShadow:"none"}},children:I.jsxs("div",{style:c==="bottom"?{display:"flex",flexDirection:"column",gap:"8px"}:{display:"flex",flexDirection:"row",gap:"8px"},children:[I.jsx(Eo,{className:`inner-btn ${c==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>I.jsx($e,{variant:"bookmark_text"}),onClick:b,disableToolbar:!0,tooltip:" "}),I.jsx(Eo,{className:`inner-btn ${c==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>I.jsx($e,{variant:"bookmark_image"}),onClick:O,disableToolbar:!0,tooltip:" "})]})}),I.jsx(Eo,{selected:a,disableToolbar:!0,Icon:Gv,onClick:p,tooltip:""}),I.jsx(Mm,{open:_,onClose:()=>{x(!1)},onSelect:v,onDelete:m,boilerplates:n}),I.jsx(zm,{open:T,onClose:()=>{d(!1)},onSelect:E,onDelete:A,boilerplates:l})]})});function Xm(){const{core:t,touch:e}=Qe(),{tool:c}=Yt(),[h,g]=le.useState(c?t.getToolConfig(c):null),[y,_]=le.useState(t.getHistoryInfo()),[x,T]=le.useState(t.available),d=l=>{t.undo()},n=l=>{t.redo()};le.useEffect(()=>{c&&g(t.getToolConfig(c))},[t,c]),le.useEffect(()=>t.on(ot.Event.AVAILABILITY_CHANGE,T),[t]),le.useEffect(()=>t.on(ot.Event.HISTORY_CHANGE,_),[t]);const u=l=>{const r=t.updateToolConfig(c,{color:l});g(r)};return I.jsx(yo,{leadingItems:I.jsxs(I.Fragment,{children:[I.jsx(_v,{}),I.jsx(wv,{}),I.jsx(bv,{}),I.jsx(Sv,{}),I.jsx(Dv,{}),I.jsx(Ov,{}),I.jsx(Ev,{}),I.jsx(Xv,{}),I.jsx(Wm,{})]}),palette:I.jsx(Pl,{value:h==null?void 0:h.color,onChange:u}),trailingItems:I.jsxs(I.Fragment,{children:[I.jsx(dt,{disabled:!x||y.index<=0,Icon:Hv,onClick:d,tooltip:""}),I.jsx(dt,{disabled:!x||y.index>=y.histories-1,Icon:zv,onClick:n,tooltip:""}),e&&I.jsx(Uv,{})]})})}var Po={},Gm=vn;Object.defineProperty(Po,"__esModule",{value:!0});var ec=Po.default=void 0,$m=Gm(mn()),qm=I,Km=(0,$m.default)((0,qm.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"}),"TextDecrease");ec=Po.default=Km;var Ao={},Qm=vn;Object.defineProperty(Ao,"__esModule",{value:!0});var tc=Ao.default=void 0,Jm=Qm(mn()),Zm=I,e0=(0,Jm.default)((0,Zm.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"}),"TextIncrease");tc=Ao.default=e0;var Do={},t0=vn;Object.defineProperty(Do,"__esModule",{value:!0});var Mo=Do.default=void 0,r0=t0(mn()),n0=I,i0=(0,r0.default)((0,n0.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");Mo=Do.default=i0;const rc=se.styled(dt)(()=>`
  &.save-btn {
    svg, path {
      width: 20px;
      height: 20px;
    }
  }
  &.delete-btn {
    margin-top: 16px;
  }
`),o0=({value:t,onChange:e})=>{const{toolbarPosition:c}=Qe();return I.jsxs(se.Stack,{spacing:2,direction:c==="bottom"?"row":"column-reverse",sx:{mb:1,...c==="bottom"&&{width:200},...c==="right"&&{height:200}},alignItems:"center",children:[I.jsx(ec,{}),I.jsx(se.Slider,{orientation:c==="bottom"?"horizontal":"vertical",value:t,onChange:e}),I.jsx(tc,{})]})};function s0(){const{core:t,boilerplate:e,toolbarPosition:c}=Qe();if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const[h,g]=le.useState(t.getSelectedTextSize()),[y,_]=le.useState(t.getSelectedTextColor()),x=()=>{t.deleteSelectedObject()},T=u=>{const l=u.target.value;t.changeSelectedTextSize(l),g(l)},d=u=>{t.changeSelectedTextColor(u),_(u)},n=async()=>{await e[0].onSaveBoilerplate(t.getSelectedTextContents())};return I.jsx(I.Fragment,{children:I.jsx(yo,{leadingItems:I.jsxs(I.Fragment,{children:[I.jsx(o0,{value:h,onChange:T}),I.jsx(rc,{className:"save-btn",Icon:()=>I.jsx($e,{variant:"library_add"}),onClick:n,tooltip:c==="bottom"?"  ":I.jsxs(I.Fragment,{children:["  ",I.jsx("br",{}),""]}),disableToolbar:!0})]}),palette:I.jsx(Pl,{value:y,onChange:d}),trailingItems:I.jsx(rc,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:Mo,onClick:x})})})}function a0(t){function e(k,M,D,B,C){for(var P=0,j=0,F=0,H=0,z,R,ee=0,$=0,W,U=W=z=0,q=0,te=0,K=0,ne=0,ce=D.length,me=ce-1,pe,G="",fe="",be="",xe="",Ee;q<ce;){if(R=D.charCodeAt(q),q===me&&j+H+F+P!==0&&(j!==0&&(R=j===47?10:47),H=F=P=0,ce++,me++),j+H+F+P===0){if(q===me&&(0<te&&(G=G.replace(l,"")),0<G.trim().length)){switch(R){case 32:case 9:case 59:case 13:case 10:break;default:G+=D.charAt(q)}R=59}switch(R){case 123:for(G=G.trim(),z=G.charCodeAt(0),W=1,ne=++q;q<ce;){switch(R=D.charCodeAt(q)){case 123:W++;break;case 125:W--;break;case 47:switch(R=D.charCodeAt(q+1)){case 42:case 47:e:{for(U=q+1;U<me;++U)switch(D.charCodeAt(U)){case 47:if(R===42&&D.charCodeAt(U-1)===42&&q+2!==U){q=U+1;break e}break;case 10:if(R===47){q=U+1;break e}}q=U}}break;case 91:R++;case 40:R++;case 34:case 39:for(;q++<me&&D.charCodeAt(q)!==R;);}if(W===0)break;q++}switch(W=D.substring(ne,q),z===0&&(z=(G=G.replace(u,"").trim()).charCodeAt(0)),z){case 64:switch(0<te&&(G=G.replace(l,"")),R=G.charCodeAt(1),R){case 100:case 109:case 115:case 45:te=M;break;default:te=Z}if(W=e(M,te,W,R,C+1),ne=W.length,0<ie&&(te=c(Z,G,K),Ee=x(3,W,te,M,V,Y,ne,R,C,B),G=te.join(""),Ee!==void 0&&(ne=(W=Ee.trim()).length)===0&&(R=0,W="")),0<ne)switch(R){case 115:G=G.replace(b,_);case 100:case 109:case 45:W=G+"{"+W+"}";break;case 107:G=G.replace(s,"$1 $2"),W=G+"{"+W+"}",W=J===1||J===2&&y("@"+W,3)?"@-webkit-"+W+"@"+W:"@"+W;break;default:W=G+W,B===112&&(W=(fe+=W,""))}else W="";break;default:W=e(M,c(M,G,K),W,B,C+1)}be+=W,W=K=te=U=z=0,G="",R=D.charCodeAt(++q);break;case 125:case 59:if(G=(0<te?G.replace(l,""):G).trim(),1<(ne=G.length))switch(U===0&&(z=G.charCodeAt(0),z===45||96<z&&123>z)&&(ne=(G=G.replace(" ",":")).length),0<ie&&(Ee=x(1,G,M,k,V,Y,fe.length,B,C,B))!==void 0&&(ne=(G=Ee.trim()).length)===0&&(G="\0\0"),z=G.charCodeAt(0),R=G.charCodeAt(1),z){case 0:break;case 64:if(R===105||R===99){xe+=G+D.charAt(q);break}default:G.charCodeAt(ne-1)!==58&&(fe+=g(G,z,R,G.charCodeAt(2)))}K=te=U=z=0,G="",R=D.charCodeAt(++q)}}switch(R){case 13:case 10:j===47?j=0:1+z===0&&B!==107&&0<G.length&&(te=1,G+="\0"),0<ie*X&&x(0,G,M,k,V,Y,fe.length,B,C,B),Y=1,V++;break;case 59:case 125:if(j+H+F+P===0){Y++;break}default:switch(Y++,pe=D.charAt(q),R){case 9:case 32:if(H+P+j===0)switch(ee){case 44:case 58:case 9:case 32:pe="";break;default:R!==32&&(pe=" ")}break;case 0:pe="\\0";break;case 12:pe="\\f";break;case 11:pe="\\v";break;case 38:H+j+P===0&&(te=K=1,pe="\f"+pe);break;case 108:if(H+j+P+Q===0&&0<U)switch(q-U){case 2:ee===112&&D.charCodeAt(q-3)===58&&(Q=ee);case 8:$===111&&(Q=$)}break;case 58:H+j+P===0&&(U=q);break;case 44:j+F+H+P===0&&(te=1,pe+="\r");break;case 34:case 39:j===0&&(H=H===R?0:H===0?R:H);break;case 91:H+j+F===0&&P++;break;case 93:H+j+F===0&&P--;break;case 41:H+j+P===0&&F--;break;case 40:if(H+j+P===0){if(z===0)switch(2*ee+3*$){case 533:break;default:z=1}F++}break;case 64:j+F+H+P+U+W===0&&(W=1);break;case 42:case 47:if(!(0<H+P+F))switch(j){case 0:switch(2*R+3*D.charCodeAt(q+1)){case 235:j=47;break;case 220:ne=q,j=42}break;case 42:R===47&&ee===42&&ne+2!==q&&(D.charCodeAt(ne+2)===33&&(fe+=D.substring(ne,q+1)),pe="",j=0)}}j===0&&(G+=pe)}$=ee,ee=R,q++}if(ne=fe.length,0<ne){if(te=M,0<ie&&(Ee=x(2,fe,te,k,V,Y,ne,B,C,B),Ee!==void 0&&(fe=Ee).length===0))return xe+fe+be;if(fe=te.join(",")+"{"+fe+"}",J*Q!==0){switch(J!==2||y(fe,2)||(Q=0),Q){case 111:fe=fe.replace(v,":-moz-$1")+fe;break;case 112:fe=fe.replace(p,"::-webkit-input-$1")+fe.replace(p,"::-moz-$1")+fe.replace(p,":-ms-input-$1")+fe}Q=0}}return xe+fe+be}function c(k,M,D){var B=M.trim().split(a);M=B;var C=B.length,P=k.length;switch(P){case 0:case 1:var j=0;for(k=P===0?"":k[0]+" ";j<C;++j)M[j]=h(k,M[j],D).trim();break;default:var F=j=0;for(M=[];j<C;++j)for(var H=0;H<P;++H)M[F++]=h(k[H]+" ",B[j],D).trim()}return M}function h(k,M,D){var B=M.charCodeAt(0);switch(33>B&&(B=(M=M.trim()).charCodeAt(0)),B){case 38:return M.replace(f,"$1"+k.trim());case 58:return k.trim()+M.replace(f,"$1"+k.trim());default:if(0<1*D&&0<M.indexOf("\f"))return M.replace(f,(k.charCodeAt(0)===58?"":"$1")+k.trim())}return k+M}function g(k,M,D,B){var C=k+";",P=2*M+3*D+4*B;if(P===944){k=C.indexOf(":",9)+1;var j=C.substring(k,C.length-1).trim();return j=C.substring(0,k).trim()+j+";",J===1||J===2&&y(j,1)?"-webkit-"+j+j:j}if(J===0||J===2&&!y(C,1))return C;switch(P){case 1015:return C.charCodeAt(10)===97?"-webkit-"+C+C:C;case 951:return C.charCodeAt(3)===116?"-webkit-"+C+C:C;case 963:return C.charCodeAt(5)===110?"-webkit-"+C+C:C;case 1009:if(C.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+C+C;case 978:return"-webkit-"+C+"-moz-"+C+C;case 1019:case 983:return"-webkit-"+C+"-moz-"+C+"-ms-"+C+C;case 883:if(C.charCodeAt(8)===45)return"-webkit-"+C+C;if(0<C.indexOf("image-set(",11))return C.replace(L,"$1-webkit-$2")+C;break;case 932:if(C.charCodeAt(4)===45)switch(C.charCodeAt(5)){case 103:return"-webkit-box-"+C.replace("-grow","")+"-webkit-"+C+"-ms-"+C.replace("grow","positive")+C;case 115:return"-webkit-"+C+"-ms-"+C.replace("shrink","negative")+C;case 98:return"-webkit-"+C+"-ms-"+C.replace("basis","preferred-size")+C}return"-webkit-"+C+"-ms-"+C+C;case 964:return"-webkit-"+C+"-ms-flex-"+C+C;case 1023:if(C.charCodeAt(8)!==99)break;return j=C.substring(C.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+j+"-webkit-"+C+"-ms-flex-pack"+j+C;case 1005:return o.test(C)?C.replace(r,":-webkit-")+C.replace(r,":-moz-")+C:C;case 1e3:switch(j=C.substring(13).trim(),M=j.indexOf("-")+1,j.charCodeAt(0)+j.charCodeAt(M)){case 226:j=C.replace(m,"tb");break;case 232:j=C.replace(m,"tb-rl");break;case 220:j=C.replace(m,"lr");break;default:return C}return"-webkit-"+C+"-ms-"+j+C;case 1017:if(C.indexOf("sticky",9)===-1)break;case 975:switch(M=(C=k).length-10,j=(C.charCodeAt(M)===33?C.substring(0,M):C).substring(k.indexOf(":",7)+1).trim(),P=j.charCodeAt(0)+(j.charCodeAt(7)|0)){case 203:if(111>j.charCodeAt(8))break;case 115:C=C.replace(j,"-webkit-"+j)+";"+C;break;case 207:case 102:C=C.replace(j,"-webkit-"+(102<P?"inline-":"")+"box")+";"+C.replace(j,"-webkit-"+j)+";"+C.replace(j,"-ms-"+j+"box")+";"+C}return C+";";case 938:if(C.charCodeAt(5)===45)switch(C.charCodeAt(6)){case 105:return j=C.replace("-items",""),"-webkit-"+C+"-webkit-box-"+j+"-ms-flex-"+j+C;case 115:return"-webkit-"+C+"-ms-flex-item-"+C.replace(E,"")+C;default:return"-webkit-"+C+"-ms-flex-line-pack"+C.replace("align-content","").replace(E,"")+C}break;case 973:case 989:if(C.charCodeAt(3)!==45||C.charCodeAt(4)===122)break;case 931:case 953:if(O.test(k)===!0)return(j=k.substring(k.indexOf(":")+1)).charCodeAt(0)===115?g(k.replace("stretch","fill-available"),M,D,B).replace(":fill-available",":stretch"):C.replace(j,"-webkit-"+j)+C.replace(j,"-moz-"+j.replace("fill-",""))+C;break;case 962:if(C="-webkit-"+C+(C.charCodeAt(5)===102?"-ms-"+C:"")+C,D+B===211&&C.charCodeAt(13)===105&&0<C.indexOf("transform",10))return C.substring(0,C.indexOf(";",27)+1).replace(i,"$1-webkit-$2")+C}return C}function y(k,M){var D=k.indexOf(M===1?":":"{"),B=k.substring(0,M!==3?D:10);return D=k.substring(D+1,k.length-1),ue(M!==2?B:B.replace(A,"$1"),D,M)}function _(k,M){var D=g(M,M.charCodeAt(0),M.charCodeAt(1),M.charCodeAt(2));return D!==M+";"?D.replace(w," or ($1)").substring(4):"("+M+")"}function x(k,M,D,B,C,P,j,F,H,z){for(var R=0,ee=M,$;R<ie;++R)switch($=re[R].call(n,k,ee,D,B,C,P,j,F,H,z)){case void 0:case!1:case!0:case null:break;default:ee=$}if(ee!==M)return ee}function T(k){switch(k){case void 0:case null:ie=re.length=0;break;default:if(typeof k=="function")re[ie++]=k;else if(typeof k=="object")for(var M=0,D=k.length;M<D;++M)T(k[M]);else X=!!k|0}return T}function d(k){return k=k.prefix,k!==void 0&&(ue=null,k?typeof k!="function"?J=1:(J=2,ue=k):J=0),d}function n(k,M){var D=k;if(33>D.charCodeAt(0)&&(D=D.trim()),S=D,D=[S],0<ie){var B=x(-1,M,D,D,V,Y,0,0,0,0);B!==void 0&&typeof B=="string"&&(M=B)}var C=e(Z,D,M,0,0);return 0<ie&&(B=x(-2,C,D,D,V,Y,C.length,0,0,0),B!==void 0&&(C=B)),S="",Q=0,Y=V=1,C}var u=/^\0+/g,l=/[\0\r\f]/g,r=/: */g,o=/zoo|gra/,i=/([,: ])(transform)/g,a=/,\r+?/g,f=/([\t\r\n ])*\f?&/g,s=/@(k\w+)\s*(\S*)\s*/,p=/::(place)/g,v=/:(read-only)/g,m=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,E=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,L=/([^-])(image-set\()/,Y=1,V=1,Q=0,J=1,Z=[],re=[],ie=0,ue=null,X=0,S="";return n.use=T,n.set=d,t!==void 0&&d(t),n}var l0={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},c0=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,nc=Cu(function(t){return c0.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),ko={exports:{}},Le={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic;function u0(){if(ic)return Le;ic=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,c=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,g=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,_=t?Symbol.for("react.provider"):60109,x=t?Symbol.for("react.context"):60110,T=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,n=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,l=t?Symbol.for("react.suspense_list"):60120,r=t?Symbol.for("react.memo"):60115,o=t?Symbol.for("react.lazy"):60116,i=t?Symbol.for("react.block"):60121,a=t?Symbol.for("react.fundamental"):60117,f=t?Symbol.for("react.responder"):60118,s=t?Symbol.for("react.scope"):60119;function p(m){if(typeof m=="object"&&m!==null){var b=m.$$typeof;switch(b){case e:switch(m=m.type,m){case T:case d:case h:case y:case g:case u:return m;default:switch(m=m&&m.$$typeof,m){case x:case n:case o:case r:case _:return m;default:return b}}case c:return b}}}function v(m){return p(m)===d}return Le.AsyncMode=T,Le.ConcurrentMode=d,Le.ContextConsumer=x,Le.ContextProvider=_,Le.Element=e,Le.ForwardRef=n,Le.Fragment=h,Le.Lazy=o,Le.Memo=r,Le.Portal=c,Le.Profiler=y,Le.StrictMode=g,Le.Suspense=u,Le.isAsyncMode=function(m){return v(m)||p(m)===T},Le.isConcurrentMode=v,Le.isContextConsumer=function(m){return p(m)===x},Le.isContextProvider=function(m){return p(m)===_},Le.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},Le.isForwardRef=function(m){return p(m)===n},Le.isFragment=function(m){return p(m)===h},Le.isLazy=function(m){return p(m)===o},Le.isMemo=function(m){return p(m)===r},Le.isPortal=function(m){return p(m)===c},Le.isProfiler=function(m){return p(m)===y},Le.isStrictMode=function(m){return p(m)===g},Le.isSuspense=function(m){return p(m)===u},Le.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===h||m===d||m===y||m===g||m===u||m===l||typeof m=="object"&&m!==null&&(m.$$typeof===o||m.$$typeof===r||m.$$typeof===_||m.$$typeof===x||m.$$typeof===n||m.$$typeof===a||m.$$typeof===f||m.$$typeof===s||m.$$typeof===i)},Le.typeOf=p,Le}var Fe={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc;function h0(){return oc||(oc=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,c=t?Symbol.for("react.portal"):60106,h=t?Symbol.for("react.fragment"):60107,g=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,_=t?Symbol.for("react.provider"):60109,x=t?Symbol.for("react.context"):60110,T=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,n=t?Symbol.for("react.forward_ref"):60112,u=t?Symbol.for("react.suspense"):60113,l=t?Symbol.for("react.suspense_list"):60120,r=t?Symbol.for("react.memo"):60115,o=t?Symbol.for("react.lazy"):60116,i=t?Symbol.for("react.block"):60121,a=t?Symbol.for("react.fundamental"):60117,f=t?Symbol.for("react.responder"):60118,s=t?Symbol.for("react.scope"):60119;function p(R){return typeof R=="string"||typeof R=="function"||R===h||R===d||R===y||R===g||R===u||R===l||typeof R=="object"&&R!==null&&(R.$$typeof===o||R.$$typeof===r||R.$$typeof===_||R.$$typeof===x||R.$$typeof===n||R.$$typeof===a||R.$$typeof===f||R.$$typeof===s||R.$$typeof===i)}function v(R){if(typeof R=="object"&&R!==null){var ee=R.$$typeof;switch(ee){case e:var $=R.type;switch($){case T:case d:case h:case y:case g:case u:return $;default:var W=$&&$.$$typeof;switch(W){case x:case n:case o:case r:case _:return W;default:return ee}}case c:return ee}}}var m=T,b=d,w=x,E=_,A=e,O=n,L=h,Y=o,V=r,Q=c,J=y,Z=g,re=u,ie=!1;function ue(R){return ie||(ie=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),X(R)||v(R)===T}function X(R){return v(R)===d}function S(R){return v(R)===x}function k(R){return v(R)===_}function M(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function D(R){return v(R)===n}function B(R){return v(R)===h}function C(R){return v(R)===o}function P(R){return v(R)===r}function j(R){return v(R)===c}function F(R){return v(R)===y}function H(R){return v(R)===g}function z(R){return v(R)===u}Fe.AsyncMode=m,Fe.ConcurrentMode=b,Fe.ContextConsumer=w,Fe.ContextProvider=E,Fe.Element=A,Fe.ForwardRef=O,Fe.Fragment=L,Fe.Lazy=Y,Fe.Memo=V,Fe.Portal=Q,Fe.Profiler=J,Fe.StrictMode=Z,Fe.Suspense=re,Fe.isAsyncMode=ue,Fe.isConcurrentMode=X,Fe.isContextConsumer=S,Fe.isContextProvider=k,Fe.isElement=M,Fe.isForwardRef=D,Fe.isFragment=B,Fe.isLazy=C,Fe.isMemo=P,Fe.isPortal=j,Fe.isProfiler=F,Fe.isStrictMode=H,Fe.isSuspense=z,Fe.isValidElementType=p,Fe.typeOf=v}()),Fe}process.env.NODE_ENV==="production"?ko.exports=u0():ko.exports=h0();var f0=ko.exports,jo=f0,d0={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},g0={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},p0={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},sc={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ro={};Ro[jo.ForwardRef]=p0,Ro[jo.Memo]=sc;function ac(t){return jo.isMemo(t)?sc:Ro[t.$$typeof]||d0}var v0=Object.defineProperty,m0=Object.getOwnPropertyNames,lc=Object.getOwnPropertySymbols,y0=Object.getOwnPropertyDescriptor,b0=Object.getPrototypeOf,cc=Object.prototype;function uc(t,e,c){if(typeof e!="string"){if(cc){var h=b0(e);h&&h!==cc&&uc(t,h,c)}var g=m0(e);lc&&(g=g.concat(lc(e)));for(var y=ac(t),_=ac(e),x=0;x<g.length;++x){var T=g[x];if(!g0[T]&&!(c&&c[T])&&!(_&&_[T])&&!(y&&y[T])){var d=y0(e,T);try{v0(t,T,d)}catch{}}}}return t}var _0=uc;const w0=Qo(_0);function Vt(){return(Vt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(t[h]=c[h])}return t}).apply(this,arguments)}var hc=function(t,e){for(var c=[t[0]],h=0,g=e.length;h<g;h+=1)c.push(e[h],t[h+1]);return c},Io=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!Yr.typeOf(t)},di=Object.freeze([]),Kt=Object.freeze({});function yn(t){return typeof t=="function"}function Lo(t){return process.env.NODE_ENV!=="production"&&typeof t=="string"&&t||t.displayName||t.name||"Component"}function Fo(t){return t&&typeof t.styledComponentId=="string"}var Rr=typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Bo=typeof window<"u"&&"HTMLElement"in window,x0=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:process.env.NODE_ENV!=="production")),C0=process.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`}:{};function S0(){for(var t=arguments.length<=0?void 0:arguments[0],e=[],c=1,h=arguments.length;c<h;c+=1)e.push(c<0||arguments.length<=c?void 0:arguments[c]);return e.forEach(function(g){t=t.replace(/%[a-z]/,g)}),t}function Ir(t){for(var e=arguments.length,c=new Array(e>1?e-1:0),h=1;h<e;h++)c[h-1]=arguments[h];throw process.env.NODE_ENV==="production"?new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(c.length>0?" Args: "+c.join(", "):"")):new Error(S0.apply(void 0,[C0[t]].concat(c)).trim())}var T0=function(){function t(c){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=c}var e=t.prototype;return e.indexOfGroup=function(c){for(var h=0,g=0;g<c;g++)h+=this.groupSizes[g];return h},e.insertRules=function(c,h){if(c>=this.groupSizes.length){for(var g=this.groupSizes,y=g.length,_=y;c>=_;)(_<<=1)<0&&Ir(16,""+c);this.groupSizes=new Uint32Array(_),this.groupSizes.set(g),this.length=_;for(var x=y;x<_;x++)this.groupSizes[x]=0}for(var T=this.indexOfGroup(c+1),d=0,n=h.length;d<n;d++)this.tag.insertRule(T,h[d])&&(this.groupSizes[c]++,T++)},e.clearGroup=function(c){if(c<this.length){var h=this.groupSizes[c],g=this.indexOfGroup(c),y=g+h;this.groupSizes[c]=0;for(var _=g;_<y;_++)this.tag.deleteRule(g)}},e.getGroup=function(c){var h="";if(c>=this.length||this.groupSizes[c]===0)return h;for(var g=this.groupSizes[c],y=this.indexOfGroup(c),_=y+g,x=y;x<_;x++)h+=this.tag.getRule(x)+`/*!sc*/
`;return h},t}(),gi=new Map,pi=new Map,bn=1,vi=function(t){if(gi.has(t))return gi.get(t);for(;pi.has(bn);)bn++;var e=bn++;return process.env.NODE_ENV!=="production"&&((0|e)<0||e>1<<30)&&Ir(16,""+e),gi.set(t,e),pi.set(e,t),e},E0=function(t){return pi.get(t)},O0=function(t,e){e>=bn&&(bn=e+1),gi.set(t,e),pi.set(e,t)},P0="style["+Rr+'][data-styled-version="5.3.11"]',A0=new RegExp("^"+Rr+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),D0=function(t,e,c){for(var h,g=c.split(","),y=0,_=g.length;y<_;y++)(h=g[y])&&t.registerName(e,h)},M0=function(t,e){for(var c=(e.textContent||"").split(`/*!sc*/
`),h=[],g=0,y=c.length;g<y;g++){var _=c[g].trim();if(_){var x=_.match(A0);if(x){var T=0|parseInt(x[1],10),d=x[2];T!==0&&(O0(d,T),D0(t,d,x[3]),t.getTag().insertRules(T,h)),h.length=0}else h.push(_)}}},k0=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},fc=function(t){var e=document.head,c=t||e,h=document.createElement("style"),g=function(x){for(var T=x.childNodes,d=T.length;d>=0;d--){var n=T[d];if(n&&n.nodeType===1&&n.hasAttribute(Rr))return n}}(c),y=g!==void 0?g.nextSibling:null;h.setAttribute(Rr,"active"),h.setAttribute("data-styled-version","5.3.11");var _=k0();return _&&h.setAttribute("nonce",_),c.insertBefore(h,y),h},j0=function(){function t(c){var h=this.element=fc(c);h.appendChild(document.createTextNode("")),this.sheet=function(g){if(g.sheet)return g.sheet;for(var y=document.styleSheets,_=0,x=y.length;_<x;_++){var T=y[_];if(T.ownerNode===g)return T}Ir(17)}(h),this.length=0}var e=t.prototype;return e.insertRule=function(c,h){try{return this.sheet.insertRule(h,c),this.length++,!0}catch{return!1}},e.deleteRule=function(c){this.sheet.deleteRule(c),this.length--},e.getRule=function(c){var h=this.sheet.cssRules[c];return h!==void 0&&typeof h.cssText=="string"?h.cssText:""},t}(),R0=function(){function t(c){var h=this.element=fc(c);this.nodes=h.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(c,h){if(c<=this.length&&c>=0){var g=document.createTextNode(h),y=this.nodes[c];return this.element.insertBefore(g,y||null),this.length++,!0}return!1},e.deleteRule=function(c){this.element.removeChild(this.nodes[c]),this.length--},e.getRule=function(c){return c<this.length?this.nodes[c].textContent:""},t}(),I0=function(){function t(c){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(c,h){return c<=this.length&&(this.rules.splice(c,0,h),this.length++,!0)},e.deleteRule=function(c){this.rules.splice(c,1),this.length--},e.getRule=function(c){return c<this.length?this.rules[c]:""},t}(),dc=Bo,L0={isServer:!Bo,useCSSOMInjection:!x0},gc=function(){function t(c,h,g){c===void 0&&(c=Kt),h===void 0&&(h={}),this.options=Vt({},L0,{},c),this.gs=h,this.names=new Map(g),this.server=!!c.isServer,!this.server&&Bo&&dc&&(dc=!1,function(y){for(var _=document.querySelectorAll(P0),x=0,T=_.length;x<T;x++){var d=_[x];d&&d.getAttribute(Rr)!=="active"&&(M0(y,d),d.parentNode&&d.parentNode.removeChild(d))}}(this))}t.registerId=function(c){return vi(c)};var e=t.prototype;return e.reconstructWithOptions=function(c,h){return h===void 0&&(h=!0),new t(Vt({},this.options,{},c),this.gs,h&&this.names||void 0)},e.allocateGSInstance=function(c){return this.gs[c]=(this.gs[c]||0)+1},e.getTag=function(){return this.tag||(this.tag=(g=(h=this.options).isServer,y=h.useCSSOMInjection,_=h.target,c=g?new I0(_):y?new j0(_):new R0(_),new T0(c)));var c,h,g,y,_},e.hasNameForId=function(c,h){return this.names.has(c)&&this.names.get(c).has(h)},e.registerName=function(c,h){if(vi(c),this.names.has(c))this.names.get(c).add(h);else{var g=new Set;g.add(h),this.names.set(c,g)}},e.insertRules=function(c,h,g){this.registerName(c,h),this.getTag().insertRules(vi(c),g)},e.clearNames=function(c){this.names.has(c)&&this.names.get(c).clear()},e.clearRules=function(c){this.getTag().clearGroup(vi(c)),this.clearNames(c)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(c){for(var h=c.getTag(),g=h.length,y="",_=0;_<g;_++){var x=E0(_);if(x!==void 0){var T=c.names.get(x),d=h.getGroup(_);if(T&&d&&T.size){var n=Rr+".g"+_+'[id="'+x+'"]',u="";T!==void 0&&T.forEach(function(l){l.length>0&&(u+=l+",")}),y+=""+d+n+'{content:"'+u+`"}/*!sc*/
`}}}return y}(this)},t}(),F0=/(a)(d)/gi,pc=function(t){return String.fromCharCode(t+(t>25?39:97))};function No(t){var e,c="";for(e=Math.abs(t);e>52;e=e/52|0)c=pc(e%52)+c;return(pc(e%52)+c).replace(F0,"$1-$2")}var mr=function(t,e){for(var c=e.length;c;)t=33*t^e.charCodeAt(--c);return t},vc=function(t){return mr(5381,t)};function B0(t){for(var e=0;e<t.length;e+=1){var c=t[e];if(yn(c)&&!Fo(c))return!1}return!0}var N0=vc("5.3.11"),V0=function(){function t(e,c,h){this.rules=e,this.staticRulesId="",this.isStatic=process.env.NODE_ENV==="production"&&(h===void 0||h.isStatic)&&B0(e),this.componentId=c,this.baseHash=mr(N0,c),this.baseStyle=h,gc.registerId(c)}return t.prototype.generateAndInjectStyles=function(e,c,h){var g=this.componentId,y=[];if(this.baseStyle&&y.push(this.baseStyle.generateAndInjectStyles(e,c,h)),this.isStatic&&!h.hash)if(this.staticRulesId&&c.hasNameForId(g,this.staticRulesId))y.push(this.staticRulesId);else{var _=Lr(this.rules,e,c,h).join(""),x=No(mr(this.baseHash,_)>>>0);if(!c.hasNameForId(g,x)){var T=h(_,"."+x,void 0,g);c.insertRules(g,x,T)}y.push(x),this.staticRulesId=x}else{for(var d=this.rules.length,n=mr(this.baseHash,h.hash),u="",l=0;l<d;l++){var r=this.rules[l];if(typeof r=="string")u+=r,process.env.NODE_ENV!=="production"&&(n=mr(n,r+l));else if(r){var o=Lr(r,e,c,h),i=Array.isArray(o)?o.join(""):o;n=mr(n,i+l),u+=i}}if(u){var a=No(n>>>0);if(!c.hasNameForId(g,a)){var f=h(u,"."+a,void 0,g);c.insertRules(g,a,f)}y.push(a)}}return y.join(" ")},t}(),Y0=/^\s*\/\/.*$/gm,U0=[":","[",".","#"];function H0(t){var e,c,h,g,y=t===void 0?Kt:t,_=y.options,x=_===void 0?Kt:_,T=y.plugins,d=T===void 0?di:T,n=new a0(x),u=[],l=function(i){function a(f){if(f)try{i(f+"}")}catch{}}return function(f,s,p,v,m,b,w,E,A,O){switch(f){case 1:if(A===0&&s.charCodeAt(0)===64)return i(s+";"),"";break;case 2:if(E===0)return s+"/*|*/";break;case 3:switch(E){case 102:case 112:return i(p[0]+s),"";default:return s+(O===0?"/*|*/":"")}case-2:s.split("/*|*/}").forEach(a)}}}(function(i){u.push(i)}),r=function(i,a,f){return a===0&&U0.indexOf(f[c.length])!==-1||f.match(g)?i:"."+e};function o(i,a,f,s){s===void 0&&(s="&");var p=i.replace(Y0,""),v=a&&f?f+" "+a+" { "+p+" }":p;return e=s,c=a,h=new RegExp("\\"+c+"\\b","g"),g=new RegExp("(\\"+c+"\\b){2,}"),n(f||!a?"":a,v)}return n.use([].concat(d,[function(i,a,f){i===2&&f.length&&f[0].lastIndexOf(c)>0&&(f[0]=f[0].replace(h,r))},l,function(i){if(i===-2){var a=u;return u=[],a}}])),o.hash=d.length?d.reduce(function(i,a){return a.name||Ir(15),mr(i,a.name)},5381).toString():"",o}var mc=le.createContext();mc.Consumer;var yc=le.createContext(),z0=(yc.Consumer,new gc),Vo=H0();function W0(){return le.useContext(mc)||z0}function X0(){return le.useContext(yc)||Vo}var G0=function(){function t(e,c){var h=this;this.inject=function(g,y){y===void 0&&(y=Vo);var _=h.name+y.hash;g.hasNameForId(h.id,_)||g.insertRules(h.id,_,y(h.rules,_,"@keyframes"))},this.toString=function(){return Ir(12,String(h.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=c}return t.prototype.getName=function(e){return e===void 0&&(e=Vo),this.name+e.hash},t}(),$0=/([A-Z])/,q0=/([A-Z])/g,K0=/^ms-/,Q0=function(t){return"-"+t.toLowerCase()};function bc(t){return $0.test(t)?t.replace(q0,Q0).replace(K0,"-ms-"):t}var _c=function(t){return t==null||t===!1||t===""};function Lr(t,e,c,h){if(Array.isArray(t)){for(var g,y=[],_=0,x=t.length;_<x;_+=1)(g=Lr(t[_],e,c,h))!==""&&(Array.isArray(g)?y.push.apply(y,g):y.push(g));return y}if(_c(t))return"";if(Fo(t))return"."+t.styledComponentId;if(yn(t)){if(typeof(d=t)!="function"||d.prototype&&d.prototype.isReactComponent||!e)return t;var T=t(e);return process.env.NODE_ENV!=="production"&&Yr.isElement(T)&&console.warn(Lo(t)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),Lr(T,e,c,h)}var d;return t instanceof G0?c?(t.inject(c,h),t.getName(h)):t:Io(t)?function n(u,l){var r,o,i=[];for(var a in u)u.hasOwnProperty(a)&&!_c(u[a])&&(Array.isArray(u[a])&&u[a].isCss||yn(u[a])?i.push(bc(a)+":",u[a],";"):Io(u[a])?i.push.apply(i,n(u[a],a)):i.push(bc(a)+": "+(r=a,(o=u[a])==null||typeof o=="boolean"||o===""?"":typeof o!="number"||o===0||r in l0||r.startsWith("--")?String(o).trim():o+"px")+";"));return l?[l+" {"].concat(i,["}"]):i}(t):t.toString()}var wc=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function J0(t){for(var e=arguments.length,c=new Array(e>1?e-1:0),h=1;h<e;h++)c[h-1]=arguments[h];return yn(t)||Io(t)?wc(Lr(hc(di,[t].concat(c)))):c.length===0&&t.length===1&&typeof t[0]=="string"?t:wc(Lr(hc(t,c)))}var xc=/invalid hook call/i,mi=new Set,Z0=function(t,e){if(process.env.NODE_ENV!=="production"){var c="The component "+t+(e?' with the id of "'+e+'"':"")+` has been created dynamically.
You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,h=console.error;try{var g=!0;console.error=function(y){if(xc.test(y))g=!1,mi.delete(c);else{for(var _=arguments.length,x=new Array(_>1?_-1:0),T=1;T<_;T++)x[T-1]=arguments[T];h.apply(void 0,[y].concat(x))}},le.useRef(),g&&!mi.has(c)&&(console.warn(c),mi.add(c))}catch(y){xc.test(y.message)&&mi.delete(c)}finally{console.error=h}}},ey=function(t,e,c){return c===void 0&&(c=Kt),t.theme!==c.theme&&t.theme||e||c.theme},ty=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ry=/(^-|-$)/g;function Yo(t){return t.replace(ty,"-").replace(ry,"")}var ny=function(t){return No(vc(t)>>>0)};function yi(t){return typeof t=="string"&&(process.env.NODE_ENV==="production"||t.charAt(0)===t.charAt(0).toLowerCase())}var Uo=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},iy=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function oy(t,e,c){var h=t[c];Uo(e)&&Uo(h)?Cc(h,e):t[c]=e}function Cc(t){for(var e=arguments.length,c=new Array(e>1?e-1:0),h=1;h<e;h++)c[h-1]=arguments[h];for(var g=0,y=c;g<y.length;g++){var _=y[g];if(Uo(_))for(var x in _)iy(x)&&oy(t,_[x],x)}return t}var Sc=le.createContext();Sc.Consumer;var Ho={};function Tc(t,e,c){var h=Fo(t),g=!yi(t),y=e.attrs,_=y===void 0?di:y,x=e.componentId,T=x===void 0?function(s,p){var v=typeof s!="string"?"sc":Yo(s);Ho[v]=(Ho[v]||0)+1;var m=v+"-"+ny("5.3.11"+v+Ho[v]);return p?p+"-"+m:m}(e.displayName,e.parentComponentId):x,d=e.displayName,n=d===void 0?function(s){return yi(s)?"styled."+s:"Styled("+Lo(s)+")"}(t):d,u=e.displayName&&e.componentId?Yo(e.displayName)+"-"+e.componentId:e.componentId||T,l=h&&t.attrs?Array.prototype.concat(t.attrs,_).filter(Boolean):_,r=e.shouldForwardProp;h&&t.shouldForwardProp&&(r=e.shouldForwardProp?function(s,p,v){return t.shouldForwardProp(s,p,v)&&e.shouldForwardProp(s,p,v)}:t.shouldForwardProp);var o,i=new V0(c,u,h?t.componentStyle:void 0),a=i.isStatic&&_.length===0,f=function(s,p){return function(v,m,b,w){var E=v.attrs,A=v.componentStyle,O=v.defaultProps,L=v.foldedComponentIds,Y=v.shouldForwardProp,V=v.styledComponentId,Q=v.target,J=function(B,C,P){B===void 0&&(B=Kt);var j=Vt({},C,{theme:B}),F={};return P.forEach(function(H){var z,R,ee,$=H;for(z in yn($)&&($=$(j)),$)j[z]=F[z]=z==="className"?(R=F[z],ee=$[z],R&&ee?R+" "+ee:R||ee):$[z]}),[j,F]}(ey(m,le.useContext(Sc),O)||Kt,m,E),Z=J[0],re=J[1],ie=function(B,C,P,j){var F=W0(),H=X0(),z=C?B.generateAndInjectStyles(Kt,F,H):B.generateAndInjectStyles(P,F,H);return process.env.NODE_ENV!=="production"&&!C&&j&&j(z),z}(A,w,Z,process.env.NODE_ENV!=="production"?v.warnTooManyClasses:void 0),ue=b,X=re.$as||m.$as||re.as||m.as||Q,S=yi(X),k=re!==m?Vt({},m,{},re):m,M={};for(var D in k)D[0]!=="$"&&D!=="as"&&(D==="forwardedAs"?M.as=k[D]:(Y?Y(D,nc,X):!S||nc(D))&&(M[D]=k[D]));return m.style&&re.style!==m.style&&(M.style=Vt({},m.style,{},re.style)),M.className=Array.prototype.concat(L,V,ie!==V?ie:null,m.className,re.className).filter(Boolean).join(" "),M.ref=ue,le.createElement(X,M)}(o,s,p,a)};return f.displayName=n,(o=le.forwardRef(f)).attrs=l,o.componentStyle=i,o.displayName=n,o.shouldForwardProp=r,o.foldedComponentIds=h?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):di,o.styledComponentId=u,o.target=h?t.target:t,o.withComponent=function(s){var p=e.componentId,v=function(b,w){if(b==null)return{};var E,A,O={},L=Object.keys(b);for(A=0;A<L.length;A++)E=L[A],w.indexOf(E)>=0||(O[E]=b[E]);return O}(e,["componentId"]),m=p&&p+"-"+(yi(s)?s:Yo(Lo(s)));return Tc(s,Vt({},v,{attrs:l,componentId:m}),c)},Object.defineProperty(o,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(s){this._foldedDefaultProps=h?Cc({},t.defaultProps,s):s}}),process.env.NODE_ENV!=="production"&&(Z0(n,u),o.warnTooManyClasses=function(s,p){var v={},m=!1;return function(b){if(!m&&(v[b]=!0,Object.keys(v).length>=200)){var w=p?' with the id of "'+p+'"':"";console.warn("Over 200 classes were generated for component "+s+w+`.
Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),m=!0,v={}}}}(n,u)),Object.defineProperty(o,"toString",{value:function(){return"."+o.styledComponentId}}),g&&w0(o,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),o}var zo=function(t){return function e(c,h,g){if(g===void 0&&(g=Kt),!Yr.isValidElementType(h))return Ir(1,String(h));var y=function(){return c(h,g,J0.apply(void 0,arguments))};return y.withConfig=function(_){return e(c,h,Vt({},g,{},_))},y.attrs=function(_){return e(c,h,Vt({},g,{attrs:Array.prototype.concat(g.attrs,_).filter(Boolean)}))},y}(Tc,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){zo[t]=zo(t)}),process.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`),process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&typeof window<"u"&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,window["__styled-components-init__"]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window["__styled-components-init__"]+=1);const Ec=zo,Oc=Ec(dt)(({$toolbarPosition:t})=>`
  &.delete-btn {
    margin-top: 16px;
  }
  &.save-library-btn {
    ${t==="bottom"?"width: 100%;":""}
    ${t==="right"?"height: 100%; display: flex !important; justify-content: center;":""}
  }
`);function sy(){const{core:t,boilerplate:e,toolbarPosition:c}=Qe();if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const h=()=>{t.deleteSelectedObject()},g=async()=>{const y=await t.saveImageAsBlob();await e[1].onSaveBoilerplate(y)};return I.jsx(yo,{trailingItems:I.jsxs(I.Fragment,{children:[I.jsx(Oc,{className:"save-library-btn",tooltip:c==="bottom"?"  ":I.jsxs(I.Fragment,{children:["",I.jsx("br",{})," "]}),disableToolbar:!0,Icon:()=>I.jsx($e,{variant:"library_add"}),onClick:g,$toolbarPosition:c}),I.jsx(Oc,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:Mo,onClick:h})]})})}const ay=se.styled(se.Paper)(()=>`
  border-radius: 43px;
  box-shadow: 0px 4px 4px 0px #D1D1D140;
`),yr=Ec(se.Box)(({$toolbarverticalposition:t,toolbarposition:e,window_height:c,window_width:h,toolbar_width:g,toolbar_height:y,$showcontrolpad:_})=>`
  &.toolbar-wrapper {
    ${_&&(t==="bottom"?"padding-bottom: 10px;":"padding-top: 10px;")}
    display: flex;
    width: ${e==="right"?"initial":"100vw"};
    justify-content: ${e==="right"&&c&&y&&c<y||e==="bottom"&&h&&g&&h<g?"flex-start":"center"};
    flex-direction: ${e==="right"?"column":"row"};
  }
  &.toggle-show-control-box {
    width: 100%;
    height: 22px;
    overflow:hidden;
    padding-top: 6px;
    display: flex;
    justify-content: flex-end;
    padding-right: 30px;
  }
  &.show-control-btn-wrapper {
    width: 100%;
    padding: 0 40px;
    max-width: 842px;
    height: 88px;
    position:absolute;
    bottom: 0;
    margin: auto;
    transform: translate(-50%);
    left: 50%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    z-index: 10;
  }
  &.control-wrapper-1 {
    width: calc(100% - 2px);
    position: absolute;
    left: 1px;
    top: 1px;
    z-index: 10;
  }
`),Pc=se.styled(se.IconButton)(()=>`
  
  &.show-control-box-btn {
    border: 1px solid #eeeeee;
    border-radius: 2px;
    box-shadow: none;
    &:hover {
      background: none;
    }
    &.border-none {
      border: 0 none;
    }
    &.btn-type-1 {
      width: 60px;
      height: 60px;
      background: #EEEEEE;
      border-radius: 50%;
    }
  }
  
  &.hide-control-box-btn {
    display: flex;
    width: 30px;
    height: 100%;
    padding: 0;
    justify-content: center;
  }
  &.rotate-180 {
    transform: rotate(180deg);
  }
`),ly=({toolbarMode:t})=>{const{tool:e}=Yt();return t===ot.Mode.TEXT?I.jsx(Fl,{}):t===ot.Mode.IMAGE?I.jsx(_o,{}):e===we.PAN?I.jsx(kl,{}):e===we.ERASER?I.jsx(Bl,{}):e===we.FREEDRAW?I.jsx(Ml,{}):e===we.MARKER?I.jsx(Rl,{}):I.jsx(jl,{})},cy=hn(({leadingItems:t})=>{const{core:e,toolbarPosition:c}=Qe(),[h,g]=le.useState(e.mode),y=le.useRef(null),[_,x]=le.useState(!0),[T,d]=le.useState(window.innerHeight),[n,u]=le.useState(window.innerWidth),l=pl(y),{toolbarVerticalPosition:r}=pn,o=()=>{d(window.innerHeight),u(window.innerWidth)};le.useEffect(()=>(window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}),[]),le.useEffect(()=>e.on(ot.Event.MODE_CHANGE,g),[e]);const i=()=>{x(!_)};return I.jsxs(I.Fragment,{children:[I.jsx(yr,{className:"toolbar-wrapper",toolbarposition:c,$toolbarverticalposition:r,window_width:n,window_height:T,toolbar_width:l==null?void 0:l.width,toolbar_height:l==null?void 0:l.height,$showcontrolpad:_,children:I.jsx("div",{style:{position:"relative"},children:_&&I.jsxs(ay,{ref:y,sx:{display:"flex",backgroundColor:tt[50],alignItems:"center",gap:1,...c==="right"&&{flexDirection:"column",width:88,py:2},...c==="bottom"&&{flexDirection:"row",height:88,px:"27px"}},children:[c==="bottom"&&I.jsx(yr,{className:"control-wrapper-1",toolbarposition:c,children:I.jsx(yr,{className:"toggle-show-control-box",children:I.jsx(Pc,{className:"show-control-box-btn rotate-180 hide-control-box-btn border-none",onClick:i,children:I.jsx($e,{variant:"fold",width:16,height:16})})})}),t&&I.jsx(yr,{className:"leading-items",sx:{display:"flex",gap:1,...c==="right"&&{flexDirection:"column"},...c==="bottom"&&{flexDirection:"row"}},children:t}),I.jsxs(yr,{className:"toolbar-contents",sx:{display:"grid",position:"relative",color:"black",gap:"16px",...c==="right"&&(h===ot.Mode.IMAGE?{gridTemplateRows:"799px"}:{gridTemplateRows:"583px 88px 128px"}),...c==="bottom"&&(h===ot.Mode.IMAGE?{gridTemplateColumns:"655px"}:{gridTemplateColumns:"439px 88px 128px"})},children:[h===ot.Mode.BRUSH&&I.jsx(Xm,{}),h===ot.Mode.TEXT&&I.jsx(s0,{}),h===ot.Mode.IMAGE&&I.jsx(sy,{})]})]})})}),!_&&I.jsx(yr,{className:"toolbar-wrapper control-wrapper-2",$showcontrolpad:_,toolbarposition:c,window_width:n,window_height:T,children:I.jsx(yr,{className:"show-control-btn-wrapper ",children:I.jsx(Pc,{className:"show-control-box-btn btn-type-1",onClick:i,children:I.jsx(ly,{toolbarMode:h})})})})]})}),Ac=le.createContext(null),uy=({editorRef:t,imageUrl:e,children:c,touch:h=!0,boilerplate:g,toolbarPosition:y})=>{const _=le.useMemo(()=>new ot({imageUrl:e,touchEnabled:h}),[e,h]);le.useImperativeHandle(t,()=>({getDataUrl(T){return _.getDataUrl(T)},toBlob(){return _.toBlob()},isDirty(){return _.isDirty()},isBusy(){return _.busy}}),[_]);const x=le.useMemo(()=>({core:_,boilerplate:g,touch:h,toolbarPosition:y}),[g,_,h,y]);return I.jsx(Ac.Provider,{value:x,children:c})};function Qe(){return le.useContext(Ac)}function Yt(){var g;const{core:t}=Qe(),[e,c]=le.useState((g=t.tool)==null?void 0:g.name);return le.useEffect(()=>t.on(ot.Event.TOOL_CHANGE,y=>c(y)),[t]),{tool:e,setTool:y=>{t.selectTool(y)}}}const hy=()=>{const t=le.useRef(null),e=pl(t);return I.jsx(Wt,{ref:t,sx:{overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e&&I.jsx(dg,{containerSize:e})})},fy=hn(le.forwardRef(function({viewOnly:e=!1,imageUrl:c,boilerplate:h,touch:g,toolbarPosition:y="bottom",leadingItems:_},x){const{toolbarVerticalPosition:T}=pn,d=le.useMemo(()=>{const n=[{component:I.jsx(hy,{})},{component:I.jsx(I.Fragment,{children:!e&&I.jsx(cy,{leadingItems:_})})}];return T==="bottom"?n:n.reverse()},[T]);return I.jsx(uy,{editorRef:x,imageUrl:c,boilerplate:h,touch:g,toolbarPosition:y,children:I.jsx(Wt,{sx:{backgroundColor:"#f5f5f8",height:"100%",display:"flex",flexDirection:y==="right"?"row":"column"},children:d.map((n,u)=>I.jsx(le.Fragment,{children:n.component},u))})})}));et.ImageEditor=fy,Object.defineProperty(et,Symbol.toStringTag,{value:"Module"})});
