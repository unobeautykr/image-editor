(function(Gt,we){typeof exports=="object"&&typeof module<"u"?we(exports,require("react"),require("@mui/material"),require("react-dom"),require("@emotion/styled"),require("@emotion/react")):typeof define=="function"&&define.amd?define(["exports","react","@mui/material","react-dom","@emotion/styled","@emotion/react"],we):(Gt=typeof globalThis<"u"?globalThis:Gt||self,we(Gt.ImageEditor={},Gt.React,Gt.MuiMaterial,Gt.ReactDOM,Gt.EmotionStyled))})(this,function(Gt,we,me,zv,Xv){"use strict";var F3=Object.defineProperty;var N3=(Gt,we,me)=>we in Gt?F3(Gt,we,{enumerable:!0,configurable:!0,writable:!0,value:me}):Gt[we]=me;var Le=(Gt,we,me)=>(N3(Gt,typeof we!="symbol"?we+"":we,me),me);function Gv(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const i in t)if(i!=="default"){const f=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,f.get?f:{enumerable:!0,get:()=>t[i]})}}return e.default=t,Object.freeze(e)}const Ee=Gv(we);var eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function f(){return this instanceof f?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(f){var v=Object.getOwnPropertyDescriptor(t,f);Object.defineProperty(i,f,v.get?v:{enumerable:!0,get:function(){return t[f]}})}),i}var Za={exports:{}},to={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc;function $v(){if(Nc)return to;Nc=1;var t=we,e=Symbol.for("react.element"),i=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function C(E,O,g){var o,h={},c=null,n=null;g!==void 0&&(c=""+g),O.key!==void 0&&(c=""+O.key),O.ref!==void 0&&(n=O.ref);for(o in O)f.call(O,o)&&!w.hasOwnProperty(o)&&(h[o]=O[o]);if(E&&E.defaultProps)for(o in O=E.defaultProps,O)h[o]===void 0&&(h[o]=O[o]);return{$$typeof:e,type:E,key:c,ref:n,props:h,_owner:v.current}}return to.Fragment=i,to.jsx=C,to.jsxs=C,to}var ro={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc;function qv(){return Vc||(Vc=1,process.env.NODE_ENV!=="production"&&function(){var t=we,e=Symbol.for("react.element"),i=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a=Symbol.iterator,s="@@iterator";function u(G){if(G===null||typeof G!="object")return null;var Te=a&&G[a]||G[s];return typeof Te=="function"?Te:null}var p=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function l(G){{for(var Te=arguments.length,De=new Array(Te>1?Te-1:0),He=1;He<Te;He++)De[He-1]=arguments[He];m("error",G,De)}}function m(G,Te,De){{var He=p.ReactDebugCurrentFrame,ot=He.getStackAddendum();ot!==""&&(Te+="%s",De=De.concat([ot]));var pt=De.map(function(tt){return String(tt)});pt.unshift("Warning: "+Te),Function.prototype.apply.call(console[G],console,pt)}}var y=!1,b=!1,x=!1,T=!1,M=!1,I;I=Symbol.for("react.module.reference");function R(G){return!!(typeof G=="string"||typeof G=="function"||G===f||G===w||M||G===v||G===g||G===o||T||G===n||y||b||x||typeof G=="object"&&G!==null&&(G.$$typeof===c||G.$$typeof===h||G.$$typeof===C||G.$$typeof===E||G.$$typeof===O||G.$$typeof===I||G.getModuleId!==void 0))}function W(G,Te,De){var He=G.displayName;if(He)return He;var ot=Te.displayName||Te.name||"";return ot!==""?De+"("+ot+")":De}function K(G){return G.displayName||"Context"}function $(G){if(G==null)return null;if(typeof G.tag=="number"&&l("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof G=="function")return G.displayName||G.name||null;if(typeof G=="string")return G;switch(G){case f:return"Fragment";case i:return"Portal";case w:return"Profiler";case v:return"StrictMode";case g:return"Suspense";case o:return"SuspenseList"}if(typeof G=="object")switch(G.$$typeof){case E:var Te=G;return K(Te)+".Consumer";case C:var De=G;return K(De._context)+".Provider";case O:return W(G,G.render,"ForwardRef");case h:var He=G.displayName||null;return He!==null?He:$(G.type)||"Memo";case c:{var ot=G,pt=ot._payload,tt=ot._init;try{return $(tt(pt))}catch{return null}}}return null}var se=Object.assign,fe=0,le,ce,_e,Oe,ne,D,F;function B(){}B.__reactDisabledLog=!0;function L(){{if(fe===0){le=console.log,ce=console.info,_e=console.warn,Oe=console.error,ne=console.group,D=console.groupCollapsed,F=console.groupEnd;var G={configurable:!0,enumerable:!0,value:B,writable:!0};Object.defineProperties(console,{info:G,log:G,warn:G,error:G,group:G,groupCollapsed:G,groupEnd:G})}fe++}}function X(){{if(fe--,fe===0){var G={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:se({},G,{value:le}),info:se({},G,{value:ce}),warn:se({},G,{value:_e}),error:se({},G,{value:Oe}),group:se({},G,{value:ne}),groupCollapsed:se({},G,{value:D}),groupEnd:se({},G,{value:F})})}fe<0&&l("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var A=p.ReactCurrentDispatcher,k;function V(G,Te,De){{if(k===void 0)try{throw Error()}catch(ot){var He=ot.stack.trim().match(/\n( *(at )?)/);k=He&&He[1]||""}return`
`+k+G}}var z=!1,Z;{var J=typeof WeakMap=="function"?WeakMap:Map;Z=new J}function Y(G,Te){if(!G||z)return"";{var De=Z.get(G);if(De!==void 0)return De}var He;z=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var pt;pt=A.current,A.current=null,L();try{if(Te){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(ar){He=ar}Reflect.construct(G,[],tt)}else{try{tt.call()}catch(ar){He=ar}G.call(tt.prototype)}}else{try{throw Error()}catch(ar){He=ar}G()}}catch(ar){if(ar&&He&&typeof ar.stack=="string"){for(var Ze=ar.stack.split(`
`),Ht=He.stack.split(`
`),Et=Ze.length-1,Rt=Ht.length-1;Et>=1&&Rt>=0&&Ze[Et]!==Ht[Rt];)Rt--;for(;Et>=1&&Rt>=0;Et--,Rt--)if(Ze[Et]!==Ht[Rt]){if(Et!==1||Rt!==1)do if(Et--,Rt--,Rt<0||Ze[Et]!==Ht[Rt]){var sr=`
`+Ze[Et].replace(" at new "," at ");return G.displayName&&sr.includes("<anonymous>")&&(sr=sr.replace("<anonymous>",G.displayName)),typeof G=="function"&&Z.set(G,sr),sr}while(Et>=1&&Rt>=0);break}}}finally{z=!1,A.current=pt,X(),Error.prepareStackTrace=ot}var Xr=G?G.displayName||G.name:"",fa=Xr?V(Xr):"";return typeof G=="function"&&Z.set(G,fa),fa}function he(G,Te,De){return Y(G,!1)}function ie(G){var Te=G.prototype;return!!(Te&&Te.isReactComponent)}function ee(G,Te,De){if(G==null)return"";if(typeof G=="function")return Y(G,ie(G));if(typeof G=="string")return V(G);switch(G){case g:return V("Suspense");case o:return V("SuspenseList")}if(typeof G=="object")switch(G.$$typeof){case O:return he(G.render);case h:return ee(G.type,Te,De);case c:{var He=G,ot=He._payload,pt=He._init;try{return ee(pt(ot),Te,De)}catch{}}}return""}var Q=Object.prototype.hasOwnProperty,ae={},de=p.ReactDebugCurrentFrame;function ue(G){if(G){var Te=G._owner,De=ee(G.type,G._source,Te?Te.type:null);de.setExtraStackFrame(De)}else de.setExtraStackFrame(null)}function pe(G,Te,De,He,ot){{var pt=Function.call.bind(Q);for(var tt in G)if(pt(G,tt)){var Ze=void 0;try{if(typeof G[tt]!="function"){var Ht=Error((He||"React class")+": "+De+" type `"+tt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof G[tt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ht.name="Invariant Violation",Ht}Ze=G[tt](Te,tt,He,De,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Et){Ze=Et}Ze&&!(Ze instanceof Error)&&(ue(ot),l("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",He||"React class",De,tt,typeof Ze),ue(null)),Ze instanceof Error&&!(Ze.message in ae)&&(ae[Ze.message]=!0,ue(ot),l("Failed %s type: %s",De,Ze.message),ue(null))}}}var xe=Array.isArray;function Ie(G){return xe(G)}function Pe(G){{var Te=typeof Symbol=="function"&&Symbol.toStringTag,De=Te&&G[Symbol.toStringTag]||G.constructor.name||"Object";return De}}function oe(G){try{return Ae(G),!1}catch{return!0}}function Ae(G){return""+G}function Fe(G){if(oe(G))return l("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pe(G)),Ae(G)}var Ve=p.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0},et,Mt,_t;_t={};function yr(G){if(Q.call(G,"ref")){var Te=Object.getOwnPropertyDescriptor(G,"ref").get;if(Te&&Te.isReactWarning)return!1}return G.ref!==void 0}function zr(G){if(Q.call(G,"key")){var Te=Object.getOwnPropertyDescriptor(G,"key").get;if(Te&&Te.isReactWarning)return!1}return G.key!==void 0}function Kt(G,Te){if(typeof G.ref=="string"&&Ve.current&&Te&&Ve.current.stateNode!==Te){var De=$(Ve.current.type);_t[De]||(l('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',$(Ve.current.type),G.ref),_t[De]=!0)}}function li(G,Te){{var De=function(){et||(et=!0,l("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Te))};De.isReactWarning=!0,Object.defineProperty(G,"key",{get:De,configurable:!0})}}function Mn(G,Te){{var De=function(){Mt||(Mt=!0,l("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Te))};De.isReactWarning=!0,Object.defineProperty(G,"ref",{get:De,configurable:!0})}}var ci=function(G,Te,De,He,ot,pt,tt){var Ze={$$typeof:e,type:G,key:Te,ref:De,props:tt,_owner:pt};return Ze._store={},Object.defineProperty(Ze._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ze,"_self",{configurable:!1,enumerable:!1,writable:!1,value:He}),Object.defineProperty(Ze,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ot}),Object.freeze&&(Object.freeze(Ze.props),Object.freeze(Ze)),Ze};function jo(G,Te,De,He,ot){{var pt,tt={},Ze=null,Ht=null;De!==void 0&&(Fe(De),Ze=""+De),zr(Te)&&(Fe(Te.key),Ze=""+Te.key),yr(Te)&&(Ht=Te.ref,Kt(Te,ot));for(pt in Te)Q.call(Te,pt)&&!Ge.hasOwnProperty(pt)&&(tt[pt]=Te[pt]);if(G&&G.defaultProps){var Et=G.defaultProps;for(pt in Et)tt[pt]===void 0&&(tt[pt]=Et[pt])}if(Ze||Ht){var Rt=typeof G=="function"?G.displayName||G.name||"Unknown":G;Ze&&li(tt,Rt),Ht&&Mn(tt,Rt)}return ci(G,Ze,Ht,ot,He,Ve.current,tt)}}var Lo=p.ReactCurrentOwner,ia=p.ReactDebugCurrentFrame;function pn(G){if(G){var Te=G._owner,De=ee(G.type,G._source,Te?Te.type:null);ia.setExtraStackFrame(De)}else ia.setExtraStackFrame(null)}var Ni;Ni=!1;function Bo(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function oa(){{if(Lo.current){var G=$(Lo.current.type);if(G)return`

Check the render method of \``+G+"`."}return""}}function xl(G){{if(G!==void 0){var Te=G.fileName.replace(/^.*[\\\/]/,""),De=G.lineNumber;return`

Check your code at `+Te+":"+De+"."}return""}}var sa={};function aa(G){{var Te=oa();if(!Te){var De=typeof G=="string"?G:G.displayName||G.name;De&&(Te=`

Check the top-level render call using <`+De+">.")}return Te}}function ua(G,Te){{if(!G._store||G._store.validated||G.key!=null)return;G._store.validated=!0;var De=aa(Te);if(sa[De])return;sa[De]=!0;var He="";G&&G._owner&&G._owner!==Lo.current&&(He=" It was passed a child from "+$(G._owner.type)+"."),pn(G),l('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',De,He),pn(null)}}function la(G,Te){{if(typeof G!="object")return;if(Ie(G))for(var De=0;De<G.length;De++){var He=G[De];Bo(He)&&ua(He,Te)}else if(Bo(G))G._store&&(G._store.validated=!0);else if(G){var ot=u(G);if(typeof ot=="function"&&ot!==G.entries)for(var pt=ot.call(G),tt;!(tt=pt.next()).done;)Bo(tt.value)&&ua(tt.value,Te)}}}function Cl(G){{var Te=G.type;if(Te==null||typeof Te=="string")return;var De;if(typeof Te=="function")De=Te.propTypes;else if(typeof Te=="object"&&(Te.$$typeof===O||Te.$$typeof===h))De=Te.propTypes;else return;if(De){var He=$(Te);pe(De,G.props,"prop",He,G)}else if(Te.PropTypes!==void 0&&!Ni){Ni=!0;var ot=$(Te);l("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ot||"Unknown")}typeof Te.getDefaultProps=="function"&&!Te.getDefaultProps.isReactClassApproved&&l("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Fo(G){{for(var Te=Object.keys(G.props),De=0;De<Te.length;De++){var He=Te[De];if(He!=="children"&&He!=="key"){pn(G),l("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",He),pn(null);break}}G.ref!==null&&(pn(G),l("Invalid attribute `ref` supplied to `React.Fragment`."),pn(null))}}function ca(G,Te,De,He,ot,pt){{var tt=R(G);if(!tt){var Ze="";(G===void 0||typeof G=="object"&&G!==null&&Object.keys(G).length===0)&&(Ze+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ht=xl(ot);Ht?Ze+=Ht:Ze+=oa();var Et;G===null?Et="null":Ie(G)?Et="array":G!==void 0&&G.$$typeof===e?(Et="<"+($(G.type)||"Unknown")+" />",Ze=" Did you accidentally export a JSX literal instead of a component?"):Et=typeof G,l("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Et,Ze)}var Rt=jo(G,Te,De,ot,pt);if(Rt==null)return Rt;if(tt){var sr=Te.children;if(sr!==void 0)if(He)if(Ie(sr)){for(var Xr=0;Xr<sr.length;Xr++)la(sr[Xr],G);Object.freeze&&Object.freeze(sr)}else l("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else la(sr,G)}return G===f?Fo(Rt):Cl(Rt),Rt}}function No(G,Te,De){return ca(G,Te,De,!0)}function Sl(G,Te,De){return ca(G,Te,De,!1)}var Tl=Sl,El=No;ro.Fragment=f,ro.jsx=Tl,ro.jsxs=El}()),ro}process.env.NODE_ENV==="production"?Za.exports=$v():Za.exports=qv();var U=Za.exports;const Ja=me.styled(me.Box,{shouldForwardProp:t=>t!=="toolbarPosition"})(({toolbarPosition:t})=>`
  &.toolbar-wrapper-box {
    ${t==="right"?"height: 100%;":"width: 100%;"}
    overflow: auto;
  }
`);var Kv={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(e,i){return"Cannot apply '"+e+"' to '"+i.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(e,i){return"[mobx.array] Index out of bounds, "+e+" is larger than "+i},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(e){return"Cannot initialize from classes that inherit from Map: "+e.constructor.name},20:function(e){return"Cannot initialize map from "+e},21:function(e){return"Cannot convert to map from '"+e+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(e){return"Cannot obtain administration from "+e},25:function(e,i){return"the entry '"+e+"' does not exist in the observable map '"+i+"'"},26:"please specify a property",27:function(e,i){return"no observable property '"+e.toString()+"' found on the observable object '"+i+"'"},28:function(e){return"Cannot obtain atom from "+e},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(e,i){return"Cycle detected in computation "+e+": "+i},33:function(e){return"The setter of computed value '"+e+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(e){return"[ComputedValue '"+e+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(e){return"[mobx] `observableArray."+e+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+e+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"},Qv=process.env.NODE_ENV!=="production"?Kv:{};function Re(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),f=1;f<e;f++)i[f-1]=arguments[f];if(process.env.NODE_ENV!=="production"){var v=typeof t=="string"?t:Qv[t];throw typeof v=="function"&&(v=v.apply(null,i)),new Error("[MobX] "+v)}throw new Error(typeof t=="number"?"[MobX] minified error nr: "+t+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var Zv={};function eu(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Zv}var Uc=Object.assign,ts=Object.getOwnPropertyDescriptor,Qr=Object.defineProperty,rs=Object.prototype,ns=[];Object.freeze(ns);var Yc={};Object.freeze(Yc);var Jv=typeof Proxy<"u",em=Object.toString();function Wc(){Jv||Re(process.env.NODE_ENV!=="production"?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function no(t){process.env.NODE_ENV!=="production"&&Se.verifyProxies&&Re("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+t)}function Nr(){return++Se.mobxGuid}function tu(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var bi=function(){};function Bt(t){return typeof t=="function"}function Un(t){var e=typeof t;switch(e){case"string":case"symbol":case"number":return!0}return!1}function is(t){return t!==null&&typeof t=="object"}function hr(t){if(!is(t))return!1;var e=Object.getPrototypeOf(t);if(e==null)return!0;var i=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i.toString()===em}function Hc(t){var e=t==null?void 0:t.constructor;return e?e.name==="GeneratorFunction"||e.displayName==="GeneratorFunction":!1}function io(t,e,i){Qr(t,e,{enumerable:!1,writable:!0,configurable:!0,value:i})}function zc(t,e,i){Qr(t,e,{enumerable:!1,writable:!1,configurable:!0,value:i})}function Yn(t,e){var i="isMobX"+t;return e.prototype[i]=!0,function(f){return is(f)&&f[i]===!0}}function wi(t){return t instanceof Map}function oo(t){return t instanceof Set}var Xc=typeof Object.getOwnPropertySymbols<"u";function tm(t){var e=Object.keys(t);if(!Xc)return e;var i=Object.getOwnPropertySymbols(t);return i.length?[].concat(e,i.filter(function(f){return rs.propertyIsEnumerable.call(t,f)})):e}var xi=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Xc?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function ru(t){return typeof t=="string"?t:typeof t=="symbol"?t.toString():new String(t).toString()}function Gc(t){return t===null?null:typeof t=="object"?""+t:t}function Tr(t,e){return rs.hasOwnProperty.call(t,e)}var rm=Object.getOwnPropertyDescriptors||function(e){var i={};return xi(e).forEach(function(f){i[f]=ts(e,f)}),i};function $c(t,e){for(var i=0;i<e.length;i++){var f=e[i];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,om(f.key),f)}}function nu(t,e,i){return e&&$c(t.prototype,e),i&&$c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function an(){return an=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},an.apply(this,arguments)}function qc(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,iu(t,e)}function iu(t,e){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},iu(t,e)}function os(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nm(t,e){if(t){if(typeof t=="string")return Kc(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kc(t,e)}}function Kc(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,f=new Array(e);i<e;i++)f[i]=t[i];return f}function Ci(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=nm(t))||e&&t&&typeof t.length=="number"){i&&(t=i);var f=0;return function(){return f>=t.length?{done:!0}:{done:!1,value:t[f++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function im(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var f=i.call(t,e||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function om(t){var e=im(t,"string");return typeof e=="symbol"?e:String(e)}var or=Symbol("mobx-stored-annotations");function Zr(t){function e(i,f){if(so(f))return t.decorate_20223_(i,f);Si(i,f,t)}return Object.assign(e,t)}function Si(t,e,i){if(Tr(t,or)||io(t,or,an({},t[or])),process.env.NODE_ENV!=="production"&&ls(i)&&!Tr(t[or],e)){var f=t.constructor.name+".prototype."+e.toString();Re("'"+f+"' is decorated with 'override', but no such decorated member was found on prototype.")}sm(t,i,e),ls(i)||(t[or][e]=i)}function sm(t,e,i){if(process.env.NODE_ENV!=="production"&&!ls(e)&&Tr(t[or],i)){var f=t.constructor.name+".prototype."+i.toString(),v=t[or][i].annotationType_,w=e.annotationType_;Re("Cannot apply '@"+w+"' to '"+f+"':"+(`
The field is already decorated with '@`+v+"'.")+`
Re-decorating fields is not allowed.
Use '@override' decorator for methods overridden by subclass.`)}}function am(t){return Tr(t,or)||io(t,or,an({},t[or])),t[or]}function so(t){return typeof t=="object"&&typeof t.kind=="string"}function ss(t,e){process.env.NODE_ENV!=="production"&&!e.includes(t.kind)&&Re("The decorator applied to '"+String(t.name)+"' cannot be used on a "+t.kind+" element")}var We=Symbol("mobx administration"),ao=function(){function t(i){i===void 0&&(i=process.env.NODE_ENV!=="production"?"Atom@"+Nr():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=st.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=i}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(f){return f()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(f){return f()})},e.reportObserved=function(){return yf(this)},e.reportChanged=function(){Or(),_f(this),Ar()},e.toString=function(){return this.name_},t}(),ou=Yn("Atom",ao);function Qc(t,e,i){e===void 0&&(e=bi),i===void 0&&(i=bi);var f=new ao(t);return e!==bi&&C0(f,e),i!==bi&&Ef(f,i),f}function um(t,e){return t===e}function lm(t,e){return Cu(t,e)}function cm(t,e){return Cu(t,e,1)}function fm(t,e){return Object.is?Object.is(t,e):t===e?t!==0||1/t===1/e:t!==t&&e!==e}var as={identity:um,structural:lm,default:fm,shallow:cm};function Wn(t,e,i){return po(t)?t:Array.isArray(t)?Ut.array(t,{name:i}):hr(t)?Ut.object(t,void 0,{name:i}):wi(t)?Ut.map(t,{name:i}):oo(t)?Ut.set(t,{name:i}):typeof t=="function"&&!ho(t)&&!go(t)?Hc(t)?Ei(t):fo(i,t):t}function hm(t,e,i){if(t==null||Qn(t)||yo(t)||cn(t)||Oi(t))return t;if(Array.isArray(t))return Ut.array(t,{name:i,deep:!1});if(hr(t))return Ut.object(t,void 0,{name:i,deep:!1});if(wi(t))return Ut.map(t,{name:i,deep:!1});if(oo(t))return Ut.set(t,{name:i,deep:!1});process.env.NODE_ENV!=="production"&&Re("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}function us(t){return t}function dm(t,e){return process.env.NODE_ENV!=="production"&&po(t)&&Re("observable.struct should not be used with observable values"),Cu(t,e)?e:t}var gm="override";function ls(t){return t.annotationType_===gm}function uo(t,e){return{annotationType_:t,options_:e,make_:pm,extend_:vm,decorate_20223_:mm}}function pm(t,e,i,f){var v;if((v=this.options_)!=null&&v.bound)return this.extend_(t,e,i,!1)===null?0:1;if(f===t.target_)return this.extend_(t,e,i,!1)===null?0:2;if(ho(i.value))return 1;var w=Zc(t,this,e,i,!1);return Qr(f,e,w),2}function vm(t,e,i,f){var v=Zc(t,this,e,i);return t.defineProperty_(e,v,f)}function mm(t,e){process.env.NODE_ENV!=="production"&&ss(e,["method","field"]);var i=e.kind,f=e.name,v=e.addInitializer,w=this,C=function(g){var o,h,c,n;return Hn((o=(h=w.options_)==null?void 0:h.name)!=null?o:f.toString(),g,(c=(n=w.options_)==null?void 0:n.autoAction)!=null?c:!1)};if(i=="field"){v(function(){Si(this,f,w)});return}if(i=="method"){var E;return ho(t)||(t=C(t)),(E=this.options_)!=null&&E.bound&&v(function(){var O=this,g=O[f].bind(O);g.isMobxAction=!0,O[f]=g}),t}Re("Cannot apply '"+w.annotationType_+"' to '"+String(f)+"' (kind: "+i+"):"+(`
'`+w.annotationType_+"' can only be used on properties with a function value."))}function ym(t,e,i,f){var v=e.annotationType_,w=f.value;process.env.NODE_ENV!=="production"&&!Bt(w)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+i.toString()+"':"+(`
'`+v+"' can only be used on properties with a function value."))}function Zc(t,e,i,f,v){var w,C,E,O,g,o,h;v===void 0&&(v=Se.safeDescriptors),ym(t,e,i,f);var c=f.value;if((w=e.options_)!=null&&w.bound){var n;c=c.bind((n=t.proxy_)!=null?n:t.target_)}return{value:Hn((C=(E=e.options_)==null?void 0:E.name)!=null?C:i.toString(),c,(O=(g=e.options_)==null?void 0:g.autoAction)!=null?O:!1,(o=e.options_)!=null&&o.bound?(h=t.proxy_)!=null?h:t.target_:void 0),configurable:v?t.isPlainObject_:!0,enumerable:!1,writable:!v}}function Jc(t,e){return{annotationType_:t,options_:e,make_:_m,extend_:bm,decorate_20223_:wm}}function _m(t,e,i,f){var v;if(f===t.target_)return this.extend_(t,e,i,!1)===null?0:2;if((v=this.options_)!=null&&v.bound&&(!Tr(t.target_,e)||!go(t.target_[e]))&&this.extend_(t,e,i,!1)===null)return 0;if(go(i.value))return 1;var w=ef(t,this,e,i,!1,!1);return Qr(f,e,w),2}function bm(t,e,i,f){var v,w=ef(t,this,e,i,(v=this.options_)==null?void 0:v.bound);return t.defineProperty_(e,w,f)}function wm(t,e){var i;process.env.NODE_ENV!=="production"&&ss(e,["method"]);var f=e.name,v=e.addInitializer;return go(t)||(t=Ei(t)),(i=this.options_)!=null&&i.bound&&v(function(){var w=this,C=w[f].bind(w);C.isMobXFlow=!0,w[f]=C}),t}function xm(t,e,i,f){var v=e.annotationType_,w=f.value;process.env.NODE_ENV!=="production"&&!Bt(w)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+i.toString()+"':"+(`
'`+v+"' can only be used on properties with a generator function value."))}function ef(t,e,i,f,v,w){w===void 0&&(w=Se.safeDescriptors),xm(t,e,i,f);var C=f.value;if(go(C)||(C=Ei(C)),v){var E;C=C.bind((E=t.proxy_)!=null?E:t.target_),C.isMobXFlow=!0}return{value:C,configurable:w?t.isPlainObject_:!0,enumerable:!1,writable:!w}}function su(t,e){return{annotationType_:t,options_:e,make_:Cm,extend_:Sm,decorate_20223_:Tm}}function Cm(t,e,i){return this.extend_(t,e,i,!1)===null?0:1}function Sm(t,e,i,f){return Em(t,this,e,i),t.defineComputedProperty_(e,an({},this.options_,{get:i.get,set:i.set}),f)}function Tm(t,e){process.env.NODE_ENV!=="production"&&ss(e,["getter"]);var i=this,f=e.name,v=e.addInitializer;return v(function(){var w=Kn(this)[We],C=an({},i.options_,{get:t,context:this});C.name||(C.name=process.env.NODE_ENV!=="production"?w.name_+"."+f.toString():"ObservableObject."+f.toString()),w.values_.set(f,new Xn(C))}),function(){return this[We].getObservablePropValue_(f)}}function Em(t,e,i,f){var v=e.annotationType_,w=f.get;process.env.NODE_ENV!=="production"&&!w&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+i.toString()+"':"+(`
'`+v+"' can only be used on getter(+setter) properties."))}function cs(t,e){return{annotationType_:t,options_:e,make_:Om,extend_:Am,decorate_20223_:Pm}}function Om(t,e,i){return this.extend_(t,e,i,!1)===null?0:1}function Am(t,e,i,f){var v,w;return Dm(t,this,e,i),t.defineObservableProperty_(e,i.value,(v=(w=this.options_)==null?void 0:w.enhancer)!=null?v:Wn,f)}function Pm(t,e){if(process.env.NODE_ENV!=="production"){if(e.kind==="field")throw Re("Please use `@observable accessor "+String(e.name)+"` instead of `@observable "+String(e.name)+"`");ss(e,["accessor"])}var i=this,f=e.kind,v=e.name,w=new WeakSet;function C(E,O){var g,o,h=Kn(E)[We],c=new zn(O,(g=(o=i.options_)==null?void 0:o.enhancer)!=null?g:Wn,process.env.NODE_ENV!=="production"?h.name_+"."+v.toString():"ObservableObject."+v.toString(),!1);h.values_.set(v,c),w.add(E)}if(f=="accessor")return{get:function(){return w.has(this)||C(this,t.get.call(this)),this[We].getObservablePropValue_(v)},set:function(O){return w.has(this)||C(this,O),this[We].setObservablePropValue_(v,O)},init:function(O){return w.has(this)||C(this,O),O}}}function Dm(t,e,i,f){var v=e.annotationType_;process.env.NODE_ENV!=="production"&&!("value"in f)&&Re("Cannot apply '"+v+"' to '"+t.name_+"."+i.toString()+"':"+(`
'`+v+"' cannot be used on getter/setter properties"))}var Mm="true",Rm=tf();function tf(t){return{annotationType_:Mm,options_:t,make_:km,extend_:Im,decorate_20223_:jm}}function km(t,e,i,f){var v,w;if(i.get)return ds.make_(t,e,i,f);if(i.set){var C=Hn(e.toString(),i.set);return f===t.target_?t.defineProperty_(e,{configurable:Se.safeDescriptors?t.isPlainObject_:!0,set:C})===null?0:2:(Qr(f,e,{configurable:!0,set:C}),2)}if(f!==t.target_&&typeof i.value=="function"){var E;if(Hc(i.value)){var O,g=(O=this.options_)!=null&&O.autoBind?Ei.bound:Ei;return g.make_(t,e,i,f)}var o=(E=this.options_)!=null&&E.autoBind?fo.bound:fo;return o.make_(t,e,i,f)}var h=((v=this.options_)==null?void 0:v.deep)===!1?Ut.ref:Ut;if(typeof i.value=="function"&&(w=this.options_)!=null&&w.autoBind){var c;i.value=i.value.bind((c=t.proxy_)!=null?c:t.target_)}return h.make_(t,e,i,f)}function Im(t,e,i,f){var v,w;if(i.get)return ds.extend_(t,e,i,f);if(i.set)return t.defineProperty_(e,{configurable:Se.safeDescriptors?t.isPlainObject_:!0,set:Hn(e.toString(),i.set)},f);if(typeof i.value=="function"&&(v=this.options_)!=null&&v.autoBind){var C;i.value=i.value.bind((C=t.proxy_)!=null?C:t.target_)}var E=((w=this.options_)==null?void 0:w.deep)===!1?Ut.ref:Ut;return E.extend_(t,e,i,f)}function jm(t,e){Re("'"+this.annotationType_+"' cannot be used as a decorator")}var Lm="observable",Bm="observable.ref",Fm="observable.shallow",Nm="observable.struct",rf={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(rf);function fs(t){return t||rf}var au=cs(Lm),Vm=cs(Bm,{enhancer:us}),Um=cs(Fm,{enhancer:hm}),Ym=cs(Nm,{enhancer:dm}),nf=Zr(au);function hs(t){return t.deep===!0?Wn:t.deep===!1?us:Hm(t.defaultDecorator)}function Wm(t){var e;return t?(e=t.defaultDecorator)!=null?e:tf(t):void 0}function Hm(t){var e,i;return t&&(e=(i=t.options_)==null?void 0:i.enhancer)!=null?e:Wn}function of(t,e,i){if(so(e))return au.decorate_20223_(t,e);if(Un(e)){Si(t,e,au);return}return po(t)?t:hr(t)?Ut.object(t,e,i):Array.isArray(t)?Ut.array(t,e):wi(t)?Ut.map(t,e):oo(t)?Ut.set(t,e):typeof t=="object"&&t!==null?t:Ut.box(t,e)}Uc(of,nf);var zm={box:function(e,i){var f=fs(i);return new zn(e,hs(f),f.name,!0,f.equals)},array:function(e,i){var f=fs(i);return(Se.useProxies===!1||f.proxy===!1?q0:N0)(e,hs(f),f.name)},map:function(e,i){var f=fs(i);return new Bf(e,hs(f),f.name)},set:function(e,i){var f=fs(i);return new Vf(e,hs(f),f.name)},object:function(e,i,f){return On(function(){return Af(Se.useProxies===!1||(f==null?void 0:f.proxy)===!1?Kn({},f):I0({},f),e,i)})},ref:Zr(Vm),shallow:Zr(Um),deep:nf,struct:Zr(Ym)},Ut=Uc(of,zm),sf="computed",Xm="computed.struct",uu=su(sf),Gm=su(Xm,{equals:as.structural}),ds=function(e,i){if(so(i))return uu.decorate_20223_(e,i);if(Un(i))return Si(e,i,uu);if(hr(e))return Zr(su(sf,e));process.env.NODE_ENV!=="production"&&(Bt(e)||Re("First argument to `computed` should be an expression."),Bt(i)&&Re("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var f=hr(i)?i:{};return f.get=e,f.name||(f.name=e.name||""),new Xn(f)};Object.assign(ds,uu),ds.struct=Zr(Gm);var af,uf,gs=0,$m=1,qm=(af=(uf=ts(function(){},"name"))==null?void 0:uf.configurable)!=null?af:!1,lf={value:"action",configurable:!0,writable:!1,enumerable:!1};function Hn(t,e,i,f){i===void 0&&(i=!1),process.env.NODE_ENV!=="production"&&(Bt(e)||Re("`action` can only be invoked on functions"),(typeof t!="string"||!t)&&Re("actions should have valid names, got: '"+t+"'"));function v(){return Km(t,i,e,f||this,arguments)}return v.isMobxAction=!0,v.toString=function(){return e.toString()},qm&&(lf.value=t,Qr(v,"name",lf)),v}function Km(t,e,i,f,v){var w=Qm(t,e,f,v);try{return i.apply(f,v)}catch(C){throw w.error_=C,C}finally{Zm(w)}}function Qm(t,e,i,f){var v=process.env.NODE_ENV!=="production"&&Wt()&&!!t,w=0;if(process.env.NODE_ENV!=="production"&&v){w=Date.now();var C=f?Array.from(f):ns;dr({type:du,name:t,object:i,arguments:C})}var E=Se.trackingDerivation,O=!e||!E;Or();var g=Se.allowStateChanges;O&&(Gn(),g=ps(!0));var o=fu(!0),h={runAsAction_:O,prevDerivation_:E,prevAllowStateChanges_:g,prevAllowStateReads_:o,notifySpy_:v,startTime_:w,actionId_:$m++,parentActionId_:gs};return gs=h.actionId_,h}function Zm(t){gs!==t.actionId_&&Re(30),gs=t.parentActionId_,t.error_!==void 0&&(Se.suppressReactionErrors=!0),vs(t.prevAllowStateChanges_),lo(t.prevAllowStateReads_),Ar(),t.runAsAction_&&un(t.prevDerivation_),process.env.NODE_ENV!=="production"&&t.notifySpy_&&gr({time:Date.now()-t.startTime_}),Se.suppressReactionErrors=!1}function Jm(t,e){var i=ps(t);try{return e()}finally{vs(i)}}function ps(t){var e=Se.allowStateChanges;return Se.allowStateChanges=t,e}function vs(t){Se.allowStateChanges=t}var cf,e0="create";cf=Symbol.toPrimitive;var zn=function(t){qc(e,t);function e(f,v,w,C,E){var O;return w===void 0&&(w=process.env.NODE_ENV!=="production"?"ObservableValue@"+Nr():"ObservableValue"),C===void 0&&(C=!0),E===void 0&&(E=as.default),O=t.call(this,w)||this,O.enhancer=void 0,O.name_=void 0,O.equals=void 0,O.hasUnreportedChange_=!1,O.interceptors_=void 0,O.changeListeners_=void 0,O.value_=void 0,O.dehancer=void 0,O.enhancer=v,O.name_=w,O.equals=E,O.value_=v(f,void 0,w),process.env.NODE_ENV!=="production"&&C&&Wt()&&$n({type:e0,object:os(O),observableKind:"value",debugObjectName:O.name_,newValue:""+O.value_}),O}var i=e.prototype;return i.dehanceValue=function(v){return this.dehancer!==void 0?this.dehancer(v):v},i.set=function(v){var w=this.value_;if(v=this.prepareNewValue_(v),v!==Se.UNCHANGED){var C=Wt();process.env.NODE_ENV!=="production"&&C&&dr({type:Yr,object:this,observableKind:"value",debugObjectName:this.name_,newValue:v,oldValue:w}),this.setNewValue_(v),process.env.NODE_ENV!=="production"&&C&&gr()}},i.prepareNewValue_=function(v){if(Jr(this),Pr(this)){var w=Dr(this,{object:this,type:Yr,newValue:v});if(!w)return Se.UNCHANGED;v=w.newValue}return v=this.enhancer(v,this.value_,this.name_),this.equals(this.value_,v)?Se.UNCHANGED:v},i.setNewValue_=function(v){var w=this.value_;this.value_=v,this.reportChanged(),Vr(this)&&Ur(this,{type:Yr,object:this,newValue:v,oldValue:w})},i.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},i.intercept_=function(v){return vo(this,v)},i.observe_=function(v,w){return w&&v({observableKind:"value",debugObjectName:this.name_,object:this,type:Yr,newValue:this.value_,oldValue:void 0}),mo(this,v)},i.raw=function(){return this.value_},i.toJSON=function(){return this.get()},i.toString=function(){return this.name_+"["+this.value_+"]"},i.valueOf=function(){return Gc(this.get())},i[cf]=function(){return this.valueOf()},e}(ao),ff;ff=Symbol.toPrimitive;var Xn=function(){function t(i){this.dependenciesState_=st.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=st.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ys(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Er.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,i.get||Re(31),this.derivation=i.get,this.name_=i.name||(process.env.NODE_ENV!=="production"?"ComputedValue@"+Nr():"ComputedValue"),i.set&&(this.setter_=Hn(process.env.NODE_ENV!=="production"?this.name_+"-setter":"ComputedValue-setter",i.set)),this.equals_=i.equals||(i.compareStructural||i.struct?as.structural:as.default),this.scope_=i.context,this.requiresReaction_=i.requiresReaction,this.keepAlive_=!!i.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){u0(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach(function(f){return f()})},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(f){return f()})},e.get=function(){if(this.isComputing_&&Re(32,this.name_,this.derivation),Se.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)lu(this)&&(this.warnAboutUntrackedRead_(),Or(),this.value_=this.computeValue_(!1),Ar());else if(yf(this),lu(this)){var f=Se.trackingContext;this.keepAlive_&&!f&&(Se.trackingContext=this),this.trackAndCompute()&&a0(this),Se.trackingContext=f}var v=this.value_;if(_s(v))throw v.cause;return v},e.set=function(f){if(this.setter_){this.isRunningSetter_&&Re(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,f)}finally{this.isRunningSetter_=!1}}else Re(34,this.name_)},e.trackAndCompute=function(){var f=this.value_,v=this.dependenciesState_===st.NOT_TRACKING_,w=this.computeValue_(!0),C=v||_s(f)||_s(w)||!this.equals_(f,w);return C&&(this.value_=w,process.env.NODE_ENV!=="production"&&Wt()&&$n({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:f,newValue:w})),C},e.computeValue_=function(f){this.isComputing_=!0;var v=ps(!1),w;if(f)w=hf(this,this.derivation,this.scope_);else if(Se.disableErrorBoundaries===!0)w=this.derivation.call(this.scope_);else try{w=this.derivation.call(this.scope_)}catch(C){w=new ys(C)}return vs(v),this.isComputing_=!1,w},e.suspend_=function(){this.keepAlive_||(cu(this),this.value_=void 0,process.env.NODE_ENV!=="production"&&this.isTracing_!==Er.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},e.observe_=function(f,v){var w=this,C=!0,E=void 0;return y0(function(){var O=w.get();if(!C||v){var g=Gn();f({observableKind:"computed",debugObjectName:w.name_,type:Yr,object:w,newValue:O,oldValue:E}),un(g)}C=!1,E=O})},e.warnAboutUntrackedRead_=function(){process.env.NODE_ENV!=="production"&&(this.isTracing_!==Er.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),(typeof this.requiresReaction_=="boolean"?this.requiresReaction_:Se.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."))},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return Gc(this.get())},e[ff]=function(){return this.valueOf()},t}(),ms=Yn("ComputedValue",Xn),st;(function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"})(st||(st={}));var Er;(function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"})(Er||(Er={}));var ys=function(e){this.cause=void 0,this.cause=e};function _s(t){return t instanceof ys}function lu(t){switch(t.dependenciesState_){case st.UP_TO_DATE_:return!1;case st.NOT_TRACKING_:case st.STALE_:return!0;case st.POSSIBLY_STALE_:{for(var e=fu(!0),i=Gn(),f=t.observing_,v=f.length,w=0;w<v;w++){var C=f[w];if(ms(C)){if(Se.disableErrorBoundaries)C.get();else try{C.get()}catch{return un(i),lo(e),!0}if(t.dependenciesState_===st.STALE_)return un(i),lo(e),!0}}return gf(t),un(i),lo(e),!1}}}function Jr(t){if(process.env.NODE_ENV!=="production"){var e=t.observers_.size>0;!Se.allowStateChanges&&(e||Se.enforceActions==="always")&&console.warn("[MobX] "+(Se.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+t.name_)}}function t0(t){process.env.NODE_ENV!=="production"&&!Se.allowStateReads&&Se.observableRequiresReaction&&console.warn("[mobx] Observable '"+t.name_+"' being read outside a reactive context.")}function hf(t,e,i){var f=fu(!0);gf(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++Se.runId;var v=Se.trackingDerivation;Se.trackingDerivation=t,Se.inBatch++;var w;if(Se.disableErrorBoundaries===!0)w=e.call(i);else try{w=e.call(i)}catch(C){w=new ys(C)}return Se.inBatch--,Se.trackingDerivation=v,n0(t),r0(t),lo(f),w}function r0(t){process.env.NODE_ENV!=="production"&&t.observing_.length===0&&(typeof t.requiresObservable_=="boolean"?t.requiresObservable_:Se.reactionRequiresObservable)&&console.warn("[mobx] Derivation '"+t.name_+"' is created/updated without reading any observable value.")}function n0(t){for(var e=t.observing_,i=t.observing_=t.newObserving_,f=st.UP_TO_DATE_,v=0,w=t.unboundDepsCount_,C=0;C<w;C++){var E=i[C];E.diffValue_===0&&(E.diffValue_=1,v!==C&&(i[v]=E),v++),E.dependenciesState_>f&&(f=E.dependenciesState_)}for(i.length=v,t.newObserving_=null,w=e.length;w--;){var O=e[w];O.diffValue_===0&&vf(O,t),O.diffValue_=0}for(;v--;){var g=i[v];g.diffValue_===1&&(g.diffValue_=0,s0(g,t))}f!==st.UP_TO_DATE_&&(t.dependenciesState_=f,t.onBecomeStale_())}function cu(t){var e=t.observing_;t.observing_=[];for(var i=e.length;i--;)vf(e[i],t);t.dependenciesState_=st.NOT_TRACKING_}function df(t){var e=Gn();try{return t()}finally{un(e)}}function Gn(){var t=Se.trackingDerivation;return Se.trackingDerivation=null,t}function un(t){Se.trackingDerivation=t}function fu(t){var e=Se.allowStateReads;return Se.allowStateReads=t,e}function lo(t){Se.allowStateReads=t}function gf(t){if(t.dependenciesState_!==st.UP_TO_DATE_){t.dependenciesState_=st.UP_TO_DATE_;for(var e=t.observing_,i=e.length;i--;)e[i].lowestObserverState_=st.UP_TO_DATE_}}var bs=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ws=!0,pf=!1,Se=function(){var t=eu();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ws=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==new bs().version&&(ws=!1),ws?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new bs):(setTimeout(function(){pf||Re(35)},1),new bs)}();function i0(){if((Se.pendingReactions.length||Se.inBatch||Se.isRunningReactions)&&Re(36),pf=!0,ws){var t=eu();--t.__mobxInstanceCount===0&&(t.__mobxGlobals=void 0),Se=new bs}}function o0(){return Se}function s0(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function vf(t,e){t.observers_.delete(e),t.observers_.size===0&&mf(t)}function mf(t){t.isPendingUnobservation_===!1&&(t.isPendingUnobservation_=!0,Se.pendingUnobservations.push(t))}function Or(){Se.inBatch++}function Ar(){if(--Se.inBatch===0){Cf();for(var t=Se.pendingUnobservations,e=0;e<t.length;e++){var i=t[e];i.isPendingUnobservation_=!1,i.observers_.size===0&&(i.isBeingObserved_&&(i.isBeingObserved_=!1,i.onBUO()),i instanceof Xn&&i.suspend_())}Se.pendingUnobservations=[]}}function yf(t){t0(t);var e=Se.trackingDerivation;return e!==null?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&Se.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(t.observers_.size===0&&Se.inBatch>0&&mf(t),!1)}function _f(t){t.lowestObserverState_!==st.STALE_&&(t.lowestObserverState_=st.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.UP_TO_DATE_&&(process.env.NODE_ENV!=="production"&&e.isTracing_!==Er.NONE&&bf(e,t),e.onBecomeStale_()),e.dependenciesState_=st.STALE_}))}function a0(t){t.lowestObserverState_!==st.STALE_&&(t.lowestObserverState_=st.STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.POSSIBLY_STALE_?(e.dependenciesState_=st.STALE_,process.env.NODE_ENV!=="production"&&e.isTracing_!==Er.NONE&&bf(e,t)):e.dependenciesState_===st.UP_TO_DATE_&&(t.lowestObserverState_=st.UP_TO_DATE_)}))}function u0(t){t.lowestObserverState_===st.UP_TO_DATE_&&(t.lowestObserverState_=st.POSSIBLY_STALE_,t.observers_.forEach(function(e){e.dependenciesState_===st.UP_TO_DATE_&&(e.dependenciesState_=st.POSSIBLY_STALE_,e.onBecomeStale_())}))}function bf(t,e){if(console.log("[mobx.trace] '"+t.name_+"' is invalidated due to a change in: '"+e.name_+"'"),t.isTracing_===Er.BREAK){var i=[];wf(Pf(t),i,1),new Function(`debugger;
/*
Tracing '`+t.name_+`'

You are entering this break point because derivation '`+t.name_+"' is being traced and '"+e.name_+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(t instanceof Xn?t.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+i.join(`
`)+`
*/
    `)()}}function wf(t,e,i){if(e.length>=1e3){e.push("(and many more)");return}e.push(""+"	".repeat(i-1)+t.name),t.dependencies&&t.dependencies.forEach(function(f){return wf(f,e,i+1)})}var co=function(){function t(i,f,v,w){i===void 0&&(i=process.env.NODE_ENV!=="production"?"Reaction@"+Nr():"Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=st.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Er.NONE,this.name_=i,this.onInvalidate_=f,this.errorHandler_=v,this.requiresObservable_=w}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Se.pendingReactions.push(this),Cf())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){Or(),this.isScheduled_=!1;var f=Se.trackingContext;if(Se.trackingContext=this,lu(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),process.env.NODE_ENV!=="production"&&this.isTrackPending_&&Wt()&&$n({name:this.name_,type:"scheduled-reaction"})}catch(v){this.reportExceptionInDerivation_(v)}}Se.trackingContext=f,Ar()}},e.track=function(f){if(!this.isDisposed_){Or();var v=Wt(),w;process.env.NODE_ENV!=="production"&&v&&(w=Date.now(),dr({name:this.name_,type:"reaction"})),this.isRunning_=!0;var C=Se.trackingContext;Se.trackingContext=this;var E=hf(this,f,void 0);Se.trackingContext=C,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&cu(this),_s(E)&&this.reportExceptionInDerivation_(E.cause),process.env.NODE_ENV!=="production"&&v&&gr({time:Date.now()-w}),Ar()}},e.reportExceptionInDerivation_=function(f){var v=this;if(this.errorHandler_){this.errorHandler_(f,this);return}if(Se.disableErrorBoundaries)throw f;var w=process.env.NODE_ENV!=="production"?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";Se.suppressReactionErrors?process.env.NODE_ENV!=="production"&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(w,f),process.env.NODE_ENV!=="production"&&Wt()&&$n({type:"error",name:this.name_,message:w,error:""+f}),Se.globalReactionErrorHandlers.forEach(function(C){return C(f,v)})},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Or(),cu(this),Ar()))},e.getDisposer_=function(f){var v=this,w=function C(){v.dispose(),f==null||f.removeEventListener==null||f.removeEventListener("abort",C)};return f==null||f.addEventListener==null||f.addEventListener("abort",w),w[We]=this,w},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(f){f===void 0&&(f=!1),M0(this,f)},t}(),xf=100,hu=function(e){return e()};function Cf(){Se.inBatch>0||Se.isRunningReactions||hu(l0)}function l0(){Se.isRunningReactions=!0;for(var t=Se.pendingReactions,e=0;t.length>0;){++e===xf&&(console.error(process.env.NODE_ENV!=="production"?"Reaction doesn't converge to a stable state after "+xf+" iterations."+(" Probably there is a cycle in the reactive function: "+t[0]):"[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var i=t.splice(0),f=0,v=i.length;f<v;f++)i[f].runReaction_()}Se.isRunningReactions=!1}var xs=Yn("Reaction",co);function c0(t){var e=hu;hu=function(f){return t(function(){return e(f)})}}function Wt(){return process.env.NODE_ENV!=="production"&&!!Se.spyListeners.length}function $n(t){if(process.env.NODE_ENV!=="production"&&Se.spyListeners.length)for(var e=Se.spyListeners,i=0,f=e.length;i<f;i++)e[i](t)}function dr(t){if(process.env.NODE_ENV!=="production"){var e=an({},t,{spyReportStart:!0});$n(e)}}var f0={type:"report-end",spyReportEnd:!0};function gr(t){process.env.NODE_ENV!=="production"&&$n(t?an({},t,{type:"report-end",spyReportEnd:!0}):f0)}function h0(t){return process.env.NODE_ENV==="production"?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(Se.spyListeners.push(t),tu(function(){Se.spyListeners=Se.spyListeners.filter(function(e){return e!==t})}))}var du="action",d0="action.bound",Sf="autoAction",g0="autoAction.bound",p0="<unnamed action>",gu=uo(du),v0=uo(d0,{bound:!0}),pu=uo(Sf,{autoAction:!0}),m0=uo(g0,{autoAction:!0,bound:!0});function Tf(t){var e=function(f,v){if(Bt(f))return Hn(f.name||p0,f,t);if(Bt(v))return Hn(f,v,t);if(so(v))return(t?pu:gu).decorate_20223_(f,v);if(Un(v))return Si(f,v,t?pu:gu);if(Un(f))return Zr(uo(t?Sf:du,{name:f,autoAction:t}));process.env.NODE_ENV!=="production"&&Re("Invalid arguments for `action`")};return e}var Ti=Tf(!1);Object.assign(Ti,gu);var fo=Tf(!0);Object.assign(fo,pu),Ti.bound=Zr(v0),fo.bound=Zr(m0);function ho(t){return Bt(t)&&t.isMobxAction===!0}function y0(t,e){var i,f,v,w,C;e===void 0&&(e=Yc),process.env.NODE_ENV!=="production"&&(Bt(t)||Re("Autorun expects a function as first argument"),ho(t)&&Re("Autorun does not accept actions since actions are untrackable"));var E=(i=(f=e)==null?void 0:f.name)!=null?i:process.env.NODE_ENV!=="production"?t.name||"Autorun@"+Nr():"Autorun",O=!e.scheduler&&!e.delay,g;if(O)g=new co(E,function(){this.track(c)},e.onError,e.requiresObservable);else{var o=b0(e),h=!1;g=new co(E,function(){h||(h=!0,o(function(){h=!1,g.isDisposed_||g.track(c)}))},e.onError,e.requiresObservable)}function c(){t(g)}return(v=e)!=null&&(w=v.signal)!=null&&w.aborted||g.schedule_(),g.getDisposer_((C=e)==null?void 0:C.signal)}var _0=function(e){return e()};function b0(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:_0}var w0="onBO",x0="onBUO";function C0(t,e,i){return Of(w0,t,e,i)}function Ef(t,e,i){return Of(x0,t,e,i)}function Of(t,e,i,f){var v=typeof f=="function"?En(e,i):En(e),w=Bt(f)?f:i,C=t+"L";return v[C]?v[C].add(w):v[C]=new Set([w]),function(){var E=v[C];E&&(E.delete(w),E.size===0&&delete v[C])}}var S0="never",Cs="always",T0="observed";function E0(t){t.isolateGlobalState===!0&&i0();var e=t.useProxies,i=t.enforceActions;if(e!==void 0&&(Se.useProxies=e===Cs?!0:e===S0?!1:typeof Proxy<"u"),e==="ifavailable"&&(Se.verifyProxies=!0),i!==void 0){var f=i===Cs?Cs:i===T0;Se.enforceActions=f,Se.allowStateChanges=!(f===!0||f===Cs)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(v){v in t&&(Se[v]=!!t[v])}),Se.allowStateReads=!Se.observableRequiresReaction,process.env.NODE_ENV!=="production"&&Se.disableErrorBoundaries===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),t.reactionScheduler&&c0(t.reactionScheduler)}function Af(t,e,i,f){process.env.NODE_ENV!=="production"&&(arguments.length>4&&Re("'extendObservable' expected 2-4 arguments"),typeof t!="object"&&Re("'extendObservable' expects an object as first argument"),cn(t)&&Re("'extendObservable' should not be used on maps, use map.merge instead"),hr(e)||Re("'extendObservable' only accepts plain objects as second argument"),(po(e)||po(i))&&Re("Extending an object with another observable (object) is not supported"));var v=rm(e);return On(function(){var w=Kn(t,f)[We];xi(v).forEach(function(C){w.extend_(C,v[C],i&&C in i?i[C]:!0)})}),t}function Pf(t,e){return Df(En(t,e))}function Df(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=O0(t.observing_).map(Df)),e}function O0(t){return Array.from(new Set(t))}var A0=0;function Mf(){this.message="FLOW_CANCELLED"}Mf.prototype=Object.create(Error.prototype);var vu=Jc("flow"),P0=Jc("flow.bound",{bound:!0}),Ei=Object.assign(function(e,i){if(so(i))return vu.decorate_20223_(e,i);if(Un(i))return Si(e,i,vu);process.env.NODE_ENV!=="production"&&arguments.length!==1&&Re("Flow expects single argument with generator function");var f=e,v=f.name||"<unnamed flow>",w=function(){var E=this,O=arguments,g=++A0,o=Ti(v+" - runid: "+g+" - init",f).apply(E,O),h,c=void 0,n=new Promise(function(a,s){var u=0;h=s;function p(y){c=void 0;var b;try{b=Ti(v+" - runid: "+g+" - yield "+u++,o.next).call(o,y)}catch(x){return s(x)}m(b)}function l(y){c=void 0;var b;try{b=Ti(v+" - runid: "+g+" - yield "+u++,o.throw).call(o,y)}catch(x){return s(x)}m(b)}function m(y){if(Bt(y==null?void 0:y.then)){y.then(m,s);return}return y.done?a(y.value):(c=Promise.resolve(y.value),c.then(p,l))}p(void 0)});return n.cancel=Ti(v+" - runid: "+g+" - cancel",function(){try{c&&Rf(c);var a=o.return(void 0),s=Promise.resolve(a.value);s.then(bi,bi),Rf(s),h(new Mf)}catch(u){h(u)}}),n};return w.isMobXFlow=!0,w},vu);Ei.bound=Zr(P0);function Rf(t){Bt(t.cancel)&&t.cancel()}function go(t){return(t==null?void 0:t.isMobXFlow)===!0}function D0(t,e){return t?e!==void 0?process.env.NODE_ENV!=="production"&&(cn(t)||yo(t))?Re("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):Qn(t)?t[We].values_.has(e):!1:Qn(t)||!!t[We]||ou(t)||xs(t)||ms(t):!1}function po(t){return process.env.NODE_ENV!=="production"&&arguments.length!==1&&Re("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),D0(t)}function M0(){if(process.env.NODE_ENV!=="production"){for(var t=!1,e=arguments.length,i=new Array(e),f=0;f<e;f++)i[f]=arguments[f];typeof i[i.length-1]=="boolean"&&(t=i.pop());var v=R0(i);if(!v)return Re("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");v.isTracing_===Er.NONE&&console.log("[mobx.trace] '"+v.name_+"' tracing enabled"),v.isTracing_=t?Er.BREAK:Er.LOG}}function R0(t){switch(t.length){case 0:return Se.trackingDerivation;case 1:return En(t[0]);case 2:return En(t[0],t[1])}}function ln(t,e){e===void 0&&(e=void 0),Or();try{return t.apply(e)}finally{Ar()}}function qn(t){return t[We]}var k0={has:function(e,i){return process.env.NODE_ENV!=="production"&&Se.trackingDerivation&&no("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),qn(e).has_(i)},get:function(e,i){return qn(e).get_(i)},set:function(e,i,f){var v;return Un(i)?(process.env.NODE_ENV!=="production"&&!qn(e).values_.has(i)&&no("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),(v=qn(e).set_(i,f,!0))!=null?v:!0):!1},deleteProperty:function(e,i){var f;return process.env.NODE_ENV!=="production"&&no("delete properties from an observable object. Use 'remove' from 'mobx' instead."),Un(i)?(f=qn(e).delete_(i,!0))!=null?f:!0:!1},defineProperty:function(e,i,f){var v;return process.env.NODE_ENV!=="production"&&no("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),(v=qn(e).defineProperty_(i,f))!=null?v:!0},ownKeys:function(e){return process.env.NODE_ENV!=="production"&&Se.trackingDerivation&&no("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),qn(e).ownKeys_()},preventExtensions:function(e){Re(13)}};function I0(t,e){var i,f;return Wc(),t=Kn(t,e),(f=(i=t[We]).proxy_)!=null?f:i.proxy_=new Proxy(t,k0)}function Pr(t){return t.interceptors_!==void 0&&t.interceptors_.length>0}function vo(t,e){var i=t.interceptors_||(t.interceptors_=[]);return i.push(e),tu(function(){var f=i.indexOf(e);f!==-1&&i.splice(f,1)})}function Dr(t,e){var i=Gn();try{for(var f=[].concat(t.interceptors_||[]),v=0,w=f.length;v<w&&(e=f[v](e),e&&!e.type&&Re(14),!!e);v++);return e}finally{un(i)}}function Vr(t){return t.changeListeners_!==void 0&&t.changeListeners_.length>0}function mo(t,e){var i=t.changeListeners_||(t.changeListeners_=[]);return i.push(e),tu(function(){var f=i.indexOf(e);f!==-1&&i.splice(f,1)})}function Ur(t,e){var i=Gn(),f=t.changeListeners_;if(f){f=f.slice();for(var v=0,w=f.length;v<w;v++)f[v](e);un(i)}}function j0(t,e,i){return On(function(){var f,v=Kn(t,i)[We];process.env.NODE_ENV!=="production"&&e&&t[or]&&Re("makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported."),(f=e)!=null||(e=am(t)),xi(e).forEach(function(w){return v.make_(w,e[w])})}),t}var mu=Symbol("mobx-keys");function L0(t,e,i){return process.env.NODE_ENV!=="production"&&(!hr(t)&&!hr(Object.getPrototypeOf(t))&&Re("'makeAutoObservable' can only be used for classes that don't have a superclass"),Qn(t)&&Re("makeAutoObservable can only be used on objects not already made observable")),hr(t)?Af(t,t,e,i):(On(function(){var f=Kn(t,i)[We];if(!t[mu]){var v=Object.getPrototypeOf(t),w=new Set([].concat(xi(t),xi(v)));w.delete("constructor"),w.delete(We),io(v,mu,w)}t[mu].forEach(function(C){return f.make_(C,e&&C in e?e[C]:!0)})}),t)}var kf="splice",Yr="update",B0=1e4,F0={get:function(e,i){var f=e[We];return i===We?f:i==="length"?f.getArrayLength_():typeof i=="string"&&!isNaN(i)?f.get_(parseInt(i)):Tr(Ss,i)?Ss[i]:e[i]},set:function(e,i,f){var v=e[We];return i==="length"&&v.setArrayLength_(f),typeof i=="symbol"||isNaN(i)?e[i]=f:v.set_(parseInt(i),f),!0},preventExtensions:function(){Re(15)}},yu=function(){function t(i,f,v,w){i===void 0&&(i=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=v,this.legacyMode_=w,this.atom_=new ao(i),this.enhancer_=function(C,E){return f(C,E,process.env.NODE_ENV!=="production"?i+"[..]":"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(f){return this.dehancer!==void 0?this.dehancer(f):f},e.dehanceValues_=function(f){return this.dehancer!==void 0&&f.length>0?f.map(this.dehancer):f},e.intercept_=function(f){return vo(this,f)},e.observe_=function(f,v){return v===void 0&&(v=!1),v&&f({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),mo(this,f)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(f){(typeof f!="number"||isNaN(f)||f<0)&&Re("Out of range: "+f);var v=this.values_.length;if(f!==v)if(f>v){for(var w=new Array(f-v),C=0;C<f-v;C++)w[C]=void 0;this.spliceWithArray_(v,0,w)}else this.spliceWithArray_(f,v-f)},e.updateArrayLength_=function(f,v){f!==this.lastKnownLength_&&Re(16),this.lastKnownLength_+=v,this.legacyMode_&&v>0&&$f(f+v+1)},e.spliceWithArray_=function(f,v,w){var C=this;Jr(this.atom_);var E=this.values_.length;if(f===void 0?f=0:f>E?f=E:f<0&&(f=Math.max(0,E+f)),arguments.length===1?v=E-f:v==null?v=0:v=Math.max(0,Math.min(v,E-f)),w===void 0&&(w=ns),Pr(this)){var O=Dr(this,{object:this.proxy_,type:kf,index:f,removedCount:v,added:w});if(!O)return ns;v=O.removedCount,w=O.added}if(w=w.length===0?w:w.map(function(h){return C.enhancer_(h,void 0)}),this.legacyMode_||process.env.NODE_ENV!=="production"){var g=w.length-v;this.updateArrayLength_(E,g)}var o=this.spliceItemsIntoValues_(f,v,w);return(v!==0||w.length!==0)&&this.notifyArraySplice_(f,w,o),this.dehanceValues_(o)},e.spliceItemsIntoValues_=function(f,v,w){if(w.length<B0){var C;return(C=this.values_).splice.apply(C,[f,v].concat(w))}else{var E=this.values_.slice(f,f+v),O=this.values_.slice(f+v);this.values_.length+=w.length-v;for(var g=0;g<w.length;g++)this.values_[f+g]=w[g];for(var o=0;o<O.length;o++)this.values_[f+w.length+o]=O[o];return E}},e.notifyArrayChildUpdate_=function(f,v,w){var C=!this.owned_&&Wt(),E=Vr(this),O=E||C?{observableKind:"array",object:this.proxy_,type:Yr,debugObjectName:this.atom_.name_,index:f,newValue:v,oldValue:w}:null;process.env.NODE_ENV!=="production"&&C&&dr(O),this.atom_.reportChanged(),E&&Ur(this,O),process.env.NODE_ENV!=="production"&&C&&gr()},e.notifyArraySplice_=function(f,v,w){var C=!this.owned_&&Wt(),E=Vr(this),O=E||C?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:kf,index:f,removed:w,added:v,removedCount:w.length,addedCount:v.length}:null;process.env.NODE_ENV!=="production"&&C&&dr(O),this.atom_.reportChanged(),E&&Ur(this,O),process.env.NODE_ENV!=="production"&&C&&gr()},e.get_=function(f){if(this.legacyMode_&&f>=this.values_.length){console.warn(process.env.NODE_ENV!=="production"?"[mobx.array] Attempt to read an array index ("+f+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX":"[mobx] Out of bounds read: "+f);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[f])},e.set_=function(f,v){var w=this.values_;if(this.legacyMode_&&f>w.length&&Re(17,f,w.length),f<w.length){Jr(this.atom_);var C=w[f];if(Pr(this)){var E=Dr(this,{type:Yr,object:this.proxy_,index:f,newValue:v});if(!E)return;v=E.newValue}v=this.enhancer_(v,C);var O=v!==C;O&&(w[f]=v,this.notifyArrayChildUpdate_(f,v,C))}else{for(var g=new Array(f+1-w.length),o=0;o<g.length-1;o++)g[o]=void 0;g[g.length-1]=v,this.spliceWithArray_(w.length,0,g)}},t}();function N0(t,e,i,f){return i===void 0&&(i=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),f===void 0&&(f=!1),Wc(),On(function(){var v=new yu(i,e,f,!1);zc(v.values_,We,v);var w=new Proxy(v.values_,F0);return v.proxy_=w,t&&t.length&&v.spliceWithArray_(0,0,t),w})}var Ss={clear:function(){return this.splice(0)},replace:function(e){var i=this[We];return i.spliceWithArray_(0,i.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,i){for(var f=arguments.length,v=new Array(f>2?f-2:0),w=2;w<f;w++)v[w-2]=arguments[w];var C=this[We];switch(arguments.length){case 0:return[];case 1:return C.spliceWithArray_(e);case 2:return C.spliceWithArray_(e,i)}return C.spliceWithArray_(e,i,v)},spliceWithArray:function(e,i,f){return this[We].spliceWithArray_(e,i,f)},push:function(){for(var e=this[We],i=arguments.length,f=new Array(i),v=0;v<i;v++)f[v]=arguments[v];return e.spliceWithArray_(e.values_.length,0,f),e.values_.length},pop:function(){return this.splice(Math.max(this[We].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[We],i=arguments.length,f=new Array(i),v=0;v<i;v++)f[v]=arguments[v];return e.spliceWithArray_(0,0,f),e.values_.length},reverse:function(){return Se.trackingDerivation&&Re(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Se.trackingDerivation&&Re(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var i=this[We],f=i.dehanceValues_(i.values_).indexOf(e);return f>-1?(this.splice(f,1),!0):!1}};wt("at",pr),wt("concat",pr),wt("flat",pr),wt("includes",pr),wt("indexOf",pr),wt("join",pr),wt("lastIndexOf",pr),wt("slice",pr),wt("toString",pr),wt("toLocaleString",pr),wt("toSorted",pr),wt("toSpliced",pr),wt("with",pr),wt("every",Wr),wt("filter",Wr),wt("find",Wr),wt("findIndex",Wr),wt("findLast",Wr),wt("findLastIndex",Wr),wt("flatMap",Wr),wt("forEach",Wr),wt("map",Wr),wt("some",Wr),wt("toReversed",Wr),wt("reduce",If),wt("reduceRight",If);function wt(t,e){typeof Array.prototype[t]=="function"&&(Ss[t]=e(t))}function pr(t){return function(){var e=this[We];e.atom_.reportObserved();var i=e.dehanceValues_(e.values_);return i[t].apply(i,arguments)}}function Wr(t){return function(e,i){var f=this,v=this[We];v.atom_.reportObserved();var w=v.dehanceValues_(v.values_);return w[t](function(C,E){return e.call(i,C,E,f)})}}function If(t){return function(){var e=this,i=this[We];i.atom_.reportObserved();var f=i.dehanceValues_(i.values_),v=arguments[0];return arguments[0]=function(w,C,E){return v(w,C,E,e)},f[t].apply(f,arguments)}}var V0=Yn("ObservableArrayAdministration",yu);function yo(t){return is(t)&&V0(t[We])}var jf,Lf,U0={},Tn="add",Ts="delete";jf=Symbol.iterator,Lf=Symbol.toStringTag;var Bf=function(){function t(i,f,v){var w=this;f===void 0&&(f=Wn),v===void 0&&(v=process.env.NODE_ENV!=="production"?"ObservableMap@"+Nr():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[We]=U0,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=f,this.name_=v,Bt(Map)||Re(18),On(function(){w.keysAtom_=Qc(process.env.NODE_ENV!=="production"?w.name_+".keys()":"ObservableMap.keys()"),w.data_=new Map,w.hasMap_=new Map,i&&w.merge(i)})}var e=t.prototype;return e.has_=function(f){return this.data_.has(f)},e.has=function(f){var v=this;if(!Se.trackingDerivation)return this.has_(f);var w=this.hasMap_.get(f);if(!w){var C=w=new zn(this.has_(f),us,process.env.NODE_ENV!=="production"?this.name_+"."+ru(f)+"?":"ObservableMap.key?",!1);this.hasMap_.set(f,C),Ef(C,function(){return v.hasMap_.delete(f)})}return w.get()},e.set=function(f,v){var w=this.has_(f);if(Pr(this)){var C=Dr(this,{type:w?Yr:Tn,object:this,newValue:v,name:f});if(!C)return this;v=C.newValue}return w?this.updateValue_(f,v):this.addValue_(f,v),this},e.delete=function(f){var v=this;if(Jr(this.keysAtom_),Pr(this)){var w=Dr(this,{type:Ts,object:this,name:f});if(!w)return!1}if(this.has_(f)){var C=Wt(),E=Vr(this),O=E||C?{observableKind:"map",debugObjectName:this.name_,type:Ts,object:this,oldValue:this.data_.get(f).value_,name:f}:null;return process.env.NODE_ENV!=="production"&&C&&dr(O),ln(function(){var g;v.keysAtom_.reportChanged(),(g=v.hasMap_.get(f))==null||g.setNewValue_(!1);var o=v.data_.get(f);o.setNewValue_(void 0),v.data_.delete(f)}),E&&Ur(this,O),process.env.NODE_ENV!=="production"&&C&&gr(),!0}return!1},e.updateValue_=function(f,v){var w=this.data_.get(f);if(v=w.prepareNewValue_(v),v!==Se.UNCHANGED){var C=Wt(),E=Vr(this),O=E||C?{observableKind:"map",debugObjectName:this.name_,type:Yr,object:this,oldValue:w.value_,name:f,newValue:v}:null;process.env.NODE_ENV!=="production"&&C&&dr(O),w.setNewValue_(v),E&&Ur(this,O),process.env.NODE_ENV!=="production"&&C&&gr()}},e.addValue_=function(f,v){var w=this;Jr(this.keysAtom_),ln(function(){var g,o=new zn(v,w.enhancer_,process.env.NODE_ENV!=="production"?w.name_+"."+ru(f):"ObservableMap.key",!1);w.data_.set(f,o),v=o.value_,(g=w.hasMap_.get(f))==null||g.setNewValue_(!0),w.keysAtom_.reportChanged()});var C=Wt(),E=Vr(this),O=E||C?{observableKind:"map",debugObjectName:this.name_,type:Tn,object:this,name:f,newValue:v}:null;process.env.NODE_ENV!=="production"&&C&&dr(O),E&&Ur(this,O),process.env.NODE_ENV!=="production"&&C&&gr()},e.get=function(f){return this.has(f)?this.dehanceValue_(this.data_.get(f).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(f){return this.dehancer!==void 0?this.dehancer(f):f},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var f=this,v=this.keys();return _o({next:function(){var C=v.next(),E=C.done,O=C.value;return{done:E,value:E?void 0:f.get(O)}}})},e.entries=function(){var f=this,v=this.keys();return _o({next:function(){var C=v.next(),E=C.done,O=C.value;return{done:E,value:E?void 0:[O,f.get(O)]}}})},e[jf]=function(){return this.entries()},e.forEach=function(f,v){for(var w=Ci(this),C;!(C=w()).done;){var E=C.value,O=E[0],g=E[1];f.call(v,g,O,this)}},e.merge=function(f){var v=this;return cn(f)&&(f=new Map(f)),ln(function(){hr(f)?tm(f).forEach(function(w){return v.set(w,f[w])}):Array.isArray(f)?f.forEach(function(w){var C=w[0],E=w[1];return v.set(C,E)}):wi(f)?(f.constructor!==Map&&Re(19,f),f.forEach(function(w,C){return v.set(C,w)})):f!=null&&Re(20,f)}),this},e.clear=function(){var f=this;ln(function(){df(function(){for(var v=Ci(f.keys()),w;!(w=v()).done;){var C=w.value;f.delete(C)}})})},e.replace=function(f){var v=this;return ln(function(){for(var w=Y0(f),C=new Map,E=!1,O=Ci(v.data_.keys()),g;!(g=O()).done;){var o=g.value;if(!w.has(o)){var h=v.delete(o);if(h)E=!0;else{var c=v.data_.get(o);C.set(o,c)}}}for(var n=Ci(w.entries()),a;!(a=n()).done;){var s=a.value,u=s[0],p=s[1],l=v.data_.has(u);if(v.set(u,p),v.data_.has(u)){var m=v.data_.get(u);C.set(u,m),l||(E=!0)}}if(!E)if(v.data_.size!==C.size)v.keysAtom_.reportChanged();else for(var y=v.data_.keys(),b=C.keys(),x=y.next(),T=b.next();!x.done;){if(x.value!==T.value){v.keysAtom_.reportChanged();break}x=y.next(),T=b.next()}v.data_=C}),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(f,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support fireImmediately=true in combination with maps."),mo(this,f)},e.intercept_=function(f){return vo(this,f)},nu(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Lf,get:function(){return"Map"}}]),t}(),cn=Yn("ObservableMap",Bf);function Y0(t){if(wi(t)||cn(t))return t;if(Array.isArray(t))return new Map(t);if(hr(t)){var e=new Map;for(var i in t)e.set(i,t[i]);return e}else return Re(21,t)}var Ff,Nf,W0={};Ff=Symbol.iterator,Nf=Symbol.toStringTag;var Vf=function(){function t(i,f,v){var w=this;f===void 0&&(f=Wn),v===void 0&&(v=process.env.NODE_ENV!=="production"?"ObservableSet@"+Nr():"ObservableSet"),this.name_=void 0,this[We]=W0,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=v,Bt(Set)||Re(22),this.enhancer_=function(C,E){return f(C,E,v)},On(function(){w.atom_=Qc(w.name_),i&&w.replace(i)})}var e=t.prototype;return e.dehanceValue_=function(f){return this.dehancer!==void 0?this.dehancer(f):f},e.clear=function(){var f=this;ln(function(){df(function(){for(var v=Ci(f.data_.values()),w;!(w=v()).done;){var C=w.value;f.delete(C)}})})},e.forEach=function(f,v){for(var w=Ci(this),C;!(C=w()).done;){var E=C.value;f.call(v,E,E,this)}},e.add=function(f){var v=this;if(Jr(this.atom_),Pr(this)){var w=Dr(this,{type:Tn,object:this,newValue:f});if(!w)return this}if(!this.has(f)){ln(function(){v.data_.add(v.enhancer_(f,void 0)),v.atom_.reportChanged()});var C=process.env.NODE_ENV!=="production"&&Wt(),E=Vr(this),O=E||C?{observableKind:"set",debugObjectName:this.name_,type:Tn,object:this,newValue:f}:null;C&&process.env.NODE_ENV!=="production"&&dr(O),E&&Ur(this,O),C&&process.env.NODE_ENV!=="production"&&gr()}return this},e.delete=function(f){var v=this;if(Pr(this)){var w=Dr(this,{type:Ts,object:this,oldValue:f});if(!w)return!1}if(this.has(f)){var C=process.env.NODE_ENV!=="production"&&Wt(),E=Vr(this),O=E||C?{observableKind:"set",debugObjectName:this.name_,type:Ts,object:this,oldValue:f}:null;return C&&process.env.NODE_ENV!=="production"&&dr(O),ln(function(){v.atom_.reportChanged(),v.data_.delete(f)}),E&&Ur(this,O),C&&process.env.NODE_ENV!=="production"&&gr(),!0}return!1},e.has=function(f){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(f))},e.entries=function(){var f=0,v=Array.from(this.keys()),w=Array.from(this.values());return _o({next:function(){var E=f;return f+=1,E<w.length?{value:[v[E],w[E]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var f=this,v=0,w=Array.from(this.data_.values());return _o({next:function(){return v<w.length?{value:f.dehanceValue_(w[v++]),done:!1}:{done:!0}}})},e.replace=function(f){var v=this;return Oi(f)&&(f=new Set(f)),ln(function(){Array.isArray(f)?(v.clear(),f.forEach(function(w){return v.add(w)})):oo(f)?(v.clear(),f.forEach(function(w){return v.add(w)})):f!=null&&Re("Cannot initialize set from "+f)}),this},e.observe_=function(f,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support fireImmediately=true in combination with sets."),mo(this,f)},e.intercept_=function(f){return vo(this,f)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Ff]=function(){return this.values()},nu(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Nf,get:function(){return"Set"}}]),t}(),Oi=Yn("ObservableSet",Vf),Uf=Object.create(null),Yf="remove",_u=function(){function t(i,f,v,w){f===void 0&&(f=new Map),w===void 0&&(w=Rm),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=i,this.values_=f,this.name_=v,this.defaultAnnotation_=w,this.keysAtom_=new ao(process.env.NODE_ENV!=="production"?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=hr(this.target_),process.env.NODE_ENV!=="production"&&!Qf(this.defaultAnnotation_)&&Re("defaultAnnotation must be valid annotation"),process.env.NODE_ENV!=="production"&&(this.appliedAnnotations_={})}var e=t.prototype;return e.getObservablePropValue_=function(f){return this.values_.get(f).get()},e.setObservablePropValue_=function(f,v){var w=this.values_.get(f);if(w instanceof Xn)return w.set(v),!0;if(Pr(this)){var C=Dr(this,{type:Yr,object:this.proxy_||this.target_,name:f,newValue:v});if(!C)return null;v=C.newValue}if(v=w.prepareNewValue_(v),v!==Se.UNCHANGED){var E=Vr(this),O=process.env.NODE_ENV!=="production"&&Wt(),g=E||O?{type:Yr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:w.value_,name:f,newValue:v}:null;process.env.NODE_ENV!=="production"&&O&&dr(g),w.setNewValue_(v),E&&Ur(this,g),process.env.NODE_ENV!=="production"&&O&&gr()}return!0},e.get_=function(f){return Se.trackingDerivation&&!Tr(this.target_,f)&&this.has_(f),this.target_[f]},e.set_=function(f,v,w){return w===void 0&&(w=!1),Tr(this.target_,f)?this.values_.has(f)?this.setObservablePropValue_(f,v):w?Reflect.set(this.target_,f,v):(this.target_[f]=v,!0):this.extend_(f,{value:v,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,w)},e.has_=function(f){if(!Se.trackingDerivation)return f in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var v=this.pendingKeys_.get(f);return v||(v=new zn(f in this.target_,us,process.env.NODE_ENV!=="production"?this.name_+"."+ru(f)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(f,v)),v.get()},e.make_=function(f,v){if(v===!0&&(v=this.defaultAnnotation_),v!==!1){if(zf(this,v,f),!(f in this.target_)){var w;if((w=this.target_[or])!=null&&w[f])return;Re(1,v.annotationType_,this.name_+"."+f.toString())}for(var C=this.target_;C&&C!==rs;){var E=ts(C,f);if(E){var O=v.make_(this,f,E,C);if(O===0)return;if(O===1)break}C=Object.getPrototypeOf(C)}Hf(this,v,f)}},e.extend_=function(f,v,w,C){if(C===void 0&&(C=!1),w===!0&&(w=this.defaultAnnotation_),w===!1)return this.defineProperty_(f,v,C);zf(this,w,f);var E=w.extend_(this,f,v,C);return E&&Hf(this,w,f),E},e.defineProperty_=function(f,v,w){w===void 0&&(w=!1),Jr(this.keysAtom_);try{Or();var C=this.delete_(f);if(!C)return C;if(Pr(this)){var E=Dr(this,{object:this.proxy_||this.target_,name:f,type:Tn,newValue:v.value});if(!E)return null;var O=E.newValue;v.value!==O&&(v=an({},v,{value:O}))}if(w){if(!Reflect.defineProperty(this.target_,f,v))return!1}else Qr(this.target_,f,v);this.notifyPropertyAddition_(f,v.value)}finally{Ar()}return!0},e.defineObservableProperty_=function(f,v,w,C){C===void 0&&(C=!1),Jr(this.keysAtom_);try{Or();var E=this.delete_(f);if(!E)return E;if(Pr(this)){var O=Dr(this,{object:this.proxy_||this.target_,name:f,type:Tn,newValue:v});if(!O)return null;v=O.newValue}var g=Wf(f),o={configurable:Se.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:g.get,set:g.set};if(C){if(!Reflect.defineProperty(this.target_,f,o))return!1}else Qr(this.target_,f,o);var h=new zn(v,w,process.env.NODE_ENV!=="production"?this.name_+"."+f.toString():"ObservableObject.key",!1);this.values_.set(f,h),this.notifyPropertyAddition_(f,h.value_)}finally{Ar()}return!0},e.defineComputedProperty_=function(f,v,w){w===void 0&&(w=!1),Jr(this.keysAtom_);try{Or();var C=this.delete_(f);if(!C)return C;if(Pr(this)){var E=Dr(this,{object:this.proxy_||this.target_,name:f,type:Tn,newValue:void 0});if(!E)return null}v.name||(v.name=process.env.NODE_ENV!=="production"?this.name_+"."+f.toString():"ObservableObject.key"),v.context=this.proxy_||this.target_;var O=Wf(f),g={configurable:Se.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:O.get,set:O.set};if(w){if(!Reflect.defineProperty(this.target_,f,g))return!1}else Qr(this.target_,f,g);this.values_.set(f,new Xn(v)),this.notifyPropertyAddition_(f,void 0)}finally{Ar()}return!0},e.delete_=function(f,v){if(v===void 0&&(v=!1),Jr(this.keysAtom_),!Tr(this.target_,f))return!0;if(Pr(this)){var w=Dr(this,{object:this.proxy_||this.target_,name:f,type:Yf});if(!w)return null}try{var C,E;Or();var O=Vr(this),g=process.env.NODE_ENV!=="production"&&Wt(),o=this.values_.get(f),h=void 0;if(!o&&(O||g)){var c;h=(c=ts(this.target_,f))==null?void 0:c.value}if(v){if(!Reflect.deleteProperty(this.target_,f))return!1}else delete this.target_[f];if(process.env.NODE_ENV!=="production"&&delete this.appliedAnnotations_[f],o&&(this.values_.delete(f),o instanceof zn&&(h=o.value_),_f(o)),this.keysAtom_.reportChanged(),(C=this.pendingKeys_)==null||(E=C.get(f))==null||E.set(f in this.target_),O||g){var n={type:Yf,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:h,name:f};process.env.NODE_ENV!=="production"&&g&&dr(n),O&&Ur(this,n),process.env.NODE_ENV!=="production"&&g&&gr()}}finally{Ar()}return!0},e.observe_=function(f,v){return process.env.NODE_ENV!=="production"&&v===!0&&Re("`observe` doesn't support the fire immediately property for observable objects."),mo(this,f)},e.intercept_=function(f){return vo(this,f)},e.notifyPropertyAddition_=function(f,v){var w,C,E=Vr(this),O=process.env.NODE_ENV!=="production"&&Wt();if(E||O){var g=E||O?{type:Tn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:f,newValue:v}:null;process.env.NODE_ENV!=="production"&&O&&dr(g),E&&Ur(this,g),process.env.NODE_ENV!=="production"&&O&&gr()}(w=this.pendingKeys_)==null||(C=w.get(f))==null||C.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),xi(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Kn(t,e){var i;if(process.env.NODE_ENV!=="production"&&e&&Qn(t)&&Re("Options can't be provided for already observable objects."),Tr(t,We))return process.env.NODE_ENV!=="production"&&!(xu(t)instanceof _u)&&Re("Cannot convert '"+Es(t)+`' into observable object:
The target is already observable of different type.
Extending builtins is not supported.`),t;process.env.NODE_ENV!=="production"&&!Object.isExtensible(t)&&Re("Cannot make the designated object observable; it is not extensible");var f=(i=e==null?void 0:e.name)!=null?i:process.env.NODE_ENV!=="production"?(hr(t)?"ObservableObject":t.constructor.name)+"@"+Nr():"ObservableObject",v=new _u(t,new Map,String(f),Wm(e));return io(t,We,v),t}var H0=Yn("ObservableObjectAdministration",_u);function Wf(t){return Uf[t]||(Uf[t]={get:function(){return this[We].getObservablePropValue_(t)},set:function(i){return this[We].setObservablePropValue_(t,i)}})}function Qn(t){return is(t)?H0(t[We]):!1}function Hf(t,e,i){var f;process.env.NODE_ENV!=="production"&&(t.appliedAnnotations_[i]=e),(f=t.target_[or])==null||delete f[i]}function zf(t,e,i){if(process.env.NODE_ENV!=="production"&&!Qf(e)&&Re("Cannot annotate '"+t.name_+"."+i.toString()+"': Invalid annotation."),process.env.NODE_ENV!=="production"&&!ls(e)&&Tr(t.appliedAnnotations_,i)){var f=t.name_+"."+i.toString(),v=t.appliedAnnotations_[i].annotationType_,w=e.annotationType_;Re("Cannot apply '"+w+"' to '"+f+"':"+(`
The field is already annotated with '`+v+"'.")+`
Re-annotating fields is not allowed.
Use 'override' annotation for methods overridden by subclass.`)}}var z0=Gf(0),X0=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,t===!1}(),bu=0,Xf=function(){};function G0(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):t.prototype.__proto__!==void 0?t.prototype.__proto__=e:t.prototype=e}G0(Xf,Array.prototype);var wu=function(t,e,i){qc(f,t);function f(w,C,E,O){var g;return E===void 0&&(E=process.env.NODE_ENV!=="production"?"ObservableArray@"+Nr():"ObservableArray"),O===void 0&&(O=!1),g=t.call(this)||this,On(function(){var o=new yu(E,C,O,!0);o.proxy_=os(g),zc(os(g),We,o),w&&w.length&&g.spliceWithArray(0,0,w),X0&&Object.defineProperty(os(g),"0",z0)}),g}var v=f.prototype;return v.concat=function(){this[We].atom_.reportObserved();for(var C=arguments.length,E=new Array(C),O=0;O<C;O++)E[O]=arguments[O];return Array.prototype.concat.apply(this.slice(),E.map(function(g){return yo(g)?g.slice():g}))},v[i]=function(){var w=this,C=0;return _o({next:function(){return C<w.length?{value:w[C++],done:!1}:{done:!0,value:void 0}}})},nu(f,[{key:"length",get:function(){return this[We].getArrayLength_()},set:function(C){this[We].setArrayLength_(C)}},{key:e,get:function(){return"Array"}}]),f}(Xf,Symbol.toStringTag,Symbol.iterator);Object.entries(Ss).forEach(function(t){var e=t[0],i=t[1];e!=="concat"&&io(wu.prototype,e,i)});function Gf(t){return{enumerable:!1,configurable:!0,get:function(){return this[We].get_(t)},set:function(i){this[We].set_(t,i)}}}function $0(t){Qr(wu.prototype,""+t,Gf(t))}function $f(t){if(t>bu){for(var e=bu;e<t+100;e++)$0(e);bu=t}}$f(1e3);function q0(t,e,i){return new wu(t,e,i)}function En(t,e){if(typeof t=="object"&&t!==null){if(yo(t))return e!==void 0&&Re(23),t[We].atom_;if(Oi(t))return t.atom_;if(cn(t)){if(e===void 0)return t.keysAtom_;var i=t.data_.get(e)||t.hasMap_.get(e);return i||Re(25,e,Es(t)),i}if(Qn(t)){if(!e)return Re(26);var f=t[We].values_.get(e);return f||Re(27,e,Es(t)),f}if(ou(t)||ms(t)||xs(t))return t}else if(Bt(t)&&xs(t[We]))return t[We];Re(28)}function xu(t,e){if(t||Re(29),e!==void 0)return xu(En(t,e));if(ou(t)||ms(t)||xs(t)||cn(t)||Oi(t))return t;if(t[We])return t[We];Re(24,t)}function Es(t,e){var i;if(e!==void 0)i=En(t,e);else{if(ho(t))return t.name;Qn(t)||cn(t)||Oi(t)?i=xu(t):i=En(t)}return i.name_}function On(t){var e=Gn(),i=ps(!0);Or();try{return t()}finally{Ar(),vs(i),un(e)}}var qf=rs.toString;function Cu(t,e,i){return i===void 0&&(i=-1),Su(t,e,i)}function Su(t,e,i,f,v){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var w=typeof t;if(w!=="function"&&w!=="object"&&typeof e!="object")return!1;var C=qf.call(t);if(C!==qf.call(e))return!1;switch(C){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":i>=0&&i++;break}t=Kf(t),e=Kf(e);var E=C==="[object Array]";if(!E){if(typeof t!="object"||typeof e!="object")return!1;var O=t.constructor,g=e.constructor;if(O!==g&&!(Bt(O)&&O instanceof O&&Bt(g)&&g instanceof g)&&"constructor"in t&&"constructor"in e)return!1}if(i===0)return!1;i<0&&(i=-1),f=f||[],v=v||[];for(var o=f.length;o--;)if(f[o]===t)return v[o]===e;if(f.push(t),v.push(e),E){if(o=t.length,o!==e.length)return!1;for(;o--;)if(!Su(t[o],e[o],i-1,f,v))return!1}else{var h=Object.keys(t),c;if(o=h.length,Object.keys(e).length!==o)return!1;for(;o--;)if(c=h[o],!(Tr(e,c)&&Su(t[c],e[c],i-1,f,v)))return!1}return f.pop(),v.pop(),!0}function Kf(t){return yo(t)?t.slice():wi(t)||cn(t)||oo(t)||Oi(t)?Array.from(t.entries()):t}function _o(t){return t[Symbol.iterator]=K0,t}function K0(){return this}function Qf(t){return t instanceof Object&&typeof t.annotationType_=="string"&&Bt(t.make_)&&Bt(t.extend_)}if(["Symbol","Map","Set"].forEach(function(t){var e=eu();typeof e[t]>"u"&&Re("MobX requires global '"+t+"' to be available or polyfilled")}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:h0,extras:{getDebugName:Es},$mobx:We}),!we.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!j0)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Q0(t){t()}function Z0(t){t||(t=Q0,process.env.NODE_ENV!=="production"&&console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")),E0({reactionScheduler:t})}function J0(t){return Pf(t)}var ey=1e4,ty=1e4,ry=function(){function t(e){var i=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(f){f===void 0&&(f=ey),clearTimeout(i.sweepTimeout),i.sweepTimeout=void 0;var v=Date.now();i.registrations.forEach(function(w,C){v-w.registeredAt>=f&&(i.finalize(w.value),i.registrations.delete(C))}),i.registrations.size>0&&i.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){i.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,i,f){this.registrations.set(f,{value:i,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,ty))}}),t}(),ny=typeof FinalizationRegistry<"u"?FinalizationRegistry:ry,bo=new ny(function(t){var e;(e=t.reaction)===null||e===void 0||e.dispose(),t.reaction=null}),Tu={exports:{}},Eu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function iy(){if(Zf)return Eu;Zf=1;var t=we;function e(h,c){return h===c&&(h!==0||1/h===1/c)||h!==h&&c!==c}var i=typeof Object.is=="function"?Object.is:e,f=t.useState,v=t.useEffect,w=t.useLayoutEffect,C=t.useDebugValue;function E(h,c){var n=c(),a=f({inst:{value:n,getSnapshot:c}}),s=a[0].inst,u=a[1];return w(function(){s.value=n,s.getSnapshot=c,O(s)&&u({inst:s})},[h,n,c]),v(function(){return O(s)&&u({inst:s}),h(function(){O(s)&&u({inst:s})})},[h]),C(n),n}function O(h){var c=h.getSnapshot;h=h.value;try{var n=c();return!i(h,n)}catch{return!0}}function g(h,c){return c()}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:E;return Eu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:o,Eu}var Ou={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function oy(){return Jf||(Jf=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=we,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function i(m){{for(var y=arguments.length,b=new Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];f("error",m,b)}}function f(m,y,b){{var x=e.ReactDebugCurrentFrame,T=x.getStackAddendum();T!==""&&(y+="%s",b=b.concat([T]));var M=b.map(function(I){return String(I)});M.unshift("Warning: "+y),Function.prototype.apply.call(console[m],console,M)}}function v(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var w=typeof Object.is=="function"?Object.is:v,C=t.useState,E=t.useEffect,O=t.useLayoutEffect,g=t.useDebugValue,o=!1,h=!1;function c(m,y,b){o||t.startTransition!==void 0&&(o=!0,i("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var x=y();if(!h){var T=y();w(x,T)||(i("The result of getSnapshot should be cached to avoid an infinite loop"),h=!0)}var M=C({inst:{value:x,getSnapshot:y}}),I=M[0].inst,R=M[1];return O(function(){I.value=x,I.getSnapshot=y,n(I)&&R({inst:I})},[m,x,y]),E(function(){n(I)&&R({inst:I});var W=function(){n(I)&&R({inst:I})};return m(W)},[m]),g(x),x}function n(m){var y=m.getSnapshot,b=m.value;try{var x=y();return!w(b,x)}catch{return!0}}function a(m,y,b){return y()}var s=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u=!s,p=u?a:c,l=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p;Ou.useSyncExternalStore=l,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Ou}process.env.NODE_ENV==="production"?Tu.exports=iy():Tu.exports=oy();var sy=Tu.exports;function eh(t){t.reaction=new co("observer".concat(t.name),function(){var e;t.stateVersion=Symbol(),(e=t.onStoreChange)===null||e===void 0||e.call(t)})}function ay(t,e){e===void 0&&(e="observed");var i=we.useRef(null);if(!i.current){var f={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(E){return bo.unregister(f),f.onStoreChange=E,f.reaction||(eh(f),f.stateVersion=Symbol()),function(){var O;f.onStoreChange=null,(O=f.reaction)===null||O===void 0||O.dispose(),f.reaction=null}},getSnapshot:function(){return f.stateVersion}};i.current=f}var v=i.current;v.reaction||(eh(v),bo.register(i,v,v)),we.useDebugValue(v.reaction,J0),sy.useSyncExternalStore(v.subscribe,v.getSnapshot,v.getSnapshot);var w,C;if(v.reaction.track(function(){try{w=t()}catch(E){C=E}}),C)throw C;return w}var Au,Pu,th=!0,rh=typeof Symbol=="function"&&Symbol.for,uy=(Pu=(Au=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Au===void 0?void 0:Au.configurable)!==null&&Pu!==void 0?Pu:!1,nh=rh?Symbol.for("react.forward_ref"):typeof we.forwardRef=="function"&&we.forwardRef(function(t){return null}).$$typeof,ih=rh?Symbol.for("react.memo"):typeof we.memo=="function"&&we.memo(function(t){return null}).$$typeof;function ly(t,e){var i;if(process.env.NODE_ENV!=="production"&&th&&e&&(th=!1,console.warn("[mobx-react-lite] `observer(fn, { forwardRef: true })` is deprecated, use `observer(React.forwardRef(fn))`")),ih&&t.$$typeof===ih)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var f=(i=e==null?void 0:e.forwardRef)!==null&&i!==void 0?i:!1,v=t,w=t.displayName||t.name;if(nh&&t.$$typeof===nh&&(f=!0,v=t.render,typeof v!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var C=function(E,O){return ay(function(){return v(E,O)},w)};return C.displayName=t.displayName,uy&&Object.defineProperty(C,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(C.contextTypes=t.contextTypes),f&&(C=we.forwardRef(C)),C=we.memo(C),fy(t,C),process.env.NODE_ENV!=="production"&&Object.defineProperty(C,"contextTypes",{set:function(){var E,O;throw new Error("[mobx-react-lite] `".concat(this.displayName||((E=this.type)===null||E===void 0?void 0:E.displayName)||((O=this.type)===null||O===void 0?void 0:O.name)||"Component",".contextTypes` must be set before applying `observer`."))}}),C}var cy={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function fy(t,e){Object.keys(t).forEach(function(i){cy[i]||Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}process.env.NODE_ENV,globalThis&&globalThis.__read;var Du;Z0(zv.unstable_batchedUpdates),Du=bo.finalizeAllImmediately;function hy(t,e){if(oh(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),f=Object.keys(e);if(i.length!==f.length)return!1;for(var v=0;v<i.length;v++)if(!Object.hasOwnProperty.call(e,i[v])||!oh(t[i[v]],e[i[v]]))return!1;return!0}function oh(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sh=Symbol("patchMixins"),ah=Symbol("patchedDefinition");function dy(t,e){var i=t[sh]=t[sh]||{},f=i[e]=i[e]||{};return f.locks=f.locks||0,f.methods=f.methods||[],f}function uh(t,e){for(var i=this,f=arguments.length,v=new Array(f>2?f-2:0),w=2;w<f;w++)v[w-2]=arguments[w];e.locks++;try{var C;return t!=null&&(C=t.apply(this,v)),C}finally{e.locks--,e.locks===0&&e.methods.forEach(function(E){E.apply(i,v)})}}function lh(t,e){var i=function(){for(var v=arguments.length,w=new Array(v),C=0;C<v;C++)w[C]=arguments[C];uh.call.apply(uh,[this,t,e].concat(w))};return i}function gy(t,e,i){var f=dy(t,e);f.methods.indexOf(i)<0&&f.methods.push(i);var v=Object.getOwnPropertyDescriptor(t,e);if(!(v&&v[ah])){var w=t[e],C=ch(t,e,v?v.enumerable:void 0,f,w);Object.defineProperty(t,e,C)}}function ch(t,e,i,f,v){var w,C=lh(v,f);return w={},w[ah]=!0,w.get=function(){return C},w.set=function(O){if(this===t)C=lh(O,f);else{var g=ch(this,e,i,f,O);Object.defineProperty(this,e,g)}},w.configurable=!0,w.enumerable=i,w}var fh=Symbol("ObserverAdministration"),hh=Symbol("isMobXReactObserver"),dh;process.env.NODE_ENV!=="production"&&(dh={props:Mu("props"),state:Mu("state"),context:Mu("context")});function wo(t){var e;return(e=t[fh])!=null?e:t[fh]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:Os(t.constructor),state:void 0,props:void 0,context:void 0}}function py(t){var e=t.prototype;if(t[hh]){var i=Os(t);throw new Error("The provided component class ("+i+") has already been declared as an observer component.")}else t[hh]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==we.PureComponent){if(!e.shouldComponentUpdate)e.shouldComponentUpdate=gh;else if(e.shouldComponentUpdate!==gh)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}process.env.NODE_ENV!=="production"&&Object.defineProperties(e,dh);var f=e.render;if(typeof f!="function"){var v=Os(t);throw new Error("[mobx-react] class component ("+v+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}e.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:vy.call(this,f)}),this.render()};var w=e.componentDidMount;return e.componentDidMount=function(){var C=this;if(process.env.NODE_ENV!=="production"&&this.componentDidMount!==Object.getPrototypeOf(this).componentDidMount){var E=Os(t);throw new Error("[mobx-react] `observer("+E+").componentDidMount` must be defined on prototype.\n`componentDidMount = () => {}` or `componentDidMount = function() {}` is not supported.")}var O=wo(this);return O.mounted=!0,bo.unregister(this),O.forceUpdate=function(){return C.forceUpdate()},(!O.reaction||O.reactionInvalidatedBeforeMount)&&O.forceUpdate(),w==null?void 0:w.apply(this,arguments)},gy(e,"componentWillUnmount",function(){var C,E=wo(this);(C=E.reaction)==null||C.dispose(),E.reaction=null,E.forceUpdate=null,E.mounted=!1,E.reactionInvalidatedBeforeMount=!1}),t}function Os(t){return t.displayName||t.name||"<component>"}function vy(t){var e=t.bind(this),i=wo(this);function f(){i.reaction||(i.reaction=my(i),i.mounted||bo.register(this,i,this));var v=void 0,w=void 0;if(i.reaction.track(function(){try{w=Jm(!1,e)}catch(C){v=C}}),v)throw v;return w}return f}function my(t){return new co(t.name+".render()",function(){if(!t.mounted){t.reactionInvalidatedBeforeMount=!0;return}try{t.forceUpdate==null||t.forceUpdate()}catch{var e;(e=t.reaction)==null||e.dispose(),t.reaction=null}})}function gh(t,e){return this.state!==e?!0:!hy(this.props,t)}function Mu(t){return{configurable:!0,enumerable:!0,get:function(){var i=wo(this),f=o0().trackingDerivation;if(f&&f!==i.reaction)throw new Error('[mobx-react] Cannot read "'+i.name+"."+t+`" in a reactive context, as it isn't observable.
                    Please use component lifecycle method to copy the value into a local observable first.
                    See https://github.com/mobxjs/mobx/blob/main/packages/mobx-react/README.md#note-on-using-props-and-state-in-derivations`);return i[t]},set:function(i){wo(this)[t]=i}}}function Zn(t,e){if(e&&e.kind!=="class")throw new Error("The @observer decorator can be used on classes only");return t.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(we.Component,t)||Object.prototype.isPrototypeOf.call(we.PureComponent,t)?py(t):ly(t)}if(we.version.split(".")[0],!we.Component)throw new Error("mobx-react requires React to be available");if(!Ut)throw new Error("mobx-react requires mobx to be available");function ph(t){const[e,i]=we.useState(null);return we.useEffect(()=>{if(!t.current)throw Error("ref must be initialized in intial render");const f=new ResizeObserver(w=>{const E=w[0].target.getBoundingClientRect();i(O=>O&&O.width===E.width&&O.height===E.height?O:{width:E.width,height:E.height})}),v=t.current;return f.observe(v),()=>{f.unobserve(v)}},[t]),e}function yy({containerSize:t}){const e=we.useRef(null),{core:i}=It();return we.useEffect(()=>(i.setCanvas(e.current),()=>{i.detach()}),[i]),we.useEffect(()=>{i.setContainerSize(t)},[t,i]),U.jsx(U.Fragment,{children:U.jsx("canvas",{ref:e})})}var Jt={};const Ru=Fc(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.1"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var i=Ru,f=new i.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=f.document,e.jsdomImplForWrapper=Ru.implForWrapper,e.nodeCanvas=Ru.Canvas,e.window=f,DOMParser=e.window.DOMParser}if(e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),typeof v>"u")var v={};if(function(g){g.modifyEventListener=!1,g.modifySelectors=!1,g.configure=function(R){isFinite(R.modifyEventListener)&&(g.modifyEventListener=R.modifyEventListener),isFinite(R.modifySelectors)&&(g.modifySelectors=R.modifySelectors),x===!1&&g.modifyEventListener&&T(),M===!1&&g.modifySelectors&&I()},g.add=function(R,W,K,$){return h(R,W,K,$,"add")},g.remove=function(R,W,K,$){return h(R,W,K,$,"remove")},g.returnFalse=function(R){return!1},g.stop=function(R){R&&(R.stopPropagation&&R.stopPropagation(),R.cancelBubble=!0,R.cancelBubbleCount=0)},g.prevent=function(R){R&&(R.preventDefault?R.preventDefault():R.preventManipulation?R.preventManipulation():R.returnValue=!1)},g.cancel=function(R){g.stop(R),g.prevent(R)},g.blur=function(){var R=document.activeElement;if(R){var W=document.activeElement.nodeName;(W==="INPUT"||W==="TEXTAREA"||R.contentEditable==="true")&&R.blur&&R.blur()}},g.getEventSupport=function(R,W){if(typeof R=="string"&&(W=R,R=window),W="on"+W,W in R)return!0;if(R.setAttribute||(R=document.createElement("div")),R.setAttribute&&R.removeAttribute){R.setAttribute(W,"");var K=typeof R[W]=="function";return typeof R[W]<"u"&&(R[W]=null),R.removeAttribute(W),K}};var o=function(R){if(!R||typeof R!="object")return R;var W=new R.constructor;for(var K in R)!R[K]||typeof R[K]!="object"?W[K]=R[K]:W[K]=o(R[K]);return W},h=function(R,W,K,$,se,fe){if($=$||{},String(R)==="[object Object]"){var le=R;if(R=le.target,delete le.target,le.type&&le.listener){W=le.type,delete le.type,K=le.listener,delete le.listener;for(var ce in le)$[ce]=le[ce]}else{for(var _e in le){var Oe=le[_e];typeof Oe!="function"&&($[_e]=Oe)}var ne={};for(var ce in le){var _e=ce.split(","),D=le[ce],F={};for(var B in $)F[B]=$[B];if(typeof D=="function")var K=D;else if(typeof D.listener=="function"){var K=D.listener;for(var B in D)typeof D[B]!="function"&&(F[B]=D[B])}else continue;for(var L=0;L<_e.length;L++)ne[ce]=v.add(R,_e[L],K,F,se)}return ne}}if(!(!R||!W||!K)){if(typeof R=="string"&&W==="ready")if(window.eventjs_stallOnReady)W="load",R=window;else{var X=new Date().getTime(),A=$.timeout,k=$.interval||1e3/60,V=window.setInterval(function(){new Date().getTime()-X>A&&window.clearInterval(V),document.querySelector(R)&&(window.clearInterval(V),setTimeout(K,1))},k);return}if(typeof R=="string"){if(R=document.querySelectorAll(R),R.length===0)return n("Missing target on listener!",arguments);R.length===1&&(R=R[0])}var z,Z={};if(R.length>0&&R!==window){for(var J=0,Y=R.length;J<Y;J++)z=h(R[J],W,K,o($),se),z&&(Z[J]=z);return c(Z)}if(typeof W=="string"&&(W=W.toLowerCase(),W.indexOf(" ")!==-1?W=W.split(" "):W.indexOf(",")!==-1&&(W=W.split(","))),typeof W!="string"){if(typeof W.length=="number")for(var he=0,ie=W.length;he<ie;he++)z=h(R,W[he],K,o($),se),z&&(Z[W[he]]=z);else for(var ce in W)typeof W[ce]=="function"?z=h(R,ce,W[ce],o($),se):z=h(R,ce,W[ce].listener,o(W[ce]),se),z&&(Z[ce]=z);return c(Z)}else W.indexOf("on")===0&&(W=W.slice(2));if(typeof R!="object")return n("Target is not defined!",arguments);if(typeof K!="function")return n("Listener is not a function!",arguments);var ee=$.useCapture||!1,Q=m(R)+"."+m(K)+"."+(ee?1:0);if(g.Gesture&&g.Gesture._gestureHandlers[W]){if(Q=W+Q,se==="remove"){if(!p[Q])return;p[Q].remove(),delete p[Q]}else if(se==="add"){if(p[Q])return p[Q].add(),p[Q];if($.useCall&&!g.modifyEventListener){var ae=K;K=function(pe,xe){for(var Ie in xe)pe[Ie]=xe[Ie];return ae.call(R,pe)}}$.gesture=W,$.target=R,$.listener=K,$.fromOverwrite=fe,p[Q]=g.proxy[W]($)}return p[Q]}else{for(var de=u(W),L=0,ue;L<de.length;L++)if(W=de[L],ue=W+"."+Q,se==="remove"){if(!p[ue])continue;R[b](W,K,ee),delete p[ue]}else if(se==="add"){if(p[ue])return p[ue];R[y](W,K,ee),p[ue]={id:ue,type:W,target:R,listener:K,remove:function(){for(var xe=0;xe<de.length;xe++)g.remove(R,de[xe],K,$)}}}return p[ue]}}},c=function(R){return{remove:function(){for(var W in R)R[W].remove()},add:function(){for(var W in R)R[W].add()}}},n=function(R,W){typeof console>"u"||typeof console.error>"u"||console.error(R,W)},a={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},s={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2};(function(){g.supports={},window.navigator.msPointerEnabled&&(g.supports.msPointer=!0),g.getEventSupport("touchstart")&&(g.supports.touch=!0),g.getEventSupport("mousedown")&&(g.supports.mouse=!0)})();var u=function(){return function(R){var W=document.addEventListener?"":"on",K=s[R];if(isFinite(K)){var $=[];for(var se in g.supports)$.push(W+a[se][K]);return $}else return[W+R]}}(),p={},l=0,m=function(R){return R===window?"#window":R===document?"#document":(R.uniqueID||(R.uniqueID="e"+l++),R.uniqueID)},y=document.addEventListener?"addEventListener":"attachEvent",b=document.removeEventListener?"removeEventListener":"detachEvent";g.createPointerEvent=function(R,W,K){var $=W.gesture,se=W.target,fe=R.changedTouches||g.proxy.getCoords(R);if(fe.length){var le=fe[0];W.pointers=K?[]:fe,W.pageX=le.pageX,W.pageY=le.pageY,W.x=W.pageX,W.y=W.pageY}var ce=document.createEvent("Event");ce.initEvent($,!0,!0),ce.originalEvent=R;for(var _e in W)_e!=="target"&&(ce[_e]=W[_e]);var Oe=ce.type;g.Gesture&&g.Gesture._gestureHandlers[Oe]&&W.oldListener.call(se,ce,W,!1)};var x=!1,T=function(){if(window.HTMLElement){var R=function(W){var K=function($){var se=$+"EventListener",fe=W[se];W[se]=function(le,ce,_e){if(g.Gesture&&g.Gesture._gestureHandlers[le]){var Oe=_e;typeof _e=="object"?Oe.useCall=!0:Oe={useCall:!0,useCapture:_e},h(this,le,ce,Oe,$,!0)}else for(var ne=u(le),D=0;D<ne.length;D++)fe.call(this,ne[D],ce,_e)}};K("add"),K("remove")};navigator.userAgent.match(/Firefox/)?(R(HTMLDivElement.prototype),R(HTMLCanvasElement.prototype)):R(HTMLElement.prototype),R(document),R(window)}},M=!1,I=function(){var R=NodeList.prototype;R.removeEventListener=function(W,K,$){for(var se=0,fe=this.length;se<fe;se++)this[se].removeEventListener(W,K,$)},R.addEventListener=function(W,K,$){for(var se=0,fe=this.length;se<fe;se++)this[se].addEventListener(W,K,$)}};return g}(v),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){g.pointerSetup=function(c,n){c.target=c.target||window,c.doc=c.target.ownerDocument||c.target,c.minFingers=c.minFingers||c.fingers||1,c.maxFingers=c.maxFingers||c.fingers||1/0,c.position=c.position||"relative",delete c.fingers,n=n||{},n.enabled=!0,n.gesture=c.gesture,n.target=c.target,n.env=c.env,v.modifyEventListener&&c.fromOverwrite&&(c.oldListener=c.listener,c.listener=v.createPointerEvent);var a=0,s=n.gesture.indexOf("pointer")===0&&v.modifyEventListener?"pointer":"mouse";return c.oldListener&&(n.oldListener=c.oldListener),n.listener=c.listener,n.proxy=function(u){n.defaultListener=c.listener,c.listener=u,u(c.event,n)},n.add=function(){n.enabled!==!0&&(c.onPointerDown&&v.add(c.target,s+"down",c.onPointerDown),c.onPointerMove&&v.add(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&v.add(c.doc,s+"up",c.onPointerUp),n.enabled=!0)},n.remove=function(){n.enabled!==!1&&(c.onPointerDown&&v.remove(c.target,s+"down",c.onPointerDown),c.onPointerMove&&v.remove(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&v.remove(c.doc,s+"up",c.onPointerUp),n.reset(),n.enabled=!1)},n.pause=function(u){c.onPointerMove&&(!u||u.move)&&v.remove(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&(!u||u.up)&&v.remove(c.doc,s+"up",c.onPointerUp),a=c.fingers,c.fingers=0},n.resume=function(u){c.onPointerMove&&(!u||u.move)&&v.add(c.doc,s+"move",c.onPointerMove),c.onPointerUp&&(!u||u.up)&&v.add(c.doc,s+"up",c.onPointerUp),c.fingers=a},n.reset=function(){c.tracker={},c.fingers=0},n};var o=v.supports;v.isMouse=!!o.mouse,v.isMSPointer=!!o.touch,v.isTouch=!!o.msPointer,g.pointerStart=function(c,n,a){var s=(c.type||"mousedown").toUpperCase();s.indexOf("MOUSE")===0?(v.isMouse=!0,v.isTouch=!1,v.isMSPointer=!1):s.indexOf("TOUCH")===0?(v.isMouse=!1,v.isTouch=!0,v.isMSPointer=!1):s.indexOf("MSPOINTER")===0&&(v.isMouse=!1,v.isTouch=!1,v.isMSPointer=!0);var u=function(R,W){var K=a.bbox,$=l[W]={};switch(a.position){case"absolute":$.offsetX=0,$.offsetY=0;break;case"differenceFromLast":$.offsetX=R.pageX,$.offsetY=R.pageY;break;case"difference":$.offsetX=R.pageX,$.offsetY=R.pageY;break;case"move":$.offsetX=R.pageX-K.x1,$.offsetY=R.pageY-K.y1;break;default:$.offsetX=K.x1-K.scrollLeft,$.offsetY=K.y1-K.scrollTop;break}var se=R.pageX-$.offsetX,fe=R.pageY-$.offsetY;$.rotation=0,$.scale=1,$.startTime=$.moveTime=new Date().getTime(),$.move={x:se,y:fe},$.start={x:se,y:fe},a.fingers++};a.event=c,n.defaultListener&&(a.listener=n.defaultListener,delete n.defaultListener);for(var p=!a.fingers,l=a.tracker,m=c.changedTouches||g.getCoords(c),y=m.length,b=0;b<y;b++){var x=m[b],T=x.identifier||1/0;if(a.fingers){if(a.fingers>=a.maxFingers){var I=[];for(var T in a.tracker)I.push(T);return n.identifier=I.join(","),p}for(var M in l)if(l[M].up){delete l[M],u(x,T),a.cancel=!0;break}if(l[T])continue;u(x,T)}else l=a.tracker={},n.bbox=a.bbox=g.getBoundingBox(a.target),a.fingers=0,a.cancel=!1,u(x,T)}var I=[];for(var T in a.tracker)I.push(T);return n.identifier=I.join(","),p},g.pointerEnd=function(c,n,a,s){for(var u=c.touches||[],p=u.length,l={},m=0;m<p;m++){var y=u[m],b=y.identifier;l[b||1/0]=!0}for(var b in a.tracker){var x=a.tracker[b];l[b]||x.up||(s&&s({pageX:x.pageX,pageY:x.pageY,changedTouches:[{pageX:x.pageX,pageY:x.pageY,identifier:b==="Infinity"?1/0:b}]},"up"),x.up=!0,a.fingers--)}if(a.fingers!==0)return!1;var T=[];a.gestureFingers=0;for(var b in a.tracker)a.gestureFingers++,T.push(b);return n.identifier=T.join(","),!0},g.getCoords=function(c){return typeof c.pageX<"u"?g.getCoords=function(n){return Array({type:"mouse",x:n.pageX,y:n.pageY,pageX:n.pageX,pageY:n.pageY,identifier:n.pointerId||1/0})}:g.getCoords=function(n){var a=document.documentElement;return n=n||window.event,Array({type:"mouse",x:n.clientX+a.scrollLeft,y:n.clientY+a.scrollTop,pageX:n.clientX+a.scrollLeft,pageY:n.clientY+a.scrollTop,identifier:1/0})},g.getCoords(c)},g.getCoord=function(c){if("ontouchstart"in window){var n=0,a=0;g.getCoord=function(s){var u=s.changedTouches;return u&&u.length?{x:n=u[0].pageX,y:a=u[0].pageY}:{x:n,y:a}}}else typeof c.pageX<"u"&&typeof c.pageY<"u"?g.getCoord=function(s){return{x:s.pageX,y:s.pageY}}:g.getCoord=function(s){var u=document.documentElement;return s=s||window.event,{x:s.clientX+u.scrollLeft,y:s.clientY+u.scrollTop}};return g.getCoord(c)};var h=function(c,n){var a=parseFloat(c.getPropertyValue(n),10);return isFinite(a)?a:0};return g.getBoundingBox=function(c){(c===window||c===document)&&(c=document.body);var n={},a=c.getBoundingClientRect();n.width=a.width,n.height=a.height,n.x1=a.left,n.y1=a.top,n.scaleX=a.width/c.offsetWidth||1,n.scaleY=a.height/c.offsetHeight||1,n.scrollLeft=0,n.scrollTop=0;var s=window.getComputedStyle(c),u=s.getPropertyValue("box-sizing")==="border-box";if(u===!1){var p=h(s,"border-left-width"),l=h(s,"border-right-width"),m=h(s,"border-bottom-width"),y=h(s,"border-top-width");n.border=[p,l,y,m],n.x1+=p,n.y1+=y,n.width-=l+p,n.height-=m+y}n.x2=n.x1+n.width,n.y2=n.y1+n.height;for(var b=s.getPropertyValue("position"),x=b==="fixed"?c:c.parentNode;x!==null&&!(x===document.body||x.scrollTop===void 0);){var s=window.getComputedStyle(x),b=s.getPropertyValue("position");if(b!=="absolute")if(b==="fixed"){n.scrollTop-=x.parentNode.scrollTop,n.scrollLeft-=x.parentNode.scrollLeft;break}else n.scrollLeft+=x.scrollLeft,n.scrollTop+=x.scrollTop;x=x.parentNode}return n.scrollBodyLeft=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,n.scrollBodyTop=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,n.scrollLeft-=n.scrollBodyLeft,n.scrollTop-=n.scrollBodyTop,n},function(){var c=navigator.userAgent.toLowerCase(),n=c.indexOf("macintosh")!==-1,a;n&&c.indexOf("khtml")!==-1?a={91:!0,93:!0}:n&&c.indexOf("firefox")!==-1?a={224:!0}:a={17:!0},(g.metaTrackerReset=function(){v.fnKey=g.fnKey=!1,v.metaKey=g.metaKey=!1,v.escKey=g.escKey=!1,v.ctrlKey=g.ctrlKey=!1,v.shiftKey=g.shiftKey=!1,v.altKey=g.altKey=!1})(),g.metaTracker=function(s){var u=s.type==="keydown";s.keyCode===27&&(v.escKey=g.escKey=u),a[s.keyCode]&&(v.metaKey=g.metaKey=u),v.ctrlKey=g.ctrlKey=s.ctrlKey,v.shiftKey=g.shiftKey=s.shiftKey,v.altKey=g.altKey=s.altKey}}(),g}(v.proxy),typeof v>"u")var v={};if(v.MutationObserver=function(){var g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,o=!g&&function(){var h=document.createElement("p"),c=!1,n=function(){c=!0};if(h.addEventListener)h.addEventListener("DOMAttrModified",n,!1);else if(h.attachEvent)h.attachEvent("onDOMAttrModified",n);else return!1;return h.setAttribute("id","target"),c}();return function(h,c){if(g){var n={subtree:!1,attributes:!0},a=new g(function(s){s.forEach(function(u){c.call(u.target,u.attributeName)})});a.observe(h,n)}else o?v.add(h,"DOMAttrModified",function(s){c.call(h,s.attrName)}):"onpropertychange"in document.body&&v.add(h,"propertychange",function(s){c.call(h,window.event.propertyName)})}}(),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.click=function(o){o.gesture=o.gesture||"click",o.maxFingers=o.maxFingers||o.fingers||1,o.onPointerDown=function(c){g.pointerStart(c,h,o)&&v.add(o.target,"mouseup",o.onPointerUp)},o.onPointerUp=function(c){if(g.pointerEnd(c,h,o)){v.remove(o.target,"mouseup",o.onPointerUp);var n=c.changedTouches||g.getCoords(c),a=n[0],s=o.bbox,u=g.getBoundingBox(o.target),p=a.pageY-u.scrollBodyTop,l=a.pageX-u.scrollBodyLeft;if(l>s.x1&&p>s.y1&&l<s.x2&&p<s.y2&&s.scrollTop===u.scrollTop){for(var m in o.tracker)break;var y=o.tracker[m];h.x=y.start.x,h.y=y.start.y,o.listener(c,h)}}};var h=g.pointerSetup(o);return h.state="click",v.add(o.target,"mousedown",o.onPointerDown),h},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.click=g.click,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.dbltap=g.dblclick=function(o){o.gesture=o.gesture||"dbltap",o.maxFingers=o.maxFingers||o.fingers||1;var h=700,c,n,a,s,u;o.onPointerDown=function(l){var m=l.changedTouches||g.getCoords(l);c&&!n?(u=m[0],n=new Date().getTime()-c):(s=m[0],c=new Date().getTime(),n=0,clearTimeout(a),a=setTimeout(function(){c=0},h)),g.pointerStart(l,p,o)&&(v.add(o.target,"mousemove",o.onPointerMove).listener(l),v.add(o.target,"mouseup",o.onPointerUp))},o.onPointerMove=function(l){if(c&&!n){var m=l.changedTouches||g.getCoords(l);u=m[0]}var y=o.bbox,b=u.pageX-y.x1,x=u.pageY-y.y1;b>0&&b<y.width&&x>0&&x<y.height&&Math.abs(u.pageX-s.pageX)<=25&&Math.abs(u.pageY-s.pageY)<=25||(v.remove(o.target,"mousemove",o.onPointerMove),clearTimeout(a),c=n=0)},o.onPointerUp=function(l){if(g.pointerEnd(l,p,o)&&(v.remove(o.target,"mousemove",o.onPointerMove),v.remove(o.target,"mouseup",o.onPointerUp)),c&&n){if(n<=h){p.state=o.gesture;for(var m in o.tracker)break;var y=o.tracker[m];p.x=y.start.x,p.y=y.start.y,o.listener(l,p)}clearTimeout(a),c=n=0}};var p=g.pointerSetup(o);return p.state="dblclick",v.add(o.target,"mousedown",o.onPointerDown),p},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.dbltap=g.dbltap,v.Gesture._gestureHandlers.dblclick=g.dblclick,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.dragElement=function(o,h){g.drag({event:h,target:o,position:"move",listener:function(c,n){o.style.left=n.x+"px",o.style.top=n.y+"px",v.prevent(c)}})},g.drag=function(o){o.gesture="drag",o.onPointerDown=function(c){g.pointerStart(c,h,o)&&(o.monitor||(v.add(o.doc,"mousemove",o.onPointerMove),v.add(o.doc,"mouseup",o.onPointerUp))),o.onPointerMove(c,"down")},o.onPointerMove=function(c,n){if(!o.tracker)return o.onPointerDown(c);o.bbox;for(var a=c.changedTouches||g.getCoords(c),s=a.length,u=0;u<s;u++){var p=a[u],l=p.identifier||1/0,m=o.tracker[l];m&&(m.pageX=p.pageX,m.pageY=p.pageY,h.state=n||"move",h.identifier=l,h.start=m.start,h.fingers=o.fingers,o.position==="differenceFromLast"?(h.x=m.pageX-m.offsetX,h.y=m.pageY-m.offsetY,m.offsetX=m.pageX,m.offsetY=m.pageY):(h.x=m.pageX-m.offsetX,h.y=m.pageY-m.offsetY),o.listener(c,h))}},o.onPointerUp=function(c){g.pointerEnd(c,h,o,o.onPointerMove)&&(o.monitor||(v.remove(o.doc,"mousemove",o.onPointerMove),v.remove(o.doc,"mouseup",o.onPointerUp)))};var h=g.pointerSetup(o);return o.event?o.onPointerDown(o.event):(v.add(o.target,"mousedown",o.onPointerDown),o.monitor&&(v.add(o.doc,"mousemove",o.onPointerMove),v.add(o.doc,"mouseup",o.onPointerUp))),h},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.drag=g.drag,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){var o=Math.PI/180,h=function(c,n){var a=0,s=0,u=0;for(var p in n){var l=n[p];l.up||(a+=l.move.x,s+=l.move.y,u++)}return c.x=a/=u,c.y=s/=u,c};return g.gesture=function(c){c.gesture=c.gesture||"gesture",c.minFingers=c.minFingers||c.fingers||2,c.onPointerDown=function(a){var s=c.fingers;if(g.pointerStart(a,n,c)&&(v.add(c.doc,"mousemove",c.onPointerMove),v.add(c.doc,"mouseup",c.onPointerUp)),c.fingers===c.minFingers&&s!==c.fingers){n.fingers=c.minFingers,n.scale=1,n.rotation=0,n.state="start";var u="";for(var p in c.tracker)u+=p;n.identifier=parseInt(u),h(n,c.tracker),c.listener(a,n)}},c.onPointerMove=function(a,s){for(var u=c.bbox,p=c.tracker,T=a.changedTouches||g.getCoords(a),l=T.length,m=0;m<l;m++){var y=T[m],b=y.identifier||1/0,x=p[b];x&&(x.move.x=y.pageX-u.x1,x.move.y=y.pageY-u.y1)}if(!(c.fingers<c.minFingers)){var T=[],M=0,I=0;h(n,p);for(var b in p){var y=p[b];if(!y.up){var R=y.start;if(!R.distance){var W=R.x-n.x,K=R.y-n.y;R.distance=Math.sqrt(W*W+K*K),R.angle=Math.atan2(W,K)/o}var W=y.move.x-n.x,K=y.move.y-n.y,$=Math.sqrt(W*W+K*K);R.distance!==0&&(M+=$/R.distance);var se=Math.atan2(W,K)/o,fe=(R.angle-se+360)%360-180;y.DEG2=y.DEG1,y.DEG1=fe>0?fe:-fe,typeof y.DEG2<"u"&&(fe>0?y.rotation+=y.DEG1-y.DEG2:y.rotation-=y.DEG1-y.DEG2,I+=y.rotation),T.push(y.move)}}n.touches=T,n.fingers=c.fingers,n.scale=M/c.fingers,n.rotation=I/c.fingers,n.state="change",c.listener(a,n)}},c.onPointerUp=function(a){var s=c.fingers;g.pointerEnd(a,n,c)&&(v.remove(c.doc,"mousemove",c.onPointerMove),v.remove(c.doc,"mouseup",c.onPointerUp)),s===c.minFingers&&c.fingers<c.minFingers&&(n.fingers=c.fingers,n.state="end",c.listener(a,n))};var n=g.pointerSetup(c);return v.add(c.target,"mousedown",c.onPointerDown),n},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.gesture=g.gesture,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.pointerdown=g.pointermove=g.pointerup=function(o){if(o.gesture=o.gesture||"pointer",!o.target.isPointerEmitter){var h=!0;o.onPointerDown=function(n){h=!1,c.gesture="pointerdown",o.listener(n,c)},o.onPointerMove=function(n){c.gesture="pointermove",o.listener(n,c,h)},o.onPointerUp=function(n){h=!0,c.gesture="pointerup",o.listener(n,c,!0)};var c=g.pointerSetup(o);return v.add(o.target,"mousedown",o.onPointerDown),v.add(o.target,"mousemove",o.onPointerMove),v.add(o.doc,"mouseup",o.onPointerUp),o.target.isPointerEmitter=!0,c}},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.pointerdown=g.pointerdown,v.Gesture._gestureHandlers.pointermove=g.pointermove,v.Gesture._gestureHandlers.pointerup=g.pointerup,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.shake=function(o){var h={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:o.target,listener:o.listener,remove:function(){window.removeEventListener("devicemotion",m,!1)}},c=4,n=1e3,a=200,s=3,u=new Date().getTime(),p={x:0,y:0,z:0},l={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},m=function(y){var b=.8,x=y.accelerationIncludingGravity;if(p.x=b*p.x+(1-b)*x.x,p.y=b*p.y+(1-b)*x.y,p.z=b*p.z+(1-b)*x.z,h.accelerationIncludingGravity=p,h.acceleration.x=x.x-p.x,h.acceleration.y=x.y-p.y,h.acceleration.z=x.z-p.z,o.gesture==="devicemotion"){o.listener(y,h);return}for(var T="xyz",M=new Date().getTime(),I=0,R=T.length;I<R;I++){var W=T[I],K=h.acceleration[W],$=l[W],se=Math.abs(K);if(!(M-u<n)&&se>c){var fe=M*K/se,le=Math.abs(fe+$.value);$.value&&le<a?($.value=fe,$.count++,$.count===s&&(o.listener(y,h),u=M,$.value=0,$.count=0)):($.value=fe,$.count=1)}}};if(window.addEventListener)return window.addEventListener("devicemotion",m,!1),h},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.shake=g.shake,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){var o=Math.PI/180;return g.swipe=function(h){h.snap=h.snap||90,h.threshold=h.threshold||1,h.gesture=h.gesture||"swipe",h.onPointerDown=function(n){g.pointerStart(n,c,h)&&(v.add(h.doc,"mousemove",h.onPointerMove).listener(n),v.add(h.doc,"mouseup",h.onPointerUp))},h.onPointerMove=function(n){for(var a=n.changedTouches||g.getCoords(n),s=a.length,u=0;u<s;u++){var p=a[u],l=p.identifier||1/0,m=h.tracker[l];m&&(m.move.x=p.pageX,m.move.y=p.pageY,m.moveTime=new Date().getTime())}},h.onPointerUp=function(n){if(g.pointerEnd(n,c,h)){v.remove(h.doc,"mousemove",h.onPointerMove),v.remove(h.doc,"mouseup",h.onPointerUp);var a,s,u,p,l={x:0,y:0},m=0,y=0,b=0;for(var x in h.tracker){var T=h.tracker[x],M=T.move.x-T.start.x,I=T.move.y-T.start.y;m+=T.move.x,y+=T.move.y,l.x+=T.start.x,l.y+=T.start.y,b++;var R=Math.sqrt(M*M+I*I),W=T.moveTime-T.startTime,p=Math.atan2(M,I)/o+180,s=W?R/W:0;if(typeof u>"u")u=p,a=s;else if(Math.abs(p-u)<=20)u=(u+p)/2,a=(a+s)/2;else return}var K=h.gestureFingers;h.minFingers<=K&&h.maxFingers>=K&&a>h.threshold&&(l.x/=b,l.y/=b,c.start=l,c.x=m/b,c.y=y/b,c.angle=-(((u/h.snap+.5>>0)*h.snap||360)-360),c.velocity=a,c.fingers=K,c.state="swipe",h.listener(n,c))}};var c=g.pointerSetup(h);return v.add(h.target,"mousedown",h.onPointerDown),c},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.swipe=g.swipe,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.longpress=function(o){return o.gesture="longpress",g.tap(o)},g.tap=function(o){o.delay=o.delay||500,o.timeout=o.timeout||250,o.driftDeviance=o.driftDeviance||10,o.gesture=o.gesture||"tap";var h,c;o.onPointerDown=function(a){if(g.pointerStart(a,n,o)){if(h=new Date().getTime(),v.add(o.doc,"mousemove",o.onPointerMove).listener(a),v.add(o.doc,"mouseup",o.onPointerUp),o.gesture!=="longpress")return;c=setTimeout(function(){if(!(a.cancelBubble&&++a.cancelBubbleCount>1)){var s=0;for(var u in o.tracker){var p=o.tracker[u];if(p.end===!0||o.cancel)return;s++}o.minFingers<=s&&o.maxFingers>=s&&(n.state="start",n.fingers=s,n.x=p.start.x,n.y=p.start.y,o.listener(a,n))}},o.delay)}},o.onPointerMove=function(a){for(var s=o.bbox,u=a.changedTouches||g.getCoords(a),p=u.length,l=0;l<p;l++){var m=u[l],y=m.identifier||1/0,b=o.tracker[y];if(b){var x=m.pageX-s.x1-parseInt(window.scrollX),T=m.pageY-s.y1-parseInt(window.scrollY),M=x-b.start.x,I=T-b.start.y,R=Math.sqrt(M*M+I*I);if(!(x>0&&x<s.width&&T>0&&T<s.height&&R<=o.driftDeviance)){v.remove(o.doc,"mousemove",o.onPointerMove),o.cancel=!0;return}}}},o.onPointerUp=function(a){if(g.pointerEnd(a,n,o)){if(clearTimeout(c),v.remove(o.doc,"mousemove",o.onPointerMove),v.remove(o.doc,"mouseup",o.onPointerUp),a.cancelBubble&&++a.cancelBubbleCount>1)return;if(o.gesture==="longpress"){n.state==="start"&&(n.state="end",o.listener(a,n));return}if(o.cancel||new Date().getTime()-h>o.timeout)return;var s=o.gestureFingers;o.minFingers<=s&&o.maxFingers>=s&&(n.state="tap",n.fingers=o.gestureFingers,o.listener(a,n))}};var n=g.pointerSetup(o);return v.add(o.target,"mousedown",o.onPointerDown),n},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.tap=g.tap,v.Gesture._gestureHandlers.longpress=g.longpress,g}(v.proxy),typeof v>"u")var v={};if(typeof v.proxy>"u"&&(v.proxy={}),v.proxy=function(g){return g.wheelPreventElasticBounce=function(o){o&&(typeof o=="string"&&(o=document.querySelector(o)),v.add(o,"wheel",function(h,c){c.preventElasticBounce(),v.stop(h)}))},g.wheel=function(o){var h,c=o.timeout||150,n=0,a={gesture:"wheel",state:"start",wheelDelta:0,target:o.target,listener:o.listener,preventElasticBounce:function(m){var y=this.target,b=y.scrollTop,x=b+y.offsetHeight,T=y.scrollHeight;(x===T&&this.wheelDelta<=0||b===0&&this.wheelDelta>=0)&&v.cancel(m),v.stop(m)},add:function(){o.target[u](l,s,!1)},remove:function(){o.target[p](l,s,!1)}},s=function(m){m=m||window.event,a.state=n++?"change":"start",a.wheelDelta=m.detail?m.detail*-20:m.wheelDelta,o.listener(m,a),clearTimeout(h),h=setTimeout(function(){n=0,a.state="end",a.wheelDelta=0,o.listener(m,a)},c)},u=document.addEventListener?"addEventListener":"attachEvent",p=document.removeEventListener?"removeEventListener":"detachEvent",l=v.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return o.target[u](l,s,!1),a},v.Gesture=v.Gesture||{},v.Gesture._gestureHandlers=v.Gesture._gestureHandlers||{},v.Gesture._gestureHandlers.wheel=g.wheel,g}(v.proxy),typeof w>"u")var w={};typeof w.proxy>"u"&&(w.proxy={}),w.proxy=function(g){return g.orientation=function(o){var h={gesture:"orientationchange",previous:null,current:window.orientation,target:o.target,listener:o.listener,remove:function(){window.removeEventListener("orientationchange",c,!1)}},c=function(n){if(h.previous=h.current,h.current=window.orientation,h.previous!==null&&h.previous!=h.current){o.listener(n,h);return}};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",c,!1),h},w.Gesture=w.Gesture||{},w.Gesture._gestureHandlers=w.Gesture._gestureHandlers||{},w.Gesture._gestureHandlers.orientation=g.orientation,g}(w.proxy),function(){function g(s,u){if(this.__eventListeners[s]){var p=this.__eventListeners[s];u?p[p.indexOf(u)]=!1:e.util.array.fill(p,!1)}}function o(s,u){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in s)this.on(p,s[p]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(u);return this}function h(s,u){var p=(function(){u.apply(this,arguments),this.off(s,p)}).bind(this);this.on(s,p)}function c(s,u){if(arguments.length===1)for(var p in s)h.call(this,p,s[p]);else h.call(this,s,u);return this}function n(s,u){if(!this.__eventListeners)return this;if(arguments.length===0)for(s in this.__eventListeners)g.call(this,s);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in s)g.call(this,p,s[p]);else g.call(this,s,u);return this}function a(s,u){if(!this.__eventListeners)return this;var p=this.__eventListeners[s];if(!p)return this;for(var l=0,m=p.length;l<m;l++)p[l]&&p[l].call(this,u||{});return this.__eventListeners[s]=p.filter(function(y){return y!==!1}),this}e.Observable={fire:a,on:o,once:c,off:n}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,o=arguments.length;g<o;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,o,h){var c=this._objects;return h?c[o]=g:c.splice(o,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,o,h=!1,c=0,n=arguments.length;c<n;c++)o=g.indexOf(arguments[c]),o!==-1&&(h=!0,g.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(g,o){for(var h=this.getObjects(),c=0,n=h.length;c<n;c++)g.call(o,h[c],c,h);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,o){return this._objects.indexOf(g)>-1?!0:o?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,o){return g+=o.complexity?o.complexity():0,g},0)}},e.CommonMethods={_setOptions:function(g){for(var o in g)this.set(o,g[o])},_initGradient:function(g,o){g&&g.colorStops&&!(g instanceof e.Gradient)&&this.set(o,new e.Gradient(g))},_initPattern:function(g,o,h){g&&g.source&&!(g instanceof e.Pattern)?this.set(o,new e.Pattern(g,h)):h&&h()},_setObject:function(g){for(var o in g)this._set(o,g[o])},set:function(g,o){return typeof g=="object"?this._setObject(g):this._set(g,o),this},_set:function(g,o){this[g]=o},toggle:function(g){var o=this.get(g);return typeof o=="boolean"&&this.set(g,!o),this},get:function(g){return this[g]}},function(g){var o=Math.sqrt,h=Math.atan2,c=Math.pow,n=Math.PI/180,a=Math.PI/2;e.util={cos:function(s){if(s===0)return 1;s<0&&(s=-s);var u=s/a;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(s===0)return 0;var u=s/a,p=1;switch(s<0&&(p=-1),u){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(s)},removeFromArray:function(s,u){var p=s.indexOf(u);return p!==-1&&s.splice(p,1),s},getRandomInt:function(s,u){return Math.floor(Math.random()*(u-s+1))+s},degreesToRadians:function(s){return s*n},radiansToDegrees:function(s){return s/n},rotatePoint:function(s,u,p){var l=new e.Point(s.x-u.x,s.y-u.y),m=e.util.rotateVector(l,p);return new e.Point(m.x,m.y).addEquals(u)},rotateVector:function(s,u){var p=e.util.sin(u),l=e.util.cos(u),m=s.x*l-s.y*p,y=s.x*p+s.y*l;return{x:m,y}},createVector:function(s,u){return new e.Point(u.x-s.x,u.y-s.y)},calcAngleBetweenVectors:function(s,u){return Math.acos((s.x*u.x+s.y*u.y)/(Math.hypot(s.x,s.y)*Math.hypot(u.x,u.y)))},getHatVector:function(s){return new e.Point(s.x,s.y).multiply(1/Math.hypot(s.x,s.y))},getBisector:function(s,u,p){var l=e.util.createVector(s,u),m=e.util.createVector(s,p),y=e.util.calcAngleBetweenVectors(l,m),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(l,y),m),x=y*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(l,x)),angle:y}},projectStrokeOnPoints:function(s,u,p){var l=[],m=u.strokeWidth/2,y=u.strokeUniform?new e.Point(1/u.scaleX,1/u.scaleY):new e.Point(1,1),b=function(x){var T=m/Math.hypot(x.x,x.y);return new e.Point(x.x*T*y.x,x.y*T*y.y)};return s.length<=1||s.forEach(function(x,T){var M=new e.Point(x.x,x.y),I,R;T===0?(R=s[T+1],I=p?b(e.util.createVector(R,M)).addEquals(M):s[s.length-1]):T===s.length-1?(I=s[T-1],R=p?b(e.util.createVector(I,M)).addEquals(M):s[0]):(I=s[T-1],R=s[T+1]);var W=e.util.getBisector(M,I,R),K=W.vector,$=W.angle,se,fe;if(u.strokeLineJoin==="miter"&&(se=-m/Math.sin($/2),fe=new e.Point(K.x*se*y.x,K.y*se*y.y),Math.hypot(fe.x,fe.y)/m<=u.strokeMiterLimit)){l.push(M.add(fe)),l.push(M.subtract(fe));return}se=-m*Math.SQRT2,fe=new e.Point(K.x*se*y.x,K.y*se*y.y),l.push(M.add(fe)),l.push(M.subtract(fe))}),l},transformPoint:function(s,u,p){return p?new e.Point(u[0]*s.x+u[2]*s.y,u[1]*s.x+u[3]*s.y):new e.Point(u[0]*s.x+u[2]*s.y+u[4],u[1]*s.x+u[3]*s.y+u[5])},makeBoundingBoxFromPoints:function(s,u){if(u)for(var p=0;p<s.length;p++)s[p]=e.util.transformPoint(s[p],u);var l=[s[0].x,s[1].x,s[2].x,s[3].x],m=e.util.array.min(l),y=e.util.array.max(l),b=y-m,x=[s[0].y,s[1].y,s[2].y,s[3].y],T=e.util.array.min(x),M=e.util.array.max(x),I=M-T;return{left:m,top:T,width:b,height:I}},invertTransform:function(s){var u=1/(s[0]*s[3]-s[1]*s[2]),p=[u*s[3],-u*s[1],-u*s[2],u*s[0]],l=e.util.transformPoint({x:s[4],y:s[5]},p,!0);return p[4]=-l.x,p[5]=-l.y,p},toFixed:function(s,u){return parseFloat(Number(s).toFixed(u))},parseUnit:function(s,u){var p=/\D{0,2}$/.exec(s),l=parseFloat(s);switch(u||(u=e.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*u;default:return l}},falseFunction:function(){return!1},getKlass:function(s,u){return s=e.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),e.util.resolveNamespace(u)[s]},getSvgAttributes:function(s){var u=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(s){if(!s)return e;var u=s.split("."),p=u.length,l,m=g||e.window;for(l=0;l<p;++l)m=m[u[l]];return m},loadImage:function(s,u,p,l){if(!s){u&&u.call(p,s);return}var m=e.util.createImage(),y=function(){u&&u.call(p,m,!1),m=m.onload=m.onerror=null};m.onload=y,m.onerror=function(){e.log("Error loading "+m.src),u&&u.call(p,null,!0),m=m.onload=m.onerror=null},s.indexOf("data")!==0&&l!==void 0&&l!==null&&(m.crossOrigin=l),s.substring(0,14)==="data:image/svg"&&(m.onload=null,e.util.loadImageInDom(m,y)),m.src=s},loadImageInDom:function(s,u){var p=e.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(s),e.document.querySelector("body").appendChild(p),s.onload=function(){u(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(s,u,p,l){s=s||[];var m=[],y=0,b=s.length;function x(){++y===b&&u&&u(m.filter(function(T){return T}))}if(!b){u&&u(m);return}s.forEach(function(T,M){if(!T||!T.type){x();return}var I=e.util.getKlass(T.type,p);I.fromObject(T,function(R,W){W||(m[M]=R),l&&l(T,R,W),x()})})},enlivenObjectEnlivables:function(s,u,p){var l=e.Object.ENLIVEN_PROPS.filter(function(m){return!!s[m]});e.util.enlivenObjects(l.map(function(m){return s[m]}),function(m){var y={};l.forEach(function(b,x){y[b]=m[x],u&&(u[b]=m[x])}),p&&p(y)})},enlivenPatterns:function(s,u){s=s||[];function p(){++m===y&&u&&u(l)}var l=[],m=0,y=s.length;if(!y){u&&u(l);return}s.forEach(function(b,x){b&&b.source?new e.Pattern(b,function(T){l[x]=T,p()}):(l[x]=b,p())})},groupSVGElements:function(s,u,p){var l;return s&&s.length===1?s[0]:(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),l=new e.Group(s,u),typeof p<"u"&&(l.sourcePath=p),l)},populateWithProperties:function(s,u,p){if(p&&Array.isArray(p))for(var l=0,m=p.length;l<m;l++)p[l]in s&&(u[p[l]]=s[p[l]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(s){var u=e.util.createCanvasElement();return u.width=s.width,u.height=s.height,u.getContext("2d").drawImage(s,0,0),u},toDataURL:function(s,u,p){return s.toDataURL("image/"+u,p)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(s,u,p){return[s[0]*u[0]+s[2]*u[1],s[1]*u[0]+s[3]*u[1],s[0]*u[2]+s[2]*u[3],s[1]*u[2]+s[3]*u[3],p?0:s[0]*u[4]+s[2]*u[5]+s[4],p?0:s[1]*u[4]+s[3]*u[5]+s[5]]},qrDecompose:function(s){var u=h(s[1],s[0]),p=c(s[0],2)+c(s[1],2),l=o(p),m=(s[0]*s[3]-s[2]*s[1])/l,y=h(s[0]*s[2]+s[1]*s[3],p);return{angle:u/n,scaleX:l,scaleY:m,skewX:y/n,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return e.iMatrix.concat();var u=e.util.degreesToRadians(s.angle),p=e.util.cos(u),l=e.util.sin(u);return[p,l,-l,p,0,0]},calcDimensionsMatrix:function(s){var u=typeof s.scaleX>"u"?1:s.scaleX,p=typeof s.scaleY>"u"?1:s.scaleY,l=[s.flipX?-u:u,0,0,s.flipY?-p:p,0,0],m=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return s.skewX&&(l=m(l,[1,0,Math.tan(y(s.skewX)),1],!0)),s.skewY&&(l=m(l,[1,Math.tan(y(s.skewY)),0,1],!0)),l},composeMatrix:function(s){var u=[1,0,0,1,s.translateX||0,s.translateY||0],p=e.util.multiplyTransformMatrices;return s.angle&&(u=p(u,e.util.calcRotateMatrix(s))),(s.scaleX!==1||s.scaleY!==1||s.skewX||s.skewY||s.flipX||s.flipY)&&(u=p(u,e.util.calcDimensionsMatrix(s))),u},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,u,p,l){l>0&&(u>l?u-=l:u=0,p>l?p-=l:p=0);var m=!0,y,b,x=s.getImageData(u,p,l*2||1,l*2||1),T=x.data.length;for(y=3;y<T&&(b=x.data[y],m=b<=0,m!==!1);y+=4);return x=null,m},parsePreserveAspectRatioAttribute:function(s){var u="meet",p="Mid",l="Mid",m=s.split(" "),y;return m&&m.length&&(u=m.pop(),u!=="meet"&&u!=="slice"?(y=u,u="meet"):m.length&&(y=m.pop())),p=y!=="none"?y.slice(1,4):"none",l=y!=="none"?y.slice(5,8):"none",{meetOrSlice:u,alignX:p,alignY:l}},clearFabricFontCache:function(s){s=(s||"").toLowerCase(),s?e.charWidthsCache[s]&&delete e.charWidthsCache[s]:e.charWidthsCache={}},limitDimsByArea:function(s,u){var p=Math.sqrt(u*s),l=Math.floor(u/p);return{x:Math.floor(p),y:l}},capValue:function(s,u,p){return Math.max(s,Math.min(u,p))},findScaleToFit:function(s,u){return Math.min(u.width/s.width,u.height/s.height)},findScaleToCover:function(s,u){return Math.max(u.width/s.width,u.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(u){return e.util.toFixed(u,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,u){var p=e.util.invertTransform(u),l=e.util.multiplyTransformMatrices(p,s.calcOwnMatrix());e.util.applyTransformToObject(s,l)},addTransformToObject:function(s,u){e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(u,s.calcOwnMatrix()))},applyTransformToObject:function(s,u){var p=e.util.qrDecompose(u),l=new e.Point(p.translateX,p.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",p.scaleX),s.set("scaleY",p.scaleY),s.skewX=p.skewX,s.skewY=p.skewY,s.angle=p.angle,s.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(s,u,p){var l=s/2,m=u/2,y=[{x:-l,y:-m},{x:l,y:-m},{x:-l,y:m},{x:l,y:m}],b=e.util.calcDimensionsMatrix(p),x=e.util.makeBoundingBoxFromPoints(y,b);return{x:x.width,y:x.height}},mergeClipPaths:function(s,u){var p=s,l=u;p.inverted&&!l.inverted&&(p=u,l=s),e.util.applyTransformToObject(l,e.util.multiplyTransformMatrices(e.util.invertTransform(p.calcTransformMatrix()),l.calcTransformMatrix()));var m=p.inverted&&l.inverted;return m&&(p.inverted=l.inverted=!1),new e.Group([p],{clipPath:l,inverted:m})}}}(t),function(){var g=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function c(D,F,B,L,X,A,k,V,z,Z,J){var Y=e.util.cos(D),he=e.util.sin(D),ie=e.util.cos(F),ee=e.util.sin(F),Q=B*X*ie-L*A*ee+k,ae=L*X*ie+B*A*ee+V,de=Z+z*(-B*X*he-L*A*Y),ue=J+z*(-L*X*he+B*A*Y),pe=Q+z*(B*X*ee+L*A*ie),xe=ae+z*(L*X*ee-B*A*ie);return["C",de,ue,pe,xe,Q,ae]}function n(D,F,B,L,X,A,k){var V=Math.PI,z=k*V/180,Z=e.util.sin(z),J=e.util.cos(z),Y=0,he=0;B=Math.abs(B),L=Math.abs(L);var ie=-J*D*.5-Z*F*.5,ee=-J*F*.5+Z*D*.5,Q=B*B,ae=L*L,de=ee*ee,ue=ie*ie,pe=Q*ae-Q*de-ae*ue,xe=0;if(pe<0){var Ie=Math.sqrt(1-pe/(Q*ae));B*=Ie,L*=Ie}else xe=(X===A?-1:1)*Math.sqrt(pe/(Q*de+ae*ue));var Pe=xe*B*ee/L,oe=-xe*L*ie/B,Ae=J*Pe-Z*oe+D*.5,Fe=Z*Pe+J*oe+F*.5,Ve=a(1,0,(ie-Pe)/B,(ee-oe)/L),Ge=a((ie-Pe)/B,(ee-oe)/L,(-ie-Pe)/B,(-ee-oe)/L);A===0&&Ge>0?Ge-=2*V:A===1&&Ge<0&&(Ge+=2*V);for(var et=Math.ceil(Math.abs(Ge/V*2)),Mt=[],_t=Ge/et,yr=8/3*Math.sin(_t/4)*Math.sin(_t/4)/Math.sin(_t/2),zr=Ve+_t,Kt=0;Kt<et;Kt++)Mt[Kt]=c(Ve,zr,J,Z,B,L,Ae,Fe,yr,Y,he),Y=Mt[Kt][5],he=Mt[Kt][6],Ve=zr,zr+=_t;return Mt}function a(D,F,B,L){var X=Math.atan2(F,D),A=Math.atan2(L,B);return A>=X?A-X:2*Math.PI-(X-A)}function s(D,F,B,L,X,A,k,V){var z;if(e.cachesBoundsOfCurve&&(z=g.call(arguments),e.boundsOfCurveCache[z]))return e.boundsOfCurveCache[z];var Z=Math.sqrt,J=Math.min,Y=Math.max,he=Math.abs,ie=[],ee=[[],[]],Q,ae,de,ue,pe,xe,Ie,Pe;ae=6*D-12*B+6*X,Q=-3*D+9*B-9*X+3*k,de=3*B-3*D;for(var oe=0;oe<2;++oe){if(oe>0&&(ae=6*F-12*L+6*A,Q=-3*F+9*L-9*A+3*V,de=3*L-3*F),he(Q)<1e-12){if(he(ae)<1e-12)continue;ue=-de/ae,0<ue&&ue<1&&ie.push(ue);continue}Ie=ae*ae-4*de*Q,!(Ie<0)&&(Pe=Z(Ie),pe=(-ae+Pe)/(2*Q),0<pe&&pe<1&&ie.push(pe),xe=(-ae-Pe)/(2*Q),0<xe&&xe<1&&ie.push(xe))}for(var Ae,Fe,Ve=ie.length,Ge=Ve,et;Ve--;)ue=ie[Ve],et=1-ue,Ae=et*et*et*D+3*et*et*ue*B+3*et*ue*ue*X+ue*ue*ue*k,ee[0][Ve]=Ae,Fe=et*et*et*F+3*et*et*ue*L+3*et*ue*ue*A+ue*ue*ue*V,ee[1][Ve]=Fe;ee[0][Ge]=D,ee[1][Ge]=F,ee[0][Ge+1]=k,ee[1][Ge+1]=V;var Mt=[{x:J.apply(null,ee[0]),y:J.apply(null,ee[1])},{x:Y.apply(null,ee[0]),y:Y.apply(null,ee[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[z]=Mt),Mt}function u(D,F,B){for(var L=B[1],X=B[2],A=B[3],k=B[4],V=B[5],z=B[6],Z=B[7],J=n(z-D,Z-F,L,X,k,V,A),Y=0,he=J.length;Y<he;Y++)J[Y][1]+=D,J[Y][2]+=F,J[Y][3]+=D,J[Y][4]+=F,J[Y][5]+=D,J[Y][6]+=F;return J}function p(D){var F=0,B=0,L=D.length,X=0,A=0,k,V,z,Z=[],J,Y,he;for(V=0;V<L;++V){switch(z=!1,k=D[V].slice(0),k[0]){case"l":k[0]="L",k[1]+=F,k[2]+=B;case"L":F=k[1],B=k[2];break;case"h":k[1]+=F;case"H":k[0]="L",k[2]=B,F=k[1];break;case"v":k[1]+=B;case"V":k[0]="L",B=k[1],k[1]=F,k[2]=B;break;case"m":k[0]="M",k[1]+=F,k[2]+=B;case"M":F=k[1],B=k[2],X=k[1],A=k[2];break;case"c":k[0]="C",k[1]+=F,k[2]+=B,k[3]+=F,k[4]+=B,k[5]+=F,k[6]+=B;case"C":Y=k[3],he=k[4],F=k[5],B=k[6];break;case"s":k[0]="S",k[1]+=F,k[2]+=B,k[3]+=F,k[4]+=B;case"S":J==="C"?(Y=2*F-Y,he=2*B-he):(Y=F,he=B),F=k[3],B=k[4],k[0]="C",k[5]=k[3],k[6]=k[4],k[3]=k[1],k[4]=k[2],k[1]=Y,k[2]=he,Y=k[3],he=k[4];break;case"q":k[0]="Q",k[1]+=F,k[2]+=B,k[3]+=F,k[4]+=B;case"Q":Y=k[1],he=k[2],F=k[3],B=k[4];break;case"t":k[0]="T",k[1]+=F,k[2]+=B;case"T":J==="Q"?(Y=2*F-Y,he=2*B-he):(Y=F,he=B),k[0]="Q",F=k[1],B=k[2],k[1]=Y,k[2]=he,k[3]=F,k[4]=B;break;case"a":k[0]="A",k[6]+=F,k[7]+=B;case"A":z=!0,Z=Z.concat(u(F,B,k)),F=k[6],B=k[7];break;case"z":case"Z":F=X,B=A;break}z||Z.push(k),J=k[0]}return Z}function l(D,F,B,L){return Math.sqrt((B-D)*(B-D)+(L-F)*(L-F))}function m(D){return D*D*D}function y(D){return 3*D*D*(1-D)}function b(D){return 3*D*(1-D)*(1-D)}function x(D){return(1-D)*(1-D)*(1-D)}function T(D,F,B,L,X,A,k,V){return function(z){var Z=m(z),J=y(z),Y=b(z),he=x(z);return{x:k*Z+X*J+B*Y+D*he,y:V*Z+A*J+L*Y+F*he}}}function M(D,F,B,L,X,A,k,V){return function(z){var Z=1-z,J=3*Z*Z*(B-D)+6*Z*z*(X-B)+3*z*z*(k-X),Y=3*Z*Z*(L-F)+6*Z*z*(A-L)+3*z*z*(V-A);return Math.atan2(Y,J)}}function I(D){return D*D}function R(D){return 2*D*(1-D)}function W(D){return(1-D)*(1-D)}function K(D,F,B,L,X,A){return function(k){var V=I(k),z=R(k),Z=W(k);return{x:X*V+B*z+D*Z,y:A*V+L*z+F*Z}}}function $(D,F,B,L,X,A){return function(k){var V=1-k,z=2*V*(B-D)+2*k*(X-B),Z=2*V*(L-F)+2*k*(A-L);return Math.atan2(Z,z)}}function se(D,F,B){var L={x:F,y:B},X,A=0,k;for(k=1;k<=100;k+=1)X=D(k/100),A+=l(L.x,L.y,X.x,X.y),L=X;return A}function fe(D,F){for(var B=0,L=0,X=D.iterator,A={x:D.x,y:D.y},k,V,z=.01,Z=D.angleFinder,J;L<F&&z>1e-4;)k=X(B),J=B,V=l(A.x,A.y,k.x,k.y),V+L>F?(B-=z,z/=2):(A=k,B+=z,L+=V);return k.angle=Z(J),k}function le(D){for(var F=0,B=D.length,L,X=0,A=0,k=0,V=0,z=[],Z,J,Y,he=0;he<B;he++){switch(L=D[he],J={x:X,y:A,command:L[0]},L[0]){case"M":J.length=0,k=X=L[1],V=A=L[2];break;case"L":J.length=l(X,A,L[1],L[2]),X=L[1],A=L[2];break;case"C":Z=T(X,A,L[1],L[2],L[3],L[4],L[5],L[6]),Y=M(X,A,L[1],L[2],L[3],L[4],L[5],L[6]),J.iterator=Z,J.angleFinder=Y,J.length=se(Z,X,A),X=L[5],A=L[6];break;case"Q":Z=K(X,A,L[1],L[2],L[3],L[4]),Y=$(X,A,L[1],L[2],L[3],L[4]),J.iterator=Z,J.angleFinder=Y,J.length=se(Z,X,A),X=L[3],A=L[4];break;case"Z":case"z":J.destX=k,J.destY=V,J.length=l(X,A,k,V),X=k,A=V;break}F+=J.length,z.push(J)}return z.push({length:F,x:X,y:A}),z}function ce(D,F,B){B||(B=le(D));for(var L=0;F-B[L].length>0&&L<B.length-2;)F-=B[L].length,L++;var X=B[L],A=F/X.length,k=X.command,V=D[L],z;switch(k){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return z=new e.Point(X.x,X.y).lerp(new e.Point(X.destX,X.destY),A),z.angle=Math.atan2(X.destY-X.y,X.destX-X.x),z;case"L":return z=new e.Point(X.x,X.y).lerp(new e.Point(V[1],V[2]),A),z.angle=Math.atan2(V[2]-X.y,V[1]-X.x),z;case"C":return fe(X,F);case"Q":return fe(X,F)}}function _e(D){var F=[],B=[],L,X,A=e.rePathCommand,k="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",V="("+k+")"+e.commaWsp,z="([01])"+e.commaWsp+"?",Z=V+"?"+V+"?"+V+z+z+V+"?("+k+")",J=new RegExp(Z,"g"),Y,he,ie;if(!D||!D.match)return F;ie=D.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ee=0,Q,ae=ie.length;ee<ae;ee++){L=ie[ee],he=L.slice(1).trim(),B.length=0;var de=L.charAt(0);if(Q=[de],de.toLowerCase()==="a")for(var ue;ue=J.exec(he);)for(var pe=1;pe<ue.length;pe++)B.push(ue[pe]);else for(;Y=A.exec(he);)B.push(Y[0]);for(var pe=0,xe=B.length;pe<xe;pe++)X=parseFloat(B[pe]),isNaN(X)||Q.push(X);var Ie=o[de.toLowerCase()],Pe=h[de]||de;if(Q.length-1>Ie)for(var oe=1,Ae=Q.length;oe<Ae;oe+=Ie)F.push([de].concat(Q.slice(oe,oe+Ie))),de=Pe;else F.push(Q)}return F}function Oe(D,F){var B=[],L,X=new e.Point(D[0].x,D[0].y),A=new e.Point(D[1].x,D[1].y),k=D.length,V=1,z=0,Z=k>2;for(F=F||0,Z&&(V=D[2].x<A.x?-1:D[2].x===A.x?0:1,z=D[2].y<A.y?-1:D[2].y===A.y?0:1),B.push(["M",X.x-V*F,X.y-z*F]),L=1;L<k;L++){if(!X.eq(A)){var J=X.midPointFrom(A);B.push(["Q",X.x,X.y,J.x,J.y])}X=D[L],L+1<D.length&&(A=D[L+1])}return Z&&(V=X.x>D[L-2].x?1:X.x===D[L-2].x?0:-1,z=X.y>D[L-2].y?1:X.y===D[L-2].y?0:-1),B.push(["L",X.x+V*F,X.y+z*F]),B}function ne(D,F,B){return B&&(F=e.util.multiplyTransformMatrices(F,[1,0,0,1,-B.x,-B.y])),D.map(function(L){for(var X=L.slice(0),A={},k=1;k<L.length-1;k+=2)A.x=L[k],A.y=L[k+1],A=e.util.transformPoint(A,F),X[k]=A.x,X[k+1]=A.y;return X})}e.util.joinPath=function(D){return D.map(function(F){return F.join(" ")}).join(" ")},e.util.parsePath=_e,e.util.makePathSimpler=p,e.util.getSmoothPathFromPoints=Oe,e.util.getPathSegmentsInfo=le,e.util.getBoundsOfCurve=s,e.util.getPointOnPath=ce,e.util.transformPath=ne}(),function(){var g=Array.prototype.slice;function o(s,u){for(var p=g.call(arguments,2),l=[],m=0,y=s.length;m<y;m++)l[m]=p.length?s[m][u].apply(s[m],p):s[m][u].call(s[m]);return l}function h(s,u){return a(s,u,function(p,l){return p>=l})}function c(s,u){return a(s,u,function(p,l){return p<l})}function n(s,u){for(var p=s.length;p--;)s[p]=u;return s}function a(s,u,p){if(!(!s||s.length===0)){var l=s.length-1,m=u?s[l][u]:s[l];if(u)for(;l--;)p(s[l][u],m)&&(m=s[l][u]);else for(;l--;)p(s[l],m)&&(m=s[l]);return m}}e.util.array={fill:n,invoke:o,min:c,max:h}}(),function(){function g(h,c,n){if(n)if(!e.isLikelyNode&&c instanceof Element)h=c;else if(c instanceof Array){h=[];for(var a=0,s=c.length;a<s;a++)h[a]=g({},c[a],n)}else if(c&&typeof c=="object")for(var u in c)u==="canvas"||u==="group"?h[u]=null:c.hasOwnProperty(u)&&(h[u]=g({},c[u],n));else h=c;else for(var u in c)h[u]=c[u];return h}function o(h,c){return g({},h,c)}e.util.object={extend:g,clone:o},e.util.object.extend(e.util,e.Observable)}(),function(){function g(a){return a.replace(/-+(.)?/g,function(s,u){return u?u.toUpperCase():""})}function o(a,s){return a.charAt(0).toUpperCase()+(s?a.slice(1):a.slice(1).toLowerCase())}function h(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(a){var s=0,u,p=[];for(s=0,u;s<a.length;s++)(u=n(a,s))!==!1&&p.push(u);return p}function n(a,s){var u=a.charCodeAt(s);if(isNaN(u))return"";if(u<55296||u>57343)return a.charAt(s);if(55296<=u&&u<=56319){if(a.length<=s+1)throw"High surrogate without following low surrogate";var p=a.charCodeAt(s+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return a.charAt(s)+a.charAt(s+1)}if(s===0)throw"Low surrogate without preceding high surrogate";var l=a.charCodeAt(s-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:g,capitalize:o,escapeXml:h,graphemeSplit:c}}(),function(){var g=Array.prototype.slice,o=function(){},h=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),c=function(u,p,l){for(var m in p)m in u.prototype&&typeof u.prototype[m]=="function"&&(p[m]+"").indexOf("callSuper")>-1?u.prototype[m]=function(y){return function(){var b=this.constructor.superclass;this.constructor.superclass=l;var x=p[y].apply(this,arguments);if(this.constructor.superclass=b,y!=="initialize")return x}}(m):u.prototype[m]=p[m],h&&(p.toString!==Object.prototype.toString&&(u.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=p.valueOf))};function n(){}function a(u){for(var p=null,l=this;l.constructor.superclass;){var m=l.constructor.superclass.prototype[u];if(l[u]!==m){p=m;break}l=l.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,g.call(arguments,1)):p.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function s(){var u=null,p=g.call(arguments,0);typeof p[0]=="function"&&(u=p.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=u,l.subclasses=[],u&&(n.prototype=u.prototype,l.prototype=new n,u.subclasses.push(l));for(var m=0,y=p.length;m<y;m++)c(l,p[m],u);return l.prototype.initialize||(l.prototype.initialize=o),l.prototype.constructor=l,l.prototype.callSuper=a,l}e.util.createClass=s}(),function(){var g=!!e.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];e.util.addListener=function(c,n,a,s){c&&c.addEventListener(n,a,g?!1:s)},e.util.removeListener=function(c,n,a,s){c&&c.removeEventListener(n,a,g?!1:s)};function h(c){var n=c.changedTouches;return n&&n[0]?n[0]:c}e.util.getPointer=function(c){var n=c.target,a=e.util.getScrollLeftTop(n),s=h(c);return{x:s.clientX+a.left,y:s.clientY+a.top}},e.util.isTouchEvent=function(c){return o.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function g(s,u){var p=s.style;if(!p)return s;if(typeof u=="string")return s.style.cssText+=";"+u,u.indexOf("opacity")>-1?a(s,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var l in u)if(l==="opacity")a(s,u[l]);else{var m=l==="float"||l==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":l;p[m]=u[l]}return s}var o=e.document.createElement("div"),h=typeof o.style.opacity=="string",c=typeof o.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(s){return s};h?a=function(s,u){return s.style.opacity=u,s}:c&&(a=function(s,u){var p=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(p.zoom=1),n.test(p.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",p.filter=p.filter.replace(n,u)):p.filter+=" alpha(opacity="+u*100+")",s}),e.util.setStyle=g}(),function(){var g=Array.prototype.slice;function o(x){return typeof x=="string"?e.document.getElementById(x):x}var h,c=function(x){return g.call(x,0)};try{h=c(e.document.childNodes)instanceof Array}catch{}h||(c=function(x){for(var T=new Array(x.length),M=x.length;M--;)T[M]=x[M];return T});function n(x,T){var M=e.document.createElement(x);for(var I in T)I==="class"?M.className=T[I]:I==="for"?M.htmlFor=T[I]:M.setAttribute(I,T[I]);return M}function a(x,T){x&&(" "+x.className+" ").indexOf(" "+T+" ")===-1&&(x.className+=(x.className?" ":"")+T)}function s(x,T,M){return typeof T=="string"&&(T=n(T,M)),x.parentNode&&x.parentNode.replaceChild(T,x),T.appendChild(x),T}function u(x){for(var T=0,M=0,I=e.document.documentElement,R=e.document.body||{scrollLeft:0,scrollTop:0};x&&(x.parentNode||x.host)&&(x=x.parentNode||x.host,x===e.document?(T=R.scrollLeft||I.scrollLeft||0,M=R.scrollTop||I.scrollTop||0):(T+=x.scrollLeft||0,M+=x.scrollTop||0),!(x.nodeType===1&&x.style.position==="fixed")););return{left:T,top:M}}function p(x){var T,M=x&&x.ownerDocument,I={left:0,top:0},R={left:0,top:0},W,K={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return R;for(var $ in K)R[K[$]]+=parseInt(l(x,$),10)||0;return T=M.documentElement,typeof x.getBoundingClientRect<"u"&&(I=x.getBoundingClientRect()),W=u(x),{left:I.left+W.left-(T.clientLeft||0)+R.left,top:I.top+W.top-(T.clientTop||0)+R.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(x,T){var M=e.document.defaultView.getComputedStyle(x,null);return M?M[T]:void 0}:l=function(x,T){var M=x.style[T];return!M&&x.currentStyle&&(M=x.currentStyle[T]),M},function(){var x=e.document.documentElement.style,T="userSelect"in x?"userSelect":"MozUserSelect"in x?"MozUserSelect":"WebkitUserSelect"in x?"WebkitUserSelect":"KhtmlUserSelect"in x?"KhtmlUserSelect":"";function M(R){return typeof R.onselectstart<"u"&&(R.onselectstart=e.util.falseFunction),T?R.style[T]="none":typeof R.unselectable=="string"&&(R.unselectable="on"),R}function I(R){return typeof R.onselectstart<"u"&&(R.onselectstart=null),T?R.style[T]="":typeof R.unselectable=="string"&&(R.unselectable=""),R}e.util.makeElementUnselectable=M,e.util.makeElementSelectable=I}();function m(x){var T=e.jsdomImplForWrapper(x);return T._canvas||T._image}function y(x){if(e.isLikelyNode){var T=e.jsdomImplForWrapper(x);T&&(T._image=null,T._canvas=null,T._currentSrc=null,T._attributes=null,T._classList=null)}}function b(x,T){x.imageSmoothingEnabled=x.imageSmoothingEnabled||x.webkitImageSmoothingEnabled||x.mozImageSmoothingEnabled||x.msImageSmoothingEnabled||x.oImageSmoothingEnabled,x.imageSmoothingEnabled=T}e.util.setImageSmoothing=b,e.util.getById=o,e.util.toArray=c,e.util.addClass=a,e.util.makeElement=n,e.util.wrapElement=s,e.util.getScrollLeftTop=u,e.util.getElementOffset=p,e.util.getNodeCanvas=m,e.util.cleanUpJsdomNode=y}(),function(){function g(c,n){return c+(/\?/.test(c)?"&":"?")+n}function o(){}function h(c,n){n||(n={});var a=n.method?n.method.toUpperCase():"GET",s=n.onComplete||function(){},u=new e.window.XMLHttpRequest,p=n.body||n.parameters;return u.onreadystatechange=function(){u.readyState===4&&(s(u),u.onreadystatechange=o)},a==="GET"&&(p=null,typeof n.parameters=="string"&&(c=g(c,n.parameters))),u.open(a,c,!0),(a==="POST"||a==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(p),u}e.util.request=h}(),e.log=console.log,e.warn=console.warn,function(){var g=e.util.object.extend,o=e.util.object.clone,h=[];e.util.object.extend(h,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(y){y.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var y=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===m});return y.forEach(function(b){b.cancel()}),y},cancelByTarget:function(m){var y=this.findAnimationsByTarget(m);return y.forEach(function(b){b.cancel()}),y},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(y){return y.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(y){return y.target===m}):[]}});function c(){return!1}function n(m,y,b,x){return-b*Math.cos(m/x*(Math.PI/2))+b+y}function a(m){m||(m={});var y=!1,b,x=function(){var T=e.runningAnimations.indexOf(b);return T>-1&&e.runningAnimations.splice(T,1)[0]};return b=g(o(m),{cancel:function(){return y=!0,x()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),p(function(T){var M=T||+new Date,I=m.duration||500,R=M+I,W,K=m.onChange||c,$=m.abort||c,se=m.onComplete||c,fe=m.easing||n,le="startValue"in m?m.startValue.length>0:!1,ce="startValue"in m?m.startValue:0,_e="endValue"in m?m.endValue:100,Oe=m.byValue||(le?ce.map(function(ne,D){return _e[D]-ce[D]}):_e-ce);m.onStart&&m.onStart(),function ne(D){W=D||+new Date;var F=W>R?I:W-M,B=F/I,L=le?ce.map(function(A,k){return fe(F,ce[k],Oe[k],I)}):fe(F,ce,Oe,I),X=Math.abs(le?(L[0]-ce[0])/Oe[0]:(L-ce)/Oe);if(b.currentValue=le?L.slice():L,b.completionRate=X,b.durationRate=B,!y){if($(L,X,B)){x();return}if(W>R){b.currentValue=le?_e.slice():_e,b.completionRate=1,b.durationRate=1,K(le?_e.slice():_e,1,1),se(_e,1,1),x();return}else K(L,X,B),p(ne)}}(M)}),b.cancel}var s=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(m){return e.window.setTimeout(m,1e3/60)},u=e.window.cancelAnimationFrame||e.window.clearTimeout;function p(){return s.apply(e.window,arguments)}function l(){return u.apply(e.window,arguments)}e.util.animate=a,e.util.requestAnimFrame=p,e.util.cancelAnimFrame=l,e.runningAnimations=h}(),function(){function g(h,c,n){var a="rgba("+parseInt(h[0]+n*(c[0]-h[0]),10)+","+parseInt(h[1]+n*(c[1]-h[1]),10)+","+parseInt(h[2]+n*(c[2]-h[2]),10);return a+=","+(h&&c?parseFloat(h[3]+n*(c[3]-h[3])):1),a+=")",a}function o(h,c,n,a){var s=new e.Color(h).getSource(),u=new e.Color(c).getSource(),p=a.onComplete,l=a.onChange;return a=a||{},e.util.animate(e.util.object.extend(a,{duration:n||500,startValue:s,endValue:u,byValue:u,easing:function(m,y,b,x){var T=a.colorEasing?a.colorEasing(m,x):1-Math.cos(m/x*(Math.PI/2));return g(y,b,T)},onComplete:function(m,y,b){if(p)return p(g(u,u,0),y,b)},onChange:function(m,y,b){if(l){if(Array.isArray(m))return l(g(m,m,0),y,b);l(m,y,b)}}}))}e.util.animateColor=o}(),function(){function g(D,F,B,L){return D<Math.abs(F)?(D=F,L=B/4):F===0&&D===0?L=B/(2*Math.PI)*Math.asin(1):L=B/(2*Math.PI)*Math.asin(F/D),{a:D,c:F,p:B,s:L}}function o(D,F,B){return D.a*Math.pow(2,10*(F-=1))*Math.sin((F*B-D.s)*(2*Math.PI)/D.p)}function h(D,F,B,L){return B*((D=D/L-1)*D*D+1)+F}function c(D,F,B,L){return D/=L/2,D<1?B/2*D*D*D+F:B/2*((D-=2)*D*D+2)+F}function n(D,F,B,L){return B*(D/=L)*D*D*D+F}function a(D,F,B,L){return-B*((D=D/L-1)*D*D*D-1)+F}function s(D,F,B,L){return D/=L/2,D<1?B/2*D*D*D*D+F:-B/2*((D-=2)*D*D*D-2)+F}function u(D,F,B,L){return B*(D/=L)*D*D*D*D+F}function p(D,F,B,L){return B*((D=D/L-1)*D*D*D*D+1)+F}function l(D,F,B,L){return D/=L/2,D<1?B/2*D*D*D*D*D+F:B/2*((D-=2)*D*D*D*D+2)+F}function m(D,F,B,L){return-B*Math.cos(D/L*(Math.PI/2))+B+F}function y(D,F,B,L){return B*Math.sin(D/L*(Math.PI/2))+F}function b(D,F,B,L){return-B/2*(Math.cos(Math.PI*D/L)-1)+F}function x(D,F,B,L){return D===0?F:B*Math.pow(2,10*(D/L-1))+F}function T(D,F,B,L){return D===L?F+B:B*(-Math.pow(2,-10*D/L)+1)+F}function M(D,F,B,L){return D===0?F:D===L?F+B:(D/=L/2,D<1?B/2*Math.pow(2,10*(D-1))+F:B/2*(-Math.pow(2,-10*--D)+2)+F)}function I(D,F,B,L){return-B*(Math.sqrt(1-(D/=L)*D)-1)+F}function R(D,F,B,L){return B*Math.sqrt(1-(D=D/L-1)*D)+F}function W(D,F,B,L){return D/=L/2,D<1?-B/2*(Math.sqrt(1-D*D)-1)+F:B/2*(Math.sqrt(1-(D-=2)*D)+1)+F}function K(D,F,B,L){var X=1.70158,A=0,k=B;if(D===0)return F;if(D/=L,D===1)return F+B;A||(A=L*.3);var V=g(k,B,A,X);return-o(V,D,L)+F}function $(D,F,B,L){var X=1.70158,A=0,k=B;if(D===0)return F;if(D/=L,D===1)return F+B;A||(A=L*.3);var V=g(k,B,A,X);return V.a*Math.pow(2,-10*D)*Math.sin((D*L-V.s)*(2*Math.PI)/V.p)+V.c+F}function se(D,F,B,L){var X=1.70158,A=0,k=B;if(D===0)return F;if(D/=L/2,D===2)return F+B;A||(A=L*(.3*1.5));var V=g(k,B,A,X);return D<1?-.5*o(V,D,L)+F:V.a*Math.pow(2,-10*(D-=1))*Math.sin((D*L-V.s)*(2*Math.PI)/V.p)*.5+V.c+F}function fe(D,F,B,L,X){return X===void 0&&(X=1.70158),B*(D/=L)*D*((X+1)*D-X)+F}function le(D,F,B,L,X){return X===void 0&&(X=1.70158),B*((D=D/L-1)*D*((X+1)*D+X)+1)+F}function ce(D,F,B,L,X){return X===void 0&&(X=1.70158),D/=L/2,D<1?B/2*(D*D*(((X*=1.525)+1)*D-X))+F:B/2*((D-=2)*D*(((X*=1.525)+1)*D+X)+2)+F}function _e(D,F,B,L){return B-Oe(L-D,0,B,L)+F}function Oe(D,F,B,L){return(D/=L)<1/2.75?B*(7.5625*D*D)+F:D<2/2.75?B*(7.5625*(D-=1.5/2.75)*D+.75)+F:D<2.5/2.75?B*(7.5625*(D-=2.25/2.75)*D+.9375)+F:B*(7.5625*(D-=2.625/2.75)*D+.984375)+F}function ne(D,F,B,L){return D<L/2?_e(D*2,0,B,L)*.5+F:Oe(D*2-L,0,B,L)*.5+B*.5+F}e.util.ease={easeInQuad:function(D,F,B,L){return B*(D/=L)*D+F},easeOutQuad:function(D,F,B,L){return-B*(D/=L)*(D-2)+F},easeInOutQuad:function(D,F,B,L){return D/=L/2,D<1?B/2*D*D+F:-B/2*(--D*(D-2)-1)+F},easeInCubic:function(D,F,B,L){return B*(D/=L)*D*D+F},easeOutCubic:h,easeInOutCubic:c,easeInQuart:n,easeOutQuart:a,easeInOutQuart:s,easeInQuint:u,easeOutQuint:p,easeInOutQuint:l,easeInSine:m,easeOutSine:y,easeInOutSine:b,easeInExpo:x,easeOutExpo:T,easeInOutExpo:M,easeInCirc:I,easeOutCirc:R,easeInOutCirc:W,easeInElastic:K,easeOutElastic:$,easeInOutElastic:se,easeInBack:fe,easeOutBack:le,easeInOutBack:ce,easeInBounce:_e,easeOutBounce:Oe,easeInOutBounce:ne}}(),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.util.object.clone,n=o.util.toFixed,a=o.util.parseUnit,s=o.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},x="font-size",T="clip-path";o.svgValidTagNamesRegEx=R(u),o.svgViewBoxElementsRegEx=R(p),o.svgInvalidAncestorsRegEx=R(l),o.svgValidParentsRegEx=R(m),o.cssRules={},o.gradientDefs={},o.clipPaths={};function M(A){return A in y?y[A]:A}function I(A,k,V,z){var Z=Array.isArray(k),J;if((A==="fill"||A==="stroke")&&k==="none")k="";else{if(A==="strokeUniform")return k==="non-scaling-stroke";if(A==="strokeDashArray")k==="none"?k=null:k=k.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(A==="transformMatrix")V&&V.transformMatrix?k=s(V.transformMatrix,o.parseTransformAttribute(k)):k=o.parseTransformAttribute(k);else if(A==="visible")k=k!=="none"&&k!=="hidden",V&&V.visible===!1&&(k=!1);else if(A==="opacity")k=parseFloat(k),V&&typeof V.opacity<"u"&&(k*=V.opacity);else if(A==="textAnchor")k=k==="start"?"left":k==="end"?"right":"center";else if(A==="charSpacing")J=a(k,z)/z*1e3;else if(A==="paintFirst"){var Y=k.indexOf("fill"),he=k.indexOf("stroke"),k="fill";(Y>-1&&he>-1&&he<Y||Y===-1&&he>-1)&&(k="stroke")}else{if(A==="href"||A==="xlink:href"||A==="font")return k;if(A==="imageSmoothing")return k==="optimizeQuality";J=Z?k.map(a):a(k,z)}}return!Z&&isNaN(J)?k:J}function R(A){return new RegExp("^("+A.join("|")+")\\b","i")}function W(A){for(var k in b)if(!(typeof A[b[k]]>"u"||A[k]==="")){if(typeof A[k]>"u"){if(!o.Object.prototype[k])continue;A[k]=o.Object.prototype[k]}if(A[k].indexOf("url(")!==0){var V=new o.Color(A[k]);A[k]=V.setAlpha(n(V.getAlpha()*A[b[k]],2)).toRgba()}}return A}function K(A,k){var V,z=[],Z,J,Y;for(J=0,Y=k.length;J<Y;J++)V=k[J],Z=A.getElementsByTagName(V),z=z.concat(Array.prototype.slice.call(Z));return z}o.parseTransformAttribute=function(){function A(oe,Ae){var Fe=o.util.cos(Ae[0]),Ve=o.util.sin(Ae[0]),Ge=0,et=0;Ae.length===3&&(Ge=Ae[1],et=Ae[2]),oe[0]=Fe,oe[1]=Ve,oe[2]=-Ve,oe[3]=Fe,oe[4]=Ge-(Fe*Ge-Ve*et),oe[5]=et-(Ve*Ge+Fe*et)}function k(oe,Ae){var Fe=Ae[0],Ve=Ae.length===2?Ae[1]:Ae[0];oe[0]=Fe,oe[3]=Ve}function V(oe,Ae,Fe){oe[Fe]=Math.tan(o.util.degreesToRadians(Ae[0]))}function z(oe,Ae){oe[4]=Ae[0],Ae.length===2&&(oe[5]=Ae[1])}var Z=o.iMatrix,J=o.reNum,Y=o.commaWsp,he="(?:(skewX)\\s*\\(\\s*("+J+")\\s*\\))",ie="(?:(skewY)\\s*\\(\\s*("+J+")\\s*\\))",ee="(?:(rotate)\\s*\\(\\s*("+J+")(?:"+Y+"("+J+")"+Y+"("+J+"))?\\s*\\))",Q="(?:(scale)\\s*\\(\\s*("+J+")(?:"+Y+"("+J+"))?\\s*\\))",ae="(?:(translate)\\s*\\(\\s*("+J+")(?:"+Y+"("+J+"))?\\s*\\))",de="(?:(matrix)\\s*\\(\\s*("+J+")"+Y+"("+J+")"+Y+"("+J+")"+Y+"("+J+")"+Y+"("+J+")"+Y+"("+J+")\\s*\\))",ue="(?:"+de+"|"+ae+"|"+Q+"|"+ee+"|"+he+"|"+ie+")",pe="(?:"+ue+"(?:"+Y+"*"+ue+")*)",xe="^\\s*(?:"+pe+"?)\\s*$",Ie=new RegExp(xe),Pe=new RegExp(ue,"g");return function(oe){var Ae=Z.concat(),Fe=[];if(!oe||oe&&!Ie.test(oe))return Ae;oe.replace(Pe,function(Ge){var et=new RegExp(ue).exec(Ge).filter(function(yr){return!!yr}),Mt=et[1],_t=et.slice(2).map(parseFloat);switch(Mt){case"translate":z(Ae,_t);break;case"rotate":_t[0]=o.util.degreesToRadians(_t[0]),A(Ae,_t);break;case"scale":k(Ae,_t);break;case"skewX":V(Ae,_t,2);break;case"skewY":V(Ae,_t,1);break;case"matrix":Ae=_t;break}Fe.push(Ae.concat()),Ae=Z.concat()});for(var Ve=Fe[0];Fe.length>1;)Fe.shift(),Ve=o.util.multiplyTransformMatrices(Ve,Fe[0]);return Ve}}();function $(A,k){var V,z;A.replace(/;\s*$/,"").split(";").forEach(function(Z){var J=Z.split(":");V=J[0].trim().toLowerCase(),z=J[1].trim(),k[V]=z})}function se(A,k){var V,z;for(var Z in A)typeof A[Z]>"u"||(V=Z.toLowerCase(),z=A[Z],k[V]=z)}function fe(A,k){var V={};for(var z in o.cssRules[k])if(le(A,z.split(" ")))for(var Z in o.cssRules[k][z])V[Z]=o.cssRules[k][z][Z];return V}function le(A,k){var V,z=!0;return V=_e(A,k.pop()),V&&k.length&&(z=ce(A,k)),V&&z&&k.length===0}function ce(A,k){for(var V,z=!0;A.parentNode&&A.parentNode.nodeType===1&&k.length;)z&&(V=k.pop()),A=A.parentNode,z=_e(A,V);return k.length===0}function _e(A,k){var V=A.nodeName,z=A.getAttribute("class"),Z=A.getAttribute("id"),J,Y;if(J=new RegExp("^"+V,"i"),k=k.replace(J,""),Z&&k.length&&(J=new RegExp("#"+Z+"(?![a-zA-Z\\-]+)","i"),k=k.replace(J,"")),z&&k.length)for(z=z.split(" "),Y=z.length;Y--;)J=new RegExp("\\."+z[Y]+"(?![a-zA-Z\\-]+)","i"),k=k.replace(J,"");return k.length===0}function Oe(A,k){var V;if(A.getElementById&&(V=A.getElementById(k)),V)return V;var z,Z,J,Y=A.getElementsByTagName("*");for(Z=0,J=Y.length;Z<J;Z++)if(z=Y[Z],k===z.getAttribute("id"))return z}function ne(A){for(var k=K(A,["use","svg:use"]),V=0;k.length&&V<k.length;){var z=k[V],Z=z.getAttribute("xlink:href")||z.getAttribute("href");if(Z===null)return;var J=Z.slice(1),Y=z.getAttribute("x")||0,he=z.getAttribute("y")||0,ie=Oe(A,J).cloneNode(!0),ee=(ie.getAttribute("transform")||"")+" translate("+Y+", "+he+")",Q,ae=k.length,de,ue,pe,xe,Ie=o.svgNS;if(F(ie),/^svg$/i.test(ie.nodeName)){var Pe=ie.ownerDocument.createElementNS(Ie,"g");for(ue=0,pe=ie.attributes,xe=pe.length;ue<xe;ue++)de=pe.item(ue),Pe.setAttributeNS(Ie,de.nodeName,de.nodeValue);for(;ie.firstChild;)Pe.appendChild(ie.firstChild);ie=Pe}for(ue=0,pe=z.attributes,xe=pe.length;ue<xe;ue++)de=pe.item(ue),!(de.nodeName==="x"||de.nodeName==="y"||de.nodeName==="xlink:href"||de.nodeName==="href")&&(de.nodeName==="transform"?ee=de.nodeValue+" "+ee:ie.setAttribute(de.nodeName,de.nodeValue));ie.setAttribute("transform",ee),ie.setAttribute("instantiated_by_use","1"),ie.removeAttribute("id"),Q=z.parentNode,Q.replaceChild(ie,z),k.length===ae&&V++}}var D=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function F(A){if(!o.svgViewBoxElementsRegEx.test(A.nodeName))return{};var k=A.getAttribute("viewBox"),V=1,z=1,Z=0,J=0,Y,he,ie,ee,Q=A.getAttribute("width"),ae=A.getAttribute("height"),de=A.getAttribute("x")||0,ue=A.getAttribute("y")||0,pe=A.getAttribute("preserveAspectRatio")||"",xe=!k||!(k=k.match(D)),Ie=!Q||!ae||Q==="100%"||ae==="100%",Pe=xe&&Ie,oe={},Ae="",Fe=0,Ve=0;if(oe.width=0,oe.height=0,oe.toBeParsed=Pe,xe&&(de||ue)&&A.parentNode&&A.parentNode.nodeName!=="#document"&&(Ae=" translate("+a(de)+" "+a(ue)+") ",ie=(A.getAttribute("transform")||"")+Ae,A.setAttribute("transform",ie),A.removeAttribute("x"),A.removeAttribute("y")),Pe)return oe;if(xe)return oe.width=a(Q),oe.height=a(ae),oe;if(Z=-parseFloat(k[1]),J=-parseFloat(k[2]),Y=parseFloat(k[3]),he=parseFloat(k[4]),oe.minX=Z,oe.minY=J,oe.viewBoxWidth=Y,oe.viewBoxHeight=he,Ie?(oe.width=Y,oe.height=he):(oe.width=a(Q),oe.height=a(ae),V=oe.width/Y,z=oe.height/he),pe=o.util.parsePreserveAspectRatioAttribute(pe),pe.alignX!=="none"&&(pe.meetOrSlice==="meet"&&(z=V=V>z?z:V),pe.meetOrSlice==="slice"&&(z=V=V>z?V:z),Fe=oe.width-Y*V,Ve=oe.height-he*V,pe.alignX==="Mid"&&(Fe/=2),pe.alignY==="Mid"&&(Ve/=2),pe.alignX==="Min"&&(Fe=0),pe.alignY==="Min"&&(Ve=0)),V===1&&z===1&&Z===0&&J===0&&de===0&&ue===0)return oe;if((de||ue)&&A.parentNode.nodeName!=="#document"&&(Ae=" translate("+a(de)+" "+a(ue)+") "),ie=Ae+" matrix("+V+" 0 0 "+z+" "+(Z*V+Fe)+" "+(J*z+Ve)+") ",A.nodeName==="svg"){for(ee=A.ownerDocument.createElementNS(o.svgNS,"g");A.firstChild;)ee.appendChild(A.firstChild);A.appendChild(ee)}else ee=A,ee.removeAttribute("x"),ee.removeAttribute("y"),ie=ee.getAttribute("transform")+ie;return ee.setAttribute("transform",ie),oe}function B(A,k){for(;A&&(A=A.parentNode);)if(A.nodeName&&k.test(A.nodeName.replace("svg:",""))&&!A.getAttribute("instantiated_by_use"))return!0;return!1}o.parseSVGDocument=function(A,k,V,z){if(A){ne(A);var Z=o.Object.__uid++,J,Y,he=F(A),ie=o.util.toArray(A.getElementsByTagName("*"));if(he.crossOrigin=z&&z.crossOrigin,he.svgUid=Z,ie.length===0&&o.isLikelyNode){ie=A.selectNodes('//*[name(.)!="svg"]');var ee=[];for(J=0,Y=ie.length;J<Y;J++)ee[J]=ie[J];ie=ee}var Q=ie.filter(function(de){return F(de),o.svgValidTagNamesRegEx.test(de.nodeName.replace("svg:",""))&&!B(de,o.svgInvalidAncestorsRegEx)});if(!Q||Q&&!Q.length){k&&k([],{});return}var ae={};ie.filter(function(de){return de.nodeName.replace("svg:","")==="clipPath"}).forEach(function(de){var ue=de.getAttribute("id");ae[ue]=o.util.toArray(de.getElementsByTagName("*")).filter(function(pe){return o.svgValidTagNamesRegEx.test(pe.nodeName.replace("svg:",""))})}),o.gradientDefs[Z]=o.getGradientDefs(A),o.cssRules[Z]=o.getCSSRules(A),o.clipPaths[Z]=ae,o.parseElements(Q,function(de,ue){k&&(k(de,he,ue,ie),delete o.gradientDefs[Z],delete o.cssRules[Z],delete o.clipPaths[Z])},c(he),V,z)}};function L(A,k){var V=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],z="xlink:href",Z=k.getAttribute(z).slice(1),J=Oe(A,Z);if(J&&J.getAttribute(z)&&L(A,J),V.forEach(function(he){J&&!k.hasAttribute(he)&&J.hasAttribute(he)&&k.setAttribute(he,J.getAttribute(he))}),!k.children.length)for(var Y=J.cloneNode(!0);Y.firstChild;)k.appendChild(Y.firstChild);k.removeAttribute(z)}var X=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");h(o,{parseFontDeclaration:function(A,k){var V=A.match(X);if(V){var z=V[1],Z=V[3],J=V[4],Y=V[5],he=V[6];z&&(k.fontStyle=z),Z&&(k.fontWeight=isNaN(parseFloat(Z))?Z:parseFloat(Z)),J&&(k.fontSize=a(J)),he&&(k.fontFamily=he),Y&&(k.lineHeight=Y==="normal"?1:Y)}},getGradientDefs:function(A){var k=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],V=K(A,k),z,Z=0,J={};for(Z=V.length;Z--;)z=V[Z],z.getAttribute("xlink:href")&&L(A,z),J[z.getAttribute("id")]=z;return J},parseAttributes:function(A,k,V){if(A){var z,Z={},J,Y;typeof V>"u"&&(V=A.getAttribute("svgUid")),A.parentNode&&o.svgValidParentsRegEx.test(A.parentNode.nodeName)&&(Z=o.parseAttributes(A.parentNode,k,V));var he=k.reduce(function(pe,xe){return z=A.getAttribute(xe),z&&(pe[xe]=z),pe},{}),ie=h(fe(A,V),o.parseStyleAttribute(A));he=h(he,ie),ie[T]&&A.setAttribute(T,ie[T]),J=Y=Z.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,he[x]&&(he[x]=J=a(he[x],Y));var ee,Q,ae={};for(var de in he)ee=M(de),Q=I(ee,he[de],Z,J),ae[ee]=Q;ae&&ae.font&&o.parseFontDeclaration(ae.font,ae);var ue=h(Z,ae);return o.svgValidParentsRegEx.test(A.nodeName)?ue:W(ue)}},parseElements:function(A,k,V,z,Z){new o.ElementsParser(A,k,V,z,Z).parse()},parseStyleAttribute:function(A){var k={},V=A.getAttribute("style");return V&&(typeof V=="string"?$(V,k):se(V,k)),k},parsePointsAttribute:function(A){if(!A)return null;A=A.replace(/,/g," ").trim(),A=A.split(/\s+/);var k=[],V,z;for(V=0,z=A.length;V<z;V+=2)k.push({x:parseFloat(A[V]),y:parseFloat(A[V+1])});return k},getCSSRules:function(A){var k=A.getElementsByTagName("style"),V,z,Z={},J;for(V=0,z=k.length;V<z;V++){var Y=k[V].textContent;Y=Y.replace(/\/\*[\s\S]*?\*\//g,""),Y.trim()!==""&&(J=Y.split("}"),J=J.filter(function(he){return he.trim()}),J.forEach(function(he){var ie=he.split("{"),ee={},Q=ie[1].trim(),ae=Q.split(";").filter(function(xe){return xe.trim()});for(V=0,z=ae.length;V<z;V++){var de=ae[V].split(":"),ue=de[0].trim(),pe=de[1].trim();ee[ue]=pe}he=ie[0].trim(),he.split(",").forEach(function(xe){xe=xe.replace(/^svg/i,"").trim(),xe!==""&&(Z[xe]?o.util.object.extend(Z[xe],ee):Z[xe]=o.util.object.clone(ee))})}))}return Z},loadSVGFromURL:function(A,k,V,z){A=A.replace(/^\n\s*/,"").trim(),new o.util.request(A,{method:"get",onComplete:Z});function Z(J){var Y=J.responseXML;if(!Y||!Y.documentElement)return k&&k(null),!1;o.parseSVGDocument(Y.documentElement,function(he,ie,ee,Q){k&&k(he,ie,ee,Q)},V,z)}},loadSVGFromString:function(A,k,V,z){var Z=new o.window.DOMParser,J=Z.parseFromString(A.trim(),"text/xml");o.parseSVGDocument(J.documentElement,function(Y,he,ie,ee){k(Y,he,ie,ee)},V,z)}})}(t),e.ElementsParser=function(g,o,h,c,n,a){this.elements=g,this.callback=o,this.options=h,this.reviver=c,this.svgUid=h&&h.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var o=this;this.elements.forEach(function(h,c){h.setAttribute("svgUid",o.svgUid),o.createObject(h,c)})},g.findTag=function(o){return e[e.util.string.capitalize(o.tagName.replace("svg:",""))]},g.createObject=function(o,h){var c=this.findTag(o);if(c&&c.fromElement)try{c.fromElement(o,this.createCallback(h,o),this.options)}catch(n){e.log(n)}else this.checkIfDone()},g.createCallback=function(o,h){var c=this;return function(n){var a;c.resolveGradient(n,h,"fill"),c.resolveGradient(n,h,"stroke"),n instanceof e.Image&&n._originalElement&&(a=n.parsePreserveAspectRatioAttribute(h)),n._removeTransformMatrix(a),c.resolveClipPath(n,h),c.reviver&&c.reviver(h,n),c.instances[o]=n,c.checkIfDone()}},g.extractPropertyDefinition=function(o,h,c){var n=o[h],a=this.regexUrl;if(a.test(n)){a.lastIndex=0;var s=a.exec(n)[1];return a.lastIndex=0,e[c][this.svgUid][s]}},g.resolveGradient=function(o,h,c){var n=this.extractPropertyDefinition(o,c,"gradientDefs");if(n){var a=h.getAttribute(c+"-opacity"),s=e.Gradient.fromElement(n,o,a,this.options);o.set(c,s)}},g.createClipPathCallback=function(o,h){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,h.push(c)}},g.resolveClipPath=function(o,h){var c=this.extractPropertyDefinition(o,"clipPath","clipPaths"),n,a,s,u,p,l;if(c){u=[],s=e.util.invertTransform(o.calcTransformMatrix());for(var m=c[0].parentNode,y=h;y.parentNode&&y.getAttribute("clip-path")!==o.clipPath;)y=y.parentNode;y.parentNode.appendChild(m);for(var b=0;b<c.length;b++)n=c[b],a=this.findTag(n),a.fromElement(n,this.createClipPathCallback(o,u),this.options);u.length===1?c=u[0]:c=new e.Group(u),p=e.util.multiplyTransformMatrices(s,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,y);var l=e.util.qrDecompose(p);c.flipX=!1,c.flipY=!1,c.set("scaleX",l.scaleX),c.set("scaleY",l.scaleY),c.angle=l.angle,c.skewX=l.skewX,c.skewY=0,c.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),o.clipPath=c}else delete o.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(o){return o!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(g){var o=g.fabric||(g.fabric={});if(o.Point){o.warn("fabric.Point is already defined");return}o.Point=h;function h(c,n){this.x=c,this.y=n}h.prototype={type:"point",constructor:h,add:function(c){return new h(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new h(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new h(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new h(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new h(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new h(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,n){return typeof n>"u"&&(n=.5),n=Math.max(Math.min(1,n),0),new h(this.x+(c.x-this.x)*n,this.y+(c.y-this.y)*n)},distanceFrom:function(c){var n=this.x-c.x,a=this.y-c.y;return Math.sqrt(n*n+a*a)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new h(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new h(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,n){return this.x=c,this.y=n,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var n=this.x,a=this.y;this.x=c.x,this.y=c.y,c.x=n,c.y=a},clone:function(){return new h(this.x,this.y)}}}(t),function(g){var o=g.fabric||(g.fabric={});if(o.Intersection){o.warn("fabric.Intersection is already defined");return}function h(c){this.status=c,this.points=[]}o.Intersection=h,o.Intersection.prototype={constructor:h,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},o.Intersection.intersectLineLine=function(c,n,a,s){var u,p=(s.x-a.x)*(c.y-a.y)-(s.y-a.y)*(c.x-a.x),l=(n.x-c.x)*(c.y-a.y)-(n.y-c.y)*(c.x-a.x),m=(s.y-a.y)*(n.x-c.x)-(s.x-a.x)*(n.y-c.y);if(m!==0){var y=p/m,b=l/m;0<=y&&y<=1&&0<=b&&b<=1?(u=new h("Intersection"),u.appendPoint(new o.Point(c.x+y*(n.x-c.x),c.y+y*(n.y-c.y)))):u=new h}else p===0||l===0?u=new h("Coincident"):u=new h("Parallel");return u},o.Intersection.intersectLinePolygon=function(c,n,a){var s=new h,u=a.length,p,l,m,y;for(y=0;y<u;y++)p=a[y],l=a[(y+1)%u],m=h.intersectLineLine(c,n,p,l),s.appendPoints(m.points);return s.points.length>0&&(s.status="Intersection"),s},o.Intersection.intersectPolygonPolygon=function(c,n){var a=new h,s=c.length,u;for(u=0;u<s;u++){var p=c[u],l=c[(u+1)%s],m=h.intersectLinePolygon(p,l,n);a.appendPoints(m.points)}return a.points.length>0&&(a.status="Intersection"),a},o.Intersection.intersectPolygonRectangle=function(c,n,a){var s=n.min(a),u=n.max(a),p=new o.Point(u.x,s.y),l=new o.Point(s.x,u.y),m=h.intersectLinePolygon(s,p,c),y=h.intersectLinePolygon(p,u,c),b=h.intersectLinePolygon(u,l,c),x=h.intersectLinePolygon(l,s,c),T=new h;return T.appendPoints(m.points),T.appendPoints(y.points),T.appendPoints(b.points),T.appendPoints(x.points),T.points.length>0&&(T.status="Intersection"),T}}(t),function(g){var o=g.fabric||(g.fabric={});if(o.Color){o.warn("fabric.Color is already defined.");return}function h(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}o.Color=h,o.Color.prototype={_tryParsingColor:function(n){var a;n in h.colorNameMap&&(n=h.colorNameMap[n]),n==="transparent"&&(a=[255,255,255,0]),a||(a=h.sourceFromHex(n)),a||(a=h.sourceFromRgb(n)),a||(a=h.sourceFromHsl(n)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(n,a,s){n/=255,a/=255,s/=255;var u,p,l,m=o.util.array.max([n,a,s]),y=o.util.array.min([n,a,s]);if(l=(m+y)/2,m===y)u=p=0;else{var b=m-y;switch(p=l>.5?b/(2-m-y):b/(m+y),m){case n:u=(a-s)/b+(a<s?6:0);break;case a:u=(s-n)/b+2;break;case s:u=(n-a)/b+4;break}u/=6}return[Math.round(u*360),Math.round(p*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),a=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var n=this.getSource(),a=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),a,s,u;return a=n[0].toString(16),a=a.length===1?"0"+a:a,s=n[1].toString(16),s=s.length===1?"0"+s:s,u=n[2].toString(16),u=u.length===1?"0"+u:u,a.toUpperCase()+s.toUpperCase()+u.toUpperCase()},toHexa:function(){var n=this.getSource(),a;return a=Math.round(n[3]*255),a=a.toString(16),a=a.length===1?"0"+a:a,this.toHex()+a.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var a=this.getSource();return a[3]=n,this.setSource(a),this},toGrayscale:function(){var n=this.getSource(),a=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),s=n[3];return this.setSource([a,a,a,s]),this},toBlackWhite:function(n){var a=this.getSource(),s=(a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),u=a[3];return n=n||127,s=Number(s)<Number(n)?0:255,this.setSource([s,s,s,u]),this},overlayWith:function(n){n instanceof h||(n=new h(n));var a=[],s=this.getAlpha(),u=.5,p=this.getSource(),l=n.getSource(),m;for(m=0;m<3;m++)a.push(Math.round(p[m]*(1-u)+l[m]*u));return a[3]=s,this.setSource(a),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(n,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(a-n)*6*s:s<1/2?a:s<2/3?n+(a-n)*(2/3-s)*6:n}o.Color.fromRgb=function(n){return h.fromSource(h.sourceFromRgb(n))},o.Color.sourceFromRgb=function(n){var a=n.match(h.reRGBa);if(a){var s=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),u=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),p=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(s,10),parseInt(u,10),parseInt(p,10),a[4]?parseFloat(a[4]):1]}},o.Color.fromRgba=h.fromRgb,o.Color.fromHsl=function(n){return h.fromSource(h.sourceFromHsl(n))},o.Color.sourceFromHsl=function(n){var a=n.match(h.reHSLa);if(a){var s=(parseFloat(a[1])%360+360)%360/360,u=parseFloat(a[2])/(/%$/.test(a[2])?100:1),p=parseFloat(a[3])/(/%$/.test(a[3])?100:1),l,m,y;if(u===0)l=m=y=p;else{var b=p<=.5?p*(u+1):p+u-p*u,x=p*2-b;l=c(x,b,s+1/3),m=c(x,b,s),y=c(x,b,s-1/3)}return[Math.round(l*255),Math.round(m*255),Math.round(y*255),a[4]?parseFloat(a[4]):1]}},o.Color.fromHsla=h.fromHsl,o.Color.fromHex=function(n){return h.fromSource(h.sourceFromHex(n))},o.Color.sourceFromHex=function(n){if(n.match(h.reHex)){var a=n.slice(n.indexOf("#")+1),s=a.length===3||a.length===4,u=a.length===8||a.length===4,p=s?a.charAt(0)+a.charAt(0):a.substring(0,2),l=s?a.charAt(1)+a.charAt(1):a.substring(2,4),m=s?a.charAt(2)+a.charAt(2):a.substring(4,6),y=u?s?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(p,16),parseInt(l,16),parseInt(m,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},o.Color.fromSource=function(n){var a=new h;return a.setSource(n),a}}(t),function(g){var o=g.fabric||(g.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],n={},a="left",s="top",u="right",p="bottom",l="center",m={top:p,bottom:s,left:u,right:a,center:l},y=o.util.radiansToDegrees,b=Math.sign||function(ee){return(ee>0)-(ee<0)||+ee};function x(ee,Q){var ae=ee.angle+y(Math.atan2(Q.y,Q.x))+360;return Math.round(ae%360/45)}function T(ee,Q){var ae=Q.transform.target,de=ae.canvas,ue=o.util.object.clone(Q);ue.target=ae,de&&de.fire("object:"+ee,ue),ae.fire(ee,Q)}function M(ee,Q){var ae=Q.canvas,de=ae.uniScaleKey,ue=ee[de];return ae.uniformScaling&&!ue||!ae.uniformScaling&&ue}function I(ee){return ee.originX===l&&ee.originY===l}function R(ee,Q,ae){var de=ee.lockScalingX,ue=ee.lockScalingY;return!!(de&&ue||!Q&&(de||ue)&&ae||de&&Q==="x"||ue&&Q==="y")}function W(ee,Q,ae){var de="not-allowed",ue=M(ee,ae),pe="";if(Q.x!==0&&Q.y===0?pe="x":Q.x===0&&Q.y!==0&&(pe="y"),R(ae,pe,ue))return de;var xe=x(ae,Q);return h[xe]+"-resize"}function K(ee,Q,ae){var de="not-allowed";if(Q.x!==0&&ae.lockSkewingY||Q.y!==0&&ae.lockSkewingX)return de;var ue=x(ae,Q)%4;return c[ue]+"-resize"}function $(ee,Q,ae){return ee[ae.canvas.altActionKey]?n.skewCursorStyleHandler(ee,Q,ae):n.scaleCursorStyleHandler(ee,Q,ae)}function se(ee,Q,ae){var de=ee[ae.canvas.altActionKey];if(Q.x===0)return de?"skewX":"scaleY";if(Q.y===0)return de?"skewY":"scaleX"}function fe(ee,Q,ae){return ae.lockRotation?"not-allowed":Q.cursorStyle}function le(ee,Q,ae,de){return{e:ee,transform:Q,pointer:{x:ae,y:de}}}function ce(ee){return function(Q,ae,de,ue){var pe=ae.target,xe=pe.getCenterPoint(),Ie=pe.translateToOriginPoint(xe,ae.originX,ae.originY),Pe=ee(Q,ae,de,ue);return pe.setPositionByOrigin(Ie,ae.originX,ae.originY),Pe}}function _e(ee,Q){return function(ae,de,ue,pe){var xe=Q(ae,de,ue,pe);return xe&&T(ee,le(ae,de,ue,pe)),xe}}function Oe(ee,Q,ae,de,ue){var pe=ee.target,xe=pe.controls[ee.corner],Ie=pe.canvas.getZoom(),Pe=pe.padding/Ie,oe=pe.toLocalPoint(new o.Point(de,ue),Q,ae);return oe.x>=Pe&&(oe.x-=Pe),oe.x<=-Pe&&(oe.x+=Pe),oe.y>=Pe&&(oe.y-=Pe),oe.y<=Pe&&(oe.y+=Pe),oe.x-=xe.offsetX,oe.y-=xe.offsetY,oe}function ne(ee){return ee.flipX!==ee.flipY}function D(ee,Q,ae,de,ue){if(ee[Q]!==0){var pe=ee._getTransformedDimensions()[de],xe=ue/pe*ee[ae];ee.set(ae,xe)}}function F(ee,Q,ae,de){var ue=Q.target,pe=ue._getTransformedDimensions(0,ue.skewY),xe=Oe(Q,Q.originX,Q.originY,ae,de),Ie=Math.abs(xe.x*2)-pe.x,Pe=ue.skewX,oe;Ie<2?oe=0:(oe=y(Math.atan2(Ie/ue.scaleX,pe.y/ue.scaleY)),Q.originX===a&&Q.originY===p&&(oe=-oe),Q.originX===u&&Q.originY===s&&(oe=-oe),ne(ue)&&(oe=-oe));var Ae=Pe!==oe;if(Ae){var Fe=ue._getTransformedDimensions().y;ue.set("skewX",oe),D(ue,"skewY","scaleY","y",Fe)}return Ae}function B(ee,Q,ae,de){var ue=Q.target,pe=ue._getTransformedDimensions(ue.skewX,0),xe=Oe(Q,Q.originX,Q.originY,ae,de),Ie=Math.abs(xe.y*2)-pe.y,Pe=ue.skewY,oe;Ie<2?oe=0:(oe=y(Math.atan2(Ie/ue.scaleY,pe.x/ue.scaleX)),Q.originX===a&&Q.originY===p&&(oe=-oe),Q.originX===u&&Q.originY===s&&(oe=-oe),ne(ue)&&(oe=-oe));var Ae=Pe!==oe;if(Ae){var Fe=ue._getTransformedDimensions().x;ue.set("skewY",oe),D(ue,"skewX","scaleX","x",Fe)}return Ae}function L(ee,Q,ae,de){var ue=Q.target,pe=ue.skewX,xe,Ie=Q.originY;if(ue.lockSkewingX)return!1;if(pe===0){var Pe=Oe(Q,l,l,ae,de);Pe.x>0?xe=a:xe=u}else pe>0&&(xe=Ie===s?a:u),pe<0&&(xe=Ie===s?u:a),ne(ue)&&(xe=xe===a?u:a);Q.originX=xe;var oe=_e("skewing",ce(F));return oe(ee,Q,ae,de)}function X(ee,Q,ae,de){var ue=Q.target,pe=ue.skewY,xe,Ie=Q.originX;if(ue.lockSkewingY)return!1;if(pe===0){var Pe=Oe(Q,l,l,ae,de);Pe.y>0?xe=s:xe=p}else pe>0&&(xe=Ie===a?s:p),pe<0&&(xe=Ie===a?p:s),ne(ue)&&(xe=xe===s?p:s);Q.originY=xe;var oe=_e("skewing",ce(B));return oe(ee,Q,ae,de)}function A(ee,Q,ae,de){var ue=Q,pe=ue.target,xe=pe.translateToOriginPoint(pe.getCenterPoint(),ue.originX,ue.originY);if(pe.lockRotation)return!1;var Ie=Math.atan2(ue.ey-xe.y,ue.ex-xe.x),Pe=Math.atan2(de-xe.y,ae-xe.x),oe=y(Pe-Ie+ue.theta),Ae=!0;if(pe.snapAngle>0){var Fe=pe.snapAngle,Ve=pe.snapThreshold||Fe,Ge=Math.ceil(oe/Fe)*Fe,et=Math.floor(oe/Fe)*Fe;Math.abs(oe-et)<Ve?oe=et:Math.abs(oe-Ge)<Ve&&(oe=Ge)}return oe<0&&(oe=360+oe),oe%=360,Ae=pe.angle!==oe,pe.angle=oe,Ae}function k(ee,Q,ae,de,ue){ue=ue||{};var pe=Q.target,xe=pe.lockScalingX,Ie=pe.lockScalingY,Pe=ue.by,oe,Ae,Fe,Ve,Ge=M(ee,pe),et=R(pe,Pe,Ge),Mt,_t,yr=Q.gestureScale;if(et)return!1;if(yr)Ae=Q.scaleX*yr,Fe=Q.scaleY*yr;else{if(oe=Oe(Q,Q.originX,Q.originY,ae,de),Mt=Pe!=="y"?b(oe.x):1,_t=Pe!=="x"?b(oe.y):1,Q.signX||(Q.signX=Mt),Q.signY||(Q.signY=_t),pe.lockScalingFlip&&(Q.signX!==Mt||Q.signY!==_t))return!1;if(Ve=pe._getTransformedDimensions(),Ge&&!Pe){var zr=Math.abs(oe.x)+Math.abs(oe.y),Kt=Q.original,li=Math.abs(Ve.x*Kt.scaleX/pe.scaleX)+Math.abs(Ve.y*Kt.scaleY/pe.scaleY),Mn=zr/li;Ae=Kt.scaleX*Mn,Fe=Kt.scaleY*Mn}else Ae=Math.abs(oe.x*pe.scaleX/Ve.x),Fe=Math.abs(oe.y*pe.scaleY/Ve.y);I(Q)&&(Ae*=2,Fe*=2),Q.signX!==Mt&&Pe!=="y"&&(Q.originX=m[Q.originX],Ae*=-1,Q.signX=Mt),Q.signY!==_t&&Pe!=="x"&&(Q.originY=m[Q.originY],Fe*=-1,Q.signY=_t)}var ci=pe.scaleX,jo=pe.scaleY;return Pe?(Pe==="x"&&pe.set("scaleX",Ae),Pe==="y"&&pe.set("scaleY",Fe)):(!xe&&pe.set("scaleX",Ae),!Ie&&pe.set("scaleY",Fe)),ci!==pe.scaleX||jo!==pe.scaleY}function V(ee,Q,ae,de){return k(ee,Q,ae,de)}function z(ee,Q,ae,de){return k(ee,Q,ae,de,{by:"x"})}function Z(ee,Q,ae,de){return k(ee,Q,ae,de,{by:"y"})}function J(ee,Q,ae,de){return ee[Q.target.canvas.altActionKey]?n.skewHandlerX(ee,Q,ae,de):n.scalingY(ee,Q,ae,de)}function Y(ee,Q,ae,de){return ee[Q.target.canvas.altActionKey]?n.skewHandlerY(ee,Q,ae,de):n.scalingX(ee,Q,ae,de)}function he(ee,Q,ae,de){var ue=Q.target,pe=Oe(Q,Q.originX,Q.originY,ae,de),xe=ue.strokeWidth/(ue.strokeUniform?ue.scaleX:1),Ie=I(Q)?2:1,Pe=ue.width,oe=Math.abs(pe.x*Ie/ue.scaleX)-xe;return ue.set("width",Math.max(oe,0)),Pe!==oe}function ie(ee,Q,ae,de){var ue=Q.target,pe=ae-Q.offsetX,xe=de-Q.offsetY,Ie=!ue.get("lockMovementX")&&ue.left!==pe,Pe=!ue.get("lockMovementY")&&ue.top!==xe;return Ie&&ue.set("left",pe),Pe&&ue.set("top",xe),(Ie||Pe)&&T("moving",le(ee,Q,ae,de)),Ie||Pe}n.scaleCursorStyleHandler=W,n.skewCursorStyleHandler=K,n.scaleSkewCursorStyleHandler=$,n.rotationWithSnapping=_e("rotating",ce(A)),n.scalingEqually=_e("scaling",ce(V)),n.scalingX=_e("scaling",ce(z)),n.scalingY=_e("scaling",ce(Z)),n.scalingYOrSkewingX=J,n.scalingXOrSkewingY=Y,n.changeWidth=_e("resizing",ce(he)),n.skewHandlerX=L,n.skewHandlerY=X,n.dragHandler=ie,n.scaleOrSkewActionName=se,n.rotationStyleHandler=fe,n.fireEvent=T,n.wrapWithFixedAnchor=ce,n.wrapWithFireEvent=_e,n.getLocalPoint=Oe,o.controlsUtils=n}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.degreesToRadians,c=o.controlsUtils;function n(s,u,p,l,m){l=l||{};var y=this.sizeX||l.cornerSize||m.cornerSize,b=this.sizeY||l.cornerSize||m.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:m.transparentCorners,T=x?"stroke":"fill",M=!x&&(l.cornerStrokeColor||m.cornerStrokeColor),I=u,R=p,W;s.save(),s.fillStyle=l.cornerColor||m.cornerColor,s.strokeStyle=l.cornerStrokeColor||m.cornerStrokeColor,y>b?(W=y,s.scale(1,b/y),R=p*y/b):b>y?(W=b,s.scale(y/b,1),I=u*b/y):W=y,s.lineWidth=1,s.beginPath(),s.arc(I,R,W/2,0,2*Math.PI,!1),s[T](),M&&s.stroke(),s.restore()}function a(s,u,p,l,m){l=l||{};var y=this.sizeX||l.cornerSize||m.cornerSize,b=this.sizeY||l.cornerSize||m.cornerSize,x=typeof l.transparentCorners<"u"?l.transparentCorners:m.transparentCorners,T=x?"stroke":"fill",M=!x&&(l.cornerStrokeColor||m.cornerStrokeColor),I=y/2,R=b/2;s.save(),s.fillStyle=l.cornerColor||m.cornerColor,s.strokeStyle=l.cornerStrokeColor||m.cornerStrokeColor,s.lineWidth=1,s.translate(u,p),s.rotate(h(m.angle)),s[T+"Rect"](-I,-R,y,b),M&&s.strokeRect(-I,-R,y,b),s.restore()}c.renderCircleControl=n,c.renderSquareControl=a}(t),function(g){var o=g.fabric||(g.fabric={});function h(c){for(var n in c)this[n]=c[n]}o.Control=h,o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,n){return n.cursorStyle},getActionName:function(c,n){return n.actionName},getVisibility:function(c,n){var a=c._controlsVisibility;return a&&typeof a[n]<"u"?a[n]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,n){var a=o.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},n);return a},calcCornerCoords:function(c,n,a,s,u){var p,l,m,y,b=u?this.touchSizeX:this.sizeX,x=u?this.touchSizeY:this.sizeY;if(b&&x&&b!==x){var T=Math.atan2(x,b),M=Math.sqrt(b*b+x*x)/2,I=T-o.util.degreesToRadians(c),R=Math.PI/2-T-o.util.degreesToRadians(c);p=M*o.util.cos(I),l=M*o.util.sin(I),m=M*o.util.cos(R),y=M*o.util.sin(R)}else{var W=b&&x?b:n;M=W*.7071067812;var I=o.util.degreesToRadians(45-c);p=m=M*o.util.cos(I),l=y=M*o.util.sin(I)}return{tl:{x:a-y,y:s-m},tr:{x:a+p,y:s-l},bl:{x:a-p,y:s+l},br:{x:a+y,y:s+m}}},render:function(c,n,a,s,u){switch(s=s||{},s.cornerStyle||u.cornerStyle){case"circle":o.controlsUtils.renderCircleControl.call(this,c,n,a,s,u);break;default:o.controlsUtils.renderSquareControl.call(this,c,n,a,s,u)}}}}(t),function(){function g(a,s){var u=a.getAttribute("style"),p=a.getAttribute("offset")||0,l,m,y,b;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,u){var x=u.split(/\s*;\s*/);for(x[x.length-1]===""&&x.pop(),b=x.length;b--;){var T=x[b].split(/\s*:\s*/),M=T[0].trim(),I=T[1].trim();M==="stop-color"?l=I:M==="stop-opacity"&&(y=I)}}return l||(l=a.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=a.getAttribute("stop-opacity")),l=new e.Color(l),m=l.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=m*s,{offset:p,color:l.toRgb(),opacity:y}}function o(a){return{x1:a.getAttribute("x1")||0,y1:a.getAttribute("y1")||0,x2:a.getAttribute("x2")||"100%",y2:a.getAttribute("y2")||0}}function h(a){return{x1:a.getAttribute("fx")||a.getAttribute("cx")||"50%",y1:a.getAttribute("fy")||a.getAttribute("cy")||"50%",r1:0,x2:a.getAttribute("cx")||"50%",y2:a.getAttribute("cy")||"50%",r2:a.getAttribute("r")||"50%"}}var c=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(a){a||(a={}),a.coords||(a.coords={});var s,u=this;Object.keys(a).forEach(function(p){u[p]=a[p]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,s={x1:a.coords.x1||0,y1:a.coords.y1||0,x2:a.coords.x2||0,y2:a.coords.y2||0},this.type==="radial"&&(s.r1=a.coords.r1||0,s.r2=a.coords.r2||0),this.coords=s,this.colorStops=a.colorStops.slice()},addColorStop:function(a){for(var s in a){var u=new e.Color(a[s]);this.colorStops.push({offset:parseFloat(s),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(a){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,s,a),s},toSVG:function(a,m){var u=c(this.coords,!0),p,l,m=m||{},y,b,x=c(this.colorStops,!0),T=u.r1>u.r2,M=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),I=-this.offsetX,R=-this.offsetY,W=!!m.additionalTransform,K=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(x.sort(function(ce,_e){return ce.offset-_e.offset}),K==="objectBoundingBox"?(I/=a.width,R/=a.height):(I+=a.width/2,R+=a.height/2),a.type==="path"&&this.gradientUnits!=="percentage"&&(I-=a.pathOffset.x,R-=a.pathOffset.y),M[4]-=I,M[5]-=R,b='id="SVGID_'+this.id+'" gradientUnits="'+K+'"',b+=' gradientTransform="'+(W?m.additionalTransform+" ":"")+e.util.matrixToSVG(M)+'" ',this.type==="linear"?y=["<linearGradient ",b,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",b,' cx="',T?u.x1:u.x2,'" cy="',T?u.y1:u.y2,'" r="',T?u.r1:u.r2,'" fx="',T?u.x2:u.x1,'" fy="',T?u.y2:u.y1,`">
`]),this.type==="radial"){if(T)for(x=x.concat(),x.reverse(),p=0,l=x.length;p<l;p++)x[p].offset=1-x[p].offset;var $=Math.min(u.r1,u.r2);if($>0){var se=Math.max(u.r1,u.r2),fe=$/se;for(p=0,l=x.length;p<l;p++)x[p].offset+=fe*(1-x[p].offset)}}for(p=0,l=x.length;p<l;p++){var le=x[p];y.push("<stop ",'offset="',le.offset*100+"%",'" style="stop-color:',le.color,typeof le.opacity<"u"?";stop-opacity: "+le.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(a){var s,u=e.util.object.clone(this.coords),p,l;if(this.type){for(this.type==="linear"?s=a.createLinearGradient(u.x1,u.y1,u.x2,u.y2):this.type==="radial"&&(s=a.createRadialGradient(u.x1,u.y1,u.r1,u.x2,u.y2,u.r2)),p=0,l=this.colorStops.length;p<l;p++){var m=this.colorStops[p].color,y=this.colorStops[p].opacity,b=this.colorStops[p].offset;typeof y<"u"&&(m=new e.Color(m).setAlpha(y).toRgba()),s.addColorStop(b,m)}return s}}}),e.util.object.extend(e.Gradient,{fromElement:function(a,s,u,p){var l=parseFloat(u)/(/%$/.test(u)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var m=a.getElementsByTagName("stop"),y,b=a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",x=a.getAttribute("gradientTransform")||"",T=[],M,I,R=0,W=0,K;for(a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?(y="linear",M=o(a)):(y="radial",M=h(a)),I=m.length;I--;)T.push(g(m[I],l));K=e.parseTransformAttribute(x),n(s,M,p,b),b==="pixels"&&(R=-s.left,W=-s.top);var $=new e.Gradient({id:a.getAttribute("id"),type:y,coords:M,colorStops:T,gradientUnits:b,gradientTransform:K,offsetX:R,offsetY:W});return $}});function n(a,s,u,p){var l,m;Object.keys(s).forEach(function(y){l=s[y],l==="Infinity"?m=1:l==="-Infinity"?m=0:(m=parseFloat(s[y],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(m*=.01,p==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(m*=u.viewBoxWidth||u.width),(y==="y1"||y==="y2")&&(m*=u.viewBoxHeight||u.height)))),s[y]=m})}}(),function(){var g=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,h){if(o||(o={}),this.id=e.Object.__uid++,this.setOptions(o),!o.source||o.source&&typeof o.source!="string"){h&&h(this);return}else{var c=this;this.source=e.util.createImage(),e.util.loadImage(o.source,function(n,a){c.source=n,h&&h(c,a)},null,this.crossOrigin)}},toObject:function(o){var h=e.Object.NUM_FRACTION_DIGITS,c,n;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),n={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,h),offsetY:g(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,n,o),n},toSVG:function(o){var h=typeof this.source=="function"?this.source():this.source,c=h.width/o.width,n=h.height/o.height,a=this.offsetX/o.width,s=this.offsetY/o.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,s&&(n+=Math.abs(s))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,a&&(c+=Math.abs(a))),h.src?u=h.src:h.toDataURL&&(u=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+a+'" y="'+s+'" width="'+c+'" height="'+n+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(o){for(var h in o)this[h]=o[h]},toLive:function(o){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":o.createPattern(h,this.repeat)}})}(),function(g){var o=g.fabric||(g.fabric={}),h=o.util.toFixed;if(o.Shadow){o.warn("fabric.Shadow is already defined.");return}o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var n in c)this[n]=c[n];this.id=o.Object.__uid++},_parseShadow:function(c){var n=c.trim(),a=o.Shadow.reOffsetsAndBlur.exec(n)||[],s=n.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var n=40,a=40,s=o.Object.NUM_FRACTION_DIGITS,u=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-c.angle)),p=20,l=new o.Color(this.color);return c.width&&c.height&&(n=h((Math.abs(u.x)+this.blur)/c.width,s)*100+p,a=h((Math.abs(u.y)+this.blur)/c.height,s)*100+p),c.flipX&&(u.x*=-1),c.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,s)+`"></feGaussianBlur>
	<feOffset dx="`+h(u.x,s)+'" dy="'+h(u.y,s)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},n=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==n[a]&&(c[a]=this[a])},this),c}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var g=e.util.object.extend,o=e.util.getElementOffset,h=e.util.removeFromArray,c=e.util.toFixed,n=e.util.transformPoint,a=e.util.invertTransform,s=e.util.getNodeCanvas,u=e.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,m){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,y),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,y),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,y),m.overlayColor&&this.setOverlayColor(m.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,m,y){m.setAttribute("width",this.width*l),m.setAttribute("height",this.height*l),y.scale(l,l)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(l,m,y){return this.__setBgOverlayImage("overlayImage",l,m,y)},setBackgroundImage:function(l,m,y){return this.__setBgOverlayImage("backgroundImage",l,m,y)},setOverlayColor:function(l,m){return this.__setBgOverlayColor("overlayColor",l,m)},setBackgroundColor:function(l,m){return this.__setBgOverlayColor("backgroundColor",l,m)},__setBgOverlayImage:function(l,m,y,b){return typeof m=="string"?e.util.loadImage(m,function(x,T){if(x){var M=new e.Image(x,b);this[l]=M,M.canvas=this}y&&y(x,T)},this,b&&b.crossOrigin):(b&&m.setOptions(b),this[l]=m,m&&(m.canvas=this),y&&y(m,!1)),this},__setBgOverlayColor:function(l,m,y){return this[l]=m,this._initGradient(m,l),this._initPattern(m,l,y),this},_createCanvasElement:function(){var l=u();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw p;return l},_initOptions:function(l){var m=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,m){return this.setDimensions({width:l},m)},setHeight:function(l,m){return this.setDimensions({height:l},m)},setDimensions:function(l,m){var y;m=m||{};for(var b in l)y=l[b],m.cssOnly||(this._setBackstoreDimension(b,l[b]),y+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(b,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,m){return this.lowerCanvasEl[l]=m,this.upperCanvasEl&&(this.upperCanvasEl[l]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=m),this[l]=m,this},_setCssDimension:function(l,m){return this.lowerCanvasEl.style[l]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=m),this.wrapperEl&&(this.wrapperEl.style[l]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var m=this._activeObject,y=this.backgroundImage,b=this.overlayImage,x,T,M;for(this.viewportTransform=l,T=0,M=this._objects.length;T<M;T++)x=this._objects[T],x.group||x.setCoords(!0);return m&&m.setCoords(),y&&y.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,m){var y=l,b=this.viewportTransform.slice(0);l=n(l,a(this.viewportTransform)),b[0]=m,b[3]=m;var x=n(l,b);return b[4]+=y.x-x.x,b[5]+=y.y-x.y,this.setViewportTransform(b)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var m=this.viewportTransform.slice(0);return m[4]=-l.x,m[5]=-l.y,this.setViewportTransform(m)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},m=this.width,y=this.height,b=a(this.viewportTransform);return l.tl=n({x:0,y:0},b),l.br=n({x:m,y},b),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,m){var y=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(l,m),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var m=this.viewportTransform,y=this.clipPath;l.save(),l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),l.globalCompositeOperation="destination-in",y.transform(l),l.scale(1/y.zoomX,1/y.zoomY),l.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),l.restore()},_renderObjects:function(l,m){var y,b;for(y=0,b=m.length;y<b;++y)m[y]&&m[y].render(l)},_renderBackgroundOrOverlay:function(l,m){var y=this[m+"Color"],b=this[m+"Image"],x=this.viewportTransform,T=this[m+"Vpt"];if(!(!y&&!b)){if(y){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=y.toLive?y.toLive(l,this):y,T&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),l.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var M=y.gradientTransform||y.patternTransform;M&&l.transform(M[0],M[1],M[2],M[3],M[4],M[5]),l.fill(),l.restore()}b&&(l.save(),T&&l.transform(x[0],x[1],x[2],x[3],x[4],x[5]),b.render(l),l.restore())}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var m=this.getCenterPoint();return this._centerObject(l,m)},viewportCenterObject:function(l){var m=this.getVpCenter();return this._centerObject(l,m)},viewportCenterObjectH:function(l){var m=this.getVpCenter();return this._centerObject(l,new e.Point(m.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var m=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,m.y))},getVpCenter:function(){var l=this.getCenterPoint(),m=a(this.viewportTransform);return n(l,m)},_centerObject:function(l,m){return l.setPositionByOrigin(m,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,m){var y=this.clipPath,b={version:e.version,objects:this._toObjects(l,m)};return y&&!y.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,l,m)),g(b,this.__serializeBgOverlay(l,m)),e.util.populateWithProperties(this,b,m),b},_toObjects:function(l,m){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,l,m)},this)},_toObject:function(l,m,y){var b;this.includeDefaultValues||(b=l.includeDefaultValues,l.includeDefaultValues=!1);var x=l[m](y);return this.includeDefaultValues||(l.includeDefaultValues=b),x},__serializeBgOverlay:function(l,m){var y={},b=this.backgroundImage,x=this.overlayImage,T=this.backgroundColor,M=this.overlayColor;return T&&T.toObject?T.excludeFromExport||(y.background=T.toObject(m)):T&&(y.background=T),M&&M.toObject?M.excludeFromExport||(y.overlay=M.toObject(m)):M&&(y.overlay=M),b&&!b.excludeFromExport&&(y.backgroundImage=this._toObject(b,l,m)),x&&!x.excludeFromExport&&(y.overlayImage=this._toObject(x,l,m)),y},svgViewportTransformation:!0,toSVG:function(l,m){l||(l={}),l.reviver=m;var y=[];return this._setSVGPreamble(y,l),this._setSVGHeader(y,l),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",m),this._setSVGObjects(y,m),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",m),y.push("</svg>"),y.join("")},_setSVGPreamble:function(l,m){m.suppressPreamble||l.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,m){var y=m.width||this.width,b=m.height||this.height,x,T='viewBox="0 0 '+this.width+" "+this.height+'" ',M=e.Object.NUM_FRACTION_DIGITS;m.viewBox?T='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(x=this.viewportTransform,T='viewBox="'+c(-x[4]/x[0],M)+" "+c(-x[5]/x[3],M)+" "+c(this.width/x[0],M)+" "+c(this.height/x[3],M)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',b,'" ',T,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(l){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,m=["background","overlay"].map(function(y){var b=l[y+"Color"];if(b&&b.toLive){var x=l[y+"Vpt"],T=l.viewportTransform,M={width:l.width/(x?T[0]:1),height:l.height/(x?T[3]:1)};return b.toSVG(M,{additionalTransform:x?e.util.matrixToSVG(T):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var l="",m={},y,b,x,T,M,I,R,W,K,$=e.fontPaths,se=[];for(this._objects.forEach(function le(ce){se.push(ce),ce._objects&&ce._objects.forEach(le)}),W=0,K=se.length;W<K;W++)if(y=se[W],b=y.fontFamily,!(y.type.indexOf("text")===-1||m[b]||!$[b])&&(m[b]=!0,!!y.styles)){x=y.styles;for(M in x){T=x[M];for(R in T)I=T[R],b=I.fontFamily,!m[b]&&$[b]&&(m[b]=!0)}}for(var fe in m)l+=[`		@font-face {
`,"			font-family: '",fe,`';
`,"			src: url('",$[fe],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,m){var y,b,x,T=this._objects;for(b=0,x=T.length;b<x;b++)y=T[b],!y.excludeFromExport&&this._setSVGObject(l,y,m)},_setSVGObject:function(l,m,y){l.push(m.toSVG(y))},_setSVGBgOverlayImage:function(l,m,y){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&l.push(this[m].toSVG(y))},_setSVGBgOverlayColor:function(l,m){var y=this[m+"Color"],b=this.viewportTransform,x=this.width,T=this.height;if(y)if(y.toLive){var M=y.repeat,I=e.util.invertTransform(b),R=this[m+"Vpt"],W=R?e.util.matrixToSVG(I):"";l.push('<rect transform="'+W+" translate(",x/2,",",T/2,')"',' x="',y.offsetX-x/2,'" y="',y.offsetY-T/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?y.source.width:x,'" height="',M==="repeat-x"||M==="no-repeat"?y.source.height:T,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var m=this._activeObject,y,b,x;if(l===m&&l.type==="activeSelection")for(x=m._objects,y=x.length;y--;)b=x[y],h(this._objects,b),this._objects.unshift(b);else h(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var m=this._activeObject,y,b,x;if(l===m&&l.type==="activeSelection")for(x=m._objects,y=0;y<x.length;y++)b=x[y],h(this._objects,b),this._objects.push(b);else h(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,m){if(!l)return this;var y=this._activeObject,b,x,T,M,I,R=0;if(l===y&&l.type==="activeSelection")for(I=y._objects,b=0;b<I.length;b++)x=I[b],T=this._objects.indexOf(x),T>0+R&&(M=T-1,h(this._objects,x),this._objects.splice(M,0,x)),R++;else T=this._objects.indexOf(l),T!==0&&(M=this._findNewLowerIndex(l,T,m),h(this._objects,l),this._objects.splice(M,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,m,y){var b,x;if(y)for(b=m,x=m-1;x>=0;--x){var T=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(T){b=x;break}}else b=m-1;return b},bringForward:function(l,m){if(!l)return this;var y=this._activeObject,b,x,T,M,I,R=0;if(l===y&&l.type==="activeSelection")for(I=y._objects,b=I.length;b--;)x=I[b],T=this._objects.indexOf(x),T<this._objects.length-1-R&&(M=T+1,h(this._objects,x),this._objects.splice(M,0,x)),R++;else T=this._objects.indexOf(l),T!==this._objects.length-1&&(M=this._findNewUpperIndex(l,T,m),h(this._objects,l),this._objects.splice(M,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,m,y){var b,x,T;if(y)for(b=m,x=m+1,T=this._objects.length;x<T;++x){var M=l.intersectsWithObject(this._objects[x])||l.isContainedWithinObject(this._objects[x])||this._objects[x].isContainedWithinObject(l);if(M){b=x;break}}else b=m+1;return b},moveTo:function(l,m){return h(this._objects,l),this._objects.splice(m,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(e.StaticCanvas.prototype,e.Observable),g(e.StaticCanvas.prototype,e.Collection),g(e.StaticCanvas.prototype,e.DataURLExporter),g(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var m=u();if(!m||!m.getContext)return null;var y=m.getContext("2d");if(!y)return null;switch(l){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=s(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var m=s(this.lowerCanvasEl);return m&&m.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(g){g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var o=this.canvas.viewportTransform;g.save(),g.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var g=this.canvas,o=this.shadow,h=g.contextTop,c=g.getZoom();g&&g._isRetinaScaling()&&(c*=e.devicePixelRatio),h.shadowColor=o.color,h.shadowBlur=o.blur*c,h.shadowOffsetX=o.offsetX*c,h.shadowOffsetY=o.offsetY*c}},needsFullRender:function(){var g=new e.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(g){this.canvas=g,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(g,o,h){var c=o.midPointFrom(h);return g.quadraticCurveTo(o.x,o.y,c.x,c.y),c},onMouseDown:function(g,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(g))},onMouseMove:function(g,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,c=h.length,n=this.canvas.contextTop;this._saveAndTransform(n),n.beginPath(),this.oldEnd&&n.moveTo(this.oldEnd.x,this.oldEnd.y),this.oldEnd=this._drawSegment(n,h[c-2],h[c-1],!0),n.stroke(),n.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.finish(),!1):!0},finish:function(){this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath()},_prepareForDrawing:function(g){var o=new e.Point(g.x,g.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(g){var o=new e.Point(g.x,g.y);return this._addPoint(o)},_render:function(g){var o,h,c=this._points[0],n=this._points[1];if(g=g||this.canvas.contextTop,this._saveAndTransform(g),g.beginPath(),this._points.length===2&&c.x===n.x&&c.y===n.y){var a=this.width/1e3;c=new e.Point(c.x,c.y),n=new e.Point(n.x,n.y),c.x-=a,n.x+=a}for(g.moveTo(c.x,c.y),o=1,h=this._points.length;o<h;o++)this._drawSegment(g,c,n),c=this._points[o],n=this._points[o+1];g.lineTo(c.x,c.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var o=this.width/1e3;return e.util.getSmoothPathFromPoints(g,o)},_isEmptySVGPath:function(g){var o=e.util.joinPath(g);return o==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var o=new e.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new e.Shadow(this.shadow)),o},decimatePoints:function(g,o){if(g.length<=2)return g;var h=this.canvas.getZoom(),c=Math.pow(o/h,2),n,a=g.length-1,s=g[0],u=[s],p;for(n=1;n<a-1;n++)p=Math.pow(s.x-g[n].x,2)+Math.pow(s.y-g[n].y,2),p>=c&&(s=g[n],u.push(s));return u.push(g[a]),u},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;if(g.closePath(),this._points.length<2){this.canvas.clearContext(this.canvas.contextTop),this.canvas.requestRenderAll(),this._resetShadow();return}this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o)){this.canvas.requestRenderAll();return}var h=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var o=this.addPoint(g),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,o),h.restore()},dot:function(g,o){g.fillStyle=o.fill,g.beginPath(),g.arc(o.x,o.y,o.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,o,h,c=this.points;for(this._saveAndTransform(g),o=0,h=c.length;o<h;o++)this.dot(g,c[o]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,o,h;this.canvas.renderOnAddRemove=!1;var c=[];for(o=0,h=this.points.length;o<h;o++){var n=this.points[o],a=new e.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(a.shadow=new e.Shadow(this.shadow)),c.push(a)}var s=new e.Group(c);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var o=new e.Point(g.x,g.y),h=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return o.radius=h,o.fill=c,this.points.push(o),o}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],h=0,c=this.sprayChunks.length;h<c;h++)for(var n=this.sprayChunks[h],a=0,s=n.length;a<s;a++){var u=new e.Rect({width:n[a].width,height:n[a].width,left:n[a].x+1,top:n[a].y+1,originX:"center",originY:"center",fill:this.color});o.push(u)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var p=new e.Group(o);this.shadow&&p.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var o={},h,c,n;for(c=0,n=g.length;c<n;c++)h=g[c].left+""+g[c].top,o[h]||(o[h]=g[c]);var a=[];for(h in o)a.push(o[h]);return a},render:function(g){var o=this.canvas.contextTop,h,c;for(o.fillStyle=this.color,this._saveAndTransform(o),h=0,c=g.length;h<c;h++){var n=g[h];typeof n.opacity<"u"&&(o.globalAlpha=n.opacity),o.fillRect(n.x,n.y,n.width,n.width)}o.restore()},_render:function(){var g=this.canvas.contextTop,o,h;for(g.fillStyle=this.color,this._saveAndTransform(g),o=0,h=this.sprayChunks.length;o<h;o++)this.render(this.sprayChunks[o]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var o,h,c,n=this.width/2,a;for(a=0;a<this.density;a++){o=e.util.getRandomInt(g.x-n,g.x+n),h=e.util.getRandomInt(g.y-n,g.y+n),this.dotWidthVariance?c=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var s=new e.Point(o,h);s.width=c,this.randomOpacity&&(s.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var g=20,o=5,h=e.util.createCanvasElement(),c=h.getContext("2d");return h.width=h.height=g+o,c.fillStyle=this.color,c.beginPath(),c.arc(g/2,g/2,g/2,0,Math.PI*2,!1),c.closePath(),c.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(g){return g.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(g){this.callSuper("_setBrushStyles",g),g.strokeStyle=this.getPattern(g)},createPath:function(g){var o=this.callSuper("createPath",g),h=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),o}}),function(){var g=e.util.getPointer,o=e.util.degreesToRadians,h=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(n,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),a,s,u;if(n.length>0&&!this.preserveObjectStacking){s=[],u=[];for(var p=0,l=this._objects.length;p<l;p++)a=this._objects[p],n.indexOf(a)===-1?s.push(a):u.push(a);n.length>1&&(this._activeObject._objects=u),s.push.apply(s,u)}else s=this._objects;return s},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,a){var s=n.calcTransformMatrix(),u=e.util.invertTransform(s),p=this.restorePointerVpt(a);return e.util.transformPoint(p,u)},isTargetTransparent:function(n,a,s){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var u=this._normalizePointer(n,{x:a,y:s}),p=Math.max(n.cacheTranslationX+u.x*n.zoomX,0),l=Math.max(n.cacheTranslationY+u.y*n.zoomY,0),x=e.util.isTransparent(n._cacheContext,Math.round(p),Math.round(l),this.targetFindTolerance);return x}var m=this.contextCache,y=n.selectionBackgroundColor,b=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),n.render(m),m.restore(),n.selectionBackgroundColor=y;var x=e.util.isTransparent(m,a,s,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(n){var a=!1;return Array.isArray(this.selectionKey)?a=!!this.selectionKey.find(function(s){return n[s]===!0}):a=n[this.selectionKey],a},_shouldClearSelection:function(n,a){var s=this.getActiveObjects(),u=this._activeObject;return!a||a&&u&&s.length>1&&s.indexOf(a)===-1&&u!==a&&!this._isSelectionKeyPressed(n)||a&&!a.evented||a&&!a.selectable&&u&&u!==a},_shouldCenterTransform:function(n,a,s){if(n){var u;return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?u=this.centeredScaling||n.centeredScaling:a==="rotate"&&(u=this.centeredRotation||n.centeredRotation),u?!s:s}},_getOriginFromCorner:function(n,a){var s={x:n.originX,y:n.originY};return a==="ml"||a==="tl"||a==="bl"?s.x="right":(a==="mr"||a==="tr"||a==="br")&&(s.x="left"),a==="tl"||a==="mt"||a==="tr"?s.y="bottom":(a==="bl"||a==="mb"||a==="br")&&(s.y="top"),s},_getActionFromCorner:function(n,a,s,u){if(!a||!n)return"drag";var p=u.controls[a];return p.getActionName(s,p,u)},_setupCurrentTransform:function(n,a,s){if(a){var u=this.getPointer(n),p=a.__corner,l=a.controls[p],m=s&&p?l.getActionHandler(n,a,l):e.controlsUtils.dragHandler,y=this._getActionFromCorner(s,p,n,a),b=this._getOriginFromCorner(a,p),x=n[this.centeredKey],T={target:a,action:y,actionHandler:m,corner:p,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:u.x-a.left,offsetY:u.y-a.top,originX:b.x,originY:b.y,ex:u.x,ey:u.y,lastX:u.x,lastY:u.y,theta:o(a.angle),width:a.width*a.scaleX,shiftKey:n.shiftKey,altKey:x,original:e.util.saveObjectTransform(a)};this._shouldCenterTransform(a,y,x)&&(T.originX="center",T.originY="center"),T.original.originX=b.x,T.original.originY=b.y,this._currentTransform=T,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var a=this._groupSelector,s=new e.Point(a.ex,a.ey),u=e.util.transformPoint(s,this.viewportTransform),p=new e.Point(a.ex+a.left,a.ey+a.top),l=e.util.transformPoint(p,this.viewportTransform),m=Math.min(u.x,l.x),y=Math.min(u.y,l.y),b=Math.max(u.x,l.x),x=Math.max(u.y,l.y),T=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(m,y,b-m,x-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,m+=T,y+=T,b-=T,x-=T,e.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(m,y,b-m,x-y))},findTarget:function(n,a){if(!this.skipTargetFind){var s=!0,u=this.getPointer(n,s),p=this._activeObject,l=this.getActiveObjects(),m,y,b=h(n),x=l.length>1&&!a||l.length===1;if(this.targets=[],x&&p._findTargetCorner(u,b)||l.length>1&&!a&&p===this._searchPossibleTargets([p],u))return p;if(l.length===1&&p===this._searchPossibleTargets([p],u))if(this.preserveObjectStacking)m=p,y=this.targets,this.targets=[];else return p;var T=this._searchPossibleTargets(this._objects,u);return n[this.altSelectionKey]&&T&&m&&T!==m&&(T=m,this.targets=y),T}},_checkTarget:function(n,a,s){if(a&&a.visible&&a.evented&&a.containsPoint(n))if((this.perPixelTargetFind||a.perPixelTargetFind)&&!a.isEditing){var u=this.isTargetTransparent(a,s.x,s.y);if(!u)return!0}else return!0},_searchPossibleTargets:function(n,a){for(var s,u=n.length,p;u--;){var l=n[u],m=l.group?this._normalizePointer(l.group,a):a;if(this._checkTarget(m,l,a)){s=n[u],s.subTargetCheck&&s instanceof e.Group&&(p=this._searchPossibleTargets(s._objects,a),p&&this.targets.push(p));break}}return s},restorePointerVpt:function(n){return e.util.transformPoint(n,e.util.invertTransform(this.viewportTransform))},getPointer:function(n,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var s=g(n),u=this.upperCanvasEl,p=u.getBoundingClientRect(),l=p.width||0,m=p.height||0,y;(!l||!m)&&("top"in p&&"bottom"in p&&(m=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(l=Math.abs(p.right-p.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,a||(s=this.restorePointerVpt(s));var b=this.getRetinaScaling();return b!==1&&(s.x/=b,s.y/=b),l===0||m===0?y={width:1,height:1}:y={width:u.width/l,height:u.height/m},{x:s.x*y.width,y:s.y*y.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),e.util.addClass(s,"upper-canvas "+n),this.wrapperEl.appendChild(s),this._copyCanvasStyle(a,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var a=this.width||n.width,s=this.height||n.height;e.util.setStyle(n,{position:"absolute",width:a+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=a,n.height=s,e.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,a){a.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,a){var s=!1,u=this.getActiveObjects(),p=[],l=[];n.forEach(function(m){u.indexOf(m)===-1&&(s=!0,m.fire("deselected",{e:a,target:m}),l.push(m))}),u.forEach(function(m){n.indexOf(m)===-1&&(s=!0,m.fire("selected",{e:a,target:m}),p.push(m))}),n.length>0&&u.length>0?s&&this.fire("selection:updated",{e:a,selected:p,deselected:l}):u.length>0?this.fire("selection:created",{e:a,selected:p}):n.length>0&&this.fire("selection:cleared",{e:a,deselected:l})},setActiveObject:function(n,a){var s=this.getActiveObjects();return this._setActiveObject(n,a),this._fireSelectionEvents(s,a),this},_setActiveObject:function(n,a){return this._activeObject===n||!this._discardActiveObject(a,n)||n.onSelect({e:a})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,a){var s=this._activeObject;if(s){if(s.onDeselect({e:n,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var a=this.getActiveObjects(),s=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:s,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(a,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.upperCanvasEl.width=0,this.upperCanvasEl.height=0,this.cacheCanvasEl&&(this.cacheCanvasEl.width=0,this.cacheCanvasEl.height=0),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var a=this._activeObject;a&&a._renderControls(n)},_toObject:function(n,a,s){var u=this._realizeGroupTransformOnObject(n),p=this.callSuper("_toObject",n,a,s);return this._unwindGroupTransformOnObject(n,u),p},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var a=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],s={};return a.forEach(function(u){s[u]=n[u]}),e.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),s}else return null},_unwindGroupTransformOnObject:function(n,a){a&&n.set(a)},_setSVGObject:function(n,a,s){var u=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",n,a,s),this._unwindGroupTransformOnObject(a,u)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var c in e.StaticCanvas)c!=="prototype"&&(e.Canvas[c]=e.StaticCanvas[c])}(),function(){var g=e.util.addListener,o=e.util.removeListener,h=3,c=2,n=1,a={passive:!1};function s(u,p){return u.button&&u.button===p-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(u,p){var l=this.upperCanvasEl,m=this._getEventPrefix();u(e.window,"resize",this._onResize),u(l,m+"down",this._onMouseDown),u(l,m+"move",this._onMouseMove,a),u(l,m+"out",this._onMouseOut),u(l,m+"enter",this._onMouseEnter),u(l,"wheel",this._onMouseWheel),u(l,"contextmenu",this._onContextMenu),u(l,"dblclick",this._onDoubleClick),u(l,"dragover",this._onDragOver),u(l,"dragenter",this._onDragEnter),u(l,"dragleave",this._onDragLeave),u(l,"drop",this._onDrop),this.enablePointerEvents||u(l,"touchstart",this._onTouchStart,a),typeof v<"u"&&p in v&&(v[p](l,"gesture",this._onGesture),v[p](l,"drag",this._onDrag),v[p](l,"orientation",this._onOrientationChange),v[p](l,"shake",this._onShake),v[p](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var u=this._getEventPrefix();o(e.document,u+"up",this._onMouseUp),o(e.document,"touchend",this._onTouchEnd,a),o(e.document,u+"move",this._onMouseMove,a),o(e.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(u,p){this.__onTransformGesture&&this.__onTransformGesture(u,p)},_onDrag:function(u,p){this.__onDrag&&this.__onDrag(u,p)},_onMouseWheel:function(u){this.__onMouseWheel(u)},_onMouseOut:function(u){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:u}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:u});var l=this;this._hoveredTargets.forEach(function(m){l.fire("mouse:out",{target:p,e:u}),m&&p.fire("mouseout",{e:u})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(m){m.isEditing&&m.hiddenTextarea.focus()})},_onMouseEnter:function(u){!this._currentTransform&&!this.findTarget(u)&&(this.fire("mouse:over",{target:null,e:u}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(u,p){this.__onOrientationChange&&this.__onOrientationChange(u,p)},_onShake:function(u,p){this.__onShake&&this.__onShake(u,p)},_onLongPress:function(u,p){this.__onLongPress&&this.__onLongPress(u,p)},_onDragOver:function(u){u.preventDefault();var p=this._simpleEventHandler("dragover",u);this._fireEnterLeaveEvents(p,u)},_onDrop:function(u){return this._simpleEventHandler("drop:before",u),this._simpleEventHandler("drop",u)},_onContextMenu:function(u){return this.stopContextMenu&&(u.stopPropagation(),u.preventDefault()),!1},_onDoubleClick:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"dblclick"),this._resetTransformEventData(u)},getPointerId:function(u){var p=u.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?u.pointerId:-1},_isMainEvent:function(u){return u.isPrimary===!0?!0:u.isPrimary===!1?!1:u.type==="touchend"&&u.touches.length===0?!0:u.changedTouches?u.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(u){u.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(u)),this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();g(e.document,"touchend",this._onTouchEnd,a),g(e.document,"touchmove",this._onMouseMove,a),o(p,l+"down",this._onMouseDown)},_onMouseDown:function(u){this.__onMouseDown(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();o(p,l+"move",this._onMouseMove,a),g(e.document,l+"up",this._onMouseUp),g(e.document,l+"move",this._onMouseMove,a)},_onTouchEnd:function(u){if(!(u.touches.length>0)){this.__onMouseUp(u),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();o(e.document,"touchend",this._onTouchEnd,a),o(e.document,"touchmove",this._onMouseMove,a);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(l.upperCanvasEl,p+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(u){this.__onMouseUp(u),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(u)&&(o(e.document,l+"up",this._onMouseUp),o(e.document,l+"move",this._onMouseMove,a),g(p,l+"move",this._onMouseMove,a))},_onMouseMove:function(u){!this.allowTouchScrolling&&u.preventDefault&&u.preventDefault(),this.__onMouseMove(u)},_onResize:function(){this.calcOffset()},_shouldRender:function(u){var p=this._activeObject;return!!p!=!!u||p&&u&&p!==u?!0:(p&&p.isEditing,!1)},__onMouseUp:function(u){var p,l=this._currentTransform,m=this._groupSelector,y=!1,b=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(u),p=this._target,this._handleEvent(u,"up:before"),s(u,h)){this.fireRightClick&&this._handleEvent(u,"up",h,b);return}if(s(u,c)){this.fireMiddleClick&&this._handleEvent(u,"up",c,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(u);return}if(this._isMainEvent(u)){if(l&&(this._finalizeCurrentTransform(u),y=l.actionPerformed),!b){var x=p===this._activeObject;this._maybeGroupObjects(u),y||(y=this._shouldRender(p)||!x&&p===this._activeObject)}var T,M;if(p){if(T=p._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,u),y=!0;else{var I=p.controls[T],R=I&&I.getMouseUpHandler(u,p,I);R&&(M=this.getPointer(u),R(u,l,M.x,M.y))}p.isMoving=!1}if(l&&(l.target!==p||l.corner!==T)){var W=l.target&&l.target.controls[l.corner],K=W&&W.getMouseUpHandler(u,p,I);M=M||this.getPointer(u),K&&K(u,l,M.x,M.y)}this._setCursorFromEvent(u,p),this._handleEvent(u,"up",n,b),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),y?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(u,p){var l=this.findTarget(p),m=this.targets,y={e:p,target:l,subTargets:m};if(this.fire(u,y),l&&l.fire(u,y),!m)return l;for(var b=0;b<m.length;b++)m[b].fire(u,y);return l},_handleEvent:function(u,p,l,m){var y=this._target,b=this.targets||[],x={e:u,target:y,subTargets:b,button:l||n,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(x.currentTarget=this.findTarget(u),x.currentSubTargets=this.targets),this.fire("mouse:"+p,x),y&&y.fire("mouse"+p,x);for(var T=0;T<b.length;T++)b[T].fire("mouse"+p,x)},_finalizeCurrentTransform:function(u){var p=this._currentTransform,l=p.target,m={e:u,target:l,transform:p,action:p.action};l._scaling&&(l._scaling=!1),l.setCoords(),(p.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(u){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(u).requestRenderAll();var p=this.getPointer(u);this.freeDrawingBrush.onMouseDown(p,{e:u,pointer:p}),this._handleEvent(u,"down")},_onMouseMoveInDrawingMode:function(u){if(this._isCurrentlyDrawing){var p=this.getPointer(u);this.freeDrawingBrush.onMouseMove(p,{e:u,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(u,"move")},_onMouseUpInDrawingMode:function(u){var p=this.getPointer(u);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:u,pointer:p}),this._handleEvent(u,"up")},_finishDrawing:function(){this.freeDrawingBrush.finish(),this._isCurrentlyDrawing=!1},__onMouseDown:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"down:before");var p=this._target;if(s(u,h)){this.fireRightClick&&this._handleEvent(u,"down",h);return}if(s(u,c)){this.fireMiddleClick&&this._handleEvent(u,"down",c);return}if(this.isDrawingMode)if(!this.usePencil||this._isStylus(u)){if(u.type==="touchstart"&&u.touches.length>1){this._isCurrentlyDrawing&&this._finishDrawing(u),this._handleEvent(u,"down");return}this._onMouseDownInDrawingMode(u);return}else{this._handleEvent(u,"down");return}if(this._isMainEvent(u)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var m=this._shouldRender(p),y=this._shouldGroup(u,p);if(this._shouldClearSelection(u,p)?this.discardActiveObject(u):y&&(this._handleGrouping(u,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var b=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,u);var x=p._findTargetCorner(this.getPointer(u,!0),e.util.isTouchEvent(u));if(p.__corner=x,p===this._activeObject&&(x||!y)){this._setupCurrentTransform(u,p,b);var T=p.controls[x],l=this.getPointer(u),M=T&&T.getMouseDownHandler(u,p,T);M&&M(u,this._currentTransform,l.x,l.y)}}this._handleEvent(u,"down"),(m||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(u){this._resetTransformEventData(),this._pointer=this.getPointer(u,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(u)||null},_beforeTransform:function(u){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:u,transform:p})},_isStylus:function(u){if(!u.changedTouches)return!1;for(var p=0;p<u.changedTouches.length;p++){var l=u.changedTouches[p];if(l.touchType&&l.touchType==="stylus"||l.radiusX===0)return!0}return!1},__onMouseMove:function(u){this._handleEvent(u,"move:before"),this._cacheTransformEventData(u);var p,l;if(this.isDrawingMode)if(!this.usePencil||this._isStylus(u)){this._onMouseMoveInDrawingMode(u);return}else return;if(this._isMainEvent(u)){var m=this._groupSelector;m?(l=this._absolutePointer,m.left=l.x-m.ex,m.top=l.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(u):(p=this.findTarget(u)||null,this._setCursorFromEvent(u,p),this._fireOverOutEvents(p,u)),this._handleEvent(u,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(u,p){var l=this._hoveredTarget,m=this._hoveredTargets,y=this.targets,b=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],p,{oldTarget:m[x],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(u,p){var l=this._draggedoverTarget,m=this._hoveredTargets,y=this.targets,b=Math.max(m.length,y.length);this.fireSyntheticInOutEvents(u,p,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var x=0;x<b;x++)this.fireSyntheticInOutEvents(y[x],p,{oldTarget:m[x],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=u},fireSyntheticInOutEvents:function(u,p,l){var m,y,b=l.oldTarget,x,T,M=b!==u,I=l.canvasEvtIn,R=l.canvasEvtOut;M&&(m={e:p,target:u,previousTarget:b},y={e:p,target:b,nextTarget:u}),T=u&&M,x=b&&M,x&&(R&&this.fire(R,y),b.fire(l.evtOut,y)),T&&(I&&this.fire(I,m),u.fire(l.evtIn,m))},__onMouseWheel:function(u){this._cacheTransformEventData(u),this._handleEvent(u,"wheel"),this._resetTransformEventData()},_transformObject:function(u){var p=this.getPointer(u),l=this._currentTransform;l.reset=!1,l.shiftKey=u.shiftKey,l.altKey=u[this.centeredKey],this._performTransformAction(u,l,p),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(u,p,l){var m=l.x,y=l.y,b=p.action,x=!1,T=p.actionHandler;T&&(x=T(u,p,m,y)),b==="drag"&&x&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||x},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(u,p){if(!p)return this.setCursor(this.defaultCursor),!1;var l=p.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!m||!m.contains(p))&&p._findTargetCorner(this.getPointer(u,!0));y?this.setCursor(this.getCornerCursor(y,p,u)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(b){l=b.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(u,p,l){var m=p.controls[u];return m.cursorStyleHandler(l,m,p)}})}(),function(){var g=Math.min,o=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(h,c){var n=this._activeObject;return n&&this._isSelectionKeyPressed(h)&&c&&c.selectable&&this.selection&&(n!==c||n.type==="activeSelection")&&!c.onSelect({e:h})},_handleGrouping:function(h,c){var n=this._activeObject;n.__corner||c===n&&(c=this.findTarget(h,!0),!c||!c.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(c,h):this._createActiveSelection(c,h))},_updateActiveSelection:function(h,c){var n=this._activeObject,a=n._objects.slice(0);n.contains(h)?(n.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),c)):(n.addWithUpdate(h),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,c)},_createActiveSelection:function(h,c){var n=this.getActiveObjects(),a=this._createGroup(h);this._hoveredTarget=a,this._setActiveObject(a,c),this._fireSelectionEvents(n,c)},_createGroup:function(h){var c=this._objects,n=c.indexOf(this._activeObject)<c.indexOf(h),a=n?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(a,{canvas:this})},_groupSelectedObjects:function(h){var c=this._collectObjects(h),n;c.length===1?this.setActiveObject(c[0],h):c.length>1&&(n=new e.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(n,h))},_collectObjects:function(h){for(var c=[],n,a=this._groupSelector.ex,s=this._groupSelector.ey,u=a+this._groupSelector.left,p=s+this._groupSelector.top,l=new e.Point(g(a,u),g(s,p)),m=new e.Point(o(a,u),o(s,p)),y=!this.selectionFullyContained,b=a===u&&s===p,x=this._objects.length;x--&&(n=this._objects[x],!(!(!n||!n.selectable||!n.visible)&&(y&&n.intersectsWithRect(l,m,!0)||n.isContainedWithinRect(l,m,!0)||y&&n.containsPoint(l,null,!0)||y&&n.containsPoint(m,null,!0))&&(c.push(n),b))););return c.length>1&&(c=c.filter(function(T){return!T.onSelect({e:h})})),c},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var o=g.format||"png",h=g.quality||1,c=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(c,g),a=e.util.toDataURL(n,o,h);return n.width=0,n.height=0,a},toBlob:function(g,o){o||(o={});var h=(o.multiplier||1)*(o.enableRetinaScaling?this.getRetinaScaling():1),c=this.toCanvasElement(h,o);c.toBlob(function(n){g(n),c.width=0,c.height=0})},toCanvasElement:function(g,o){g=g||1,o=o||{};var h=(o.width||this.width)*g,c=(o.height||this.height)*g,n=this.getZoom(),a=this.width,s=this.height,u=n*g,p=this.viewportTransform,l=(p[4]-(o.left||0))*g,m=(p[5]-(o.top||0))*g,y=this.interactive,b=[u,0,0,u,l,m],x=this.enableRetinaScaling,T=e.util.createCanvasElement(),M=this.contextTop;return T.width=h,T.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=h,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),this._objects),this.viewportTransform=p,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=x,this.contextTop=M,T}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(g,o,h){if(g){var c=typeof g=="string"?JSON.parse(g):e.util.object.clone(g),n=this,a=c.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(u){n.clear(),n._setBgOverlay(c,function(){a?n._enlivenObjects([a],function(p){n.clipPath=p[0],n.__setupCanvas.call(n,c,u,s,o)}):n.__setupCanvas.call(n,c,u,s,o)})},h),this}},__setupCanvas:function(g,o,h,c){var n=this;o.forEach(function(a,s){n.insertAt(a,s)}),this.renderOnAddRemove=h,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),c&&c()},_setBgOverlay:function(g,o){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){o&&o();return}var c=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",g.backgroundImage,h,c),this.__setBgOverlay("overlayImage",g.overlayImage,h,c),this.__setBgOverlay("backgroundColor",g.background,h,c),this.__setBgOverlay("overlayColor",g.overlay,h,c)},__setBgOverlay:function(g,o,h,c){var n=this;if(!o){h[g]=!0,c&&c();return}g==="backgroundImage"||g==="overlayImage"?e.util.enlivenObjects([o],function(a){n[g]=a[0],h[g]=!0,c&&c()}):this["set"+e.util.string.capitalize(g,!0)](o,function(){h[g]=!0,c&&c()})},_enlivenObjects:function(g,o,h){if(!g||g.length===0){o&&o([]);return}e.util.enlivenObjects(g,function(c){o&&o(c)},null,h)},_toDataURL:function(g,o){this.clone(function(h){o(h.toDataURL(g))})},_toDataURLWithMultiplier:function(g,o,h){this.clone(function(c){h(c.toDataURLWithMultiplier(g,o))})},clone:function(g,o){var h=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(c){c.loadFromJSON(h,function(){g&&g(c)})})},cloneWithoutData:function(g){var o=e.util.createCanvasElement();o.width=this.width,o.height=this.height;var h=new e.Canvas(o);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),g&&g(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):g&&g(h)}}),function(){var g=e.util.degreesToRadians,o=e.util.radiansToDegrees;e.util.object.extend(e.Canvas.prototype,{__onTransformGesture:function(h,c){if(!(!h.touches||h.touches.length!==2||c.gesture!=="gesture")){var n=this.findTarget(h);typeof n<"u"&&(this.__gesturesParams={e:h,self:c,target:n},this.__gesturesRenderer()),this.fire("touch:gesture",{target:n,e:h,self:c})}},__gesturesParams:null,__gesturesRenderer:function(){if(!(this.__gesturesParams===null||this._currentTransform===null)){var h=this.__gesturesParams.self,c=this._currentTransform,n=this.__gesturesParams.e;c.action="scale",c.originX=c.originY="center",this._scaleObjectBy(h.scale,n),h.rotation!==0&&(c.action="rotate",this._rotateObjectByAngle(h.rotation,n)),this.requestRenderAll(),c.action="drag"}},__onDrag:function(h,c){this.fire("touch:drag",{e:h,self:c})},__onOrientationChange:function(h,c){this.fire("touch:orientation",{e:h,self:c})},__onShake:function(h,c){this.fire("touch:shake",{e:h,self:c})},__onLongPress:function(h,c){this.fire("touch:longpress",{e:h,self:c})},_scaleObjectBy:function(h,c){var n=this._currentTransform,a=n.target;return n.gestureScale=h,a._scaling=!0,e.controlsUtils.scalingEqually(c,n,0,0)},_rotateObjectByAngle:function(h,c){var n=this._currentTransform;n.target.get("lockRotation")||(n.target.rotate(o(g(h)+n.theta)),this._fire("rotating",{target:n.target,e:c,transform:n}))}})}(),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.util.object.clone,n=o.util.toFixed,a=o.util.string.capitalize,s=o.util.degreesToRadians,u=!o.isLikelyNode,p=2;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:u,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var m=o.perfLimitSizeTotal,y=l.width,b=l.height,x=o.maxCacheSideLimit,T=o.minCacheSideLimit;if(y<=x&&b<=x&&y*b<=m)return y<T&&(l.width=T),b<T&&(l.height=T),l;var M=y/b,I=o.util.limitDimsByArea(M,m),R=o.util.capValue,W=R(T,I.x,x),K=R(T,I.y,x);return y>W&&(l.zoomX/=y/W,l.width=W,l.capped=!0),b>K&&(l.zoomY/=b/K,l.height=K,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),y=m.x*l.scaleX/this.scaleX,b=m.y*l.scaleY/this.scaleY;return{width:y+p,height:b+p,zoomX:l.scaleX,zoomY:l.scaleY,x:y,y:b}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var m=l._currentTransform.target,y=l._currentTransform.action;if(this===m&&y.slice&&y.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,x=this._limitCacheSize(this._getCacheCanvasDimensions()),T=o.minCacheSideLimit,M=x.width,I=x.height,R,W,K=x.zoomX,$=x.zoomY,se=M!==this.cacheWidth||I!==this.cacheHeight,fe=this.zoomX!==K||this.zoomY!==$,le=se||fe,ce=0,_e=0,Oe=!1;if(se){var ne=this._cacheCanvas.width,D=this._cacheCanvas.height,F=M>ne||I>D,B=(M<ne*.9||I<D*.9)&&ne>T&&D>T;Oe=F||B,F&&!x.capped&&(M>T||I>T)&&(ce=M*.1,_e=I*.1)}return this instanceof o.Text&&this.path&&(le=!0,Oe=!0,ce+=this.getHeightOfLine(0)*this.zoomX,_e+=this.getHeightOfLine(0)*this.zoomY),le?(Oe?(b.width=Math.ceil(M+ce),b.height=Math.ceil(I+_e)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),R=x.x/2,W=x.y/2,this.cacheTranslationX=Math.round(b.width/2-R)+R,this.cacheTranslationY=Math.round(b.height/2-W)+W,this.cacheWidth=M,this.cacheHeight=I,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(K,$),this.zoomX=K,this.zoomY=$,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,y=this.calcTransformMatrix(!m);l.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(l){var m=o.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:n(this.left,m),top:n(this.top,m),width:n(this.width,m),height:n(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,m),scaleX:n(this.scaleX,m),scaleY:n(this.scaleY,m),angle:n(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,m),skewY:n(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(l),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,y,l),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var m=o.util.getKlass(l.type).prototype,y=m.stateProperties;return y.forEach(function(b){b==="left"||b==="top"||(l[b]===m[b]&&delete l[b],Array.isArray(l[b])&&Array.isArray(m[b])&&l[b].length===0&&m[b].length===0&&delete l[b])}),l},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),m=l.scaleX,y=l.scaleY;if(this.canvas){var b=this.canvas.getZoom(),x=this.canvas.getRetinaScaling();m*=b*x,y*=b*x}return{scaleX:m,scaleY:y}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,m){var y=l==="scaleX"||l==="scaleY",b=this[l]!==m,x=!1;return y&&(m=this._constrainScale(m)),l==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):l==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):l==="shadow"&&m&&!(m instanceof o.Shadow)?m=new o.Shadow(m):l==="dirty"&&this.group&&this.group.set("dirty",m),this[l]=m,b&&(x=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,x&&this.group.set("dirty",!0)):x&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l,m){if(l.save(),m.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",m.absolutePositioned){var y=o.util.invertTransform(this.calcTransformMatrix());l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}m.transform(l),l.scale(1/m.zoomX,1/m.zoomY),l.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),l.restore()},drawObject:function(l,m){var y=this.fill,b=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=y,this.stroke=b},_drawClipPath:function(l,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,m))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var m=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,m){var y=m.stroke;y&&(l.lineWidth=m.strokeWidth,l.lineCap=m.strokeLineCap,l.lineDashOffset=m.strokeDashOffset,l.lineJoin=m.strokeLineJoin,l.miterLimit=m.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(l,y):(l.strokeStyle=y.toLive(l,this),this._applyPatternGradientTransform(l,y)):l.strokeStyle=m.stroke)},_setFillStyles:function(l,m){var y=m.fill;y&&(y.toLive?(l.fillStyle=y.toLive(l,this),this._applyPatternGradientTransform(l,m.fill)):l.fillStyle=y)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),l.setLineDash(m))},_renderControls:function(l,m){var y=this.getViewportTransform(),b=this.calcTransformMatrix(),x,T,M;m=m||{},T=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,M=typeof m.hasControls<"u"?m.hasControls:this.hasControls,b=o.util.multiplyTransformMatrices(y,b),x=o.util.qrDecompose(b),l.save(),l.translate(x.translateX,x.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(x.angle-=180),l.rotate(s(this.group?x.angle:this.angle)),m.forActiveSelection||this.group?T&&this.drawBordersInGroup(l,x,m):T&&this.drawBorders(l,m),M&&this.drawControls(l,m),l.restore()},_setShadow:function(l){if(this.shadow){var m=this.shadow,y=this.canvas,b,x=y&&y.viewportTransform[0]||1,T=y&&y.viewportTransform[3]||1;m.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),y&&y._isRetinaScaling()&&(x*=o.devicePixelRatio,T*=o.devicePixelRatio),l.shadowColor=m.color,l.shadowBlur=m.blur*o.browserShadowBlurConstant*(x+T)*(b.scaleX+b.scaleY)/4,l.shadowOffsetX=m.offsetX*x*b.scaleX,l.shadowOffsetY=m.offsetY*T*b.scaleY}},_removeShadow:function(l){this.shadow&&(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var y=m.gradientTransform||m.patternTransform,b=-this.width/2+m.offsetX||0,x=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,b,x):l.transform(1,0,0,1,b,x),y&&l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:b,offsetY:x}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){this.fill&&(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();l.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,m){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),b=o.util.createCanvasElement(),x,T=this.canvas.getRetinaScaling(),M=y.x/this.scaleX/T,I=y.y/this.scaleY/T;b.width=M,b.height=I,x=b.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(M,0),x.lineTo(M,I),x.lineTo(0,I),x.closePath(),x.translate(M/2,I/2),x.scale(y.zoomX/this.scaleX/T,y.zoomY/this.scaleY/T),this._applyPatternGradientTransform(x,m),x.fillStyle=m.toLive(l),x.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(T*this.scaleX/y.zoomX,T*this.scaleY/y.zoomY),l.strokeStyle=x.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=o.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,m.x+=l.offsetLeft,m.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(m,"center","center")},clone:function(l,m){var y=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(y,l):o.Object._fromObject("Object",y,l)},cloneAsImage:function(l,m){var y=this.toCanvasElement(m);return l&&l(new o.Image(y)),this},toCanvasElement:function(l){l||(l={});var m=o.util,y=m.saveObjectTransform(this),b=this.group,x=this.shadow,T=Math.abs,M=(l.multiplier||1)*(l.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,l.withoutTransform&&m.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var I=o.util.createCanvasElement(),R=this.getBoundingRect(!0,!0),W=this.shadow,K,$={x:0,y:0},se,fe,le;W&&(se=W.blur,W.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),$.x=2*Math.round(T(W.offsetX)+se)*T(K.scaleX),$.y=2*Math.round(T(W.offsetY)+se)*T(K.scaleY)),fe=R.width+$.x,le=R.height+$.y,I.width=Math.ceil(fe),I.height=Math.ceil(le);var ce=new o.StaticCanvas(I,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(ce.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point(ce.width/2,ce.height/2),"center","center");var _e=this.canvas;ce.add(this);var Oe=ce.toCanvasElement(M||1,l);return this.shadow=x,this.set("canvas",_e),b&&(this.group=b),this.set(y).setCoords(),ce._objects=[],ce.dispose(),ce=null,Oe},toDataURL:function(l){return l||(l={}),o.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",l),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,m){m=m||this.canvas.getPointer(l);var y=new o.Point(m.x,m.y),b=this._getLeftTopCoords();return this.angle&&(y=o.util.rotatePoint(y,b,s(-this.angle))),{x:y.x-b.x,y:y.y-b.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),h(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(l,m,y,b){var x=o[l];m=c(m,!0),o.util.enlivenPatterns([m.fill,m.stroke],function(T){typeof T[0]<"u"&&(m.fill=T[0]),typeof T[1]<"u"&&(m.stroke=T[1]),o.util.enlivenObjectEnlivables(m,m,function(){var M=b?new x(m[b],m):new x(m);y&&y(M)})})},o.Object.__uid=0)}(t),function(){var g=e.util.degreesToRadians,o={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(c,n,a,s,u){var p=c.x,l=c.y,m,y,b;return typeof n=="string"?n=o[n]:n-=.5,typeof s=="string"?s=o[s]:s-=.5,m=s-n,typeof a=="string"?a=h[a]:a-=.5,typeof u=="string"?u=h[u]:u-=.5,y=u-a,(m||y)&&(b=this._getTransformedDimensions(),p=c.x+m*b.x,l=c.y+y*b.y),new e.Point(p,l)},translateToCenterPoint:function(c,n,a){var s=this.translateToGivenOrigin(c,n,a,"center","center");return this.angle?e.util.rotatePoint(s,c,g(this.angle)):s},translateToOriginPoint:function(c,n,a){var s=this.translateToGivenOrigin(c,"center","center",n,a);return this.angle?e.util.rotatePoint(s,c,g(this.angle)):s},getCenterPoint:function(){var c=new e.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,n){var a=this.getCenterPoint();return this.translateToOriginPoint(a,c,n)},toLocalPoint:function(c,n,a){var s=this.getCenterPoint(),u,p;return typeof n<"u"&&typeof a<"u"?u=this.translateToGivenOrigin(s,"center","center",n,a):u=new e.Point(this.left,this.top),p=new e.Point(c.x,c.y),this.angle&&(p=e.util.rotatePoint(p,s,-g(this.angle))),p.subtractEquals(u)},setPositionByOrigin:function(c,n,a){var s=this.translateToCenterPoint(c,n,a),u=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(c){var n=g(this.angle),a=this.getScaledWidth(),s=e.util.cos(n)*a,u=e.util.sin(n)*a,p,l;typeof this.originX=="string"?p=o[this.originX]:p=this.originX-.5,typeof c=="string"?l=o[c]:l=c-.5,this.left+=s*(l-p),this.top+=u*(l-p),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function g(a){return[new e.Point(a.tl.x,a.tl.y),new e.Point(a.tr.x,a.tr.y),new e.Point(a.br.x,a.br.y),new e.Point(a.bl.x,a.bl.y)]}var o=e.util,h=o.degreesToRadians,c=o.multiplyTransformMatrices,n=o.transformPoint;o.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(a,s){return s?a?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),a?this.aCoords:this.lineCoords)},getCoords:function(a,s){return g(this._getCoords(a,s))},intersectsWithRect:function(a,s,u,p){var l=this.getCoords(u,p),m=e.Intersection.intersectPolygonRectangle(l,a,s);return m.status==="Intersection"},intersectsWithObject:function(a,s,u){var p=e.Intersection.intersectPolygonPolygon(this.getCoords(s,u),a.getCoords(s,u));return p.status==="Intersection"||a.isContainedWithinObject(this,s,u)||this.isContainedWithinObject(a,s,u)},isContainedWithinObject:function(a,s,u){for(var p=this.getCoords(s,u),l=s?a.aCoords:a.lineCoords,m=0,y=a._getImageLines(l);m<4;m++)if(!a.containsPoint(p[m],y))return!1;return!0},isContainedWithinRect:function(a,s,u,p){var l=this.getBoundingRect(u,p);return l.left>=a.x&&l.left+l.width<=s.x&&l.top>=a.y&&l.top+l.height<=s.y},containsPoint:function(a,m,u,p){var l=this._getCoords(u,p),m=m||this._getImageLines(l),y=this._findCrossPoints(a,m);return y!==0&&y%2===1},isOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br,p=this.getCoords(!0,a);return p.some(function(l){return l.x<=u.x&&l.x>=s.x&&l.y<=u.y&&l.y>=s.y})||this.intersectsWithRect(s,u,!0,a)?!0:this._containsCenterOfCanvas(s,u,a)},_containsCenterOfCanvas:function(a,s,u){var p={x:(a.x+s.x)/2,y:(a.y+s.y)/2};return!!this.containsPoint(p,null,!0,u)},isPartiallyOnScreen:function(a){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,u=this.canvas.vptCoords.br;if(this.intersectsWithRect(s,u,!0,a))return!0;var p=this.getCoords(!0,a).every(function(l){return(l.x>=u.x||l.x<=s.x)&&(l.y>=u.y||l.y<=s.y)});return p&&this._containsCenterOfCanvas(s,u,a)},_getImageLines:function(a){var s={topline:{o:a.tl,d:a.tr},rightline:{o:a.tr,d:a.br},bottomline:{o:a.br,d:a.bl},leftline:{o:a.bl,d:a.tl}};return s},_findCrossPoints:function(a,s){var u,p,l,m,y,b=0,x;for(var T in s)if(x=s[T],!(x.o.y<a.y&&x.d.y<a.y)&&!(x.o.y>=a.y&&x.d.y>=a.y)&&(x.o.x===x.d.x&&x.o.x>=a.x?y=x.o.x:(u=0,p=(x.d.y-x.o.y)/(x.d.x-x.o.x),l=a.y-u*a.x,m=x.o.y-p*x.o.x,y=-(l-m)/(u-p)),y>=a.x&&(b+=1),b===2))break;return b},getBoundingRect:function(a,s){var u=this.getCoords(a,s);return o.makeBoundingBoxFromPoints(u)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(a){return Math.abs(a)<this.minScaleLimit?a<0?-this.minScaleLimit:this.minScaleLimit:a===0?1e-4:a},scale:function(a){return this._set("scaleX",a),this._set("scaleY",a),this.setCoords()},scaleToWidth:function(a,s){var u=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(a/this.width/u)},scaleToHeight:function(a,s){var u=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(a/this.height/u)},calcLineCoords:function(){var a=this.getViewportTransform(),s=this.padding,u=h(this.angle),p=o.cos(u),l=o.sin(u),m=p*s,y=l*s,b=m+y,x=m-y,T=this.calcACoords(),M={tl:n(T.tl,a),tr:n(T.tr,a),bl:n(T.bl,a),br:n(T.br,a)};return s&&(M.tl.x-=x,M.tl.y-=b,M.tr.x+=b,M.tr.y-=x,M.bl.x-=b,M.bl.y+=x,M.br.x+=x,M.br.y+=b),M},calcOCoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=this.getViewportTransform(),p=c(u,s),l=c(p,a),l=c(l,[1/u[0],0,0,1/u[3],0,0]),m=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(b,x,T){y[x]=b.positionHandler(m,l,T)}),y},calcACoords:function(){var a=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),u=c(s,a),p=this._getTransformedDimensions(),l=p.x/2,m=p.y/2;return{tl:n({x:-l,y:-m},u),tr:n({x:l,y:-m},u),bl:n({x:-l,y:m},u),br:n({x:l,y:m},u)}},setCoords:function(a){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),a?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var a=this.getCenterPoint();return[1,0,0,1,a.x,a.y]},transformMatrixKey:function(a){var s="_",u="";return!a&&this.group&&(u=this.group.transformMatrixKey(a)+s),u+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(a){var s=this.calcOwnMatrix();if(a||!this.group)return s;var u=this.transformMatrixKey(a),p=this.matrixCache||(this.matrixCache={});return p.key===u?p.value:(this.group&&(s=c(this.group.calcTransformMatrix(!1),s)),p.key=u,p.value=s,s)},calcOwnMatrix:function(){var a=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===a)return s.value;var u=this._calcTranslateMatrix(),p={angle:this.angle,translateX:u[4],translateY:u[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=a,s.value=o.composeMatrix(p),s.value},_getNonTransformedDimensions:function(){var a=this.strokeWidth,s=this.width+a,u=this.height+a;return{x:s,y:u}},_getTransformedDimensions:function(a,s){typeof a>"u"&&(a=this.skewX),typeof s>"u"&&(s=this.skewY);var u,p,l,m=a===0&&s===0;if(this.strokeUniform?(p=this.width,l=this.height):(u=this._getNonTransformedDimensions(),p=u.x,l=u.y),m)return this._finalizeDimensions(p*this.scaleX,l*this.scaleY);var y=o.sizeAfterTransform(p,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:a,skewY:s});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(a,s){return this.strokeUniform?{x:a+this.strokeWidth,y:s+this.strokeWidth}:{x:a,y:s}},_calculateCurrentDimensions:function(){var a=this.getViewportTransform(),s=this._getTransformedDimensions(),u=n(s,a,!0);return u.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),function(){function g(h,c){if(c){if(c.toLive)return h+": url(#SVGID_"+c.id+"); ";var n=new e.Color(c),a=h+": "+n.toRgb()+"; ",s=n.getAlpha();return s!==1&&(a+=h+"-opacity: "+s.toString()+"; "),a}else return h+": none; "}var o=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(h){var c=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",b=h?"":this.getSvgFilter(),x=g("fill",this.fill),T=g("stroke",this.stroke);return[T,"stroke-width: ",n,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",l,"; ",x,"fill-rule: ",c,"; ","opacity: ",m,";",b,y].join("")},getSvgSpanStyles:function(h,c){var n="; ",s=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+n:"",a=h.strokeWidth?"stroke-width: "+h.strokeWidth+n:"",s=s,u=h.fontSize?"font-size: "+h.fontSize+"px"+n:"",p=h.fontStyle?"font-style: "+h.fontStyle+n:"",l=h.fontWeight?"font-weight: "+h.fontWeight+n:"",m=h.fill?g("fill",h.fill):"",y=h.stroke?g("stroke",h.stroke):"",b=this.getSvgTextDecoration(h),x=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return b&&(b="text-decoration: "+b+n),[y,a,s,u,p,l,b,m,x,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(c){return h[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,c){var n=h?this.calcTransformMatrix():this.calcOwnMatrix(),a='transform="'+e.util.matrixToSVG(n);return a+(c||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var c=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,c),'" y="',o(-this.height/2,c),'" width="',o(this.width,c),'" height="',o(this.height,c),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,c){c=c||{};var n=c.reviver,a=c.additionalTransform||"",s=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),u=h.indexOf("COMMON_PARTS");return h[u]=s,n?n(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,c){c=c||{};var n=c.noStyle,a=c.reviver,s=n?"":'style="'+this.getSvgStyles()+'" ',u=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=p&&p.absolutePositioned,y=this.stroke,b=this.fill,x=this.shadow,T,M=[],I,R=h.indexOf("COMMON_PARTS"),W=c.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+e.Object.__uid++,I='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(a)+`</clipPath>
`),m&&M.push("<g ",u,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),m?"":u+this.getSvgCommons(),` >
`),T=[s,l,n?"":this.addPaintOrder()," ",W?'transform="'+W+'" ':""].join(""),h[R]=T,b&&b.toLive&&M.push(b.toSVG(this)),y&&y.toLive&&M.push(y.toSVG(this)),x&&M.push(x.toSVG(this)),p&&M.push(I),M.push(h.join("")),M.push(`</g>
`),m&&M.push(`</g>
`),a?a(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var g=e.util.object.extend,o="stateProperties";function h(n,a,s){var u={},p=!0;s.forEach(function(l){u[l]=n[l]}),g(n[a],u,p)}function c(n,a,s){if(n===a)return!0;if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(var u=0,p=n.length;u<p;u++)if(!c(n[u],a[u]))return!1;return!0}else if(n&&typeof n=="object"){var l=Object.keys(n),m;if(!a||typeof a!="object"||!s&&l.length!==Object.keys(a).length)return!1;for(var u=0,p=l.length;u<p;u++)if(m=l[u],!(m==="canvas"||m==="group")&&!c(n[m],a[m]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(n){n=n||o;var a="_"+n;return Object.keys(this[a]).length<this[n].length?!0:!c(this[a],this,!0)},saveState:function(n){var a=n&&n.propertySet||o,s="_"+a;return this[s]?(h(this,s,this[a]),n&&n.stateProperties&&h(this,s,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var a=n.propertySet||o;return n.propertySet=a,this["_"+a]={},this.saveState(n),this}})}(),function(){var g=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(o,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=o.x,n=o.y,a,s,u=Object.keys(this.oCoords),p=u.length-1,l;for(this.__corner=0;p>=0;p--)if(l=u[p],!!this.isControlVisible(l)&&(s=this._getImageLines(h?this.oCoords[l].touchCorner:this.oCoords[l].corner),a=this._findCrossPoints({x:c,y:n},s),a!==0&&a%2===1))return this.__corner=l,l;return!1},forEachControl:function(o){for(var h in this.controls)o(this.controls[h],h,this)},_setCornerCoords:function(){var o=this.oCoords;for(var h in o){var c=this.controls[h];o[h].corner=c.calcCornerCoords(this.angle,this.cornerSize,o[h].x,o[h].y,!1),o[h].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,o[h].x,o[h].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var h=this.getCenterPoint(),c=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return o.translate(h.x,h.y),o.scale(1/n[0],1/n[3]),o.rotate(g(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-c.x/2,-c.y/2,c.x,c.y),o.restore(),this},drawBorders:function(o,h){h=h||{};var c=this._calculateCurrentDimensions(),n=this.borderScaleFactor,a=c.x+n,s=c.y+n,u=typeof h.hasControls<"u"?h.hasControls:this.hasControls,p=!1;return o.save(),o.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(o,h.borderDashArray||this.borderDashArray),o.strokeRect(-a/2,-s/2,a,s),u&&(o.beginPath(),this.forEachControl(function(l,m,y){l.withConnection&&l.getVisibility(y,m)&&(p=!0,o.moveTo(l.x*a,l.y*s),o.lineTo(l.x*a+l.offsetX,l.y*s+l.offsetY))}),p&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,h,c){c=c||{};var n=e.util.sizeAfterTransform(this.width,this.height,h),a=this.strokeWidth,s=this.strokeUniform,u=this.borderScaleFactor,p=n.x+a*(s?this.canvas.getZoom():h.scaleX)+u,l=n.y+a*(s?this.canvas.getZoom():h.scaleY)+u;return o.save(),this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeStyle=c.borderColor||this.borderColor,o.strokeRect(-p/2,-l/2,p,l),o.restore(),this},drawControls:function(o,h){h=h||{},o.save();var c=this.canvas.getRetinaScaling(),n,a;return o.setTransform(c,0,0,c,0,0),o.strokeStyle=o.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(s,u,p){a=p.oCoords[u],s.getVisibility(p,u)&&(n&&(a=e.util.transformPoint(a,n)),s.render(o,a.x,a.y,h,p))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=h,this},setControlsVisibility:function(o){o||(o={});for(var h in o)this.setControlVisible(h,o[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,o){o=o||{};var h=function(){},c=o.onComplete||h,n=o.onChange||h,a=this;return e.util.animate({target:this,startValue:g.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(s){g.set("left",s),a.requestRenderAll(),n()},onComplete:function(){g.setCoords(),c()}})},fxCenterObjectV:function(g,o){o=o||{};var h=function(){},c=o.onComplete||h,n=o.onChange||h,a=this;return e.util.animate({target:this,startValue:g.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(s){g.set("top",s),a.requestRenderAll(),n()},onComplete:function(){g.setCoords(),c()}})},fxRemove:function(g,o){o=o||{};var h=function(){},c=o.onComplete||h,n=o.onChange||h,a=this;return e.util.animate({target:this,startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){g.set("opacity",s),a.requestRenderAll(),n()},onComplete:function(){a.remove(g),c()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],o,h,c=[];for(o in arguments[0])g.push(o);for(var n=0,a=g.length;n<a;n++)o=g[n],h=n!==a-1,c.push(this._animate(o,arguments[0][o],arguments[1],h));return c}else return this._animate.apply(this,arguments)},_animate:function(g,o,h,c){var n=this,a;o=o.toString(),h?h=e.util.object.clone(h):h={},~g.indexOf(".")&&(a=g.split("."));var s=n.colorProperties.indexOf(g)>-1||a&&n.colorProperties.indexOf(a[1])>-1,u=a?this.get(a[0])[a[1]]:this.get(g);"from"in h||(h.from=u),s||(~o.indexOf("=")?o=u+parseFloat(o.replace("=","")):o=parseFloat(o));var p={target:this,startValue:h.from,endValue:o,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(l,m,y){return h.abort.call(n,l,m,y)},onChange:function(l,m,y){a?n[a[0]][a[1]]=l:n.set(g,l),!c&&h.onChange&&h.onChange(l,m,y)},onComplete:function(l,m,y){c||(n.setCoords(),h.onComplete&&h.onComplete(l,m,y))}};return s?e.util.animateColor(p.startValue,p.endValue,p.duration,p):e.util.animate(p)}}),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};if(o.Line){o.warn("fabric.Line is already defined");return}o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,u){s||(s=[0,0,0,0]),this.callSuper("initialize",u),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(u)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,u){return this.callSuper("_set",s,u),typeof n[s]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var u=this.calcLinePoints();s.moveTo(u.x1,u.y1),s.lineTo(u.x2,u.y2),s.lineWidth=this.strokeWidth;var p=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return h(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(s.y-=this.strokeWidth),this.height===0&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,u=this.y1<=this.y2?-1:1,p=s*this.width*.5,l=u*this.height*.5,m=s*this.width*-.5,y=u*this.height*-.5;return{x1:p,x2:m,y1:l,y2:y}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`" />
`]}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(s,u,p){p=p||{};var l=o.parseAttributes(s,o.Line.ATTRIBUTE_NAMES),m=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];u(new o.Line(m,h(l,p)))},o.Line.fromObject=function(s,u){function p(m){delete m.points,u&&u(m)}var l=c(s,!0);l.points=[s.x1,s.y1,s.x2,s.y2],o.Object._fromObject("Line",l,p,"points")};function a(s,u){var p=s.origin,l=s.axis1,m=s.axis2,y=s.dimension,b=u.nearest,x=u.center,T=u.farthest;return function(){switch(this.get(p)){case b:return Math.min(this.get(l),this.get(m));case x:return Math.min(this.get(l),this.get(m))+.5*this.get(y);case T:return Math.max(this.get(l),this.get(m))}}}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.degreesToRadians;if(o.Circle){o.warn("fabric.Circle is already defined.");return}o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,a){return this.callSuper("_set",n,a),n==="radius"&&this.setRadius(a),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,a=0,s=0,u=(this.endAngle-this.startAngle)%360;if(u===0)n=["<circle ","COMMON_PARTS",'cx="'+a+'" cy="'+s+'" ','r="',this.radius,`" />
`];else{var p=h(this.startAngle),l=h(this.endAngle),m=this.radius,y=o.util.cos(p)*m,b=o.util.sin(p)*m,x=o.util.cos(l)*m,T=o.util.sin(l)*m,M=u>180?"1":"0";n=['<path d="M '+y+" "+b," A "+m+" "+m," 0 ",+M+" 1"," "+x+" "+T,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,h(this.startAngle),h(this.endAngle),!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(n,a){var s=o.parseAttributes(n,o.Circle.ATTRIBUTE_NAMES);if(!c(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,a(new o.Circle(s))};function c(n){return"radius"in n&&n.radius>=0}o.Circle.fromObject=function(n,a){o.Object._fromObject("Circle",n,a)}}(t),function(g){var o=g.fabric||(g.fabric={});if(o.Triangle){o.warn("fabric.Triangle is already defined");return}o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(h){var c=this.width/2,n=this.height/2;h.beginPath(),h.moveTo(-c,n),h.lineTo(0,-n),h.lineTo(c,n),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,c=this.height/2,n=[-h+" "+c,"0 "+-c,h+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),o.Triangle.fromObject=function(h,c){return o.Object._fromObject("Triangle",h,c)}}(t),function(g){var o=g.fabric||(g.fabric={}),h=Math.PI*2;if(o.Ellipse){o.warn("fabric.Ellipse is already defined.");return}o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,n){switch(this.callSuper("_set",c,n),c){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,h,!1),c.restore(),this._renderPaintInOrder(c)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(c,n){var a=o.parseAttributes(c,o.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,n(new o.Ellipse(a))},o.Ellipse.fromObject=function(c,n){o.Object._fromObject("Ellipse",c,n)}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var n=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,u=this.height,p=-this.width/2,l=-this.height/2,m=n!==0||a!==0,y=1-.5522847498;c.beginPath(),c.moveTo(p+n,l),c.lineTo(p+s-n,l),m&&c.bezierCurveTo(p+s-y*n,l,p+s,l+y*a,p+s,l+a),c.lineTo(p+s,l+u-a),m&&c.bezierCurveTo(p+s,l+u-y*a,p+s-y*n,l+u,p+s-n,l+u),c.lineTo(p+n,l+u),m&&c.bezierCurveTo(p+y*n,l+u,p,l+u-y*a,p,l+u-a),c.lineTo(p,l+a),m&&c.bezierCurveTo(p,l+y*a,p+y*n,l,p+n,l),c.closePath(),this._renderPaintInOrder(c)},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(c,n,a){if(!c)return n(null);a=a||{};var s=o.parseAttributes(c,o.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var u=new o.Rect(h(a?o.util.object.clone(a):{},s));u.visible=u.visible&&u.width>0&&u.height>0,n(u)},o.Rect.fromObject=function(c,n){return o.Object._fromObject("Rect",c,n)}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.util.array.min,n=o.util.array.max,a=o.util.toFixed,s=o.util.projectStrokeOnPoints;if(o.Polyline){o.warn("fabric.Polyline is already defined");return}o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(u,p){p=p||{},this.points=u||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(u){var p=this._calcDimensions(u),l,m=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-m,this.height=p.height-m,u.fromSVG||(l=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+m/2,y:p.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof u.left>"u"&&(this.left=u.fromSVG?p.left:l.x),typeof u.top>"u"&&(this.top=u.fromSVG?p.top:l.y),this.pathOffset={x:p.left+this.width/2+m/2,y:p.top+this.height/2+m/2}},_calcDimensions:function(){var u=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=c(u,"x")||0,l=c(u,"y")||0,m=n(u,"x")||0,y=n(u,"y")||0,b=m-p,x=y-l;return{left:p,top:l,width:b,height:x}},toObject:function(u){return h(this.callSuper("toObject",u),{points:this.points.concat()})},_toSVG:function(){for(var u=[],p=this.pathOffset.x,l=this.pathOffset.y,m=o.Object.NUM_FRACTION_DIGITS,y=0,b=this.points.length;y<b;y++)u.push(a(this.points[y].x-p,m),",",a(this.points[y].y-l,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',u.join(""),`" />
`]},commonRender:function(u){var p,l=this.points.length,m=this.pathOffset.x,y=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;u.beginPath(),u.moveTo(this.points[0].x-m,this.points[0].y-y);for(var b=0;b<l;b++)p=this.points[b],u.lineTo(p.x-m,p.y-y);return!0},_render:function(u){this.commonRender(u)&&this._renderPaintInOrder(u)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(u){return function(p,l,m){if(!p)return l(null);m||(m={});var y=o.parsePointsAttribute(p.getAttribute("points")),b=o.parseAttributes(p,o[u].ATTRIBUTE_NAMES);b.fromSVG=!0,l(new o[u](y,h(b,m)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(u,p){return o.Object._fromObject("Polyline",u,p,"points")}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.projectStrokeOnPoints;if(o.Polygon){o.warn("fabric.Polygon is already defined");return}o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return h(this.points,this)},_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(c,n){o.Object._fromObject("Polygon",c,n,"points")}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.array.min,c=o.util.array.max,n=o.util.object.extend,a=o.util.object.clone,s=o.util.toFixed;if(o.Path){o.warn("fabric.Path is already defined");return}o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(u,p){p=a(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(u||[],p)},_setPath:function(u,p){this.path=o.util.makePathSimpler(Array.isArray(u)?u:o.util.parsePath(u)),o.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(u){var p,l=0,m=0,y=0,b=0,x=0,T=0,M=-this.pathOffset.x,I=-this.pathOffset.y;u.beginPath();for(var R=0,W=this.path.length;R<W;++R)switch(p=this.path[R],p[0]){case"L":y=p[1],b=p[2],u.lineTo(y+M,b+I);break;case"M":y=p[1],b=p[2],l=y,m=b,u.moveTo(y+M,b+I);break;case"C":y=p[5],b=p[6],x=p[3],T=p[4],u.bezierCurveTo(p[1]+M,p[2]+I,x+M,T+I,y+M,b+I);break;case"Q":u.quadraticCurveTo(p[1]+M,p[2]+I,p[3]+M,p[4]+I),y=p[3],b=p[4],x=p[1],T=p[2];break;case"z":case"Z":y=l,b=m,u.closePath();break}},_render:function(u){this._renderPathCommands(u),this._renderPaintInOrder(u)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(u){return n(this.callSuper("toObject",u),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(u){var p=this.toObject(["sourcePath"].concat(u));return p.sourcePath&&delete p.path,p},_toSVG:function(){var u=o.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',u,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var u=o.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,u)+", "+s(-this.pathOffset.y,u)+")"},toClipPathSVG:function(u){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},toSVG:function(u){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var u=[],p=[],l,m=0,y=0,b=0,x=0,T,M=0,I=this.path.length;M<I;++M){switch(l=this.path[M],l[0]){case"L":b=l[1],x=l[2],T=[];break;case"M":b=l[1],x=l[2],m=b,y=x,T=[];break;case"C":T=o.util.getBoundsOfCurve(b,x,l[1],l[2],l[3],l[4],l[5],l[6]),b=l[5],x=l[6];break;case"Q":T=o.util.getBoundsOfCurve(b,x,l[1],l[2],l[1],l[2],l[3],l[4]),b=l[3],x=l[4];break;case"z":case"Z":b=m,x=y;break}T.forEach(function(le){u.push(le.x),p.push(le.y)}),u.push(b),p.push(x)}var R=h(u)||0,W=h(p)||0,K=c(u)||0,$=c(p)||0,se=K-R,fe=$-W;return{left:R,top:W,width:se,height:fe}}}),o.Path.fromObject=function(u,p){if(typeof u.sourcePath=="string"){var l=u.sourcePath;o.loadSVGFromURL(l,function(m){var y=m[0];y.setOptions(u),p&&p(y)})}else o.Object._fromObject("Path",u,p,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(u,p,l){var m=o.parseAttributes(u,o.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,p(new o.Path(m.d,n(m,l)))}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.array.min,c=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,a,s){a=a||{},this._objects=[],s&&this.callSuper("initialize",a),this._objects=n||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(s)this._updateObjectsACoords();else{var p=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,a=this._objects.length;a--;)this._objects[a].setCoords(n)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),s=this._objects.length;s--;)this._updateObjectCoords(this._objects[s],a)},_updateObjectCoords:function(n,a){var s=n.left,u=n.top,p=!0;n.set({left:s-a.x,top:u-a.y}),n.group=this,n.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var a=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),n&&(a&&o.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,a){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(n,a);if(n==="canvas")for(;s--;)this._objects[s]._set(n,a);o.Object.prototype._set.call(this,n,a)},toObject:function(n){var a=this.includeDefaultValues,s=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var l=p.includeDefaultValues;p.includeDefaultValues=a;var m=p.toObject(n);return p.includeDefaultValues=l,m}),u=o.Object.prototype.toObject.call(this,n);return u.objects=s,u},toDatalessObject:function(n){var a,s=this.sourcePath;if(s)a=s;else{var u=this.includeDefaultValues;a=this._objects.map(function(l){var m=l.includeDefaultValues;l.includeDefaultValues=u;var y=l.toDatalessObject(n);return l.includeDefaultValues=m,y})}var p=o.Object.prototype.toDatalessObject.call(this,n);return p.objects=a,p},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=o.Object.prototype.shouldCache.call(this);if(n){for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,a=this._objects.length;n<a;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var a=0,s=this._objects.length;a<s;a++)this._objects[a].render(n);this._drawClipPath(n,this.clipPath)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var a=0,s=this._objects.length;a<s;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-p/2,u,p)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(a){o.util.addTransformToObject(a,n),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(n){n.dispose&&n.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var n=this._objects,a=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var u=new o.ActiveSelection([]);return u.set(s),u.type="activeSelection",a.remove(this),n.forEach(function(p){p.group=u,p.dirty=!0,a.add(p)}),u.canvas=a,u._objects=n,a._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0;return this.forEachObject(function(a){a.setCoords(n)}),this},_calcBounds:function(n){for(var a=[],s=[],u,p,l,m=["tr","br","bl","tl"],y=0,b=this._objects.length,x,T=m.length;y<b;++y){for(u=this._objects[y],l=u.calcACoords(),x=0;x<T;x++)p=m[x],a.push(l[p].x),s.push(l[p].y);u.aCoords=l}this._getBounds(a,s,n)},_getBounds:function(n,a,s){var u=new o.Point(h(n),h(a)),p=new o.Point(c(n),c(a)),l=u.y||0,m=u.x||0,y=p.x-u.x||0,b=p.y-u.y||0;this.width=y,this.height=b,s||this.setPositionByOrigin({x:m,y:l},"left","top")},_toSVG:function(n){for(var a=["<g ","COMMON_PARTS",` >
`],s=0,u=this._objects.length;s<u;s++)a.push("		",this._objects[s].toSVG(n));return a.push(`</g>
`),a},getSvgStyles:function(){var n=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),a].join("")},toClipPathSVG:function(n){for(var a=[],s=0,u=this._objects.length;s<u;s++)a.push("	",this._objects[s].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(a,{reviver:n})}}),o.Group.fromObject=function(n,a){var s=n.objects,u=o.util.object.clone(n,!0);if(delete u.objects,typeof s=="string"){o.loadSVGFromURL(s,function(p){var l=o.util.groupSVGElements(p,n,s);l.set(u),a&&a(l)});return}o.util.enlivenObjects(s,function(p){var l=o.util.object.clone(n,!0);delete l.objects,o.util.enlivenObjectEnlivables(n,l,function(){a&&a(new o.Group(p,l,!0))})})})}(t),function(g){var o=g.fabric||(g.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(h,c){c=c||{},this._objects=h||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var c=o.Object.prototype.toObject.call(this),n=new o.Group([]);if(delete c.type,n.set(c),h.forEach(function(s){s.canvas.remove(s),s.group=n}),n._objects=h,!this.canvas)return n;var a=this.canvas;return a.add(n),a._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,c,n){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",h,c),n=n||{},typeof n.hasControls>"u"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var a=0,s=this._objects.length;a<s;a++)this._objects[a]._renderControls(h,n);h.restore()}}),o.ActiveSelection.fromObject=function(h,c){o.util.enlivenObjects(h.objects,function(n){delete h.objects,c&&c(new o.ActiveSelection(n,h,!0))})})}(t),function(g){var o=e.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,c){c||(c={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",c),this._initElement(h,c)},getElement:function(){return this._element||{}},setElement:function(h,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var c=e.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(h)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(h){e.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,n=this.height/2;h.beginPath(),h.moveTo(-c,-n),h.lineTo(c,-n),h.lineTo(c,n),h.lineTo(-c,n),h.lineTo(-c,-n),h.closePath()}},toObject:function(h){var c=[];this.filters.forEach(function(a){a&&c.push(a.toObject())});var n=o(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],c=[],n,a=this._element,s=-this.width/2,u=-this.height/2,p="",l="";if(!a)return[];if(this.hasCrop()){var m=e.Object.__uid++;h.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+s+'" y="'+u+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',u-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,l,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,n=["	<rect ",'x="',s,'" y="',u,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?h=h.concat(n,c):h=h.concat(c,n),h},getSrc:function(h){var c=h?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(h,c,n){return e.util.loadImage(h,function(a,s){this.setElement(a,n),this._setWidthHeight(),c&&c(this,s)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,c=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),a=n.scaleX,s=n.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||a>c&&s>c){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,this._lastScaleY=s;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var p=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=u.width,y=u.height;p.width=m,p.height=y,this._element=p,this._lastScaleX=h.scaleX=a,this._lastScaleY=h.scaleY=s,e.filterBackend.applyFilters([h],u,m,y,this._element,l),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,n=c.naturalWidth||c.width,a=c.naturalHeight||c.height;if(this._element===this._originalElement){var s=e.util.createCanvasElement();s.width=n,s.height=a,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,a),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(h,this._originalElement,n,a,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var c=this._element;if(c){var n=this._filterScalingX,a=this._filterScalingY,s=this.width,u=this.height,p=Math.min,l=Math.max,m=l(this.cropX,0),y=l(this.cropY,0),b=c.naturalWidth||c.width,x=c.naturalHeight||c.height,T=m*n,M=y*a,I=p(s*n,b-T),R=p(u*a,x-M),W=-s/2,K=-u/2,$=p(s,b/n-m),se=p(u,x/a-y);c&&h.drawImage(c,T,M,I,R,W,K,$,se)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,c){this.setElement(e.util.getById(h),c),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,c){h&&h.length?e.util.enlivenObjects(h,function(n){c&&c(n)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(h){h||(h={});var c=this.getElement();this.width=h.width||c.naturalWidth||c.width||0,this.height=h.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var h=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,n=this._element.height,a=1,s=1,u=0,p=0,l=0,m=0,y,b=this.width,x=this.height,T={width:b,height:x};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(a=s=e.util.findScaleToFit(this._element,T),y=(b-c*a)/2,h.alignX==="Min"&&(u=-y),h.alignX==="Max"&&(u=y),y=(x-n*s)/2,h.alignY==="Min"&&(p=-y),h.alignY==="Max"&&(p=y)),h.meetOrSlice==="slice"&&(a=s=e.util.findScaleToCover(this._element,T),y=c-b/a,h.alignX==="Mid"&&(l=y/2),h.alignX==="Max"&&(l=y),y=n-x/s,h.alignY==="Mid"&&(m=y/2),h.alignY==="Max"&&(m=y),c=b/a,n=x/s)):(a=b/c,s=x/n),{width:c,height:n,scaleX:a,scaleY:s,offsetLeft:u,offsetTop:p,cropX:l,cropY:m}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(h,c){var n=e.util.object.clone(h);e.util.loadImage(n.src,function(a,s){if(s){c&&c(null,!0);return}e.Image.prototype._initFilters.call(n,n.filters,function(u){n.filters=u||[],e.Image.prototype._initFilters.call(n,[n.resizeFilter],function(p){n.resizeFilter=p[0],e.util.enlivenObjectEnlivables(n,n,function(){var l=new e.Image(a,n);c(l,!1)})})})},null,n.crossOrigin)},e.Image.fromURL=function(h,c,n){e.util.loadImage(h,function(a,s){c&&c(new e.Image(a,n),s)},null,n&&n.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(h,c,n){var a=e.parseAttributes(h,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(a["xlink:href"],c,o(n?e.util.object.clone(n):{},a))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(g){g=g||{};var o=function(){},h=g.onComplete||o,c=g.onChange||o,n=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){n.rotate(a),c()},onComplete:function(){n.setCoords(),h()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function g(h,c){var n="precision "+c+` float;
void main(){}`,a=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(a,n),h.compileShader(a),!!h.getShaderParameter(a,h.COMPILE_STATUS)}e.isWebglSupported=function(h){if(e.isLikelyNode)return!1;h=h||e.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),n=c.getContext("webgl")||c.getContext("experimental-webgl"),a=!1;if(n){e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),a=e.maxTextureSize>=h;for(var s=["highp","mediump","lowp"],u=0;u<3;u++)if(g(n,s[u])){e.webGlPrecision=s[u];break}}return this.isSupported=a,a},e.WebglFilterBackend=o;function o(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.prototype={tileSize:2048,resources:{},setupGLContext:function(h,c){this.dispose(),this.createWebGLCanvas(h,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,c)},chooseFastestCopyGLTo2DMethod:function(h,c){var n=typeof window.performance<"u",a;try{new ImageData(1,1),a=!0}catch{a=!1}var s=typeof ArrayBuffer<"u",u=typeof Uint8ClampedArray<"u";if(n&&a&&s&&u){var p=e.util.createCanvasElement(),l=new ArrayBuffer(h*c*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=O;return}var m={imageBuffer:l,destinationWidth:h,destinationHeight:c,targetCanvas:p},y,b,x;p.width=h,p.height=c,y=window.performance.now(),E.call(m,this.gl,m),b=window.performance.now()-y,y=window.performance.now(),O.call(m,this.gl,m),x=window.performance.now()-y,b>x?(this.imageBuffer=l,this.copyGLTo2D=O):this.copyGLTo2D=E}},createWebGLCanvas:function(h,c){var n=e.util.createCanvasElement();n.width=h,n.height=c;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=n.getContext("webgl",a);s||(s=n.getContext("experimental-webgl",a)),s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)},applyFilters:function(h,c,n,a,s,u){var p=this.gl,l;u&&(l=this.getCachedTexture(u,c));var m={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:n,sourceHeight:a,destinationWidth:n,destinationHeight:a,context:p,sourceTexture:this.createTexture(p,n,a,!l&&c),targetTexture:this.createTexture(p,n,a),originalTexture:l||this.createTexture(p,n,a,!l&&c),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},y=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,y),h.forEach(function(b){b&&b.applyTo(m)}),C(m),this.copyGLTo2D(p,m),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(m.sourceTexture),p.deleteTexture(m.targetTexture),p.deleteFramebuffer(y),s.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,c,n,a){var s=h.createTexture();return h.bindTexture(h.TEXTURE_2D,s),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),a?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,a):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,c,n,0,h.RGBA,h.UNSIGNED_BYTE,null),s},getCachedTexture:function(h,c){if(this.textureCache[h])return this.textureCache[h];var n=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[h]=n,n},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:E,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,c={renderer:"",vendor:""};if(!h)return c;var n=h.getExtension("WEBGL_debug_renderer_info");if(n){var a=h.getParameter(n.UNMASKED_RENDERER_WEBGL),s=h.getParameter(n.UNMASKED_VENDOR_WEBGL);a&&(c.renderer=a.toLowerCase()),s&&(c.vendor=s.toLowerCase())}return this.gpuInfo=c,c}}}();function C(g){var o=g.targetCanvas,h=o.width,c=o.height,n=g.destinationWidth,a=g.destinationHeight;(h!==n||c!==a)&&(o.width=n,o.height=a)}function E(g,o){var h=g.canvas,c=o.targetCanvas,n=c.getContext("2d");n.translate(0,c.height),n.scale(1,-1);var a=h.height-c.height;n.drawImage(h,0,a,c.width,c.height,0,0,c.width,c.height)}function O(g,o){var h=o.targetCanvas,c=h.getContext("2d"),n=o.destinationWidth,a=o.destinationHeight,s=n*a*4,u=new Uint8Array(this.imageBuffer,0,s),p=new Uint8ClampedArray(this.imageBuffer,0,s);g.readPixels(0,0,n,a,g.RGBA,g.UNSIGNED_BYTE,u);var l=new ImageData(p,n,a);c.putImageData(l,0,0)}(function(){var g=function(){};e.Canvas2dFilterBackend=o;function o(){}o.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(h,c,n,a,s){var u=s.getContext("2d");u.drawImage(c,0,0,n,a);var p=u.getImageData(0,0,n,a),l=u.getImageData(0,0,n,a),m={sourceWidth:n,sourceHeight:a,imageData:p,originalEl:c,originalImageData:l,canvasEl:s,ctx:u,filterBackend:this};return h.forEach(function(y){y.applyTo(m)}),(m.imageData.width!==n||m.imageData.height!==a)&&(s.width=m.imageData.width,s.height=m.imageData.height),u.putImageData(m.imageData,0,0),m}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var o in g)this[o]=g[o]},createProgram:function(g,o,h){o=o||this.fragmentSource,h=h||this.vertexSource,e.webGlPrecision!=="highp"&&(o=o.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var c=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(c,h),g.compileShader(c),!g.getShaderParameter(c,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(c));var n=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(n,o),g.compileShader(n),!g.getShaderParameter(n,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(n));var a=g.createProgram();if(g.attachShader(a,c),g.attachShader(a,n),g.linkProgram(a),!g.getProgramParameter(a,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(a));var s=this.getAttributeLocations(g,a),u=this.getUniformLocations(g,a)||{};return u.uStepW=g.getUniformLocation(a,"uStepW"),u.uStepH=g.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:u}},getAttributeLocations:function(g,o){return{aPosition:g.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,o,h){var c=o.aPosition,n=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,n),g.enableVertexAttribArray(c),g.vertexAttribPointer(c,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,h,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var o=g.context,h,c;g.passes>1?(h=g.destinationWidth,c=g.destinationHeight,(g.sourceWidth!==h||g.sourceHeight!==c)&&(o.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(o,h,c)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,g.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(g){g.passes--,g.pass++;var o=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=o},isNeutralState:function(){var g=this.mainParameter,o=e.Image.filters[this.type].prototype;if(g)if(Array.isArray(o[g])){for(var h=o[g].length;h--;)if(this[g][h]!==o[g][h])return!1;return!0}else return o[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var o=g.context,h=this.retrieveShader(g);g.pass===0&&g.originalTexture?o.bindTexture(o.TEXTURE_2D,g.originalTexture):o.bindTexture(o.TEXTURE_2D,g.sourceTexture),o.useProgram(h.program),this.sendAttributeData(o,h.attributeLocations,g.aPosition),o.uniform1f(h.uniformLocations.uStepW,1/g.sourceWidth),o.uniform1f(h.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(o,h.uniformLocations),o.viewport(0,0,g.destinationWidth,g.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,o,h){g.activeTexture(h),g.bindTexture(g.TEXTURE_2D,o),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,o){g.activeTexture(o),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var o=document.createElement("canvas");o.width=g.sourceWidth,o.height=g.sourceHeight,g.helpLayer=o}},toObject:function(){var g={type:this.type},o=this.mainParameter;return o&&(g[o]=this[o]),g},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(g,o){var h=new e.Image.filters[g.type](g);return o&&o(h),h},function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.ColorMatrix=c(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var a=n.imageData,s=a.data,u=s.length,p=this.matrix,l,m,y,b,x,T=this.colorsOnly;for(x=0;x<u;x+=4)l=s[x],m=s[x+1],y=s[x+2],T?(s[x]=l*p[0]+m*p[1]+y*p[2]+p[4]*255,s[x+1]=l*p[5]+m*p[6]+y*p[7]+p[9]*255,s[x+2]=l*p[10]+m*p[11]+y*p[12]+p[14]*255):(b=s[x+3],s[x]=l*p[0]+m*p[1]+y*p[2]+b*p[3]+p[4]*255,s[x+1]=l*p[5]+m*p[6]+y*p[7]+b*p[8]+p[9]*255,s[x+2]=l*p[10]+m*p[11]+y*p[12]+b*p[13]+p[14]*255,s[x+3]=l*p[15]+m*p[16]+y*p[17]+b*p[18]+p[19]*255)},getUniformLocations:function(n,a){return{uColorMatrix:n.getUniformLocation(a,"uColorMatrix"),uConstants:n.getUniformLocation(a,"uConstants")}},sendUniformData:function(n,a){var s=this.matrix,u=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],p=[s[4],s[9],s[14],s[19]];n.uniformMatrix4fv(a.uColorMatrix,!1,u),n.uniform4fv(a.uConstants,p)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Brightness=c(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var a=n.imageData,s=a.data,u,p=s.length,l=Math.round(this.brightness*255);for(u=0;u<p;u+=4)s[u]=s[u]+l,s[u+1]=s[u+1]+l,s[u+2]=s[u+2]+l}},getUniformLocations:function(n,a){return{uBrightness:n.getUniformLocation(a,"uBrightness")}},sendUniformData:function(n,a){n.uniform1f(a.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.Image.filters,n=o.util.createClass;c.Convolute=n(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(a){var s=Math.sqrt(this.matrix.length),u=this.type+"_"+s+"_"+(this.opaque?1:0),p=this.fragmentSource[u];return a.programCache.hasOwnProperty(u)||(a.programCache[u]=this.createProgram(a.context,p)),a.programCache[u]},applyTo2d:function(a){var s=a.imageData,u=s.data,p=this.matrix,l=Math.round(Math.sqrt(p.length)),m=Math.floor(l/2),y=s.width,b=s.height,x=a.ctx.createImageData(y,b),T=x.data,M=this.opaque?1:0,I,R,W,K,$,se,fe,le,ce,_e,Oe,ne,D;for(Oe=0;Oe<b;Oe++)for(_e=0;_e<y;_e++){for($=(Oe*y+_e)*4,I=0,R=0,W=0,K=0,D=0;D<l;D++)for(ne=0;ne<l;ne++)fe=Oe+D-m,se=_e+ne-m,!(fe<0||fe>=b||se<0||se>=y)&&(le=(fe*y+se)*4,ce=p[D*l+ne],I+=u[le]*ce,R+=u[le+1]*ce,W+=u[le+2]*ce,M||(K+=u[le+3]*ce));T[$]=I,T[$+1]=R,T[$+2]=W,M?T[$+3]=u[$+3]:T[$+3]=K}a.imageData=x},getUniformLocations:function(a,s){return{uMatrix:a.getUniformLocation(s,"uMatrix"),uOpaque:a.getUniformLocation(s,"uOpaque"),uHalfSize:a.getUniformLocation(s,"uHalfSize"),uSize:a.getUniformLocation(s,"uSize")}},sendUniformData:function(a,s){a.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Grayscale=c(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var a=n.imageData,s=a.data,u,p=s.length,l,m=this.mode;for(u=0;u<p;u+=4)m==="average"?l=(s[u]+s[u+1]+s[u+2])/3:m==="lightness"?l=(Math.min(s[u],s[u+1],s[u+2])+Math.max(s[u],s[u+1],s[u+2]))/2:m==="luminosity"&&(l=.21*s[u]+.72*s[u+1]+.07*s[u+2]),s[u]=l,s[u+1]=l,s[u+2]=l},retrieveShader:function(n){var a=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(a)){var s=this.fragmentSource[this.mode];n.programCache[a]=this.createProgram(n.context,s)}return n.programCache[a]},getUniformLocations:function(n,a){return{uMode:n.getUniformLocation(a,"uMode")}},sendUniformData:function(n,a){var s=1;n.uniform1i(a.uMode,s)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Invert=c(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var a=n.imageData,s=a.data,u,p=s.length;for(u=0;u<p;u+=4)s[u]=255-s[u],s[u+1]=255-s[u+1],s[u+2]=255-s[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,a){return{uInvert:n.getUniformLocation(a,"uInvert")}},sendUniformData:function(n,a){n.uniform1i(a.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.Image.filters,n=o.util.createClass;c.Noise=n(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var s=a.imageData,u=s.data,p,l=u.length,m=this.noise,y;for(p=0,l=u.length;p<l;p+=4)y=(.5-Math.random())*m,u[p]+=y,u[p+1]+=y,u[p+2]+=y}},getUniformLocations:function(a,s){return{uNoise:a.getUniformLocation(s,"uNoise"),uSeed:a.getUniformLocation(s,"uSeed")}},sendUniformData:function(a,s){a.uniform1f(s.uNoise,this.noise/255),a.uniform1f(s.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Pixelate=c(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var a=n.imageData,s=a.data,u=a.height,p=a.width,l,m,y,b,x,T,M,I,R,W,K;for(m=0;m<u;m+=this.blocksize)for(y=0;y<p;y+=this.blocksize)for(l=m*4*p+y*4,b=s[l],x=s[l+1],T=s[l+2],M=s[l+3],W=Math.min(m+this.blocksize,u),K=Math.min(y+this.blocksize,p),I=m;I<W;I++)for(R=y;R<K;R++)l=I*4*p+R*4,s[l]=b,s[l+1]=x,s[l+2]=T,s[l+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,a){return{uBlocksize:n.getUniformLocation(a,"uBlocksize"),uStepW:n.getUniformLocation(a,"uStepW"),uStepH:n.getUniformLocation(a,"uStepH")}},sendUniformData:function(n,a){n.uniform1f(a.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.extend,c=o.Image.filters,n=o.util.createClass;c.RemoveColor=n(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(a){var s=a.imageData,u=s.data,p,l=this.distance*255,m,y,b,x=new o.Color(this.color).getSource(),T=[x[0]-l,x[1]-l,x[2]-l],M=[x[0]+l,x[1]+l,x[2]+l];for(p=0;p<u.length;p+=4)m=u[p],y=u[p+1],b=u[p+2],m>T[0]&&y>T[1]&&b>T[2]&&m<M[0]&&y<M[1]&&b<M[2]&&(u[p+3]=0)},getUniformLocations:function(a,s){return{uLow:a.getUniformLocation(s,"uLow"),uHigh:a.getUniformLocation(s,"uHigh")}},sendUniformData:function(a,s){var u=new o.Color(this.color).getSource(),p=parseFloat(this.distance),l=[0+u[0]/255-p,0+u[1]/255-p,0+u[2]/255-p,1],m=[u[0]/255+p,u[1]/255+p,u[2]/255+p,1];a.uniform4fv(s.uLow,l),a.uniform4fv(s.uHigh,m)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in n)h[a]=c(h.ColorMatrix,{type:a,matrix:n[a],mainParameter:!1,colorsOnly:!0}),o.Image.filters[a].fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric,h=o.Image.filters,c=o.util.createClass;h.BlendColor=c(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var a=this.type+"_"+this.mode,s;return n.programCache.hasOwnProperty(a)||(s=this.buildSource(this.mode),n.programCache[a]=this.createProgram(n.context,s)),n.programCache[a]},applyTo2d:function(n){var a=n.imageData,s=a.data,u=s.length,p,l,m,y,b,x,T,M=1-this.alpha;T=new o.Color(this.color).getSource(),p=T[0]*this.alpha,l=T[1]*this.alpha,m=T[2]*this.alpha;for(var I=0;I<u;I+=4)switch(y=s[I],b=s[I+1],x=s[I+2],this.mode){case"multiply":s[I]=y*p/255,s[I+1]=b*l/255,s[I+2]=x*m/255;break;case"screen":s[I]=255-(255-y)*(255-p)/255,s[I+1]=255-(255-b)*(255-l)/255,s[I+2]=255-(255-x)*(255-m)/255;break;case"add":s[I]=y+p,s[I+1]=b+l,s[I+2]=x+m;break;case"diff":case"difference":s[I]=Math.abs(y-p),s[I+1]=Math.abs(b-l),s[I+2]=Math.abs(x-m);break;case"subtract":s[I]=y-p,s[I+1]=b-l,s[I+2]=x-m;break;case"darken":s[I]=Math.min(y,p),s[I+1]=Math.min(b,l),s[I+2]=Math.min(x,m);break;case"lighten":s[I]=Math.max(y,p),s[I+1]=Math.max(b,l),s[I+2]=Math.max(x,m);break;case"overlay":s[I]=p<128?2*y*p/255:255-2*(255-y)*(255-p)/255,s[I+1]=l<128?2*b*l/255:255-2*(255-b)*(255-l)/255,s[I+2]=m<128?2*x*m/255:255-2*(255-x)*(255-m)/255;break;case"exclusion":s[I]=p+y-2*p*y/255,s[I+1]=l+b-2*l*b/255,s[I+2]=m+x-2*m*x/255;break;case"tint":s[I]=p+y*M,s[I+1]=l+b*M,s[I+2]=m+x*M}},getUniformLocations:function(n,a){return{uColor:n.getUniformLocation(a,"uColor")}},sendUniformData:function(n,a){var s=new o.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,n.uniform4fv(a.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric,h=o.Image.filters,c=o.util.createClass;h.BlendImage=c(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var a=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(a)||(n.programCache[a]=this.createProgram(n.context,s)),n.programCache[a]},applyToWebGL:function(n){var a=n.context,s=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(a,s,a.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(n,a){return n.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var n=this.image,a=n._element.width,s=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/a,-n.top/s,1]},applyTo2d:function(n){var a=n.imageData,s=n.filterBackend.resources,u=a.data,p=u.length,l=a.width,m=a.height,y,b,x,T,M,I,R,W,K,$,se=this.image,fe;s.blendImage||(s.blendImage=o.util.createCanvasElement()),K=s.blendImage,$=K.getContext("2d"),K.width!==l||K.height!==m?(K.width=l,K.height=m):$.clearRect(0,0,l,m),$.setTransform(se.scaleX,0,0,se.scaleY,se.left,se.top),$.drawImage(se._element,0,0,l,m),fe=$.getImageData(0,0,l,m).data;for(var le=0;le<p;le+=4)switch(M=u[le],I=u[le+1],R=u[le+2],W=u[le+3],y=fe[le],b=fe[le+1],x=fe[le+2],T=fe[le+3],this.mode){case"multiply":u[le]=M*y/255,u[le+1]=I*b/255,u[le+2]=R*x/255,u[le+3]=W*T/255;break;case"mask":u[le+3]=T;break}},getUniformLocations:function(n,a){return{uTransformMatrix:n.getUniformLocation(a,"uTransformMatrix"),uImage:n.getUniformLocation(a,"uImage")}},sendUniformData:function(n,a){var s=this.calculateMatrix();n.uniform1i(a.uImage,1),n.uniformMatrix3fv(a.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(n,a){o.Image.fromObject(n.image,function(s){var u=o.util.object.clone(n);u.image=s,a(new o.Image.filters.BlendImage(u))})}}(t),function(g){var o=g.fabric||(g.fabric={}),h=Math.pow,c=Math.floor,n=Math.sqrt,a=Math.abs,s=Math.round,u=Math.sin,p=Math.ceil,l=o.Image.filters,m=o.util.createClass;l.Resize=m(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,b){return{uDelta:y.getUniformLocation(b,"uDelta"),uTaps:y.getUniformLocation(b,"uTaps")}},sendUniformData:function(y,b){y.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(y){var b=this.getFilterWindow(),x=this.type+"_"+b;if(!y.programCache.hasOwnProperty(x)){var T=this.generateShader(b);y.programCache[x]=this.createProgram(y.context,T)}return y.programCache[x]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,x=this.getFilterWindow(),T=new Array(x),M=1;M<=x;M++)T[M-1]=y(M*b);return T},generateShader:function(T){for(var b=new Array(T),x=this.fragmentSourceTOP,T,M=1;M<=T;M++)b[M-1]=M+".0 * uDelta";return x+="uniform float uTaps["+T+`];
`,x+=`void main() {
`,x+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,x+=`  float sum = 1.0;
`,b.forEach(function(I,R){x+="  color += texture2D(uTexture, vTexCoord + "+I+") * uTaps["+R+`];
`,x+="  color += texture2D(uTexture, vTexCoord - "+I+") * uTaps["+R+`];
`,x+="  sum += 2.0 * uTaps["+R+`];
`}),x+=`  gl_FragColor = color / sum;
`,x+="}",x},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(b){if(b>=y||b<=-y)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var x=b/y;return u(b)/b*u(x)/x}},applyTo2d:function(y){var b=y.imageData,x=this.scaleX,T=this.scaleY;this.rcpScaleX=1/x,this.rcpScaleY=1/T;var M=b.width,I=b.height,R=s(M*x),W=s(I*T),K;this.resizeType==="sliceHack"?K=this.sliceByTwo(y,M,I,R,W):this.resizeType==="hermite"?K=this.hermiteFastResize(y,M,I,R,W):this.resizeType==="bilinear"?K=this.bilinearFiltering(y,M,I,R,W):this.resizeType==="lanczos"&&(K=this.lanczosResize(y,M,I,R,W)),y.imageData=K},sliceByTwo:function(y,b,x,T,M){var I=y.imageData,R=.5,W=!1,K=!1,$=b*R,se=x*R,fe=o.filterBackend.resources,le,ce,_e=0,Oe=0,ne=b,D=0;for(fe.sliceByTwo||(fe.sliceByTwo=document.createElement("canvas")),le=fe.sliceByTwo,(le.width<b*1.5||le.height<x)&&(le.width=b*1.5,le.height=x),ce=le.getContext("2d"),ce.clearRect(0,0,b*1.5,x),ce.putImageData(I,0,0),T=c(T),M=c(M);!W||!K;)b=$,x=se,T<c($*R)?$=c($*R):($=T,W=!0),M<c(se*R)?se=c(se*R):(se=M,K=!0),ce.drawImage(le,_e,Oe,b,x,ne,D,$,se),_e=ne,Oe=D,D+=se;return ce.getImageData(_e,Oe,T,M)},lanczosResize:function(y,b,x,T,M){function I(B){var L,X,A,k,V,z,Z,J,Y,he,ie;for(D.x=(B+.5)*se,F.x=c(D.x),L=0;L<M;L++){for(D.y=(L+.5)*fe,F.y=c(D.y),V=0,z=0,Z=0,J=0,Y=0,X=F.x-_e;X<=F.x+_e;X++)if(!(X<0||X>=b)){he=c(1e3*a(X-D.x)),ne[he]||(ne[he]={});for(var ee=F.y-Oe;ee<=F.y+Oe;ee++)ee<0||ee>=x||(ie=c(1e3*a(ee-D.y)),ne[he][ie]||(ne[he][ie]=$(n(h(he*le,2)+h(ie*ce,2))/1e3)),A=ne[he][ie],A>0&&(k=(ee*b+X)*4,V+=A,z+=A*R[k],Z+=A*R[k+1],J+=A*R[k+2],Y+=A*R[k+3]))}k=(L*T+B)*4,K[k]=z/V,K[k+1]=Z/V,K[k+2]=J/V,K[k+3]=Y/V}return++B<T?I(B):W}var R=y.imageData.data,W=y.ctx.createImageData(T,M),K=W.data,$=this.lanczosCreate(this.lanczosLobes),se=this.rcpScaleX,fe=this.rcpScaleY,le=2/this.rcpScaleX,ce=2/this.rcpScaleY,_e=p(se*this.lanczosLobes/2),Oe=p(fe*this.lanczosLobes/2),ne={},D={},F={};return I(0)},bilinearFiltering:function(y,b,x,T,M){var I,R,W,K,$,se,fe,le,ce,_e,Oe,ne,D=0,F,B=this.rcpScaleX,L=this.rcpScaleY,X=4*(b-1),A=y.imageData,k=A.data,V=y.ctx.createImageData(T,M),z=V.data;for(fe=0;fe<M;fe++)for(le=0;le<T;le++)for($=c(B*le),se=c(L*fe),ce=B*le-$,_e=L*fe-se,F=4*(se*b+$),Oe=0;Oe<4;Oe++)I=k[F+Oe],R=k[F+4+Oe],W=k[F+X+Oe],K=k[F+X+4+Oe],ne=I*(1-ce)*(1-_e)+R*ce*(1-_e)+W*_e*(1-ce)+K*ce*_e,z[D++]=ne;return V},hermiteFastResize:function(y,b,x,T,M){for(var I=this.rcpScaleX,R=this.rcpScaleY,W=p(I/2),K=p(R/2),$=y.imageData,se=$.data,fe=y.ctx.createImageData(T,M),le=fe.data,ce=0;ce<M;ce++)for(var _e=0;_e<T;_e++){for(var Oe=(_e+ce*T)*4,ne=0,D=0,F=0,B=0,L=0,X=0,A=0,k=(ce+.5)*R,V=c(ce*R);V<(ce+1)*R;V++)for(var z=a(k-(V+.5))/K,Z=(_e+.5)*I,J=z*z,Y=c(_e*I);Y<(_e+1)*I;Y++){var he=a(Z-(Y+.5))/W,ie=n(J+he*he);ie>1&&ie<-1||(ne=2*ie*ie*ie-3*ie*ie+1,ne>0&&(he=4*(Y+V*b),A+=ne*se[he+3],F+=ne,se[he+3]<255&&(ne=ne*se[he+3]/250),B+=ne*se[he],L+=ne*se[he+1],X+=ne*se[he+2],D+=ne))}le[Oe]=B/D,le[Oe+1]=L/D,le[Oe+2]=X/D,le[Oe+3]=A/F}return fe},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Contrast=c(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var a=n.imageData,s,p,u=a.data,p=u.length,l=Math.floor(this.contrast*255),m=259*(l+255)/(255*(259-l));for(s=0;s<p;s+=4)u[s]=m*(u[s]-128)+128,u[s+1]=m*(u[s+1]-128)+128,u[s+2]=m*(u[s+2]-128)+128}},getUniformLocations:function(n,a){return{uContrast:n.getUniformLocation(a,"uContrast")}},sendUniformData:function(n,a){n.uniform1f(a.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Saturation=c(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var a=n.imageData,s=a.data,u=s.length,p=-this.saturation,l,m;for(l=0;l<u;l+=4)m=Math.max(s[l],s[l+1],s[l+2]),s[l]+=m!==s[l]?(m-s[l])*p:0,s[l+1]+=m!==s[l+1]?(m-s[l+1])*p:0,s[l+2]+=m!==s[l+2]?(m-s[l+2])*p:0}},getUniformLocations:function(n,a){return{uSaturation:n.getUniformLocation(a,"uSaturation")}},sendUniformData:function(n,a){n.uniform1f(a.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Vibrance=c(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(this.vibrance!==0){var a=n.imageData,s=a.data,u=s.length,p=-this.vibrance,l,m,y,b;for(l=0;l<u;l+=4)m=Math.max(s[l],s[l+1],s[l+2]),y=(s[l]+s[l+1]+s[l+2])/3,b=Math.abs(m-y)*2/255*p,s[l]+=m!==s[l]?(m-s[l])*b:0,s[l+1]+=m!==s[l+1]?(m-s[l+1])*b:0,s[l+2]+=m!==s[l+2]?(m-s[l+2])*b:0}},getUniformLocations:function(n,a){return{uVibrance:n.getUniformLocation(a,"uVibrance")}},sendUniformData:function(n,a){n.uniform1f(a.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Blur=c(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var a=n.filterBackend.resources,s,u,p=n.imageData.width,l=n.imageData.height;a.blurLayer1||(a.blurLayer1=o.util.createCanvasElement(),a.blurLayer2=o.util.createCanvasElement()),s=a.blurLayer1,u=a.blurLayer2,(s.width!==p||s.height!==l)&&(u.width=s.width=p,u.height=s.height=l);var m=s.getContext("2d"),y=u.getContext("2d"),b=15,x,T,M,I,R=this.blur*.06*.5;for(m.putImageData(n.imageData,0,0),y.clearRect(0,0,p,l),I=-b;I<=b;I++)x=(Math.random()-.5)/4,T=I/b,M=R*T*p+x,y.globalAlpha=1-Math.abs(T),y.drawImage(s,M,x),m.drawImage(u,0,0),y.globalAlpha=1,y.clearRect(0,0,u.width,u.height);for(I=-b;I<=b;I++)x=(Math.random()-.5)/4,T=I/b,M=R*T*l+x,y.globalAlpha=1-Math.abs(T),y.drawImage(s,x,M),m.drawImage(u,0,0),y.globalAlpha=1,y.clearRect(0,0,u.width,u.height);n.ctx.drawImage(s,0,0);var W=n.ctx.getImageData(0,0,s.width,s.height);return m.globalAlpha=1,m.clearRect(0,0,s.width,s.height),W},getUniformLocations:function(n,a){return{delta:n.getUniformLocation(a,"uDelta")}},sendUniformData:function(n,a){var s=this.chooseRightDelta();n.uniform2fv(a.delta,s)},chooseRightDelta:function(){var n=1,a=[0,0],s;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),s=n*this.blur*.12,this.horizontal?a[0]=s:a[1]=s,a}}),h.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Gamma=c(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var a=n.imageData,s=a.data,u=this.gamma,p=s.length,l=1/u[0],m=1/u[1],y=1/u[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,p=256;b<p;b++)this.rVals[b]=Math.pow(b/255,l)*255,this.gVals[b]=Math.pow(b/255,m)*255,this.bVals[b]=Math.pow(b/255,y)*255;for(b=0,p=s.length;b<p;b+=4)s[b]=this.rVals[s[b]],s[b+1]=this.gVals[s[b+1]],s[b+2]=this.bVals[s[b+2]]},getUniformLocations:function(n,a){return{uGamma:n.getUniformLocation(a,"uGamma")}},sendUniformData:function(n,a){n.uniform3fv(a.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.Composed=c(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(n)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(n,a){var s=n.subFilters||[],u=s.map(function(l){return new o.Image.filters[l.type](l)}),p=new o.Image.filters.Composed({subFilters:u});return a&&a(p),p}}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.Image.filters,c=o.util.createClass;h.HueRotation=c(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,a=o.util.cos(n),s=o.util.sin(n),u=1/3,p=Math.sqrt(u)*s,l=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+l/3,this.matrix[1]=u*l-p,this.matrix[2]=u*l+p,this.matrix[5]=u*l+p,this.matrix[6]=a+u*l,this.matrix[7]=u*l-p,this.matrix[10]=u*l-p,this.matrix[11]=u*l+p,this.matrix[12]=a+u*l},isNeutralState:function(n){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,n)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(t),function(g){var o=g.fabric||(g.fabric={}),h=o.util.object.clone;if(o.Text){o.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(c),cacheProperties:o.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,a){this.styles=a?a.styles||{}:{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=o.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,a,s,u,p,l,m,y=0,b=this._textLines.length;y<b;y++)if(!(this.textAlign!=="justify"&&(y===b-1||this.isEndOfWrapping(y)))&&(u=0,p=this._textLines[y],a=this.getLineWidth(y),a<this.width&&(m=this.textLines[y].match(this._reSpacesAndTabs)))){s=m.length,n=(this.width-a)/s;for(var x=0,T=p.length;x<=T;x++)l=this.__charBounds[y][x],this._reSpaceAndTab.test(p[x])?(l.width+=n,l.kernedWidth+=n,l.left+=u,u+=n):l.left+=u}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return n.width+=a*n.zoomX,n.height+=a*n.zoomY,n},_render:function(n){var a=this.path;a&&!a.isNotVisible()&&a._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){this.paintFirst==="stroke"?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,a,s){if(n.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":n.textBaseline="middle";break;case"ascender":n.textBaseline="top";break;case"descender":n.textBaseline="bottom";break}n.font=this._getFontDeclaration(a,s)},calcTextWidth:function(){for(var n=this.getLineWidth(0),a=1,s=this._textLines.length;a<s;a++){var u=this.getLineWidth(a);u>n&&(n=u)}return n},_renderTextLine:function(n,a,s,u,p,l){this._renderChars(n,a,s,u,p,l)},_renderTextLinesBackground:function(n){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var a,s,u=n.fillStyle,p,l,m=this._getLeftOffset(),y=this._getTopOffset(),b=0,x=0,T,M,I=this.path,R,W=0,K=this._textLines.length;W<K;W++){if(a=this.getHeightOfLine(W),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",W)){y+=a;continue}p=this._textLines[W],s=this._getLineLeftOffset(W),x=0,b=0,l=this.getValueOfPropertyAt(W,0,"textBackgroundColor");for(var $=0,se=p.length;$<se;$++)T=this.__charBounds[W][$],M=this.getValueOfPropertyAt(W,$,"textBackgroundColor"),I?(n.save(),n.translate(T.renderLeft,T.renderTop),n.rotate(T.angle),n.fillStyle=M,M&&n.fillRect(-T.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),T.width,a/this.lineHeight),n.restore()):M!==l?(R=m+s+b,this.direction==="rtl"&&(R=this.width-R-x),n.fillStyle=l,l&&n.fillRect(R,y,x,a/this.lineHeight),b=T.left,x=T.width,l=M):x+=T.kernedWidth;M&&!I&&(R=m+s+b,this.direction==="rtl"&&(R=this.width-R-x),n.fillStyle=M,n.fillRect(R,y,x,a/this.lineHeight)),y+=a}n.fillStyle=u,this._removeShadow(n)}},getFontCache:function(n){var a=n.fontFamily.toLowerCase();o.charWidthsCache[a]||(o.charWidthsCache[a]={});var s=o.charWidthsCache[a],u=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return s[u]||(s[u]={}),s[u]},_measureChar:function(n,a,s,u){var p=this.getFontCache(a),l=this._getFontDeclaration(a),m=this._getFontDeclaration(u),y=s+n,b=l===m,x,T,M,I=a.fontSize/this.CACHE_FONT_SIZE,R;if(s&&p[s]!==void 0&&(M=p[s]),p[n]!==void 0&&(R=x=p[n]),b&&p[y]!==void 0&&(T=p[y],R=T-M),x===void 0||M===void 0||T===void 0){var W=this.getMeasuringContext();this._setTextStyles(W,a,!0)}return x===void 0&&(R=x=W.measureText(n).width,p[n]=x),M===void 0&&b&&s&&(M=W.measureText(s).width,p[s]=M),b&&T===void 0&&(T=W.measureText(y).width,p[y]=T,R=T-M),{width:x*I,kernedWidth:R*I}},getHeightOfChar:function(n,a){return this.getValueOfPropertyAt(n,a,"fontSize")},measureLine:function(n){var a=this._measureLine(n);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(n){var a=0,s,u,p=this._textLines[n],l,m,y=0,b=new Array(p.length),x=0,T,M,I=this.path,R=this.pathSide==="right";for(this.__charBounds[n]=b,s=0;s<p.length;s++)u=p[s],m=this._getGraphemeBox(u,n,s,l),b[s]=m,a+=m.kernedWidth,l=u;if(b[s]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},I){switch(M=I.segmentsInfo[I.segmentsInfo.length-1].length,T=o.util.getPointOnPath(I.path,0,I.segmentsInfo),T.x+=I.pathOffset.x,T.y+=I.pathOffset.y,this.textAlign){case"left":x=R?M-a:0;break;case"center":x=(M-a)/2;break;case"right":x=R?0:M-a;break}for(x+=this.pathStartOffset*(R?-1:1),s=R?p.length-1:0;R?s>=0:s<p.length;R?s--:s++)m=b[s],x>M?x%=M:x<0&&(x+=M),this._setGraphemeOnPath(x,m,T),x+=m.kernedWidth}return{width:a,numOfSpaces:y}},_setGraphemeOnPath:function(n,a,s){var u=n+a.kernedWidth/2,p=this.path,l=o.util.getPointOnPath(p.path,u,p.segmentsInfo);a.renderLeft=l.x-s.x,a.renderTop=l.y-s.y,a.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(n,a,s,u,p){var l=this.getCompleteStyleDeclaration(a,s),m=u?this.getCompleteStyleDeclaration(a,s-1):{},y=this._measureChar(n,l,u,m),b=y.kernedWidth,x=y.width,T;this.charSpacing!==0&&(T=this._getWidthOfCharSpacing(),x+=T,b+=T);var M={width:x,left:0,height:l.fontSize,kernedWidth:b,deltaY:l.deltaY};if(s>0&&!p){var I=this.__charBounds[a][s-1];M.left=I.left+I.width+y.kernedWidth-y.width}return M},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var a=this._textLines[n],s=this.getHeightOfChar(n,0),u=1,p=a.length;u<p;u++)s=Math.max(this.getHeightOfChar(n,u),s);return this.__lineHeights[n]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,a=0,s=0,u=this._textLines.length;s<u;s++)n=this.getHeightOfLine(s),a+=s===u-1?n/this.lineHeight:n;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,a){n.save();for(var s=0,u=this._getLeftOffset(),p=this._getTopOffset(),l=0,m=this._textLines.length;l<m;l++){var y=this.getHeightOfLine(l),b=y/this.lineHeight,x=this._getLineLeftOffset(l);this._renderTextLine(a,n,this._textLines[l],u+x,p+s+b,l),s+=y}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,a,s,u,p,l){var m=this.getHeightOfLine(l),y=this.textAlign.indexOf("justify")!==-1,b,x,T="",M,I=0,R,W=this.path,K=!y&&this.charSpacing===0&&this.isEmptyStyles(l)&&!W,$=this.direction==="ltr",se=this.direction==="ltr"?1:-1,fe,le=a.canvas.getAttribute("dir");if(a.save(),le!==this.direction&&(a.canvas.setAttribute("dir",$?"ltr":"rtl"),a.direction=$?"ltr":"rtl",a.textAlign=$?"left":"right"),p-=m*this._fontSizeFraction/this.lineHeight,K){this._renderChar(n,a,l,0,s.join(""),u,p,m),a.restore();return}for(var ce=0,_e=s.length-1;ce<=_e;ce++)R=ce===_e||this.charSpacing||W,T+=s[ce],M=this.__charBounds[l][ce],I===0?(u+=se*(M.kernedWidth-M.width),I+=M.width):I+=M.kernedWidth,y&&!R&&this._reSpaceAndTab.test(s[ce])&&(R=!0),R||(b=b||this.getCompleteStyleDeclaration(l,ce),x=this.getCompleteStyleDeclaration(l,ce+1),R=this._hasStyleChanged(b,x)),R&&(W?(a.save(),a.translate(M.renderLeft,M.renderTop),a.rotate(M.angle),this._renderChar(n,a,l,ce,T,-I/2,0,m),a.restore()):(fe=u,this._renderChar(n,a,l,ce,T,fe,p,m)),T="",b=x,u+=se*I,I=0);a.restore()},_applyPatternGradientTransformText:function(n){var a=o.util.createCanvasElement(),s,u=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return a.width=u,a.height=p,s=a.getContext("2d"),s.beginPath(),s.moveTo(0,0),s.lineTo(u,0),s.lineTo(u,p),s.lineTo(0,p),s.closePath(),s.translate(u/2,p/2),s.fillStyle=n.toLive(s),this._applyPatternGradientTransform(s,n),s.fill(),s.createPattern(a,"no-repeat")},handleFiller:function(n,a,s){var u,p;return s.toLive?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(u=-this.width/2,p=-this.height/2,n.translate(u,p),n[a]=this._applyPatternGradientTransformText(s),{offsetX:u,offsetY:p}):(n[a]=s.toLive(n,this),this._applyPatternGradientTransform(n,s)):(n[a]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,a){return n.lineWidth=a.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",a.stroke)},_setFillStyles:function(n,a){return this.handleFiller(n,"fillStyle",a.fill)},_renderChar:function(n,a,s,u,p,l,m){var y=this._getStyleDeclaration(s,u),b=this.getCompleteStyleDeclaration(s,u),x=n==="fillText"&&b.fill,T=n==="strokeText"&&b.stroke&&b.strokeWidth,M,I;!T&&!x||(a.save(),x&&(M=this._setFillStyles(a,b)),T&&(I=this._setStrokeStyles(a,b)),a.font=this._getFontDeclaration(b),y&&y.textBackgroundColor&&this._removeShadow(a),y&&y.deltaY&&(m+=y.deltaY),x&&a.fillText(p,l-M.offsetX,m-M.offsetY),T&&a.strokeText(p,l-I.offsetX,m-I.offsetY),a.restore())},setSuperscript:function(n,a){return this._setScript(n,a,this.superscript)},setSubscript:function(n,a){return this._setScript(n,a,this.subscript)},_setScript:function(n,a,s){var u=this.get2DCursorLocation(n,!0),p=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"fontSize"),l=this.getValueOfPropertyAt(u.lineIndex,u.charIndex,"deltaY"),m={fontSize:p*s.size,deltaY:l+p*s.baseline};return this.setSelectionStyles(m,n,a),this},_hasStyleChanged:function(n,a){return n.fill!==a.fill||n.stroke!==a.stroke||n.strokeWidth!==a.strokeWidth||n.fontSize!==a.fontSize||n.fontFamily!==a.fontFamily||n.fontWeight!==a.fontWeight||n.fontStyle!==a.fontStyle||n.deltaY!==a.deltaY},_hasStyleChangedForSvg:function(n,a){return this._hasStyleChanged(n,a)||n.overline!==a.overline||n.underline!==a.underline||n.linethrough!==a.linethrough},_getLineLeftOffset:function(n){var a=this.getLineWidth(n),s=this.width-a,u=this.textAlign,p=this.direction,m,l=0,m=this.isEndOfWrapping(n);return u==="justify"||u==="justify-center"&&!m||u==="justify-right"&&!m||u==="justify-left"&&!m?0:(u==="center"&&(l=s/2),u==="right"&&(l=s),u==="justify-center"&&(l=s/2),u==="justify-right"&&(l=s),p==="rtl"&&(l-=s),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(this.__lineWidths[n]!==void 0)return this.__lineWidths[n];var a=this.measureLine(n),s=a.width;return this.__lineWidths[n]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,a,s){var u=this._getStyleDeclaration(n,a);return u&&typeof u[s]<"u"?u[s]:this[s]},_renderTextDecoration:function(n,a){if(!(!this[a]&&!this.styleHas(a))){for(var s,u,p,l,m,y,b,x,T=this._getLeftOffset(),M=this._getTopOffset(),I,R,W,K,$,se,fe,le,ce=this.path,_e=this._getWidthOfCharSpacing(),Oe=this.offsets[a],ne=0,D=this._textLines.length;ne<D;ne++){if(s=this.getHeightOfLine(ne),!this[a]&&!this.styleHas(a,ne)){M+=s;continue}b=this._textLines[ne],se=s/this.lineHeight,l=this._getLineLeftOffset(ne),R=0,W=0,x=this.getValueOfPropertyAt(ne,0,a),le=this.getValueOfPropertyAt(ne,0,"fill"),I=M+se*(1-this._fontSizeFraction),u=this.getHeightOfChar(ne,0),m=this.getValueOfPropertyAt(ne,0,"deltaY");for(var F=0,B=b.length;F<B;F++)if(K=this.__charBounds[ne][F],$=this.getValueOfPropertyAt(ne,F,a),fe=this.getValueOfPropertyAt(ne,F,"fill"),p=this.getHeightOfChar(ne,F),y=this.getValueOfPropertyAt(ne,F,"deltaY"),ce&&$&&fe)n.save(),n.fillStyle=le,n.translate(K.renderLeft,K.renderTop),n.rotate(K.angle),n.fillRect(-K.kernedWidth/2,Oe*p+y,K.kernedWidth,this.fontSize/15),n.restore();else if(($!==x||fe!==le||p!==u||y!==m)&&W>0){var L=T+l+R;this.direction==="rtl"&&(L=this.width-L-W),x&&le&&(n.fillStyle=le,n.fillRect(L,I+Oe*u+m,W,this.fontSize/15)),R=K.left,W=K.width,x=$,le=fe,u=p,m=y}else W+=K.kernedWidth;var L=T+l+R;this.direction==="rtl"&&(L=this.width-L-W),n.fillStyle=fe,$&&fe&&n.fillRect(L,I+Oe*u+m,W-_e,this.fontSize/15),M+=s}this._removeShadow(n)}},_getFontDeclaration:function(n,a){var s=n||this,u=this.fontFamily,p=o.Text.genericFonts.indexOf(u.toLowerCase())>-1,l=u===void 0||u.indexOf("'")>-1||u.indexOf(",")>-1||u.indexOf('"')>-1||p?s.fontFamily:'"'+s.fontFamily+'"';return[o.isLikelyNode?s.fontWeight:s.fontStyle,o.isLikelyNode?s.fontStyle:s.fontWeight,a?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",l].join(" ")},render:function(n){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n)))},_splitTextIntoLines:function(n){for(var a=n.split(this._reNewline),s=new Array(a.length),u=[`
`],p=[],l=0;l<a.length;l++)s[l]=o.util.string.graphemeSplit(a[l]),p=p.concat(s[l],u);return p.pop(),{_unwrappedLines:s,lines:a,graphemeText:p,graphemeLines:s}},toObject:function(n){var a=c.concat(n),s=this.callSuper("toObject",a);return s.styles=h(this.styles,!0),s.path&&(s.path=this.path.toObject()),s},set:function(n,a){this.callSuper("set",n,a);var s=!1,u=!1;if(typeof n=="object")for(var p in n)p==="path"&&this.setPathInfo(),s=s||this._dimensionAffectingProps.indexOf(p)!==-1,u=u||p==="path";else s=this._dimensionAffectingProps.indexOf(n)!==-1,u=n==="path";return u&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(n,a,s){if(!n)return a(null);var u=o.parseAttributes(n,o.Text.ATTRIBUTE_NAMES),p=u.textAnchor||"left";if(s=o.util.object.extend(s?h(s):{},u),s.top=s.top||0,s.left=s.left||0,u.textDecoration){var l=u.textDecoration;l.indexOf("underline")!==-1&&(s.underline=!0),l.indexOf("overline")!==-1&&(s.overline=!0),l.indexOf("line-through")!==-1&&(s.linethrough=!0),delete s.textDecoration}"dx"in u&&(s.left+=u.dx),"dy"in u&&(s.top+=u.dy),"fontSize"in s||(s.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in n?m=n.textContent:"firstChild"in n&&n.firstChild!==null&&"data"in n.firstChild&&n.firstChild.data!==null&&(m=n.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=s.strokeWidth;s.strokeWidth=0;var b=new o.Text(m,s),x=b.getScaledHeight()/b.height,T=(b.height+b.strokeWidth)*b.lineHeight-b.height,M=T*x,I=b.getScaledHeight()+M,R=0;p==="center"&&(R=b.getScaledWidth()/2),p==="right"&&(R=b.getScaledWidth()),b.set({left:b.left-R,top:b.top-(I-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof y<"u"?y:1}),a(b)},o.Text.fromObject=function(n,a){var s=h(n),u=n.path;return delete s.path,o.Object._fromObject("Text",s,function(p){u?o.Object._fromObject("Path",u,function(l){p.set("path",l),a(p)},"path"):a(p)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var o=typeof g>"u"?this.styles:{line:this.styles[g]};for(var h in o)for(var c in o[h])for(var n in o[h][c])return!1;return!0},styleHas:function(g,o){if(!this.styles||!g||g===""||typeof o<"u"&&!this.styles[o])return!1;var h=typeof o>"u"?this.styles:{0:this.styles[o]};for(var c in h)for(var n in h[c])if(typeof h[c][n][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var o=this.styles,h=0,c,n,a=!0,s=0,u;for(var p in o){c=0;for(var l in o[p]){var u=o[p][l],m=u.hasOwnProperty(g);h++,m?(n?u[g]!==n&&(a=!1):n=u[g],u[g]===this[g]&&delete u[g]):a=!1,Object.keys(u).length!==0?c++:delete o[p][l]}c===0&&delete o[p]}for(var y=0;y<this._textLines.length;y++)s+=this._textLines[y].length;a&&h===s&&(this[g]=n,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var o=this.styles,h,c,n;for(c in o){h=o[c];for(n in h)delete h[n][g],Object.keys(h[n]).length===0&&delete h[n];Object.keys(h).length===0&&delete o[c]}}},_extendStyles:function(g,o){var h=this.get2DCursorLocation(g);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),o)},get2DCursorLocation:function(g,o){typeof g>"u"&&(g=this.selectionStart);for(var h=o?this._unwrappedTextLines:this._textLines,c=h.length,n=0;n<c;n++){if(g<=h[n].length)return{lineIndex:n,charIndex:g};g-=h[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:h[n-1].length<g?h[n-1].length:g}},getSelectionStyles:function(g,o,h){typeof g>"u"&&(g=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||g);for(var c=[],n=g;n<o;n++)c.push(this.getStyleAtPosition(n,h));return c},getStyleAtPosition:function(g,o){var h=this.get2DCursorLocation(g),c=o?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return c||{}},setSelectionStyles:function(g,o,h){typeof o>"u"&&(o=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||o);for(var c=o;c<h;c++)this._extendStyles(c,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,o){var h=this.styles&&this.styles[g];return h?h[o]:null},getCompleteStyleDeclaration:function(g,o){for(var h=this._getStyleDeclaration(g,o)||{},c={},n,a=0;a<this._styleProperties.length;a++)n=this._styleProperties[a],c[n]=typeof h[n]>"u"?this[n]:h[n];return c},_setStyleDeclaration:function(g,o,h){this.styles[g][o]=h},_deleteStyleDeclaration:function(g,o){delete this.styles[g][o]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})}(),function(){function g(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,h){this.callSuper("initialize",o,h),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,h){this[o]!==h&&(this._fireSelectionChanged(),this[o]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,c=this.canvas.viewportTransform;h.save(),h.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(h),this._clearTextArea(h),o||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var o=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,h):this.renderSelection(o,h),h.restore()}},_clearTextArea:function(o){var h=this.width+4,c=this.height+4;o.clearRect(-h/2,-c/2,h,c)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var h=this._getLeftOffset(),c=this._getTopOffset(),n=this._getCursorBoundariesOffsets(o);return{left:h,top:c,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,c,n,a=0,s=0,u,p=this.get2DCursorLocation(o);n=p.charIndex,c=p.lineIndex;for(var l=0;l<c;l++)a+=this.getHeightOfLine(l);h=this._getLineLeftOffset(c);var m=this.__charBounds[c][n];return m&&(s=m.left),this.charSpacing!==0&&n===this._textLines[c].length&&(s-=this._getWidthOfCharSpacing()),u={top:a,left:h+(s>0?s:0)},this.direction==="rtl"&&(u.left*=-1),this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(o,h){var c=this.get2DCursorLocation(),n=c.lineIndex,a=c.charIndex>0?c.charIndex-1:0,s=this.getValueOfPropertyAt(n,a,"fontSize"),u=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/u,l=o.topOffset,m=this.getValueOfPropertyAt(n,a,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,a,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(o.left+o.leftOffset-p/2,l+o.top+m,p,s)},renderSelection:function(o,h){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,s=this.get2DCursorLocation(c),u=this.get2DCursorLocation(n),p=s.lineIndex,l=u.lineIndex,m=s.charIndex<0?0:s.charIndex,y=u.charIndex<0?0:u.charIndex,b=p;b<=l;b++){var x=this._getLineLeftOffset(b)||0,T=this.getHeightOfLine(b),M=0,I=0,R=0;if(b===p&&(I=this.__charBounds[p][m].left),b>=p&&b<l)R=a&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===l)if(y===0)R=this.__charBounds[l][y].left;else{var W=this._getWidthOfCharSpacing();R=this.__charBounds[l][y-1].left+this.__charBounds[l][y-1].width-W}M=T,(this.lineHeight<1||b===l&&this.lineHeight>1)&&(T/=this.lineHeight);var K=o.left+x+I,$=R-I,se=T,fe=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",se=1,fe=T):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(K=this.width-K-$),h.fillRect(K,o.top+o.topOffset+fe,$,se),o.topOffset+=M}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0),h=o.charIndex>0?o.charIndex-1:0;return{l:o.lineIndex,c:h}}}),e.IText.fromObject=function(o,h){if(g(o),o.styles)for(var c in o.styles)for(var n in o.styles[c])g(o.styles[c][n]);e.Object._fromObject("IText",o,h,"text")}}(),function(){var g=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var h=o.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,o._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var h=o.canvas;h&&(h._iTextInstances=h._iTextInstances||[],e.util.removeFromArray(h._iTextInstances,o),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,o._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(h){h.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,h,c,n){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",h,{duration:c,onComplete:function(){a.isAborted||o[n]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var h=this,c=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},c)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var h=0,c=o-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)h++,c--;for(;/\S/.test(this._text[c])&&c>-1;)h++,c--;return o-h},findWordBoundaryRight:function(o){var h=0,c=o;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)h++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)h++,c++;return o+h},findLineBoundaryLeft:function(o){for(var h=0,c=o-1;!/\n/.test(this._text[c])&&c>-1;)h++,c--;return o-h},findLineBoundaryRight:function(o){for(var h=0,c=o;!/\n/.test(this._text[c])&&c<this._text.length;)h++,c++;return o+h},searchWordBoundary:function(o,h){for(var c=this._text,n=this._reSpace.test(c[o])?o-1:o,a=c[n],s=e.reNonWord;!s.test(a)&&n>0&&n<c.length;)n+=h,a=c[n];return s.test(a)&&(n+=h===1?0:1),n},selectWord:function(o){o=o||this.selectionStart;var h=this.searchWordBoundary(o,-1),c=this.searchWordBoundary(o,1);this.selectionStart=h,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){o=o||this.selectionStart;var h=this.findLineBoundaryLeft(o),c=this.findLineBoundaryRight(o);return this.selectionStart=h,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(!(!this.__isMousedown||!this.isEditing)){var h=this.getSelectionStartFromPointer(o.e),c=this.selectionStart,n=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||c===n)&&(c===h||n===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,h,c){var n=c.slice(0,o),a=e.util.string.graphemeSplit(n).length;if(o===h)return{selectionStart:a,selectionEnd:a};var s=c.slice(o,h),u=e.util.string.graphemeSplit(s).length;return{selectionStart:a,selectionEnd:a+u}},fromGraphemeToStringSelection:function(o,h,c){var n=c.slice(0,o),a=n.join("").length;if(o===h)return{selectionStart:a,selectionEnd:a};var s=c.slice(o,h),u=s.join("").length;return{selectionStart:a,selectionEnd:a+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(o),c=this.get2DCursorLocation(o),n=c.lineIndex,a=c.charIndex,s=this.getValueOfPropertyAt(n,a,"fontSize")*this.lineHeight,u=h.leftOffset,p=this.calcTransformMatrix(),l={x:h.left+u,y:h.top+h.topOffset+s},m=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/m,x=y.height/m,T=b-s,M=x-s,I=y.clientWidth/b,R=y.clientHeight/x;return l=e.util.transformPoint(l,p),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=I,l.y*=R,l.x<0&&(l.x=0),l.x>T&&(l.x=T),l.y<0&&(l.y=0),l.y>M&&(l.y=M),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,h){var c=this.get2DCursorLocation(o,!0),n=this.get2DCursorLocation(h,!0),a=c.lineIndex,s=c.charIndex,u=n.lineIndex,p=n.charIndex,l,m;if(a!==u){if(this.styles[a])for(l=s;l<this._unwrappedTextLines[a].length;l++)delete this.styles[a][l];if(this.styles[u])for(l=p;l<this._unwrappedTextLines[u].length;l++)m=this.styles[u][l],m&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+l-p]=m);for(l=a+1;l<=u;l++)delete this.styles[l];this.shiftLineStyles(u,a-u)}else if(this.styles[a]){m=this.styles[a];var y=p-s,b,x;for(l=s;l<p;l++)delete m[l];for(x in this.styles[a])b=parseInt(x,10),b>=p&&(m[b-y]=m[x],delete m[x])}},shiftLineStyles:function(o,h){var c=g(this.styles);for(var n in this.styles){var a=parseInt(n,10);a>o&&(this.styles[a+h]=c[a],c[a-h]||delete this.styles[a])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,h,c,n){var a,s={},u=!1,p=this._unwrappedTextLines[o].length===h;c||(c=1),this.shiftLineStyles(o,c),this.styles[o]&&(a=this.styles[o][h===0?h:h-1]);for(var l in this.styles[o]){var m=parseInt(l,10);m>=h&&(u=!0,s[m-h]=this.styles[o][l],p&&h===0||delete this.styles[o][l])}var y=!1;for(u&&!p&&(this.styles[o+c]=s,y=!0),y&&c--;c>0;)n&&n[c-1]?this.styles[o+c]={0:g(n[c-1])}:a?this.styles[o+c]={0:g(a)}:delete this.styles[o+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(o,h,c,n){this.styles||(this.styles={});var a=this.styles[o],s=a?g(a):{};c||(c=1);for(var u in s){var p=parseInt(u,10);p>=h&&(a[p+c]=s[p],s[p-c]||delete a[p])}if(this._forceClearCache=!0,n){for(;c--;)Object.keys(n[c]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][h+c]=g(n[c]));return}if(a)for(var l=a[h?h-1:1];l&&c--;)this.styles[o][h+c]=g(l)},insertNewStyleBlock:function(o,h,c){for(var n=this.get2DCursorLocation(h,!0),a=[0],s=0,u=0;u<o.length;u++)o[u]===`
`?(s++,a[s]=0):a[s]++;a[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,a[0],c),c=c&&c.slice(a[0]+1)),s&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+a[0],s);for(var u=1;u<s;u++)a[u]>0?this.insertCharStyleObject(n.lineIndex+u,0,a[u],c):c&&this.styles[n.lineIndex+u]&&c[0]&&(this.styles[n.lineIndex+u][0]=c[0]),c=c&&c.slice(a[u]+1);a[u]>0&&this.insertCharStyleObject(n.lineIndex+u,0,a[u],c)},setSelectionStartEndWithShift:function(o,h,c){c<=o?(h===o?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=c):c>o&&c<h?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(h===o?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=c)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(this.canvas){this.__newClickTime=+new Date;var o=g.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var o=this.getSelectionStartFromPointer(g),h=this.selectionStart,c=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(h,c,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var o=this.getLocalPointer(g),h=0,c=0,n=0,a=0,s=0,u,p,l=0,m=this._textLines.length;l<m&&n<=o.y;l++)n+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));u=this._getLineLeftOffset(s),c=u*this.scaleX,p=this._textLines[s],this.direction==="rtl"&&(o.x=this.width*this.scaleX-o.x+c);for(var y=0,b=p.length;y<b&&(h=c,c+=this.__charBounds[s][y].kernedWidth*this.scaleX,c<=o.x);y++)a++;return this._getNewSelectionStartFromOffset(o,h,c,a,b)},_getNewSelectionStartFromOffset:function(g,o,h,c,n){var a=g.x-o,s=h-g.x,u=s>a||s<0?0:1,p=c+u;return this.flipX&&(p=n-p),p>this._text.length&&(p=this._text.length),p}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingtop: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(this.isEditing){var o=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in o)this[o[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var o=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,n=h.length,a,s,u=n-c,p=this.selectionStart,l=this.selectionEnd,m=p!==l,y,b,x;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var T=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=p>T.selectionStart;m?(a=this._text.slice(p,l),u+=l-p):n<c&&(M?a=this._text.slice(l+u,l):a=this._text.slice(p,p-u)),s=h.slice(T.selectionEnd-u,T.selectionEnd),a&&a.length&&(s.length&&(y=this.getSelectionStyles(p,p+1,!1),y=s.map(function(){return y[0]})),m?(b=p,x=l):M?(b=l-a.length,x=l):(b=l,x=l+a.length),this.removeStyleFromTo(b,x)),s.length&&(o&&s.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(s,p,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(g,o){var h=this._getLineLeftOffset(g),c;return o>0&&(c=this.__charBounds[g][o-1],h+=c.left+c.width),h},getDownCursorOffset:function(g,o){var h=this._getSelectionForOffset(g,o),c=this.get2DCursorLocation(h),n=c.lineIndex;if(n===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-h;var a=c.charIndex,s=this._getWidthBeforeCursor(n,a),u=this._getIndexOnLine(n+1,s),p=this._textLines[n].slice(a);return p.length+u+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(g,o){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,o){var h=this._getSelectionForOffset(g,o),c=this.get2DCursorLocation(h),n=c.lineIndex;if(n===0||g.metaKey||g.keyCode===33)return-h;var a=c.charIndex,s=this._getWidthBeforeCursor(n,a),u=this._getIndexOnLine(n-1,s),p=this._textLines[n].slice(0,a),l=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+u-p.length+(1-l)},_getIndexOnLine:function(g,o){for(var h=this._textLines[g],c=this._getLineLeftOffset(g),n=c,a=0,s,u,p=0,l=h.length;p<l;p++)if(s=this.__charBounds[g][p].width,n+=s,n>o){u=!0;var m=n-s,y=n,b=Math.abs(m-o),x=Math.abs(y-o);a=x<b?p:p-1;break}return u||(a=h.length-1),a},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,o){var h="get"+g+"CursorOffset",c=this[h](o,this._selectionDirection==="right");o.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var o=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,o,h){var c;if(g.altKey)c=this["findWordBoundary"+h](this[o]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)c=this["findLineBoundary"+h](this[o]);else return this[o]+=h==="Left"?-1:1,!0;if(typeof c!==void 0&&this[o]!==c)return this[o]=c,!0},_moveLeft:function(g,o){return this._move(g,o,"Left")},_moveRight:function(g,o){return this._move(g,o,"Right")},moveCursorLeftWithoutShift:function(g){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(o=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,o){var h="moveCursor"+g+"With";this._currentCursorOpacity=1,o.shiftKey?h+="Shift":h+="outShift",this[h](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(g,o){typeof o>"u"&&(o=g+1),this.removeStyleFromTo(g,o),this._text.splice(g,o-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,o,h,c){typeof c>"u"&&(c=h),c>h&&this.removeStyleFromTo(h,c);var n=e.util.string.graphemeSplit(g);this.insertNewStyleBlock(n,h,o),this._text=[].concat(this._text.slice(0,h),n,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var g=e.util.toFixed,o=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var h=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(h.textTop,h.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(h){var c=!0,n=this.getSvgTextDecoration(this);return[h.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",h.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(h,c){var n=[],a=[],s=h,u;this._setSVGBg(a);for(var p=0,l=this._textLines.length;p<l;p++)u=this._getLineLeftOffset(p),(this.textBackgroundColor||this.styleHas("textBackgroundColor",p))&&this._setSVGTextLineBg(a,p,c+u,s),this._setSVGTextLineText(n,p,c+u,s),s+=this.getHeightOfLine(p);return{textSpans:n,textBgRects:a}},_createTextCharSpan:function(h,c,n,a){var s=h!==h.trim()||h.match(o),u=this.getSvgSpanStyles(c,s),p=u?'style="'+u+'"':"",l=c.deltaY,m="",y=e.Object.NUM_FRACTION_DIGITS;return l&&(m=' dy="'+g(l,y)+'" '),['<tspan x="',g(n,y),'" y="',g(a,y),'" ',m,p,">",e.util.string.escapeXml(h),"</tspan>"].join("")},_setSVGTextLineText:function(h,c,n,a){var s=this.getHeightOfLine(c),u=this.textAlign.indexOf("justify")!==-1,p,l,m="",y,b,x=0,T=this._textLines[c],M;a+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var I=0,R=T.length-1;I<=R;I++)M=I===R||this.charSpacing,m+=T[I],y=this.__charBounds[c][I],x===0?(n+=y.kernedWidth-y.width,x+=y.width):x+=y.kernedWidth,u&&!M&&this._reSpaceAndTab.test(T[I])&&(M=!0),M||(p=p||this.getCompleteStyleDeclaration(c,I),l=this.getCompleteStyleDeclaration(c,I+1),M=this._hasStyleChangedForSvg(p,l)),M&&(b=this._getStyleDeclaration(c,I)||{},h.push(this._createTextCharSpan(m,b,n,a)),m="",p=l,n+=x,x=0)},_pushTextBgRect:function(h,c,n,a,s,u){var p=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(c),' x="',g(n,p),'" y="',g(a,p),'" width="',g(s,p),'" height="',g(u,p),`"></rect>
`)},_setSVGTextLineBg:function(h,c,n,a){for(var s=this._textLines[c],u=this.getHeightOfLine(c)/this.lineHeight,p=0,l=0,m,y,b=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),x=0,T=s.length;x<T;x++)m=this.__charBounds[c][x],y=this.getValueOfPropertyAt(c,x,"textBackgroundColor"),y!==b?(b&&this._pushTextBgRect(h,b,n+l,a,p,u),l=m.left,p=m.width,b=y):p+=m.kernedWidth;y&&this._pushTextBgRect(h,y,n+l,a,p,u)},_getFillAttributes:function(h){var c=h&&typeof h=="string"?new e.Color(h):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+h+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(h){for(var c=0,n=0,a=0;a<h;a++)c+=this.getHeightOfLine(a);return n=this.getHeightOfLine(a),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(h){var c=e.Object.prototype.getSvgStyles.call(this,h);return c+" white-space: pre;"}})}(),function(g){var o=g.fabric||(g.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var c=0,n=0,a=0,s={},u=0;u<h.graphemeLines.length;u++)h.graphemeText[a]===`
`&&u>0?(n=0,a++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[a])&&u>0&&(n++,a++),s[u]={line:c,offset:n},a+=h.graphemeLines[u].length,n+=h.graphemeLines[u].length;return s},styleHas:function(h,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];n&&(c=n.line)}return o.Text.prototype.styleHas.call(this,h,c)},isEmptyStyles:function(h){if(!this.styles)return!0;var c=0,n=h+1,a,s,u=!1,p=this._styleMap[h],l=this._styleMap[h+1];p&&(h=p.line,c=p.offset),l&&(n=l.line,u=n===h,a=l.offset),s=typeof h>"u"?this.styles:{line:this.styles[h]};for(var m in s)for(var y in s[m])if(y>=c&&(!u||y<a))for(var b in s[m][y])return!1;return!0},_getStyleDeclaration:function(h,c){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[h];if(!n)return null;h=n.line,c=n.offset+c}return this.callSuper("_getStyleDeclaration",h,c)},_setStyleDeclaration:function(h,c,n){var a=this._styleMap[h];h=a.line,c=a.offset+c,this.styles[h][c]=n},_deleteStyleDeclaration:function(h,c){var n=this._styleMap[h];h=n.line,c=n.offset+c,delete this.styles[h][c]},_getLineStyle:function(h){var c=this._styleMap[h];return!!this.styles[c.line]},_setLineStyle:function(h){var c=this._styleMap[h];this.styles[c.line]={}},_wrapText:function(h,c){var n=[],a;for(this.isWrapping=!0,a=0;a<h.length;a++)n=n.concat(this._wrapLine(h[a],a,c));return this.isWrapping=!1,n},_measureWord:function(h,c,n){var a=0,s,u=!0;n=n||0;for(var p=0,l=h.length;p<l;p++){var m=this._getGraphemeBox(h[p],c,p+n,s,u);a+=m.kernedWidth,s=h[p]}return a},_wrapLine:function(h,c,n,K){var s=0,u=this.splitByGrapheme,p=[],l=[],m=u?o.util.string.graphemeSplit(h):h.split(this._wordJoiners),y="",b=0,x=u?"":" ",T=0,M=0,I=0,R=!0,W=this._getWidthOfCharSpacing(),K=K||0;m.length===0&&m.push([]),n-=K;for(var $=0;$<m.length;$++)y=u?m[$]:o.util.string.graphemeSplit(m[$]),T=this._measureWord(y,c,b),b+=y.length,s+=M+T-W,s>n&&!R?(p.push(l),l=[],s=T,R=!0):s+=W,!R&&!u&&l.push(x),l=l.concat(y),M=u?0:this._measureWord([x],c,b),b++,R=!1,T>I&&(I=T);return $&&p.push(l),I+K>this.dynamicMinWidth&&(this.dynamicMinWidth=I-W+K),p},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h){return this.splitByGrapheme?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var c=o.Text.prototype._splitTextIntoLines.call(this,h),n=this._wrapText(c.lines,this.width),a=new Array(n.length),s=0;s<n.length;s++)a[s]=n[s].join("");return c.lines=a,c.graphemeLines=n,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var c in this._styleMap)this._textLines[c]&&(h[this._styleMap[c].line]=1);for(var c in this.styles)h[c]||delete this.styles[c]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),o.Textbox.fromObject=function(h,c){return o.Object._fromObject("Textbox",h,c,"text")}}(t),function(){var g=e.controlsUtils,o=g.scaleSkewCursorStyleHandler,h=g.scaleCursorStyleHandler,c=g.scalingEqually,n=g.scalingYOrSkewingX,a=g.scalingXOrSkewingY,s=g.scaleOrSkewActionName,u=e.Object.prototype.controls;if(u.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:a,getActionName:s}),u.mr=new e.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:a,getActionName:s}),u.mb=new e.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:n,getActionName:s}),u.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:n,getActionName:s}),u.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:c}),u.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:c}),u.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:c}),u.br=new e.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:c}),u.mtr=new e.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var p=e.Textbox.prototype.controls={};p.mtr=u.mtr,p.tr=u.tr,p.br=u.br,p.tl=u.tl,p.bl=u.bl,p.mt=u.mt,p.mb=u.mb,p.mr=new e.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),p.ml=new e.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}(),function(){e.Object.ENLIVEN_PROPS.push("eraser");var g=e.Object.prototype._drawClipPath,o=e.Object.prototype.needsItsOwnCache,h=e.Object.prototype.toObject,c=e.Object.prototype.getSvgCommons,n=e.Object.prototype._createBaseClipPathSVGMarkup,a=e.Object.prototype._createBaseSVGMarkup;e.Object.prototype.cacheProperties.push("eraser"),e.Object.prototype.stateProperties.push("eraser"),e.util.object.extend(e.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return o.call(this)||!!this.eraser},_drawClipPath:function(p,l){if(g.call(this,p,l),this.eraser){var m=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:m.x,height:m.y}),g.call(this,p,this.eraser)}},toObject:function(p){var l=h.call(this,["erasable"].concat(p));return this.eraser&&!this.eraser.excludeFromExport&&(l.eraser=this.eraser.toObject(p)),l},getSvgCommons:function(){return c.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(p){return this.eraser?(this.eraser.clipPathId="MASK_"+e.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(p),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(p,l){return[this._createEraserSVGMarkup(l&&l.reviver),n.call(this,p,l)].join("")},_createBaseSVGMarkup:function(p,l){return[this._createEraserSVGMarkup(l&&l.reviver),a.call(this,p,l)].join("")}});var s=e.Group.prototype._restoreObjectsState;e.util.object.extend(e.Group.prototype,{_addEraserPathToObjects:function(p){this._objects.forEach(function(l){e.EraserBrush.prototype._addPathToObjectEraser.call(e.EraserBrush.prototype,l,p)})},applyEraserToObjects:function(){var p=this,l=this.eraser;if(l){delete this.eraser;var m=p.calcTransformMatrix();l.clone(function(y){var b=p.clipPath;y.getObjects("path").forEach(function(x){var T=e.util.multiplyTransformMatrices(m,x.calcTransformMatrix());e.util.applyTransformToObject(x,T),b?b.clone(function(M){var I=e.EraserBrush.prototype.applyClipPathToPath.call(e.EraserBrush.prototype,x,M,m);p._addEraserPathToObjects(I)},["absolutePositioned","inverted"]):p._addEraserPathToObjects(x)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),s.call(this)}}),e.Eraser=e.util.createClass(e.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(p){p.save(),p.fillStyle="black",p.fillRect(-this.width/2,-this.height/2,this.width,this.height),p.restore(),this.callSuper("drawObject",p)},_getBounds:function(){},_toSVG:function(p){var l=["<g ","COMMON_PARTS",` >
`],m=-this.width/2,y=-this.height/2,b=["<rect ",'fill="white" ','x="',m,'" y="',y,'" width="',this.width,'" height="',this.height,`" />
`].join("");l.push("		",b);for(var x=0,T=this._objects.length;x<T;x++)l.push("		",this._objects[x].toSVG(p));return l.push(`</g>
`),l}}),e.Eraser.fromObject=function(p,l){var m=p.objects;e.util.enlivenObjects(m,function(y){var b=e.util.object.clone(p,!0);delete b.objects,e.util.enlivenObjectEnlivables(p,b,function(){l&&l(new e.Eraser(y,b,!0))})})};var u=e.Canvas.prototype._renderOverlay;e.util.object.extend(e.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(p){u.call(this,p),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),e.EraserBrush=e.util.createClass(e.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(p){return p.erasable!==!1},_prepareCollectionTraversal:function(p,l,m){p.forEachObject(function(y){y.forEachObject&&y.erasable==="deep"?this._prepareCollectionTraversal(y,l,m):!this.inverted&&y.erasable&&y.visible?(y.visible=!1,p.dirty=!0,m.visibility.push(y),m.collection.push(p)):this.inverted&&y.visible&&(y.erasable&&y.eraser?(y.eraser.inverted=!0,y.dirty=!0,p.dirty=!0,m.eraser.push(y),m.collection.push(p)):(y.visible=!1,p.dirty=!0,m.visibility.push(y),m.collection.push(p)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=e.util.createCanvasElement());var p=this._patternCanvas;p.width=this.canvas.width,p.height=this.canvas.height;var l=p.getContext("2d");if(this.canvas._isRetinaScaling()){var m=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(m,p,l)}var y=this.canvas.backgroundImage,b=y&&this._isErasable(y),x=this.canvas.overlayImage,T=x&&this._isErasable(x);if(!this.inverted&&(y&&!b||this.canvas.backgroundColor))b&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(l),b&&(this.canvas.backgroundImage=y);else if(this.inverted&&y&&b){var M=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(l),this.canvas.backgroundColor=M}l.save(),l.transform.apply(l,this.canvas.viewportTransform);var I={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,l,I),this.canvas._renderObjects(l,this.canvas._objects),I.visibility.forEach(function(R){R.visible=!0}),I.eraser.forEach(function(R){R.eraser.inverted=!1,R.dirty=!0}),I.collection.forEach(function(R){R.dirty=!0}),l.restore(),!this.inverted&&(x&&!T||this.canvas.overlayColor))T&&(this.canvas.overlayImage=void 0),u.call(this.canvas,l),T&&(this.canvas.overlayImage=x);else if(this.inverted&&x&&T){var M=this.canvas.overlayColor;this.canvas.overlayColor=void 0,u.call(this.canvas,l),this.canvas.overlayColor=M}},_setBrushStyles:function(p){this.callSuper("_setBrushStyles",p),p.strokeStyle="black"},_saveAndTransform:function(p){this.callSuper("_saveAndTransform",p),this._setBrushStyles(p),p.globalCompositeOperation=p===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(p,l){this.canvas._isMainEvent(l.e)&&(this._prepareForDrawing(p),this._captureDrawingPath(p),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var p;this.inverted||(p=this.canvas.getContext(),this.callSuper("_render",p)),p=this.canvas.contextTop,this.canvas.clearContext(p),this.callSuper("_render",p),p.save();var l=this.canvas.getRetinaScaling(),m=1/l;p.scale(m,m),p.globalCompositeOperation="source-in",p.drawImage(this._patternCanvas,0,0),p.restore()},createPath:function(p){var l=this.callSuper("createPath",p);return l.globalCompositeOperation=this.inverted?"source-over":"destination-out",l.stroke=this.inverted?"white":"black",l},applyClipPathToPath:function(p,l,m){var y=e.util.invertTransform(p.calcTransformMatrix()),b=l.calcTransformMatrix(),x=l.absolutePositioned?y:e.util.multiplyTransformMatrices(y,m);return l.absolutePositioned=!1,e.util.applyTransformToObject(l,e.util.multiplyTransformMatrices(x,b)),p.clipPath=p.clipPath?e.util.mergeClipPaths(l,p.clipPath):l,p},clonePathWithClipPath:function(p,l,m){var y=l.calcTransformMatrix(),b=l.clipPath,x=this;p.clone(function(T){b.clone(function(M){m(x.applyClipPathToPath(T,M,y))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(p,l){var m=this;if(p.forEachObject&&p.erasable==="deep"){var y=p._objects.filter(function(x){return x.erasable});y.length>0&&p.clipPath?this.clonePathWithClipPath(l,p,function(x){y.forEach(function(T){m._addPathToObjectEraser(T,x)})}):y.length>0&&y.forEach(function(x){m._addPathToObjectEraser(x,l)});return}var b=p.eraser;b||(b=new e.Eraser,p.eraser=b),l.clone(function(x){var T=e.util.multiplyTransformMatrices(e.util.invertTransform(p.calcTransformMatrix()),x.calcTransformMatrix());e.util.applyTransformToObject(x,T),b.addWithUpdate(x),p.set("dirty",!0),p.fire("erasing:end",{path:x}),p.group&&Array.isArray(m.__subTargets)&&m.__subTargets.push(p)})},applyEraserToCanvas:function(p){var l=this.canvas,m={};return["backgroundImage","overlayImage"].forEach(function(y){var b=l[y];b&&b.erasable&&(this._addPathToObjectEraser(b,p),m[y]=b)},this),m},_finalizeAndAddPath:function(){var p=this.canvas.contextTop,l=this.canvas;p.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),l.clearContext(l.contextTop),this._isErasing=!1;var m=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!m||this._isEmptySVGPath(m)){l.fire("erasing:end"),l.requestRenderAll();return}var y=this.createPath(m);y.setCoords(),l.fire("before:path:created",{path:y});var b=this.applyEraserToCanvas(y),x=this;this.__subTargets=[];var T=[];l.forEachObject(function(M){M.erasable&&M.intersectsWithObject(y,!0,!0)&&(x._addPathToObjectEraser(M,y),T.push(M))}),l.fire("erasing:end",{path:y,targets:T,subTargets:this.__subTargets,drawables:b}),delete this.__subTargets,l.requestRenderAll(),this._resetShadow(),l.fire("path:created",{path:y})}})}()})(Jt);class Jn{constructor(e,i){Le(this,"core");Le(this,"config");Le(this,"c");Le(this,"name");this.core=e,this.config=i,this.c=e.c,this.name="unknown"}}class _y extends Jn{constructor(i,f){super(i,f);Le(this,"onPathCreated");this.onPathCreated=v=>{const w=v.path;w.selectable=!1,w.hoverCursor="default"}}onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new Jt.fabric.EraserBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*4/this.core.zoomMin,this.c.on("path:created",this.onPathCreated)}onDeselect(){this.c.isDrawingMode=!1,this.c.off("path:created",this.onPathCreated)}}class by extends Jn{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new Jt.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*1/this.core.zoomMin,this.c.freeDrawingBrush.color=this.config.color.code}onDeselect(){this.c.isDrawingMode=!1}}function wy(t,e){var i=parseInt(t.slice(1,3),16),f=parseInt(t.slice(3,5),16),v=parseInt(t.slice(5,7),16);return e?"rgba("+i+", "+f+", "+v+", "+e+")":"rgb("+i+", "+f+", "+v+")"}class xy extends Jn{onSelect(){this.c.isDrawingMode=!0,this.c.freeDrawingBrush=new Jt.fabric.PencilBrush(this.c),this.c.freeDrawingBrush.width=this.config.thickness*8/this.core.zoomMin,this.c.freeDrawingBrush.color=wy(this.config.color.code,.4),this.c.isDrawingMode=!0}onDeselect(){this.c.isDrawingMode=!1}}class Cy extends Jn{constructor(i,f=null){super(i,f);Le(this,"touchPositions");Le(this,"onMouseDown");Le(this,"isDragging");Le(this,"onMouseUp");Le(this,"onMouseMove");Le(this,"onObjectSelected");Le(this,"onSelectionCleared");Le(this,"onTouchDrag");Le(this,"lastPosX");Le(this,"lastPosY");Le(this,"pausePanning");this.touchPositions={},this.onMouseDown=v=>{const w=v.e;if(w.type==="touchstart"){this.isDragging=w.touches.length===1;for(const C of w.changedTouches)this.touchPositions[C.identifier]={x:C.clientX,y:C.clientY}}else this.isDragging=!0,this.lastPosX=w.clientX,this.lastPosY=w.clientY},this.onMouseUp=v=>{const w=v.e;if(w.type==="touchend")for(const C of w.changedTouches)delete this.touchPositions[C.identifier];this.c.setViewportTransform(this.c.viewportTransform),this.isDragging=!1},this.onMouseMove=v=>{if(v.e.type==="mousemove"&&this.isDragging){const w=v.e;this.core.pan(w.clientX-this.lastPosX,w.clientY-this.lastPosY),this.lastPosX=w.clientX,this.lastPosY=w.clientY}},this.onObjectSelected=v=>{this.pausePanning=!0},this.onSelectionCleared=v=>{this.pausePanning=!1},this.onTouchDrag=v=>{const w=v.e;if(w.type==="touchmove"&&this.isDragging){if(w.touches.length>1)return;for(const C of w.changedTouches){const E=this.touchPositions[C.identifier];if(!E)return;this.core.pan(C.clientX-E.x,C.clientY-E.y),this.touchPositions[C.identifier]={x:C.clientX,y:C.clientY}}}}}onSelect(){this.c.on("mouse:down",this.onMouseDown),this.c.on("mouse:move",this.onMouseMove),this.c.on("mouse:up",this.onMouseUp),this.c.on("object:selected",this.onObjectSelected),this.c.on("selection:cleared",this.onSelectionCleared),this.c.on("touch:drag",this.onTouchDrag)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:move",this.onMouseMove),this.c.off("mouse:up",this.onMouseUp),this.c.off("object:selected",this.onObjectSelected),this.c.off("selection:cleared",this.onSelectionCleared),this.c.off("touch:drag",this.onTouchDrag)}}class vh extends Jn{constructor(e,i=null){super(e,i)}onDeselect(){this.c.discardActiveObject().renderAll()}}class Sy extends Jn{constructor(i,f=null){super(i,f);Le(this,"selected",!1);Le(this,"onMouseDownBefore",i=>{this.selected=!!this.c.getActiveObject()});Le(this,"onMouseDown",i=>{if(this.selected)return;const f=i.e,v={x:f.clientX,y:f.clientY};this.core.addText("text",v)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}function As(t){"@babel/helpers - typeof";return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},As(t)}function ei(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function er(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function en(t){er(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||As(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ty(t,e){er(2,arguments);var i=en(t).getTime(),f=ei(e);return new Date(i+f)}var Ey={};function Ps(){return Ey}function Oy(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function Ay(t){return er(1,arguments),t instanceof Date||As(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Py(t){if(er(1,arguments),!Ay(t)&&typeof t!="number")return!1;var e=en(t);return!isNaN(Number(e))}function Dy(t,e){er(2,arguments);var i=ei(e);return Ty(t,-i)}var My=864e5;function Ry(t){er(1,arguments);var e=en(t),i=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var f=e.getTime(),v=i-f;return Math.floor(v/My)+1}function Ds(t){er(1,arguments);var e=1,i=en(t),f=i.getUTCDay(),v=(f<e?7:0)+f-e;return i.setUTCDate(i.getUTCDate()-v),i.setUTCHours(0,0,0,0),i}function mh(t){er(1,arguments);var e=en(t),i=e.getUTCFullYear(),f=new Date(0);f.setUTCFullYear(i+1,0,4),f.setUTCHours(0,0,0,0);var v=Ds(f),w=new Date(0);w.setUTCFullYear(i,0,4),w.setUTCHours(0,0,0,0);var C=Ds(w);return e.getTime()>=v.getTime()?i+1:e.getTime()>=C.getTime()?i:i-1}function ky(t){er(1,arguments);var e=mh(t),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var f=Ds(i);return f}var Iy=6048e5;function jy(t){er(1,arguments);var e=en(t),i=Ds(e).getTime()-ky(e).getTime();return Math.round(i/Iy)+1}function Ms(t,e){var i,f,v,w,C,E,O,g;er(1,arguments);var o=Ps(),h=ei((i=(f=(v=(w=e==null?void 0:e.weekStartsOn)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&v!==void 0?v:o.weekStartsOn)!==null&&f!==void 0?f:(O=o.locale)===null||O===void 0||(g=O.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&i!==void 0?i:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=en(t),n=c.getUTCDay(),a=(n<h?7:0)+n-h;return c.setUTCDate(c.getUTCDate()-a),c.setUTCHours(0,0,0,0),c}function yh(t,e){var i,f,v,w,C,E,O,g;er(1,arguments);var o=en(t),h=o.getUTCFullYear(),c=Ps(),n=ei((i=(f=(v=(w=e==null?void 0:e.firstWeekContainsDate)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.firstWeekContainsDate)!==null&&v!==void 0?v:c.firstWeekContainsDate)!==null&&f!==void 0?f:(O=c.locale)===null||O===void 0||(g=O.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(n>=1&&n<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var a=new Date(0);a.setUTCFullYear(h+1,0,n),a.setUTCHours(0,0,0,0);var s=Ms(a,e),u=new Date(0);u.setUTCFullYear(h,0,n),u.setUTCHours(0,0,0,0);var p=Ms(u,e);return o.getTime()>=s.getTime()?h+1:o.getTime()>=p.getTime()?h:h-1}function Ly(t,e){var i,f,v,w,C,E,O,g;er(1,arguments);var o=Ps(),h=ei((i=(f=(v=(w=e==null?void 0:e.firstWeekContainsDate)!==null&&w!==void 0?w:e==null||(C=e.locale)===null||C===void 0||(E=C.options)===null||E===void 0?void 0:E.firstWeekContainsDate)!==null&&v!==void 0?v:o.firstWeekContainsDate)!==null&&f!==void 0?f:(O=o.locale)===null||O===void 0||(g=O.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&i!==void 0?i:1),c=yh(t,e),n=new Date(0);n.setUTCFullYear(c,0,h),n.setUTCHours(0,0,0,0);var a=Ms(n,e);return a}var By=6048e5;function Fy(t,e){er(1,arguments);var i=en(t),f=Ms(i,e).getTime()-Ly(i,e).getTime();return Math.round(f/By)+1}function mt(t,e){for(var i=t<0?"-":"",f=Math.abs(t).toString();f.length<e;)f="0"+f;return i+f}var Ny={y:function(e,i){var f=e.getUTCFullYear(),v=f>0?f:1-f;return mt(i==="yy"?v%100:v,i.length)},M:function(e,i){var f=e.getUTCMonth();return i==="M"?String(f+1):mt(f+1,2)},d:function(e,i){return mt(e.getUTCDate(),i.length)},a:function(e,i){var f=e.getUTCHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return f.toUpperCase();case"aaa":return f;case"aaaaa":return f[0];case"aaaa":default:return f==="am"?"a.m.":"p.m."}},h:function(e,i){return mt(e.getUTCHours()%12||12,i.length)},H:function(e,i){return mt(e.getUTCHours(),i.length)},m:function(e,i){return mt(e.getUTCMinutes(),i.length)},s:function(e,i){return mt(e.getUTCSeconds(),i.length)},S:function(e,i){var f=i.length,v=e.getUTCMilliseconds(),w=Math.floor(v*Math.pow(10,f-3));return mt(w,i.length)}};const An=Ny;var Ai={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vy={G:function(e,i,f){var v=e.getUTCFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return f.era(v,{width:"abbreviated"});case"GGGGG":return f.era(v,{width:"narrow"});case"GGGG":default:return f.era(v,{width:"wide"})}},y:function(e,i,f){if(i==="yo"){var v=e.getUTCFullYear(),w=v>0?v:1-v;return f.ordinalNumber(w,{unit:"year"})}return An.y(e,i)},Y:function(e,i,f,v){var w=yh(e,v),C=w>0?w:1-w;if(i==="YY"){var E=C%100;return mt(E,2)}return i==="Yo"?f.ordinalNumber(C,{unit:"year"}):mt(C,i.length)},R:function(e,i){var f=mh(e);return mt(f,i.length)},u:function(e,i){var f=e.getUTCFullYear();return mt(f,i.length)},Q:function(e,i,f){var v=Math.ceil((e.getUTCMonth()+1)/3);switch(i){case"Q":return String(v);case"QQ":return mt(v,2);case"Qo":return f.ordinalNumber(v,{unit:"quarter"});case"QQQ":return f.quarter(v,{width:"abbreviated",context:"formatting"});case"QQQQQ":return f.quarter(v,{width:"narrow",context:"formatting"});case"QQQQ":default:return f.quarter(v,{width:"wide",context:"formatting"})}},q:function(e,i,f){var v=Math.ceil((e.getUTCMonth()+1)/3);switch(i){case"q":return String(v);case"qq":return mt(v,2);case"qo":return f.ordinalNumber(v,{unit:"quarter"});case"qqq":return f.quarter(v,{width:"abbreviated",context:"standalone"});case"qqqqq":return f.quarter(v,{width:"narrow",context:"standalone"});case"qqqq":default:return f.quarter(v,{width:"wide",context:"standalone"})}},M:function(e,i,f){var v=e.getUTCMonth();switch(i){case"M":case"MM":return An.M(e,i);case"Mo":return f.ordinalNumber(v+1,{unit:"month"});case"MMM":return f.month(v,{width:"abbreviated",context:"formatting"});case"MMMMM":return f.month(v,{width:"narrow",context:"formatting"});case"MMMM":default:return f.month(v,{width:"wide",context:"formatting"})}},L:function(e,i,f){var v=e.getUTCMonth();switch(i){case"L":return String(v+1);case"LL":return mt(v+1,2);case"Lo":return f.ordinalNumber(v+1,{unit:"month"});case"LLL":return f.month(v,{width:"abbreviated",context:"standalone"});case"LLLLL":return f.month(v,{width:"narrow",context:"standalone"});case"LLLL":default:return f.month(v,{width:"wide",context:"standalone"})}},w:function(e,i,f,v){var w=Fy(e,v);return i==="wo"?f.ordinalNumber(w,{unit:"week"}):mt(w,i.length)},I:function(e,i,f){var v=jy(e);return i==="Io"?f.ordinalNumber(v,{unit:"week"}):mt(v,i.length)},d:function(e,i,f){return i==="do"?f.ordinalNumber(e.getUTCDate(),{unit:"date"}):An.d(e,i)},D:function(e,i,f){var v=Ry(e);return i==="Do"?f.ordinalNumber(v,{unit:"dayOfYear"}):mt(v,i.length)},E:function(e,i,f){var v=e.getUTCDay();switch(i){case"E":case"EE":case"EEE":return f.day(v,{width:"abbreviated",context:"formatting"});case"EEEEE":return f.day(v,{width:"narrow",context:"formatting"});case"EEEEEE":return f.day(v,{width:"short",context:"formatting"});case"EEEE":default:return f.day(v,{width:"wide",context:"formatting"})}},e:function(e,i,f,v){var w=e.getUTCDay(),C=(w-v.weekStartsOn+8)%7||7;switch(i){case"e":return String(C);case"ee":return mt(C,2);case"eo":return f.ordinalNumber(C,{unit:"day"});case"eee":return f.day(w,{width:"abbreviated",context:"formatting"});case"eeeee":return f.day(w,{width:"narrow",context:"formatting"});case"eeeeee":return f.day(w,{width:"short",context:"formatting"});case"eeee":default:return f.day(w,{width:"wide",context:"formatting"})}},c:function(e,i,f,v){var w=e.getUTCDay(),C=(w-v.weekStartsOn+8)%7||7;switch(i){case"c":return String(C);case"cc":return mt(C,i.length);case"co":return f.ordinalNumber(C,{unit:"day"});case"ccc":return f.day(w,{width:"abbreviated",context:"standalone"});case"ccccc":return f.day(w,{width:"narrow",context:"standalone"});case"cccccc":return f.day(w,{width:"short",context:"standalone"});case"cccc":default:return f.day(w,{width:"wide",context:"standalone"})}},i:function(e,i,f){var v=e.getUTCDay(),w=v===0?7:v;switch(i){case"i":return String(w);case"ii":return mt(w,i.length);case"io":return f.ordinalNumber(w,{unit:"day"});case"iii":return f.day(v,{width:"abbreviated",context:"formatting"});case"iiiii":return f.day(v,{width:"narrow",context:"formatting"});case"iiiiii":return f.day(v,{width:"short",context:"formatting"});case"iiii":default:return f.day(v,{width:"wide",context:"formatting"})}},a:function(e,i,f){var v=e.getUTCHours(),w=v/12>=1?"pm":"am";switch(i){case"a":case"aa":return f.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"aaa":return f.dayPeriod(w,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return f.dayPeriod(w,{width:"narrow",context:"formatting"});case"aaaa":default:return f.dayPeriod(w,{width:"wide",context:"formatting"})}},b:function(e,i,f){var v=e.getUTCHours(),w;switch(v===12?w=Ai.noon:v===0?w=Ai.midnight:w=v/12>=1?"pm":"am",i){case"b":case"bb":return f.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"bbb":return f.dayPeriod(w,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return f.dayPeriod(w,{width:"narrow",context:"formatting"});case"bbbb":default:return f.dayPeriod(w,{width:"wide",context:"formatting"})}},B:function(e,i,f){var v=e.getUTCHours(),w;switch(v>=17?w=Ai.evening:v>=12?w=Ai.afternoon:v>=4?w=Ai.morning:w=Ai.night,i){case"B":case"BB":case"BBB":return f.dayPeriod(w,{width:"abbreviated",context:"formatting"});case"BBBBB":return f.dayPeriod(w,{width:"narrow",context:"formatting"});case"BBBB":default:return f.dayPeriod(w,{width:"wide",context:"formatting"})}},h:function(e,i,f){if(i==="ho"){var v=e.getUTCHours()%12;return v===0&&(v=12),f.ordinalNumber(v,{unit:"hour"})}return An.h(e,i)},H:function(e,i,f){return i==="Ho"?f.ordinalNumber(e.getUTCHours(),{unit:"hour"}):An.H(e,i)},K:function(e,i,f){var v=e.getUTCHours()%12;return i==="Ko"?f.ordinalNumber(v,{unit:"hour"}):mt(v,i.length)},k:function(e,i,f){var v=e.getUTCHours();return v===0&&(v=24),i==="ko"?f.ordinalNumber(v,{unit:"hour"}):mt(v,i.length)},m:function(e,i,f){return i==="mo"?f.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):An.m(e,i)},s:function(e,i,f){return i==="so"?f.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):An.s(e,i)},S:function(e,i){return An.S(e,i)},X:function(e,i,f,v){var w=v._originalDate||e,C=w.getTimezoneOffset();if(C===0)return"Z";switch(i){case"X":return bh(C);case"XXXX":case"XX":return ti(C);case"XXXXX":case"XXX":default:return ti(C,":")}},x:function(e,i,f,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(i){case"x":return bh(C);case"xxxx":case"xx":return ti(C);case"xxxxx":case"xxx":default:return ti(C,":")}},O:function(e,i,f,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+_h(C,":");case"OOOO":default:return"GMT"+ti(C,":")}},z:function(e,i,f,v){var w=v._originalDate||e,C=w.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+_h(C,":");case"zzzz":default:return"GMT"+ti(C,":")}},t:function(e,i,f,v){var w=v._originalDate||e,C=Math.floor(w.getTime()/1e3);return mt(C,i.length)},T:function(e,i,f,v){var w=v._originalDate||e,C=w.getTime();return mt(C,i.length)}};function _h(t,e){var i=t>0?"-":"+",f=Math.abs(t),v=Math.floor(f/60),w=f%60;if(w===0)return i+String(v);var C=e||"";return i+String(v)+C+mt(w,2)}function bh(t,e){if(t%60===0){var i=t>0?"-":"+";return i+mt(Math.abs(t)/60,2)}return ti(t,e)}function ti(t,e){var i=e||"",f=t>0?"-":"+",v=Math.abs(t),w=mt(Math.floor(v/60),2),C=mt(v%60,2);return f+w+i+C}const Uy=Vy;var wh=function(e,i){switch(e){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});case"PPPP":default:return i.date({width:"full"})}},xh=function(e,i){switch(e){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});case"pppp":default:return i.time({width:"full"})}},Yy=function(e,i){var f=e.match(/(P+)(p+)?/)||[],v=f[1],w=f[2];if(!w)return wh(e,i);var C;switch(v){case"P":C=i.dateTime({width:"short"});break;case"PP":C=i.dateTime({width:"medium"});break;case"PPP":C=i.dateTime({width:"long"});break;case"PPPP":default:C=i.dateTime({width:"full"});break}return C.replace("{{date}}",wh(v,i)).replace("{{time}}",xh(w,i))},Wy={p:xh,P:Yy};const Hy=Wy;var zy=["D","DD"],Xy=["YY","YYYY"];function Gy(t){return zy.indexOf(t)!==-1}function $y(t){return Xy.indexOf(t)!==-1}function Ch(t,e,i){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var qy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ky=function(e,i,f){var v,w=qy[e];return typeof w=="string"?v=w:i===1?v=w.one:v=w.other.replace("{{count}}",i.toString()),f!=null&&f.addSuffix?f.comparison&&f.comparison>0?"in "+v:v+" ago":v};const Qy=Ky;function ku(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.width?String(e.width):t.defaultWidth,f=t.formats[i]||t.formats[t.defaultWidth];return f}}var Zy={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},e_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},t_={date:ku({formats:Zy,defaultWidth:"full"}),time:ku({formats:Jy,defaultWidth:"full"}),dateTime:ku({formats:e_,defaultWidth:"full"})};const r_=t_;var n_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i_=function(e,i,f,v){return n_[e]};const o_=i_;function xo(t){return function(e,i){var f=i!=null&&i.context?String(i.context):"standalone",v;if(f==="formatting"&&t.formattingValues){var w=t.defaultFormattingWidth||t.defaultWidth,C=i!=null&&i.width?String(i.width):w;v=t.formattingValues[C]||t.formattingValues[w]}else{var E=t.defaultWidth,O=i!=null&&i.width?String(i.width):t.defaultWidth;v=t.values[O]||t.values[E]}var g=t.argumentCallback?t.argumentCallback(e):e;return v[g]}}var s_={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},a_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u_={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},l_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},c_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},f_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},h_=function(e,i){var f=Number(e),v=f%100;if(v>20||v<10)switch(v%10){case 1:return f+"st";case 2:return f+"nd";case 3:return f+"rd"}return f+"th"},d_={ordinalNumber:h_,era:xo({values:s_,defaultWidth:"wide"}),quarter:xo({values:a_,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:xo({values:u_,defaultWidth:"wide"}),day:xo({values:l_,defaultWidth:"wide"}),dayPeriod:xo({values:c_,defaultWidth:"wide",formattingValues:f_,defaultFormattingWidth:"wide"})};const g_=d_;function Co(t){return function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=i.width,v=f&&t.matchPatterns[f]||t.matchPatterns[t.defaultMatchWidth],w=e.match(v);if(!w)return null;var C=w[0],E=f&&t.parsePatterns[f]||t.parsePatterns[t.defaultParseWidth],O=Array.isArray(E)?v_(E,function(h){return h.test(C)}):p_(E,function(h){return h.test(C)}),g;g=t.valueCallback?t.valueCallback(O):O,g=i.valueCallback?i.valueCallback(g):g;var o=e.slice(C.length);return{value:g,rest:o}}}function p_(t,e){for(var i in t)if(t.hasOwnProperty(i)&&e(t[i]))return i}function v_(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return i}function m_(t){return function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=e.match(t.matchPattern);if(!f)return null;var v=f[0],w=e.match(t.parsePattern);if(!w)return null;var C=t.valueCallback?t.valueCallback(w[0]):w[0];C=i.valueCallback?i.valueCallback(C):C;var E=e.slice(v.length);return{value:C,rest:E}}}var y_=/^(\d+)(th|st|nd|rd)?/i,__=/\d+/i,b_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},w_={any:[/^b/i,/^(a|c)/i]},x_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},C_={any:[/1/i,/2/i,/3/i,/4/i]},S_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},T_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},O_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},A_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},P_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},D_={ordinalNumber:m_({matchPattern:y_,parsePattern:__,valueCallback:function(e){return parseInt(e,10)}}),era:Co({matchPatterns:b_,defaultMatchWidth:"wide",parsePatterns:w_,defaultParseWidth:"any"}),quarter:Co({matchPatterns:x_,defaultMatchWidth:"wide",parsePatterns:C_,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Co({matchPatterns:S_,defaultMatchWidth:"wide",parsePatterns:T_,defaultParseWidth:"any"}),day:Co({matchPatterns:E_,defaultMatchWidth:"wide",parsePatterns:O_,defaultParseWidth:"any"}),dayPeriod:Co({matchPatterns:A_,defaultMatchWidth:"any",parsePatterns:P_,defaultParseWidth:"any"})},M_={code:"en-US",formatDistance:Qy,formatLong:r_,formatRelative:o_,localize:g_,match:D_,options:{weekStartsOn:0,firstWeekContainsDate:1}};const R_=M_;var k_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j_=/^'([^]*?)'?$/,L_=/''/g,B_=/[a-zA-Z]/;function Sh(t,e,i){var f,v,w,C,E,O,g,o,h,c,n,a,s,u,p,l,m,y;er(2,arguments);var b=String(e),x=Ps(),T=(f=(v=i==null?void 0:i.locale)!==null&&v!==void 0?v:x.locale)!==null&&f!==void 0?f:R_,M=ei((w=(C=(E=(O=i==null?void 0:i.firstWeekContainsDate)!==null&&O!==void 0?O:i==null||(g=i.locale)===null||g===void 0||(o=g.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&E!==void 0?E:x.firstWeekContainsDate)!==null&&C!==void 0?C:(h=x.locale)===null||h===void 0||(c=h.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&w!==void 0?w:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=ei((n=(a=(s=(u=i==null?void 0:i.weekStartsOn)!==null&&u!==void 0?u:i==null||(p=i.locale)===null||p===void 0||(l=p.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:x.weekStartsOn)!==null&&a!==void 0?a:(m=x.locale)===null||m===void 0||(y=m.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&n!==void 0?n:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var R=en(t);if(!Py(R))throw new RangeError("Invalid time value");var W=Oy(R),K=Dy(R,W),$={firstWeekContainsDate:M,weekStartsOn:I,locale:T,_originalDate:R},se=b.match(I_).map(function(fe){var le=fe[0];if(le==="p"||le==="P"){var ce=Hy[le];return ce(fe,T.formatLong)}return fe}).join("").match(k_).map(function(fe){if(fe==="''")return"'";var le=fe[0];if(le==="'")return F_(fe);var ce=Uy[le];if(ce)return!(i!=null&&i.useAdditionalWeekYearTokens)&&$y(fe)&&Ch(fe,e,String(t)),!(i!=null&&i.useAdditionalDayOfYearTokens)&&Gy(fe)&&Ch(fe,e,String(t)),ce(K,fe,T.localize,$);if(le.match(B_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+le+"`");return fe}).join("");return se}function F_(t){var e=t.match(j_);return e?e[1].replace(L_,"'"):t}class N_ extends Jn{constructor(i,f=null){super(i,f);Le(this,"selected",!1);Le(this,"onMouseDownBefore",i=>{this.selected=!!this.c.getActiveObject()});Le(this,"onMouseDown",i=>{if(this.selected)return;const f=i.e,v={x:f.clientX,y:f.clientY},w=new Date;this.core.addText(Sh(w,"yyyy-MM-dd"),v)})}onSelect(){this.c.on("mouse:down:before",this.onMouseDownBefore),this.c.on("mouse:down",this.onMouseDown)}onDeselect(){this.c.off("mouse:down",this.onMouseDown),this.c.off("mouse:down:before",this.onMouseDownBefore)}}const Be={FREEDRAW:"FREEDRAW",SELECT:"SELECT",PAN:"PAN",TEXT:"TEXT",MARKER:"MARKER",ERASER:"ERASER",TIMESTAMP:"TIMESTAMP",SIMPLE_INPUT:"SIMPLE_INPUT"},fn={BLACK:"#000000",RED:"#d82735",YELLOW:"#ffcb35",GREEN:"#009e47",BLUE:"#0052a5"},Rs=6,Th=60,V_={HISTORY_CHANGE:"history.change",AVAILABILITY_CHANGE:"availability.change",TOOL_CHANGE:"tool.change",MODE_CHANGE:"mode.change",TEXT_CHANGE:"text.change"},U_={BRUSH:"BRUSH",TEXT:"TEXT",IMAGE:"IMAGE"},Y_={FREEDRAW:"FREEBRUSH",MARKER:"MARKER",ERASER:"ERASER",TEXT:"TEXT"},Ft=class Ft extends EventTarget{constructor({imageUrl:i,touchEnabled:f}){super();Le(this,"mode",Ft.Mode.BRUSH);Le(this,"imageUrl");Le(this,"_busy");Le(this,"zoomMin",1);Le(this,"zoomMax",2);Le(this,"history",{index:-1,records:[]});Le(this,"_isTraversingHistory",!1);Le(this,"touchEnabled");Le(this,"c",null);Le(this,"tool",null);Le(this,"config");Le(this,"isDragging");Le(this,"zoomStartScale");Le(this,"touches");Le(this,"lastPoint");Le(this,"onMouseWheel");Le(this,"onMouseUp");Le(this,"onGesture");Le(this,"onObjectAdded");Le(this,"onObjectModified");Le(this,"onObjectRemoved");Le(this,"onObjectSelected");Le(this,"onObjectSelectionUpdated");Le(this,"onObjectDeselected");Le(this,"onEraseEnd");Le(this,"containerSize");Le(this,"onHistoryChangeListener");Le(this,"onAvailabilityChangeListener");Le(this,"tools",{[Be.FREEDRAW]:{class:by},[Be.MARKER]:{class:xy},[Be.ERASER]:{class:_y},[Be.PAN]:{class:Cy},[Be.SELECT]:{class:vh},[Be.TEXT]:{class:Sy},[Be.TIMESTAMP]:{class:N_},[Be.SIMPLE_INPUT]:{class:vh}});this.config=this.fetchConfig(),this._busy=!0,this.imageUrl=i,this.touchEnabled=f}setCanvas(i){this.c=new Jt.fabric.Canvas(i,{selection:!1});const f=this.c;this.c.usePencil=this.touchEnabled?this.config.usePencil:!1,Jt.fabric.Image.fromURL(this.imageUrl,v=>{if(f.getElement()){if(v.erasable=!1,this.busy=!1,f.setBackgroundImage(v,null),this.fitCanvas(),this.selectTool(this.fetchTool()),this.history.index<0)this.pushHistory();else{const w=this.history.records[this.history.index];this.loadFromHistory(w)}this.c.on("touch:gesture",this.onGesture),this.c.on("mouse:up",this.onMouseUp),this.c.on("mouse:wheel",this.onMouseWheel),this.c.on("object:added",this.onObjectAdded),this.c.on("object:modified",this.onObjectModified),this.c.on("object:removed",this.onObjectRemoved),this.c.on("selection:created",this.onObjectSelected),this.c.on("selection:updated",this.onObjectSelectionUpdated),this.c.on("selection:cleared",this.onObjectDeselected),this.c.on("erasing:end",this.onEraseEnd)}},{crossOrigin:"anonymous"}),this.onMouseWheel=v=>{v.e.preventDefault(),v.e.stopPropagation();const w=v.e.deltaY;this.zoom({x:v.e.offsetX,y:v.e.offsetY},this.c.getZoom()*.999**w)},this.onGesture=v=>{const w=v.e;if(w.touches&&w.touches.length===2){this.isDragging=!1;const C=new Jt.fabric.Point(v.self.x,v.self.y),E=[];for(const g of w.touches)E.push({identifier:g.identifier,clientX:g.clientX,clientY:g.clientY});if(v.self.state==="start"){this.zoomStartScale=this.c.getZoom(),this.touches=E;return}this.lastPoint&&this.pan(C.x-this.lastPoint.x,C.y-this.lastPoint.y);const O=this.zoomStartScale*(w.scale??v.self.scale);this.zoom(C,O),this.lastPoint=C,this.touches=E}},this.onMouseUp=v=>{v.e.type==="touchend"&&(this.lastPoint=null,this.touches=null)},this.onObjectAdded=v=>{if(v.target.type==="path"){const w=v.target;w.selectable=!1,w.hoverCursor="default"}this.c.getObjects("image").forEach(w=>{this.c.bringToFront(w)}),this.c.getObjects("path").forEach(w=>{this.c.bringToFront(w)}),this.c.getObjects("i-text").forEach(w=>{this.c.bringToFront(w)}),!this.isTraversingHistory&&this.pushHistory()},this.onObjectModified=v=>{if(!this.isTraversingHistory){if(v.target.type==="i-text"&&v.target.text.trim()===""){const w=this.isTraversingHistory;this.isTraversingHistory=!0,this.c.remove(v.target),this.isTraversingHistory=w}this.pushHistory()}},this.onEraseEnd=v=>{this.isTraversingHistory||this.pushHistory()},this.onObjectRemoved=v=>{this.isTraversingHistory||this.pushHistory()},this.onObjectSelected=v=>{const w=v.selected[0];switch(w.type){case"i-text":return this.tool.name===Be.PAN&&this.selectTool(Be.SELECT),this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.TEXT);case"image":return this.tool.name===Be.PAN&&this.selectTool(Be.SELECT),this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.IMAGE);default:throw new Error(`object type ${w.type} selected`)}},this.onObjectSelectionUpdated=v=>{switch(v.selected[0].type){case"i-text":return this.tool.name===Be.PAN&&this.selectTool(Be.SELECT),this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.TEXT);case"image":return this.tool.name===Be.PAN&&this.selectTool(Be.SELECT),this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.IMAGE)}},this.onObjectDeselected=v=>{this._dispatch(Ft.Event.MODE_CHANGE,Ft.Mode.BRUSH)}}zoom(i,f){const v=Math.max(this.zoomMin,Math.min(this.zoomMax,f));this.c.zoomToPoint(i,v),this.adjustPan()}pan(i,f){this.c.relativePan({x:i,y:f}),this.adjustPan()}clamp(i,f,v){return Math.min(Math.max(i,f),v)}adjustPan(){const i=this.c.viewportTransform,f=this.c.getZoom(),v=this.c.backgroundImage;if(!v)return;const w=v.angle||0,C=Math.abs(w%180)===90,E=C?v.height:v.width,O=C?v.width:v.height,g=this.c.getWidth(),o=this.c.getHeight(),h=E*f,c=O*f,n=v.left,a=v.top,s=(n-E/2)*f,u=(n+E/2)*f,p=(a-O/2)*f,l=(a+O/2)*f;let m,y,b,x;h<=g?m=y=g/2-n*f:(m=g-u,y=-s),c<=o?b=x=o/2-a*f:(b=o-l,x=-p),i[4]=this.clamp(i[4],m,y),i[5]=this.clamp(i[5],b,x),this.c.setViewportTransform(i)}detach(){this.c&&(this.c.dispose(),this.tool=null)}getToolConfig(i){switch(i){case Be.FREEDRAW:return this.config.freedraw;case Be.MARKER:return this.config.marker;case Be.ERASER:return this.config.eraser;default:return null}}selectTool(i){var C,E,O;if(!this.available)return;const f=this.getToolConfig(i),v=new this.tools[i].class(this,f),w=this.tool;(E=w==null?void 0:(C=w.instance).onDeselect)==null||E.call(C),this.tool={name:i,instance:v},(O=v.onSelect)==null||O.call(v),(w==null?void 0:w.type)!==v&&this._dispatch(Ft.Event.TOOL_CHANGE,i),this.cacheTool()}updateToolConfig(i,f){const v=this.getToolConfig(i),w=Object.assign({},v,f);switch(i){case Be.FREEDRAW:this.config.freedraw=w;break;case Be.MARKER:this.config.marker=w;break;case Be.ERASER:this.config.eraser=w;break;default:throw new Error(`Invalid toolId ${i}`)}return this.tool.name===i&&this.selectTool(i),this.cacheConfig(),w}setContainerSize(i){const f=this.containerSize;if(this.containerSize=i,this.c&&f){const v=f.width/2,w=f.height/2,C=i.width/2,E=i.height/2;this.c.getObjects().forEach(O=>{if(O!==this.c.backgroundImage){const g=O.left-v,o=O.top-w;O.set({left:C+g,top:E+o})}}),this.updateHistoryForResize(f,i),this.fitCanvas(),this.c.requestRenderAll()}else this.c&&this.fitCanvas()}updateHistoryForResize(i,f){const v=i.width/2,w=i.height/2,C=f.width/2,E=f.height/2;this.history.records=this.history.records.map(O=>{if(O.objects&&Array.isArray(O.objects)){const g=O.objects.map(o=>{if(o.type!=="image"||!o.isBackground){const h=o.left-v,c=o.top-w;return{...o,left:C+h,top:E+c}}return o});return{...O,objects:g}}return O})}addImage(i){this.available&&(this.busy=!0,this.selectTool(Be.SELECT),Jt.fabric.Image.fromURL(i,f=>{this.c.add(f),this.c.centerObject(f),this.c.setActiveObject(f),f.erasable=!1,this.busy=!1},{crossOrigin:"anonymous",borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11}))}async saveImageAsBlob(){return new Promise((i,f)=>{const v=this.c.getActiveObject();if(v&&v.type==="image"){const w=v.getScaledWidth(),C=v.getScaledHeight(),E=document.createElement("canvas"),O=E.getContext("2d");E.width=w,E.height=C,O&&O.drawImage(v._element,0,0,w,C),E.toBlob(function(g){i(g)})}else f(new Error("   ."))})}calcTextSize(i){return(Rs+i/100*(Th-Rs))/this.zoomMin}calcFontSize(i){return(i*this.zoomMin-Rs)/(Th-Rs)*100}addText(i,f,v){if(!this.available)return;this.touchEnabled&&this.selectTool(Be.SELECT);let w=null;if(f!=null&&f.x&&(f!=null&&f.y)&&(w=this.c.getPointer({clientX:f.x,clientY:f.y}),w)){const E=this.c.findTarget({x:f.x,y:f.y},!1);if(E){this.c.setActiveObject(E),this.c.requestRenderAll();return}}const C=new Jt.fabric.IText(i,{borderColor:"#0B99FF",cornerColor:"#0B99FF",cornerSize:11});if(C.set("fill",this.config.text.color.code),C.set("fontSize",this.calcTextSize(this.config.text.fontSize)),w){let E=w.x,O=w.y;if(f!=null&&f.shaking){const o=(Math.random()-.5)*2*40,h=(Math.random()-.5)*2*40;E+=o,O+=h}C.set("left",E),C.set("top",O)}else if(this.c.viewportCenterObject(C),f!=null&&f.shaking){const O=(Math.random()-.5)*2*40,g=(Math.random()-.5)*2*40;C.set("left",C.left+O),C.set("top",C.top+g)}C.erasable=!1,this.c.add(C),v||(this.c.setActiveObject(C),C.selectAll(),C.enterEditing())}async undo(){if(!this.available||this.history.index===0)return;this.history.index-=1;const i=this.history.records[this.history.index];await this.loadFromHistory(i),this._dispatchHistoryChange()}async redo(){if(!this.available||this.history.index>=this.history.records.length-1)return;this.history.index+=1;const i=this.history.records[this.history.index];await this.loadFromHistory(i),this._dispatchHistoryChange()}async loadFromHistory(i){this.isTraversingHistory=!0,await new Promise((f,v)=>{try{const w=i.objects||i;Jt.fabric.util.enlivenObjects(w,C=>{this.c.remove(...this.c.getObjects()),C.forEach(E=>{this.c.add(E)}),i.backgroundImage&&this.c.backgroundImage&&(this.c.backgroundImage.set({angle:i.backgroundImage.angle||0,left:i.backgroundImage.left,top:i.backgroundImage.top,originX:"center",originY:"center"}),this.updateClipPath(),this.fitCanvas()),this.c.renderAll(),f()},null)}catch(w){v(w)}}),this.isTraversingHistory=!1}async saveHistoryCache(){localStorage.setItem("historyCache",JSON.stringify(this.history))}async clearHistoryCache(){localStorage.removeItem("historyCache")}async loadHistoryCache(){const i=localStorage.getItem("historyCache");if(i){this.history=JSON.parse(i);const f=this.history.records[this.history.index];await this.loadFromHistory(f),this.clearHistoryCache()}}get isTraversingHistory(){return this._isTraversingHistory}set isTraversingHistory(i){this._isTraversingHistory=i,this._dispatchAvailbilityChange()}get busy(){return this._busy}set busy(i){this._busy=i,this._dispatchAvailbilityChange()}get available(){return!this._isTraversingHistory&&!this.busy}pushHistory(){const i=this.history.records.slice(0,this.history.index+1),f=this.c.backgroundImage?{angle:this.c.backgroundImage.angle||0,left:this.c.backgroundImage.left,top:this.c.backgroundImage.top}:null,v={objects:this.c.toObject().objects,backgroundImage:f};this.history.records=[...i,v],this.history.index=this.history.records.length-1,this._dispatchHistoryChange()}onHistoryChange(i){this.onHistoryChangeListener=i}onAvailabilityChange(i){this.onAvailabilityChangeListener=i}on(i,f){const v=w=>{f(w.detail)};return this.addEventListener(i,v),()=>{this.removeEventListener(i,v)}}getHistoryInfo(){return{index:this.history.index,histories:this.history.records.length}}_dispatch(i,f){this.dispatchEvent(new CustomEvent(i,{detail:f}))}_dispatchHistoryChange(){this._dispatch(Ft.Event.HISTORY_CHANGE,this.getHistoryInfo())}_dispatchAvailbilityChange(){this._dispatch(Ft.Event.AVAILABILITY_CHANGE,this.available)}fitCanvas(){const i=this.c.backgroundImage,f=this.containerSize;if(!i||!f)return;const v=i.width,w=i.height,C=i.angle||0,E=Math.abs(C%180)===90,O=E?w:v,g=E?v:w;let o=Math.min(this.containerSize.width/O,this.containerSize.height/g);(f.width>O||f.height>g)&&(o=Math.min(f.width/O,f.height/g)),this.zoomMin=o,this.c.setWidth(f.width),this.c.setHeight(f.height),i.set({originX:"center",originY:"center"}),i.center();const c=new Jt.fabric.Rect({width:v+4,height:w+4,originX:"center",originY:"center",angle:C,left:i.left,top:i.top});this.c.clipPath=c,this.zoom({x:f.width/2,y:f.height/2},o)}getDataUrl(i){const f=this.c.viewportTransform;this.c.viewportTransform=Jt.fabric.iMatrix.slice(0);const v=this.c.backgroundImage,w=(v==null?void 0:v.angle)||0,C=Math.abs(w%180)===90,E=C?v.height:v.width,O=C?v.width:v.height,g=this.c.toDataURL({format:i.toLowerCase()==="png"?"png":"jpeg",width:E,height:O,left:v.left-E/2,top:v.top-O/2});return this.c.viewportTransform=f,g}async toBlob(){const i=this.c.viewportTransform;this.c.viewportTransform=Jt.fabric.iMatrix.slice(0);const f=this.c.backgroundImage,v=(f==null?void 0:f.angle)||0,w=Math.abs(v%180)===90,C=w?f.height:f.width,E=w?f.width:f.height,O=new Promise((g,o)=>{this.c.toBlob(h=>{if(!h){o(new Error("Cannot create blob"));return}g(h)},{width:C,height:E,left:f.left-C/2,top:f.top-E/2})});try{return this.busy=!0,await O,O}finally{this.c.viewportTransform=i,this.busy=!1}}deleteSelectedObject(){this.c.remove(this.c.getActiveObject())}changeSelectedTextSize(i){this.c.getActiveObject().set("fontSize",this.calcTextSize(i)),this.config.text.fontSize=i,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextColor(i){this.c.getActiveObject().set("fill",i.code),this.config.text.color=i,this.cacheConfig(),this.c.requestRenderAll()}changeSelectedTextMessage(i){this.c.getActiveObject().set("text",i),this.c.requestRenderAll()}getSelectedTextSize(){const i=this.c.getActiveObject();return this.calcFontSize(i.fontSize)}getSelectedTextColor(){const i=this.c.getActiveObject();return Object.values(fn).includes(i.fill)?{type:"preset",code:i.fill}:{type:"custom",code:i.fill}}getSelectedTextContents(){return this.c.getActiveObject().text}setUsePencil(i){this.config.usePencil=i,this.c.usePencil=i,this.cacheConfig()}fetchConfig(){const i=localStorage.getItem("editorConfig"),f=i?JSON.parse(i):null;return{freedraw:(f==null?void 0:f.freedraw)??{thickness:3,color:{type:"preset",code:fn.BLACK}},marker:(f==null?void 0:f.marker)??{thickness:3,color:{type:"preset",code:fn.BLACK}},eraser:(f==null?void 0:f.eraser)??{thickness:3},text:(f==null?void 0:f.text)??{color:{type:"preset",code:fn.BLACK},fontSize:40},usePencil:(f==null?void 0:f.usePencil)??!0}}fetchTool(){return localStorage.getItem("editorTool")??Be.PAN}cacheConfig(){localStorage.setItem("editorConfig",JSON.stringify(this.config))}cacheTool(){localStorage.setItem("editorTool",this.tool.name)}isDirty(){return this.history.index>0}rotateBaseImage90(){if(!this.available||!this.c.backgroundImage)return;const i=this.c.backgroundImage,v=((i.angle||0)+90)%360;i.set({originX:"center",originY:"center",angle:v}),i.center(),this.updateClipPath(),this.c.requestRenderAll(),this.fitCanvas(),this.pushHistory()}updateClipPath(){const i=this.c.backgroundImage;if(!i)return;const f=new Jt.fabric.Rect({width:i.width+4,height:i.height+4,originX:"center",originY:"center",angle:i.angle||0,left:i.left,top:i.top});this.c.clipPath=f}saveCanvasJson(){if(!this.c)return null;const i=this.c.getObjects().filter(h=>h!==this.c.backgroundImage),f=this.c.backgroundImage,v=(f==null?void 0:f.angle)||0,w=Math.abs(v%180)===90,C=w?f.height:f.width,E=w?f.width:f.height,O=f.left-C/2,g=f.top-E/2;return{objects:i.map(h=>{const c=h.toObject(),n=(h.left-O)/C,a=(h.top-g)/E;let s=1;return h.type==="i-text"?s=h.fontSize/C:s=(h.scaleX||1)/C,{...c,relativeLeft:n,relativeTop:a,relativeScale:s,originalType:h.type}}),version:"1.0",timestamp:Date.now(),reference:{width:C,height:E,angle:v}}}async loadCanvasJson(i){if(!this.available||!i)return!1;try{this.busy=!0,this.isTraversingHistory=!0;const f=this.c.getObjects().filter(h=>h!==this.c.backgroundImage);this.c.remove(...f);const v=this.c.backgroundImage,w=(v==null?void 0:v.angle)||0,C=Math.abs(w%180)===90,E=C?v.height:v.width,O=C?v.width:v.height,g=v.left-E/2,o=v.top-O/2;return i.objects&&i.objects.length>0&&await new Promise((h,c)=>{Jt.fabric.util.enlivenObjects(i.objects,n=>{n.forEach((a,s)=>{const u=i.objects[s],p=g+u.relativeLeft*E,l=o+u.relativeTop*O;if(a.set({left:p,top:l}),u.originalType==="i-text"){const m=u.relativeScale*E;a.set("fontSize",m)}else{const m=u.relativeScale*E;a.set({scaleX:m,scaleY:m})}this.c.add(a)}),this.c.renderAll(),h(!0)},null)}),this.isTraversingHistory=!1,this.busy=!1,this.pushHistory(),!0}catch(f){return console.error("Failed to load canvas data:",f),this.isTraversingHistory=!1,this.busy=!1,!1}}};Le(Ft,"Event",V_),Le(Ft,"Mode",U_),Le(Ft,"ConfigName",Y_);let $t=Ft;function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t},nt.apply(this,arguments)}function ri(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Eh(t){if(!ri(t))return t;const e={};return Object.keys(t).forEach(i=>{e[i]=Eh(t[i])}),e}function hn(t,e,i={clone:!0}){const f=i.clone?nt({},t):t;return ri(t)&&ri(e)&&Object.keys(e).forEach(v=>{v!=="__proto__"&&(ri(e[v])&&v in t&&ri(t[v])?f[v]=hn(t[v],e[v],i):i.clone?f[v]=ri(e[v])?Eh(e[v]):e[v]:f[v]=e[v])}),f}var Iu={exports:{}},ks={exports:{}},ut={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh;function W_(){if(Oh)return ut;Oh=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,f=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,O=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,o=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,u=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,l=t?Symbol.for("react.scope"):60119;function m(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case e:switch(b=b.type,b){case O:case g:case f:case w:case v:case h:return b;default:switch(b=b&&b.$$typeof,b){case E:case o:case a:case n:case C:return b;default:return x}}case i:return x}}}function y(b){return m(b)===g}return ut.AsyncMode=O,ut.ConcurrentMode=g,ut.ContextConsumer=E,ut.ContextProvider=C,ut.Element=e,ut.ForwardRef=o,ut.Fragment=f,ut.Lazy=a,ut.Memo=n,ut.Portal=i,ut.Profiler=w,ut.StrictMode=v,ut.Suspense=h,ut.isAsyncMode=function(b){return y(b)||m(b)===O},ut.isConcurrentMode=y,ut.isContextConsumer=function(b){return m(b)===E},ut.isContextProvider=function(b){return m(b)===C},ut.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},ut.isForwardRef=function(b){return m(b)===o},ut.isFragment=function(b){return m(b)===f},ut.isLazy=function(b){return m(b)===a},ut.isMemo=function(b){return m(b)===n},ut.isPortal=function(b){return m(b)===i},ut.isProfiler=function(b){return m(b)===w},ut.isStrictMode=function(b){return m(b)===v},ut.isSuspense=function(b){return m(b)===h},ut.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===f||b===g||b===w||b===v||b===h||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===a||b.$$typeof===n||b.$$typeof===C||b.$$typeof===E||b.$$typeof===o||b.$$typeof===u||b.$$typeof===p||b.$$typeof===l||b.$$typeof===s)},ut.typeOf=m,ut}var lt={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah;function H_(){return Ah||(Ah=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,f=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,O=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,o=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,u=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,l=t?Symbol.for("react.scope"):60119;function m(Y){return typeof Y=="string"||typeof Y=="function"||Y===f||Y===g||Y===w||Y===v||Y===h||Y===c||typeof Y=="object"&&Y!==null&&(Y.$$typeof===a||Y.$$typeof===n||Y.$$typeof===C||Y.$$typeof===E||Y.$$typeof===o||Y.$$typeof===u||Y.$$typeof===p||Y.$$typeof===l||Y.$$typeof===s)}function y(Y){if(typeof Y=="object"&&Y!==null){var he=Y.$$typeof;switch(he){case e:var ie=Y.type;switch(ie){case O:case g:case f:case w:case v:case h:return ie;default:var ee=ie&&ie.$$typeof;switch(ee){case E:case o:case a:case n:case C:return ee;default:return he}}case i:return he}}}var b=O,x=g,T=E,M=C,I=e,R=o,W=f,K=a,$=n,se=i,fe=w,le=v,ce=h,_e=!1;function Oe(Y){return _e||(_e=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ne(Y)||y(Y)===O}function ne(Y){return y(Y)===g}function D(Y){return y(Y)===E}function F(Y){return y(Y)===C}function B(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function L(Y){return y(Y)===o}function X(Y){return y(Y)===f}function A(Y){return y(Y)===a}function k(Y){return y(Y)===n}function V(Y){return y(Y)===i}function z(Y){return y(Y)===w}function Z(Y){return y(Y)===v}function J(Y){return y(Y)===h}lt.AsyncMode=b,lt.ConcurrentMode=x,lt.ContextConsumer=T,lt.ContextProvider=M,lt.Element=I,lt.ForwardRef=R,lt.Fragment=W,lt.Lazy=K,lt.Memo=$,lt.Portal=se,lt.Profiler=fe,lt.StrictMode=le,lt.Suspense=ce,lt.isAsyncMode=Oe,lt.isConcurrentMode=ne,lt.isContextConsumer=D,lt.isContextProvider=F,lt.isElement=B,lt.isForwardRef=L,lt.isFragment=X,lt.isLazy=A,lt.isMemo=k,lt.isPortal=V,lt.isProfiler=z,lt.isStrictMode=Z,lt.isSuspense=J,lt.isValidElementType=m,lt.typeOf=y}()),lt}var Ph;function Dh(){return Ph||(Ph=1,process.env.NODE_ENV==="production"?ks.exports=W_():ks.exports=H_()),ks.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ju,Mh;function z_(){if(Mh)return ju;Mh=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function f(w){if(w==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(w)}function v(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var C={},E=0;E<10;E++)C["_"+String.fromCharCode(E)]=E;var O=Object.getOwnPropertyNames(C).map(function(o){return C[o]});if(O.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(o){g[o]=o}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return ju=v()?Object.assign:function(w,C){for(var E,O=f(w),g,o=1;o<arguments.length;o++){E=Object(arguments[o]);for(var h in E)e.call(E,h)&&(O[h]=E[h]);if(t){g=t(E);for(var c=0;c<g.length;c++)i.call(E,g[c])&&(O[g[c]]=E[g[c]])}}return O},ju}var Lu,Rh;function Bu(){if(Rh)return Lu;Rh=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lu=t,Lu}var Fu,kh;function Ih(){return kh||(kh=1,Fu=Function.call.bind(Object.prototype.hasOwnProperty)),Fu}var Nu,jh;function X_(){if(jh)return Nu;jh=1;var t=function(){};if(process.env.NODE_ENV!=="production"){var e=Bu(),i={},f=Ih();t=function(w){var C="Warning: "+w;typeof console<"u"&&console.error(C);try{throw new Error(C)}catch{}}}function v(w,C,E,O,g){if(process.env.NODE_ENV!=="production"){for(var o in w)if(f(w,o)){var h;try{if(typeof w[o]!="function"){var c=Error((O||"React class")+": "+E+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof w[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}h=w[o](C,o,O,E,null,e)}catch(a){h=a}if(h&&!(h instanceof Error)&&t((O||"React class")+": type specification of "+E+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof h+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),h instanceof Error&&!(h.message in i)){i[h.message]=!0;var n=g?g():"";t("Failed "+E+" type: "+h.message+(n??""))}}}}return v.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(i={})},Nu=v,Nu}var Vu,Lh;function G_(){if(Lh)return Vu;Lh=1;var t=Dh(),e=z_(),i=Bu(),f=Ih(),v=X_(),w=function(){};process.env.NODE_ENV!=="production"&&(w=function(E){var O="Warning: "+E;typeof console<"u"&&console.error(O);try{throw new Error(O)}catch{}});function C(){return null}return Vu=function(E,O){var g=typeof Symbol=="function"&&Symbol.iterator,o="@@iterator";function h(ne){var D=ne&&(g&&ne[g]||ne[o]);if(typeof D=="function")return D}var c="<<anonymous>>",n={array:p("array"),bigint:p("bigint"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:l(),arrayOf:m,element:y(),elementType:b(),instanceOf:x,node:R(),objectOf:M,oneOf:T,oneOfType:I,shape:K,exact:$};function a(ne,D){return ne===D?ne!==0||1/ne===1/D:ne!==ne&&D!==D}function s(ne,D){this.message=ne,this.data=D&&typeof D=="object"?D:{},this.stack=""}s.prototype=Error.prototype;function u(ne){if(process.env.NODE_ENV!=="production")var D={},F=0;function B(X,A,k,V,z,Z,J){if(V=V||c,Z=Z||k,J!==i){if(O){var Y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Y.name="Invariant Violation",Y}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var he=V+":"+k;!D[he]&&F<3&&(w("You are manually calling a React.PropTypes validation function for the `"+Z+"` prop on `"+V+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),D[he]=!0,F++)}}return A[k]==null?X?A[k]===null?new s("The "+z+" `"+Z+"` is marked as required "+("in `"+V+"`, but its value is `null`.")):new s("The "+z+" `"+Z+"` is marked as required in "+("`"+V+"`, but its value is `undefined`.")):null:ne(A,k,V,z,Z)}var L=B.bind(null,!1);return L.isRequired=B.bind(null,!0),L}function p(ne){function D(F,B,L,X,A,k){var V=F[B],z=le(V);if(z!==ne){var Z=ce(V);return new s("Invalid "+X+" `"+A+"` of type "+("`"+Z+"` supplied to `"+L+"`, expected ")+("`"+ne+"`."),{expectedType:ne})}return null}return u(D)}function l(){return u(C)}function m(ne){function D(F,B,L,X,A){if(typeof ne!="function")return new s("Property `"+A+"` of component `"+L+"` has invalid PropType notation inside arrayOf.");var k=F[B];if(!Array.isArray(k)){var V=le(k);return new s("Invalid "+X+" `"+A+"` of type "+("`"+V+"` supplied to `"+L+"`, expected an array."))}for(var z=0;z<k.length;z++){var Z=ne(k,z,L,X,A+"["+z+"]",i);if(Z instanceof Error)return Z}return null}return u(D)}function y(){function ne(D,F,B,L,X){var A=D[F];if(!E(A)){var k=le(A);return new s("Invalid "+L+" `"+X+"` of type "+("`"+k+"` supplied to `"+B+"`, expected a single ReactElement."))}return null}return u(ne)}function b(){function ne(D,F,B,L,X){var A=D[F];if(!t.isValidElementType(A)){var k=le(A);return new s("Invalid "+L+" `"+X+"` of type "+("`"+k+"` supplied to `"+B+"`, expected a single ReactElement type."))}return null}return u(ne)}function x(ne){function D(F,B,L,X,A){if(!(F[B]instanceof ne)){var k=ne.name||c,V=Oe(F[B]);return new s("Invalid "+X+" `"+A+"` of type "+("`"+V+"` supplied to `"+L+"`, expected ")+("instance of `"+k+"`."))}return null}return u(D)}function T(ne){if(!Array.isArray(ne))return process.env.NODE_ENV!=="production"&&(arguments.length>1?w("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):w("Invalid argument supplied to oneOf, expected an array.")),C;function D(F,B,L,X,A){for(var k=F[B],V=0;V<ne.length;V++)if(a(k,ne[V]))return null;var z=JSON.stringify(ne,function(J,Y){var he=ce(Y);return he==="symbol"?String(Y):Y});return new s("Invalid "+X+" `"+A+"` of value `"+String(k)+"` "+("supplied to `"+L+"`, expected one of "+z+"."))}return u(D)}function M(ne){function D(F,B,L,X,A){if(typeof ne!="function")return new s("Property `"+A+"` of component `"+L+"` has invalid PropType notation inside objectOf.");var k=F[B],V=le(k);if(V!=="object")return new s("Invalid "+X+" `"+A+"` of type "+("`"+V+"` supplied to `"+L+"`, expected an object."));for(var z in k)if(f(k,z)){var Z=ne(k,z,L,X,A+"."+z,i);if(Z instanceof Error)return Z}return null}return u(D)}function I(ne){if(!Array.isArray(ne))return process.env.NODE_ENV!=="production"&&w("Invalid argument supplied to oneOfType, expected an instance of array."),C;for(var D=0;D<ne.length;D++){var F=ne[D];if(typeof F!="function")return w("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+_e(F)+" at index "+D+"."),C}function B(L,X,A,k,V){for(var z=[],Z=0;Z<ne.length;Z++){var J=ne[Z],Y=J(L,X,A,k,V,i);if(Y==null)return null;Y.data&&f(Y.data,"expectedType")&&z.push(Y.data.expectedType)}var he=z.length>0?", expected one of type ["+z.join(", ")+"]":"";return new s("Invalid "+k+" `"+V+"` supplied to "+("`"+A+"`"+he+"."))}return u(B)}function R(){function ne(D,F,B,L,X){return se(D[F])?null:new s("Invalid "+L+" `"+X+"` supplied to "+("`"+B+"`, expected a ReactNode."))}return u(ne)}function W(ne,D,F,B,L){return new s((ne||"React class")+": "+D+" type `"+F+"."+B+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+L+"`.")}function K(ne){function D(F,B,L,X,A){var k=F[B],V=le(k);if(V!=="object")return new s("Invalid "+X+" `"+A+"` of type `"+V+"` "+("supplied to `"+L+"`, expected `object`."));for(var z in ne){var Z=ne[z];if(typeof Z!="function")return W(L,X,A,z,ce(Z));var J=Z(k,z,L,X,A+"."+z,i);if(J)return J}return null}return u(D)}function $(ne){function D(F,B,L,X,A){var k=F[B],V=le(k);if(V!=="object")return new s("Invalid "+X+" `"+A+"` of type `"+V+"` "+("supplied to `"+L+"`, expected `object`."));var z=e({},F[B],ne);for(var Z in z){var J=ne[Z];if(f(ne,Z)&&typeof J!="function")return W(L,X,A,Z,ce(J));if(!J)return new s("Invalid "+X+" `"+A+"` key `"+Z+"` supplied to `"+L+"`.\nBad object: "+JSON.stringify(F[B],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ne),null,"  "));var Y=J(k,Z,L,X,A+"."+Z,i);if(Y)return Y}return null}return u(D)}function se(ne){switch(typeof ne){case"number":case"string":case"undefined":return!0;case"boolean":return!ne;case"object":if(Array.isArray(ne))return ne.every(se);if(ne===null||E(ne))return!0;var D=h(ne);if(D){var F=D.call(ne),B;if(D!==ne.entries){for(;!(B=F.next()).done;)if(!se(B.value))return!1}else for(;!(B=F.next()).done;){var L=B.value;if(L&&!se(L[1]))return!1}}else return!1;return!0;default:return!1}}function fe(ne,D){return ne==="symbol"?!0:D?D["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&D instanceof Symbol:!1}function le(ne){var D=typeof ne;return Array.isArray(ne)?"array":ne instanceof RegExp?"object":fe(D,ne)?"symbol":D}function ce(ne){if(typeof ne>"u"||ne===null)return""+ne;var D=le(ne);if(D==="object"){if(ne instanceof Date)return"date";if(ne instanceof RegExp)return"regexp"}return D}function _e(ne){var D=ce(ne);switch(D){case"array":case"object":return"an "+D;case"boolean":case"date":case"regexp":return"a "+D;default:return D}}function Oe(ne){return!ne.constructor||!ne.constructor.name?c:ne.constructor.name}return n.checkPropTypes=v,n.resetWarningCache=v.resetWarningCache,n.PropTypes=n,n},Vu}var Uu,Bh;function $_(){if(Bh)return Uu;Bh=1;var t=Bu();function e(){}function i(){}return i.resetWarningCache=e,Uu=function(){function f(C,E,O,g,o,h){if(h!==t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}f.isRequired=f;function v(){return f}var w={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:v,element:f,elementType:f,instanceOf:v,node:f,objectOf:v,oneOf:v,oneOfType:v,shape:v,exact:v,checkPropTypes:i,resetWarningCache:e};return w.PropTypes=w,w},Uu}if(process.env.NODE_ENV!=="production"){var q_=Dh(),K_=!0;Iu.exports=G_()(q_.isElement,K_)}else Iu.exports=$_()();var Q_=Iu.exports;const Qe=Bc(Q_);function Pi(t){let e="https://mui.com/production-error/?code="+t;for(let i=1;i<arguments.length;i+=1)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var Yu={exports:{}},ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Z_(){if(Fh)return ct;Fh=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.server_context"),O=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a;a=Symbol.for("react.module.reference");function s(u){if(typeof u=="object"&&u!==null){var p=u.$$typeof;switch(p){case t:switch(u=u.type,u){case i:case v:case f:case g:case o:return u;default:switch(u=u&&u.$$typeof,u){case E:case C:case O:case c:case h:case w:return u;default:return p}}case e:return p}}}return ct.ContextConsumer=C,ct.ContextProvider=w,ct.Element=t,ct.ForwardRef=O,ct.Fragment=i,ct.Lazy=c,ct.Memo=h,ct.Portal=e,ct.Profiler=v,ct.StrictMode=f,ct.Suspense=g,ct.SuspenseList=o,ct.isAsyncMode=function(){return!1},ct.isConcurrentMode=function(){return!1},ct.isContextConsumer=function(u){return s(u)===C},ct.isContextProvider=function(u){return s(u)===w},ct.isElement=function(u){return typeof u=="object"&&u!==null&&u.$$typeof===t},ct.isForwardRef=function(u){return s(u)===O},ct.isFragment=function(u){return s(u)===i},ct.isLazy=function(u){return s(u)===c},ct.isMemo=function(u){return s(u)===h},ct.isPortal=function(u){return s(u)===e},ct.isProfiler=function(u){return s(u)===v},ct.isStrictMode=function(u){return s(u)===f},ct.isSuspense=function(u){return s(u)===g},ct.isSuspenseList=function(u){return s(u)===o},ct.isValidElementType=function(u){return typeof u=="string"||typeof u=="function"||u===i||u===v||u===f||u===g||u===o||u===n||typeof u=="object"&&u!==null&&(u.$$typeof===c||u.$$typeof===h||u.$$typeof===w||u.$$typeof===C||u.$$typeof===O||u.$$typeof===a||u.getModuleId!==void 0)},ct.typeOf=s,ct}var ft={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh;function J_(){return Nh||(Nh=1,process.env.NODE_ENV!=="production"&&function(){var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.server_context"),O=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a=!1,s=!1,u=!1,p=!1,l=!1,m;m=Symbol.for("react.module.reference");function y(ie){return!!(typeof ie=="string"||typeof ie=="function"||ie===i||ie===v||l||ie===f||ie===g||ie===o||p||ie===n||a||s||u||typeof ie=="object"&&ie!==null&&(ie.$$typeof===c||ie.$$typeof===h||ie.$$typeof===w||ie.$$typeof===C||ie.$$typeof===O||ie.$$typeof===m||ie.getModuleId!==void 0))}function b(ie){if(typeof ie=="object"&&ie!==null){var ee=ie.$$typeof;switch(ee){case t:var Q=ie.type;switch(Q){case i:case v:case f:case g:case o:return Q;default:var ae=Q&&Q.$$typeof;switch(ae){case E:case C:case O:case c:case h:case w:return ae;default:return ee}}case e:return ee}}}var x=C,T=w,M=t,I=O,R=i,W=c,K=h,$=e,se=v,fe=f,le=g,ce=o,_e=!1,Oe=!1;function ne(ie){return _e||(_e=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1}function D(ie){return Oe||(Oe=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1}function F(ie){return b(ie)===C}function B(ie){return b(ie)===w}function L(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===t}function X(ie){return b(ie)===O}function A(ie){return b(ie)===i}function k(ie){return b(ie)===c}function V(ie){return b(ie)===h}function z(ie){return b(ie)===e}function Z(ie){return b(ie)===v}function J(ie){return b(ie)===f}function Y(ie){return b(ie)===g}function he(ie){return b(ie)===o}ft.ContextConsumer=x,ft.ContextProvider=T,ft.Element=M,ft.ForwardRef=I,ft.Fragment=R,ft.Lazy=W,ft.Memo=K,ft.Portal=$,ft.Profiler=se,ft.StrictMode=fe,ft.Suspense=le,ft.SuspenseList=ce,ft.isAsyncMode=ne,ft.isConcurrentMode=D,ft.isContextConsumer=F,ft.isContextProvider=B,ft.isElement=L,ft.isForwardRef=X,ft.isFragment=A,ft.isLazy=k,ft.isMemo=V,ft.isPortal=z,ft.isProfiler=Z,ft.isStrictMode=J,ft.isSuspense=Y,ft.isSuspenseList=he,ft.isValidElementType=y,ft.typeOf=b}()),ft}process.env.NODE_ENV==="production"?Yu.exports=Z_():Yu.exports=J_();var So=Yu.exports;const eb=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function tb(t){const e=`${t}`.match(eb);return e&&e[1]||""}function Vh(t,e=""){return t.displayName||t.name||tb(t)||e}function Uh(t,e,i){const f=Vh(e);return t.displayName||(f!==""?`${i}(${f})`:i)}function rb(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Vh(t,"Component");if(typeof t=="object")switch(t.$$typeof){case So.ForwardRef:return Uh(t,t.render,"ForwardRef");case So.Memo:return Uh(t,t.type,"memo");default:return}}}function tn(t){if(typeof t!="string")throw new Error(process.env.NODE_ENV!=="production"?"MUI: `capitalize(string)` expects a string argument.":Pi(7));return t.charAt(0).toUpperCase()+t.slice(1)}function nb(...t){return t.reduce((e,i)=>i==null?e:function(...v){e.apply(this,v),i.apply(this,v)},()=>{})}function ib(t,e=166){let i;function f(...v){const w=()=>{t.apply(this,v)};clearTimeout(i),i=setTimeout(w,e)}return f.clear=()=>{clearTimeout(i)},f}function ob(t,e){return process.env.NODE_ENV==="production"?()=>null:(i,f,v,w,C)=>{const E=v||"<<anonymous>>",O=C||f;return typeof i[f]<"u"?new Error(`The ${w} \`${O}\` of \`${E}\` is deprecated. ${e}`):null}}function sb(t,e){return Ee.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function Yh(t){return t&&t.ownerDocument||document}function ab(t){return Yh(t).defaultView||window}function ub(t,e){if(process.env.NODE_ENV==="production")return()=>null;const i=e?nt({},e.propTypes):null;return v=>(w,C,E,O,g,...o)=>{const h=g||C,c=i==null?void 0:i[h];if(c){const n=c(w,C,E,O,g,...o);if(n)return n}return typeof w[C]<"u"&&!w[v]?new Error(`The prop \`${h}\` of \`${t}\` can only be used together with the \`${v}\` prop.`):null}}function Wh(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Hh=typeof window<"u"?Ee.useLayoutEffect:Ee.useEffect;let zh=0;function lb(t){const[e,i]=Ee.useState(t),f=t||e;return Ee.useEffect(()=>{e==null&&(zh+=1,i(`mui-${zh}`))},[e]),f}const Xh=Ee["useId"];function cb(t){if(Xh!==void 0){const e=Xh();return t??e}return lb(t)}function fb(t,e,i,f,v){if(process.env.NODE_ENV==="production")return null;const w=v||e;return typeof t[e]<"u"?new Error(`The prop \`${w}\` is not supported. Please remove it.`):null}function hb({controlled:t,default:e,name:i,state:f="value"}){const{current:v}=Ee.useRef(t!==void 0),[w,C]=Ee.useState(e),E=v?t:w;if(process.env.NODE_ENV!=="production"){Ee.useEffect(()=>{v!==(t!==void 0)&&console.error([`MUI: A component is changing the ${v?"":"un"}controlled ${f} state of ${i} to be ${v?"un":""}controlled.`,"Elements should not switch from uncontrolled to controlled (or vice versa).",`Decide between using a controlled or uncontrolled ${i} element for the lifetime of the component.`,"The nature of the state is determined during the first render. It's considered controlled if the value is not `undefined`.","More info: https://fb.me/react-controlled-components"].join(`
`))},[f,i,t]);const{current:g}=Ee.useRef(e);Ee.useEffect(()=>{!v&&g!==e&&console.error([`MUI: A component is changing the default ${f} state of an uncontrolled ${i} after being initialized. To suppress this warning opt to use a controlled ${i}.`].join(`
`))},[JSON.stringify(e)])}const O=Ee.useCallback(g=>{v||C(g)},[]);return[E,O]}function db(t){const e=Ee.useRef(t);return Hh(()=>{e.current=t}),Ee.useCallback((...i)=>(0,e.current)(...i),[])}function gb(...t){return Ee.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(i=>{Wh(i,e)})},t)}let Is=!0,Wu=!1,Gh;const pb={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function vb(t){const{type:e,tagName:i}=t;return!!(i==="INPUT"&&pb[e]&&!t.readOnly||i==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function mb(t){t.metaKey||t.altKey||t.ctrlKey||(Is=!0)}function Hu(){Is=!1}function yb(){this.visibilityState==="hidden"&&Wu&&(Is=!0)}function _b(t){t.addEventListener("keydown",mb,!0),t.addEventListener("mousedown",Hu,!0),t.addEventListener("pointerdown",Hu,!0),t.addEventListener("touchstart",Hu,!0),t.addEventListener("visibilitychange",yb,!0)}function bb(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Is||vb(e)}function wb(){const t=Ee.useCallback(v=>{v!=null&&_b(v.ownerDocument)},[]),e=Ee.useRef(!1);function i(){return e.current?(Wu=!0,window.clearTimeout(Gh),Gh=window.setTimeout(()=>{Wu=!1},100),e.current=!1,!0):!1}function f(v){return bb(v)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:f,onBlur:i,ref:t}}function $h(t,e){const i=nt({},e);return Object.keys(t).forEach(f=>{if(f.toString().match(/^(components|slots)$/))i[f]=nt({},t[f],i[f]);else if(f.toString().match(/^(componentsProps|slotProps)$/)){const v=t[f]||{},w=e[f];i[f]={},!w||!Object.keys(w)?i[f]=v:!v||!Object.keys(v)?i[f]=w:(i[f]=nt({},w),Object.keys(v).forEach(C=>{i[f][C]=$h(v[C],w[C])}))}else i[f]===void 0&&(i[f]=t[f])}),i}function xb(t,e,i=void 0){const f={};return Object.keys(t).forEach(v=>{f[v]=t[v].reduce((w,C)=>{if(C){const E=e(C);E!==""&&w.push(E),i&&i[C]&&w.push(i[C])}return w},[]).join(" ")}),f}const qh=t=>t,Kh=(()=>{let t=qh;return{configure(e){t=e},generate(e){return t(e)},reset(){t=qh}}})(),Cb={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function zu(t,e,i="Mui"){const f=Cb[e];return f?`${i}-${f}`:`${Kh.generate(t)}-${e}`}function Sb(t,e,i="Mui"){const f={};return e.forEach(v=>{f[v]=zu(t,v,i)}),f}function Tb(t){var e=Object.create(null);return function(i){return e[i]===void 0&&(e[i]=t(i)),e[i]}}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Qh(t,e){const i=Xv(t,e);return process.env.NODE_ENV!=="production"?(...f)=>{const v=typeof t=="string"?`"${t}"`:"component";return f.length===0?console.error([`MUI: Seems like you called \`styled(${v})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join(`
`)):f.some(w=>w===void 0)&&console.error(`MUI: the styled(${v})(...args) API requires all its args to be defined.`),i(...f)}:i}const Eb=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},Pn=process.env.NODE_ENV!=="production"?Qe.oneOfType([Qe.number,Qe.string,Qe.object,Qe.array]):{};function To(t,e){return e?hn(t,e,{clone:!1}):t}const Xu={xs:0,sm:600,md:900,lg:1200,xl:1536},Zh={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Xu[t]}px)`};function dn(t,e,i){const f=t.theme||{};if(Array.isArray(e)){const w=f.breakpoints||Zh;return e.reduce((C,E,O)=>(C[w.up(w.keys[O])]=i(e[O]),C),{})}if(typeof e=="object"){const w=f.breakpoints||Zh;return Object.keys(e).reduce((C,E)=>{if(Object.keys(w.values||Xu).indexOf(E)!==-1){const O=w.up(E);C[O]=i(e[E],E)}else{const O=E;C[O]=e[O]}return C},{})}return i(e)}function Ob(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((f,v)=>{const w=t.up(v);return f[w]={},f},{}))||{}}function Ab(t,e){return t.reduce((i,f)=>{const v=i[f];return(!v||Object.keys(v).length===0)&&delete i[f],i},e)}function js(t,e,i=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&i){const f=`vars.${e}`.split(".").reduce((v,w)=>v&&v[w]?v[w]:null,t);if(f!=null)return f}return e.split(".").reduce((f,v)=>f&&f[v]!=null?f[v]:null,t)}function Ls(t,e,i,f=i){let v;return typeof t=="function"?v=t(i):Array.isArray(t)?v=t[i]||f:v=js(t,i)||f,e&&(v=e(v,f,t)),v}function ht(t){const{prop:e,cssProperty:i=t.prop,themeKey:f,transform:v}=t,w=C=>{if(C[e]==null)return null;const E=C[e],O=C.theme,g=js(O,f)||{};return dn(C,E,h=>{let c=Ls(g,v,h);return h===c&&typeof h=="string"&&(c=Ls(g,v,`${e}${h==="default"?"":tn(h)}`,h)),i===!1?c:{[i]:c}})};return w.propTypes=process.env.NODE_ENV!=="production"?{[e]:Pn}:{},w.filterProps=[e],w}function Bs(...t){const e=t.reduce((f,v)=>(v.filterProps.forEach(w=>{f[w]=v}),f),{}),i=f=>Object.keys(f).reduce((v,w)=>e[w]?To(v,e[w](f)):v,{});return i.propTypes=process.env.NODE_ENV!=="production"?t.reduce((f,v)=>Object.assign(f,v.propTypes),{}):{},i.filterProps=t.reduce((f,v)=>f.concat(v.filterProps),[]),i}function Pb(t){const e={};return i=>(e[i]===void 0&&(e[i]=t(i)),e[i])}const Db={m:"margin",p:"padding"},Mb={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Jh={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Rb=Pb(t=>{if(t.length>2)if(Jh[t])t=Jh[t];else return[t];const[e,i]=t.split(""),f=Db[e],v=Mb[i]||"";return Array.isArray(v)?v.map(w=>f+w):[f+v]}),Fs=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ns=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],kb=[...Fs,...Ns];function Eo(t,e,i,f){var v;const w=(v=js(t,e,!1))!=null?v:i;return typeof w=="number"?C=>typeof C=="string"?C:(process.env.NODE_ENV!=="production"&&typeof C!="number"&&console.error(`MUI: Expected ${f} argument to be a number or a string, got ${C}.`),w*C):Array.isArray(w)?C=>typeof C=="string"?C:(process.env.NODE_ENV!=="production"&&(Number.isInteger(C)?C>w.length-1&&console.error([`MUI: The value provided (${C}) overflows.`,`The supported values are: ${JSON.stringify(w)}.`,`${C} > ${w.length-1}, you need to add the missing values.`].join(`
`)):console.error([`MUI: The \`theme.${e}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${e}\` as a number.`].join(`
`))),w[C]):typeof w=="function"?w:(process.env.NODE_ENV!=="production"&&console.error([`MUI: The \`theme.${e}\` value (${w}) is invalid.`,"It should be a number, an array or a function."].join(`
`)),()=>{})}function ed(t){return Eo(t,"spacing",8,"spacing")}function Oo(t,e){if(typeof e=="string"||e==null)return e;const i=Math.abs(e),f=t(i);return e>=0?f:typeof f=="number"?-f:`-${f}`}function Ib(t,e){return i=>t.reduce((f,v)=>(f[v]=Oo(e,i),f),{})}function jb(t,e,i,f){if(e.indexOf(i)===-1)return null;const v=Rb(i),w=Ib(v,f),C=t[i];return dn(t,C,w)}function td(t,e){const i=ed(t.theme);return Object.keys(t).map(f=>jb(t,e,f,i)).reduce(To,{})}function At(t){return td(t,Fs)}At.propTypes=process.env.NODE_ENV!=="production"?Fs.reduce((t,e)=>(t[e]=Pn,t),{}):{},At.filterProps=Fs;function Pt(t){return td(t,Ns)}Pt.propTypes=process.env.NODE_ENV!=="production"?Ns.reduce((t,e)=>(t[e]=Pn,t),{}):{},Pt.filterProps=Ns,process.env.NODE_ENV!=="production"&&kb.reduce((t,e)=>(t[e]=Pn,t),{});function rn(t){return typeof t!="number"?t:`${t}px solid`}const Lb=ht({prop:"border",themeKey:"borders",transform:rn}),Bb=ht({prop:"borderTop",themeKey:"borders",transform:rn}),Fb=ht({prop:"borderRight",themeKey:"borders",transform:rn}),Nb=ht({prop:"borderBottom",themeKey:"borders",transform:rn}),Vb=ht({prop:"borderLeft",themeKey:"borders",transform:rn}),Ub=ht({prop:"borderColor",themeKey:"palette"}),Yb=ht({prop:"borderTopColor",themeKey:"palette"}),Wb=ht({prop:"borderRightColor",themeKey:"palette"}),Hb=ht({prop:"borderBottomColor",themeKey:"palette"}),zb=ht({prop:"borderLeftColor",themeKey:"palette"}),Vs=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Eo(t.theme,"shape.borderRadius",4,"borderRadius"),i=f=>({borderRadius:Oo(e,f)});return dn(t,t.borderRadius,i)}return null};Vs.propTypes=process.env.NODE_ENV!=="production"?{borderRadius:Pn}:{},Vs.filterProps=["borderRadius"],Bs(Lb,Bb,Fb,Nb,Vb,Ub,Yb,Wb,Hb,zb,Vs);const Us=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Eo(t.theme,"spacing",8,"gap"),i=f=>({gap:Oo(e,f)});return dn(t,t.gap,i)}return null};Us.propTypes=process.env.NODE_ENV!=="production"?{gap:Pn}:{},Us.filterProps=["gap"];const Ys=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Eo(t.theme,"spacing",8,"columnGap"),i=f=>({columnGap:Oo(e,f)});return dn(t,t.columnGap,i)}return null};Ys.propTypes=process.env.NODE_ENV!=="production"?{columnGap:Pn}:{},Ys.filterProps=["columnGap"];const Ws=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Eo(t.theme,"spacing",8,"rowGap"),i=f=>({rowGap:Oo(e,f)});return dn(t,t.rowGap,i)}return null};Ws.propTypes=process.env.NODE_ENV!=="production"?{rowGap:Pn}:{},Ws.filterProps=["rowGap"];const Xb=ht({prop:"gridColumn"}),Gb=ht({prop:"gridRow"}),$b=ht({prop:"gridAutoFlow"}),qb=ht({prop:"gridAutoColumns"}),Kb=ht({prop:"gridAutoRows"}),Qb=ht({prop:"gridTemplateColumns"}),Zb=ht({prop:"gridTemplateRows"}),Jb=ht({prop:"gridTemplateAreas"}),e1=ht({prop:"gridArea"});Bs(Us,Ys,Ws,Xb,Gb,$b,qb,Kb,Qb,Zb,Jb,e1);function Di(t,e){return e==="grey"?e:t}const t1=ht({prop:"color",themeKey:"palette",transform:Di}),r1=ht({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Di}),n1=ht({prop:"backgroundColor",themeKey:"palette",transform:Di});Bs(t1,r1,n1);function vr(t){return t<=1&&t!==0?`${t*100}%`:t}const i1=ht({prop:"width",transform:vr}),Gu=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=i=>{var f,v,w;return{maxWidth:((f=t.theme)==null||(v=f.breakpoints)==null||(w=v.values)==null?void 0:w[i])||Xu[i]||vr(i)}};return dn(t,t.maxWidth,e)}return null};Gu.filterProps=["maxWidth"];const o1=ht({prop:"minWidth",transform:vr}),s1=ht({prop:"height",transform:vr}),a1=ht({prop:"maxHeight",transform:vr}),u1=ht({prop:"minHeight",transform:vr});ht({prop:"size",cssProperty:"width",transform:vr}),ht({prop:"size",cssProperty:"height",transform:vr});const l1=ht({prop:"boxSizing"});Bs(i1,Gu,o1,s1,a1,u1,l1);const Hs={border:{themeKey:"borders",transform:rn},borderTop:{themeKey:"borders",transform:rn},borderRight:{themeKey:"borders",transform:rn},borderBottom:{themeKey:"borders",transform:rn},borderLeft:{themeKey:"borders",transform:rn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vs},color:{themeKey:"palette",transform:Di},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Di},backgroundColor:{themeKey:"palette",transform:Di},p:{style:Pt},pt:{style:Pt},pr:{style:Pt},pb:{style:Pt},pl:{style:Pt},px:{style:Pt},py:{style:Pt},padding:{style:Pt},paddingTop:{style:Pt},paddingRight:{style:Pt},paddingBottom:{style:Pt},paddingLeft:{style:Pt},paddingX:{style:Pt},paddingY:{style:Pt},paddingInline:{style:Pt},paddingInlineStart:{style:Pt},paddingInlineEnd:{style:Pt},paddingBlock:{style:Pt},paddingBlockStart:{style:Pt},paddingBlockEnd:{style:Pt},m:{style:At},mt:{style:At},mr:{style:At},mb:{style:At},ml:{style:At},mx:{style:At},my:{style:At},margin:{style:At},marginTop:{style:At},marginRight:{style:At},marginBottom:{style:At},marginLeft:{style:At},marginX:{style:At},marginY:{style:At},marginInline:{style:At},marginInlineStart:{style:At},marginInlineEnd:{style:At},marginBlock:{style:At},marginBlockStart:{style:At},marginBlockEnd:{style:At},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Us},rowGap:{style:Ws},columnGap:{style:Ys},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vr},maxWidth:{style:Gu},minWidth:{transform:vr},height:{transform:vr},maxHeight:{transform:vr},minHeight:{transform:vr},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function c1(...t){const e=t.reduce((f,v)=>f.concat(Object.keys(v)),[]),i=new Set(e);return t.every(f=>i.size===Object.keys(f).length)}function f1(t,e){return typeof t=="function"?t(e):t}function h1(){function t(i,f,v,w){const C={[i]:f,theme:v},E=w[i];if(!E)return{[i]:f};const{cssProperty:O=i,themeKey:g,transform:o,style:h}=E;if(f==null)return null;if(g==="typography"&&f==="inherit")return{[i]:f};const c=js(v,g)||{};return h?h(C):dn(C,f,a=>{let s=Ls(c,o,a);return a===s&&typeof a=="string"&&(s=Ls(c,o,`${i}${a==="default"?"":tn(a)}`,a)),O===!1?s:{[O]:s}})}function e(i){var f;const{sx:v,theme:w={}}=i||{};if(!v)return null;const C=(f=w.unstable_sxConfig)!=null?f:Hs;function E(O){let g=O;if(typeof O=="function")g=O(w);else if(typeof O!="object")return O;if(!g)return null;const o=Ob(w.breakpoints),h=Object.keys(o);let c=o;return Object.keys(g).forEach(n=>{const a=f1(g[n],w);if(a!=null)if(typeof a=="object")if(C[n])c=To(c,t(n,a,w,C));else{const s=dn({theme:w},a,u=>({[n]:u}));c1(s,a)?c[n]=e({sx:a,theme:w}):c=To(c,s)}else c=To(c,t(n,a,w,C))}),Ab(h,c)}return Array.isArray(v)?v.map(E):E(v)}return e}const rd=h1();rd.filterProps=["sx"];const zs=rd;function mr(t,e){if(t==null)return{};var i={},f=Object.keys(t),v,w;for(w=0;w<f.length;w++)v=f[w],!(e.indexOf(v)>=0)&&(i[v]=t[v]);return i}const d1=["sx"],g1=t=>{var e,i;const f={systemProps:{},otherProps:{}},v=(e=t==null||(i=t.theme)==null?void 0:i.unstable_sxConfig)!=null?e:Hs;return Object.keys(t).forEach(w=>{v[w]?f.systemProps[w]=t[w]:f.otherProps[w]=t[w]}),f};function p1(t){const{sx:e}=t,i=mr(t,d1),{systemProps:f,otherProps:v}=g1(i);let w;return Array.isArray(e)?w=[f,...e]:typeof e=="function"?w=(...C)=>{const E=e(...C);return ri(E)?nt({},f,E):f}:w=nt({},f,e),nt({},v,{sx:w})}function nd(t){var e,i,f="";if(typeof t=="string"||typeof t=="number")f+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=nd(t[e]))&&(f&&(f+=" "),f+=i);else for(e in t)t[e]&&(f&&(f+=" "),f+=e);return f}function id(){for(var t,e,i=0,f="";i<arguments.length;)(t=arguments[i++])&&(e=nd(t))&&(f&&(f+=" "),f+=e);return f}const v1=["values","unit","step"],m1=t=>{const e=Object.keys(t).map(i=>({key:i,val:t[i]}))||[];return e.sort((i,f)=>i.val-f.val),e.reduce((i,f)=>nt({},i,{[f.key]:f.val}),{})};function y1(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:f=5}=t,v=mr(t,v1),w=m1(e),C=Object.keys(w);function E(c){return`@media (min-width:${typeof e[c]=="number"?e[c]:c}${i})`}function O(c){return`@media (max-width:${(typeof e[c]=="number"?e[c]:c)-f/100}${i})`}function g(c,n){const a=C.indexOf(n);return`@media (min-width:${typeof e[c]=="number"?e[c]:c}${i}) and (max-width:${(a!==-1&&typeof e[C[a]]=="number"?e[C[a]]:n)-f/100}${i})`}function o(c){return C.indexOf(c)+1<C.length?g(c,C[C.indexOf(c)+1]):E(c)}function h(c){const n=C.indexOf(c);return n===0?E(C[1]):n===C.length-1?O(C[n]):g(c,C[C.indexOf(c)+1]).replace("@media","@media not all and")}return nt({keys:C,values:w,up:E,down:O,between:g,only:o,not:h,unit:i},v)}const _1={borderRadius:4};function b1(t=8){if(t.mui)return t;const e=ed({spacing:t}),i=(...f)=>(process.env.NODE_ENV!=="production"&&(f.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${f.length}`)),(f.length===0?[1]:f).map(w=>{const C=e(w);return typeof C=="number"?`${C}px`:C}).join(" "));return i.mui=!0,i}const w1=["breakpoints","palette","spacing","shape"];function $u(t={},...e){const{breakpoints:i={},palette:f={},spacing:v,shape:w={}}=t,C=mr(t,w1),E=y1(i),O=b1(v);let g=hn({breakpoints:E,direction:"ltr",components:{},palette:nt({mode:"light"},f),spacing:O,shape:nt({},_1,w)},C);return g=e.reduce((o,h)=>hn(o,h),g),g.unstable_sxConfig=nt({},Hs,C==null?void 0:C.unstable_sxConfig),g.unstable_sx=function(h){return zs({sx:h,theme:this})},g}const od=Ee.createContext(null);process.env.NODE_ENV!=="production"&&(od.displayName="ThemeContext");const x1=od;function C1(){const t=Ee.useContext(x1);return process.env.NODE_ENV!=="production"&&Ee.useDebugValue(t),t}function S1(t){return Object.keys(t).length===0}function T1(t=null){const e=C1();return!e||S1(e)?t:e}const E1=$u();function sd(t=E1){return T1(t)}const O1=["className","component"];function A1(t={}){const{defaultTheme:e,defaultClassName:i="MuiBox-root",generateClassName:f}=t,v=Qh("div",{shouldForwardProp:C=>C!=="theme"&&C!=="sx"&&C!=="as"})(zs);return Ee.forwardRef(function(E,O){const g=sd(e),o=p1(E),{className:h,component:c="div"}=o,n=mr(o,O1);return U.jsx(v,nt({as:c,ref:O,className:id(h,f?f(i):i),theme:g},n))})}const ad=A1();process.env.NODE_ENV!=="production"&&(ad.propTypes={children:Qe.node,component:Qe.elementType,sx:Qe.oneOfType([Qe.arrayOf(Qe.oneOfType([Qe.func,Qe.object,Qe.bool])),Qe.func,Qe.object])});const Mi=ad,P1=["variant"];function ud(t){return t.length===0}function ld(t){const{variant:e}=t,i=mr(t,P1);let f=e||"";return Object.keys(i).sort().forEach(v=>{v==="color"?f+=ud(f)?t[v]:tn(t[v]):f+=`${ud(f)?v:tn(v)}${tn(t[v].toString())}`}),f}const D1=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],M1=["theme"],R1=["theme"];function Ao(t){return Object.keys(t).length===0}function k1(t){return typeof t=="string"&&t.charCodeAt(0)>96}const I1=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,j1=(t,e)=>{let i=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(i=e.components[t].variants);const f={};return i.forEach(v=>{const w=ld(v.props);f[w]=v.style}),f},L1=(t,e,i,f)=>{var v,w;const{ownerState:C={}}=t,E=[],O=i==null||(v=i.components)==null||(w=v[f])==null?void 0:w.variants;return O&&O.forEach(g=>{let o=!0;Object.keys(g.props).forEach(h=>{C[h]!==g.props[h]&&t[h]!==g.props[h]&&(o=!1)}),o&&E.push(e[ld(g.props)])}),E};function Xs(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const B1=$u(),F1=t=>t.charAt(0).toLowerCase()+t.slice(1);function N1(t={}){const{defaultTheme:e=B1,rootShouldForwardProp:i=Xs,slotShouldForwardProp:f=Xs}=t,v=w=>{const C=Ao(w.theme)?e:w.theme;return zs(nt({},w,{theme:C}))};return v.__mui_systemSx=!0,(w,C={})=>{Eb(w,m=>m.filter(y=>!(y!=null&&y.__mui_systemSx)));const{name:E,slot:O,skipVariantsResolver:g,skipSx:o,overridesResolver:h}=C,c=mr(C,D1),n=g!==void 0?g:O&&O!=="Root"||!1,a=o||!1;let s;process.env.NODE_ENV!=="production"&&E&&(s=`${E}-${F1(O||"Root")}`);let u=Xs;O==="Root"?u=i:O?u=f:k1(w)&&(u=void 0);const p=Qh(w,nt({shouldForwardProp:u,label:s},c)),l=(m,...y)=>{const b=y?y.map(I=>typeof I=="function"&&I.__emotion_real!==I?R=>{let{theme:W}=R,K=mr(R,M1);return I(nt({theme:Ao(W)?e:W},K))}:I):[];let x=m;E&&h&&b.push(I=>{const R=Ao(I.theme)?e:I.theme,W=I1(E,R);if(W){const K={};return Object.entries(W).forEach(([$,se])=>{K[$]=typeof se=="function"?se(nt({},I,{theme:R})):se}),h(I,K)}return null}),E&&!n&&b.push(I=>{const R=Ao(I.theme)?e:I.theme;return L1(I,j1(E,R),R,E)}),a||b.push(v);const T=b.length-y.length;if(Array.isArray(m)&&T>0){const I=new Array(T).fill("");x=[...m,...I],x.raw=[...m.raw,...I]}else typeof m=="function"&&m.__emotion_real!==m&&(x=I=>{let{theme:R}=I,W=mr(I,R1);return m(nt({theme:Ao(R)?e:R},W))});const M=p(x,...b);if(process.env.NODE_ENV!=="production"){let I;E&&(I=`${E}${O||""}`),I===void 0&&(I=`Styled(${rb(w)})`),M.displayName=I}return M};return p.withConfig&&(l.withConfig=p.withConfig),l}}function V1(t){const{theme:e,name:i,props:f}=t;return!e||!e.components||!e.components[i]||!e.components[i].defaultProps?f:$h(e.components[i].defaultProps,f)}function U1({props:t,name:e,defaultTheme:i}){const f=sd(i);return V1({theme:f,name:e,props:t})}function cd(t,e=0,i=1){return process.env.NODE_ENV!=="production"&&(t<e||t>i)&&console.error(`MUI: The value provided ${t} is out of range [${e}, ${i}].`),Math.min(Math.max(e,t),i)}function Y1(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let i=t.match(e);return i&&i[0].length===1&&(i=i.map(f=>f+f)),i?`rgb${i.length===4?"a":""}(${i.map((f,v)=>v<3?parseInt(f,16):Math.round(parseInt(f,16)/255*1e3)/1e3).join(", ")})`:""}function Ri(t){if(t.type)return t;if(t.charAt(0)==="#")return Ri(Y1(t));const e=t.indexOf("("),i=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: Unsupported \`${t}\` color.
The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`:Pi(9,t));let f=t.substring(e+1,t.length-1),v;if(i==="color"){if(f=f.split(" "),v=f.shift(),f.length===4&&f[3].charAt(0)==="/"&&(f[3]=f[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(v)===-1)throw new Error(process.env.NODE_ENV!=="production"?`MUI: unsupported \`${v}\` color space.
The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`:Pi(10,v))}else f=f.split(",");return f=f.map(w=>parseFloat(w)),{type:i,values:f,colorSpace:v}}function qu(t){const{type:e,colorSpace:i}=t;let{values:f}=t;return e.indexOf("rgb")!==-1?f=f.map((v,w)=>w<3?parseInt(v,10):v):e.indexOf("hsl")!==-1&&(f[1]=`${f[1]}%`,f[2]=`${f[2]}%`),e.indexOf("color")!==-1?f=`${i} ${f.join(" ")}`:f=`${f.join(", ")}`,`${e}(${f})`}function W1(t){t=Ri(t);const{values:e}=t,i=e[0],f=e[1]/100,v=e[2]/100,w=f*Math.min(v,1-v),C=(g,o=(g+i/30)%12)=>v-w*Math.max(Math.min(o-3,9-o,1),-1);let E="rgb";const O=[Math.round(C(0)*255),Math.round(C(8)*255),Math.round(C(4)*255)];return t.type==="hsla"&&(E+="a",O.push(e[3])),qu({type:E,values:O})}function fd(t){t=Ri(t);let e=t.type==="hsl"||t.type==="hsla"?Ri(W1(t)).values:t.values;return e=e.map(i=>(t.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hd(t,e){const i=fd(t),f=fd(e);return(Math.max(i,f)+.05)/(Math.min(i,f)+.05)}function H1(t,e){if(t=Ri(t),e=cd(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)t.values[i]*=1-e;return qu(t)}function z1(t,e){if(t=Ri(t),e=cd(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let i=0;i<3;i+=1)t.values[i]+=(255-t.values[i])*e;else if(t.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)t.values[i]+=(1-t.values[i])*e;return qu(t)}const X1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABgpJREFUWEeVl7uPG1UYxc+1x563X7uERwUtDVIoIlIgIhQBUoRWSFAihSIgKFKCqOiSAkSEBCI0adOQCCUNKChQkCD+BUoQCo+APU/P+HHRuQ971uvNwkqf7npm7fP7zvnu3bHA//iRv+CEnLffE3XrFOpWD7UQqAHUUqKSCerl96jnF8UruPtfP1Yc9YdSwpVp+6qYdfZQd4CZA9QOMGsBtYACqCRQL4FqAUznQFUD1fwmlvNXxVlMH6TxQIDZwrnkLDrnMXOhqwMN0QZqlgGoJVARgOJzYFqbqoCi+kycX7xzGMRWgJ8l3C4694bwB/HSN+IE6BoAutDSLlQqAt29qtlavJwC+RTIyhR/1g+Lj1FughwAuDnGsN93748QiBECjOCju/CA2tMAygVGQAcYAyNY6giU/QSodFE8L4GsYElMp8fER/irCbEP4BMJdwduOUIodhBipMrHQPoQc0KYGBSEjYAxmPyb9hf7xIEsB9Jcoj0Nm07sA7goO/8MEQ12EGGECBpCuxDYKOqmC40hbNpP6wmQ2e4pntlKxZW6Z11YAby1cC6NWsH5HcTQRQjrgoZw6AKHUUE0IlD22/w5eJviFiAFUlb2hfhy8SYhFMBLEu4Q/nQHPeyuAGLjAkEIEKAvOZBmFuxWVENodgCnv2T2q9wbnadAYisBFkUobqBQACeX7esjEe/tKoAeCNJ0Yu1GAI8DqbYkdwJdMENoh88OXpoDmbF9JUyABJhM6MTX4rv5iwrgSenJXfSV+HptQtCNUM3EEAFaCoBb0gIY+5m9yl0NnLa72bUSNwCE+KFsCV/ixBDxjw+hD5YGsDDaDe2KHkxGsT4bGgC031rPgUvYPcUIMdHCdh3z9RgoiudEe9m/3hPe3lB9eLyC2ITRsXBn6OHUZwNjYARzM3hFo3PTrRVlx1bY/p6k34iOfHw8QNjvI8QAIfqI1Eog3b11pjkfEQYygFAxQJ987F51zk43rLbCB9dMuPLp5QChaIrz983XBGrGQyfU2UAAbjtabges2e1KdKwdGI+1/VzHYyk8eVpawYHp3rqgr2tHNoEYFx1yCMBBU6L8cLNqAVMm833X9D3hydcMwFqIojqSbdf0dd7vSR9+AbTT8nBx1e02KO2EcOW55QCRimCzy6YTFLTVQ4h44cLPgW4BBCXgZku0Joxhw4kmwNp6O5BSdOW74z7Cvha3EOsu18IBKMyKagdBAXQzwMmAaAblhJcB3WQOsZoFE4mF2Leqe7lw5IWveghebopvdquFA8QyQDRtIaRYATipLgIEFZQjhPDV9UrPg9qGFsTOglmTyS0B+fkzPXh39osGOmNTsTp8PESl0OI54OZavJUA0RwIKx2FdYIQbirRTgoNsQ0kT59XR7Enr8lmvn0KNsXnXSXMovUUp/3tBBATICYAXZgaCDrBSrUbbrqEUEcyO191DxRnWgrAkd/eiBGcsVarIVMVIKraiBritvtOprsXY+0AYwhrA1BqAD9bR0KYbjIzBxX/GU1uidnx0/p5QN72AhwrKajFTd6lUOLsmqXsNd1z+FoT7QCFFQQBmlHwPRsQBHESPi1NIoFH8tUDSVv++mkE/23V9cJDzK7Lte0cMALQejX9KSCMA0G9jkHNgomCg6re1xhOAng5roQz8cbqgcQ+HnVlnUR1J45K7LOdwvwQZs/qpDx8dAQYA/4UiBeNGKwLZigVhHUiQ/FEJcIDj2Q6Cul7fyMPCwg7dFac3djhY/cKYKIB3BLoLQ664BOAZVzwc0i/RPwURL4dgFd/k7veGH8EBYTN3XbftfkTgPYbB3gaWoDVMDKGqQHQ8yP7JR47BXHv0Mfy1Y070u/W+N3PEdvBW3Vv8rdbkA50cgPQiEHNwjqKIqhw7PVG54c70MBrX5WX3RznbPb26LUHEHcAAfi6t9QRqDOhNluyUuuVD8zAbft6duSXU1yWgXMf1zopXuDeZ7F7dQYYAM6DisDMgYphhluPzrD34Zauj45g6zdJKZyzeLaV4H2R4KRIEIoJBA8iMYHsLVH0l7jbk7jw0xy3ASGP+ubN+/8CCrP4h3UWm6AAAAAASUVORK5CYII=";function Gs({children:t,...e}){return U.jsx(me.Popover,{sx:{"& .MuiPaper-root":{overflowX:"unset",overflowY:"unset",backgroundColor:"grey.background","::before":{content:'""',position:"absolute",marginRight:"-0.71em",bottom:0,left:"50%",width:16,height:16,backgroundColor:"grey.background",boxShadow:1,transform:"translate(-50%, 50%) rotate(135deg)",clipPath:`polygon(
              -8px -8px,
              calc(100% + 8px) -8px,
              calc(100% + 8px) calc(100% + 8px)
            )`}}},anchorOrigin:{vertical:-16,horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},...e,children:t})}const Po={black:"#000",white:"#fff"},ni={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},G1={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},ii={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},$1={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},q1={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},ki={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},oi={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},si={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},K1={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},Q1={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},Z1={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},Ii={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},qt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},J1=[fn.BLACK,fn.RED,fn.YELLOW,fn.GREEN,fn.BLUE];function dd({type:t,color:e,selected:i,onClick:f}){return U.jsx(me.IconButton,{sx:{p:0},onClick:f,children:U.jsxs("svg",{width:"24",height:"24",children:[U.jsxs("mask",{id:"mask",children:[U.jsx("circle",{cx:"50%",cy:"50%",r:"50%",stroke:"white",strokeWidth:"4",fill:"none"}),U.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:"white"})]}),t==="preset"?U.jsx("circle",{cx:"50%",cy:"50%",r:"50%",fill:e,mask:i?"url(#mask)":""}):U.jsx("image",{x:"0",y:"0",width:"100%",height:"100%",href:X1,mask:i?"url(#mask)":""}),e&&U.jsx("circle",{cx:"50%",cy:"50%",r:"8",fill:e})]})})}const gd=[100,200,300,400,500,600,700,800,900],ew=["#ffffff",...gd.map(t=>qt[t]),"#000000"],tw=[oi,q1,$1,ii,G1,ni,Ii,Z1,Q1,K1,si],rw=ew.concat(...gd.map(t=>tw.map(e=>e[t])));function nw({color:t,onClick:e}){return U.jsx(Mi,{sx:{width:24,height:24,borderRadius:0,p:0,backgroundColor:t},onClick:e})}function iw({onChange:t}){return U.jsx(Mi,{sx:{p:2,display:"grid",gridTemplateColumns:"repeat(11, 1fr)"},children:rw.map(e=>U.jsx(nw,{color:e,onClick:()=>t(e)},e))})}function Ku({value:t,onChange:e}){const[i,f]=we.useState(null),{toolbarPosition:v}=It(),w=g=>{t&&e({type:"preset",code:g})},C=g=>{t&&f(g.currentTarget)},E=we.useCallback(()=>{f(null)},[]),O=g=>{e({type:"custom",code:g}),E()};return U.jsxs(Mi,{sx:{display:"grid",...v==="bottom"&&{gridTemplateRows:"repeat(2, minmax(0, 1fr))",gridTemplateColumns:"repeat(3, minmax(0, min-content))"},...v==="right"&&{gridTemplateRows:"repeat(3, minmax(0, 1fr))",gridTemplateColumns:"repeat(2, minmax(0, min-content))"},gridRowGap:"6px",gridColumnGap:"8px"},children:[J1.map((g,o)=>U.jsx(dd,{selected:(t==null?void 0:t.type)==="preset"&&(t==null?void 0:t.code)===g,type:"preset",color:g,onClick:()=>w(g)},o)),U.jsx(dd,{selected:(t==null?void 0:t.type)==="custom",type:"custom",color:(t==null?void 0:t.type)==="custom"?t==null?void 0:t.code:null,onClick:C}),U.jsx(Gs,{open:!!i,anchorEl:i,onClose:E,anchorOrigin:{vertical:-16,horizontal:"center"},children:U.jsx(iw,{onChange:O})})]})}function $s({leadingItems:t=null,palette:e=null,trailingItems:i}){const{toolbarPosition:f}=It();return U.jsxs(U.Fragment,{children:[t&&U.jsx(Mi,{sx:{display:"flex",alignItems:"center",gap:"10px",flexDirection:f==="right"?"column":"row"},children:t}),e&&U.jsx(Mi,{sx:{display:"flex",alignItems:"center",flexDirection:f==="right"?"column":"row"},children:e}),i&&U.jsx(Mi,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"10px",flexDirection:f==="right"?"column":"row"},children:i})]})}const pd=me.styled(me.Box)(()=>`
  &.toolbar-btn-wrapper {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
  }
`),vd=me.styled(me.IconButton)(({selected:t,disabled:e})=>`
  ${t?"background: black;":""}
  svg {
    width: 20px;
    height: 20px;
  }
  ${t?`
      svg, path {
        fill: white;
      }  
    `:""}
  ${e?`
      svg, path {
        fill: ${qt[400]};
      }
    `:""}
`),ow=me.styled(me.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 11px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
  white-space: nowrap;
`),tr=({Icon:t,selected:e=!1,small:i=!1,tooltip:f,disableToolbar:v=!1,sx:w,disabled:C,className:E,...O})=>{const{toolbarPosition:g}=It();return v?U.jsxs(pd,{className:`toolbar-btn-wrapper ${E||""}`,children:[U.jsx(vd,{color:"inherit",disabled:C,sx:{":disabled":{backgroundColor:qt[200],color:qt[400]},":hover":{backgroundColor:e?"black":qt[200]},p:i?1:1.25,borderRadius:"50%",color:e?"white":"black",...w},selected:e,...O,children:U.jsx(t,{sx:{fontSize:i?16:20}})}),U.jsx(ow,{variant:"body1",children:f})]}):U.jsx(me.Tooltip,{title:f,arrow:!0,placement:g==="right"?"left":"top",children:U.jsx(pd,{style:{cursor:"pointer"},className:`toolbar-btn-wrapper ${E||""}`,children:U.jsx(vd,{disabled:C,color:"inherit",selected:e,className:"",sx:{":disabled":{backgroundColor:qt[200],color:qt[400]},":hover":{backgroundColor:e?"black":qt[200]},p:i?1:1.2,borderRadius:"50%",backgroundColor:e?"black":qt[200],color:e?"white":"black",...w},...O,children:U.jsx(t,{sx:{fontSize:i?16:20}})})})})},Qu=({thickness:t,selected:e})=>U.jsx(me.Box,{sx:{width:32,height:32,backgroundColor:e?"black":"transparent",borderRadius:2,display:"flex",justifyContent:"center",alignItems:"center"},children:U.jsx(me.Box,{sx:{width:t*4,height:t*4,borderRadius:"50%",backgroundColor:e?"white":"black"}})}),sw=[1,2,3,4,5],aw=({value:t,onChange:e})=>{const i=f=>{e({thickness:f})};return U.jsx(me.Box,{children:U.jsx(me.Box,{sx:{display:"flex",gap:1},children:sw.map(f=>U.jsx(me.IconButton,{onClick:()=>i(f),children:U.jsx(Qu,{thickness:f,selected:t.thickness===f})},f))})})},uw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M13.5333 2.96669L17.6583 7.08335C18.3083 7.74169 18.3083 8.79169 17.6583 9.45002L9.99996 17.1084C8.69996 18.4084 6.59163 18.4084 5.28329 17.1084L2.34163 14.1667C1.69163 13.5084 1.69163 12.4584 2.34163 11.8L11.175 2.96669C11.8333 2.31669 12.8833 2.31669 13.5333 2.96669ZM3.51663 12.9834L6.46663 15.925C7.11663 16.5834 8.16663 16.5834 8.82496 15.925L11.7666 12.9834L7.64163 8.85835L3.51663 12.9834Z",fill:"black"})),lw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M7.08333 11.25L9.16667 13.75L12.0833 10L15.8333 15H4.16667M17.5 15.8333V4.16667C17.5 3.24167 16.75 2.5 15.8333 2.5H4.16667C3.72464 2.5 3.30072 2.67559 2.98816 2.98816C2.67559 3.30072 2.5 3.72464 2.5 4.16667V15.8333C2.5 16.2754 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2754 17.5 15.8333Z",fill:"black"})),cw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M15.5167 1.25C15.0917 1.25 14.6667 1.40833 14.3417 1.74167L8.95835 7.125L12.4584 10.6167L17.8417 5.24167C18.5 4.58333 18.5 3.53333 17.8417 2.88333L16.7 1.74167C16.375 1.40833 15.95 1.25 15.5167 1.25ZM8.16668 7.91667L2.69168 13.3917L3.27502 13.975C2.83335 14.3667 2.40835 14.8167 1.98335 15.2417C1.33335 15.9 1.33335 16.95 1.98335 17.6C2.63335 18.25 3.68335 18.25 4.34168 17.6C4.76668 17.1917 5.20835 16.7333 5.60835 16.3167L6.19168 16.8917L11.6667 11.4167",fill:"black"})),fw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("g",{clipPath:"url(#clip0_2_107)"},Ee.createElement("path",{d:"M8.33337 7.49998H11.6667V4.99998H14.1667L10 0.833313L5.83337 4.99998H8.33337V7.49998ZM7.50004 8.33331H5.00004V5.83331L0.833374 9.99998L5.00004 14.1666V11.6666H7.50004V8.33331ZM19.1667 9.99998L15 5.83331V8.33331H12.5V11.6666H15V14.1666L19.1667 9.99998ZM11.6667 12.5H8.33337V15H5.83337L10 19.1666L14.1667 15H11.6667V12.5Z",fill:"black"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0_2_107"},Ee.createElement("rect",{width:20,height:20,fill:"white"})))),hw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M8.75004 15H15V16.6666H8.75004C5.75837 16.6666 3.33337 14.2416 3.33337 11.25C3.33337 8.25831 5.75837 5.83331 8.75004 5.83331H13.475L10.9 3.25831L12.0834 2.08331L16.6667 6.66665L12.0834 11.25L10.9084 10.075L13.475 7.49998H8.75004C6.66671 7.49998 5.00004 9.16665 5.00004 11.25C5.00004 13.3333 6.66671 15 8.75004 15Z",fill:"black"})),dw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M16.6667 11.25C16.6667 14.2416 14.2417 16.6666 11.25 16.6666H5.00004V15H11.25C13.3334 15 15 13.3333 15 11.25C15 9.16665 13.3334 7.49998 11.25 7.49998H6.52504L9.09171 10.075L7.91671 11.25L3.33337 6.66665L7.91671 2.08331L9.10004 3.25831L6.52504 5.83331H11.25C14.2417 5.83331 16.6667 8.25831 16.6667 11.25Z",fill:"black"})),gw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M7.79891 0C8.72176 0 9.51086 0.806641 9.51086 1.75V5.65043C10.1768 5.01215 11.4548 4.93379 12.2821 5.89648C13.1739 5.33836 14.3531 5.81262 14.7163 6.53906C16.6359 6.18852 17.5 7.39633 17.5 9.375C17.5 9.48227 17.4921 9.89359 17.4924 10C17.4989 12.4207 16.2789 13.0037 15.9957 14.8332C15.9251 15.2892 15.5312 15.625 15.0698 15.625H8.36957L8.36953 15.6249C7.65211 15.6245 6.96762 15.2106 6.65684 14.513C6.14926 13.3847 4.74129 10.786 3.63641 10.3125C2.92566 10.0079 2.50031 9.47719 2.5 8.75C2.49945 7.4132 3.87102 6.49406 5.11359 7.0266C5.44012 7.16656 5.76477 7.35129 6.08695 7.57945V1.75C6.08695 0.833984 6.88941 0 7.79891 0ZM7.8125 16.25H15.3125C15.8303 16.25 16.25 16.6697 16.25 17.1875V19.0625C16.25 19.5803 15.8303 20 15.3125 20H7.8125C7.29473 20 6.875 19.5803 6.875 19.0625V17.1875C6.875 16.6697 7.29473 16.25 7.8125 16.25ZM14.375 17.3438C13.9435 17.3438 13.5938 17.6935 13.5938 18.125C13.5938 18.5565 13.9435 18.9062 14.375 18.9062C14.8065 18.9062 15.1562 18.5565 15.1562 18.125C15.1562 17.6935 14.8065 17.3438 14.375 17.3438Z",fill:"black"})),pw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M15.8333 2.5H4.16667C3.25 2.5 2.5 3.25 2.5 4.16667V15.8333C2.5 16.75 3.25 17.5 4.16667 17.5H15.8333C16.75 17.5 17.5 16.75 17.5 15.8333V4.16667C17.5 3.25 16.75 2.5 15.8333 2.5ZM15 11.6667L12.9167 10.4167L10.8333 11.6667V5H15V11.6667Z",fill:"black"})),vw=t=>Ee.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M12.3333 1H4.55556C3.7 1 3.00778 1.7 3.00778 2.55556L3 15L8.44444 12.6667L13.8889 15V2.55556C13.8889 1.7 13.1889 1 12.3333 1Z",fill:"black"})),mw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M15.4167 3.33331L16.3834 6.95831L15.5834 7.17498C15.2084 6.44998 14.825 5.72498 14.3834 5.35831C13.9417 4.99998 13.425 4.99998 12.9167 4.99998H10.8334V13.75C10.8334 14.1666 10.8334 14.5833 11.1084 14.7916C11.3917 15 11.9417 15 12.5 15V15.8333H7.50003V15C8.05837 15 8.60837 15 8.8917 14.7916C9.1667 14.5833 9.1667 14.1666 9.1667 13.75V4.99998H7.08337C6.57503 4.99998 6.05837 4.99998 5.6167 5.35831C5.17503 5.72498 4.7917 6.44998 4.4167 7.17498L3.6167 6.95831L4.58337 3.33331H15.4167Z",fill:"black"})),yw=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M7.5 8.33331H5.83333V9.99998H7.5V8.33331ZM10.8333 8.33331H9.16667V9.99998H10.8333V8.33331ZM14.1667 8.33331H12.5V9.99998H14.1667V8.33331ZM15.8333 2.49998H15V0.833313H13.3333V2.49998H6.66667V0.833313H5V2.49998H4.16667C3.24167 2.49998 2.5 3.24998 2.5 4.16665V15.8333C2.5 16.2753 2.67559 16.6993 2.98816 17.0118C3.30072 17.3244 3.72464 17.5 4.16667 17.5H15.8333C16.2754 17.5 16.6993 17.3244 17.0118 17.0118C17.3244 16.6993 17.5 16.2753 17.5 15.8333V4.16665C17.5 3.72462 17.3244 3.3007 17.0118 2.98813C16.6993 2.67557 16.2754 2.49998 15.8333 2.49998ZM15.8333 15.8333H4.16667V6.66665H15.8333V15.8333Z",fill:"black"})),_w=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M14.0334 2.27502C13.7084 2.27502 13.3917 2.40002 13.1417 2.64169L11.375 4.40836L15.7917 8.83336L17.5584 7.08336C18.0584 6.57502 18.0584 5.78336 17.5584 5.30002L14.9167 2.64169C14.6667 2.40002 14.35 2.27502 14.0334 2.27502ZM10.7834 5.00002L4.03337 11.7584L6.16671 11.9917L6.31671 13.9L8.21671 14.0417L8.45837 16.175L15.2084 9.41669M3.54171 12.5334L2.08337 18.1084L7.66671 16.6167L7.46671 14.8167L5.54171 14.675L5.39171 12.7417",fill:"black"})),bw=t=>Ee.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M6.58053 6.25992L9.9197 8.92093C10.1501 9.10457 10.5 8.94787 10.5 8.66102L10.5 3.33898C10.5 3.05213 10.1501 2.89543 9.9197 3.07907L6.58053 5.74008C6.4108 5.87535 6.4108 6.12465 6.58053 6.25992Z",fill:"black"}),Ee.createElement("path",{d:"M1.6273 6.25992L4.96647 8.92093C5.19691 9.10457 5.54677 8.94787 5.54677 8.66102L5.54677 3.33898C5.54677 3.05213 5.19691 2.89543 4.96647 3.07907L1.6273 5.74008C1.45757 5.87535 1.45757 6.12465 1.6273 6.25992Z",fill:"black"})),ww=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("g",{clipPath:"url(#clip0_2_160)"},Ee.createElement("path",{d:"M5.00004 8.33331C4.08337 8.33331 3.33337 9.08331 3.33337 9.99998C3.33337 10.9166 4.08337 11.6666 5.00004 11.6666C5.91671 11.6666 6.66671 10.9166 6.66671 9.99998C6.66671 9.08331 5.91671 8.33331 5.00004 8.33331ZM15 8.33331C14.0834 8.33331 13.3334 9.08331 13.3334 9.99998C13.3334 10.9166 14.0834 11.6666 15 11.6666C15.9167 11.6666 16.6667 10.9166 16.6667 9.99998C16.6667 9.08331 15.9167 8.33331 15 8.33331ZM10 8.33331C9.08337 8.33331 8.33337 9.08331 8.33337 9.99998C8.33337 10.9166 9.08337 11.6666 10 11.6666C10.9167 11.6666 11.6667 10.9166 11.6667 9.99998C11.6667 9.08331 10.9167 8.33331 10 8.33331Z",fill:"black"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0_2_160"},Ee.createElement("rect",{width:20,height:20,fill:"white"})))),xw=t=>Ee.createElement("svg",{width:13,height:11,viewBox:"0 0 13 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M6.06221 10.5L3.52502e-05 -1.05994e-06L12.1244 0L6.06221 10.5Z",fill:"white"})),Cw=t=>Ee.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("g",{clipPath:"url(#clip0_1_378)"},Ee.createElement("path",{d:"M2.66665 4.00004H1.33331V13.3334C1.33331 14.0667 1.93331 14.6667 2.66665 14.6667H12V13.3334H2.66665V4.00004ZM13.3333 1.33337H5.33331C4.59998 1.33337 3.99998 1.93337 3.99998 2.66671V10.6667C3.99998 11.4 4.59998 12 5.33331 12H13.3333C14.0666 12 14.6666 11.4 14.6666 10.6667V2.66671C14.6666 1.93337 14.0666 1.33337 13.3333 1.33337ZM12.6666 7.33337H9.99998V10H8.66665V7.33337H5.99998V6.00004H8.66665V3.33337H9.99998V6.00004H12.6666V7.33337Z",fill:"black"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0_1_378"},Ee.createElement("rect",{width:16,height:16,fill:"white"})))),Sw=t=>Ee.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("g",{clipPath:"url(#clip0_30_760)"},Ee.createElement("path",{d:"M2.66671 3.99998H1.33337V13.3333C1.33337 14.0666 1.93337 14.6666 2.66671 14.6666H12V13.3333H2.66671V3.99998ZM13.3334 1.33331H5.33337C4.60004 1.33331 4.00004 1.93331 4.00004 2.66665V10.6666C4.00004 11.4 4.60004 12 5.33337 12H13.3334C14.0667 12 14.6667 11.4 14.6667 10.6666V2.66665C14.6667 1.93331 14.0667 1.33331 13.3334 1.33331ZM12.6667 7.33331H6.00004V5.99998H12.6667V7.33331ZM10 9.99998H6.00004V8.66665H10V9.99998ZM12.6667 4.66665H6.00004V3.33331H12.6667V4.66665Z",fill:"black"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0_30_760"},Ee.createElement("rect",{width:16,height:16,fill:"white"})))),Tw=t=>Ee.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M5.66667 9L7.33333 11L9.66667 8L12.6667 12H3.33333M14 12.6667V3.33333C14 2.59333 13.4 2 12.6667 2H3.33333C2.97971 2 2.64057 2.14048 2.39052 2.39052C2.14048 2.64057 2 2.97971 2 3.33333V12.6667C2 13.0203 2.14048 13.3594 2.39052 13.6095C2.64057 13.8595 2.97971 14 3.33333 14H12.6667C13.0203 14 13.3594 13.8595 13.6095 13.6095C13.8595 13.3594 14 13.0203 14 12.6667Z",fill:"white"})),Ew=t=>Ee.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("rect",{width:20,height:20,rx:2,fill:"black",fillOpacity:.5}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55556 4C9.06464 4 8.66667 4.39797 8.66667 4.88889H6.44444C6.19898 4.88889 6 5.08787 6 5.33333C6 5.57879 6.19898 5.77778 6.44444 5.77778H13.5556C13.801 5.77778 14 5.57879 14 5.33333C14 5.08787 13.801 4.88889 13.5556 4.88889H11.3333C11.3333 4.39797 10.9354 4 10.4444 4H9.55556ZM14 6.66667H6V13.7778C6 14.2687 6.59695 14.6667 7.33333 14.6667H12.6667C13.403 14.6667 14 14.2687 14 13.7778V6.66667ZM7.77778 8.88889C7.77778 8.64343 7.97676 8.44444 8.22222 8.44444C8.46768 8.44444 8.66667 8.64343 8.66667 8.88889V12.4444C8.66667 12.6899 8.46768 12.8889 8.22222 12.8889C7.97676 12.8889 7.77778 12.6899 7.77778 12.4444V8.88889ZM9.55556 8.88889C9.55556 8.64343 9.75454 8.44444 10 8.44444C10.2455 8.44444 10.4444 8.64343 10.4444 8.88889V12.4444C10.4444 12.6899 10.2455 12.8889 10 12.8889C9.75454 12.8889 9.55556 12.6899 9.55556 12.4444V8.88889ZM11.7778 8.44444C11.5323 8.44444 11.3333 8.64343 11.3333 8.88889V12.4444C11.3333 12.6899 11.5323 12.8889 11.7778 12.8889C12.0232 12.8889 12.2222 12.6899 12.2222 12.4444V8.88889C12.2222 8.64343 12.0232 8.44444 11.7778 8.44444Z",fill:"white"})),Ow=t=>Ee.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("path",{d:"M1.76 12.2455C3.78 14.2653 6.87333 14.5386 9.19333 13.0788L8.22 12.1055C6.44667 13.0588 4.19333 12.7921 2.7 11.2989C0.88 9.4791 0.88 6.51938 2.7 4.69955C3.61333 3.79297 4.80667 3.35301 6 3.35301V5.33283L8.66667 2.66641L6 0V2.00648C4.46667 2.00648 2.92667 2.58642 1.76 3.75964C-0.586667 6.09942 -0.586667 9.89906 1.76 12.2455ZM6 7.99924L10 11.9989L14 7.99924L10 3.99962L6 7.99924Z",fill:"#2D2D2D"})),Aw=t=>Ee.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},Ee.createElement("g",{clipPath:"url(#clip0_12_305)"},Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.05263 11.9474L7.57895 9.47158C7.25053 9.43789 7.00632 9.42105 6.73684 9.42105C4.48842 9.42105 0 10.5495 0 12.7895V14.4737H7.57895L5.05263 11.9474ZM6.73684 7.73684C8.59789 7.73684 10.1053 6.22947 10.1053 4.36842C10.1053 2.50737 8.59789 1 6.73684 1C4.87579 1 3.36842 2.50737 3.36842 4.36842C3.36842 6.22947 4.87579 7.73684 6.73684 7.73684Z",fill:"white"}),Ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.501 14.8947L7.57886 11.9474L8.7578 10.76L10.501 12.5116L14.821 8.1579L15.9999 9.34527L10.501 14.8947Z",fill:"white"})),Ee.createElement("defs",null,Ee.createElement("clipPath",{id:"clip0_12_305"},Ee.createElement("rect",{width:16,height:16,fill:"white"})))),Dt=({variant:t,...e})=>{switch(t){case"eraser":return U.jsx(uw,{...e});case"image":return U.jsx(lw,{...e});case"pen":return U.jsx(cw,{...e});case"move":return U.jsx(fw,{...e});case"redo":return U.jsx(hw,{...e});case"undo":return U.jsx(dw,{...e});case"hand":return U.jsx(gw,{...e});case"bookmark":return U.jsx(pw,{...e});case"bookmark_2":return U.jsx(vw,{...e});case"text":return U.jsx(mw,{...e});case"calendar":return U.jsx(yw,{...e});case"pencil":return U.jsx(_w,{...e});case"fold":return U.jsx(bw,{...e});case"more":return U.jsx(ww,{...e});case"arrow":return U.jsx(xw,{...e});case"bookmark_text":return U.jsx(Sw,{...e});case"bookmark_image":return U.jsx(Tw,{...e});case"library_add":return U.jsx(Cw,{...e});case"delete":return U.jsx(Ew,{...e});case"clockwise90":return U.jsx(Ow,{...e});case"customer_template":return U.jsx(Aw,{...e});default:return null}};function md(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"pencil"}),...t})}function Pw(){const[t,e]=we.useState(null),{core:i}=It(),{tool:f,setTool:v}=Hr(),[w,C]=we.useState(i.getToolConfig(Be.FREEDRAW)),E=f===Be.FREEDRAW,O=h=>{E?e(h.currentTarget):v(Be.FREEDRAW)},g=()=>{e(null)},o=h=>{const c=i.updateToolConfig(Be.FREEDRAW,h);C(c),g()};return U.jsxs(U.Fragment,{children:[U.jsx(tr,{selected:E,Icon:md,onClick:O,tooltip:"",disableToolbar:!0}),U.jsx(Gs,{open:!!t,anchorEl:t,onClose:g,children:U.jsx(aw,{value:w,onChange:o})})]})}function yd(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"move"}),...t})}function _d(){const{tool:t,setTool:e}=Hr(),i=t===Be.PAN,f=v=>{e(Be.PAN)};return U.jsx(tr,{disableToolbar:!0,selected:i,Icon:yd,onClick:f,tooltip:""})}function bd(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"hand"}),...t})}function wd(){const{tool:t,setTool:e}=Hr(),i=t===Be.SELECT,f=v=>{e(Be.SELECT)};return U.jsx(tr,{selected:i,disableToolbar:!0,Icon:bd,onClick:f,tooltip:""})}const Dw=[1,2,3,4,5],Mw=({value:t,onChange:e})=>{const i=f=>{e({thickness:f})};return U.jsx(me.Box,{children:U.jsx(me.Box,{sx:{display:"flex",gap:1},children:Dw.map(f=>U.jsx(me.IconButton,{onClick:()=>i(f),children:U.jsx(Qu,{thickness:f,selected:t.thickness===f})},f))})})};function xd(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"pen"}),...t})}function Rw(){const[t,e]=we.useState(null),{core:i}=It(),{tool:f,setTool:v}=Hr(),[w,C]=we.useState(i.getToolConfig(Be.MARKER)),E=f===Be.MARKER,O=h=>{E?e(h.currentTarget):v(Be.MARKER)},g=()=>{e(null)},o=h=>{const c=i.updateToolConfig(Be.MARKER,h);C(c),g()};return U.jsxs(U.Fragment,{children:[U.jsx(tr,{selected:E,Icon:xd,onClick:O,tooltip:"",disableToolbar:!0}),U.jsx(Gs,{open:!!t,anchorEl:t,onClose:g,children:U.jsx(Mw,{value:w,onChange:o})})]})}function Zu(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"image"}),...t})}const kw=me.styled(me.Typography)(()=>`
  font-family: Apple SD Gothic Neo;
  font-size: 10px;
  font-weight: 400;
  line-height: 12px;
  letter-spacing: 0em;
  text-align: center;
`),Cd=me.styled("label")`
  cursor: pointer;
`,Sd=me.styled("input")`
  display: none;
`,Iw=({disableToolbar:t=!0,tooltip:e="",...i})=>{const{core:f,toolbarPosition:v}=It(),w=E=>{E.target.value=null},C=async E=>{await Promise.all([...E.target.files].map(O=>new Promise((g,o)=>{const h=new FileReader;h.onload=function(c){f.addImage(c.target.result),g()},h.readAsDataURL(O)}))),f.selectTool(Be.SELECT)};return t?U.jsxs("span",{style:{display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[U.jsxs(Cd,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:qt[200]},p:1.2,borderRadius:"50%",color:"black"},children:[U.jsx(Zu,{sx:{fontSize:20,color:"inherit"}}),U.jsx(Sd,{id:"file-upload",type:"file",...i,accept:"image/*",onClick:w,onChange:C})]}),U.jsx(kw,{variant:"body1",children:e})]}):U.jsx(me.Tooltip,{title:e,arrow:!0,placement:v==="right"?"left":"top",children:U.jsxs(Cd,{htmlFor:"file-upload",sx:{display:"flex",":hover":{backgroundColor:qt[200]},p:1.5,borderRadius:"50%",backgroundColor:qt[200],color:"black"},children:[U.jsx(Zu,{sx:{fontSize:20,color:"inherit"}}),U.jsx(Sd,{id:"file-upload",type:"file",...i,accept:"image/*",onClick:w,onChange:C})]})})};function Td(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"text"}),...t})}function jw(){const{core:t,touch:e}=It(),{tool:i,setTool:f}=Hr(),v=i===Be.TEXT,w=C=>{e?t.addText("text",{shaking:!0}):f(Be.TEXT)};return U.jsx(U.Fragment,{children:U.jsx(tr,{disableToolbar:!0,selected:v,Icon:Td,onClick:w,tooltip:""})})}const Lw=[1,2,3,4,5],Bw=({value:t,onChange:e})=>{const i=f=>{e({thickness:f})};return U.jsx(me.Box,{children:U.jsx(me.Box,{sx:{display:"flex",gap:1},children:Lw.map(f=>U.jsx(me.IconButton,{onClick:()=>i(f),children:U.jsx(Qu,{thickness:f,selected:t.thickness===f})},f))})})};function Ed(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"eraser"}),...t})}function Fw(){const[t,e]=we.useState(null),{core:i}=It(),{tool:f,setTool:v}=Hr(),[w,C]=we.useState(i.getToolConfig(Be.ERASER)),E=f===Be.ERASER,O=h=>{E?e(h.currentTarget):v(Be.ERASER)},g=()=>{e(null)},o=h=>{const c=i.updateToolConfig(Be.ERASER,h);C(c),g()};return U.jsxs(U.Fragment,{children:[U.jsx(tr,{selected:E,Icon:Ed,onClick:O,tooltip:"",disableToolbar:!0}),U.jsx(Gs,{open:!!t,anchorEl:t,onClose:g,children:U.jsx(Bw,{value:w,onChange:o})})]})}var qs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qs.exports,function(t,e){(function(){var i,f="4.17.21",v=200,w="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",E="Invalid `variable` option passed into `_.template`",O="__lodash_hash_undefined__",g=500,o="__lodash_placeholder__",h=1,c=2,n=4,a=1,s=2,u=1,p=2,l=4,m=8,y=16,b=32,x=64,T=128,M=256,I=512,R=30,W="...",K=800,$=16,se=1,fe=2,le=3,ce=1/0,_e=9007199254740991,Oe=17976931348623157e292,ne=0/0,D=4294967295,F=D-1,B=D>>>1,L=[["ary",T],["bind",u],["bindKey",p],["curry",m],["curryRight",y],["flip",I],["partial",b],["partialRight",x],["rearg",M]],X="[object Arguments]",A="[object Array]",k="[object AsyncFunction]",V="[object Boolean]",z="[object Date]",Z="[object DOMException]",J="[object Error]",Y="[object Function]",he="[object GeneratorFunction]",ie="[object Map]",ee="[object Number]",Q="[object Null]",ae="[object Object]",de="[object Promise]",ue="[object Proxy]",pe="[object RegExp]",xe="[object Set]",Ie="[object String]",Pe="[object Symbol]",oe="[object Undefined]",Ae="[object WeakMap]",Fe="[object WeakSet]",Ve="[object ArrayBuffer]",Ge="[object DataView]",et="[object Float32Array]",Mt="[object Float64Array]",_t="[object Int8Array]",yr="[object Int16Array]",zr="[object Int32Array]",Kt="[object Uint8Array]",li="[object Uint8ClampedArray]",Mn="[object Uint16Array]",ci="[object Uint32Array]",jo=/\b__p \+= '';/g,Lo=/\b(__p \+=) '' \+/g,ia=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pn=/&(?:amp|lt|gt|quot|#39);/g,Ni=/[&<>"']/g,Bo=RegExp(pn.source),oa=RegExp(Ni.source),xl=/<%-([\s\S]+?)%>/g,sa=/<%([\s\S]+?)%>/g,aa=/<%=([\s\S]+?)%>/g,ua=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,la=/^\w*$/,Cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fo=/[\\^$.*+?()[\]{}|]/g,ca=RegExp(Fo.source),No=/^\s+/,Sl=/\s/,Tl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,El=/\{\n\/\* \[wrapped with (.+)\] \*/,G=/,? & /,Te=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,De=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,tt=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,Et=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,sr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,fa=/['\n\r\u2028\u2029\\]/g,ar="\\ud800-\\udfff",MS="\\u0300-\\u036f",RS="\\ufe20-\\ufe2f",kS="\\u20d0-\\u20ff",bg=MS+RS+kS,wg="\\u2700-\\u27bf",xg="a-z\\xdf-\\xf6\\xf8-\\xff",IS="\\xac\\xb1\\xd7\\xf7",jS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",LS="\\u2000-\\u206f",BS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cg="A-Z\\xc0-\\xd6\\xd8-\\xde",Sg="\\ufe0e\\ufe0f",Tg=IS+jS+LS+BS,Ol="[']",FS="["+ar+"]",Eg="["+Tg+"]",ha="["+bg+"]",Og="\\d+",NS="["+wg+"]",Ag="["+xg+"]",Pg="[^"+ar+Tg+Og+wg+xg+Cg+"]",Al="\\ud83c[\\udffb-\\udfff]",VS="(?:"+ha+"|"+Al+")",Dg="[^"+ar+"]",Pl="(?:\\ud83c[\\udde6-\\uddff]){2}",Dl="[\\ud800-\\udbff][\\udc00-\\udfff]",Vi="["+Cg+"]",Mg="\\u200d",Rg="(?:"+Ag+"|"+Pg+")",US="(?:"+Vi+"|"+Pg+")",kg="(?:"+Ol+"(?:d|ll|m|re|s|t|ve))?",Ig="(?:"+Ol+"(?:D|LL|M|RE|S|T|VE))?",jg=VS+"?",Lg="["+Sg+"]?",YS="(?:"+Mg+"(?:"+[Dg,Pl,Dl].join("|")+")"+Lg+jg+")*",WS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bg=Lg+jg+YS,zS="(?:"+[NS,Pl,Dl].join("|")+")"+Bg,XS="(?:"+[Dg+ha+"?",ha,Pl,Dl,FS].join("|")+")",GS=RegExp(Ol,"g"),$S=RegExp(ha,"g"),Ml=RegExp(Al+"(?="+Al+")|"+XS+Bg,"g"),qS=RegExp([Vi+"?"+Ag+"+"+kg+"(?="+[Eg,Vi,"$"].join("|")+")",US+"+"+Ig+"(?="+[Eg,Vi+Rg,"$"].join("|")+")",Vi+"?"+Rg+"+"+kg,Vi+"+"+Ig,HS,WS,Og,zS].join("|"),"g"),KS=RegExp("["+Mg+ar+bg+Sg+"]"),QS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ZS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],JS=-1,Ct={};Ct[et]=Ct[Mt]=Ct[_t]=Ct[yr]=Ct[zr]=Ct[Kt]=Ct[li]=Ct[Mn]=Ct[ci]=!0,Ct[X]=Ct[A]=Ct[Ve]=Ct[V]=Ct[Ge]=Ct[z]=Ct[J]=Ct[Y]=Ct[ie]=Ct[ee]=Ct[ae]=Ct[pe]=Ct[xe]=Ct[Ie]=Ct[Ae]=!1;var xt={};xt[X]=xt[A]=xt[Ve]=xt[Ge]=xt[V]=xt[z]=xt[et]=xt[Mt]=xt[_t]=xt[yr]=xt[zr]=xt[ie]=xt[ee]=xt[ae]=xt[pe]=xt[xe]=xt[Ie]=xt[Pe]=xt[Kt]=xt[li]=xt[Mn]=xt[ci]=!0,xt[J]=xt[Y]=xt[Ae]=!1;var eT={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},tT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rT={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iT=parseFloat,oT=parseInt,Fg=typeof eo=="object"&&eo&&eo.Object===Object&&eo,sT=typeof self=="object"&&self&&self.Object===Object&&self,zt=Fg||sT||Function("return this")(),Rl=e&&!e.nodeType&&e,fi=Rl&&!0&&t&&!t.nodeType&&t,Ng=fi&&fi.exports===Rl,kl=Ng&&Fg.process,Mr=function(){try{var te=fi&&fi.require&&fi.require("util").types;return te||kl&&kl.binding&&kl.binding("util")}catch{}}(),Vg=Mr&&Mr.isArrayBuffer,Ug=Mr&&Mr.isDate,Yg=Mr&&Mr.isMap,Wg=Mr&&Mr.isRegExp,Hg=Mr&&Mr.isSet,zg=Mr&&Mr.isTypedArray;function _r(te,ve,ge){switch(ge.length){case 0:return te.call(ve);case 1:return te.call(ve,ge[0]);case 2:return te.call(ve,ge[0],ge[1]);case 3:return te.call(ve,ge[0],ge[1],ge[2])}return te.apply(ve,ge)}function aT(te,ve,ge,ke){for(var ze=-1,at=te==null?0:te.length;++ze<at;){var Nt=te[ze];ve(ke,Nt,ge(Nt),te)}return ke}function Rr(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke&&ve(te[ge],ge,te)!==!1;);return te}function uT(te,ve){for(var ge=te==null?0:te.length;ge--&&ve(te[ge],ge,te)!==!1;);return te}function Xg(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke;)if(!ve(te[ge],ge,te))return!1;return!0}function Rn(te,ve){for(var ge=-1,ke=te==null?0:te.length,ze=0,at=[];++ge<ke;){var Nt=te[ge];ve(Nt,ge,te)&&(at[ze++]=Nt)}return at}function da(te,ve){var ge=te==null?0:te.length;return!!ge&&Ui(te,ve,0)>-1}function Il(te,ve,ge){for(var ke=-1,ze=te==null?0:te.length;++ke<ze;)if(ge(ve,te[ke]))return!0;return!1}function Tt(te,ve){for(var ge=-1,ke=te==null?0:te.length,ze=Array(ke);++ge<ke;)ze[ge]=ve(te[ge],ge,te);return ze}function kn(te,ve){for(var ge=-1,ke=ve.length,ze=te.length;++ge<ke;)te[ze+ge]=ve[ge];return te}function jl(te,ve,ge,ke){var ze=-1,at=te==null?0:te.length;for(ke&&at&&(ge=te[++ze]);++ze<at;)ge=ve(ge,te[ze],ze,te);return ge}function lT(te,ve,ge,ke){var ze=te==null?0:te.length;for(ke&&ze&&(ge=te[--ze]);ze--;)ge=ve(ge,te[ze],ze,te);return ge}function Ll(te,ve){for(var ge=-1,ke=te==null?0:te.length;++ge<ke;)if(ve(te[ge],ge,te))return!0;return!1}var cT=Bl("length");function fT(te){return te.split("")}function hT(te){return te.match(Te)||[]}function Gg(te,ve,ge){var ke;return ge(te,function(ze,at,Nt){if(ve(ze,at,Nt))return ke=at,!1}),ke}function ga(te,ve,ge,ke){for(var ze=te.length,at=ge+(ke?1:-1);ke?at--:++at<ze;)if(ve(te[at],at,te))return at;return-1}function Ui(te,ve,ge){return ve===ve?ST(te,ve,ge):ga(te,$g,ge)}function dT(te,ve,ge,ke){for(var ze=ge-1,at=te.length;++ze<at;)if(ke(te[ze],ve))return ze;return-1}function $g(te){return te!==te}function qg(te,ve){var ge=te==null?0:te.length;return ge?Nl(te,ve)/ge:ne}function Bl(te){return function(ve){return ve==null?i:ve[te]}}function Fl(te){return function(ve){return te==null?i:te[ve]}}function Kg(te,ve,ge,ke,ze){return ze(te,function(at,Nt,bt){ge=ke?(ke=!1,at):ve(ge,at,Nt,bt)}),ge}function gT(te,ve){var ge=te.length;for(te.sort(ve);ge--;)te[ge]=te[ge].value;return te}function Nl(te,ve){for(var ge,ke=-1,ze=te.length;++ke<ze;){var at=ve(te[ke]);at!==i&&(ge=ge===i?at:ge+at)}return ge}function Vl(te,ve){for(var ge=-1,ke=Array(te);++ge<te;)ke[ge]=ve(ge);return ke}function pT(te,ve){return Tt(ve,function(ge){return[ge,te[ge]]})}function Qg(te){return te&&te.slice(0,tp(te)+1).replace(No,"")}function br(te){return function(ve){return te(ve)}}function Ul(te,ve){return Tt(ve,function(ge){return te[ge]})}function Vo(te,ve){return te.has(ve)}function Zg(te,ve){for(var ge=-1,ke=te.length;++ge<ke&&Ui(ve,te[ge],0)>-1;);return ge}function Jg(te,ve){for(var ge=te.length;ge--&&Ui(ve,te[ge],0)>-1;);return ge}function vT(te,ve){for(var ge=te.length,ke=0;ge--;)te[ge]===ve&&++ke;return ke}var mT=Fl(eT),yT=Fl(tT);function _T(te){return"\\"+nT[te]}function bT(te,ve){return te==null?i:te[ve]}function Yi(te){return KS.test(te)}function wT(te){return QS.test(te)}function xT(te){for(var ve,ge=[];!(ve=te.next()).done;)ge.push(ve.value);return ge}function Yl(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke,ze){ge[++ve]=[ze,ke]}),ge}function ep(te,ve){return function(ge){return te(ve(ge))}}function In(te,ve){for(var ge=-1,ke=te.length,ze=0,at=[];++ge<ke;){var Nt=te[ge];(Nt===ve||Nt===o)&&(te[ge]=o,at[ze++]=ge)}return at}function pa(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke){ge[++ve]=ke}),ge}function CT(te){var ve=-1,ge=Array(te.size);return te.forEach(function(ke){ge[++ve]=[ke,ke]}),ge}function ST(te,ve,ge){for(var ke=ge-1,ze=te.length;++ke<ze;)if(te[ke]===ve)return ke;return-1}function TT(te,ve,ge){for(var ke=ge+1;ke--;)if(te[ke]===ve)return ke;return ke}function Wi(te){return Yi(te)?OT(te):cT(te)}function Gr(te){return Yi(te)?AT(te):fT(te)}function tp(te){for(var ve=te.length;ve--&&Sl.test(te.charAt(ve)););return ve}var ET=Fl(rT);function OT(te){for(var ve=Ml.lastIndex=0;Ml.test(te);)++ve;return ve}function AT(te){return te.match(Ml)||[]}function PT(te){return te.match(qS)||[]}var DT=function te(ve){ve=ve==null?zt:Hi.defaults(zt.Object(),ve,Hi.pick(zt,ZS));var ge=ve.Array,ke=ve.Date,ze=ve.Error,at=ve.Function,Nt=ve.Math,bt=ve.Object,Wl=ve.RegExp,MT=ve.String,kr=ve.TypeError,va=ge.prototype,RT=at.prototype,zi=bt.prototype,ma=ve["__core-js_shared__"],ya=RT.toString,yt=zi.hasOwnProperty,kT=0,rp=function(){var r=/[^.]+$/.exec(ma&&ma.keys&&ma.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),_a=zi.toString,IT=ya.call(bt),jT=zt._,LT=Wl("^"+ya.call(yt).replace(Fo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ba=Ng?ve.Buffer:i,jn=ve.Symbol,wa=ve.Uint8Array,np=ba?ba.allocUnsafe:i,xa=ep(bt.getPrototypeOf,bt),ip=bt.create,op=zi.propertyIsEnumerable,Ca=va.splice,sp=jn?jn.isConcatSpreadable:i,Uo=jn?jn.iterator:i,hi=jn?jn.toStringTag:i,Sa=function(){try{var r=mi(bt,"defineProperty");return r({},"",{}),r}catch{}}(),BT=ve.clearTimeout!==zt.clearTimeout&&ve.clearTimeout,FT=ke&&ke.now!==zt.Date.now&&ke.now,NT=ve.setTimeout!==zt.setTimeout&&ve.setTimeout,Ta=Nt.ceil,Ea=Nt.floor,Hl=bt.getOwnPropertySymbols,VT=ba?ba.isBuffer:i,ap=ve.isFinite,UT=va.join,YT=ep(bt.keys,bt),Vt=Nt.max,Qt=Nt.min,WT=ke.now,HT=ve.parseInt,up=Nt.random,zT=va.reverse,zl=mi(ve,"DataView"),Yo=mi(ve,"Map"),Xl=mi(ve,"Promise"),Xi=mi(ve,"Set"),Wo=mi(ve,"WeakMap"),Ho=mi(bt,"create"),Oa=Wo&&new Wo,Gi={},XT=yi(zl),GT=yi(Yo),$T=yi(Xl),qT=yi(Xi),KT=yi(Wo),Aa=jn?jn.prototype:i,zo=Aa?Aa.valueOf:i,lp=Aa?Aa.toString:i;function j(r){if(kt(r)&&!Xe(r)&&!(r instanceof rt)){if(r instanceof Ir)return r;if(yt.call(r,"__wrapped__"))return cv(r)}return new Ir(r)}var $i=function(){function r(){}return function(d){if(!Ot(d))return{};if(ip)return ip(d);r.prototype=d;var _=new r;return r.prototype=i,_}}();function Pa(){}function Ir(r,d){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=i}j.templateSettings={escape:xl,evaluate:sa,interpolate:aa,variable:"",imports:{_:j}},j.prototype=Pa.prototype,j.prototype.constructor=j,Ir.prototype=$i(Pa.prototype),Ir.prototype.constructor=Ir;function rt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function QT(){var r=new rt(this.__wrapped__);return r.__actions__=ur(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=ur(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=ur(this.__views__),r}function ZT(){if(this.__filtered__){var r=new rt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function JT(){var r=this.__wrapped__.value(),d=this.__dir__,_=Xe(r),S=d<0,P=_?r.length:0,N=fO(0,P,this.__views__),H=N.start,q=N.end,re=q-H,ye=S?q:H-1,be=this.__iteratees__,Ce=be.length,Me=0,je=Qt(re,this.__takeCount__);if(!_||!S&&P==re&&je==re)return kp(r,this.__actions__);var Ue=[];e:for(;re--&&Me<je;){ye+=d;for(var qe=-1,Ye=r[ye];++qe<Ce;){var Je=be[qe],it=Je.iteratee,Cr=Je.type,ir=it(Ye);if(Cr==fe)Ye=ir;else if(!ir){if(Cr==se)continue e;break e}}Ue[Me++]=Ye}return Ue}rt.prototype=$i(Pa.prototype),rt.prototype.constructor=rt;function di(r){var d=-1,_=r==null?0:r.length;for(this.clear();++d<_;){var S=r[d];this.set(S[0],S[1])}}function eE(){this.__data__=Ho?Ho(null):{},this.size=0}function tE(r){var d=this.has(r)&&delete this.__data__[r];return this.size-=d?1:0,d}function rE(r){var d=this.__data__;if(Ho){var _=d[r];return _===O?i:_}return yt.call(d,r)?d[r]:i}function nE(r){var d=this.__data__;return Ho?d[r]!==i:yt.call(d,r)}function iE(r,d){var _=this.__data__;return this.size+=this.has(r)?0:1,_[r]=Ho&&d===i?O:d,this}di.prototype.clear=eE,di.prototype.delete=tE,di.prototype.get=rE,di.prototype.has=nE,di.prototype.set=iE;function vn(r){var d=-1,_=r==null?0:r.length;for(this.clear();++d<_;){var S=r[d];this.set(S[0],S[1])}}function oE(){this.__data__=[],this.size=0}function sE(r){var d=this.__data__,_=Da(d,r);if(_<0)return!1;var S=d.length-1;return _==S?d.pop():Ca.call(d,_,1),--this.size,!0}function aE(r){var d=this.__data__,_=Da(d,r);return _<0?i:d[_][1]}function uE(r){return Da(this.__data__,r)>-1}function lE(r,d){var _=this.__data__,S=Da(_,r);return S<0?(++this.size,_.push([r,d])):_[S][1]=d,this}vn.prototype.clear=oE,vn.prototype.delete=sE,vn.prototype.get=aE,vn.prototype.has=uE,vn.prototype.set=lE;function mn(r){var d=-1,_=r==null?0:r.length;for(this.clear();++d<_;){var S=r[d];this.set(S[0],S[1])}}function cE(){this.size=0,this.__data__={hash:new di,map:new(Yo||vn),string:new di}}function fE(r){var d=Ya(this,r).delete(r);return this.size-=d?1:0,d}function hE(r){return Ya(this,r).get(r)}function dE(r){return Ya(this,r).has(r)}function gE(r,d){var _=Ya(this,r),S=_.size;return _.set(r,d),this.size+=_.size==S?0:1,this}mn.prototype.clear=cE,mn.prototype.delete=fE,mn.prototype.get=hE,mn.prototype.has=dE,mn.prototype.set=gE;function gi(r){var d=-1,_=r==null?0:r.length;for(this.__data__=new mn;++d<_;)this.add(r[d])}function pE(r){return this.__data__.set(r,O),this}function vE(r){return this.__data__.has(r)}gi.prototype.add=gi.prototype.push=pE,gi.prototype.has=vE;function $r(r){var d=this.__data__=new vn(r);this.size=d.size}function mE(){this.__data__=new vn,this.size=0}function yE(r){var d=this.__data__,_=d.delete(r);return this.size=d.size,_}function _E(r){return this.__data__.get(r)}function bE(r){return this.__data__.has(r)}function wE(r,d){var _=this.__data__;if(_ instanceof vn){var S=_.__data__;if(!Yo||S.length<v-1)return S.push([r,d]),this.size=++_.size,this;_=this.__data__=new mn(S)}return _.set(r,d),this.size=_.size,this}$r.prototype.clear=mE,$r.prototype.delete=yE,$r.prototype.get=_E,$r.prototype.has=bE,$r.prototype.set=wE;function cp(r,d){var _=Xe(r),S=!_&&_i(r),P=!_&&!S&&Vn(r),N=!_&&!S&&!P&&Zi(r),H=_||S||P||N,q=H?Vl(r.length,MT):[],re=q.length;for(var ye in r)(d||yt.call(r,ye))&&!(H&&(ye=="length"||P&&(ye=="offset"||ye=="parent")||N&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||wn(ye,re)))&&q.push(ye);return q}function fp(r){var d=r.length;return d?r[nc(0,d-1)]:i}function xE(r,d){return Wa(ur(r),pi(d,0,r.length))}function CE(r){return Wa(ur(r))}function Gl(r,d,_){(_!==i&&!qr(r[d],_)||_===i&&!(d in r))&&yn(r,d,_)}function Xo(r,d,_){var S=r[d];(!(yt.call(r,d)&&qr(S,_))||_===i&&!(d in r))&&yn(r,d,_)}function Da(r,d){for(var _=r.length;_--;)if(qr(r[_][0],d))return _;return-1}function SE(r,d,_,S){return Ln(r,function(P,N,H){d(S,P,_(P),H)}),S}function hp(r,d){return r&&on(d,Yt(d),r)}function TE(r,d){return r&&on(d,cr(d),r)}function yn(r,d,_){d=="__proto__"&&Sa?Sa(r,d,{configurable:!0,enumerable:!0,value:_,writable:!0}):r[d]=_}function $l(r,d){for(var _=-1,S=d.length,P=ge(S),N=r==null;++_<S;)P[_]=N?i:Ac(r,d[_]);return P}function pi(r,d,_){return r===r&&(_!==i&&(r=r<=_?r:_),d!==i&&(r=r>=d?r:d)),r}function jr(r,d,_,S,P,N){var H,q=d&h,re=d&c,ye=d&n;if(_&&(H=P?_(r,S,P,N):_(r)),H!==i)return H;if(!Ot(r))return r;var be=Xe(r);if(be){if(H=dO(r),!q)return ur(r,H)}else{var Ce=Zt(r),Me=Ce==Y||Ce==he;if(Vn(r))return Lp(r,q);if(Ce==ae||Ce==X||Me&&!P){if(H=re||Me?{}:tv(r),!q)return re?rO(r,TE(H,r)):tO(r,hp(H,r))}else{if(!xt[Ce])return P?r:{};H=gO(r,Ce,q)}}N||(N=new $r);var je=N.get(r);if(je)return je;N.set(r,H),Dv(r)?r.forEach(function(Ye){H.add(jr(Ye,d,_,Ye,r,N))}):Av(r)&&r.forEach(function(Ye,Je){H.set(Je,jr(Ye,d,_,Je,r,N))});var Ue=ye?re?gc:dc:re?cr:Yt,qe=be?i:Ue(r);return Rr(qe||r,function(Ye,Je){qe&&(Je=Ye,Ye=r[Je]),Xo(H,Je,jr(Ye,d,_,Je,r,N))}),H}function EE(r){var d=Yt(r);return function(_){return dp(_,r,d)}}function dp(r,d,_){var S=_.length;if(r==null)return!S;for(r=bt(r);S--;){var P=_[S],N=d[P],H=r[P];if(H===i&&!(P in r)||!N(H))return!1}return!0}function gp(r,d,_){if(typeof r!="function")throw new kr(C);return Jo(function(){r.apply(i,_)},d)}function Go(r,d,_,S){var P=-1,N=da,H=!0,q=r.length,re=[],ye=d.length;if(!q)return re;_&&(d=Tt(d,br(_))),S?(N=Il,H=!1):d.length>=v&&(N=Vo,H=!1,d=new gi(d));e:for(;++P<q;){var be=r[P],Ce=_==null?be:_(be);if(be=S||be!==0?be:0,H&&Ce===Ce){for(var Me=ye;Me--;)if(d[Me]===Ce)continue e;re.push(be)}else N(d,Ce,S)||re.push(be)}return re}var Ln=Up(nn),pp=Up(Kl,!0);function OE(r,d){var _=!0;return Ln(r,function(S,P,N){return _=!!d(S,P,N),_}),_}function Ma(r,d,_){for(var S=-1,P=r.length;++S<P;){var N=r[S],H=d(N);if(H!=null&&(q===i?H===H&&!xr(H):_(H,q)))var q=H,re=N}return re}function AE(r,d,_,S){var P=r.length;for(_=$e(_),_<0&&(_=-_>P?0:P+_),S=S===i||S>P?P:$e(S),S<0&&(S+=P),S=_>S?0:Rv(S);_<S;)r[_++]=d;return r}function vp(r,d){var _=[];return Ln(r,function(S,P,N){d(S,P,N)&&_.push(S)}),_}function Xt(r,d,_,S,P){var N=-1,H=r.length;for(_||(_=vO),P||(P=[]);++N<H;){var q=r[N];d>0&&_(q)?d>1?Xt(q,d-1,_,S,P):kn(P,q):S||(P[P.length]=q)}return P}var ql=Yp(),mp=Yp(!0);function nn(r,d){return r&&ql(r,d,Yt)}function Kl(r,d){return r&&mp(r,d,Yt)}function Ra(r,d){return Rn(d,function(_){return xn(r[_])})}function vi(r,d){d=Fn(d,r);for(var _=0,S=d.length;r!=null&&_<S;)r=r[sn(d[_++])];return _&&_==S?r:i}function yp(r,d,_){var S=d(r);return Xe(r)?S:kn(S,_(r))}function rr(r){return r==null?r===i?oe:Q:hi&&hi in bt(r)?cO(r):CO(r)}function Ql(r,d){return r>d}function PE(r,d){return r!=null&&yt.call(r,d)}function DE(r,d){return r!=null&&d in bt(r)}function ME(r,d,_){return r>=Qt(d,_)&&r<Vt(d,_)}function Zl(r,d,_){for(var S=_?Il:da,P=r[0].length,N=r.length,H=N,q=ge(N),re=1/0,ye=[];H--;){var be=r[H];H&&d&&(be=Tt(be,br(d))),re=Qt(be.length,re),q[H]=!_&&(d||P>=120&&be.length>=120)?new gi(H&&be):i}be=r[0];var Ce=-1,Me=q[0];e:for(;++Ce<P&&ye.length<re;){var je=be[Ce],Ue=d?d(je):je;if(je=_||je!==0?je:0,!(Me?Vo(Me,Ue):S(ye,Ue,_))){for(H=N;--H;){var qe=q[H];if(!(qe?Vo(qe,Ue):S(r[H],Ue,_)))continue e}Me&&Me.push(Ue),ye.push(je)}}return ye}function RE(r,d,_,S){return nn(r,function(P,N,H){d(S,_(P),N,H)}),S}function $o(r,d,_){d=Fn(d,r),r=ov(r,d);var S=r==null?r:r[sn(Br(d))];return S==null?i:_r(S,r,_)}function _p(r){return kt(r)&&rr(r)==X}function kE(r){return kt(r)&&rr(r)==Ve}function IE(r){return kt(r)&&rr(r)==z}function qo(r,d,_,S,P){return r===d?!0:r==null||d==null||!kt(r)&&!kt(d)?r!==r&&d!==d:jE(r,d,_,S,qo,P)}function jE(r,d,_,S,P,N){var H=Xe(r),q=Xe(d),re=H?A:Zt(r),ye=q?A:Zt(d);re=re==X?ae:re,ye=ye==X?ae:ye;var be=re==ae,Ce=ye==ae,Me=re==ye;if(Me&&Vn(r)){if(!Vn(d))return!1;H=!0,be=!1}if(Me&&!be)return N||(N=new $r),H||Zi(r)?Zp(r,d,_,S,P,N):uO(r,d,re,_,S,P,N);if(!(_&a)){var je=be&&yt.call(r,"__wrapped__"),Ue=Ce&&yt.call(d,"__wrapped__");if(je||Ue){var qe=je?r.value():r,Ye=Ue?d.value():d;return N||(N=new $r),P(qe,Ye,_,S,N)}}return Me?(N||(N=new $r),lO(r,d,_,S,P,N)):!1}function LE(r){return kt(r)&&Zt(r)==ie}function Jl(r,d,_,S){var P=_.length,N=P,H=!S;if(r==null)return!N;for(r=bt(r);P--;){var q=_[P];if(H&&q[2]?q[1]!==r[q[0]]:!(q[0]in r))return!1}for(;++P<N;){q=_[P];var re=q[0],ye=r[re],be=q[1];if(H&&q[2]){if(ye===i&&!(re in r))return!1}else{var Ce=new $r;if(S)var Me=S(ye,be,re,r,d,Ce);if(!(Me===i?qo(be,ye,a|s,S,Ce):Me))return!1}}return!0}function bp(r){if(!Ot(r)||yO(r))return!1;var d=xn(r)?LT:Ht;return d.test(yi(r))}function BE(r){return kt(r)&&rr(r)==pe}function FE(r){return kt(r)&&Zt(r)==xe}function NE(r){return kt(r)&&qa(r.length)&&!!Ct[rr(r)]}function wp(r){return typeof r=="function"?r:r==null?fr:typeof r=="object"?Xe(r)?Sp(r[0],r[1]):Cp(r):Wv(r)}function ec(r){if(!Zo(r))return YT(r);var d=[];for(var _ in bt(r))yt.call(r,_)&&_!="constructor"&&d.push(_);return d}function VE(r){if(!Ot(r))return xO(r);var d=Zo(r),_=[];for(var S in r)S=="constructor"&&(d||!yt.call(r,S))||_.push(S);return _}function tc(r,d){return r<d}function xp(r,d){var _=-1,S=lr(r)?ge(r.length):[];return Ln(r,function(P,N,H){S[++_]=d(P,N,H)}),S}function Cp(r){var d=vc(r);return d.length==1&&d[0][2]?nv(d[0][0],d[0][1]):function(_){return _===r||Jl(_,r,d)}}function Sp(r,d){return yc(r)&&rv(d)?nv(sn(r),d):function(_){var S=Ac(_,r);return S===i&&S===d?Pc(_,r):qo(d,S,a|s)}}function ka(r,d,_,S,P){r!==d&&ql(d,function(N,H){if(P||(P=new $r),Ot(N))UE(r,d,H,_,ka,S,P);else{var q=S?S(bc(r,H),N,H+"",r,d,P):i;q===i&&(q=N),Gl(r,H,q)}},cr)}function UE(r,d,_,S,P,N,H){var q=bc(r,_),re=bc(d,_),ye=H.get(re);if(ye){Gl(r,_,ye);return}var be=N?N(q,re,_+"",r,d,H):i,Ce=be===i;if(Ce){var Me=Xe(re),je=!Me&&Vn(re),Ue=!Me&&!je&&Zi(re);be=re,Me||je||Ue?Xe(q)?be=q:jt(q)?be=ur(q):je?(Ce=!1,be=Lp(re,!0)):Ue?(Ce=!1,be=Bp(re,!0)):be=[]:es(re)||_i(re)?(be=q,_i(q)?be=kv(q):(!Ot(q)||xn(q))&&(be=tv(re))):Ce=!1}Ce&&(H.set(re,be),P(be,re,S,N,H),H.delete(re)),Gl(r,_,be)}function Tp(r,d){var _=r.length;if(_)return d+=d<0?_:0,wn(d,_)?r[d]:i}function Ep(r,d,_){d.length?d=Tt(d,function(N){return Xe(N)?function(H){return vi(H,N.length===1?N[0]:N)}:N}):d=[fr];var S=-1;d=Tt(d,br(Ne()));var P=xp(r,function(N,H,q){var re=Tt(d,function(ye){return ye(N)});return{criteria:re,index:++S,value:N}});return gT(P,function(N,H){return eO(N,H,_)})}function YE(r,d){return Op(r,d,function(_,S){return Pc(r,S)})}function Op(r,d,_){for(var S=-1,P=d.length,N={};++S<P;){var H=d[S],q=vi(r,H);_(q,H)&&Ko(N,Fn(H,r),q)}return N}function WE(r){return function(d){return vi(d,r)}}function rc(r,d,_,S){var P=S?dT:Ui,N=-1,H=d.length,q=r;for(r===d&&(d=ur(d)),_&&(q=Tt(r,br(_)));++N<H;)for(var re=0,ye=d[N],be=_?_(ye):ye;(re=P(q,be,re,S))>-1;)q!==r&&Ca.call(q,re,1),Ca.call(r,re,1);return r}function Ap(r,d){for(var _=r?d.length:0,S=_-1;_--;){var P=d[_];if(_==S||P!==N){var N=P;wn(P)?Ca.call(r,P,1):sc(r,P)}}return r}function nc(r,d){return r+Ea(up()*(d-r+1))}function HE(r,d,_,S){for(var P=-1,N=Vt(Ta((d-r)/(_||1)),0),H=ge(N);N--;)H[S?N:++P]=r,r+=_;return H}function ic(r,d){var _="";if(!r||d<1||d>_e)return _;do d%2&&(_+=r),d=Ea(d/2),d&&(r+=r);while(d);return _}function Ke(r,d){return wc(iv(r,d,fr),r+"")}function zE(r){return fp(Ji(r))}function XE(r,d){var _=Ji(r);return Wa(_,pi(d,0,_.length))}function Ko(r,d,_,S){if(!Ot(r))return r;d=Fn(d,r);for(var P=-1,N=d.length,H=N-1,q=r;q!=null&&++P<N;){var re=sn(d[P]),ye=_;if(re==="__proto__"||re==="constructor"||re==="prototype")return r;if(P!=H){var be=q[re];ye=S?S(be,re,q):i,ye===i&&(ye=Ot(be)?be:wn(d[P+1])?[]:{})}Xo(q,re,ye),q=q[re]}return r}var Pp=Oa?function(r,d){return Oa.set(r,d),r}:fr,GE=Sa?function(r,d){return Sa(r,"toString",{configurable:!0,enumerable:!1,value:Mc(d),writable:!0})}:fr;function $E(r){return Wa(Ji(r))}function Lr(r,d,_){var S=-1,P=r.length;d<0&&(d=-d>P?0:P+d),_=_>P?P:_,_<0&&(_+=P),P=d>_?0:_-d>>>0,d>>>=0;for(var N=ge(P);++S<P;)N[S]=r[S+d];return N}function qE(r,d){var _;return Ln(r,function(S,P,N){return _=d(S,P,N),!_}),!!_}function Ia(r,d,_){var S=0,P=r==null?S:r.length;if(typeof d=="number"&&d===d&&P<=B){for(;S<P;){var N=S+P>>>1,H=r[N];H!==null&&!xr(H)&&(_?H<=d:H<d)?S=N+1:P=N}return P}return oc(r,d,fr,_)}function oc(r,d,_,S){var P=0,N=r==null?0:r.length;if(N===0)return 0;d=_(d);for(var H=d!==d,q=d===null,re=xr(d),ye=d===i;P<N;){var be=Ea((P+N)/2),Ce=_(r[be]),Me=Ce!==i,je=Ce===null,Ue=Ce===Ce,qe=xr(Ce);if(H)var Ye=S||Ue;else ye?Ye=Ue&&(S||Me):q?Ye=Ue&&Me&&(S||!je):re?Ye=Ue&&Me&&!je&&(S||!qe):je||qe?Ye=!1:Ye=S?Ce<=d:Ce<d;Ye?P=be+1:N=be}return Qt(N,F)}function Dp(r,d){for(var _=-1,S=r.length,P=0,N=[];++_<S;){var H=r[_],q=d?d(H):H;if(!_||!qr(q,re)){var re=q;N[P++]=H===0?0:H}}return N}function Mp(r){return typeof r=="number"?r:xr(r)?ne:+r}function wr(r){if(typeof r=="string")return r;if(Xe(r))return Tt(r,wr)+"";if(xr(r))return lp?lp.call(r):"";var d=r+"";return d=="0"&&1/r==-ce?"-0":d}function Bn(r,d,_){var S=-1,P=da,N=r.length,H=!0,q=[],re=q;if(_)H=!1,P=Il;else if(N>=v){var ye=d?null:sO(r);if(ye)return pa(ye);H=!1,P=Vo,re=new gi}else re=d?[]:q;e:for(;++S<N;){var be=r[S],Ce=d?d(be):be;if(be=_||be!==0?be:0,H&&Ce===Ce){for(var Me=re.length;Me--;)if(re[Me]===Ce)continue e;d&&re.push(Ce),q.push(be)}else P(re,Ce,_)||(re!==q&&re.push(Ce),q.push(be))}return q}function sc(r,d){return d=Fn(d,r),r=ov(r,d),r==null||delete r[sn(Br(d))]}function Rp(r,d,_,S){return Ko(r,d,_(vi(r,d)),S)}function ja(r,d,_,S){for(var P=r.length,N=S?P:-1;(S?N--:++N<P)&&d(r[N],N,r););return _?Lr(r,S?0:N,S?N+1:P):Lr(r,S?N+1:0,S?P:N)}function kp(r,d){var _=r;return _ instanceof rt&&(_=_.value()),jl(d,function(S,P){return P.func.apply(P.thisArg,kn([S],P.args))},_)}function ac(r,d,_){var S=r.length;if(S<2)return S?Bn(r[0]):[];for(var P=-1,N=ge(S);++P<S;)for(var H=r[P],q=-1;++q<S;)q!=P&&(N[P]=Go(N[P]||H,r[q],d,_));return Bn(Xt(N,1),d,_)}function Ip(r,d,_){for(var S=-1,P=r.length,N=d.length,H={};++S<P;){var q=S<N?d[S]:i;_(H,r[S],q)}return H}function uc(r){return jt(r)?r:[]}function lc(r){return typeof r=="function"?r:fr}function Fn(r,d){return Xe(r)?r:yc(r,d)?[r]:lv(vt(r))}var KE=Ke;function Nn(r,d,_){var S=r.length;return _=_===i?S:_,!d&&_>=S?r:Lr(r,d,_)}var jp=BT||function(r){return zt.clearTimeout(r)};function Lp(r,d){if(d)return r.slice();var _=r.length,S=np?np(_):new r.constructor(_);return r.copy(S),S}function cc(r){var d=new r.constructor(r.byteLength);return new wa(d).set(new wa(r)),d}function QE(r,d){var _=d?cc(r.buffer):r.buffer;return new r.constructor(_,r.byteOffset,r.byteLength)}function ZE(r){var d=new r.constructor(r.source,pt.exec(r));return d.lastIndex=r.lastIndex,d}function JE(r){return zo?bt(zo.call(r)):{}}function Bp(r,d){var _=d?cc(r.buffer):r.buffer;return new r.constructor(_,r.byteOffset,r.length)}function Fp(r,d){if(r!==d){var _=r!==i,S=r===null,P=r===r,N=xr(r),H=d!==i,q=d===null,re=d===d,ye=xr(d);if(!q&&!ye&&!N&&r>d||N&&H&&re&&!q&&!ye||S&&H&&re||!_&&re||!P)return 1;if(!S&&!N&&!ye&&r<d||ye&&_&&P&&!S&&!N||q&&_&&P||!H&&P||!re)return-1}return 0}function eO(r,d,_){for(var S=-1,P=r.criteria,N=d.criteria,H=P.length,q=_.length;++S<H;){var re=Fp(P[S],N[S]);if(re){if(S>=q)return re;var ye=_[S];return re*(ye=="desc"?-1:1)}}return r.index-d.index}function Np(r,d,_,S){for(var P=-1,N=r.length,H=_.length,q=-1,re=d.length,ye=Vt(N-H,0),be=ge(re+ye),Ce=!S;++q<re;)be[q]=d[q];for(;++P<H;)(Ce||P<N)&&(be[_[P]]=r[P]);for(;ye--;)be[q++]=r[P++];return be}function Vp(r,d,_,S){for(var P=-1,N=r.length,H=-1,q=_.length,re=-1,ye=d.length,be=Vt(N-q,0),Ce=ge(be+ye),Me=!S;++P<be;)Ce[P]=r[P];for(var je=P;++re<ye;)Ce[je+re]=d[re];for(;++H<q;)(Me||P<N)&&(Ce[je+_[H]]=r[P++]);return Ce}function ur(r,d){var _=-1,S=r.length;for(d||(d=ge(S));++_<S;)d[_]=r[_];return d}function on(r,d,_,S){var P=!_;_||(_={});for(var N=-1,H=d.length;++N<H;){var q=d[N],re=S?S(_[q],r[q],q,_,r):i;re===i&&(re=r[q]),P?yn(_,q,re):Xo(_,q,re)}return _}function tO(r,d){return on(r,mc(r),d)}function rO(r,d){return on(r,Jp(r),d)}function La(r,d){return function(_,S){var P=Xe(_)?aT:SE,N=d?d():{};return P(_,r,Ne(S,2),N)}}function qi(r){return Ke(function(d,_){var S=-1,P=_.length,N=P>1?_[P-1]:i,H=P>2?_[2]:i;for(N=r.length>3&&typeof N=="function"?(P--,N):i,H&&nr(_[0],_[1],H)&&(N=P<3?i:N,P=1),d=bt(d);++S<P;){var q=_[S];q&&r(d,q,S,N)}return d})}function Up(r,d){return function(_,S){if(_==null)return _;if(!lr(_))return r(_,S);for(var P=_.length,N=d?P:-1,H=bt(_);(d?N--:++N<P)&&S(H[N],N,H)!==!1;);return _}}function Yp(r){return function(d,_,S){for(var P=-1,N=bt(d),H=S(d),q=H.length;q--;){var re=H[r?q:++P];if(_(N[re],re,N)===!1)break}return d}}function nO(r,d,_){var S=d&u,P=Qo(r);function N(){var H=this&&this!==zt&&this instanceof N?P:r;return H.apply(S?_:this,arguments)}return N}function Wp(r){return function(d){d=vt(d);var _=Yi(d)?Gr(d):i,S=_?_[0]:d.charAt(0),P=_?Nn(_,1).join(""):d.slice(1);return S[r]()+P}}function Ki(r){return function(d){return jl(Uv(Vv(d).replace(GS,"")),r,"")}}function Qo(r){return function(){var d=arguments;switch(d.length){case 0:return new r;case 1:return new r(d[0]);case 2:return new r(d[0],d[1]);case 3:return new r(d[0],d[1],d[2]);case 4:return new r(d[0],d[1],d[2],d[3]);case 5:return new r(d[0],d[1],d[2],d[3],d[4]);case 6:return new r(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new r(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var _=$i(r.prototype),S=r.apply(_,d);return Ot(S)?S:_}}function iO(r,d,_){var S=Qo(r);function P(){for(var N=arguments.length,H=ge(N),q=N,re=Qi(P);q--;)H[q]=arguments[q];var ye=N<3&&H[0]!==re&&H[N-1]!==re?[]:In(H,re);if(N-=ye.length,N<_)return $p(r,d,Ba,P.placeholder,i,H,ye,i,i,_-N);var be=this&&this!==zt&&this instanceof P?S:r;return _r(be,this,H)}return P}function Hp(r){return function(d,_,S){var P=bt(d);if(!lr(d)){var N=Ne(_,3);d=Yt(d),_=function(q){return N(P[q],q,P)}}var H=r(d,_,S);return H>-1?P[N?d[H]:H]:i}}function zp(r){return bn(function(d){var _=d.length,S=_,P=Ir.prototype.thru;for(r&&d.reverse();S--;){var N=d[S];if(typeof N!="function")throw new kr(C);if(P&&!H&&Ua(N)=="wrapper")var H=new Ir([],!0)}for(S=H?S:_;++S<_;){N=d[S];var q=Ua(N),re=q=="wrapper"?pc(N):i;re&&_c(re[0])&&re[1]==(T|m|b|M)&&!re[4].length&&re[9]==1?H=H[Ua(re[0])].apply(H,re[3]):H=N.length==1&&_c(N)?H[q]():H.thru(N)}return function(){var ye=arguments,be=ye[0];if(H&&ye.length==1&&Xe(be))return H.plant(be).value();for(var Ce=0,Me=_?d[Ce].apply(this,ye):be;++Ce<_;)Me=d[Ce].call(this,Me);return Me}})}function Ba(r,d,_,S,P,N,H,q,re,ye){var be=d&T,Ce=d&u,Me=d&p,je=d&(m|y),Ue=d&I,qe=Me?i:Qo(r);function Ye(){for(var Je=arguments.length,it=ge(Je),Cr=Je;Cr--;)it[Cr]=arguments[Cr];if(je)var ir=Qi(Ye),Sr=vT(it,ir);if(S&&(it=Np(it,S,P,je)),N&&(it=Vp(it,N,H,je)),Je-=Sr,je&&Je<ye){var Lt=In(it,ir);return $p(r,d,Ba,Ye.placeholder,_,it,Lt,q,re,ye-Je)}var Kr=Ce?_:this,Sn=Me?Kr[r]:r;return Je=it.length,q?it=SO(it,q):Ue&&Je>1&&it.reverse(),be&&re<Je&&(it.length=re),this&&this!==zt&&this instanceof Ye&&(Sn=qe||Qo(Sn)),Sn.apply(Kr,it)}return Ye}function Xp(r,d){return function(_,S){return RE(_,r,d(S),{})}}function Fa(r,d){return function(_,S){var P;if(_===i&&S===i)return d;if(_!==i&&(P=_),S!==i){if(P===i)return S;typeof _=="string"||typeof S=="string"?(_=wr(_),S=wr(S)):(_=Mp(_),S=Mp(S)),P=r(_,S)}return P}}function fc(r){return bn(function(d){return d=Tt(d,br(Ne())),Ke(function(_){var S=this;return r(d,function(P){return _r(P,S,_)})})})}function Na(r,d){d=d===i?" ":wr(d);var _=d.length;if(_<2)return _?ic(d,r):d;var S=ic(d,Ta(r/Wi(d)));return Yi(d)?Nn(Gr(S),0,r).join(""):S.slice(0,r)}function oO(r,d,_,S){var P=d&u,N=Qo(r);function H(){for(var q=-1,re=arguments.length,ye=-1,be=S.length,Ce=ge(be+re),Me=this&&this!==zt&&this instanceof H?N:r;++ye<be;)Ce[ye]=S[ye];for(;re--;)Ce[ye++]=arguments[++q];return _r(Me,P?_:this,Ce)}return H}function Gp(r){return function(d,_,S){return S&&typeof S!="number"&&nr(d,_,S)&&(_=S=i),d=Cn(d),_===i?(_=d,d=0):_=Cn(_),S=S===i?d<_?1:-1:Cn(S),HE(d,_,S,r)}}function Va(r){return function(d,_){return typeof d=="string"&&typeof _=="string"||(d=Fr(d),_=Fr(_)),r(d,_)}}function $p(r,d,_,S,P,N,H,q,re,ye){var be=d&m,Ce=be?H:i,Me=be?i:H,je=be?N:i,Ue=be?i:N;d|=be?b:x,d&=~(be?x:b),d&l||(d&=~(u|p));var qe=[r,d,P,je,Ce,Ue,Me,q,re,ye],Ye=_.apply(i,qe);return _c(r)&&sv(Ye,qe),Ye.placeholder=S,av(Ye,r,d)}function hc(r){var d=Nt[r];return function(_,S){if(_=Fr(_),S=S==null?0:Qt($e(S),292),S&&ap(_)){var P=(vt(_)+"e").split("e"),N=d(P[0]+"e"+(+P[1]+S));return P=(vt(N)+"e").split("e"),+(P[0]+"e"+(+P[1]-S))}return d(_)}}var sO=Xi&&1/pa(new Xi([,-0]))[1]==ce?function(r){return new Xi(r)}:Ic;function qp(r){return function(d){var _=Zt(d);return _==ie?Yl(d):_==xe?CT(d):pT(d,r(d))}}function _n(r,d,_,S,P,N,H,q){var re=d&p;if(!re&&typeof r!="function")throw new kr(C);var ye=S?S.length:0;if(ye||(d&=~(b|x),S=P=i),H=H===i?H:Vt($e(H),0),q=q===i?q:$e(q),ye-=P?P.length:0,d&x){var be=S,Ce=P;S=P=i}var Me=re?i:pc(r),je=[r,d,_,S,P,be,Ce,N,H,q];if(Me&&wO(je,Me),r=je[0],d=je[1],_=je[2],S=je[3],P=je[4],q=je[9]=je[9]===i?re?0:r.length:Vt(je[9]-ye,0),!q&&d&(m|y)&&(d&=~(m|y)),!d||d==u)var Ue=nO(r,d,_);else d==m||d==y?Ue=iO(r,d,q):(d==b||d==(u|b))&&!P.length?Ue=oO(r,d,_,S):Ue=Ba.apply(i,je);var qe=Me?Pp:sv;return av(qe(Ue,je),r,d)}function Kp(r,d,_,S){return r===i||qr(r,zi[_])&&!yt.call(S,_)?d:r}function Qp(r,d,_,S,P,N){return Ot(r)&&Ot(d)&&(N.set(d,r),ka(r,d,i,Qp,N),N.delete(d)),r}function aO(r){return es(r)?i:r}function Zp(r,d,_,S,P,N){var H=_&a,q=r.length,re=d.length;if(q!=re&&!(H&&re>q))return!1;var ye=N.get(r),be=N.get(d);if(ye&&be)return ye==d&&be==r;var Ce=-1,Me=!0,je=_&s?new gi:i;for(N.set(r,d),N.set(d,r);++Ce<q;){var Ue=r[Ce],qe=d[Ce];if(S)var Ye=H?S(qe,Ue,Ce,d,r,N):S(Ue,qe,Ce,r,d,N);if(Ye!==i){if(Ye)continue;Me=!1;break}if(je){if(!Ll(d,function(Je,it){if(!Vo(je,it)&&(Ue===Je||P(Ue,Je,_,S,N)))return je.push(it)})){Me=!1;break}}else if(!(Ue===qe||P(Ue,qe,_,S,N))){Me=!1;break}}return N.delete(r),N.delete(d),Me}function uO(r,d,_,S,P,N,H){switch(_){case Ge:if(r.byteLength!=d.byteLength||r.byteOffset!=d.byteOffset)return!1;r=r.buffer,d=d.buffer;case Ve:return!(r.byteLength!=d.byteLength||!N(new wa(r),new wa(d)));case V:case z:case ee:return qr(+r,+d);case J:return r.name==d.name&&r.message==d.message;case pe:case Ie:return r==d+"";case ie:var q=Yl;case xe:var re=S&a;if(q||(q=pa),r.size!=d.size&&!re)return!1;var ye=H.get(r);if(ye)return ye==d;S|=s,H.set(r,d);var be=Zp(q(r),q(d),S,P,N,H);return H.delete(r),be;case Pe:if(zo)return zo.call(r)==zo.call(d)}return!1}function lO(r,d,_,S,P,N){var H=_&a,q=dc(r),re=q.length,ye=dc(d),be=ye.length;if(re!=be&&!H)return!1;for(var Ce=re;Ce--;){var Me=q[Ce];if(!(H?Me in d:yt.call(d,Me)))return!1}var je=N.get(r),Ue=N.get(d);if(je&&Ue)return je==d&&Ue==r;var qe=!0;N.set(r,d),N.set(d,r);for(var Ye=H;++Ce<re;){Me=q[Ce];var Je=r[Me],it=d[Me];if(S)var Cr=H?S(it,Je,Me,d,r,N):S(Je,it,Me,r,d,N);if(!(Cr===i?Je===it||P(Je,it,_,S,N):Cr)){qe=!1;break}Ye||(Ye=Me=="constructor")}if(qe&&!Ye){var ir=r.constructor,Sr=d.constructor;ir!=Sr&&"constructor"in r&&"constructor"in d&&!(typeof ir=="function"&&ir instanceof ir&&typeof Sr=="function"&&Sr instanceof Sr)&&(qe=!1)}return N.delete(r),N.delete(d),qe}function bn(r){return wc(iv(r,i,dv),r+"")}function dc(r){return yp(r,Yt,mc)}function gc(r){return yp(r,cr,Jp)}var pc=Oa?function(r){return Oa.get(r)}:Ic;function Ua(r){for(var d=r.name+"",_=Gi[d],S=yt.call(Gi,d)?_.length:0;S--;){var P=_[S],N=P.func;if(N==null||N==r)return P.name}return d}function Qi(r){var d=yt.call(j,"placeholder")?j:r;return d.placeholder}function Ne(){var r=j.iteratee||Rc;return r=r===Rc?wp:r,arguments.length?r(arguments[0],arguments[1]):r}function Ya(r,d){var _=r.__data__;return mO(d)?_[typeof d=="string"?"string":"hash"]:_.map}function vc(r){for(var d=Yt(r),_=d.length;_--;){var S=d[_],P=r[S];d[_]=[S,P,rv(P)]}return d}function mi(r,d){var _=bT(r,d);return bp(_)?_:i}function cO(r){var d=yt.call(r,hi),_=r[hi];try{r[hi]=i;var S=!0}catch{}var P=_a.call(r);return S&&(d?r[hi]=_:delete r[hi]),P}var mc=Hl?function(r){return r==null?[]:(r=bt(r),Rn(Hl(r),function(d){return op.call(r,d)}))}:jc,Jp=Hl?function(r){for(var d=[];r;)kn(d,mc(r)),r=xa(r);return d}:jc,Zt=rr;(zl&&Zt(new zl(new ArrayBuffer(1)))!=Ge||Yo&&Zt(new Yo)!=ie||Xl&&Zt(Xl.resolve())!=de||Xi&&Zt(new Xi)!=xe||Wo&&Zt(new Wo)!=Ae)&&(Zt=function(r){var d=rr(r),_=d==ae?r.constructor:i,S=_?yi(_):"";if(S)switch(S){case XT:return Ge;case GT:return ie;case $T:return de;case qT:return xe;case KT:return Ae}return d});function fO(r,d,_){for(var S=-1,P=_.length;++S<P;){var N=_[S],H=N.size;switch(N.type){case"drop":r+=H;break;case"dropRight":d-=H;break;case"take":d=Qt(d,r+H);break;case"takeRight":r=Vt(r,d-H);break}}return{start:r,end:d}}function hO(r){var d=r.match(El);return d?d[1].split(G):[]}function ev(r,d,_){d=Fn(d,r);for(var S=-1,P=d.length,N=!1;++S<P;){var H=sn(d[S]);if(!(N=r!=null&&_(r,H)))break;r=r[H]}return N||++S!=P?N:(P=r==null?0:r.length,!!P&&qa(P)&&wn(H,P)&&(Xe(r)||_i(r)))}function dO(r){var d=r.length,_=new r.constructor(d);return d&&typeof r[0]=="string"&&yt.call(r,"index")&&(_.index=r.index,_.input=r.input),_}function tv(r){return typeof r.constructor=="function"&&!Zo(r)?$i(xa(r)):{}}function gO(r,d,_){var S=r.constructor;switch(d){case Ve:return cc(r);case V:case z:return new S(+r);case Ge:return QE(r,_);case et:case Mt:case _t:case yr:case zr:case Kt:case li:case Mn:case ci:return Bp(r,_);case ie:return new S;case ee:case Ie:return new S(r);case pe:return ZE(r);case xe:return new S;case Pe:return JE(r)}}function pO(r,d){var _=d.length;if(!_)return r;var S=_-1;return d[S]=(_>1?"& ":"")+d[S],d=d.join(_>2?", ":" "),r.replace(Tl,`{
/* [wrapped with `+d+`] */
`)}function vO(r){return Xe(r)||_i(r)||!!(sp&&r&&r[sp])}function wn(r,d){var _=typeof r;return d=d??_e,!!d&&(_=="number"||_!="symbol"&&Rt.test(r))&&r>-1&&r%1==0&&r<d}function nr(r,d,_){if(!Ot(_))return!1;var S=typeof d;return(S=="number"?lr(_)&&wn(d,_.length):S=="string"&&d in _)?qr(_[d],r):!1}function yc(r,d){if(Xe(r))return!1;var _=typeof r;return _=="number"||_=="symbol"||_=="boolean"||r==null||xr(r)?!0:la.test(r)||!ua.test(r)||d!=null&&r in bt(d)}function mO(r){var d=typeof r;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?r!=="__proto__":r===null}function _c(r){var d=Ua(r),_=j[d];if(typeof _!="function"||!(d in rt.prototype))return!1;if(r===_)return!0;var S=pc(_);return!!S&&r===S[0]}function yO(r){return!!rp&&rp in r}var _O=ma?xn:Lc;function Zo(r){var d=r&&r.constructor,_=typeof d=="function"&&d.prototype||zi;return r===_}function rv(r){return r===r&&!Ot(r)}function nv(r,d){return function(_){return _==null?!1:_[r]===d&&(d!==i||r in bt(_))}}function bO(r){var d=Ga(r,function(S){return _.size===g&&_.clear(),S}),_=d.cache;return d}function wO(r,d){var _=r[1],S=d[1],P=_|S,N=P<(u|p|T),H=S==T&&_==m||S==T&&_==M&&r[7].length<=d[8]||S==(T|M)&&d[7].length<=d[8]&&_==m;if(!(N||H))return r;S&u&&(r[2]=d[2],P|=_&u?0:l);var q=d[3];if(q){var re=r[3];r[3]=re?Np(re,q,d[4]):q,r[4]=re?In(r[3],o):d[4]}return q=d[5],q&&(re=r[5],r[5]=re?Vp(re,q,d[6]):q,r[6]=re?In(r[5],o):d[6]),q=d[7],q&&(r[7]=q),S&T&&(r[8]=r[8]==null?d[8]:Qt(r[8],d[8])),r[9]==null&&(r[9]=d[9]),r[0]=d[0],r[1]=P,r}function xO(r){var d=[];if(r!=null)for(var _ in bt(r))d.push(_);return d}function CO(r){return _a.call(r)}function iv(r,d,_){return d=Vt(d===i?r.length-1:d,0),function(){for(var S=arguments,P=-1,N=Vt(S.length-d,0),H=ge(N);++P<N;)H[P]=S[d+P];P=-1;for(var q=ge(d+1);++P<d;)q[P]=S[P];return q[d]=_(H),_r(r,this,q)}}function ov(r,d){return d.length<2?r:vi(r,Lr(d,0,-1))}function SO(r,d){for(var _=r.length,S=Qt(d.length,_),P=ur(r);S--;){var N=d[S];r[S]=wn(N,_)?P[N]:i}return r}function bc(r,d){if(!(d==="constructor"&&typeof r[d]=="function")&&d!="__proto__")return r[d]}var sv=uv(Pp),Jo=NT||function(r,d){return zt.setTimeout(r,d)},wc=uv(GE);function av(r,d,_){var S=d+"";return wc(r,pO(S,TO(hO(S),_)))}function uv(r){var d=0,_=0;return function(){var S=WT(),P=$-(S-_);if(_=S,P>0){if(++d>=K)return arguments[0]}else d=0;return r.apply(i,arguments)}}function Wa(r,d){var _=-1,S=r.length,P=S-1;for(d=d===i?S:d;++_<d;){var N=nc(_,P),H=r[N];r[N]=r[_],r[_]=H}return r.length=d,r}var lv=bO(function(r){var d=[];return r.charCodeAt(0)===46&&d.push(""),r.replace(Cl,function(_,S,P,N){d.push(P?N.replace(He,"$1"):S||_)}),d});function sn(r){if(typeof r=="string"||xr(r))return r;var d=r+"";return d=="0"&&1/r==-ce?"-0":d}function yi(r){if(r!=null){try{return ya.call(r)}catch{}try{return r+""}catch{}}return""}function TO(r,d){return Rr(L,function(_){var S="_."+_[0];d&_[1]&&!da(r,S)&&r.push(S)}),r.sort()}function cv(r){if(r instanceof rt)return r.clone();var d=new Ir(r.__wrapped__,r.__chain__);return d.__actions__=ur(r.__actions__),d.__index__=r.__index__,d.__values__=r.__values__,d}function EO(r,d,_){(_?nr(r,d,_):d===i)?d=1:d=Vt($e(d),0);var S=r==null?0:r.length;if(!S||d<1)return[];for(var P=0,N=0,H=ge(Ta(S/d));P<S;)H[N++]=Lr(r,P,P+=d);return H}function OO(r){for(var d=-1,_=r==null?0:r.length,S=0,P=[];++d<_;){var N=r[d];N&&(P[S++]=N)}return P}function AO(){var r=arguments.length;if(!r)return[];for(var d=ge(r-1),_=arguments[0],S=r;S--;)d[S-1]=arguments[S];return kn(Xe(_)?ur(_):[_],Xt(d,1))}var PO=Ke(function(r,d){return jt(r)?Go(r,Xt(d,1,jt,!0)):[]}),DO=Ke(function(r,d){var _=Br(d);return jt(_)&&(_=i),jt(r)?Go(r,Xt(d,1,jt,!0),Ne(_,2)):[]}),MO=Ke(function(r,d){var _=Br(d);return jt(_)&&(_=i),jt(r)?Go(r,Xt(d,1,jt,!0),i,_):[]});function RO(r,d,_){var S=r==null?0:r.length;return S?(d=_||d===i?1:$e(d),Lr(r,d<0?0:d,S)):[]}function kO(r,d,_){var S=r==null?0:r.length;return S?(d=_||d===i?1:$e(d),d=S-d,Lr(r,0,d<0?0:d)):[]}function IO(r,d){return r&&r.length?ja(r,Ne(d,3),!0,!0):[]}function jO(r,d){return r&&r.length?ja(r,Ne(d,3),!0):[]}function LO(r,d,_,S){var P=r==null?0:r.length;return P?(_&&typeof _!="number"&&nr(r,d,_)&&(_=0,S=P),AE(r,d,_,S)):[]}function fv(r,d,_){var S=r==null?0:r.length;if(!S)return-1;var P=_==null?0:$e(_);return P<0&&(P=Vt(S+P,0)),ga(r,Ne(d,3),P)}function hv(r,d,_){var S=r==null?0:r.length;if(!S)return-1;var P=S-1;return _!==i&&(P=$e(_),P=_<0?Vt(S+P,0):Qt(P,S-1)),ga(r,Ne(d,3),P,!0)}function dv(r){var d=r==null?0:r.length;return d?Xt(r,1):[]}function BO(r){var d=r==null?0:r.length;return d?Xt(r,ce):[]}function FO(r,d){var _=r==null?0:r.length;return _?(d=d===i?1:$e(d),Xt(r,d)):[]}function NO(r){for(var d=-1,_=r==null?0:r.length,S={};++d<_;){var P=r[d];S[P[0]]=P[1]}return S}function gv(r){return r&&r.length?r[0]:i}function VO(r,d,_){var S=r==null?0:r.length;if(!S)return-1;var P=_==null?0:$e(_);return P<0&&(P=Vt(S+P,0)),Ui(r,d,P)}function UO(r){var d=r==null?0:r.length;return d?Lr(r,0,-1):[]}var YO=Ke(function(r){var d=Tt(r,uc);return d.length&&d[0]===r[0]?Zl(d):[]}),WO=Ke(function(r){var d=Br(r),_=Tt(r,uc);return d===Br(_)?d=i:_.pop(),_.length&&_[0]===r[0]?Zl(_,Ne(d,2)):[]}),HO=Ke(function(r){var d=Br(r),_=Tt(r,uc);return d=typeof d=="function"?d:i,d&&_.pop(),_.length&&_[0]===r[0]?Zl(_,i,d):[]});function zO(r,d){return r==null?"":UT.call(r,d)}function Br(r){var d=r==null?0:r.length;return d?r[d-1]:i}function XO(r,d,_){var S=r==null?0:r.length;if(!S)return-1;var P=S;return _!==i&&(P=$e(_),P=P<0?Vt(S+P,0):Qt(P,S-1)),d===d?TT(r,d,P):ga(r,$g,P,!0)}function GO(r,d){return r&&r.length?Tp(r,$e(d)):i}var $O=Ke(pv);function pv(r,d){return r&&r.length&&d&&d.length?rc(r,d):r}function qO(r,d,_){return r&&r.length&&d&&d.length?rc(r,d,Ne(_,2)):r}function KO(r,d,_){return r&&r.length&&d&&d.length?rc(r,d,i,_):r}var QO=bn(function(r,d){var _=r==null?0:r.length,S=$l(r,d);return Ap(r,Tt(d,function(P){return wn(P,_)?+P:P}).sort(Fp)),S});function ZO(r,d){var _=[];if(!(r&&r.length))return _;var S=-1,P=[],N=r.length;for(d=Ne(d,3);++S<N;){var H=r[S];d(H,S,r)&&(_.push(H),P.push(S))}return Ap(r,P),_}function xc(r){return r==null?r:zT.call(r)}function JO(r,d,_){var S=r==null?0:r.length;return S?(_&&typeof _!="number"&&nr(r,d,_)?(d=0,_=S):(d=d==null?0:$e(d),_=_===i?S:$e(_)),Lr(r,d,_)):[]}function e2(r,d){return Ia(r,d)}function t2(r,d,_){return oc(r,d,Ne(_,2))}function r2(r,d){var _=r==null?0:r.length;if(_){var S=Ia(r,d);if(S<_&&qr(r[S],d))return S}return-1}function n2(r,d){return Ia(r,d,!0)}function i2(r,d,_){return oc(r,d,Ne(_,2),!0)}function o2(r,d){var _=r==null?0:r.length;if(_){var S=Ia(r,d,!0)-1;if(qr(r[S],d))return S}return-1}function s2(r){return r&&r.length?Dp(r):[]}function a2(r,d){return r&&r.length?Dp(r,Ne(d,2)):[]}function u2(r){var d=r==null?0:r.length;return d?Lr(r,1,d):[]}function l2(r,d,_){return r&&r.length?(d=_||d===i?1:$e(d),Lr(r,0,d<0?0:d)):[]}function c2(r,d,_){var S=r==null?0:r.length;return S?(d=_||d===i?1:$e(d),d=S-d,Lr(r,d<0?0:d,S)):[]}function f2(r,d){return r&&r.length?ja(r,Ne(d,3),!1,!0):[]}function h2(r,d){return r&&r.length?ja(r,Ne(d,3)):[]}var d2=Ke(function(r){return Bn(Xt(r,1,jt,!0))}),g2=Ke(function(r){var d=Br(r);return jt(d)&&(d=i),Bn(Xt(r,1,jt,!0),Ne(d,2))}),p2=Ke(function(r){var d=Br(r);return d=typeof d=="function"?d:i,Bn(Xt(r,1,jt,!0),i,d)});function v2(r){return r&&r.length?Bn(r):[]}function m2(r,d){return r&&r.length?Bn(r,Ne(d,2)):[]}function y2(r,d){return d=typeof d=="function"?d:i,r&&r.length?Bn(r,i,d):[]}function Cc(r){if(!(r&&r.length))return[];var d=0;return r=Rn(r,function(_){if(jt(_))return d=Vt(_.length,d),!0}),Vl(d,function(_){return Tt(r,Bl(_))})}function vv(r,d){if(!(r&&r.length))return[];var _=Cc(r);return d==null?_:Tt(_,function(S){return _r(d,i,S)})}var _2=Ke(function(r,d){return jt(r)?Go(r,d):[]}),b2=Ke(function(r){return ac(Rn(r,jt))}),w2=Ke(function(r){var d=Br(r);return jt(d)&&(d=i),ac(Rn(r,jt),Ne(d,2))}),x2=Ke(function(r){var d=Br(r);return d=typeof d=="function"?d:i,ac(Rn(r,jt),i,d)}),C2=Ke(Cc);function S2(r,d){return Ip(r||[],d||[],Xo)}function T2(r,d){return Ip(r||[],d||[],Ko)}var E2=Ke(function(r){var d=r.length,_=d>1?r[d-1]:i;return _=typeof _=="function"?(r.pop(),_):i,vv(r,_)});function mv(r){var d=j(r);return d.__chain__=!0,d}function O2(r,d){return d(r),r}function Ha(r,d){return d(r)}var A2=bn(function(r){var d=r.length,_=d?r[0]:0,S=this.__wrapped__,P=function(N){return $l(N,r)};return d>1||this.__actions__.length||!(S instanceof rt)||!wn(_)?this.thru(P):(S=S.slice(_,+_+(d?1:0)),S.__actions__.push({func:Ha,args:[P],thisArg:i}),new Ir(S,this.__chain__).thru(function(N){return d&&!N.length&&N.push(i),N}))});function P2(){return mv(this)}function D2(){return new Ir(this.value(),this.__chain__)}function M2(){this.__values__===i&&(this.__values__=Mv(this.value()));var r=this.__index__>=this.__values__.length,d=r?i:this.__values__[this.__index__++];return{done:r,value:d}}function R2(){return this}function k2(r){for(var d,_=this;_ instanceof Pa;){var S=cv(_);S.__index__=0,S.__values__=i,d?P.__wrapped__=S:d=S;var P=S;_=_.__wrapped__}return P.__wrapped__=r,d}function I2(){var r=this.__wrapped__;if(r instanceof rt){var d=r;return this.__actions__.length&&(d=new rt(this)),d=d.reverse(),d.__actions__.push({func:Ha,args:[xc],thisArg:i}),new Ir(d,this.__chain__)}return this.thru(xc)}function j2(){return kp(this.__wrapped__,this.__actions__)}var L2=La(function(r,d,_){yt.call(r,_)?++r[_]:yn(r,_,1)});function B2(r,d,_){var S=Xe(r)?Xg:OE;return _&&nr(r,d,_)&&(d=i),S(r,Ne(d,3))}function F2(r,d){var _=Xe(r)?Rn:vp;return _(r,Ne(d,3))}var N2=Hp(fv),V2=Hp(hv);function U2(r,d){return Xt(za(r,d),1)}function Y2(r,d){return Xt(za(r,d),ce)}function W2(r,d,_){return _=_===i?1:$e(_),Xt(za(r,d),_)}function yv(r,d){var _=Xe(r)?Rr:Ln;return _(r,Ne(d,3))}function _v(r,d){var _=Xe(r)?uT:pp;return _(r,Ne(d,3))}var H2=La(function(r,d,_){yt.call(r,_)?r[_].push(d):yn(r,_,[d])});function z2(r,d,_,S){r=lr(r)?r:Ji(r),_=_&&!S?$e(_):0;var P=r.length;return _<0&&(_=Vt(P+_,0)),Ka(r)?_<=P&&r.indexOf(d,_)>-1:!!P&&Ui(r,d,_)>-1}var X2=Ke(function(r,d,_){var S=-1,P=typeof d=="function",N=lr(r)?ge(r.length):[];return Ln(r,function(H){N[++S]=P?_r(d,H,_):$o(H,d,_)}),N}),G2=La(function(r,d,_){yn(r,_,d)});function za(r,d){var _=Xe(r)?Tt:xp;return _(r,Ne(d,3))}function $2(r,d,_,S){return r==null?[]:(Xe(d)||(d=d==null?[]:[d]),_=S?i:_,Xe(_)||(_=_==null?[]:[_]),Ep(r,d,_))}var q2=La(function(r,d,_){r[_?0:1].push(d)},function(){return[[],[]]});function K2(r,d,_){var S=Xe(r)?jl:Kg,P=arguments.length<3;return S(r,Ne(d,4),_,P,Ln)}function Q2(r,d,_){var S=Xe(r)?lT:Kg,P=arguments.length<3;return S(r,Ne(d,4),_,P,pp)}function Z2(r,d){var _=Xe(r)?Rn:vp;return _(r,$a(Ne(d,3)))}function J2(r){var d=Xe(r)?fp:zE;return d(r)}function eA(r,d,_){(_?nr(r,d,_):d===i)?d=1:d=$e(d);var S=Xe(r)?xE:XE;return S(r,d)}function tA(r){var d=Xe(r)?CE:$E;return d(r)}function rA(r){if(r==null)return 0;if(lr(r))return Ka(r)?Wi(r):r.length;var d=Zt(r);return d==ie||d==xe?r.size:ec(r).length}function nA(r,d,_){var S=Xe(r)?Ll:qE;return _&&nr(r,d,_)&&(d=i),S(r,Ne(d,3))}var iA=Ke(function(r,d){if(r==null)return[];var _=d.length;return _>1&&nr(r,d[0],d[1])?d=[]:_>2&&nr(d[0],d[1],d[2])&&(d=[d[0]]),Ep(r,Xt(d,1),[])}),Xa=FT||function(){return zt.Date.now()};function oA(r,d){if(typeof d!="function")throw new kr(C);return r=$e(r),function(){if(--r<1)return d.apply(this,arguments)}}function bv(r,d,_){return d=_?i:d,d=r&&d==null?r.length:d,_n(r,T,i,i,i,i,d)}function wv(r,d){var _;if(typeof d!="function")throw new kr(C);return r=$e(r),function(){return--r>0&&(_=d.apply(this,arguments)),r<=1&&(d=i),_}}var Sc=Ke(function(r,d,_){var S=u;if(_.length){var P=In(_,Qi(Sc));S|=b}return _n(r,S,d,_,P)}),xv=Ke(function(r,d,_){var S=u|p;if(_.length){var P=In(_,Qi(xv));S|=b}return _n(d,S,r,_,P)});function Cv(r,d,_){d=_?i:d;var S=_n(r,m,i,i,i,i,i,d);return S.placeholder=Cv.placeholder,S}function Sv(r,d,_){d=_?i:d;var S=_n(r,y,i,i,i,i,i,d);return S.placeholder=Sv.placeholder,S}function Tv(r,d,_){var S,P,N,H,q,re,ye=0,be=!1,Ce=!1,Me=!0;if(typeof r!="function")throw new kr(C);d=Fr(d)||0,Ot(_)&&(be=!!_.leading,Ce="maxWait"in _,N=Ce?Vt(Fr(_.maxWait)||0,d):N,Me="trailing"in _?!!_.trailing:Me);function je(Lt){var Kr=S,Sn=P;return S=P=i,ye=Lt,H=r.apply(Sn,Kr),H}function Ue(Lt){return ye=Lt,q=Jo(Je,d),be?je(Lt):H}function qe(Lt){var Kr=Lt-re,Sn=Lt-ye,Hv=d-Kr;return Ce?Qt(Hv,N-Sn):Hv}function Ye(Lt){var Kr=Lt-re,Sn=Lt-ye;return re===i||Kr>=d||Kr<0||Ce&&Sn>=N}function Je(){var Lt=Xa();if(Ye(Lt))return it(Lt);q=Jo(Je,qe(Lt))}function it(Lt){return q=i,Me&&S?je(Lt):(S=P=i,H)}function Cr(){q!==i&&jp(q),ye=0,S=re=P=q=i}function ir(){return q===i?H:it(Xa())}function Sr(){var Lt=Xa(),Kr=Ye(Lt);if(S=arguments,P=this,re=Lt,Kr){if(q===i)return Ue(re);if(Ce)return jp(q),q=Jo(Je,d),je(re)}return q===i&&(q=Jo(Je,d)),H}return Sr.cancel=Cr,Sr.flush=ir,Sr}var sA=Ke(function(r,d){return gp(r,1,d)}),aA=Ke(function(r,d,_){return gp(r,Fr(d)||0,_)});function uA(r){return _n(r,I)}function Ga(r,d){if(typeof r!="function"||d!=null&&typeof d!="function")throw new kr(C);var _=function(){var S=arguments,P=d?d.apply(this,S):S[0],N=_.cache;if(N.has(P))return N.get(P);var H=r.apply(this,S);return _.cache=N.set(P,H)||N,H};return _.cache=new(Ga.Cache||mn),_}Ga.Cache=mn;function $a(r){if(typeof r!="function")throw new kr(C);return function(){var d=arguments;switch(d.length){case 0:return!r.call(this);case 1:return!r.call(this,d[0]);case 2:return!r.call(this,d[0],d[1]);case 3:return!r.call(this,d[0],d[1],d[2])}return!r.apply(this,d)}}function lA(r){return wv(2,r)}var cA=KE(function(r,d){d=d.length==1&&Xe(d[0])?Tt(d[0],br(Ne())):Tt(Xt(d,1),br(Ne()));var _=d.length;return Ke(function(S){for(var P=-1,N=Qt(S.length,_);++P<N;)S[P]=d[P].call(this,S[P]);return _r(r,this,S)})}),Tc=Ke(function(r,d){var _=In(d,Qi(Tc));return _n(r,b,i,d,_)}),Ev=Ke(function(r,d){var _=In(d,Qi(Ev));return _n(r,x,i,d,_)}),fA=bn(function(r,d){return _n(r,M,i,i,i,d)});function hA(r,d){if(typeof r!="function")throw new kr(C);return d=d===i?d:$e(d),Ke(r,d)}function dA(r,d){if(typeof r!="function")throw new kr(C);return d=d==null?0:Vt($e(d),0),Ke(function(_){var S=_[d],P=Nn(_,0,d);return S&&kn(P,S),_r(r,this,P)})}function gA(r,d,_){var S=!0,P=!0;if(typeof r!="function")throw new kr(C);return Ot(_)&&(S="leading"in _?!!_.leading:S,P="trailing"in _?!!_.trailing:P),Tv(r,d,{leading:S,maxWait:d,trailing:P})}function pA(r){return bv(r,1)}function vA(r,d){return Tc(lc(d),r)}function mA(){if(!arguments.length)return[];var r=arguments[0];return Xe(r)?r:[r]}function yA(r){return jr(r,n)}function _A(r,d){return d=typeof d=="function"?d:i,jr(r,n,d)}function bA(r){return jr(r,h|n)}function wA(r,d){return d=typeof d=="function"?d:i,jr(r,h|n,d)}function xA(r,d){return d==null||dp(r,d,Yt(d))}function qr(r,d){return r===d||r!==r&&d!==d}var CA=Va(Ql),SA=Va(function(r,d){return r>=d}),_i=_p(function(){return arguments}())?_p:function(r){return kt(r)&&yt.call(r,"callee")&&!op.call(r,"callee")},Xe=ge.isArray,TA=Vg?br(Vg):kE;function lr(r){return r!=null&&qa(r.length)&&!xn(r)}function jt(r){return kt(r)&&lr(r)}function EA(r){return r===!0||r===!1||kt(r)&&rr(r)==V}var Vn=VT||Lc,OA=Ug?br(Ug):IE;function AA(r){return kt(r)&&r.nodeType===1&&!es(r)}function PA(r){if(r==null)return!0;if(lr(r)&&(Xe(r)||typeof r=="string"||typeof r.splice=="function"||Vn(r)||Zi(r)||_i(r)))return!r.length;var d=Zt(r);if(d==ie||d==xe)return!r.size;if(Zo(r))return!ec(r).length;for(var _ in r)if(yt.call(r,_))return!1;return!0}function DA(r,d){return qo(r,d)}function MA(r,d,_){_=typeof _=="function"?_:i;var S=_?_(r,d):i;return S===i?qo(r,d,i,_):!!S}function Ec(r){if(!kt(r))return!1;var d=rr(r);return d==J||d==Z||typeof r.message=="string"&&typeof r.name=="string"&&!es(r)}function RA(r){return typeof r=="number"&&ap(r)}function xn(r){if(!Ot(r))return!1;var d=rr(r);return d==Y||d==he||d==k||d==ue}function Ov(r){return typeof r=="number"&&r==$e(r)}function qa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=_e}function Ot(r){var d=typeof r;return r!=null&&(d=="object"||d=="function")}function kt(r){return r!=null&&typeof r=="object"}var Av=Yg?br(Yg):LE;function kA(r,d){return r===d||Jl(r,d,vc(d))}function IA(r,d,_){return _=typeof _=="function"?_:i,Jl(r,d,vc(d),_)}function jA(r){return Pv(r)&&r!=+r}function LA(r){if(_O(r))throw new ze(w);return bp(r)}function BA(r){return r===null}function FA(r){return r==null}function Pv(r){return typeof r=="number"||kt(r)&&rr(r)==ee}function es(r){if(!kt(r)||rr(r)!=ae)return!1;var d=xa(r);if(d===null)return!0;var _=yt.call(d,"constructor")&&d.constructor;return typeof _=="function"&&_ instanceof _&&ya.call(_)==IT}var Oc=Wg?br(Wg):BE;function NA(r){return Ov(r)&&r>=-_e&&r<=_e}var Dv=Hg?br(Hg):FE;function Ka(r){return typeof r=="string"||!Xe(r)&&kt(r)&&rr(r)==Ie}function xr(r){return typeof r=="symbol"||kt(r)&&rr(r)==Pe}var Zi=zg?br(zg):NE;function VA(r){return r===i}function UA(r){return kt(r)&&Zt(r)==Ae}function YA(r){return kt(r)&&rr(r)==Fe}var WA=Va(tc),HA=Va(function(r,d){return r<=d});function Mv(r){if(!r)return[];if(lr(r))return Ka(r)?Gr(r):ur(r);if(Uo&&r[Uo])return xT(r[Uo]());var d=Zt(r),_=d==ie?Yl:d==xe?pa:Ji;return _(r)}function Cn(r){if(!r)return r===0?r:0;if(r=Fr(r),r===ce||r===-ce){var d=r<0?-1:1;return d*Oe}return r===r?r:0}function $e(r){var d=Cn(r),_=d%1;return d===d?_?d-_:d:0}function Rv(r){return r?pi($e(r),0,D):0}function Fr(r){if(typeof r=="number")return r;if(xr(r))return ne;if(Ot(r)){var d=typeof r.valueOf=="function"?r.valueOf():r;r=Ot(d)?d+"":d}if(typeof r!="string")return r===0?r:+r;r=Qg(r);var _=Ze.test(r);return _||Et.test(r)?oT(r.slice(2),_?2:8):tt.test(r)?ne:+r}function kv(r){return on(r,cr(r))}function zA(r){return r?pi($e(r),-_e,_e):r===0?r:0}function vt(r){return r==null?"":wr(r)}var XA=qi(function(r,d){if(Zo(d)||lr(d)){on(d,Yt(d),r);return}for(var _ in d)yt.call(d,_)&&Xo(r,_,d[_])}),Iv=qi(function(r,d){on(d,cr(d),r)}),Qa=qi(function(r,d,_,S){on(d,cr(d),r,S)}),GA=qi(function(r,d,_,S){on(d,Yt(d),r,S)}),$A=bn($l);function qA(r,d){var _=$i(r);return d==null?_:hp(_,d)}var KA=Ke(function(r,d){r=bt(r);var _=-1,S=d.length,P=S>2?d[2]:i;for(P&&nr(d[0],d[1],P)&&(S=1);++_<S;)for(var N=d[_],H=cr(N),q=-1,re=H.length;++q<re;){var ye=H[q],be=r[ye];(be===i||qr(be,zi[ye])&&!yt.call(r,ye))&&(r[ye]=N[ye])}return r}),QA=Ke(function(r){return r.push(i,Qp),_r(jv,i,r)});function ZA(r,d){return Gg(r,Ne(d,3),nn)}function JA(r,d){return Gg(r,Ne(d,3),Kl)}function eP(r,d){return r==null?r:ql(r,Ne(d,3),cr)}function tP(r,d){return r==null?r:mp(r,Ne(d,3),cr)}function rP(r,d){return r&&nn(r,Ne(d,3))}function nP(r,d){return r&&Kl(r,Ne(d,3))}function iP(r){return r==null?[]:Ra(r,Yt(r))}function oP(r){return r==null?[]:Ra(r,cr(r))}function Ac(r,d,_){var S=r==null?i:vi(r,d);return S===i?_:S}function sP(r,d){return r!=null&&ev(r,d,PE)}function Pc(r,d){return r!=null&&ev(r,d,DE)}var aP=Xp(function(r,d,_){d!=null&&typeof d.toString!="function"&&(d=_a.call(d)),r[d]=_},Mc(fr)),uP=Xp(function(r,d,_){d!=null&&typeof d.toString!="function"&&(d=_a.call(d)),yt.call(r,d)?r[d].push(_):r[d]=[_]},Ne),lP=Ke($o);function Yt(r){return lr(r)?cp(r):ec(r)}function cr(r){return lr(r)?cp(r,!0):VE(r)}function cP(r,d){var _={};return d=Ne(d,3),nn(r,function(S,P,N){yn(_,d(S,P,N),S)}),_}function fP(r,d){var _={};return d=Ne(d,3),nn(r,function(S,P,N){yn(_,P,d(S,P,N))}),_}var hP=qi(function(r,d,_){ka(r,d,_)}),jv=qi(function(r,d,_,S){ka(r,d,_,S)}),dP=bn(function(r,d){var _={};if(r==null)return _;var S=!1;d=Tt(d,function(N){return N=Fn(N,r),S||(S=N.length>1),N}),on(r,gc(r),_),S&&(_=jr(_,h|c|n,aO));for(var P=d.length;P--;)sc(_,d[P]);return _});function gP(r,d){return Lv(r,$a(Ne(d)))}var pP=bn(function(r,d){return r==null?{}:YE(r,d)});function Lv(r,d){if(r==null)return{};var _=Tt(gc(r),function(S){return[S]});return d=Ne(d),Op(r,_,function(S,P){return d(S,P[0])})}function vP(r,d,_){d=Fn(d,r);var S=-1,P=d.length;for(P||(P=1,r=i);++S<P;){var N=r==null?i:r[sn(d[S])];N===i&&(S=P,N=_),r=xn(N)?N.call(r):N}return r}function mP(r,d,_){return r==null?r:Ko(r,d,_)}function yP(r,d,_,S){return S=typeof S=="function"?S:i,r==null?r:Ko(r,d,_,S)}var Bv=qp(Yt),Fv=qp(cr);function _P(r,d,_){var S=Xe(r),P=S||Vn(r)||Zi(r);if(d=Ne(d,4),_==null){var N=r&&r.constructor;P?_=S?new N:[]:Ot(r)?_=xn(N)?$i(xa(r)):{}:_={}}return(P?Rr:nn)(r,function(H,q,re){return d(_,H,q,re)}),_}function bP(r,d){return r==null?!0:sc(r,d)}function wP(r,d,_){return r==null?r:Rp(r,d,lc(_))}function xP(r,d,_,S){return S=typeof S=="function"?S:i,r==null?r:Rp(r,d,lc(_),S)}function Ji(r){return r==null?[]:Ul(r,Yt(r))}function CP(r){return r==null?[]:Ul(r,cr(r))}function SP(r,d,_){return _===i&&(_=d,d=i),_!==i&&(_=Fr(_),_=_===_?_:0),d!==i&&(d=Fr(d),d=d===d?d:0),pi(Fr(r),d,_)}function TP(r,d,_){return d=Cn(d),_===i?(_=d,d=0):_=Cn(_),r=Fr(r),ME(r,d,_)}function EP(r,d,_){if(_&&typeof _!="boolean"&&nr(r,d,_)&&(d=_=i),_===i&&(typeof d=="boolean"?(_=d,d=i):typeof r=="boolean"&&(_=r,r=i)),r===i&&d===i?(r=0,d=1):(r=Cn(r),d===i?(d=r,r=0):d=Cn(d)),r>d){var S=r;r=d,d=S}if(_||r%1||d%1){var P=up();return Qt(r+P*(d-r+iT("1e-"+((P+"").length-1))),d)}return nc(r,d)}var OP=Ki(function(r,d,_){return d=d.toLowerCase(),r+(_?Nv(d):d)});function Nv(r){return Dc(vt(r).toLowerCase())}function Vv(r){return r=vt(r),r&&r.replace(sr,mT).replace($S,"")}function AP(r,d,_){r=vt(r),d=wr(d);var S=r.length;_=_===i?S:pi($e(_),0,S);var P=_;return _-=d.length,_>=0&&r.slice(_,P)==d}function PP(r){return r=vt(r),r&&oa.test(r)?r.replace(Ni,yT):r}function DP(r){return r=vt(r),r&&ca.test(r)?r.replace(Fo,"\\$&"):r}var MP=Ki(function(r,d,_){return r+(_?"-":"")+d.toLowerCase()}),RP=Ki(function(r,d,_){return r+(_?" ":"")+d.toLowerCase()}),kP=Wp("toLowerCase");function IP(r,d,_){r=vt(r),d=$e(d);var S=d?Wi(r):0;if(!d||S>=d)return r;var P=(d-S)/2;return Na(Ea(P),_)+r+Na(Ta(P),_)}function jP(r,d,_){r=vt(r),d=$e(d);var S=d?Wi(r):0;return d&&S<d?r+Na(d-S,_):r}function LP(r,d,_){r=vt(r),d=$e(d);var S=d?Wi(r):0;return d&&S<d?Na(d-S,_)+r:r}function BP(r,d,_){return _||d==null?d=0:d&&(d=+d),HT(vt(r).replace(No,""),d||0)}function FP(r,d,_){return(_?nr(r,d,_):d===i)?d=1:d=$e(d),ic(vt(r),d)}function NP(){var r=arguments,d=vt(r[0]);return r.length<3?d:d.replace(r[1],r[2])}var VP=Ki(function(r,d,_){return r+(_?"_":"")+d.toLowerCase()});function UP(r,d,_){return _&&typeof _!="number"&&nr(r,d,_)&&(d=_=i),_=_===i?D:_>>>0,_?(r=vt(r),r&&(typeof d=="string"||d!=null&&!Oc(d))&&(d=wr(d),!d&&Yi(r))?Nn(Gr(r),0,_):r.split(d,_)):[]}var YP=Ki(function(r,d,_){return r+(_?" ":"")+Dc(d)});function WP(r,d,_){return r=vt(r),_=_==null?0:pi($e(_),0,r.length),d=wr(d),r.slice(_,_+d.length)==d}function HP(r,d,_){var S=j.templateSettings;_&&nr(r,d,_)&&(d=i),r=vt(r),d=Qa({},d,S,Kp);var P=Qa({},d.imports,S.imports,Kp),N=Yt(P),H=Ul(P,N),q,re,ye=0,be=d.interpolate||Xr,Ce="__p += '",Me=Wl((d.escape||Xr).source+"|"+be.source+"|"+(be===aa?ot:Xr).source+"|"+(d.evaluate||Xr).source+"|$","g"),je="//# sourceURL="+(yt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++JS+"]")+`
`;r.replace(Me,function(Ye,Je,it,Cr,ir,Sr){return it||(it=Cr),Ce+=r.slice(ye,Sr).replace(fa,_T),Je&&(q=!0,Ce+=`' +
__e(`+Je+`) +
'`),ir&&(re=!0,Ce+=`';
`+ir+`;
__p += '`),it&&(Ce+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),ye=Sr+Ye.length,Ye}),Ce+=`';
`;var Ue=yt.call(d,"variable")&&d.variable;if(!Ue)Ce=`with (obj) {
`+Ce+`
}
`;else if(De.test(Ue))throw new ze(E);Ce=(re?Ce.replace(jo,""):Ce).replace(Lo,"$1").replace(ia,"$1;"),Ce="function("+(Ue||"obj")+`) {
`+(Ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ce+`return __p
}`;var qe=Yv(function(){return at(N,je+"return "+Ce).apply(i,H)});if(qe.source=Ce,Ec(qe))throw qe;return qe}function zP(r){return vt(r).toLowerCase()}function XP(r){return vt(r).toUpperCase()}function GP(r,d,_){if(r=vt(r),r&&(_||d===i))return Qg(r);if(!r||!(d=wr(d)))return r;var S=Gr(r),P=Gr(d),N=Zg(S,P),H=Jg(S,P)+1;return Nn(S,N,H).join("")}function $P(r,d,_){if(r=vt(r),r&&(_||d===i))return r.slice(0,tp(r)+1);if(!r||!(d=wr(d)))return r;var S=Gr(r),P=Jg(S,Gr(d))+1;return Nn(S,0,P).join("")}function qP(r,d,_){if(r=vt(r),r&&(_||d===i))return r.replace(No,"");if(!r||!(d=wr(d)))return r;var S=Gr(r),P=Zg(S,Gr(d));return Nn(S,P).join("")}function KP(r,d){var _=R,S=W;if(Ot(d)){var P="separator"in d?d.separator:P;_="length"in d?$e(d.length):_,S="omission"in d?wr(d.omission):S}r=vt(r);var N=r.length;if(Yi(r)){var H=Gr(r);N=H.length}if(_>=N)return r;var q=_-Wi(S);if(q<1)return S;var re=H?Nn(H,0,q).join(""):r.slice(0,q);if(P===i)return re+S;if(H&&(q+=re.length-q),Oc(P)){if(r.slice(q).search(P)){var ye,be=re;for(P.global||(P=Wl(P.source,vt(pt.exec(P))+"g")),P.lastIndex=0;ye=P.exec(be);)var Ce=ye.index;re=re.slice(0,Ce===i?q:Ce)}}else if(r.indexOf(wr(P),q)!=q){var Me=re.lastIndexOf(P);Me>-1&&(re=re.slice(0,Me))}return re+S}function QP(r){return r=vt(r),r&&Bo.test(r)?r.replace(pn,ET):r}var ZP=Ki(function(r,d,_){return r+(_?" ":"")+d.toUpperCase()}),Dc=Wp("toUpperCase");function Uv(r,d,_){return r=vt(r),d=_?i:d,d===i?wT(r)?PT(r):hT(r):r.match(d)||[]}var Yv=Ke(function(r,d){try{return _r(r,i,d)}catch(_){return Ec(_)?_:new ze(_)}}),JP=bn(function(r,d){return Rr(d,function(_){_=sn(_),yn(r,_,Sc(r[_],r))}),r});function e3(r){var d=r==null?0:r.length,_=Ne();return r=d?Tt(r,function(S){if(typeof S[1]!="function")throw new kr(C);return[_(S[0]),S[1]]}):[],Ke(function(S){for(var P=-1;++P<d;){var N=r[P];if(_r(N[0],this,S))return _r(N[1],this,S)}})}function t3(r){return EE(jr(r,h))}function Mc(r){return function(){return r}}function r3(r,d){return r==null||r!==r?d:r}var n3=zp(),i3=zp(!0);function fr(r){return r}function Rc(r){return wp(typeof r=="function"?r:jr(r,h))}function o3(r){return Cp(jr(r,h))}function s3(r,d){return Sp(r,jr(d,h))}var a3=Ke(function(r,d){return function(_){return $o(_,r,d)}}),u3=Ke(function(r,d){return function(_){return $o(r,_,d)}});function kc(r,d,_){var S=Yt(d),P=Ra(d,S);_==null&&!(Ot(d)&&(P.length||!S.length))&&(_=d,d=r,r=this,P=Ra(d,Yt(d)));var N=!(Ot(_)&&"chain"in _)||!!_.chain,H=xn(r);return Rr(P,function(q){var re=d[q];r[q]=re,H&&(r.prototype[q]=function(){var ye=this.__chain__;if(N||ye){var be=r(this.__wrapped__),Ce=be.__actions__=ur(this.__actions__);return Ce.push({func:re,args:arguments,thisArg:r}),be.__chain__=ye,be}return re.apply(r,kn([this.value()],arguments))})}),r}function l3(){return zt._===this&&(zt._=jT),this}function Ic(){}function c3(r){return r=$e(r),Ke(function(d){return Tp(d,r)})}var f3=fc(Tt),h3=fc(Xg),d3=fc(Ll);function Wv(r){return yc(r)?Bl(sn(r)):WE(r)}function g3(r){return function(d){return r==null?i:vi(r,d)}}var p3=Gp(),v3=Gp(!0);function jc(){return[]}function Lc(){return!1}function m3(){return{}}function y3(){return""}function _3(){return!0}function b3(r,d){if(r=$e(r),r<1||r>_e)return[];var _=D,S=Qt(r,D);d=Ne(d),r-=D;for(var P=Vl(S,d);++_<r;)d(_);return P}function w3(r){return Xe(r)?Tt(r,sn):xr(r)?[r]:ur(lv(vt(r)))}function x3(r){var d=++kT;return vt(r)+d}var C3=Fa(function(r,d){return r+d},0),S3=hc("ceil"),T3=Fa(function(r,d){return r/d},1),E3=hc("floor");function O3(r){return r&&r.length?Ma(r,fr,Ql):i}function A3(r,d){return r&&r.length?Ma(r,Ne(d,2),Ql):i}function P3(r){return qg(r,fr)}function D3(r,d){return qg(r,Ne(d,2))}function M3(r){return r&&r.length?Ma(r,fr,tc):i}function R3(r,d){return r&&r.length?Ma(r,Ne(d,2),tc):i}var k3=Fa(function(r,d){return r*d},1),I3=hc("round"),j3=Fa(function(r,d){return r-d},0);function L3(r){return r&&r.length?Nl(r,fr):0}function B3(r,d){return r&&r.length?Nl(r,Ne(d,2)):0}return j.after=oA,j.ary=bv,j.assign=XA,j.assignIn=Iv,j.assignInWith=Qa,j.assignWith=GA,j.at=$A,j.before=wv,j.bind=Sc,j.bindAll=JP,j.bindKey=xv,j.castArray=mA,j.chain=mv,j.chunk=EO,j.compact=OO,j.concat=AO,j.cond=e3,j.conforms=t3,j.constant=Mc,j.countBy=L2,j.create=qA,j.curry=Cv,j.curryRight=Sv,j.debounce=Tv,j.defaults=KA,j.defaultsDeep=QA,j.defer=sA,j.delay=aA,j.difference=PO,j.differenceBy=DO,j.differenceWith=MO,j.drop=RO,j.dropRight=kO,j.dropRightWhile=IO,j.dropWhile=jO,j.fill=LO,j.filter=F2,j.flatMap=U2,j.flatMapDeep=Y2,j.flatMapDepth=W2,j.flatten=dv,j.flattenDeep=BO,j.flattenDepth=FO,j.flip=uA,j.flow=n3,j.flowRight=i3,j.fromPairs=NO,j.functions=iP,j.functionsIn=oP,j.groupBy=H2,j.initial=UO,j.intersection=YO,j.intersectionBy=WO,j.intersectionWith=HO,j.invert=aP,j.invertBy=uP,j.invokeMap=X2,j.iteratee=Rc,j.keyBy=G2,j.keys=Yt,j.keysIn=cr,j.map=za,j.mapKeys=cP,j.mapValues=fP,j.matches=o3,j.matchesProperty=s3,j.memoize=Ga,j.merge=hP,j.mergeWith=jv,j.method=a3,j.methodOf=u3,j.mixin=kc,j.negate=$a,j.nthArg=c3,j.omit=dP,j.omitBy=gP,j.once=lA,j.orderBy=$2,j.over=f3,j.overArgs=cA,j.overEvery=h3,j.overSome=d3,j.partial=Tc,j.partialRight=Ev,j.partition=q2,j.pick=pP,j.pickBy=Lv,j.property=Wv,j.propertyOf=g3,j.pull=$O,j.pullAll=pv,j.pullAllBy=qO,j.pullAllWith=KO,j.pullAt=QO,j.range=p3,j.rangeRight=v3,j.rearg=fA,j.reject=Z2,j.remove=ZO,j.rest=hA,j.reverse=xc,j.sampleSize=eA,j.set=mP,j.setWith=yP,j.shuffle=tA,j.slice=JO,j.sortBy=iA,j.sortedUniq=s2,j.sortedUniqBy=a2,j.split=UP,j.spread=dA,j.tail=u2,j.take=l2,j.takeRight=c2,j.takeRightWhile=f2,j.takeWhile=h2,j.tap=O2,j.throttle=gA,j.thru=Ha,j.toArray=Mv,j.toPairs=Bv,j.toPairsIn=Fv,j.toPath=w3,j.toPlainObject=kv,j.transform=_P,j.unary=pA,j.union=d2,j.unionBy=g2,j.unionWith=p2,j.uniq=v2,j.uniqBy=m2,j.uniqWith=y2,j.unset=bP,j.unzip=Cc,j.unzipWith=vv,j.update=wP,j.updateWith=xP,j.values=Ji,j.valuesIn=CP,j.without=_2,j.words=Uv,j.wrap=vA,j.xor=b2,j.xorBy=w2,j.xorWith=x2,j.zip=C2,j.zipObject=S2,j.zipObjectDeep=T2,j.zipWith=E2,j.entries=Bv,j.entriesIn=Fv,j.extend=Iv,j.extendWith=Qa,kc(j,j),j.add=C3,j.attempt=Yv,j.camelCase=OP,j.capitalize=Nv,j.ceil=S3,j.clamp=SP,j.clone=yA,j.cloneDeep=bA,j.cloneDeepWith=wA,j.cloneWith=_A,j.conformsTo=xA,j.deburr=Vv,j.defaultTo=r3,j.divide=T3,j.endsWith=AP,j.eq=qr,j.escape=PP,j.escapeRegExp=DP,j.every=B2,j.find=N2,j.findIndex=fv,j.findKey=ZA,j.findLast=V2,j.findLastIndex=hv,j.findLastKey=JA,j.floor=E3,j.forEach=yv,j.forEachRight=_v,j.forIn=eP,j.forInRight=tP,j.forOwn=rP,j.forOwnRight=nP,j.get=Ac,j.gt=CA,j.gte=SA,j.has=sP,j.hasIn=Pc,j.head=gv,j.identity=fr,j.includes=z2,j.indexOf=VO,j.inRange=TP,j.invoke=lP,j.isArguments=_i,j.isArray=Xe,j.isArrayBuffer=TA,j.isArrayLike=lr,j.isArrayLikeObject=jt,j.isBoolean=EA,j.isBuffer=Vn,j.isDate=OA,j.isElement=AA,j.isEmpty=PA,j.isEqual=DA,j.isEqualWith=MA,j.isError=Ec,j.isFinite=RA,j.isFunction=xn,j.isInteger=Ov,j.isLength=qa,j.isMap=Av,j.isMatch=kA,j.isMatchWith=IA,j.isNaN=jA,j.isNative=LA,j.isNil=FA,j.isNull=BA,j.isNumber=Pv,j.isObject=Ot,j.isObjectLike=kt,j.isPlainObject=es,j.isRegExp=Oc,j.isSafeInteger=NA,j.isSet=Dv,j.isString=Ka,j.isSymbol=xr,j.isTypedArray=Zi,j.isUndefined=VA,j.isWeakMap=UA,j.isWeakSet=YA,j.join=zO,j.kebabCase=MP,j.last=Br,j.lastIndexOf=XO,j.lowerCase=RP,j.lowerFirst=kP,j.lt=WA,j.lte=HA,j.max=O3,j.maxBy=A3,j.mean=P3,j.meanBy=D3,j.min=M3,j.minBy=R3,j.stubArray=jc,j.stubFalse=Lc,j.stubObject=m3,j.stubString=y3,j.stubTrue=_3,j.multiply=k3,j.nth=GO,j.noConflict=l3,j.noop=Ic,j.now=Xa,j.pad=IP,j.padEnd=jP,j.padStart=LP,j.parseInt=BP,j.random=EP,j.reduce=K2,j.reduceRight=Q2,j.repeat=FP,j.replace=NP,j.result=vP,j.round=I3,j.runInContext=te,j.sample=J2,j.size=rA,j.snakeCase=VP,j.some=nA,j.sortedIndex=e2,j.sortedIndexBy=t2,j.sortedIndexOf=r2,j.sortedLastIndex=n2,j.sortedLastIndexBy=i2,j.sortedLastIndexOf=o2,j.startCase=YP,j.startsWith=WP,j.subtract=j3,j.sum=L3,j.sumBy=B3,j.template=HP,j.times=b3,j.toFinite=Cn,j.toInteger=$e,j.toLength=Rv,j.toLower=zP,j.toNumber=Fr,j.toSafeInteger=zA,j.toString=vt,j.toUpper=XP,j.trim=GP,j.trimEnd=$P,j.trimStart=qP,j.truncate=KP,j.unescape=QP,j.uniqueId=x3,j.upperCase=ZP,j.upperFirst=Dc,j.each=yv,j.eachRight=_v,j.first=gv,kc(j,function(){var r={};return nn(j,function(d,_){yt.call(j.prototype,_)||(r[_]=d)}),r}(),{chain:!1}),j.VERSION=f,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){j[r].placeholder=j}),Rr(["drop","take"],function(r,d){rt.prototype[r]=function(_){_=_===i?1:Vt($e(_),0);var S=this.__filtered__&&!d?new rt(this):this.clone();return S.__filtered__?S.__takeCount__=Qt(_,S.__takeCount__):S.__views__.push({size:Qt(_,D),type:r+(S.__dir__<0?"Right":"")}),S},rt.prototype[r+"Right"]=function(_){return this.reverse()[r](_).reverse()}}),Rr(["filter","map","takeWhile"],function(r,d){var _=d+1,S=_==se||_==le;rt.prototype[r]=function(P){var N=this.clone();return N.__iteratees__.push({iteratee:Ne(P,3),type:_}),N.__filtered__=N.__filtered__||S,N}}),Rr(["head","last"],function(r,d){var _="take"+(d?"Right":"");rt.prototype[r]=function(){return this[_](1).value()[0]}}),Rr(["initial","tail"],function(r,d){var _="drop"+(d?"":"Right");rt.prototype[r]=function(){return this.__filtered__?new rt(this):this[_](1)}}),rt.prototype.compact=function(){return this.filter(fr)},rt.prototype.find=function(r){return this.filter(r).head()},rt.prototype.findLast=function(r){return this.reverse().find(r)},rt.prototype.invokeMap=Ke(function(r,d){return typeof r=="function"?new rt(this):this.map(function(_){return $o(_,r,d)})}),rt.prototype.reject=function(r){return this.filter($a(Ne(r)))},rt.prototype.slice=function(r,d){r=$e(r);var _=this;return _.__filtered__&&(r>0||d<0)?new rt(_):(r<0?_=_.takeRight(-r):r&&(_=_.drop(r)),d!==i&&(d=$e(d),_=d<0?_.dropRight(-d):_.take(d-r)),_)},rt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},rt.prototype.toArray=function(){return this.take(D)},nn(rt.prototype,function(r,d){var _=/^(?:filter|find|map|reject)|While$/.test(d),S=/^(?:head|last)$/.test(d),P=j[S?"take"+(d=="last"?"Right":""):d],N=S||/^find/.test(d);P&&(j.prototype[d]=function(){var H=this.__wrapped__,q=S?[1]:arguments,re=H instanceof rt,ye=q[0],be=re||Xe(H),Ce=function(Je){var it=P.apply(j,kn([Je],q));return S&&Me?it[0]:it};be&&_&&typeof ye=="function"&&ye.length!=1&&(re=be=!1);var Me=this.__chain__,je=!!this.__actions__.length,Ue=N&&!Me,qe=re&&!je;if(!N&&be){H=qe?H:new rt(this);var Ye=r.apply(H,q);return Ye.__actions__.push({func:Ha,args:[Ce],thisArg:i}),new Ir(Ye,Me)}return Ue&&qe?r.apply(this,q):(Ye=this.thru(Ce),Ue?S?Ye.value()[0]:Ye.value():Ye)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(r){var d=va[r],_=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",S=/^(?:pop|shift)$/.test(r);j.prototype[r]=function(){var P=arguments;if(S&&!this.__chain__){var N=this.value();return d.apply(Xe(N)?N:[],P)}return this[_](function(H){return d.apply(Xe(H)?H:[],P)})}}),nn(rt.prototype,function(r,d){var _=j[d];if(_){var S=_.name+"";yt.call(Gi,S)||(Gi[S]=[]),Gi[S].push({name:d,func:_})}}),Gi[Ba(i,p).name]=[{name:"wrapper",func:i}],rt.prototype.clone=QT,rt.prototype.reverse=ZT,rt.prototype.value=JT,j.prototype.at=A2,j.prototype.chain=P2,j.prototype.commit=D2,j.prototype.next=M2,j.prototype.plant=k2,j.prototype.reverse=I2,j.prototype.toJSON=j.prototype.valueOf=j.prototype.value=j2,j.prototype.first=j.prototype.head,Uo&&(j.prototype[Uo]=R2),j},Hi=DT();fi?((fi.exports=Hi)._=Hi,Rl._=Hi):zt._=Hi}).call(eo)}(qs,qs.exports);var Nw=qs.exports;const Vw=me.styled(me.Switch)(()=>`
  width: 32px;
  height: 20px;
  padding: 0;
  display: flex;
  margin-left: 12px;

  &:active {
    & .MuiSwitch-thumb {
      width: 19px;
    }
    & .MuiSwitch-switchBase.Mui-checked {
      transform: translateX(9px);
    }
  }
  & .MuiSwitch-switchBase {
    padding: 2px;
    &.Mui-checked {
      transform: translateX(12px);
      color: #fff;
      & + .MuiSwitch-track {
        opacity: 1;
        background-color: #2C62F6;
      }
    }
    &.Mui-disabled {
      color:#E6E6E6 !important;
    }
    &.Mui-checked.Mui-disabled+.MuiSwitch-track{
      opacity: 0.2;
      background-color: #BBBBBB;
    }
  }
  & .MuiSwitch-thumb {
    box-shadow: 0 2px 4px 0 rgb(0 35 11 / 20%);
    width: 16px;
    height: 16px;
    border-radius: 10;
  }
  & .MuiSwitch-track {
    border-radius: 12px;
    opacity: 1;
    background-color: #EEEEEE;
    box-sizing: border-box;
  }
`),Od=me.styled(me.FormControlLabel)(()=>`
  .MuiTypography-root  {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
    text-align: center;
    margin-bottom: 10px;
  }
`),Ad=me.styled(me.Radio)(()=>`
  padding: 0;
  color: #DEE2EC;

  &.Mui-checked {
    color: #DEE2EC;

    svg:nth-of-type(2) {
      color: #2C62F6;
      transform: scale(1.2);
    }
  }
`),Do=me.styled(me.Stack)(()=>`
  &.controller-wrapper {
    gap: 30px;
  }
  &.controller {
    gap: 10px;
  }
`),Pd=me.styled(me.MenuList)(()=>`
  background: #ffffff;
  border-radius: 4px;
  padding: 0;
`),Ks=me.styled(me.MenuItem)(()=>`
  min-height:40px !important; 

  .MuiTypography-root {
    font-size: 13px;
    font-weight: 400;
    line-height: 18.82px;
  }

`),Uw=me.styled(me.Popper)(()=>`
  &[data-popper-placement*="top"] {
    span.arrow {
      bottom: -10px;
    }
  }

  &[data-popper-placement*="bottom"] {
    span.arrow {
      top: -10px;

      svg {
        transform: scaleY(-100%);
      }
    }
  }
`),Yw=me.styled(me.Button)(()=>`
  padding: 0;
  font-size: 15px;
  font-weight: 700;
  line-height: 18.15px;
  color: #2C62F6;
  min-width: unset;
`),Ww=me.styled(me.Dialog)(()=>""),Hw=me.styled(me.DialogTitle)(()=>`
  padding: 12px 22px;
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #DEE2EC;
`),zw=me.styled(me.DialogContent)(()=>`
  padding: 30px 40px 46px !important;
`);class Xw{constructor(){Le(this,"toolbarVerticalPosition");Le(this,"saveToolbarVerticalPosition",e=>{this.toolbarVerticalPosition=e,localStorage.setItem("verticalPosition",e)});Le(this,"changeToolbarVerticalPosition",e=>{this.saveToolbarVerticalPosition(e)});L0(this);const e=localStorage.getItem("verticalPosition")??"bottom";this.toolbarVerticalPosition=e}}const ji=new Xw,Gw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMTSURBVHgB7Zx5jFXFnsd/t/t2Qzdrs68iyrixKeqgAupTXMFdXzTOZNSMos9JxsQY5w//eFETEydOZgxGE3XiOnEXExyf8nzijopGB0R2BNmlGwQamr7bnE81Bfeevkub96Tp4vtJbu6959SpU6fqW7/6VZ2qSuQiTIhAqDIhAkKCFkEhQYugSFoXY/fu3dazZ88D/7PZrK1fv94SiYT7pNNpGzJkiK1evdpGjRple/fudeH69u3rrq2urrbm5mb3vWvXLuvdu7f9/PPPduyxx1ptba3t27fPGhsbrb6+3n766ScbOnSobdu2zfr162dbtmyxwYMH26BBg9x9tm/fbn369HHHe/To4b5HjhxpO3bssGHDhrm0rVq1ygYOHGhVVW22g7RzXbdu3Vx6SCvneAbCcS332rx5sw0YMMCFJY0tLS1WU1NjdXV1B54jlUq5+/I8mUzGPSvx/fjjjy79xEPcPCfhfL5t3brV6DpxrzFjxti6devccxA+H+Lluq5ElxL0l19+aZ999pndddddBccp/IULF7rCo9AozLVr1zqBnHjiifbxxx/b2WefbUuWLLHTTjvN3njjDbv88svtnXfesYaGBieSNWvW2KWXXmorV660559/3mbMmGHffPONTZs2zebPn29XXHGFPf3003b77bc7QS9atMjFi+AREwIF7vvLL7/YxRdf7I6/8sorrqKce+65Lu3nn3++zZkzx66//nqbO3eu3XTTTda9e3cXbsSIEe76Y445xh1DoIjshx9+cM/GeQTGs/Kc3BNh79mzx6Vpw4YNLgzPMn36dPvggw/c81MZEPG1117r0sh9SRuV89tvv3UVhHyJC/qRRx6xG2+80VX2rkJRl2Pnzp3OAmG5oLW11Q4Hhg8f7go7HwoaS3XmmWdaMpl0Bbhp0yZXWFghChpLedRRRznry3GsEedGjx5t/fv3d9c0NTXZu+++ax9++KETIOJANAiLeyB6BMQxBIWYsapYQ/KLD9cRD7+pfMuXL3dWlfRhZY8++mhbvHixq4DEyQexUjn8fWhVsIyImXRh8bme1gexf/31106cY8eOdS0CxzlPeIRHa0Iaqcxcy3nSwH/SRTg+lCn5RV7wobLFmTBhgmvZDhfWbc1a486cbWzM2fL12aJhqv8YkX8AIb/22muumSLjaTqxHmSgbzY7C0Rx/PHHtztOWhELVodCv+yyy+z77793Vof/NN1YMQqbwiUcYiE+BI8lvuiii2zixIkuvpkzZ7rwuB5cy7NTIRAvoj3jjDNs8uTJ7hjxcH8Knw/pQGjnnHOOs95ULsJgHIjz6quvdtchKtKB5SYc6TzhhBPcPU8++WRnZal0HB83bpyrTAj2mmuucZUS0VMhuZY0cY77Xnjhhe45uRfpIhz/iYvKhgvE9eQjrQ9poeIhfuLLh/TQ2nUmrSmz2XPStvjHjK3eaJaJdPzah2lbui5n40dHhqZboiB8Ij4OjV9FU+z9Ph4eP46mmYIV4lDSmjZ785O0bW3KWfdIvCMHJmzVppwlI9s667L2HnM7k0sTg4XAumEVaM6o7ViTw8X1EEcOVZEBPmdCtf3+d0nr18tsYEPU+Y+Ot6SKvw9MlHtTiIjpdHRlqJCMePhOEE05TTOtDb4o/iYuAe4VTTMuCK0UrkmvXr2cC4avyTFaLfxx3AdGE+hM4dfD0qVLnT/uRydwKWjVaOZx22jlSAMuBR07OmD4t7gE+PYYEuImHPehY4kBwRVgtAUfnvMcI6z32enw8Qz8Bu/7kw5cCO7Hc3Ad7gW+elcF96O2Jhp9aTGrq6X/1D5M2VGOri5mQIwUKP4vIwAIiMLm94oVK5xgEBECxOf0guA4ImVkBH8T8dF5Ih4E7cXoBY2v/MUXX9jpp5/uRIQI8Wu/++47dz8EhZCpBHyoaAiMURXE6UVIuFNPPdUdp4XcuHGj86MRJ7aHuPHVqYx0kL1vznWIleuorFRO7ufPkw++cnVVEDP0KFMng3+xggXDQlOgWDgKlI4UVg6h54+zIh6srB8/RsAnnXSSs46IybtedJQIg2XFggMCZ4QCIVE5uAaDQMcK60l/BKuO6Lie39yP60kL4REi6UHgkyZNcvFj5Ukv1xEfwkeYpIWKQYfRW3wqCWnmGloJnpVrOM+HNIZO4kiYnERBA6KmUBEK1g+LjFA4jiVDVPwnPAL048v89v0HhMx/XBLiwaITjtEN7wLw7eMmnLeOCJd4CE8YxOyz3w/b+Rc2CJT4Eb+vNNzb3580kjZfsaicvp/Dc3AN4fyLJf5z3LsmoXJECFocOWguhwgKCVoERTKdMSGCIZmVBy0C4lfOtsvFvoX4LUnEvivTIUEnLBtp2M9ukpjFoSbBQH+kvMov+soLOhKxE7NELDqVSH/R6DKSzjGOkSg9llFS0IkcvcWsCXH4gKgzTty5RHFrXVTQnSFm3nwxh5nVFCwJYu4Cqz5OOeUUEx2DPPz888/tueeec5OpmDvNKhXeVuaiN4U7liyxzX+ZZ+ldu63/5Mk29Lzplki2SSDTvNIyOxZG4ZqtutdYq274+6iVP1xHdSPPAaNdRNSJfanCN4UJ5ysf2rE85iU89thj9vDDD7tZZh7mJTzwwAM2a9asI2Iewl/LV199Zdddd52bIwLk2ezZs+3WW2+1ncuW2qIHH7B9TY22/6Qd/4d/seGXzrBsa6PtW/2o5VI+7xNWO+xaS/afUvQ+/uVyR8vktwrfJujCSlekCla2zNzw17wxZxJNubieeeYZu//++wvEDPy/55577PHHHzdRmddff/2AmIG8feKJJ9zvrZ9+clDMbSdtzf+84H5mmj7LE7M7aamtf2oXP/ExV4T5KswR4dvPMymGn2fiw/O7lG44zlyU/Li5V1md5dprtap9gMpC/fTTT90yrY6AmB999FE31bIYTIN88skn3cN6mEDjl0Nx/KmnnnITdkpBIeKqlMtcDxnElM6OVEjuiRvEzLuOQL6wJpFrKsGMuhdffNFeeOEFtzaxEuTDRx995NYUlnpOJkTFQVSQjlrBOJlING2BiizciB0jHi8yhMd/0kG6ii384BzCxA3y4fMXi+RDWfh1kVxHWD/RinuWKquE6ywWijpmoSsX8ptvvukWiDJN8tlnn60YnuVcCJZV1MuWLWt3nvnFTO/0MM2R1ca4Gfh+wBzfUlYeMd93331u1lul+dtk1IMPPmhXXXWVvffee1YJ/FAEVK4y5cNK6wsuuMDuvvvuimGpJG+99Za9//779vbbb1cMT54Tt3MfospQDNYx+jzzsMYQGiZMPOAve4b87jz3XdV7QqSOwryr7ntqwX8v5DhejPmVjGOlrDHH4iIttxqKc+Use1yzyXIni8GURSbHMzWxlNXN56yzznJzeLEepWpyvnW++eabnTAuueSSA9M+i2Uk4JLccccdbqk9vmMln4tWhYWhLN0/7rjjrBJ0TFkEwIqWjkAHlnQXq7hxaIXoM7A6pSOCpjJ6V69U4ZIHVD7cDAwAC3+p7DBo2tlRZ3CXrX97bmSZ91rDuPE25pZ/dueqe/6d1Q69ytKNn0Rxt1p1j2OtZugVBffOLwMWPvhFD+BFndxfYfgdTyOWmemrXMM5yt11VvdfWw7uTbii5ct98g4nDx7PMZe04ksZ9q6gecdC33bbbVYJljQhIioCk9rjMAmdCsLIBhYWcSOMFt8cRjDBPX9zGQ8rPBA0BdeRDgcVhRaD/TU6ujzfb0DTEa688kqXfladV4L5zrgQpJvNXipBpWJrBIRRaiU2cdGy8Sl2bviMme5TjGT/qe5TDF+ZgO9XX33VLVzAKHjX0Fc07uPdHMCIYcxwJyhH34rmh8n/zSiN37aB1fVe9H4eeHtyBWI/MMqRwxeJhuuqDvFgAolhJ4WHHnqo6Hkqwp133unOa6SjMqlMyrY3N9me1j3WUN/Petf3tsR+K9WaytiWxmbbvafVBvWrt3596u1glqaj4t9pudbmyPtosETtQQOCNc03MLh5uD0IlSVn4Pcu8QsovNX1fjDliGHwZYhQOeZXAvkK43d1AoyhD+8XYsQhaDZ6g+jFnhci0SnvA0nwvffe69bNvfTSSwW1lUSywxAjHRJzZVrTrfb+knn2p0X/a7tadtmAngPsH8/6Jxs/cqK1tKbtpXeW2PNzF9n2X1qsf986++Md02zKKSPdtXvsc6trWWAta7fZvk0J6zn2VqsZ0rZjUrxvwn8Eyc4A+cd8GfltysCLOL9c8+PkHL+9D46I4xCm1J4wOSsc3isYh85EtTvZSWPp+OMvv/yyzZs3zy0ExQ1h2yya8a62v1pnsXTTDzb7z//lrLNnZL+R9m8z77PvV+ywu//9z7ar+WA/BlHP+c/rLFu3wxZn/9vGJoZYt811tvubZbZv2VYb+q//EXUk2zqZ+VY3DoLyax49fiOdYhCO8F6IiJ3wpfoGVIpSbl86S3wHO8IxG57Y749YSRBe/ho7Xn6Ug4fyQze+WSoGor3lllvshhtucOv7aI7YdqAUZDDx7dk/HEUmkXbW1sXhOJ0lwudnGhnptxOIp9mPJJAuriNNPGsx/5Xn8+OtWC4/RIWfHi8IP8ZKOPoF/lq+49f4dJMXXEM68n1JrBqdSs+G7RsKxAxNzdutaXejrf5pZ4GYoXHHXtvcuNuqhm2xTdnB1qdqnI2sGmDp3Tnbu2S5paN71wxss5g+TfnrIIG883vs5cMxnisuatKeL2Z/zIePx42bER+58bSFLbTABYLmVWcmm7ZkdWlFs6yfRDLCQITlOmQUAsNeDH8hEJbtT5kyxcrBGC6uB8N85QTNfnB0TNnOi7h5cNLE6944pHPBggVOkFh/Mg+h0qmkBYj7ZoiXjQ6pHHRauQfXT5061S2GjcNeHwgP39LvqUfa6NTEn4EhSITLeUYiSBPp95WTTSX91gjEwzZdfBM3lYlKQP6TdlaoM5TnaejREPWBItHnjc12r+lmfev72sB+GBSa/oOC6V5bbQP61ltrYoTtTdXYyqYhtuG7auu75kzrU9MQvQI/aKwoY0TtDQcf0pzvauTjReoX9vpjpcJTBn5hshc1YTlWSl88Svz1fEzQzK3zVqB4JCyPxzr7TzlIGA/FEA+1r9wbQ8/48ePd/haV9o9gqT6ZgDARBWkvdQ3Pg7+HKBiKI6xf0V0ss/zIDOFpUQjLdgalxrkJj/gpcNJFIZCWeEUhPxAllYpKwr399rj+fvktDOcJT1iu9RvlkB721ou/WZ0wYqJNGnWafb12oevkV1clbfrYC61Ht5429eQ6O2/yKPvLF2udqKsjozXr95OsT6+oY2bdrH5brc2fv892LUjZmK119g9/mGZV3bsVxO8tZkfxG1L+FuF5hmwu8r9jOm03l6NtjLDVWemqEjWDZsfXpEo78WClfbPUUbBUNDOlmpo4CNaPb5bLEB8OfEfF7ytdKnxHMzh//oG/rtz1fhck34FCuMXmMHjXyl9DeK7ze4PE489kM7Z045LI1WiyYQ0jbPTA0c5qQzqTta8Wb7Qt25pt1LA+Nv64wQda40wkkP9blbJ1K9I2/uikjT6x5rDtiJNNPEtV5DvHn7+doCEbiTWdTlltTZVGF8RhhZtPkooqdtRZLdZiFm0/qqKAyUjIralW1zRh1iVs0Zk4zyGDPx6JtgbLXNz9K2qh8yNJpVqdP4ar4oUtcYtDgXtp4t4S5lwHENcpWZMsO0+7rKA92WymLVL3ClSrWMShwZnNRFtHsZrRjg70ZzrUZcW8+7gOjhO6dzR25KDn7QzaRP03XvVdcIPEr19aHgZ63q6AtgITQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZBIUGLoJCgRVBI0CIoJGgRFBK0CAoJWgSFBC2CQoIWQSFBi6CQoEVQSNAiKCRoERQStAgKCVoEhQQtgkKCFkEhQYugkKBFUEjQIigkaBEUErQICglaBIUELYJCghZB8f85ChaZEjaUZgAAAABJRU5ErkJggg==",$w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA1ASURBVHgB7Zt7jFTVHcd/d2Z2WZbdZd1ll8cuq4ggj74QNFbENhqMomK1pE0bg9imSiMxGiMSNaYR/yAkptQEQatEE1uVBLHlkfgoRJGC2EqwIM/yfu2yLOyys+zsvHq/Zzizd2bvPP4ogr98P2Eyj3vumXPP+Zzf/Z0zrBOJJpNCiBICQogiKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFRSaqIJCE1VQaKIKCk1UQaGJKig0UQWFJqqg0EQVFJqogkITVVBoogoKTVRBoYkqKDRRBYUmqqDQRBUUmqiCQhNVUGiiCgpNVEGhiSooNFEFhSaqoNBEFaHiiyZTj6R9TcjFxnH/OannIikotCMJ11/3QYnJpSCtHaQOSNLJn1TkPeok426FcaHM5NIDB+MpJ/MQyHWyk4y5zwkh3z16enokHA5LMtk3ECWjUYmfP+++8DnmypJMROTyDmCJC1L7t9E35XAuQVSOuh392WefybvvviuHDx+WESNGyJ133inTpk2TkpISIYVBH65atUqWLl0qXV1dcs8998hjjz0m/fv3l2QsJq2bN8nRtWsk3t0ttROuk6Zf/FKC/fqZc2Pt2yTe9k9X6G4JVlwrofqpbvp6ufY7pHYNdYJ9jjiRaNZUdfNlR+LybXL69GmZM2eOrFy5UhKJ3rtCIBCQmTNnyqJFi6S8vFxIft5//315+OGHpaOjw7x33AXV3LlzZf78+dKy8XPZteiPEusKy4WD0nj3dBk9+/eSCP9XIof+7GaX3RdqcqRk0M1SMvTnvt9jI7/jFLdYu1jlU0JnJhl9Ug6niDQDX+h3O/MjHo/L2bNn89a1ePFiWb16dYbMAO/ffPNNefnll4UUZsOGDWmZAfp27dq15vXZ7f/plTl1UE6u/4d5Ge/42iOzOSixM//qUz/Go9uN7oj+eJx3UxfcFXKBsUcZWx7nZo+xt62oy1t3JBLJWT51Ut9jgb4FCov61ltvyYIFC6QY0MHz5s2T1tZW3+MHDx409aHxloqKCrnrrrvS79944w05c+ZMzu/YtGmTvPTSSxKLxaSY9uBOUMyERNuWL19uUqFiWLhwoYmG7733XsGyR48elUceecRE1M2bNxcsjzTsxRdflNdee82I4QfuaNnYKOcX7ZyAvWUH/WrLeGflRB/bgIbPMG5+7YGcKI8ytjzOhazZkwDHUIcVGO/x7K3DD8dsIyfytLoImV955RWz4GhqapLnn3++YPm3337bPEaNGiVbtmzpc/zEiRNy8uTJ9PuBAwca4e6999507nzs2DHp7Oz0rR8Djck1ZswYCQaDeduCjnnqqafkgQceMLl6IZB7VldXm2sthueee84I/frrrxcs29LSIlVVVTJ06FDZvn17wfK7du2SF154QZYsWWL63w+sObJTsxkzZpjn2knXu/lyWcaxRjfHBsHqia4JpRnHQrVT0q8hGGTLFQQgqldSyOgNUNlk14Xzc0mLcljk5g5AmUKHvCc6RQh9yy23mIiIGXX77bcXLA95EOXKyspk0KBBfY6HQqGMnOmZZ54xUfSJJ55Id1KuRSGi/uzZs+Xxxx+XqVOnFsy53nnnHZk1a5bU1dXJ9OnTpRCDBw82bUP5Yrj11ltNvZCvELgm25b169dLMdTU1EhpaWnO47fddpt88sknJoVra2uT+++/36xBzLnXTZTrFiyUI3//QKJucKi9/nppnHa3ORbo3yBlI+ZItO1z166wBCvHuULflK7XRkz7es2aNXLDDTfIFVdckR4bjJX3tfdcCIuAhOBgxwifobw9ng8b5X3HF+p4Pk4vCs0J7lZdMXk7hG5vb5c77rijYFlcHKIKGgO50QleEKkwELt37zYRFmKuW7fOzErLuHHjZOPGjTJgwICMc/fv3y/Hjx+XyZMnF7XgOHfunLlL3HjjjX3qygXuHrW1tUXttGDC4HohKaJlPjDAX3zxhbnmhoYGcwcr1A6bW1599dXm7vFtAeFsWgFPli1bJtdcc43pw0mTJpnPke6gTRgHlLWS2lQCD/SjvYuiP/u5OyyoD9dlgxrGB+eiHkwaWx4BEcEvm6TZ7Qj1pla9Qqf295zif2X8v4E05umnn/a9TeGikVI8+uijQgoTjUflUOsBae08LQ3VDdJYO9wNYKlB7YnG5Zv9rXLiVKc0DamScSPrPOPt5sbRY5LoOiXJQL2EKnvTLK/Q4MCBA2YNgDvG+PHjzWdeoTGONkojMGESQmB7HHiFxnF7B/CmU0ifbPlcQieMvUF3PZDKnj0l3P0Nt/LgJTAat15cCBZViPwW5NNPPvmkPPTQQ0IKE46E5YOvVsjnezZIJBaRqrIquW/SDPnJtT+Vjs6ILFn+lfxt/R7pjsSkZmCZ/Pa+H8mvpo13s9ConJUPZWDsG+k5GZbuozHpN8zNx8febOpFlIRYNooi9x89erTU19env9uWsa+t0EiR8D47ZbBy4jMct0L73TltmZx46s3Yh467szt0if7/HToAiyPkZ1jo4baK2zbSDf6wUhxbD38lS9ctNlHaUldZJ3/42XzZsq1V5v1pnUR6ehdf/UqD8vGrv5ZIebN8Hf+L/DA4QipbKqT9y2/k/Jc7pPHZV8UpTf3wgkjrTQO9IDojgnp3WfLtTkBOlLeCZ6cd2SCS53IglkB9vceyYrhzYSZJTpqbm03lyEfRsMbGRskHOsFu1aBhmN1+oM4JEyaYHYWdO3eavBK/FuYCkRyzHD/KoG7MbLQduwbZoGP37t1rOhFl0PF25YxcMHu7C/ntqVOnzHEsZNHuHTt2mLb5LWyxpYjbLPbb8R2INhjQK6+80mxBekG9WPSivUOGDEmfi/7Erf2qq65K58f4fiwwcWvH9XojoG3/2LFje9sRbsuQGXT1dEmb+3nz6XCGzADvm9vC4pSFpS05Qo7EfyBNsRqJtrs7C4f3Suxsu5RciMJ2MYq+9oqHtqB/svsQ/YDryl7wYZxRlzda4zXK45q8kwCfo+5c0TnVjszvzRDacQIST8QllCe6HzlyxHS+nYEQL9eCDGU++ugj84xBhKBY9OVjz549Zh8XK/R8Qm/dutUsKCEwJgzaAlkefPDBPmXRIcj7sMrGNiFys8rKSrOgxJ0gezBwfZ9++qlZ3GEhg0kIsfxkBmgHdhXwjPKoD+9R3k9o5KOYtGgTFoPYrUE59BHaZYOE3bLCZERbMQmwqMbnhw4dMtfuFXpw1RAJunvLGENLRVmlDKqok6ZhjjuuAYnFe7e5ystKZFh9hUScfnK+Z4DsPlEj+/6dkMF7fyz15Y0SqqnNaDtEhJB2rxjX6bf3Daykdr/ajkMuV3AMExl12/QjX3mAS3Gyvr/PT9+xWNTNo9FY/4rQ+RgQrLrxxViJ5gLl9u3bZwYJEiGaYr+4ECtWrDD1Dh8+PGcZ3Cns1g8mDDob7cEEywYdirJYyEBSDAI6GnL7RWi7UMFxmwOiDlwDhM3GruIRbSEd2mEjNSaRt160G3XjLoAHIhDknzJlinlGee8Ohr2z2KiOSYPzJk6caMZi5MiR6bIJd2H/8Y4PZfW2VRKN9UhV/4Eyc/Is+V7D993BT8pf1+yQZSu3SSQak+rKMnn2dzfJ5AnDzc7X5pMRWb4m7P5EHpcJbtT7zdwqqRlz+aZ6uJ5E0p2kocw29hE69RNkj5QEnZxSk8ublo4Wd5fjlAyrHibV5ZnbpEebO+R4S6cMH1IpQ+sqM887k3DvGlEZ1RSSmkFBuVwxjsaSEnKDmeMUiNAAkQWRGqlHMMC/0iKXD3G4GXdlDpX6/9TvJzSwUiNGh0JutHYYrcmlI5FALp7Afxw1aUbO3D2X0AA/tqCSeDxmfpJBCpLKQig3ufiYv2LFz+7J1O/bwWDIfQT6pBle8gpt8f4PKEie/ltZQi4ijpPaeTOBNJBf5PQ5xQhNyHeF/wEM2yGelHbyZgAAAABJRU5ErkJggg==",qw=Zn(t=>{const{onClose:e}=t,{toolbarVerticalPosition:i,changeToolbarVerticalPosition:f}=ji,[v,w]=we.useState(i);we.useEffect(()=>{v!==i&&w(i)},[i]);const C=g=>{w(g.target.value)},E=()=>{f(v),e()},O=()=>{e()};return U.jsxs(Ww,{onClose:O,open:!0,children:[U.jsxs(Hw,{children:["  "," ",U.jsx(Yw,{variant:"text",onClick:E,children:""})]}),U.jsx(zw,{children:U.jsx(me.RadioGroup,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:v,onChange:C,children:U.jsxs(Do,{flexDirection:"row",className:"controller-wrapper",children:[U.jsxs(Do,{flexDirection:"column",className:"controller",children:[U.jsx("img",{src:Gw,alt:" ",onClick:()=>{w("top")}}),U.jsx(Od,{value:"top",labelPlacement:"top",control:U.jsx(Ad,{}),label:" "})]}),U.jsxs(Do,{flexDirection:"column",className:"controller",children:[U.jsx("img",{src:$w,alt:" ",onClick:()=>{w("bottom")}}),U.jsx(Od,{value:"bottom",labelPlacement:"top",control:U.jsx(Ad,{}),label:" "})]})]})})})]})}),Kw=Zn(()=>{const{core:t,touch:e,toolbarPosition:i}=It(),{toolbarVerticalPosition:f}=ji,[v,w]=we.useState(null),[C,E]=we.useState(t.config.usePencil),[O,g]=we.useState(null),[o,h]=we.useState(!1),[c,n]=we.useState(!1),a=we.useCallback(Nw.debounce(x=>{w(x),n(T=>!T)},100),[]),s=x=>{x.preventDefault(),x.stopPropagation();const T=x.currentTarget;a(T)},u=()=>{w(null),n(!1)},p=x=>{const T=x.target;E(!T.checked),t.setUsePencil(!T.checked)},l=x=>{u(),h(!0)},m=()=>{h(!1)},y=()=>{t.rotateBaseImage90()},b=c?"simple-popper":void 0;return U.jsxs(U.Fragment,{children:[U.jsx(tr,{"aria-describedby":b,Icon:()=>U.jsx(Dt,{variant:"more"}),onClick:s,onTouchEnd:s,style:{touchAction:"none"}}),v&&U.jsx(Uw,{id:b,open:c,disablePortal:!1,anchorEl:v,placement:i==="right"?"left":f==="bottom"?"top":"bottom",modifiers:[{name:"flip",enabled:!1,options:{altBoundary:!0,rootBoundary:"document",padding:8}},{name:"offset",options:{offset:[0,40]}},{name:"arrow",enabled:!0,options:{element:O}}],children:U.jsxs("div",{children:[U.jsx("span",{ref:g,className:"arrow",style:{lineHeight:0,zIndex:"10"},children:U.jsx(Dt,{variant:"arrow",width:14,height:12,style:{display:i==="right"?"none":"inline-block"}})}),U.jsx(me.ClickAwayListener,{onClickAway:u,children:e===!0?U.jsxs(Pd,{children:[U.jsxs(Ks,{children:[U.jsx(me.ListItemText,{children:" "}),U.jsx(Vw,{checked:!C,onChange:p})]}),U.jsx(Ks,{onClick:l,children:U.jsx(me.ListItemText,{children:"  "})}),U.jsx(Ks,{onClick:y,children:U.jsx(me.ListItemText,{children:U.jsxs(Do,{gap:"8px",flexDirection:"row",children:["90  ",U.jsx(Dt,{variant:"clockwise90"})]})})})]}):U.jsx(Pd,{children:U.jsx(Ks,{onClick:y,children:U.jsx(me.ListItemText,{children:U.jsxs(Do,{gap:"8px",flexDirection:"row",children:["90  ",U.jsx(Dt,{variant:"clockwise90"})]})})})})})]})}),o&&U.jsx(qw,{onClose:m})]})});function Dd(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"undo"}),...t})}function Md(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"redo"}),...t})}function Qw(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"calendar"}),...t})}function Zw(){const{core:t}=It(),e=i=>{const f=new Date;t.addText(Sh(f,"yyyy-MM-dd"),{shaking:!0},!0)};return U.jsx(tr,{disableToolbar:!0,Icon:Qw,onClick:e,tooltip:""})}function Jw(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(Dt,{variant:"bookmark_2"}),...t})}var Ju={},Rd={exports:{}};(function(t){function e(i){return i&&i.__esModule?i:{default:i}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Rd);var Mo=Rd.exports,el={};function ex(t,e){return nt({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const tx=["mode","contrastThreshold","tonalOffset"],kd={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Po.white,default:Po.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},tl={text:{primary:Po.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Po.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Id(t,e,i,f){const v=f.light||f,w=f.dark||f*1.5;t[e]||(t.hasOwnProperty(i)?t[e]=t[i]:e==="light"?t.light=z1(t.main,v):e==="dark"&&(t.dark=H1(t.main,w)))}function rx(t="light"){return t==="dark"?{main:ki[200],light:ki[50],dark:ki[400]}:{main:ki[700],light:ki[400],dark:ki[800]}}function nx(t="light"){return t==="dark"?{main:ii[200],light:ii[50],dark:ii[400]}:{main:ii[500],light:ii[300],dark:ii[700]}}function ix(t="light"){return t==="dark"?{main:ni[500],light:ni[300],dark:ni[700]}:{main:ni[700],light:ni[400],dark:ni[800]}}function ox(t="light"){return t==="dark"?{main:oi[400],light:oi[300],dark:oi[700]}:{main:oi[700],light:oi[500],dark:oi[900]}}function sx(t="light"){return t==="dark"?{main:si[400],light:si[300],dark:si[700]}:{main:si[800],light:si[500],dark:si[900]}}function ax(t="light"){return t==="dark"?{main:Ii[400],light:Ii[300],dark:Ii[700]}:{main:"#ed6c02",light:Ii[500],dark:Ii[900]}}function ux(t){const{mode:e="light",contrastThreshold:i=3,tonalOffset:f=.2}=t,v=mr(t,tx),w=t.primary||rx(e),C=t.secondary||nx(e),E=t.error||ix(e),O=t.info||ox(e),g=t.success||sx(e),o=t.warning||ax(e);function h(s){const u=hd(s,tl.text.primary)>=i?tl.text.primary:kd.text.primary;if(process.env.NODE_ENV!=="production"){const p=hd(s,u);p<3&&console.error([`MUI: The contrast ratio of ${p}:1 for ${u} on ${s}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join(`
`))}return u}const c=({color:s,name:u,mainShade:p=500,lightShade:l=300,darkShade:m=700})=>{if(s=nt({},s),!s.main&&s[p]&&(s.main=s[p]),!s.hasOwnProperty("main"))throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${u?` (${u})`:""} provided to augmentColor(color) is invalid.
The color object needs to have a \`main\` property or a \`${p}\` property.`:Pi(11,u?` (${u})`:"",p));if(typeof s.main!="string")throw new Error(process.env.NODE_ENV!=="production"?`MUI: The color${u?` (${u})`:""} provided to augmentColor(color) is invalid.
\`color.main\` should be a string, but \`${JSON.stringify(s.main)}\` was provided instead.

Did you intend to use one of the following approaches?

import { green } from "@mui/material/colors";

const theme1 = createTheme({ palette: {
  primary: green,
} });

const theme2 = createTheme({ palette: {
  primary: { main: green[500] },
} });`:Pi(12,u?` (${u})`:"",JSON.stringify(s.main)));return Id(s,"light",l,f),Id(s,"dark",m,f),s.contrastText||(s.contrastText=h(s.main)),s},n={dark:tl,light:kd};return process.env.NODE_ENV!=="production"&&(n[e]||console.error(`MUI: The palette mode \`${e}\` is not supported.`)),hn(nt({common:nt({},Po),mode:e,primary:c({color:w,name:"primary"}),secondary:c({color:C,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:c({color:E,name:"error"}),warning:c({color:o,name:"warning"}),info:c({color:O,name:"info"}),success:c({color:g,name:"success"}),grey:qt,contrastThreshold:i,getContrastText:h,augmentColor:c,tonalOffset:f},n[e]),v)}const lx=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function cx(t){return Math.round(t*1e5)/1e5}const jd={textTransform:"uppercase"},Ld='"Roboto", "Helvetica", "Arial", sans-serif';function fx(t,e){const i=typeof e=="function"?e(t):e,{fontFamily:f=Ld,fontSize:v=14,fontWeightLight:w=300,fontWeightRegular:C=400,fontWeightMedium:E=500,fontWeightBold:O=700,htmlFontSize:g=16,allVariants:o,pxToRem:h}=i,c=mr(i,lx);process.env.NODE_ENV!=="production"&&(typeof v!="number"&&console.error("MUI: `fontSize` is required to be a number."),typeof g!="number"&&console.error("MUI: `htmlFontSize` is required to be a number."));const n=v/14,a=h||(p=>`${p/g*n}rem`),s=(p,l,m,y,b)=>nt({fontFamily:f,fontWeight:p,fontSize:a(l),lineHeight:m},f===Ld?{letterSpacing:`${cx(y/l)}em`}:{},b,o),u={h1:s(w,96,1.167,-1.5),h2:s(w,60,1.2,-.5),h3:s(C,48,1.167,0),h4:s(C,34,1.235,.25),h5:s(C,24,1.334,0),h6:s(E,20,1.6,.15),subtitle1:s(C,16,1.75,.15),subtitle2:s(E,14,1.57,.1),body1:s(C,16,1.5,.15),body2:s(C,14,1.43,.15),button:s(E,14,1.75,.4,jd),caption:s(C,12,1.66,.4),overline:s(C,12,2.66,1,jd),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return hn(nt({htmlFontSize:g,pxToRem:a,fontFamily:f,fontSize:v,fontWeightLight:w,fontWeightRegular:C,fontWeightMedium:E,fontWeightBold:O},u),c,{clone:!1})}const hx=.2,dx=.14,gx=.12;function St(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${hx})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${dx})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${gx})`].join(",")}const px=["none",St(0,2,1,-1,0,1,1,0,0,1,3,0),St(0,3,1,-2,0,2,2,0,0,1,5,0),St(0,3,3,-2,0,3,4,0,0,1,8,0),St(0,2,4,-1,0,4,5,0,0,1,10,0),St(0,3,5,-1,0,5,8,0,0,1,14,0),St(0,3,5,-1,0,6,10,0,0,1,18,0),St(0,4,5,-2,0,7,10,1,0,2,16,1),St(0,5,5,-3,0,8,10,1,0,3,14,2),St(0,5,6,-3,0,9,12,1,0,3,16,2),St(0,6,6,-3,0,10,14,1,0,4,18,3),St(0,6,7,-4,0,11,15,1,0,4,20,3),St(0,7,8,-4,0,12,17,2,0,5,22,4),St(0,7,8,-4,0,13,19,2,0,5,24,4),St(0,7,9,-4,0,14,21,2,0,5,26,4),St(0,8,9,-5,0,15,22,2,0,6,28,5),St(0,8,10,-5,0,16,24,2,0,6,30,5),St(0,8,11,-5,0,17,26,2,0,6,32,5),St(0,9,11,-5,0,18,28,2,0,7,34,6),St(0,9,12,-6,0,19,29,2,0,7,36,6),St(0,10,13,-6,0,20,31,3,0,8,38,7),St(0,10,13,-6,0,21,33,3,0,8,40,7),St(0,10,14,-6,0,22,35,3,0,8,42,7),St(0,11,14,-7,0,23,36,3,0,9,44,8),St(0,11,15,-7,0,24,38,3,0,9,46,8)],vx=["duration","easing","delay"],mx={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yx={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Bd(t){return`${Math.round(t)}ms`}function _x(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function bx(t){const e=nt({},mx,t.easing),i=nt({},yx,t.duration);return nt({getAutoHeightDuration:_x,create:(v=["all"],w={})=>{const{duration:C=i.standard,easing:E=e.easeInOut,delay:O=0}=w,g=mr(w,vx);if(process.env.NODE_ENV!=="production"){const o=c=>typeof c=="string",h=c=>!isNaN(parseFloat(c));!o(v)&&!Array.isArray(v)&&console.error('MUI: Argument "props" must be a string or Array.'),!h(C)&&!o(C)&&console.error(`MUI: Argument "duration" must be a number or a string but found ${C}.`),o(E)||console.error('MUI: Argument "easing" must be a string.'),!h(O)&&!o(O)&&console.error('MUI: Argument "delay" must be a number or a string.'),Object.keys(g).length!==0&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(g).join(",")}].`)}return(Array.isArray(v)?v:[v]).map(o=>`${o} ${typeof C=="string"?C:Bd(C)} ${E} ${typeof O=="string"?O:Bd(O)}`).join(",")}},t,{easing:e,duration:i})}const wx={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},xx=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Cx(t={},...e){const{mixins:i={},palette:f={},transitions:v={},typography:w={}}=t,C=mr(t,xx);if(t.vars)throw new Error(process.env.NODE_ENV!=="production"?"MUI: `vars` is a private field used for CSS variables support.\nPlease use another name.":Pi(18));const E=ux(f),O=$u(t);let g=hn(O,{mixins:ex(O.breakpoints,i),palette:E,shadows:px.slice(),typography:fx(E,w),transitions:bx(v),zIndex:nt({},wx)});if(g=hn(g,C),g=e.reduce((o,h)=>hn(o,h),g),process.env.NODE_ENV!=="production"){const o=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],h=(c,n)=>{let a;for(a in c){const s=c[a];if(o.indexOf(a)!==-1&&Object.keys(s).length>0){if(process.env.NODE_ENV!=="production"){const u=zu("",a);console.error([`MUI: The \`${n}\` component increases the CSS specificity of the \`${a}\` internal state.`,"You can not override it like this: ",JSON.stringify(c,null,2),"",`Instead, you need to use the '&.${u}' syntax:`,JSON.stringify({root:{[`&.${u}`]:s}},null,2),"","https://mui.com/r/state-classes-guide"].join(`
`))}c[a]={}}}};Object.keys(g.components).forEach(c=>{const n=g.components[c].styleOverrides;n&&c.indexOf("Mui")===0&&h(n,c)})}return g.unstable_sxConfig=nt({},Hs,C==null?void 0:C.unstable_sxConfig),g.unstable_sx=function(h){return zs({sx:h,theme:this})},g}const Fd=Cx();function Sx({props:t,name:e}){return U1({props:t,name:e,defaultTheme:Fd})}const Tx=N1({defaultTheme:Fd,rootShouldForwardProp:t=>Xs(t)&&t!=="classes"});function Ex(t){return zu("MuiSvgIcon",t)}Sb("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Ox=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Ax=t=>{const{color:e,fontSize:i,classes:f}=t,v={root:["root",e!=="inherit"&&`color${tn(e)}`,`fontSize${tn(i)}`]};return xb(v,Ex,f)},Px=Tx("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,i.color!=="inherit"&&e[`color${tn(i.color)}`],e[`fontSize${tn(i.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var i,f,v,w,C,E,O,g,o,h,c,n,a,s,u,p,l;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(i=t.transitions)==null||(f=i.create)==null?void 0:f.call(i,"fill",{duration:(v=t.transitions)==null||(w=v.duration)==null?void 0:w.shorter}),fontSize:{inherit:"inherit",small:((C=t.typography)==null||(E=C.pxToRem)==null?void 0:E.call(C,20))||"1.25rem",medium:((O=t.typography)==null||(g=O.pxToRem)==null?void 0:g.call(O,24))||"1.5rem",large:((o=t.typography)==null||(h=o.pxToRem)==null?void 0:h.call(o,35))||"2.1875rem"}[e.fontSize],color:(c=(n=(t.vars||t).palette)==null||(a=n[e.color])==null?void 0:a.main)!=null?c:{action:(s=(t.vars||t).palette)==null||(u=s.action)==null?void 0:u.active,disabled:(p=(t.vars||t).palette)==null||(l=p.action)==null?void 0:l.disabled,inherit:void 0}[e.color]}}),rl=Ee.forwardRef(function(e,i){const f=Sx({props:e,name:"MuiSvgIcon"}),{children:v,className:w,color:C="inherit",component:E="svg",fontSize:O="medium",htmlColor:g,inheritViewBox:o=!1,titleAccess:h,viewBox:c="0 0 24 24"}=f,n=mr(f,Ox),a=nt({},f,{color:C,component:E,fontSize:O,instanceFontSize:e.fontSize,inheritViewBox:o,viewBox:c}),s={};o||(s.viewBox=c);const u=Ax(a);return U.jsxs(Px,nt({as:E,className:id(u.root,w),focusable:"false",color:g,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:i},s,n,{ownerState:a,children:[v,h?U.jsx("title",{children:h}):null]}))});process.env.NODE_ENV!=="production"&&(rl.propTypes={children:Qe.node,classes:Qe.object,className:Qe.string,color:Qe.oneOfType([Qe.oneOf(["inherit","action","disabled","primary","secondary","error","info","success","warning"]),Qe.string]),component:Qe.elementType,fontSize:Qe.oneOfType([Qe.oneOf(["inherit","large","medium","small"]),Qe.string]),htmlColor:Qe.string,inheritViewBox:Qe.bool,shapeRendering:Qe.string,sx:Qe.oneOfType([Qe.arrayOf(Qe.oneOfType([Qe.func,Qe.object,Qe.bool])),Qe.func,Qe.object]),titleAccess:Qe.string,viewBox:Qe.string}),rl.muiName="SvgIcon";const Nd=rl;function Dx(t,e){function i(f,v){return U.jsx(Nd,nt({"data-testid":`${e}Icon`,ref:v},f,{children:t}))}return process.env.NODE_ENV!=="production"&&(i.displayName=`${e}Icon`),i.muiName=Nd.muiName,Ee.memo(Ee.forwardRef(i))}const Mx=Fc(Object.freeze(Object.defineProperty({__proto__:null,capitalize:tn,createChainedFunction:nb,createSvgIcon:Dx,debounce:ib,deprecatedPropType:ob,isMuiElement:sb,ownerDocument:Yh,ownerWindow:ab,requirePropFactory:ub,setRef:Wh,unstable_ClassNameGenerator:{configure:t=>{process.env.NODE_ENV!=="production"&&console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),Kh.configure(t)}},unstable_useEnhancedEffect:Hh,unstable_useId:cb,unsupportedProp:fb,useControlled:hb,useEventCallback:db,useForkRef:gb,useIsFocusVisible:wb},Symbol.toStringTag,{value:"Module"})));var Vd;function Ro(){return Vd||(Vd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Mx}(el)),el}var Rx=Mo;Object.defineProperty(Ju,"__esModule",{value:!0});var Ud=Ju.default=void 0,kx=Rx(Ro()),Ix=U,jx=(0,kx.default)((0,Ix.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");Ud=Ju.default=jx;function Lx({bp:t,onSelect:e,onDelete:i}){const[f,v]=we.useState(null),w=O=>{O.stopPropagation(),v(O.currentTarget)},C=async O=>{O.stopPropagation(),E(),i(t.id)},E=()=>{v(null)};return U.jsxs(me.ListItem,{button:!0,onClick:()=>e(t.contents),children:[U.jsx(me.ListItemText,{primary:t.contents}),U.jsx(me.IconButton,{onClick:w,children:U.jsx(Ud,{})}),U.jsx(me.Menu,{anchorEl:f,open:!!f,onClose:E,children:U.jsx(me.MenuItem,{onClick:C,children:""})})]})}function Bx({open:t,boilerplates:e,onSelect:i,onClose:f,onDelete:v}){const w=E=>{i(E),f()},C=async E=>{v(E)};return U.jsxs(me.Dialog,{fullWidth:!0,maxWidth:"xs",onClose:f,open:t,children:[U.jsx(me.DialogTitle,{children:"  "}),U.jsx(me.List,{sx:{pt:0},children:e.map(E=>U.jsx(Lx,{bp:E,onSelect:w,onDelete:C},E.id))})]})}const Qs=me.styled(tr)(()=>`
  &.inner-btn {
    gap: 10px !important;
    &.svg-20 {
      svg,path {
        width: 20px;
        height: 20px;
      }
    }
    &.flex-row {
      flex-direction: row !important;
    }
    &.flex-column {
      flex-direction: column !important;
    }
    &.bg-grey {
      .MuiIconButton-root {
        background: ${qt[200]};
      }
    }
    .MuiTypography-root {
      background: ${qt[200]};
      border-radius: 2px;
      padding: 0 6px;
      line-height: 18px;
    }
    svg,path {
      fill: #000000;
    }
  }
`),Fx=me.styled(me.CircularProgress)`
  color: #2c62f6;
`,Nx=me.styled(me.Dialog)(()=>`
  .MuiDialog-paper {
    max-width: 660px;
    min-height: 480px;
  }
`),Vx=me.styled(me.Button)(()=>`
  width: 100%;
  height: 100%;
  padding: 0;
`),Ux=me.styled(me.DialogTitle)(()=>`
  font-size: 15px;
  font-weight: 700;
  line-height: 21.72px;

  border-bottom: 1px solid #DEE2EC;
  display: flex;
  justify-content: space-between;

`),Yx=me.styled(me.DialogContent)(()=>`
  padding: 7px !important;
`),Yd=me.styled(me.IconButton)(()=>`
  padding: 0;
  

  &.delete-btn {
    position: absolute;
    top: 4px;
    right: 4px;
  }
`),Wx=me.styled(me.List)(()=>`
  display: flex;
  gap: 2px;
  flex-wrap: wrap;
  padding: 0;
`),Hx=me.styled(me.ListItem)(()=>`
  padding: 0;
  width: 106px;
  height: 106px;
`),zx=me.styled(me.Box)(()=>`
  &.image-item {
    width: 106px;
    height: 106px;
    background: #EAEAEA;
    display: inline-flex;
    justify-content: center;
    position: relative;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }
`);var nl={},Xx=Mo;Object.defineProperty(nl,"__esModule",{value:!0});var il=nl.default=void 0,Gx=Xx(Ro()),$x=U,qx=(0,Gx.default)((0,$x.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");il=nl.default=qx;function Kx({bp:t,onSelect:e,onDelete:i}){const f=async v=>{v.stopPropagation(),i(t.id)};return U.jsx(Hx,{children:U.jsxs(zx,{className:"image-item",children:[U.jsx(Vx,{onClick:()=>e(t.contents),children:t.contents.thumbnailUrl?U.jsx("img",{src:t.contents.thumbnailUrl}):U.jsx(Fx,{})}),U.jsx(Yd,{onClick:f,className:"delete-btn",children:U.jsx(Dt,{variant:"delete"})})]})})}function Qx({open:t,boilerplates:e,onSelect:i,onClose:f,onDelete:v}){const w=E=>{i(E.originalUrl),f()},C=async E=>{v(E)};return U.jsxs(Nx,{maxWidth:"xs",onClose:f,open:t,children:[U.jsxs(Ux,{children:["  ",U.jsx(Yd,{"aria-label":"close",onClick:f,children:U.jsx(il,{})})]}),U.jsx(Yx,{children:U.jsx(Wx,{children:e.map(E=>U.jsx(Kx,{bp:E,onSelect:w,onDelete:C},E.id))})})]})}const Zx=Zn(()=>{const{core:t,boilerplate:e,toolbarPosition:i}=It(),{toolbarVerticalPosition:f}=ji,[v,w]=we.useState(null),[C,E]=we.useState(!1),[O,g]=we.useState(!1),[o,h]=we.useState([]),[c,n]=we.useState([]),{tool:a,setTool:s}=Hr(),u=a===Be.SIMPLE_INPUT,p=we.useCallback(async()=>{var se;if(!((se=e==null?void 0:e[0])!=null&&se.onLoadBoilerplate))return;const $=await e[0].onLoadBoilerplate();h($)},[e]),l=we.useCallback(async()=>{var se;if(!((se=e==null?void 0:e[1])!=null&&se.onLoadBoilerplate))return;const $=await e[1].onLoadBoilerplate();n($)},[e]),m=$=>{if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");s(Be.SIMPLE_INPUT),w($.currentTarget)},y=$=>{t.addText($,void 0,!0),E(!1),s(Be.PAN)},b=async $=>{var se;(se=e==null?void 0:e[0])!=null&&se.onDeleteBoilerplate&&await e[0].onDeleteBoilerplate($),h(fe=>fe.filter(le=>le.id!==$))},x=async()=>{var $;($=e==null?void 0:e[0])!=null&&$.onLoadBoilerplate&&(await p(),E(se=>!se))},T=()=>{w(null),s(Be.PAN)},M=$=>{t.addImage($),g(!1),s(Be.PAN)},I=async $=>{var se;(se=e==null?void 0:e[1])!=null&&se.onDeleteBoilerplate&&await e[1].onDeleteBoilerplate($),n(fe=>fe.filter(le=>le.id!==$))},R=async()=>{var $;($=e==null?void 0:e[1])!=null&&$.onLoadBoilerplate&&(await l(),g(se=>!se))},W=!!v,K=W?"simple-popover":void 0;return U.jsxs("div",{style:{position:"relative"},children:[U.jsx(me.Popover,{id:K,open:W,anchorEl:v,onClose:T,anchorOrigin:i==="bottom"?f==="bottom"?{vertical:-15,horizontal:"left"}:{vertical:60,horizontal:"left"}:{vertical:"top",horizontal:-20},transformOrigin:i==="bottom"?f==="bottom"?{vertical:"bottom",horizontal:"left"}:{vertical:"top",horizontal:"left"}:{vertical:"top",horizontal:"right"},PaperProps:{sx:{background:"none",boxShadow:"none"}},children:U.jsxs("div",{style:i==="bottom"?{display:"flex",flexDirection:"column",gap:"8px"}:{display:"flex",flexDirection:"row",gap:"8px"},children:[U.jsx(Qs,{className:`inner-btn ${i==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>U.jsx(Dt,{variant:"bookmark_text"}),onClick:x,disableToolbar:!0,tooltip:" "}),U.jsx(Qs,{className:`inner-btn ${i==="bottom"?"flex-row":"flex-column"} svg-20 bg-grey`,Icon:()=>U.jsx(Dt,{variant:"bookmark_image"}),onClick:R,disableToolbar:!0,tooltip:" "})]})}),U.jsx(Qs,{selected:u,disableToolbar:!0,Icon:Jw,onClick:m,tooltip:""}),U.jsx(Bx,{open:C,onClose:()=>{E(!1)},onSelect:y,onDelete:b,boilerplates:o}),U.jsx(Qx,{open:O,onClose:()=>{g(!1)},onSelect:M,onDelete:I,boilerplates:c})]})});function Jx(){const{core:t}=It(),{tool:e}=Hr(),[i,f]=we.useState(e?t.getToolConfig(e):null),[v,w]=we.useState(t.getHistoryInfo()),[C,E]=we.useState(t.available),O=h=>{t.undo()},g=h=>{t.redo()};we.useEffect(()=>{e&&f(t.getToolConfig(e))},[t,e]),we.useEffect(()=>t.on($t.Event.AVAILABILITY_CHANGE,E),[t]),we.useEffect(()=>t.on($t.Event.HISTORY_CHANGE,w),[t]);const o=h=>{const c=t.updateToolConfig(e,{color:h});f(c)};return U.jsx($s,{leadingItems:U.jsxs(U.Fragment,{children:[U.jsx(_d,{}),U.jsx(wd,{}),U.jsx(Pw,{}),U.jsx(Rw,{}),U.jsx(Fw,{}),U.jsx(jw,{}),U.jsx(Iw,{}),U.jsx(Zw,{}),U.jsx(Zx,{})]}),palette:U.jsx(Ku,{value:i==null?void 0:i.color,onChange:o}),trailingItems:U.jsxs(U.Fragment,{children:[U.jsx(tr,{disabled:!C||v.index<=0,Icon:Dd,onClick:O,tooltip:""}),U.jsx(tr,{disabled:!C||v.index>=v.histories-1,Icon:Md,onClick:g,tooltip:""}),U.jsx(Kw,{})]})})}var ol={},eC=Mo;Object.defineProperty(ol,"__esModule",{value:!0});var Wd=ol.default=void 0,tC=eC(Ro()),rC=U,nC=(0,tC.default)((0,rC.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM23 11v2h-8v-2h8z"}),"TextDecrease");Wd=ol.default=nC;var sl={},iC=Mo;Object.defineProperty(sl,"__esModule",{value:!0});var Hd=sl.default=void 0,oC=iC(Ro()),sC=U,aC=(0,oC.default)((0,sC.jsx)("path",{d:"M.99 19h2.42l1.27-3.58h5.65L11.59 19h2.42L8.75 5h-2.5L.99 19zm4.42-5.61L7.44 7.6h.12l2.03 5.79H5.41zM20 11h3v2h-3v3h-2v-3h-3v-2h3V8h2v3z"}),"TextIncrease");Hd=sl.default=aC;var al={},uC=Mo;Object.defineProperty(al,"__esModule",{value:!0});var ul=al.default=void 0,lC=uC(Ro()),cC=U,fC=(0,lC.default)((0,cC.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");ul=al.default=fC;const zd=me.styled(tr)(()=>`
  &.save-btn {
    svg, path {
      width: 20px;
      height: 20px;
    }
  }
  &.delete-btn {
    margin-top: 16px;
  }
`),hC=({value:t,onChange:e})=>{const{toolbarPosition:i}=It();return U.jsxs(me.Stack,{spacing:2,direction:i==="bottom"?"row":"column-reverse",sx:{mb:1,...i==="bottom"&&{width:200},...i==="right"&&{height:200}},alignItems:"center",children:[U.jsx(Wd,{}),U.jsx(me.Slider,{orientation:i==="bottom"?"horizontal":"vertical",value:t,onChange:e}),U.jsx(Hd,{})]})};function dC({editorMode:t}){const{core:e,boilerplate:i,toolbarPosition:f}=It();if(!i)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const[v,w]=we.useState(e.getSelectedTextSize()),[C,E]=we.useState(e.getSelectedTextColor()),O=()=>{e.deleteSelectedObject()},g=c=>{const n=c.target.value;e.changeSelectedTextSize(n),w(n)},o=c=>{e.changeSelectedTextColor(c),E(c)},h=async()=>{var c;(c=i==null?void 0:i[0])!=null&&c.onSaveBoilerplate&&await i[0].onSaveBoilerplate(e.getSelectedTextContents())};return U.jsx(U.Fragment,{children:U.jsx($s,{leadingItems:U.jsxs(U.Fragment,{children:[U.jsx(hC,{value:v,onChange:g}),t==="image"&&U.jsx(zd,{className:"save-btn",Icon:()=>U.jsx(Dt,{variant:"library_add"}),onClick:h,tooltip:f==="bottom"?"  ":U.jsxs(U.Fragment,{children:["  ",U.jsx("br",{}),""]}),disableToolbar:!0})]}),palette:U.jsx(Ku,{value:C,onChange:o}),trailingItems:U.jsx(zd,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:ul,onClick:O})})})}function gC(t){function e(F,B,L,X,A){for(var k=0,V=0,z=0,Z=0,J,Y,he=0,ie=0,ee,Q=ee=J=0,ae=0,de=0,ue=0,pe=0,xe=L.length,Ie=xe-1,Pe,oe="",Ae="",Fe="",Ve="",Ge;ae<xe;){if(Y=L.charCodeAt(ae),ae===Ie&&V+Z+z+k!==0&&(V!==0&&(Y=V===47?10:47),Z=z=k=0,xe++,Ie++),V+Z+z+k===0){if(ae===Ie&&(0<de&&(oe=oe.replace(c,"")),0<oe.trim().length)){switch(Y){case 32:case 9:case 59:case 13:case 10:break;default:oe+=L.charAt(ae)}Y=59}switch(Y){case 123:for(oe=oe.trim(),J=oe.charCodeAt(0),ee=1,pe=++ae;ae<xe;){switch(Y=L.charCodeAt(ae)){case 123:ee++;break;case 125:ee--;break;case 47:switch(Y=L.charCodeAt(ae+1)){case 42:case 47:e:{for(Q=ae+1;Q<Ie;++Q)switch(L.charCodeAt(Q)){case 47:if(Y===42&&L.charCodeAt(Q-1)===42&&ae+2!==Q){ae=Q+1;break e}break;case 10:if(Y===47){ae=Q+1;break e}}ae=Q}}break;case 91:Y++;case 40:Y++;case 34:case 39:for(;ae++<Ie&&L.charCodeAt(ae)!==Y;);}if(ee===0)break;ae++}switch(ee=L.substring(pe,ae),J===0&&(J=(oe=oe.replace(h,"").trim()).charCodeAt(0)),J){case 64:switch(0<de&&(oe=oe.replace(c,"")),Y=oe.charCodeAt(1),Y){case 100:case 109:case 115:case 45:de=B;break;default:de=le}if(ee=e(B,de,ee,Y,A+1),pe=ee.length,0<_e&&(de=i(le,oe,ue),Ge=E(3,ee,de,B,$,K,pe,Y,A,X),oe=de.join(""),Ge!==void 0&&(pe=(ee=Ge.trim()).length)===0&&(Y=0,ee="")),0<pe)switch(Y){case 115:oe=oe.replace(x,C);case 100:case 109:case 45:ee=oe+"{"+ee+"}";break;case 107:oe=oe.replace(l,"$1 $2"),ee=oe+"{"+ee+"}",ee=fe===1||fe===2&&w("@"+ee,3)?"@-webkit-"+ee+"@"+ee:"@"+ee;break;default:ee=oe+ee,X===112&&(ee=(Ae+=ee,""))}else ee="";break;default:ee=e(B,i(B,oe,ue),ee,X,A+1)}Fe+=ee,ee=ue=de=Q=J=0,oe="",Y=L.charCodeAt(++ae);break;case 125:case 59:if(oe=(0<de?oe.replace(c,""):oe).trim(),1<(pe=oe.length))switch(Q===0&&(J=oe.charCodeAt(0),J===45||96<J&&123>J)&&(pe=(oe=oe.replace(" ",":")).length),0<_e&&(Ge=E(1,oe,B,F,$,K,Ae.length,X,A,X))!==void 0&&(pe=(oe=Ge.trim()).length)===0&&(oe="\0\0"),J=oe.charCodeAt(0),Y=oe.charCodeAt(1),J){case 0:break;case 64:if(Y===105||Y===99){Ve+=oe+L.charAt(ae);break}default:oe.charCodeAt(pe-1)!==58&&(Ae+=v(oe,J,Y,oe.charCodeAt(2)))}ue=de=Q=J=0,oe="",Y=L.charCodeAt(++ae)}}switch(Y){case 13:case 10:V===47?V=0:1+J===0&&X!==107&&0<oe.length&&(de=1,oe+="\0"),0<_e*ne&&E(0,oe,B,F,$,K,Ae.length,X,A,X),K=1,$++;break;case 59:case 125:if(V+Z+z+k===0){K++;break}default:switch(K++,Pe=L.charAt(ae),Y){case 9:case 32:if(Z+k+V===0)switch(he){case 44:case 58:case 9:case 32:Pe="";break;default:Y!==32&&(Pe=" ")}break;case 0:Pe="\\0";break;case 12:Pe="\\f";break;case 11:Pe="\\v";break;case 38:Z+V+k===0&&(de=ue=1,Pe="\f"+Pe);break;case 108:if(Z+V+k+se===0&&0<Q)switch(ae-Q){case 2:he===112&&L.charCodeAt(ae-3)===58&&(se=he);case 8:ie===111&&(se=ie)}break;case 58:Z+V+k===0&&(Q=ae);break;case 44:V+z+Z+k===0&&(de=1,Pe+="\r");break;case 34:case 39:V===0&&(Z=Z===Y?0:Z===0?Y:Z);break;case 91:Z+V+z===0&&k++;break;case 93:Z+V+z===0&&k--;break;case 41:Z+V+k===0&&z--;break;case 40:if(Z+V+k===0){if(J===0)switch(2*he+3*ie){case 533:break;default:J=1}z++}break;case 64:V+z+Z+k+Q+ee===0&&(ee=1);break;case 42:case 47:if(!(0<Z+k+z))switch(V){case 0:switch(2*Y+3*L.charCodeAt(ae+1)){case 235:V=47;break;case 220:pe=ae,V=42}break;case 42:Y===47&&he===42&&pe+2!==ae&&(L.charCodeAt(pe+2)===33&&(Ae+=L.substring(pe,ae+1)),Pe="",V=0)}}V===0&&(oe+=Pe)}ie=he,he=Y,ae++}if(pe=Ae.length,0<pe){if(de=B,0<_e&&(Ge=E(2,Ae,de,F,$,K,pe,X,A,X),Ge!==void 0&&(Ae=Ge).length===0))return Ve+Ae+Fe;if(Ae=de.join(",")+"{"+Ae+"}",fe*se!==0){switch(fe!==2||w(Ae,2)||(se=0),se){case 111:Ae=Ae.replace(y,":-moz-$1")+Ae;break;case 112:Ae=Ae.replace(m,"::-webkit-input-$1")+Ae.replace(m,"::-moz-$1")+Ae.replace(m,":-ms-input-$1")+Ae}se=0}}return Ve+Ae+Fe}function i(F,B,L){var X=B.trim().split(u);B=X;var A=X.length,k=F.length;switch(k){case 0:case 1:var V=0;for(F=k===0?"":F[0]+" ";V<A;++V)B[V]=f(F,B[V],L).trim();break;default:var z=V=0;for(B=[];V<A;++V)for(var Z=0;Z<k;++Z)B[z++]=f(F[Z]+" ",X[V],L).trim()}return B}function f(F,B,L){var X=B.charCodeAt(0);switch(33>X&&(X=(B=B.trim()).charCodeAt(0)),X){case 38:return B.replace(p,"$1"+F.trim());case 58:return F.trim()+B.replace(p,"$1"+F.trim());default:if(0<1*L&&0<B.indexOf("\f"))return B.replace(p,(F.charCodeAt(0)===58?"":"$1")+F.trim())}return F+B}function v(F,B,L,X){var A=F+";",k=2*B+3*L+4*X;if(k===944){F=A.indexOf(":",9)+1;var V=A.substring(F,A.length-1).trim();return V=A.substring(0,F).trim()+V+";",fe===1||fe===2&&w(V,1)?"-webkit-"+V+V:V}if(fe===0||fe===2&&!w(A,1))return A;switch(k){case 1015:return A.charCodeAt(10)===97?"-webkit-"+A+A:A;case 951:return A.charCodeAt(3)===116?"-webkit-"+A+A:A;case 963:return A.charCodeAt(5)===110?"-webkit-"+A+A:A;case 1009:if(A.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+A+A;case 978:return"-webkit-"+A+"-moz-"+A+A;case 1019:case 983:return"-webkit-"+A+"-moz-"+A+"-ms-"+A+A;case 883:if(A.charCodeAt(8)===45)return"-webkit-"+A+A;if(0<A.indexOf("image-set(",11))return A.replace(W,"$1-webkit-$2")+A;break;case 932:if(A.charCodeAt(4)===45)switch(A.charCodeAt(5)){case 103:return"-webkit-box-"+A.replace("-grow","")+"-webkit-"+A+"-ms-"+A.replace("grow","positive")+A;case 115:return"-webkit-"+A+"-ms-"+A.replace("shrink","negative")+A;case 98:return"-webkit-"+A+"-ms-"+A.replace("basis","preferred-size")+A}return"-webkit-"+A+"-ms-"+A+A;case 964:return"-webkit-"+A+"-ms-flex-"+A+A;case 1023:if(A.charCodeAt(8)!==99)break;return V=A.substring(A.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+V+"-webkit-"+A+"-ms-flex-pack"+V+A;case 1005:return a.test(A)?A.replace(n,":-webkit-")+A.replace(n,":-moz-")+A:A;case 1e3:switch(V=A.substring(13).trim(),B=V.indexOf("-")+1,V.charCodeAt(0)+V.charCodeAt(B)){case 226:V=A.replace(b,"tb");break;case 232:V=A.replace(b,"tb-rl");break;case 220:V=A.replace(b,"lr");break;default:return A}return"-webkit-"+A+"-ms-"+V+A;case 1017:if(A.indexOf("sticky",9)===-1)break;case 975:switch(B=(A=F).length-10,V=(A.charCodeAt(B)===33?A.substring(0,B):A).substring(F.indexOf(":",7)+1).trim(),k=V.charCodeAt(0)+(V.charCodeAt(7)|0)){case 203:if(111>V.charCodeAt(8))break;case 115:A=A.replace(V,"-webkit-"+V)+";"+A;break;case 207:case 102:A=A.replace(V,"-webkit-"+(102<k?"inline-":"")+"box")+";"+A.replace(V,"-webkit-"+V)+";"+A.replace(V,"-ms-"+V+"box")+";"+A}return A+";";case 938:if(A.charCodeAt(5)===45)switch(A.charCodeAt(6)){case 105:return V=A.replace("-items",""),"-webkit-"+A+"-webkit-box-"+V+"-ms-flex-"+V+A;case 115:return"-webkit-"+A+"-ms-flex-item-"+A.replace(M,"")+A;default:return"-webkit-"+A+"-ms-flex-line-pack"+A.replace("align-content","").replace(M,"")+A}break;case 973:case 989:if(A.charCodeAt(3)!==45||A.charCodeAt(4)===122)break;case 931:case 953:if(R.test(F)===!0)return(V=F.substring(F.indexOf(":")+1)).charCodeAt(0)===115?v(F.replace("stretch","fill-available"),B,L,X).replace(":fill-available",":stretch"):A.replace(V,"-webkit-"+V)+A.replace(V,"-moz-"+V.replace("fill-",""))+A;break;case 962:if(A="-webkit-"+A+(A.charCodeAt(5)===102?"-ms-"+A:"")+A,L+X===211&&A.charCodeAt(13)===105&&0<A.indexOf("transform",10))return A.substring(0,A.indexOf(";",27)+1).replace(s,"$1-webkit-$2")+A}return A}function w(F,B){var L=F.indexOf(B===1?":":"{"),X=F.substring(0,B!==3?L:10);return L=F.substring(L+1,F.length-1),Oe(B!==2?X:X.replace(I,"$1"),L,B)}function C(F,B){var L=v(B,B.charCodeAt(0),B.charCodeAt(1),B.charCodeAt(2));return L!==B+";"?L.replace(T," or ($1)").substring(4):"("+B+")"}function E(F,B,L,X,A,k,V,z,Z,J){for(var Y=0,he=B,ie;Y<_e;++Y)switch(ie=ce[Y].call(o,F,he,L,X,A,k,V,z,Z,J)){case void 0:case!1:case!0:case null:break;default:he=ie}if(he!==B)return he}function O(F){switch(F){case void 0:case null:_e=ce.length=0;break;default:if(typeof F=="function")ce[_e++]=F;else if(typeof F=="object")for(var B=0,L=F.length;B<L;++B)O(F[B]);else ne=!!F|0}return O}function g(F){return F=F.prefix,F!==void 0&&(Oe=null,F?typeof F!="function"?fe=1:(fe=2,Oe=F):fe=0),g}function o(F,B){var L=F;if(33>L.charCodeAt(0)&&(L=L.trim()),D=L,L=[D],0<_e){var X=E(-1,B,L,L,$,K,0,0,0,0);X!==void 0&&typeof X=="string"&&(B=X)}var A=e(le,L,B,0,0);return 0<_e&&(X=E(-2,A,L,L,$,K,A.length,0,0,0),X!==void 0&&(A=X)),D="",se=0,K=$=1,A}var h=/^\0+/g,c=/[\0\r\f]/g,n=/: */g,a=/zoo|gra/,s=/([,: ])(transform)/g,u=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,l=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,y=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,T=/([\s\S]*?);/g,M=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,R=/stretch|:\s*\w+\-(?:conte|avail)/,W=/([^-])(image-set\()/,K=1,$=1,se=0,fe=1,le=[],ce=[],_e=0,Oe=null,ne=0,D="";return o.use=O,o.set=g,t!==void 0&&g(t),o}var pC={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vC=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Xd=Tb(function(t){return vC.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),ll={exports:{}},dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd;function mC(){if(Gd)return dt;Gd=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,f=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,O=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,o=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,u=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,l=t?Symbol.for("react.scope"):60119;function m(b){if(typeof b=="object"&&b!==null){var x=b.$$typeof;switch(x){case e:switch(b=b.type,b){case O:case g:case f:case w:case v:case h:return b;default:switch(b=b&&b.$$typeof,b){case E:case o:case a:case n:case C:return b;default:return x}}case i:return x}}}function y(b){return m(b)===g}return dt.AsyncMode=O,dt.ConcurrentMode=g,dt.ContextConsumer=E,dt.ContextProvider=C,dt.Element=e,dt.ForwardRef=o,dt.Fragment=f,dt.Lazy=a,dt.Memo=n,dt.Portal=i,dt.Profiler=w,dt.StrictMode=v,dt.Suspense=h,dt.isAsyncMode=function(b){return y(b)||m(b)===O},dt.isConcurrentMode=y,dt.isContextConsumer=function(b){return m(b)===E},dt.isContextProvider=function(b){return m(b)===C},dt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},dt.isForwardRef=function(b){return m(b)===o},dt.isFragment=function(b){return m(b)===f},dt.isLazy=function(b){return m(b)===a},dt.isMemo=function(b){return m(b)===n},dt.isPortal=function(b){return m(b)===i},dt.isProfiler=function(b){return m(b)===w},dt.isStrictMode=function(b){return m(b)===v},dt.isSuspense=function(b){return m(b)===h},dt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===f||b===g||b===w||b===v||b===h||b===c||typeof b=="object"&&b!==null&&(b.$$typeof===a||b.$$typeof===n||b.$$typeof===C||b.$$typeof===E||b.$$typeof===o||b.$$typeof===u||b.$$typeof===p||b.$$typeof===l||b.$$typeof===s)},dt.typeOf=m,dt}var gt={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function yC(){return $d||($d=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,f=t?Symbol.for("react.fragment"):60107,v=t?Symbol.for("react.strict_mode"):60108,w=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,E=t?Symbol.for("react.context"):60110,O=t?Symbol.for("react.async_mode"):60111,g=t?Symbol.for("react.concurrent_mode"):60111,o=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,c=t?Symbol.for("react.suspense_list"):60120,n=t?Symbol.for("react.memo"):60115,a=t?Symbol.for("react.lazy"):60116,s=t?Symbol.for("react.block"):60121,u=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,l=t?Symbol.for("react.scope"):60119;function m(Y){return typeof Y=="string"||typeof Y=="function"||Y===f||Y===g||Y===w||Y===v||Y===h||Y===c||typeof Y=="object"&&Y!==null&&(Y.$$typeof===a||Y.$$typeof===n||Y.$$typeof===C||Y.$$typeof===E||Y.$$typeof===o||Y.$$typeof===u||Y.$$typeof===p||Y.$$typeof===l||Y.$$typeof===s)}function y(Y){if(typeof Y=="object"&&Y!==null){var he=Y.$$typeof;switch(he){case e:var ie=Y.type;switch(ie){case O:case g:case f:case w:case v:case h:return ie;default:var ee=ie&&ie.$$typeof;switch(ee){case E:case o:case a:case n:case C:return ee;default:return he}}case i:return he}}}var b=O,x=g,T=E,M=C,I=e,R=o,W=f,K=a,$=n,se=i,fe=w,le=v,ce=h,_e=!1;function Oe(Y){return _e||(_e=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ne(Y)||y(Y)===O}function ne(Y){return y(Y)===g}function D(Y){return y(Y)===E}function F(Y){return y(Y)===C}function B(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function L(Y){return y(Y)===o}function X(Y){return y(Y)===f}function A(Y){return y(Y)===a}function k(Y){return y(Y)===n}function V(Y){return y(Y)===i}function z(Y){return y(Y)===w}function Z(Y){return y(Y)===v}function J(Y){return y(Y)===h}gt.AsyncMode=b,gt.ConcurrentMode=x,gt.ContextConsumer=T,gt.ContextProvider=M,gt.Element=I,gt.ForwardRef=R,gt.Fragment=W,gt.Lazy=K,gt.Memo=$,gt.Portal=se,gt.Profiler=fe,gt.StrictMode=le,gt.Suspense=ce,gt.isAsyncMode=Oe,gt.isConcurrentMode=ne,gt.isContextConsumer=D,gt.isContextProvider=F,gt.isElement=B,gt.isForwardRef=L,gt.isFragment=X,gt.isLazy=A,gt.isMemo=k,gt.isPortal=V,gt.isProfiler=z,gt.isStrictMode=Z,gt.isSuspense=J,gt.isValidElementType=m,gt.typeOf=y}()),gt}process.env.NODE_ENV==="production"?ll.exports=mC():ll.exports=yC();var _C=ll.exports,cl=_C,bC={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wC={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},xC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qd={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fl={};fl[cl.ForwardRef]=xC,fl[cl.Memo]=qd;function Kd(t){return cl.isMemo(t)?qd:fl[t.$$typeof]||bC}var CC=Object.defineProperty,SC=Object.getOwnPropertyNames,Qd=Object.getOwnPropertySymbols,TC=Object.getOwnPropertyDescriptor,EC=Object.getPrototypeOf,Zd=Object.prototype;function Jd(t,e,i){if(typeof e!="string"){if(Zd){var f=EC(e);f&&f!==Zd&&Jd(t,f,i)}var v=SC(e);Qd&&(v=v.concat(Qd(e)));for(var w=Kd(t),C=Kd(e),E=0;E<v.length;++E){var O=v[E];if(!wC[O]&&!(i&&i[O])&&!(C&&C[O])&&!(w&&w[O])){var g=TC(e,O);try{CC(t,O,g)}catch{}}}}return t}var OC=Jd;const AC=Bc(OC);function gn(){return(gn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&(t[f]=i[f])}return t}).apply(this,arguments)}var eg=function(t,e){for(var i=[t[0]],f=0,v=e.length;f<v;f+=1)i.push(e[f],t[f+1]);return i},hl=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!So.typeOf(t)},Zs=Object.freeze([]),Dn=Object.freeze({});function ko(t){return typeof t=="function"}function dl(t){return process.env.NODE_ENV!=="production"&&typeof t=="string"&&t||t.displayName||t.name||"Component"}function gl(t){return t&&typeof t.styledComponentId=="string"}var Li=typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",pl=typeof window<"u"&&"HTMLElement"in window,PC=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&(process.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&process.env.REACT_APP_SC_DISABLE_SPEEDY!==""?process.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&process.env.REACT_APP_SC_DISABLE_SPEEDY:process.env.SC_DISABLE_SPEEDY!==void 0&&process.env.SC_DISABLE_SPEEDY!==""?process.env.SC_DISABLE_SPEEDY!=="false"&&process.env.SC_DISABLE_SPEEDY:process.env.NODE_ENV!=="production")),DC=process.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`}:{};function MC(){for(var t=arguments.length<=0?void 0:arguments[0],e=[],i=1,f=arguments.length;i<f;i+=1)e.push(i<0||arguments.length<=i?void 0:arguments[i]);return e.forEach(function(v){t=t.replace(/%[a-z]/,v)}),t}function Bi(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),f=1;f<e;f++)i[f-1]=arguments[f];throw process.env.NODE_ENV==="production"?new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(i.length>0?" Args: "+i.join(", "):"")):new Error(MC.apply(void 0,[DC[t]].concat(i)).trim())}var RC=function(){function t(i){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=i}var e=t.prototype;return e.indexOfGroup=function(i){for(var f=0,v=0;v<i;v++)f+=this.groupSizes[v];return f},e.insertRules=function(i,f){if(i>=this.groupSizes.length){for(var v=this.groupSizes,w=v.length,C=w;i>=C;)(C<<=1)<0&&Bi(16,""+i);this.groupSizes=new Uint32Array(C),this.groupSizes.set(v),this.length=C;for(var E=w;E<C;E++)this.groupSizes[E]=0}for(var O=this.indexOfGroup(i+1),g=0,o=f.length;g<o;g++)this.tag.insertRule(O,f[g])&&(this.groupSizes[i]++,O++)},e.clearGroup=function(i){if(i<this.length){var f=this.groupSizes[i],v=this.indexOfGroup(i),w=v+f;this.groupSizes[i]=0;for(var C=v;C<w;C++)this.tag.deleteRule(v)}},e.getGroup=function(i){var f="";if(i>=this.length||this.groupSizes[i]===0)return f;for(var v=this.groupSizes[i],w=this.indexOfGroup(i),C=w+v,E=w;E<C;E++)f+=this.tag.getRule(E)+`/*!sc*/
`;return f},t}(),Js=new Map,ea=new Map,Io=1,ta=function(t){if(Js.has(t))return Js.get(t);for(;ea.has(Io);)Io++;var e=Io++;return process.env.NODE_ENV!=="production"&&((0|e)<0||e>1<<30)&&Bi(16,""+e),Js.set(t,e),ea.set(e,t),e},kC=function(t){return ea.get(t)},IC=function(t,e){e>=Io&&(Io=e+1),Js.set(t,e),ea.set(e,t)},jC="style["+Li+'][data-styled-version="5.3.11"]',LC=new RegExp("^"+Li+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),BC=function(t,e,i){for(var f,v=i.split(","),w=0,C=v.length;w<C;w++)(f=v[w])&&t.registerName(e,f)},FC=function(t,e){for(var i=(e.textContent||"").split(`/*!sc*/
`),f=[],v=0,w=i.length;v<w;v++){var C=i[v].trim();if(C){var E=C.match(LC);if(E){var O=0|parseInt(E[1],10),g=E[2];O!==0&&(IC(g,O),BC(t,g,E[3]),t.getTag().insertRules(O,f)),f.length=0}else f.push(C)}}},NC=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},tg=function(t){var e=document.head,i=t||e,f=document.createElement("style"),v=function(E){for(var O=E.childNodes,g=O.length;g>=0;g--){var o=O[g];if(o&&o.nodeType===1&&o.hasAttribute(Li))return o}}(i),w=v!==void 0?v.nextSibling:null;f.setAttribute(Li,"active"),f.setAttribute("data-styled-version","5.3.11");var C=NC();return C&&f.setAttribute("nonce",C),i.insertBefore(f,w),f},VC=function(){function t(i){var f=this.element=tg(i);f.appendChild(document.createTextNode("")),this.sheet=function(v){if(v.sheet)return v.sheet;for(var w=document.styleSheets,C=0,E=w.length;C<E;C++){var O=w[C];if(O.ownerNode===v)return O}Bi(17)}(f),this.length=0}var e=t.prototype;return e.insertRule=function(i,f){try{return this.sheet.insertRule(f,i),this.length++,!0}catch{return!1}},e.deleteRule=function(i){this.sheet.deleteRule(i),this.length--},e.getRule=function(i){var f=this.sheet.cssRules[i];return f!==void 0&&typeof f.cssText=="string"?f.cssText:""},t}(),UC=function(){function t(i){var f=this.element=tg(i);this.nodes=f.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(i,f){if(i<=this.length&&i>=0){var v=document.createTextNode(f),w=this.nodes[i];return this.element.insertBefore(v,w||null),this.length++,!0}return!1},e.deleteRule=function(i){this.element.removeChild(this.nodes[i]),this.length--},e.getRule=function(i){return i<this.length?this.nodes[i].textContent:""},t}(),YC=function(){function t(i){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(i,f){return i<=this.length&&(this.rules.splice(i,0,f),this.length++,!0)},e.deleteRule=function(i){this.rules.splice(i,1),this.length--},e.getRule=function(i){return i<this.length?this.rules[i]:""},t}(),rg=pl,WC={isServer:!pl,useCSSOMInjection:!PC},ng=function(){function t(i,f,v){i===void 0&&(i=Dn),f===void 0&&(f={}),this.options=gn({},WC,{},i),this.gs=f,this.names=new Map(v),this.server=!!i.isServer,!this.server&&pl&&rg&&(rg=!1,function(w){for(var C=document.querySelectorAll(jC),E=0,O=C.length;E<O;E++){var g=C[E];g&&g.getAttribute(Li)!=="active"&&(FC(w,g),g.parentNode&&g.parentNode.removeChild(g))}}(this))}t.registerId=function(i){return ta(i)};var e=t.prototype;return e.reconstructWithOptions=function(i,f){return f===void 0&&(f=!0),new t(gn({},this.options,{},i),this.gs,f&&this.names||void 0)},e.allocateGSInstance=function(i){return this.gs[i]=(this.gs[i]||0)+1},e.getTag=function(){return this.tag||(this.tag=(v=(f=this.options).isServer,w=f.useCSSOMInjection,C=f.target,i=v?new YC(C):w?new VC(C):new UC(C),new RC(i)));var i,f,v,w,C},e.hasNameForId=function(i,f){return this.names.has(i)&&this.names.get(i).has(f)},e.registerName=function(i,f){if(ta(i),this.names.has(i))this.names.get(i).add(f);else{var v=new Set;v.add(f),this.names.set(i,v)}},e.insertRules=function(i,f,v){this.registerName(i,f),this.getTag().insertRules(ta(i),v)},e.clearNames=function(i){this.names.has(i)&&this.names.get(i).clear()},e.clearRules=function(i){this.getTag().clearGroup(ta(i)),this.clearNames(i)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(i){for(var f=i.getTag(),v=f.length,w="",C=0;C<v;C++){var E=kC(C);if(E!==void 0){var O=i.names.get(E),g=f.getGroup(C);if(O&&g&&O.size){var o=Li+".g"+C+'[id="'+E+'"]',h="";O!==void 0&&O.forEach(function(c){c.length>0&&(h+=c+",")}),w+=""+g+o+'{content:"'+h+`"}/*!sc*/
`}}}return w}(this)},t}(),HC=/(a)(d)/gi,ig=function(t){return String.fromCharCode(t+(t>25?39:97))};function vl(t){var e,i="";for(e=Math.abs(t);e>52;e=e/52|0)i=ig(e%52)+i;return(ig(e%52)+i).replace(HC,"$1-$2")}var ai=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},og=function(t){return ai(5381,t)};function zC(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(ko(i)&&!gl(i))return!1}return!0}var XC=og("5.3.11"),GC=function(){function t(e,i,f){this.rules=e,this.staticRulesId="",this.isStatic=process.env.NODE_ENV==="production"&&(f===void 0||f.isStatic)&&zC(e),this.componentId=i,this.baseHash=ai(XC,i),this.baseStyle=f,ng.registerId(i)}return t.prototype.generateAndInjectStyles=function(e,i,f){var v=this.componentId,w=[];if(this.baseStyle&&w.push(this.baseStyle.generateAndInjectStyles(e,i,f)),this.isStatic&&!f.hash)if(this.staticRulesId&&i.hasNameForId(v,this.staticRulesId))w.push(this.staticRulesId);else{var C=Fi(this.rules,e,i,f).join(""),E=vl(ai(this.baseHash,C)>>>0);if(!i.hasNameForId(v,E)){var O=f(C,"."+E,void 0,v);i.insertRules(v,E,O)}w.push(E),this.staticRulesId=E}else{for(var g=this.rules.length,o=ai(this.baseHash,f.hash),h="",c=0;c<g;c++){var n=this.rules[c];if(typeof n=="string")h+=n,process.env.NODE_ENV!=="production"&&(o=ai(o,n+c));else if(n){var a=Fi(n,e,i,f),s=Array.isArray(a)?a.join(""):a;o=ai(o,s+c),h+=s}}if(h){var u=vl(o>>>0);if(!i.hasNameForId(v,u)){var p=f(h,"."+u,void 0,v);i.insertRules(v,u,p)}w.push(u)}}return w.join(" ")},t}(),$C=/^\s*\/\/.*$/gm,qC=[":","[",".","#"];function KC(t){var e,i,f,v,w=t===void 0?Dn:t,C=w.options,E=C===void 0?Dn:C,O=w.plugins,g=O===void 0?Zs:O,o=new gC(E),h=[],c=function(s){function u(p){if(p)try{s(p+"}")}catch{}}return function(p,l,m,y,b,x,T,M,I,R){switch(p){case 1:if(I===0&&l.charCodeAt(0)===64)return s(l+";"),"";break;case 2:if(M===0)return l+"/*|*/";break;case 3:switch(M){case 102:case 112:return s(m[0]+l),"";default:return l+(R===0?"/*|*/":"")}case-2:l.split("/*|*/}").forEach(u)}}}(function(s){h.push(s)}),n=function(s,u,p){return u===0&&qC.indexOf(p[i.length])!==-1||p.match(v)?s:"."+e};function a(s,u,p,l){l===void 0&&(l="&");var m=s.replace($C,""),y=u&&p?p+" "+u+" { "+m+" }":m;return e=l,i=u,f=new RegExp("\\"+i+"\\b","g"),v=new RegExp("(\\"+i+"\\b){2,}"),o(p||!u?"":u,y)}return o.use([].concat(g,[function(s,u,p){s===2&&p.length&&p[0].lastIndexOf(i)>0&&(p[0]=p[0].replace(f,n))},c,function(s){if(s===-2){var u=h;return h=[],u}}])),a.hash=g.length?g.reduce(function(s,u){return u.name||Bi(15),ai(s,u.name)},5381).toString():"",a}var sg=we.createContext();sg.Consumer;var ag=we.createContext(),QC=(ag.Consumer,new ng),ml=KC();function ZC(){return we.useContext(sg)||QC}function JC(){return we.useContext(ag)||ml}var eS=function(){function t(e,i){var f=this;this.inject=function(v,w){w===void 0&&(w=ml);var C=f.name+w.hash;v.hasNameForId(f.id,C)||v.insertRules(f.id,C,w(f.rules,C,"@keyframes"))},this.toString=function(){return Bi(12,String(f.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=i}return t.prototype.getName=function(e){return e===void 0&&(e=ml),this.name+e.hash},t}(),tS=/([A-Z])/,rS=/([A-Z])/g,nS=/^ms-/,iS=function(t){return"-"+t.toLowerCase()};function ug(t){return tS.test(t)?t.replace(rS,iS).replace(nS,"-ms-"):t}var lg=function(t){return t==null||t===!1||t===""};function Fi(t,e,i,f){if(Array.isArray(t)){for(var v,w=[],C=0,E=t.length;C<E;C+=1)(v=Fi(t[C],e,i,f))!==""&&(Array.isArray(v)?w.push.apply(w,v):w.push(v));return w}if(lg(t))return"";if(gl(t))return"."+t.styledComponentId;if(ko(t)){if(typeof(g=t)!="function"||g.prototype&&g.prototype.isReactComponent||!e)return t;var O=t(e);return process.env.NODE_ENV!=="production"&&So.isElement(O)&&console.warn(dl(t)+" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details."),Fi(O,e,i,f)}var g;return t instanceof eS?i?(t.inject(i,f),t.getName(f)):t:hl(t)?function o(h,c){var n,a,s=[];for(var u in h)h.hasOwnProperty(u)&&!lg(h[u])&&(Array.isArray(h[u])&&h[u].isCss||ko(h[u])?s.push(ug(u)+":",h[u],";"):hl(h[u])?s.push.apply(s,o(h[u],u)):s.push(ug(u)+": "+(n=u,(a=h[u])==null||typeof a=="boolean"||a===""?"":typeof a!="number"||a===0||n in pC||n.startsWith("--")?String(a).trim():a+"px")+";"));return c?[c+" {"].concat(s,["}"]):s}(t):t.toString()}var cg=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function oS(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),f=1;f<e;f++)i[f-1]=arguments[f];return ko(t)||hl(t)?cg(Fi(eg(Zs,[t].concat(i)))):i.length===0&&t.length===1&&typeof t[0]=="string"?t:cg(Fi(eg(t,i)))}var fg=/invalid hook call/i,ra=new Set,sS=function(t,e){if(process.env.NODE_ENV!=="production"){var i="The component "+t+(e?' with the id of "'+e+'"':"")+` has been created dynamically.
You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,f=console.error;try{var v=!0;console.error=function(w){if(fg.test(w))v=!1,ra.delete(i);else{for(var C=arguments.length,E=new Array(C>1?C-1:0),O=1;O<C;O++)E[O-1]=arguments[O];f.apply(void 0,[w].concat(E))}},we.useRef(),v&&!ra.has(i)&&(console.warn(i),ra.add(i))}catch(w){fg.test(w.message)&&ra.delete(i)}finally{console.error=f}}},aS=function(t,e,i){return i===void 0&&(i=Dn),t.theme!==i.theme&&t.theme||e||i.theme},uS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,lS=/(^-|-$)/g;function yl(t){return t.replace(uS,"-").replace(lS,"")}var cS=function(t){return vl(og(t)>>>0)};function na(t){return typeof t=="string"&&(process.env.NODE_ENV==="production"||t.charAt(0)===t.charAt(0).toLowerCase())}var _l=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},fS=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function hS(t,e,i){var f=t[i];_l(e)&&_l(f)?hg(f,e):t[i]=e}function hg(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),f=1;f<e;f++)i[f-1]=arguments[f];for(var v=0,w=i;v<w.length;v++){var C=w[v];if(_l(C))for(var E in C)fS(E)&&hS(t,C[E],E)}return t}var dg=we.createContext();dg.Consumer;var bl={};function gg(t,e,i){var f=gl(t),v=!na(t),w=e.attrs,C=w===void 0?Zs:w,E=e.componentId,O=E===void 0?function(l,m){var y=typeof l!="string"?"sc":yl(l);bl[y]=(bl[y]||0)+1;var b=y+"-"+cS("5.3.11"+y+bl[y]);return m?m+"-"+b:b}(e.displayName,e.parentComponentId):E,g=e.displayName,o=g===void 0?function(l){return na(l)?"styled."+l:"Styled("+dl(l)+")"}(t):g,h=e.displayName&&e.componentId?yl(e.displayName)+"-"+e.componentId:e.componentId||O,c=f&&t.attrs?Array.prototype.concat(t.attrs,C).filter(Boolean):C,n=e.shouldForwardProp;f&&t.shouldForwardProp&&(n=e.shouldForwardProp?function(l,m,y){return t.shouldForwardProp(l,m,y)&&e.shouldForwardProp(l,m,y)}:t.shouldForwardProp);var a,s=new GC(i,h,f?t.componentStyle:void 0),u=s.isStatic&&C.length===0,p=function(l,m){return function(y,b,x,T){var M=y.attrs,I=y.componentStyle,R=y.defaultProps,W=y.foldedComponentIds,K=y.shouldForwardProp,$=y.styledComponentId,se=y.target,fe=function(X,A,k){X===void 0&&(X=Dn);var V=gn({},A,{theme:X}),z={};return k.forEach(function(Z){var J,Y,he,ie=Z;for(J in ko(ie)&&(ie=ie(V)),ie)V[J]=z[J]=J==="className"?(Y=z[J],he=ie[J],Y&&he?Y+" "+he:Y||he):ie[J]}),[V,z]}(aS(b,we.useContext(dg),R)||Dn,b,M),le=fe[0],ce=fe[1],_e=function(X,A,k,V){var z=ZC(),Z=JC(),J=A?X.generateAndInjectStyles(Dn,z,Z):X.generateAndInjectStyles(k,z,Z);return process.env.NODE_ENV!=="production"&&!A&&V&&V(J),J}(I,T,le,process.env.NODE_ENV!=="production"?y.warnTooManyClasses:void 0),Oe=x,ne=ce.$as||b.$as||ce.as||b.as||se,D=na(ne),F=ce!==b?gn({},b,{},ce):b,B={};for(var L in F)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?B.as=F[L]:(K?K(L,Xd,ne):!D||Xd(L))&&(B[L]=F[L]));return b.style&&ce.style!==b.style&&(B.style=gn({},b.style,{},ce.style)),B.className=Array.prototype.concat(W,$,_e!==$?_e:null,b.className,ce.className).filter(Boolean).join(" "),B.ref=Oe,we.createElement(ne,B)}(a,l,m,u)};return p.displayName=o,(a=we.forwardRef(p)).attrs=c,a.componentStyle=s,a.displayName=o,a.shouldForwardProp=n,a.foldedComponentIds=f?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Zs,a.styledComponentId=h,a.target=f?t.target:t,a.withComponent=function(l){var m=e.componentId,y=function(x,T){if(x==null)return{};var M,I,R={},W=Object.keys(x);for(I=0;I<W.length;I++)M=W[I],T.indexOf(M)>=0||(R[M]=x[M]);return R}(e,["componentId"]),b=m&&m+"-"+(na(l)?l:yl(dl(l)));return gg(l,gn({},y,{attrs:c,componentId:b}),i)},Object.defineProperty(a,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(l){this._foldedDefaultProps=f?hg({},t.defaultProps,l):l}}),process.env.NODE_ENV!=="production"&&(sS(o,h),a.warnTooManyClasses=function(l,m){var y={},b=!1;return function(x){if(!b&&(y[x]=!0,Object.keys(y).length>=200)){var T=m?' with the id of "'+m+'"':"";console.warn("Over 200 classes were generated for component "+l+T+`.
Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),b=!0,y={}}}}(o,h)),Object.defineProperty(a,"toString",{value:function(){return"."+a.styledComponentId}}),v&&AC(a,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),a}var wl=function(t){return function e(i,f,v){if(v===void 0&&(v=Dn),!So.isValidElementType(f))return Bi(1,String(f));var w=function(){return i(f,v,oS.apply(void 0,arguments))};return w.withConfig=function(C){return e(i,f,gn({},v,{},C))},w.attrs=function(C){return e(i,f,gn({},v,{attrs:Array.prototype.concat(v.attrs,C).filter(Boolean)}))},w}(gg,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){wl[t]=wl(t)}),process.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`),process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&typeof window<"u"&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,window["__styled-components-init__"]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window["__styled-components-init__"]+=1);const pg=wl,vg=pg(tr)(({$toolbarPosition:t})=>`
  &.delete-btn {
    margin-top: 16px;
  }
  &.save-library-btn {
    ${t==="bottom"?"width: 100%;":""}
    ${t==="right"?"height: 100%; display: flex !important; justify-content: center;":""}
  }
`);function dS(){const{core:t,boilerplate:e,toolbarPosition:i}=It();if(!e)throw new Error("ImageEditor boilerplate attr must be provided in the edit mode");const f=()=>{t.deleteSelectedObject()},v=async()=>{var C;if(!((C=e==null?void 0:e[1])!=null&&C.onSaveBoilerplate))return;const w=await t.saveImageAsBlob();await e[1].onSaveBoilerplate(w)};return U.jsx($s,{trailingItems:U.jsxs(U.Fragment,{children:[U.jsx(vg,{className:"save-library-btn",tooltip:i==="bottom"?"  ":U.jsxs(U.Fragment,{children:["",U.jsx("br",{})," "]}),disableToolbar:!0,Icon:()=>U.jsx(Dt,{variant:"library_add"}),onClick:v,$toolbarPosition:i}),U.jsx(vg,{className:"delete-btn",tooltip:"",disableToolbar:!0,Icon:ul,onClick:f})]})})}const gS=me.styled(me.Menu)(()=>`

  .${me.listClasses.root} {
    padding:0;
  }
`),mg=me.styled(me.Box)(({theme:t})=>`
  &.boilerplate-header {
    display: flex;
    justify-content: space-between;
    padding: 12px 13px;
    font-weight: 700;
    font-size: 15px;
    line-height: 100%;
    letter-spacing: 0%;
    align-items: center;
    border-bottom: 1px solid ${t.palette.divider};
  }

  .${me.dividerClasses.root} {
    margin: 0;
  }

  .${me.menuItemClasses.root} {
    padding: 17px 20px;

    &:hover {
      background-color: #F9FBFF;
    }
  }

`);function pS({bp:t,onSelect:e}){const i=()=>{e(t.contents)};return U.jsx(me.MenuItem,{onClick:i,sx:{pr:1},children:U.jsx(me.ListItemText,{primary:t.contents})})}const vS=Zn(({anchorEl:t,open:e,onClose:i,onSelect:f,boilerplates:v})=>{const{toolbarPosition:w}=It(),{toolbarVerticalPosition:C}=ji,E=we.useMemo(()=>w==="bottom"&&C==="bottom",[w]),O=we.useMemo(()=>w==="bottom"&&C==="top",[w]),g=we.useMemo(()=>w==="right",[w]);return U.jsxs(gS,{anchorEl:t,open:e,onClose:i,anchorOrigin:{vertical:g?"center":O?"bottom":"top",horizontal:g?"left":"center"},transformOrigin:{vertical:g?"center":O?"top":"bottom",horizontal:g?"right":"center"},PaperProps:{sx:{marginTop:g?"0":O?"38px":E?"-24px":"0",marginLeft:g?"-36px":"0",minWidth:350,display:"flex",flexDirection:"column",overflow:"hidden"}},children:[U.jsxs(mg,{className:"boilerplate-header",children:[" ",U.jsx(me.IconButton,{size:"small",onClick:i,children:U.jsx(il,{fontSize:"small"})})]}),U.jsx(mg,{className:"boilerplate-list",children:v.length===0?U.jsx(me.MenuItem,{disabled:!0,children:U.jsx(me.ListItemText,{primary:"  "})}):v.map((o,h)=>U.jsx(pS,{bp:o,onSelect:f},`boiler-plate-${h}`))})]})}),mS=me.styled(me.Box)(()=>`
  width: 24px;
  height: 24px;
  svg, path {
    fill: #000000;
  }
`);function yS(t){return U.jsx(me.SvgIcon,{inheritViewBox:!0,component:()=>U.jsx(mS,{component:"span",children:U.jsx(Dt,{variant:"customer_template"})}),...t})}const _S=Zn(()=>{const{core:t,boilerplate:e}=It(),[i,f]=we.useState(null),[v,w]=we.useState([]),{tool:C,setTool:E}=Hr(),O=C===Be.SIMPLE_INPUT,g=we.useCallback(async()=>{var a;if(!((a=e==null?void 0:e[2])!=null&&a.onLoadBoilerplate))return;const n=await e[2].onLoadBoilerplate();w(n)},[e]),o=n=>{t.addText(n,{shaking:!0},!0),E(Be.PAN)},h=async n=>{if(!e||e&&!e[0])return;const a=n.currentTarget;await g(),f(a)},c=()=>{f(null)};return U.jsxs("div",{style:{position:"relative"},children:[U.jsx(Qs,{selected:O,disableToolbar:!0,Icon:yS,onClick:h,tooltip:" "}),U.jsx(vS,{anchorEl:i,open:!!i,onClose:c,onSelect:o,boilerplates:v})]})});function bS(){const{core:t}=It(),{tool:e}=Hr(),[i,f]=we.useState(e?t.getToolConfig(e):null),[v,w]=we.useState(t.getHistoryInfo()),[C,E]=we.useState(t.available),O=h=>{const c=t.updateToolConfig(e,{color:h});f(c)},g=()=>{t.undo()},o=()=>{t.redo()};return we.useEffect(()=>{e&&f(t.getToolConfig(e))},[t,e]),we.useEffect(()=>t.on($t.Event.AVAILABILITY_CHANGE,E),[t]),we.useEffect(()=>t.on($t.Event.HISTORY_CHANGE,w),[t]),U.jsx($s,{leadingItems:U.jsxs(U.Fragment,{children:[U.jsx(_d,{}),U.jsx(wd,{}),U.jsx(_S,{})]}),palette:U.jsx(Ku,{value:i==null?void 0:i.color,onChange:O}),trailingItems:U.jsxs(U.Fragment,{children:[U.jsx(tr,{disabled:!C||v.index<=0,Icon:Dd,onClick:g,tooltip:""}),U.jsx(tr,{disabled:!C||v.index>=v.histories-1,Icon:Md,onClick:o,tooltip:""})]})})}const wS=me.styled(me.Paper)(()=>`
  border-radius: 43px;
  box-shadow: 0px 4px 4px 0px #D1D1D140;
`),ui=pg(me.Box)(({$toolbarverticalposition:t,toolbarposition:e,window_height:i,window_width:f,toolbar_width:v,toolbar_height:w,$showcontrolpad:C})=>`
  &.toolbar-wrapper {
    ${C&&(t==="bottom"?"padding-bottom: 10px;":"padding-top: 10px;")}
    display: flex;
    height: ${e==="right"?"100vh":"initial"};
    width: ${e==="right"?"initial":"100vw"};
    justify-content: ${e==="right"&&i&&w&&i<w||e==="bottom"&&f&&v&&f<v?"flex-start":"center"};
    flex-direction: ${e==="right"?"column":"row"};
  }
  &.toggle-show-control-box {
    width: 100%;
    height: 22px;
    overflow:hidden;
    padding-top: 6px;
    display: flex;
    justify-content: flex-end;
    padding-right: 30px;
  }
  &.show-control-btn-wrapper {
    width: 100%;
    padding: 0 40px;
    max-width: 842px;
    height: 88px;
    position:absolute;
    bottom: 0;
    margin: auto;
    transform: translate(-50%);
    left: 50%;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    z-index: 10;
  }
  &.control-wrapper-1 {
    width: calc(100% - 2px);
    position: absolute;
    left: 1px;
    top: 1px;
    z-index: 10;
  }
`),yg=me.styled(me.IconButton)(()=>`
  
  &.show-control-box-btn {
    border: 1px solid #eeeeee;
    border-radius: 2px;
    box-shadow: none;
    &:hover {
      background: none;
    }
    &.border-none {
      border: 0 none;
    }
    &.btn-type-1 {
      width: 60px;
      height: 60px;
      background: #EEEEEE;
      border-radius: 50%;
    }
  }
  
  &.hide-control-box-btn {
    display: flex;
    width: 30px;
    height: 100%;
    padding: 0;
    justify-content: center;
  }
  &.rotate-180 {
    transform: rotate(180deg);
  }
`),xS={[Be.PAN]:yd,[Be.ERASER]:Ed,[Be.FREEDRAW]:md,[Be.MARKER]:xd},CS={[$t.Mode.TEXT]:Td,[$t.Mode.IMAGE]:Zu},SS=()=>{const[t,e]=we.useState({width:window.innerWidth,height:window.innerHeight});return we.useEffect(()=>{let i;const f=()=>{clearTimeout(i),i=setTimeout(()=>{e({width:window.innerWidth,height:window.innerHeight})},100)};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),clearTimeout(i)}},[]),t},TS=({toolbarMode:t})=>{const{tool:e}=Hr(),i=CS[t];if(i)return U.jsx(i,{});const f=xS[e]||bd;return U.jsx(f,{})},ES=({mode:t,editorMode:e})=>{switch(t){case $t.Mode.BRUSH:return e==="image"?U.jsx(Jx,{}):U.jsx(bS,{});case $t.Mode.TEXT:return U.jsx(dC,{editorMode:e});case $t.Mode.IMAGE:return U.jsx(dS,{});default:return null}},OS=Zn(({leadingItems:t,mode:e})=>{const{core:i,toolbarPosition:f}=It(),[v,w]=we.useState(i.mode),[C,E]=we.useState(!0),O=we.useRef(null),{width:g,height:o}=SS(),h=ph(O),{toolbarVerticalPosition:c}=ji;we.useEffect(()=>{const u=i.on($t.Event.MODE_CHANGE,w);return()=>u==null?void 0:u()},[i]);const n=we.useCallback(()=>{E(u=>!u)},[]),a=we.useMemo(()=>{const u=f==="right",p=f==="bottom",l=()=>{const m=u?"gridTemplateRows":"gridTemplateColumns";return v===$t.Mode.IMAGE?{[m]:u?"799px":"655px"}:e==="image"?{[m]:u?"583px 88px 128px":"439px 88px 128px"}:v===$t.Mode.TEXT?e==="template"?{[m]:u?"210px 88px 50px":"200px 88px 50px"}:{[m]:u?"190px 88px 50px":"320px 88px 50px"}:{[m]:u?"190px 88px 88px":"160px 88px 88px"}};return{paper:{display:"flex",backgroundColor:qt[50],alignItems:"center",gap:1,...u&&{flexDirection:"column",width:88,py:2},...p&&{flexDirection:"row",height:88,px:"27px"}},leadingItems:{display:"flex",gap:1,flexDirection:u?"column":"row"},toolbarContents:{display:"grid",position:"relative",color:"black",gap:"16px",...l()}}},[f,v,e]),s=we.useMemo(()=>({toolbarposition:f,$toolbarverticalposition:c,window_width:g,window_height:o,toolbar_width:h==null?void 0:h.width,toolbar_height:h==null?void 0:h.height,$showcontrolpad:C}),[f,c,g,o,h==null?void 0:h.width,h==null?void 0:h.height,C]);return U.jsxs(U.Fragment,{children:[U.jsx(ui,{className:"toolbar-wrapper",...s,children:U.jsx("div",{style:{position:"relative"},children:C&&U.jsxs(wS,{ref:O,sx:a.paper,children:[f==="bottom"&&U.jsx(ui,{className:"control-wrapper-1",toolbarposition:f,children:U.jsx(ui,{className:"toggle-show-control-box",children:U.jsx(yg,{className:"show-control-box-btn rotate-180 hide-control-box-btn border-none",onClick:n,"aria-label":" ",children:U.jsx(Dt,{variant:"fold",width:16,height:16})})})}),t&&U.jsx(ui,{className:"leading-items",sx:a.leadingItems,children:t}),U.jsx(ui,{className:"toolbar-contents",sx:a.toolbarContents,children:U.jsx(ES,{mode:v,editorMode:e})})]})})}),!C&&U.jsx(ui,{className:"toolbar-wrapper control-wrapper-2",$showcontrolpad:C,toolbarposition:f,window_width:g,window_height:o,children:U.jsx(ui,{className:"show-control-btn-wrapper",children:U.jsx(yg,{className:"show-control-box-btn btn-type-1",onClick:n,"aria-label":" ",children:U.jsx(TS,{toolbarMode:v})})})})]})}),_g=we.createContext(null),AS=({editorRef:t,imageUrl:e,children:i,touch:f=!0,boilerplate:v,toolbarPosition:w})=>{const C=we.useMemo(()=>new $t({imageUrl:e,touchEnabled:f}),[e,f]);we.useImperativeHandle(t,()=>({getDataUrl(O){return C.getDataUrl(O)},toBlob(){return C.toBlob()},isDirty(){return C.isDirty()},isBusy(){return C.busy},saveCanvasJson(){return C.saveCanvasJson()},loadCanvasJson(O){C.loadCanvasJson(O)}}),[C]);const E=we.useMemo(()=>({core:C,boilerplate:v,touch:f,toolbarPosition:w}),[v,C,f,w]);return U.jsx(_g.Provider,{value:E,children:i})};function It(){return we.useContext(_g)}function Hr(){var v;const{core:t}=It(),[e,i]=we.useState((v=t.tool)==null?void 0:v.name);return we.useEffect(()=>t.on($t.Event.TOOL_CHANGE,w=>i(w)),[t]),{tool:e,setTool:w=>{t.selectTool(w)}}}const PS=()=>{const t=we.useRef(null),e=ph(t);return U.jsx(Ja,{ref:t,sx:{overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e&&U.jsx(yy,{containerSize:e})})},DS=Zn(we.forwardRef(function({viewOnly:e=!1,imageUrl:i,boilerplate:f,touch:v,toolbarPosition:w="bottom",leadingItems:C,mode:E="image"},O){const{toolbarVerticalPosition:g}=ji,o=we.useMemo(()=>{const h=[{component:U.jsx(PS,{})},{component:U.jsx(U.Fragment,{children:!e&&U.jsx(Ja,{className:"toolbar-wrapper-box",toolbarPosition:w,children:U.jsx(OS,{leadingItems:C,mode:E})})})}];return g==="bottom"?h:h.reverse()},[g]);return U.jsx(AS,{editorRef:O,imageUrl:i,boilerplate:f,touch:v,toolbarPosition:w,children:U.jsx(Ja,{sx:{backgroundColor:"#f5f5f8",height:"100%",display:"flex",flexDirection:w==="right"?"row":"column"},children:o.map((h,c)=>U.jsx(we.Fragment,{children:h.component},c))})})}));Gt.ImageEditor=DS,Object.defineProperty(Gt,Symbol.toStringTag,{value:"Module"})});
